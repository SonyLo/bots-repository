import{L as $,q as n,t as i,x as b,v as t,A as c,H as u,G as v,J as m,F as g,C as p,y as h,K as y,B as _,D as f,R as S,u as V,z as j,P as k,Y as O,O as C}from"./index.es-71d37bd0.js";import{T as M}from"./TelegramChannelHelper-864fe219.js";import{P as w}from"./Pagination-c0ff4992.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{V as F}from"./vue3-json-editor.esm.prod-61e9e0df.js";const P={props:["type","content"],data(){return{url:null}},mounted(){this.url="https://media.your-cashman.com/"}},B={class:"d-flex justify-content-center"},I=["src"],T=["src"],A={key:2,class:"w-100",alt:""},N={key:3,class:"w-100",alt:""},G=["src"],J=["src"];function D(o,e,s,r,a,l){const d=$("lazy");return n(),i("div",B,[(s.type=="video"||s.type=="video_note")&&s.content.indexOf("http")==-1?(n(),i("video",{key:0,class:b(["w-100",{"video-circle":s.type=="video_note"}]),controls:"",poster:"/images/load.gif"},[t("source",{src:a.url+s.content,type:"video/mp4"},null,8,I)],2)):c("",!0),s.content.indexOf("http")!=-1?(n(),i("iframe",{key:1,class:"w-100",style:{"min-height":"300px"},src:s.content,frameborder:"0",allowfullscreen:""},`

        `,8,T)):c("",!0),s.type=="photo"&&s.content.indexOf("http")==-1?u((n(),i("img",A,null,512)),[[d,a.url+s.content]]):c("",!0),s.type=="photo"&&s.content.indexOf("http")!=-1?u((n(),i("img",N,null,512)),[[d,s.content]]):c("",!0),s.type=="audio"&&s.content.indexOf("http")!=-1?(n(),i("audio",{key:4,controls:"",autoplay:"",src:s.content},null,8,G)):c("",!0),s.type=="audio"&&s.content.indexOf("http")==-1?(n(),i("audio",{key:5,controls:"",autoplay:"",src:a.url+s.content},null,8,J)):c("",!0)])}const q=U(P,[["render",D]]),E={class:"row"},z={class:"input-group mb-3"},L={key:0,class:"row"},H={class:"col-12 col-md-12 mb-3"},K={class:"row"},R=["onClick"],Y={class:"card-header d-flex justify-content-between align-items-center"},Q={class:"badge bg-primary rounded-pill mb-0"},W={class:"badge bg-info rounded-pill"},X={class:"card-body"},Z={class:"fw-bold"},x={class:"w-100"},ee={class:"card-footer d-flex justify-content-between"},te=["onClick"],oe=t("i",{class:"fa-solid fa-eye"},null,-1),le=[oe],se=["onClick"],ne=t("i",{class:"fa-brands fa-telegram"},null,-1),ie=[ne],ae=["onClick"],de=t("i",{class:"fa-solid fa-trash"},null,-1),re=[de],ce={class:"col-12"},ue={key:1,class:"row"},he=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ")],-1),me=[he],ge={class:"modal fade",id:"preview-modal",tabindex:"-1","aria-labelledby":"preview-modal-label","aria-hidden":"true"},fe={class:"modal-dialog"},pe={class:"modal-content"},_e={class:"modal-body"},be={key:0,class:"d-flex justify-content-center align-items-center"},ve=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ye={props:["selected","needVideo","needVideoNote","needPhoto","needAudio","needDocument","needSticker"],data(){return{bot:null,previewContent:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...v(["getMedia","getMediaPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMedia()})},methods:{selectMedia(o){this.$emit("select",o)},loadCurrentBot(o=null){return this.$store.dispatch("updateCurrentBot",{bot:o}).then(()=>{this.bot=this.getCurrentBot})},nextMedia(o){this.loadMedia(o)},remove(o){this.$store.dispatch("removeMedia",{dataObject:{mediaId:o}}).then(e=>{this.loadMedia(),this.$notify({title:"Удаление медиа-контента",text:"Медиа контент удален"})}).catch(()=>{})},showPreview(o){this.previewContent=null,this.$nextTick(()=>{this.previewContent=o,new bootstrap.Modal("#preview-modal",{}).show()})},showPreviewInTg(o){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:o}}).then(e=>{this.$notify({title:"Превью медиа-контента",text:"Отправлено в бота"})}).catch(()=>{this.$notify({title:"Превью медиа-контента",text:"Ошибка отправки в канал!"})})},loadMedia(o=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{botId:this.bot.id||null,search:this.search,needVideo:this.needVideo||!1,needVideoNote:this.needVideoNote||!1,needPhoto:this.needPhoto||!1,needAudio:this.needAudio||!1,needDocument:this.needDocument||!1,needSticker:this.needSticker||!1},page:o}).then(e=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},Ce=Object.assign(ye,{__name:"BotMediaList",setup(o){return(e,s)=>(n(),i(g,null,[t("div",E,[t("div",z,[u(t("input",{type:"search",class:"form-control",placeholder:"Поиск файла","aria-label":"Поиск файла","onUpdate:modelValue":s[0]||(s[0]=r=>e.search=r)},null,512),[[m,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=r=>e.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.media.length>0?(n(),i("div",L,[t("div",H,[t("div",K,[(n(!0),i(g,null,p(e.media,(r,a)=>(n(),i("div",{onClick:l=>e.selectMedia(r),class:"col-lg-6 col-12"},[t("div",{class:b(["card mb-2",{"border-info":(o.selected||[]).indexOf(r.file_id)!=-1}])},[t("div",Y,[t("p",Q,"#"+h(r.id),1),t("span",W,h(r.type),1)]),t("div",X,[t("div",Z,h(r.caption??"Без подписи"),1),t("small",x,h(r.file_id),1)]),t("div",ee,[t("div",null,[t("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:l=>e.showPreview(r)},le,8,te),t("a",{href:"javascript:void(0)",class:"btn btn-info",onClick:l=>e.showPreviewInTg(r.id)},ie,8,se)]),t("a",{href:"javascript:void(0)",class:"btn btn-outline-danger text-danger",onClick:l=>e.remove(r.id)},re,8,ae)])],2)],8,R))),256))])]),t("div",ce,[e.media_paginate_object?(n(),y(w,{key:0,onPagination_page:e.nextMedia,pagination:e.media_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(n(),i("div",ue,me)),t("div",ge,[t("div",fe,[t("div",pe,[t("div",_e,[e.previewContent!=null?(n(),i("div",be,[_(q,{type:e.previewContent.type,content:e.previewContent.file_id},null,8,["type","content"])])):c("",!0)]),ve])])])],64))}}),$e={class:"form-floating mb-3"},ke=t("label",{for:"floatingInput"},"Команда",-1),we={class:"form-floating mb-3"},Fe=t("label",{for:"floatingInput"},"Мнемоническое имя",-1),Se={class:"form-floating mb-3"},Ve=t("label",{for:"floatingInput"},"Описание скрипта",-1),je=t("h6",null," Параметры скрипта ",-1),Oe=t("div",{class:"alert alert-info",role:"alert"}," Данные параметры используются для настройки скриптов на стороне сервера ",-1),Me={class:"dropdown"},Ue=t("button",{class:"btn btn-outline-info w-100 dropdown-toggle mb-2",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить ",-1),Pe={class:"dropdown-menu w-100"},Be=["onClick"],Ie={class:"row"},Te={class:"col-12"},Ae=["onClick"],Ne={key:0,class:"row"},Ge={class:"col-md-6 mb-1"},Je={class:"card"},De={class:"card-header d-flex justify-content-between align-items-center"},qe=["onClick"],Ee=t("i",{class:"fa-solid fa-trash-can"},null,-1),ze=[Ee],Le=["onClick"],He=t("i",{class:"fa-solid fa-caret-left"},null,-1),Ke=[He],Re=["onClick"],Ye=t("i",{class:"fa-solid fa-caret-right"},null,-1),Qe=[Ye],We={class:"dropdown"},Xe={class:"btn btn-outline-info dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ze={class:"dropdown-menu"},xe=["onClick"],et={class:"card-body"},tt={class:"form-floating mb-1"},ot=["onUpdate:modelValue","id"],lt=["for"],st={key:0,class:"form-floating mb-1"},nt=["id","onUpdate:modelValue"],it=["for"],at={key:1,class:"form-check mb-1 mt-2"},dt=["onUpdate:modelValue","id"],rt=["for"],ct={key:2,class:"form-floating mb-1 mt-2"},ut=["onUpdate:modelValue","id"],ht=["for"],mt={key:3,class:"form-floating mb-1 mt-2"},gt=["onUpdate:modelValue","id"],ft=["for"],pt={key:4,class:"form-floating mb-1 mt-2"},_t=t("label",{class:"form-label",id:"bot-domain"},"JSON-код",-1),bt={key:5,class:"form-check mb-1 mt-2"},vt=["onUpdate:modelValue","id"],yt=["for"],Ct={key:6,class:"form-floating mb-3"},$t=["id","onUpdate:modelValue"],kt=["for"],wt={key:7,class:"form-floating mb-3"},Ft=["id","onUpdate:modelValue"],St=["for"],Vt={key:1,class:"row"},jt=t("div",{class:"col-12"},[t("p",null,"Параметры скрипта еще не добавлены")],-1),Ot=[jt],Mt={class:"btn btn-primary text-white w-100 mt-2 p-3"},Ut={key:0},Pt={key:1},Bt={props:["item"],components:{Vue3JsonEditor:F},data(){return{filters:[],simple:!0,configTypes:[{title:"Текстовый или числовой параметр",type:"text"},{title:"Большое текстовое поле",type:"large-text"},{title:"Канал обратной связи",type:"channel"},{title:"Логический оператор",type:"boolean"},{title:"Ссылка на изображение",type:"image"},{title:"Цвет",type:"color"},{title:"Geo",type:"geo"},{title:"Номер телефона",type:"phone"},{title:"JSON",type:"json"}],bot:null,photos:[],slugForm:{bot_id:null,id:null,command:null,comment:null,slug:null,config:[],is_global:!0}}},computed:{...v(["getCurrentBot"]),filteredConfigs(){return this.filters.length==0?this.slugForm.config:this.slugForm.config.filter(o=>this.filters.indexOf(o.type)>=0)}},mounted(){this.loadCurrentBot(),this.item&&(this.slugForm.id=this.item.id||null,this.slugForm.command=this.item.command,this.slugForm.comment=this.item.comment,this.slugForm.bot_id=this.item.bot_id,this.slugForm.slug=this.item.slug,this.slugForm.config=this.item.config||[],this.slugForm.is_global=this.item.is_global||!1)},methods:{toggleFilter(o){let e=this.filters.indexOf(o);e>=0?this.filters.splice(e,1):this.filters.push(o)},addTextTo(o,e={text:null}){this.slugForm.config[o].value=e.text},loadCurrentBot(o=null){return this.$store.dispatch("updateCurrentBot",{bot:o}).then(()=>{this.bot=this.getCurrentBot})},submit(){let o=new FormData;Object.keys(this.slugForm).forEach(e=>{const s=this.slugForm[e]||"";typeof s=="object"?o.append(e,JSON.stringify(s)):o.append(e,s)}),this.$store.dispatch(this.slugForm.id===null?"createSlug":"updateSlug",{slugForm:o}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно обновлена",type:"success"}),this.slugForm.id===null&&(this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0),this.$emit("callback")}).catch(e=>{})},onJsonChange(o,e){this.filteredConfigs[e].value=o},addConfig(o){this.slugForm.config.splice(0,0,{key:null,value:null,type:o||"text"})},move(o,e=0){let s=this.slugForm.config[o],r=this.slugForm.config.length||0,a=e===0?o-1>=0?o-1:r-1:o<r-1?o+1:0;this.slugForm.config[o]=this.slugForm.config[a],this.slugForm.config[a]=s},removeConfigItem(o){try{this.slugForm.config.splice(o,1)}catch{this.slugForm.config=[]}},selectPhoto(o,e){this.filteredConfigs[e].value=o.file_id}}},mo=Object.assign(Bt,{__name:"SlugForm",setup(o){return(e,s)=>{const r=$("mask");return n(),i("form",{onSubmit:s[3]||(s[3]=k((...a)=>e.submit&&e.submit(...a),["prevent"]))},[t("div",$e,[u(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>e.slugForm.command=a),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[m,e.slugForm.command]]),ke]),t("div",we,[u(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>e.slugForm.slug=a),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[m,e.slugForm.slug]]),Fe]),t("div",Se,[u(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=a=>e.slugForm.comment=a),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[m,e.slugForm.comment]]),Ve]),je,Oe,t("div",Me,[Ue,t("ul",Pe,[(n(!0),i(g,null,p(e.configTypes,(a,l)=>(n(),i("li",null,[t("a",{class:"dropdown-item",onClick:d=>e.addConfig(a.type)},h(a.title||"Не установлен"),9,Be)]))),256))])]),t("div",Ie,[t("div",Te,[t("p",null,[f("Фильтры: "),(n(!0),i(g,null,p(e.configTypes,(a,l)=>(n(),i("span",{class:b(["badge mb-1 bg-gray-100 cursor-pointer mr-1",{"bg-info":e.filters.indexOf(a.type)>=0}]),onClick:d=>e.toggleFilter(a.type)},h(a.type),11,Ae))),256))])])]),e.filteredConfigs.length>0?(n(),i("div",Ne,[(n(!0),i(g,null,p(e.filteredConfigs,(a,l)=>(n(),i("div",Ge,[t("div",Je,[t("div",De,[t("div",null,[t("button",{onClick:d=>e.removeConfigItem(l),class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ze,8,qe),t("button",{onClick:d=>e.move(l,0),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ke,8,Le),t("button",{onClick:d=>e.move(l,1),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Qe,8,Re)]),e.bot&&e.filteredConfigs[l].type==="channel"?(n(),y(M,{key:0,token:e.bot.bot_token,onCallback:d=>e.addTextTo(l,d)},null,8,["token","onCallback"])):c("",!0),t("div",null,[t("div",We,[t("button",Xe,h(e.filteredConfigs[l].type),1),t("ul",Ze,[(n(!0),i(g,null,p(e.configTypes,d=>(n(),i("li",null,[t("a",{class:"dropdown-item",onClick:io=>e.filteredConfigs[l].type=d.type},h(d.title||a.type),9,xe)]))),256))])])])]),t("div",et,[t("div",tt,[u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":d=>e.filteredConfigs[l].key=d,id:"field-input-key-"+l,placeholder:"name@example.com"},null,8,ot),[[m,e.filteredConfigs[l].key]]),t("label",{for:"field-input-key-"+l},"Ключ",8,lt)]),e.filteredConfigs[l].type==="text"||e.filteredConfigs[l].type==="channel"?(n(),i("div",st,[u(t("input",{type:"text",class:"form-control",id:"field-input-"+l,"onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,placeholder:"name@example.com"},null,8,nt),[[m,e.filteredConfigs[l].value]]),t("label",{for:"field-input-"+l},"Значение",8,it)])):c("",!0),e.filteredConfigs[l].type==="boolean"?(n(),i("div",at,[u(t("input",{class:"form-check-input","onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,type:"checkbox",value:"false",id:"filtered-config-"+l+"-checkbox"},null,8,dt),[[S,e.filteredConfigs[l].value]]),t("label",{class:"form-check-label",for:"filtered-config-"+l+"-checkbox"},h(e.filteredConfigs[l].value?"Истина":"Ложь"),9,rt)])):c("",!0),e.filteredConfigs[l].type==="geo"?(n(),i("div",ct,[u(t("input",{class:"form-control",placeholder:"##.######,##.######","onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,type:"text",id:"filtered-config-"+l+"-geo"},null,8,ut),[[r,"##.######,##.######"],[m,e.filteredConfigs[l].value]]),t("label",{for:"filtered-config-"+l+"-geo"},"Значение",8,ht)])):c("",!0),e.filteredConfigs[l].type==="phone"?(n(),i("div",mt,[u(t("input",{class:"form-control",placeholder:"+7(###)###-##-##","onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,type:"text",id:"filtered-config-"+l+"-phone"},null,8,gt),[[r,"+7(###)###-##-##"],[m,e.filteredConfigs[l].value]]),t("label",{for:"filtered-config-"+l+"-phone"},"Значение",8,ft)])):c("",!0),e.filteredConfigs[l].type==="json"?(n(),i("div",pt,[_t,_(V(F),{mode:"form",modelValue:e.filteredConfigs[l].value,"onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,"show-btns":!1,expandedOnStart:!0,onJsonChange:d=>e.onJsonChange(d,l)},null,8,["modelValue","onUpdate:modelValue","onJsonChange"])])):c("",!0),e.filteredConfigs[l].type==="color"?(n(),i("div",bt,[u(t("input",{class:"form-control","onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,type:"color",id:"filtered-config-"+l+"-color"},null,8,vt),[[m,e.filteredConfigs[l].value]]),t("label",{for:"filtered-config-"+l+"-color"},[t("p",{style:j({color:e.filteredConfigs[l].value})},"Цвет: "+h(e.filteredConfigs[l].value),5)],8,yt)])):c("",!0),e.filteredConfigs[l].type==="large-text"?(n(),i("div",Ct,[u(t("textarea",{class:"form-control",id:"field-input-"+l,"onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,placeholder:"name@example.com"},`
                            `,8,$t),[[m,e.filteredConfigs[l].value]]),t("label",{for:"field-input-"+l},"Значение",8,kt)])):c("",!0),e.filteredConfigs[l].type==="image"?(n(),i("div",wt,[u(t("input",{class:"form-control mb-2",id:"field-input-"+l,type:"text",disabled:"true","onUpdate:modelValue":d=>e.filteredConfigs[l].value=d,placeholder:"name@example.com"},null,8,Ft),[[m,e.filteredConfigs[l].value]]),t("label",{for:"field-input-"+l},"FileId ссылка на изображение",8,St),_(Ce,{"need-video":!1,"need-photo":!0,selected:[e.filteredConfigs[l].value],onSelect:d=>e.selectPhoto(d,l)},null,8,["selected","onSelect"])])):c("",!0)])])]))),256))])):(n(),i("div",Vt,Ot)),t("button",Mt,[e.slugForm.id==null?(n(),i("span",Ut," Сохранить команду ")):(n(),i("span",Pt," Обновить команду "))])],32)}}}),It={class:"row"},Tt={class:"col-12"},At={class:"form-floating mb-3"},Nt=t("label",{for:"floatingInput"},"Быстрый поиск команды",-1),Gt={key:0,class:"row"},Jt={class:"col-lg-3 col-md-6 col-12 mb-3"},Dt=["onClick"],qt={class:"card-body"},Et={style:{"word-wrap":"break-word"},class:"mb-0"},zt=t("i",{class:"fa-solid fa-scroll"},null,-1),Lt={class:"mb-2"},Ht={class:"col-12"},Kt={key:2},Rt={key:3,class:"modal fade",id:"add-slug-to-bot",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Yt={class:"modal-dialog"},Qt={class:"modal-content"},Wt={class:"modal-body"},Xt={class:"mb-3"},Zt={class:"form-label",id:"bot-domain"},xt=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),eo=t("div",null,[f("Измените только текст команды,"),t("br"),f(" если хотите чтоб скрипт вызывался по кнопке из меню. "),t("br"),f(" Или оставьте как есть. "),t("br"),f(" Текст скрипта нужно также указать в качестве пункта меню. ")],-1),to=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),oo=t("div",{class:"alert alert-info",role:"alert"}," При добавлении вы можете указать любое имя, которое вам нравится. Не обязательно использовать стандартное. ",-1),lo=["disabled"],so=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Не добавлять")],-1),no={props:["canAdd","bot"],data(){return{search:null,slugs:[],slugs_paginate_object:null,addSlugModal:null,slugForm:{command:null,comment:null,slug:null,config:[],is_global:!0,bot_id:null}}},computed:{...v(["getGlobalSlugs","getGlobalSlugsPaginateObject"])},watch:{search:function(o,e){this.loadAllSlugs()}},mounted(){this.loadAllSlugs(),this.addSlugModal=new bootstrap.Modal(document.getElementById("add-slug-to-bot"),{})},methods:{loadAllSlugs(o=0){this.$store.dispatch("loadGlobalSlugs",{dataObject:{needGlobal:!0,search:this.search},page:o}).then(e=>{this.slugs=this.getGlobalSlugs,this.slugs_paginate_object=this.getGlobalSlugsPaginateObject})},removeSlug(o){this.$store.dispatch("removeSlug",{dataObject:{slugId:o.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.loadAllSlugs()}).catch(e=>{this.loadAllSlugs()})},nextSlugs(o){this.loadAllSlugs(o)},selectSlug(o){this.slugForm.id=o.id||null,this.slugForm.slug=o.slug,this.slugForm.comment=o.comment,this.slugForm.command=this.command||o.command,this.slugForm.config=o.config||[],this.slugForm.is_global=o.is_global||!1,this.$emit("select",o),this.addSlugModal.show()},addSlug(){let o=new FormData;Object.keys(this.slugForm).forEach(e=>{const s=this.slugForm[e]||"";typeof s=="object"?o.append(e,JSON.stringify(s)):o.append(e,s)}),this.bot&&o.append("bot_id",this.bot.id),this.$store.dispatch("createSlug",{slugForm:o}).then(e=>{this.$notify({title:"Скрипты",text:"Скрипт успешно добавлен",type:"success"}),this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0,this.$emit("callback"),this.addSlugModal.hide()}).catch(e=>{})}}},go=Object.assign(no,{__name:"GlobalSlugList",setup(o){return(e,s)=>{const r=O("Popper");return n(),i(g,null,[t("div",It,[t("div",Tt,[t("div",At,[u(t("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a),class:"form-control",id:"floatingInput",placeholder:"Название команды"},null,512),[[m,e.search]]),Nt])])]),e.slugs.length>0?(n(),i("div",Gt,[(n(!0),i(g,null,p(e.slugs,(a,l)=>(n(),i("div",Jt,[t("div",{class:b(["card",{"btn-outline-info":a.deleted_at==null,"btn-outline-danger border-danger":a.deleted_at!=null}]),style:{"min-height":"160px"},onClick:d=>e.selectSlug(a)},[t("div",qt,[t("p",Et,[zt,f(" "+h(a.command),1)]),t("p",Lt,[t("small",null,[t("strong",null,[t("em",null,h(a.slug),1)])])]),t("p",null,h(a.comment||"Пояснение не указано"),1)])],10,Dt)]))),256)),t("div",Ht,[e.slugs_paginate_object?(n(),y(w,{key:0,onPagination_page:e.nextSlugs,pagination:e.slugs_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(n(),i("p",Kt,"Глобальных скриптов не обнаружено")),o.canAdd?(n(),i("div",Rt,[t("div",Yt,[t("div",Qt,[t("div",Wt,[o.canAdd&&e.slugs.length>0?(n(),i("form",{key:0,onSubmit:s[2]||(s[2]=k((...a)=>e.addSlug&&e.addSlug(...a),["prevent"]))},[t("p",null,"Идентификатор скрипта #"+h(e.slugForm.id||"Не указан"),1),t("div",Xt,[t("label",Zt,[_(r,null,{content:C(()=>[eo]),default:C(()=>[xt]),_:1}),f(" Команда "),to]),u(t("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":s[1]||(s[1]=a=>e.slugForm.command=a),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[m,e.slugForm.command]])]),t("p",null,[t("small",null,[t("em",null,h(e.slugForm.comment||"Не указан"),1)])]),oo,t("button",{disabled:e.slugForm.slug==null,class:"btn btn-success mt-2 mb-2 w-100 p-3"},"Добавить скрипт в бота ",8,lo)],32)):c("",!0)]),so])])])):c("",!0)],64)}}});export{q as B,mo as _,go as a,Ce as b};
