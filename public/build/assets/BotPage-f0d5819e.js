import{_ as $e}from"./MainAdminLayout-6c1947e4.js";import{_ as De,a as Pe,b as Re}from"./BotList-8943318c.js";import"./CompanyList-66581a10.js";import{k as ue,l as m,j as x,o as l,f as b,a4 as Ve,n as Xe,a5 as ze,g as ye,w as oe,a6 as Ce,F as Ae,p as C,G as Fe,q as k,K as $,O as F,v as g,x as ae,t as U,A as j,B as ke,u as ie,C as Ue,y as Te,S as Ye,T as Ge}from"./index.es-71d37bd0.js";import{_ as He}from"./_plugin-vue_export-helper-c27b6911.js";import"./Mail-58681572.js";import"./Pagination-c0ff4992.js";import"./TelegramChannelHelper-ba061c59.js";import"./v4-a960c1f4.js";import"./GlobalSlugList-cdef4288.js";/* empty css                                                               *//**
 * Vue 3 Carousel 0.3.1
 * (c) 2023
 * @license MIT
 */const d={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},xe={itemsToShow:{default:d.itemsToShow,type:Number},itemsToScroll:{default:d.itemsToScroll,type:Number},wrapAround:{default:d.wrapAround,type:Boolean},throttle:{default:d.throttle,type:Number},snapAlign:{default:d.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:d.transition,type:Number},breakpoints:{default:d.breakpoints,type:Object},autoplay:{default:d.autoplay,type:Number},pauseAutoplayOnHover:{default:d.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:d.mouseDrag,type:Boolean},touchDrag:{default:d.touchDrag,type:Boolean},dir:{default:d.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:d.i18n,type:Object},settings:{default(){return{}},type:Object}};function We({config:e,slidesCount:t}){const{snapAlign:n,wrapAround:a,itemsToShow:r=1}=e;if(a)return Math.max(t-1,0);let s;switch(n){case"start":s=t-r;break;case"end":s=t-1;break;case"center":case"center-odd":s=t-Math.ceil((r-.5)/2);break;case"center-even":s=t-Math.ceil(r/2);break;default:s=0;break}return Math.max(s,0)}function qe({config:e,slidesCount:t}){const{wrapAround:n,snapAlign:a,itemsToShow:r=1}=e;let s=0;if(n||r>t)return s;switch(a){case"start":s=0;break;case"end":s=r-1;break;case"center":case"center-odd":s=Math.floor((r-1)/2);break;case"center-even":s=Math.floor((r-2)/2);break;default:s=0;break}return s}function se({val:e,max:t,min:n}){return t<n?e:Math.min(Math.max(e,n),t)}function Ke({config:e,currentSlide:t,slidesCount:n}){const{snapAlign:a,wrapAround:r,itemsToShow:s=1}=e;let f=t;switch(a){case"center":case"center-odd":f-=(s-1)/2;break;case"center-even":f-=(s-2)/2;break;case"end":f-=s-1;break}return r?f:se({val:f,max:n-s,min:0})}function Be(e){return e?e.reduce((t,n)=>{var a;return n.type===Ae?[...t,...Be(n.children)]:((a=n.type)===null||a===void 0?void 0:a.name)==="CarouselSlide"?[...t,n]:t},[]):[]}function Y({val:e,max:t,min:n=0}){return e>t?Y({val:e-(t+1),max:t,min:n}):e<n?Y({val:e+(t+1),max:t,min:n}):e}function Je(e,t){let n;return t?function(...a){const r=this;n||(e.apply(r,a),n=!0,setTimeout(()=>n=!1,t))}:e}function Qe(e,t){let n;return function(...a){n&&clearTimeout(n),n=setTimeout(()=>{e(...a),n=null},t)}}function Oe(e="",t={}){return Object.entries(t).reduce((n,[a,r])=>n.replace(`{${a}}`,String(r)),e)}var Ze=ue({name:"ARIA",setup(){const e=m("config",x(Object.assign({},d))),t=m("currentSlide",l(0)),n=m("slidesCount",l(0));return()=>b("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Oe(e.i18n.itemXofY,{currentSlide:t.value+1,slidesCount:n.value}))}}),Ne=ue({name:"Carousel",props:xe,setup(e,{slots:t,emit:n,expose:a}){var r;const s=l(null),f=l([]),u=l(0),p=l(0),i=x(Object.assign({},d));let _=Object.assign({},d),w;const c=l((r=e.modelValue)!==null&&r!==void 0?r:0),N=l(0),D=l(0),T=l(0),E=l(0);let I,G;C("config",i),C("slidesCount",p),C("currentSlide",c),C("maxSlide",T),C("minSlide",E),C("slideWidth",u);function H(){w=Object.assign({},e.breakpoints),_=Object.assign(Object.assign(Object.assign({},_),e),{i18n:Object.assign(Object.assign({},_.i18n),e.i18n),breakpoints:void 0}),ce(_)}function P(){if(!w||!Object.keys(w).length)return;const o=Object.keys(w).map(v=>Number(v)).sort((v,y)=>+y-+v);let h=Object.assign({},_);o.some(v=>{const y=window.matchMedia(`(min-width: ${v}px)`).matches;return y&&(h=Object.assign(Object.assign({},h),w[v])),y}),ce(h)}function ce(o){Object.entries(o).forEach(([h,v])=>i[h]=v)}const de=Qe(()=>{P(),L()},16);function L(){if(!s.value)return;const o=s.value.getBoundingClientRect();u.value=o.width/i.itemsToShow}function W(){p.value<=0||(D.value=Math.ceil((p.value-1)/2),T.value=We({config:i,slidesCount:p.value}),E.value=qe({config:i,slidesCount:p.value}),i.wrapAround||(c.value=se({val:c.value,max:T.value,min:E.value})))}Ve(()=>{Xe(()=>L()),setTimeout(()=>L(),1e3),P(),fe(),window.addEventListener("resize",de,{passive:!0}),n("init")}),ze(()=>{G&&clearTimeout(G),I&&clearInterval(I),window.removeEventListener("resize",de,{passive:!0})});let S=!1;const R={x:0,y:0},V={x:0,y:0},A=x({x:0,y:0}),X=l(!1),q=l(!1),Ee=()=>{X.value=!0},Le=()=>{X.value=!1};function pe(o){["INPUT","TEXTAREA","SELECT"].includes(o.target.tagName)||(S=o.type==="touchstart",S||o.preventDefault(),!(!S&&o.button!==0||B.value)&&(R.x=S?o.touches[0].clientX:o.clientX,R.y=S?o.touches[0].clientY:o.clientY,document.addEventListener(S?"touchmove":"mousemove",ve,!0),document.addEventListener(S?"touchend":"mouseup",me,!0)))}const ve=Je(o=>{q.value=!0,V.x=S?o.touches[0].clientX:o.clientX,V.y=S?o.touches[0].clientY:o.clientY;const h=V.x-R.x,v=V.y-R.y;A.y=v,A.x=h},i.throttle);function me(){const o=i.dir==="rtl"?-1:1,h=Math.sign(A.x)*.4,v=Math.round(A.x/u.value+h)*o;if(v&&!S){const y=Z=>{Z.stopPropagation(),window.removeEventListener("click",y,!0)};window.addEventListener("click",y,!0)}O(c.value-v),A.x=0,A.y=0,q.value=!1,document.removeEventListener(S?"touchmove":"mousemove",ve,!0),document.removeEventListener(S?"touchend":"mouseup",me,!0)}function fe(){!i.autoplay||i.autoplay<=0||(I=setInterval(()=>{i.pauseAutoplayOnHover&&X.value||z()},i.autoplay))}function he(){I&&(clearInterval(I),I=null),fe()}const B=l(!1);function O(o){const h=i.wrapAround?o:se({val:o,max:T.value,min:E.value});c.value===h||B.value||(n("slide-start",{slidingToIndex:o,currentSlideIndex:c.value,prevSlideIndex:N.value,slidesCount:p.value}),B.value=!0,N.value=c.value,c.value=h,G=setTimeout(()=>{if(i.wrapAround){const v=Y({val:h,max:T.value,min:0});v!==c.value&&(c.value=v,n("loop",{currentSlideIndex:c.value,slidingToIndex:o}))}n("update:modelValue",c.value),n("slide-end",{currentSlideIndex:c.value,prevSlideIndex:N.value,slidesCount:p.value}),B.value=!1,he()},i.transition))}function z(){O(c.value+i.itemsToScroll)}function K(){O(c.value-i.itemsToScroll)}const ge={slideTo:O,next:z,prev:K};C("nav",ge),C("isSliding",B);const be=ye(()=>Ke({config:i,currentSlide:c.value,slidesCount:p.value}));C("slidesToScroll",be);const Me=ye(()=>{const o=i.dir==="rtl"?-1:1,h=be.value*u.value*o;return{transform:`translateX(${A.x-h}px)`,transition:`${B.value?i.transition:0}ms`,margin:i.wrapAround?`0 -${p.value*u.value}px`:"",width:"100%"}});function _e(){H(),P(),W(),L(),he()}Object.keys(xe).forEach(o=>{["modelValue"].includes(o)||oe(()=>e[o],_e)}),oe(()=>e.modelValue,o=>{o!==c.value&&O(Number(o))}),oe(p,W),n("before-init"),H();const Se={config:i,slidesCount:p,slideWidth:u,next:z,prev:K,slideTo:O,currentSlide:c,maxSlide:T,minSlide:E,middleSlide:D};a({updateBreakpointsConfigs:P,updateSlidesData:W,updateSlideWidth:L,initDefaultConfigs:H,restartCarousel:_e,slideTo:O,next:z,prev:K,nav:ge,data:Se});const J=t.default||t.slides,Q=t.addons,we=x(Se);return()=>{const o=Be(J==null?void 0:J(we)),h=(Q==null?void 0:Q(we))||[];o.forEach((ee,te)=>ee.props.index=te);let v=o;if(i.wrapAround){const ee=o.map((ne,M)=>Ce(ne,{index:-o.length+M,isClone:!0,key:`clone-before-${M}`})),te=o.map((ne,M)=>Ce(ne,{index:o.length+M,isClone:!0,key:`clone-after-${M}`}));v=[...ee,...o,...te]}f.value=o,p.value=Math.max(o.length,1);const y=b("ol",{class:"carousel__track",style:Me.value,onMousedownCapture:i.mouseDrag?pe:null,onTouchstartPassiveCapture:i.touchDrag?pe:null},v),Z=b("div",{class:"carousel__viewport"},y);return b("section",{ref:s,class:{carousel:!0,"is-sliding":B.value,"is-dragging":q.value,"is-hover":X.value,"carousel--rtl":i.dir==="rtl"},dir:i.dir,"aria-label":i.i18n.ariaGallery,tabindex:"0",onMouseenter:Ee,onMouseleave:Le},[Z,h,b(Ze)])}}}),re;(function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"})(re||(re={}));const et={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function tt(e){return e in re}const le=e=>{const t=m("config",x(Object.assign({},d))),n=String(e.name),a=`icon${n.charAt(0).toUpperCase()+n.slice(1)}`;if(!n||typeof n!="string"||!tt(n))return;const r=et[n],s=b("path",{d:r}),f=t.i18n[a]||e.title||n,u=b("title",f);return b("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":f},[u,s])};le.props={name:String,title:String};const Ie=(e,{slots:t,attrs:n})=>{const{next:a,prev:r}=t||{},s=m("config",x(Object.assign({},d))),f=m("maxSlide",l(1)),u=m("minSlide",l(1)),p=m("currentSlide",l(1)),i=m("nav",{}),{dir:_,wrapAround:w,i18n:c}=s,N=_==="rtl",D=b("button",{type:"button",class:["carousel__prev",!w&&p.value<=u.value&&"carousel__prev--disabled",n==null?void 0:n.class],"aria-label":c.ariaPreviousSlide,onClick:i.prev},(r==null?void 0:r())||b(le,{name:N?"arrowRight":"arrowLeft"})),T=b("button",{type:"button",class:["carousel__next",!w&&p.value>=f.value&&"carousel__next--disabled",n==null?void 0:n.class],"aria-label":c.ariaNextSlide,onClick:i.next},(a==null?void 0:a())||b(le,{name:N?"arrowLeft":"arrowRight"}));return[D,T]},nt=()=>{const e=m("config",x(Object.assign({},d))),t=m("maxSlide",l(1)),n=m("minSlide",l(1)),a=m("currentSlide",l(1)),r=m("nav",{}),s=u=>Y({val:a.value,max:t.value,min:0})===u,f=[];for(let u=n.value;u<t.value+1;u++){const p=b("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":s(u)},"aria-label":Oe(e.i18n.ariaNavigateToSlide,{slideNumber:u+1}),onClick:()=>r.slideTo(u)}),i=b("li",{class:"carousel__pagination-item",key:u},p);f.push(i)}return b("ol",{class:"carousel__pagination"},f)};var je=ue({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:t}){const n=m("config",x(Object.assign({},d))),a=m("currentSlide",l(0)),r=m("slidesToScroll",l(0)),s=m("isSliding",l(!1)),f=()=>e.index===a.value,u=()=>e.index===a.value-1,p=()=>e.index===a.value+1,i=()=>{const _=Math.floor(r.value),w=Math.ceil(r.value+n.itemsToShow-1);return e.index>=_&&e.index<=w};return()=>{var _;return b("li",{style:{width:`${100/n.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":i(),"carousel__slide--active":f(),"carousel__slide--prev":u(),"carousel__slide--next":p(),"carousel__slide--sliding":s.value},"aria-hidden":!i()},(_=t.default)===null||_===void 0?void 0:_.call(t))}}});const ot=e=>(Ye("data-v-6ddec95a"),e=e(),Ge(),e),at={class:"container"},it={class:"row mb-2"},st={class:"col-12"},rt={class:"btn-group",role:"group","aria-label":"Basic outlined example"},lt=["disabled"],ut={key:0,class:"row mt-3"},ct={class:"col-12"},dt={key:1,class:"row"},pt={class:"col-12"},vt=ot(()=>g("h5",null,"Создать бота из шаблона",-1)),mt={class:"carousel__item p-2 w-100"},ft={class:"card w-100"},ht={class:"card-body w-100"},gt={class:"card-title"},bt={class:"card-text"},_t=["disabled","onClick"],St={key:2},wt={components:{Carousel:Ne,Slide:je,Pagination:nt,Navigation:Ie},data(){return{templates:[],load:!1,step:0,bot:null}},computed:{...Fe(["getCurrentBot","getCurrentCompany","getBotFavorites","inBotFav"])},mounted(){this.loadTemplates(),this.loadCurrentBot(),this.setStep(localStorage.getItem("cashman_set_botpage_step_index")||0),window.addEventListener("store_current_bot-change-event",e=>{this.bot=this.getCurrentBot,this.step=this.bot?2:1})},methods:{openForEdit(){},duplicateAndEdit(e,t){this.templates[e].in_use=!0,this.$store.dispatch("duplicateBot",{dataObject:{bot_id:t,company_id:this.getCurrentCompany?this.getCurrentCompany.id:null}}).then(n=>{this.bot=n.data,this.load=!0,this.templates[e].in_use=!1,this.loadCurrentBot(this.bot),localStorage.setItem("cashman_set_botform_step_index",0),this.inBotFav(this.bot.id)||this.$store.dispatch("addBotToFavorites",this.bot.id),this.setStep(2),this.$nextTick(()=>{this.load=!1}),this.$notify("Указанный бот успешно продублирован")})},loadTemplates(){this.$store.dispatch("loadTemplates").then(e=>{this.templates=e.data,console.log(e.data)})},setStep(e){this.step=parseInt(e),localStorage.setItem("cashman_set_botpage_step_index",e)},loadCurrentBot(e=null){this.$store.dispatch("updateCurrentBot",{bot:e}).then(()=>{this.bot=this.getCurrentBot})},botListCallback(e){this.load=!0,this.setStep(2),this.loadCurrentBot(e),this.$nextTick(()=>{this.load=!1})}}},yt=Object.assign(wt,{__name:"BotPage",setup(e){return(t,n)=>(k(),$($e,{active:1,"need-menu":!0},{default:F(()=>[g("div",at,[g("div",it,[g("div",st,[g("div",rt,[g("button",{type:"button",onClick:n[0]||(n[0]=a=>t.setStep(0)),class:ae([{"btn-primary":t.step===0,"btn-outline-primary":t.step!==0},"btn"])},"Создание бота ",2),g("button",{type:"button",onClick:n[1]||(n[1]=a=>t.setStep(1)),class:ae([{"btn-primary":t.step===1,"btn-outline-primary":t.step!==1},"btn"])},"Поиск бота ",2),g("button",{type:"button",disabled:!t.bot,onClick:n[2]||(n[2]=a=>t.setStep(2)),class:ae([{"btn-primary":t.step===2,"btn-outline-primary":t.step!==2},"btn"])},"Редактирование бота ",10,lt)])])]),t.step===0?(k(),U("div",ut,[g("div",ct,[t.load?j("",!0):(k(),$(De,{key:0,onCallback:t.loadCurrentBot},null,8,["onCallback"]))])])):j("",!0),t.step===1?(k(),U("div",dt,[g("div",pt,[vt,ke(ie(Ne),{itemsToShow:3.95,wrapAround:!0,transition:500},{addons:F(()=>[ke(ie(Ie))]),default:F(()=>[(k(!0),U(Ae,null,Ue(t.templates,(a,r)=>(k(),$(ie(je),{key:a.id},{default:F(()=>[g("div",mt,[g("div",ft,[g("div",ht,[g("h5",gt,Te(a.title||a.bot_domain||"Без названия"),1),g("p",bt,Te(a.template_description||"-"),1),g("button",{disabled:a.in_use||!1,type:"button",onClick:s=>t.duplicateAndEdit(r,a.id),class:"btn btn-primary"},"Создать из шаблона",8,_t)])])])]),_:2},1024))),128))]),_:1},8,["itemsToShow"])]),t.load?j("",!0):(k(),$(Pe,{key:0,editor:!0,onCallback:t.botListCallback},null,8,["onCallback"]))])):j("",!0),t.step===2?(k(),U("div",St,[t.bot&&!t.load?(k(),$(Re,{key:0,bot:t.bot},null,8,["bot"])):j("",!0)])):j("",!0)])]),_:1}))}}),Lt=He(yt,[["__scopeId","data-v-6ddec95a"]]);export{Lt as default};
