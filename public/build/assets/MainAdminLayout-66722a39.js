import{o as l,q as c,A as r,N as _,u as p,a2 as v,t,x as d,z as h,v as a,C as o,M as m,F as f,K as g,Y as b}from"./index.es-3f23c3ba.js";import{m as y}from"./index-2a9de1d3.js";const C=t("title",null,"Административная панель",-1),k=t("meta",{name:"description",content:"Административная панель<"},null,-1),w=g('<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"><a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="#">CashMan</a><button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="navbar-nav d-none d-md-block"><div class="nav-item text-nowrap"><a class="nav-link px-3" href="/logout">Выход</a></div></div></header>',1),x={class:"container-fluid"},B={class:"row"},$={id:"sidebarMenu",class:"col-md-3 col-lg-2 d-md-block bg-body-tertiary sidebar",style:{}},E={class:"position-sticky pt-3 sidebar-sticky"},M={class:"nav flex-column"},N={key:0,class:"nav-item p-2"},V={class:"card border-info"},j={class:"card-body"},A=t("p",null,"У вас выбран клиент:",-1),L={class:"d-flex justify-content-between w-100"},D=t("i",{class:"fa-solid fa-xmark"},null,-1),S=[D],z={key:1,class:"nav-item p-2"},F={class:"card border-info"},O={class:"card-body"},T=t("p",null,"У вас выбран бот:",-1),q={class:"d-flex justify-content-between w-100"},G=["href"],K=t("i",{class:"fa-solid fa-xmark"},null,-1),W=[K],X={class:"nav-item"},Y=t("i",{class:"fa-solid fa-house"},null,-1),H={class:"nav-item"},I=t("i",{class:"fa-solid fa-mug-hot"},null,-1),J={class:"nav-item"},P=t("i",{class:"fa-solid fa-robot"},null,-1),Q={class:"nav-item"},R=t("i",{class:"fa-solid fa-scroll"},null,-1),U={class:"nav-item"},Z=t("i",{class:"fa-solid fa-photo-film"},null,-1),tt=t("hr",null,null,-1),et={class:"nav-item"},st=t("i",{class:"fa-solid fa-file-contract"},null,-1),at=t("hr",null,null,-1),ot={class:"nav-item active"},nt=t("i",{class:"fa-solid fa-users"},null,-1),it={class:"nav-item"},lt=t("i",{class:"fa-regular fa-paper-plane"},null,-1),ct={class:"col-md-9 ms-sm-auto col-lg-10 px-md-4"},rt={class:"pt-3 pb-2 mb-3"},dt={props:["active"],data(){return{load:!1,bot:null,company:null}},computed:{...y(["getErrors","getCurrentBot","getCurrentCompany"])},watch:{getErrors:function(e,s){Object.keys(e).forEach(n=>{this.$notify({title:"Конструктор ботов",text:e[n],type:"warn"})})}},mounted(){this.loadCurrentCompany(),this.loadCurrentBot(),window.addEventListener("store_current_bot-change-event",e=>{this.bot=this.getCurrentBot}),window.addEventListener("store_current_company-change-event",e=>{this.company=this.getCurrentCompany})},methods:{loadCurrentCompany(e=null){this.$store.dispatch("updateCurrentCompany",{company:e}).then(()=>{this.company=this.getCurrentCompany})},loadCurrentBot(e=null){this.$store.dispatch("updateCurrentBot",{bot:e}).then(()=>{this.bot=this.getCurrentBot})},resetCompany(){this.$store.dispatch("resetCurrentCompany").then(()=>{this.company=null,window.dispatchEvent(new CustomEvent("store_current_company-change-event"))})},resetBot(){this.$store.dispatch("resetCurrentBot").then(()=>{this.bot=null,window.dispatchEvent(new CustomEvent("store_current_bot-change-event"))})},stopAllDialogs(){this.$store.dispatch("stopDialogs").then(e=>{this.$notify({title:"Конструктор ботов",text:"Все диалоги остановлены",type:"success"})}).catch(e=>{})},reloadWebhooks(){this.load=!0,this.$notify({title:"Конструктор ботов",text:"Процедура обновления зависимостей началась"}),axios.get("/bot/register-webhooks").then(()=>{this.load=!1,this.$notify({title:"Конструктор ботов",text:"Зависимости успешно обновлены!",type:"success"})}).catch(()=>{this.load=!1,this.$notify({title:"Конструктор ботов",text:"Неудалось обновить зависимости",type:"error"})})}}},_t=Object.assign(dt,{__name:"MainAdminLayout",setup(e){return(s,n)=>{const u=b("notifications");return l(),c(f,null,[r(p(v),null,{default:_(()=>[C,k]),_:1}),r(u,{position:"top right"}),w,t("div",x,[t("div",B,[t("nav",$,[t("div",E,[t("ul",M,[s.company?(l(),c("li",N,[t("div",V,[t("div",j,[A,t("div",L,[t("span",null,d(s.company.title||"Без имени"),1),t("span",{onClick:n[0]||(n[0]=(...i)=>s.resetCompany&&s.resetCompany(...i))},S)])])])])):h("",!0),s.bot?(l(),c("li",z,[t("div",F,[t("div",O,[T,t("div",q,[t("span",null,[t("a",{href:"https://t.me/"+(s.bot.bot_domain||"botfather"),target:"_blank"},d(s.bot.bot_domain||"Без имени"),9,G)]),t("span",{onClick:n[1]||(n[1]=(...i)=>s.resetBot&&s.resetBot(...i))},W)])])])])):h("",!0),t("li",X,[t("a",{class:a(["nav-link",{active:e.active==3}]),href:"/dashboard","aria-current":"page"},[Y,o(" Главная страница ")],2)]),t("li",H,[t("a",{class:a(["nav-link",{active:e.active==0}]),href:"/company-page","aria-current":"page"},[I,o(" Клиенты ")],2)]),t("li",J,[t("a",{class:a(["nav-link",{active:e.active==1}]),href:"/bot-page","aria-current":"page"},[P,o(" Боты ")],2)]),t("li",Q,[t("a",{class:a(["nav-link",{active:e.active==6}]),href:"/script-page","aria-current":"page"},[R,o(" Глобальные скрипты ")],2)]),t("li",U,[t("a",{class:a(["nav-link",{active:e.active==7}]),href:"/media-page","aria-current":"page"},[Z,o(" Медиа файлы ботов ")],2)]),tt,t("li",et,[t("a",{class:a(["nav-link",{active:e.active==5}]),href:"/visit-card-page","aria-current":"page"},[st,o(" Бриф для Визиток ")],2)]),at,t("li",ot,[t("a",{class:a(["nav-link",{active:e.active==2}]),href:"/user-page","aria-current":"page"},[nt,o(" Пользователи ")],2)]),t("li",it,[t("a",{class:a(["nav-link",{active:e.active==4}]),href:"/mail-page","aria-current":"page"},[lt,o(" Рассылки сообщений ")],2)])])])]),t("main",ct,[t("div",rt,[m(s.$slots,"default")])])])])],64)}}});export{_t as _};
