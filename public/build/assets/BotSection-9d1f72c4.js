import{_ as Q,a as S}from"./Mail-55bbc290.js";import{e as C,f as V,g as U,h as M,i as T,j,_ as I,A,Y as P,k as R,l as O,B,d as N,m as L,c as D}from"./BotList-aa7bdd4c.js";import{Y as z,q as i,t as n,v as e,B as _,O as r,D as u,H as m,J as b,R as y,A as a,y as f,F as $,C as v,X as E,P as F,x as g,K as p}from"./index.es-71d37bd0.js";import{_ as q}from"./GlobalSlugList-73259d76.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"row"},H={class:"col-12 mb-3"},K={class:"form-label",id:"quiz-title"},X=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),G=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),W={class:"col-12 mb-3"},Z={class:"form-check"},x=e("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),ee={key:0,class:"col-12 mb-3"},se={class:"form-label",id:"quiz-images"},te=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),oe=e("div",null," Изображение, которое видит пользователь при выборе квиза ",-1),le=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ie={class:"col-12 mb-3"},ne={class:"form-label",id:"quiz-description"},ae=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),de=e("div",null," Краткая информация о квизе ",-1),re=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ue={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},ce={class:"col-12 mb-3"},me={class:"form-label",id:"quiz-time_limit"},_e=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pe=e("div",null," Время на ответ ",-1),he=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),be={class:"col-12 mb-3"},fe={class:"form-check"},ye=e("label",{class:"form-check-label",for:"is-group"}," Показывать ответы по окончанию раунда ",-1),$e={class:"col-12 mb-3"},ge={class:"form-check"},ve=e("label",{class:"form-check-label",for:"is_active"}," Квиз виден пользователям ",-1),qe={class:"col-12 mb-3"},ke={class:"form-check"},ze=e("label",{class:"form-check-label",for:"round_mode"}," Использовать систему раундов ",-1),Fe={class:"col-12 mb-3"},we={class:"form-check"},Ce=e("label",{class:"form-check-label",for:"polling_mode"}," Квиз в режиме опроса (без команд) ",-1),Qe={class:"col-12 mb-3"},Se={class:"form-label",id:"quiz-time_limit"},Ve=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ue=e("div",null," Число попыток прохождения квиза ",-1),Me=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Te={class:"col-12 mb-3"},je={class:"form-label",id:"quiz-time_limit"},Ie=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ae=e("div",null," Сколько % нужно ответить чтоб пройти ",-1),Pe=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Re={class:"row"},Oe={class:"col-12 py-2"},Be={class:"col-12 mb-3"},Ne={class:"row"},Le={class:"col-10"},De={class:"form-label",id:"quiz-success_message"},Ee=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Je=e("div",null," Текст в случае успешного прохождения квиза ",-1),Ye=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),He={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ke=["onUpdate:modelValue"],Xe={class:"col-2 d-flex align-items-center justify-content-center"},Ge=["disabled","onClick"],We={class:"row"},Ze={class:"col-12 py-2"},xe={class:"col-12 mb-3"},es={class:"row"},ss={class:"col-10"},ts=["id"],os=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ls=e("div",null," Текст в случае неудачного прохождения квиза ",-1),is=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ns={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},as=["onUpdate:modelValue"],ds={class:"col-2 d-flex align-items-center justify-content-center"},rs=["disabled","onClick"],us={class:"row"},cs={class:"col-12 mb-3"},ms={class:"form-floating"},_s=["value","selected"],ps=e("label",{for:"quiz-display-type"},"Тип вывода вопросов",-1),hs={key:0,class:"row"},bs={class:"col-12 mb-3"},fs={class:"form-label",id:"quiz-time_limit"},ys=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$s=e("div",null," Дата и время начала квиза ",-1),gs=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),vs={class:"col-12 mb-3"},qs={class:"form-label",id:"quiz-time_limit"},ks=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),zs=e("div",null," Дата и время окончания квиза ",-1),Fs=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ws={class:"col-12 mb-3"},Cs={class:"form-label",id:"quiz-time_limit"},Qs=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ss=e("div",null," Дата и время окончания квиза. Квиз создается на 1 игру. Данное поле заполняется автоматически при прохождении квиза командой. ",-1),Vs={class:"row"},Us={class:"col-12"},Ms={type:"submit",class:"btn btn-outline-success w-100 p-3"},Ts={key:0},js={key:1},Is={props:["quiz","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"],quizForm:{id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]}}},watch:{quizForm:{handler(l){this.need_reset=!0},deep:!0}},mounted(){this.quiz&&this.$nextTick(()=>{this.quizForm={id:this.quiz.id||null,title:this.quiz.title||null,image:this.quiz.image||null,description:this.quiz.description||null,completed_at:this.quiz.completed_at?this.$filters.currentFull(this.quiz.completed_at):null,start_at:this.quiz.start_at?this.$filters.currentFull(this.quiz.start_at):null,end_at:this.quiz.end_at?this.$filters.currentFull(this.quiz.end_at):null,display_type:this.quiz.display_type||0,time_limit:this.quiz.time_limit||30,show_answers:this.quiz.show_answers||!1,polling_mode:this.quiz.polling_mode||!1,round_mode:this.quiz.round_mode||!1,is_active:this.quiz.is_active||!1,try_count:this.quiz.try_count||1,success_percent:this.quiz.success_percent||50,success_message:this.quiz.success_message||["Задание успешно пройдено!"],failure_message:this.quiz.failure_message||["К сожалению вы не прошли задание!"]}})},methods:{selectPhoto(l){this.quizForm.image=l.file_id},removeMessage(l,s){this.quizForm[l||"success_message"].splice(s,1)},addMessage(l,s){this.quizForm[l||"success_message"].push(s)},submitForm(){let l=new FormData;Object.keys(this.quizForm).forEach(s=>{const t=this.quizForm[s]||"";typeof t=="object"?l.append(s,JSON.stringify(t)):l.append(s,t)}),l.append("bot_id",this.bot.id),this.$store.dispatch("storeQuiz",{quizForm:l}).then(s=>{this.quizForm={id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]},this.$emit("callback",s.data),this.$notify("Событие успешно создано")}).catch(s=>{this.$notify("Ошибка создания события")})}}},w=Object.assign(Is,{__name:"QuizForm",setup(l){return(s,t)=>{const d=z("Popper");return i(),n("form",{onSubmit:t[16]||(t[16]=F((...o)=>s.submitForm&&s.submitForm(...o),["prevent"])),class:"py-3"},[e("div",Y,[e("div",H,[e("label",K,[_(d,{content:"Название вашего квиза"},{default:r(()=>[X]),_:1}),u(" Название квиза "),G]),m(e("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":t[0]||(t[0]=o=>s.quizForm.title=o),maxlength:"255","aria-describedby":"quiz-title",required:""},null,512),[[b,s.quizForm.title]])]),e("div",W,[e("div",Z,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=o=>s.need_media=o),type:"checkbox",id:"need_media"},null,512),[[y,s.need_media]]),x])]),s.need_media?(i(),n("div",ee,[e("label",se,[_(d,null,{content:r(()=>[oe]),default:r(()=>[te]),_:1}),u(" Изображение к квизу "),le]),_(q,{"need-photo":!0,selected:s.quizForm.image,onSelect:s.selectPhoto},null,8,["selected","onSelect"])])):a("",!0),e("div",ie,[e("label",ne,[_(d,null,{content:r(()=>[de]),default:r(()=>[ae]),_:1}),u(" Описание события "),re,s.quizForm.description?(i(),n("small",ue," Длина текста "+f(s.quizForm.description.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":t[2]||(t[2]=o=>s.quizForm.description=o),"aria-describedby":"quiz-description",required:""},`
                    `,512),[[b,s.quizForm.description]])]),e("div",ce,[e("label",me,[_(d,null,{content:r(()=>[pe]),default:r(()=>[_e]),_:1}),u(" Лимит времени на ответ в секундах "),he]),m(e("input",{type:"number",class:"form-control",placeholder:"Лимит времени на ответ","aria-label":"Лимит времени на ответ",step:"0.1",min:"0","onUpdate:modelValue":t[3]||(t[3]=o=>s.quizForm.time_limit=o),"aria-describedby":"quiz-time_limit",required:""},null,512),[[b,s.quizForm.time_limit]])]),e("div",be,[e("div",fe,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=o=>s.quizForm.show_answers=o),type:"checkbox",id:"is-group"},null,512),[[y,s.quizForm.show_answers]]),ye])]),e("div",$e,[e("div",ge,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=o=>s.quizForm.is_active=o),type:"checkbox",id:"is_active"},null,512),[[y,s.quizForm.is_active]]),ve])]),e("div",qe,[e("div",ke,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=o=>s.quizForm.round_mode=o),type:"checkbox",id:"round_mode"},null,512),[[y,s.quizForm.round_mode]]),ze])]),e("div",Fe,[e("div",we,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=o=>s.quizForm.polling_mode=o),type:"checkbox",id:"polling_mode"},null,512),[[y,s.quizForm.polling_mode]]),Ce])]),e("div",Qe,[e("label",Se,[_(d,null,{content:r(()=>[Ue]),default:r(()=>[Ve]),_:1}),u(" Количество попыток "),Me]),m(e("input",{type:"number",class:"form-control",placeholder:"Число попыток","aria-label":"Число попыток",step:"1",min:"1","onUpdate:modelValue":t[8]||(t[8]=o=>s.quizForm.try_count=o),"aria-describedby":"quiz-try_count",required:""},null,512),[[b,s.quizForm.try_count]])]),e("div",Te,[e("label",je,[_(d,null,{content:r(()=>[Ae]),default:r(()=>[Ie]),_:1}),u(" % для прохождения "),Pe]),m(e("input",{type:"number",class:"form-control",placeholder:"Процент для победы","aria-label":"Процент для победы",step:"1",min:"0","onUpdate:modelValue":t[9]||(t[9]=o=>s.quizForm.success_percent=o),"aria-describedby":"quiz-success_percent",required:""},null,512),[[b,s.quizForm.success_percent]])])]),e("div",Re,[e("div",Oe,[e("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:t[10]||(t[10]=o=>s.addMessage("success_message",null))},"Добавить еще вариант текста ")]),(i(!0),n($,null,v(s.quizForm.success_message,(o,c)=>(i(),n("div",Be,[e("div",Ne,[e("div",Le,[e("label",De,[_(d,null,{content:r(()=>[Je]),default:r(()=>[Ee]),_:1}),u(" Текст при победе "),Ye,s.quizForm.success_message[c]?(i(),n("small",He," Длина текста "+f(s.quizForm.success_message[c].length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при победе","aria-label":"Текст при победе",maxlength:"255","onUpdate:modelValue":h=>s.quizForm.success_message[c]=h,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,Ke),[[b,s.quizForm.success_message[c]]])]),e("div",Xe,[e("button",{class:"btn btn-outline-danger",disabled:s.quizForm.success_message.length<=1,onClick:h=>s.removeMessage("success_message",c)},"Удалить ",8,Ge)])])]))),256))]),e("div",We,[e("div",Ze,[e("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:t[11]||(t[11]=o=>s.addMessage("failure_message",null))},"Добавить еще вариант текста ")]),(i(!0),n($,null,v(s.quizForm.failure_message,(o,c)=>(i(),n("div",xe,[e("div",es,[e("div",ss,[e("label",{class:"form-label",id:"quiz-failure_message"+c},[_(d,null,{content:r(()=>[ls]),default:r(()=>[os]),_:1}),u(" Текст при проигрыше "),is,s.quizForm.failure_message[c]?(i(),n("small",ns," Длина текста "+f(s.quizForm.failure_message[c].length)+"/255",1)):a("",!0)],8,ts),m(e("textarea",{class:"form-control",placeholder:"Текст при проигрыше","aria-label":"Текст при проигрыше",maxlength:"255","onUpdate:modelValue":h=>s.quizForm.failure_message[c]=h,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,as),[[b,s.quizForm.failure_message[c]]])]),e("div",ds,[e("button",{class:"btn btn-outline-danger",disabled:s.quizForm.failure_message.length<=1,onClick:h=>s.removeMessage("failure_message",c)},"Удалить ",8,rs)])])]))),256))]),e("div",us,[e("div",cs,[e("div",ms,[m(e("select",{class:"form-select","onUpdate:modelValue":t[12]||(t[12]=o=>s.quizForm.display_type=o),id:"quiz-display-type","aria-label":"quiz-display-type"},[(i(!0),n($,null,v(s.types,(o,c)=>(i(),n("option",{value:c,selected:c==s.quizForm.display_type},f(o),9,_s))),256))],512),[[E,s.quizForm.display_type]]),ps])])]),s.quizForm.polling_mode?a("",!0):(i(),n("div",hs,[e("div",bs,[e("label",fs,[_(d,null,{content:r(()=>[$s]),default:r(()=>[ys]),_:1}),u(" Дата и время начала начала "),gs]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время начала квиза ","aria-label":"Дата и время начала квиза",maxlength:"255","onUpdate:modelValue":t[13]||(t[13]=o=>s.quizForm.start_at=o),"aria-describedby":"quiz-start_at",required:""},null,512),[[b,s.quizForm.start_at]])]),e("div",vs,[e("label",qs,[_(d,null,{content:r(()=>[zs]),default:r(()=>[ks]),_:1}),u(" Дата и время окончания квиза "),Fs]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время окончания квиза","aria-label":"Дата и время окончания квиза",maxlength:"255","onUpdate:modelValue":t[14]||(t[14]=o=>s.quizForm.end_at=o),"aria-describedby":"quiz-end_at",required:""},null,512),[[b,s.quizForm.end_at]])]),e("div",ws,[e("label",Cs,[_(d,null,{content:r(()=>[Ss]),default:r(()=>[Qs]),_:1}),u(" Дата и время прохождения квиза ")]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время прохождения квиза","aria-label":"Дата и время прохождения квиза",maxlength:"255","onUpdate:modelValue":t[15]||(t[15]=o=>s.quizForm.completed_at=o),"aria-describedby":"quiz-completed_at"},null,512),[[b,s.quizForm.completed_at]])])])),e("div",Vs,[e("div",Us,[e("button",Ms,[s.quizForm.id==null?(i(),n("span",Ts,"Создать квиз")):(i(),n("span",js,"Обновить квиз"))])])])],32)}}}),As={props:{type:String,value:String}},Ps={class:"d-flex mb-2"},Rs={class:"form-floating mb-3"},Os=["value"],Bs=e("label",{for:"custom-url-link-for-success"},"Ссылка на файл",-1);function Ns(l,s,t,d,o,c){return i(),n($,null,[e("div",Ps,[e("span",{class:g(["badge bg-secondary cursor-pointer mr-1",{"bg-success":t.type=="video"}]),onClick:s[0]||(s[0]=h=>l.$emit("update:type","video"))},"Видео",2),e("span",{class:g(["badge bg-secondary cursor-pointer mr-1",{"bg-success":t.type=="photo"}]),onClick:s[1]||(s[1]=h=>l.$emit("update:type","photo"))},"Изображение",2),e("span",{class:g(["badge bg-secondary cursor-pointer mr-1",{"bg-success":t.type=="audio"}]),onClick:s[2]||(s[2]=h=>l.$emit("update:type","audio"))},"Звук",2)]),e("div",Rs,[e("input",{type:"url",class:"form-control",value:t.value,onInput:s[3]||(s[3]=h=>l.$emit("update:value",h.target.value)),id:"custom-url-link-for-success",placeholder:"https://...."},null,40,Os),Bs])],64)}const k=J(As,[["render",Ns]]),Ls={class:"row py-3"},Ds={class:"col-12"},Es={class:"row"},Js={class:"col-12 mb-3"},Ys={key:0},Hs=["onClick"],Ks={class:"form-label",id:"quiz-round"},Xs=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Gs=e("div",null," Раунд, в котором будет отображен вопрос ",-1),Ws=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Zs={class:"col-12 mb-3"},xs={class:"form-label",id:"event-on_after_appointment"},et=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),st=e("div",null," Текст вопроса ",-1),tt=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ot={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},lt={class:"col-12 mb-3"},it={class:"form-check"},nt=e("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),at={key:0,class:"col-12 mb-3"},dt={class:"form-label",id:"quiz-images"},rt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ut=e("div",null," Изображение, видео, аудио сопровождение вопроса ",-1),ct={key:0,class:"badge rounded-pill text-bg-info m-0"},mt=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),_t=e("h6",null,"Вставьте ссылку на контент...",-1),pt=e("h6",null,"...или выберите из доступных",-1),ht={class:"col-12 mb-3"},bt={class:"form-check"},ft=e("label",{class:"form-check-label",for:"is_multiply"}," Множественные ответы ",-1),yt={class:"col-12 mb-3"},$t={class:"form-check"},gt=e("label",{class:"form-check-label",for:"is_open"}," Открытый вопрос ",-1),vt={class:"col-12 mb-3"},qt={class:"form-label",id:"quiz-description"},kt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),zt=e("div",null," Текст при выборе правильного ответа ",-1),Ft=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wt={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ct={class:"col-12 mb-3"},Qt={class:"form-check"},St=e("label",{class:"form-check-label",for:"need_media_for_success"}," Нужен медиа-контент при правильном ответе ",-1),Vt={key:1,class:"col-12 mb-3"},Ut=e("h6",null,"Вставьте ссылку на контент...",-1),Mt=e("h6",null,"...или выберите из доступных",-1),Tt={class:"col-12 mb-3"},jt={class:"form-label",id:"quiz-description"},It=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),At=e("div",null," Текст в выбора неправильного ответа ",-1),Pt=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Rt={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ot={class:"col-12 mb-3"},Bt={class:"form-check"},Nt=e("label",{class:"form-check-label",for:"need_media_for_failed"}," Нужен медиа-контент при неправильном ответе ",-1),Lt={key:2,class:"col-12 mb-3"},Dt=e("h6",null,"Вставьте ссылку на контент...",-1),Et=e("h6",null,"...или выберите из доступных",-1),Jt={class:"row"},Yt={class:"col-12"},Ht={class:"col-12"},Kt={key:0,class:"table"},Xt=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Текст вопроса"),e("th",{scope:"col"},"Баллы"),e("th",{scope:"col"},"Контент"),e("th",{scope:"col"},"Тип контента"),e("th",{scope:"col"},"Является верным"),e("th",{scope:"col"},"Действие")])],-1),Gt={scope:"row"},Wt={class:"form-floating mb-3"},Zt=["onUpdate:modelValue","id"],xt=["for"],eo={class:"form-floating mb-3"},so=["onUpdate:modelValue","id"],to=["for"],oo=["onClick"],lo={class:"form-check"},io=["onUpdate:modelValue","id"],no=["for"],ao={class:"dropdown"},ro=e("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-ellipsis"})],-1),uo={class:"dropdown-menu"},co={key:0},mo=["onClick"],_o={key:1},po=["onClick"],ho={key:1},bo={class:"row"},fo={class:"col-12"},yo={type:"submit",class:"btn btn-outline-success w-100 p-3"},$o={key:0},go={key:1},vo={class:"modal fade",id:"chooseMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qo={class:"modal-dialog"},ko={class:"modal-content"},zo={key:0,class:"modal-body"},Fo=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),wo={props:["quizId","bot","question"],data(){return{step:0,load:!1,selectedQuestionIndex:null,need_media:!1,need_media_for_success:!1,need_media_for_failed:!1,rounds:[],questionForm:{id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}}},watch:{questionForm:{handler(l){this.need_reset=!0},deep:!0},need_media:function(l,s){this.need_page_images||(this.questionForm.media_content=null,this.questionForm.content_type=null)},need_media_for_success:function(l,s){this.need_page_images||(this.questionForm.success_media_content=null,this.questionForm.success_media_content_type=null)},need_media_for_failed:function(l,s){this.need_page_images||(this.questionForm.failure_media_content=null,this.questionForm.failure_media_content_type=null)}},mounted(){this.loadQuizRounds(),this.question&&(this.question.media_content!=null&&(this.need_media=!0),this.question.success_media_content!=null&&(this.need_media_for_success=!0),this.question.failure_media_content!=null&&(this.need_media_for_failed=!0),this.$nextTick(()=>{this.questionForm={id:this.question.id||null,text:this.question.text||null,round:this.question.round||null,media_content:this.question.media_content||null,content_type:this.question.content_type||null,is_multiply:this.question.is_multiply||!1,is_open:this.question.is_open||!1,answers:this.question.answers||[],success_message:this.question.success_message||null,failure_message:this.question.failure_message||null,success_media_content:this.question.success_media_content||null,failure_media_content:this.question.failure_media_content||null,success_media_content_type:this.question.success_media_content_type||null,failure_media_content_type:this.question.failure_media_content_type||null}}))},methods:{loadQuizRounds(){this.$store.dispatch("loadQuizRounds",{dataObject:{bot_id:this.bot.id||null,quiz_id:this.quizId||null}}).then(l=>{this.rounds=l})},chooseMediaContent(l){this.selectedQuestionIndex=null,this.$nextTick(()=>{this.selectedQuestionIndex=l}),new bootstrap.Modal(document.getElementById("chooseMediaContent"),{}).show()},selectMediaForFailure(l){this.questionForm.failure_media_content=l.file_id,this.questionForm.failure_media_content_type=l.type},selectMediaForSuccess(l){this.questionForm.success_media_content=l.file_id,this.questionForm.success_media_content_type=l.type},selectMediaForAnswer(l){this.questionForm.answers[this.selectedQuestionIndex].media_content=l.file_id,this.questionForm.answers[this.selectedQuestionIndex].content_type=l.type},selectMedia(l){this.questionForm.media_content=l.file_id,this.questionForm.content_type=l.type},clearQuestionForm(){this.questionForm={id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}},addNewAnswer(){this.questionForm.answers.push({text:null,media_content:null,content_type:null,is_right_answer:!1,points:0})},removeAnswerFromArray(l){this.questionForm.answers.splice(l,1)},removeAnswer(l){this.$store.dispatch("removeQuizAnswer",{quizAnswerId:l}).then(s=>{this.$notify("Вопрос успешно удален");let t=this.questionForm.answers.findIndex(d=>d.id==l);this.questionForm.answers.splice(t,1)}).catch(s=>{this.$notify("Ошибка удаления вопроса")})},submitForm(){let l=new FormData;Object.keys(this.questionForm).forEach(s=>{const t=this.questionForm[s]||"";typeof t=="object"?l.append(s,JSON.stringify(t)):l.append(s,t)}),l.append("bot_id",this.bot.id),l.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizQuestion",{quizQuestionForm:l}).then(s=>{this.$emit("callback",s.data),this.$notify("Вопрос успешно создан"),this.clearQuestionForm(),this.loadQuizRounds()}).catch(s=>{this.$notify("Ошибка создания вопроса")})}}},Co=Object.assign(wo,{__name:"QuizQuestionForm",setup(l){return(s,t)=>{const d=z("Popper");return i(),n($,null,[e("div",Ls,[e("div",Ds,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.clearQuestionForm&&s.clearQuestionForm(...o)),class:"btn btn-primary"},"Новый вопрос ")])]),e("form",{onSubmit:t[17]||(t[17]=F((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[e("div",Es,[e("div",Js,[s.rounds.length>0?(i(),n("p",Ys,[u(" Ранее созданные раунды: "),(i(!0),n($,null,v(s.rounds,o=>(i(),n("span",{onClick:c=>s.questionForm.round=o,class:"badge bg-primary mr-1 cursor-pointer"},f(o),9,Hs))),256))])):a("",!0),e("label",Ks,[_(d,null,{content:r(()=>[Gs]),default:r(()=>[Xs]),_:1}),u(" Раунд "),Ws]),m(e("input",{type:"number",class:"form-control",placeholder:"Раунд","aria-label":"Раундт",step:"1",min:"1","onUpdate:modelValue":t[1]||(t[1]=o=>s.questionForm.round=o),"aria-describedby":"quiz-round",required:""},null,512),[[b,s.questionForm.round]])]),e("div",Zs,[e("label",xs,[_(d,null,{content:r(()=>[st]),default:r(()=>[et]),_:1}),u(" Текст вопроса "),tt,s.questionForm.text?(i(),n("small",ot," Длина текста "+f(s.questionForm.text.length)+"/255",1)):a("",!0)]),m(e("textarea",{type:"text",class:"form-control",placeholder:"Текст вопроса","aria-label":"Текст вопроса","onUpdate:modelValue":t[2]||(t[2]=o=>s.questionForm.text=o),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[b,s.questionForm.text]])]),e("div",lt,[e("div",it,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=o=>s.need_media=o),type:"checkbox",id:"need_media"},null,512),[[y,s.need_media]]),nt])]),s.need_media?(i(),n("div",at,[e("label",dt,[_(d,null,{content:r(()=>[ut]),default:r(()=>[rt]),_:1}),u(" Медиа контент к вопросу "),s.questionForm.content_type?(i(),n("span",ct,f(s.questionForm.content_type),1)):a("",!0),mt]),_t,_(k,{type:s.questionForm.media_content,"onUpdate:type":t[4]||(t[4]=o=>s.questionForm.media_content=o),value:s.questionForm.content_type,"onUpdate:value":t[5]||(t[5]=o=>s.questionForm.content_type=o)},null,8,["type","value"]),pt,_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.media_content],onSelect:s.selectMedia},null,8,["selected","onSelect"])])):a("",!0),e("div",ht,[e("div",bt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=o=>s.questionForm.is_multiply=o),type:"checkbox",id:"is_multiply"},null,512),[[y,s.questionForm.is_multiply]]),ft])]),e("div",yt,[e("div",$t,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=o=>s.questionForm.is_open=o),type:"checkbox",id:"is_open"},null,512),[[y,s.questionForm.is_open]]),gt])]),e("div",vt,[e("label",qt,[_(d,null,{content:r(()=>[zt]),default:r(()=>[kt]),_:1}),u(" Текст при выборе правильного ответа "),Ft,s.questionForm.success_message?(i(),n("small",wt," Длина текста "+f(s.questionForm.success_message.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при правильном ответе","aria-label":"Текст при правильном ответе",maxlength:"255","onUpdate:modelValue":t[8]||(t[8]=o=>s.questionForm.success_message=o),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[b,s.questionForm.success_message]])]),e("div",Ct,[e("div",Qt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=o=>s.need_media_for_success=o),type:"checkbox",id:"need_media_for_success"},null,512),[[y,s.need_media_for_success]]),St])]),s.need_media_for_success?(i(),n("div",Vt,[Ut,_(k,{type:s.questionForm.success_media_content_type,"onUpdate:type":t[10]||(t[10]=o=>s.questionForm.success_media_content_type=o),value:s.questionForm.success_media_content,"onUpdate:value":t[11]||(t[11]=o=>s.questionForm.success_media_content=o)},null,8,["type","value"]),Mt,_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.success_media_content],onSelect:s.selectMediaForSuccess},null,8,["selected","onSelect"])])):a("",!0),e("div",Tt,[e("label",jt,[_(d,null,{content:r(()=>[At]),default:r(()=>[It]),_:1}),u(" Текст при выборе неправильного ответа "),Pt,s.questionForm.failure_message?(i(),n("small",Rt," Длина текста "+f(s.questionForm.failure_message.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при неправильном ответе","aria-label":"Текст при неправильном ответе",maxlength:"255","onUpdate:modelValue":t[12]||(t[12]=o=>s.questionForm.failure_message=o),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[b,s.questionForm.failure_message]])]),e("div",Ot,[e("div",Bt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[13]||(t[13]=o=>s.need_media_for_failed=o),type:"checkbox",id:"need_media_for_failed"},null,512),[[y,s.need_media_for_failed]]),Nt])]),s.need_media_for_failed?(i(),n("div",Lt,[Dt,_(k,{type:s.questionForm.failure_media_content_type,"onUpdate:type":t[14]||(t[14]=o=>s.questionForm.failure_media_content_type=o),value:s.questionForm.failure_media_content,"onUpdate:value":t[15]||(t[15]=o=>s.questionForm.failure_media_content=o)},null,8,["type","value"]),Et,_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.failure_media_content],onSelect:s.selectMediaForFailure},null,8,["selected","onSelect"])])):a("",!0)]),e("div",Jt,[e("div",Yt,[e("button",{onClick:t[16]||(t[16]=(...o)=>s.addNewAnswer&&s.addNewAnswer(...o)),type:"button",class:"btn btn-outline-success rounded-5"}," Добавить ответы ")]),e("div",Ht,[s.questionForm.answers.length>0?(i(),n("table",Kt,[Xt,e("tbody",null,[(i(!0),n($,null,v(s.questionForm.answers,(o,c)=>(i(),n("tr",{class:g({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[e("th",Gt,f(o.id||"Новый"),1),e("td",null,[e("div",Wt,[m(e("input",{type:"text","onUpdate:modelValue":h=>s.questionForm.answers[c].text=h,class:"form-control",id:"answer-text-"+c,placeholder:"Текст ответа"},null,8,Zt),[[b,s.questionForm.answers[c].text]]),e("label",{for:"answer-text-"+c},"Текст ответа",8,xt)])]),e("td",null,[e("div",eo,[m(e("input",{type:"text","onUpdate:modelValue":h=>s.questionForm.answers[c].points=h,class:"form-control",id:"answer-points-"+c,placeholder:"Текст ответа"},null,8,so),[[b,s.questionForm.answers[c].points]]),e("label",{for:"answer-points-"+c},"Баллы",8,to)])]),e("td",null,[e("p",{class:"cursor-pointer",onClick:h=>s.chooseMediaContent(c)},f(o.media_content||"Не указано"),9,oo)]),e("td",null,f(o.content_type||"Не указано"),1),e("td",null,[e("div",lo,[m(e("input",{class:"form-check-input","onUpdate:modelValue":h=>s.questionForm.answers[c].is_right_answer=h,type:"checkbox",id:"answer-is_right_answer-"+c},null,8,io),[[y,s.questionForm.answers[c].is_right_answer]]),e("label",{class:"form-check-label",for:"answer-is_right_answer-"+c}," Правильный ответ ",8,no)])]),e("td",null,[e("div",ao,[ro,e("ul",uo,[o.id==null?(i(),n("li",co,[e("a",{class:"dropdown-item",onClick:h=>s.removeAnswerFromArray(c),href:"javascript:void(0)"},"Удалить",8,mo)])):a("",!0),o.deleted_at==null&&o.id!=null?(i(),n("li",_o,[e("a",{class:"dropdown-item",onClick:h=>s.removeAnswer(o.id),href:"javascript:void(0)"},"Удалить",8,po)])):a("",!0)])])])],2))),256))])])):(i(),n("p",ho,"На текущий момент нет ни одного созданного ответа"))])]),e("div",bo,[e("div",fo,[e("button",yo,[s.questionForm.id==null?(i(),n("span",$o,"Сохранить вопрос")):(i(),n("span",go,"Обновить вопрос"))])])])],32),e("div",vo,[e("div",qo,[e("div",ko,[s.selectedQuestionIndex!=null?(i(),n("div",zo,[_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.answers[s.selectedQuestionIndex||0].media_content||""],onSelect:s.selectMediaForAnswer},null,8,["selected","onSelect"])])):a("",!0),Fo])])])],64)}}}),Qo={class:"row py-3"},So={class:"col-12"},Vo={class:"row"},Uo={class:"col-12 mb-3"},Mo={class:"form-label",id:"command-title"},To=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),jo=e("div",null," Название команды ",-1),Io=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ao={class:"col-12 mb-3"},Po={class:"form-label",id:"event-on_after_appointment"},Ro=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Oo=e("div",null," Текст описания команды ",-1),Bo=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),No={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Lo=e("div",{class:"col-12 mb-3"},[e("button",{type:"button",class:"btn btn-outline-info rounded-5","data-bs-toggle":"modal","data-bs-target":"#select-players"}," Подобрать участников команды ")],-1),Do={key:0,class:"col-12 mb-3"},Eo=e("h4",null,"Пользователи в команде",-1),Jo={class:"list-group list-group-numbered"},Yo={class:"list-group-item d-flex justify-content-between align-items-start"},Ho={class:"ms-2 me-auto"},Ko={class:"fw-bold"},Xo={class:"dropdown"},Go=e("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-ellipsis"})],-1),Wo={class:"dropdown-menu"},Zo=["onClick"],xo={class:"row"},el={class:"col-12"},sl={type:"submit",class:"btn btn-outline-success w-100 p-3"},tl={key:0},ol={key:1},ll={class:"modal fade",id:"select-players",tabindex:"-1","aria-labelledby":"select-players-label","aria-hidden":"true"},il={class:"modal-dialog modal-fullscreen"},nl={class:"modal-content"},al=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"select-players-label"},"Подбор участников команды"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),dl={class:"modal-body"},rl=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ul={props:["quizId","bot","command"],data(){return{step:0,load:!1,commandForm:{id:null,title:null,description:null,players:[]}}},watch:{commandForm:{handler(l){this.need_reset=!0},deep:!0}},mounted(){this.command&&this.$nextTick(()=>{this.commandForm={id:this.command.id||null,title:this.command.title||null,description:this.command.description||null,players:this.command.players||[]}})},methods:{removePlayerFromCommand(l){},selectBotUser(l){if(this.commandForm.players.findIndex(t=>t.id==l.id)>=0){this.$notify("Такой пользователь уже есть в списке");return}this.$notify("Пользователь успешно добавлен"),this.commandForm.players.push(l)},clearCommandForm(){this.commandForm={id:null,title:null,description:null,players:[]}},submitForm(){let l=new FormData;Object.keys(this.commandForm).forEach(s=>{const t=this.commandForm[s]||"";typeof t=="object"?l.append(s,JSON.stringify(t)):l.append(s,t)}),l.append("bot_id",this.bot.id),l.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizCommand",{quizCommandForm:l}).then(s=>{this.$emit("callback",s.data),this.$notify("Команда успешно создана"),this.clearCommandForm()}).catch(s=>{this.$notify("Ошибка создания команды")})}}},cl=Object.assign(ul,{__name:"QuizCommandForm",setup(l){return(s,t)=>{const d=z("Popper");return i(),n($,null,[e("div",Qo,[e("div",So,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.clearCommandForm&&s.clearCommandForm(...o)),class:"btn btn-primary"},"Новая команда")])]),e("form",{onSubmit:t[3]||(t[3]=F((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[e("div",Vo,[e("div",Uo,[e("label",Mo,[_(d,null,{content:r(()=>[jo]),default:r(()=>[To]),_:1}),u(" Название команды "),Io]),m(e("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":t[1]||(t[1]=o=>s.commandForm.title=o),"aria-describedby":"command-title",required:""},null,512),[[b,s.commandForm.title]])]),e("div",Ao,[e("label",Po,[_(d,null,{content:r(()=>[Oo]),default:r(()=>[Ro]),_:1}),u(" Описание команды "),Bo,s.commandForm.description?(i(),n("small",No," Длина текста "+f(s.commandForm.description.length)+"/255",1)):a("",!0)]),m(e("textarea",{type:"text",class:"form-control",placeholder:"Текст описания","aria-label":"Текст описания","onUpdate:modelValue":t[2]||(t[2]=o=>s.commandForm.description=o),maxlength:"255","aria-describedby":"command-text",required:""},`
                    `,512),[[b,s.commandForm.description]])]),Lo,s.commandForm.players.length>0?(i(),n("div",Do,[Eo,e("ol",Jo,[(i(!0),n($,null,v(s.commandForm.players,o=>(i(),n("li",Yo,[e("div",Ho,[e("div",Ko,"#"+f(o.id),1),u(" "+f(o.fio_from_telegram||o.telegram_chat_id),1)]),e("div",Xo,[Go,e("ul",Wo,[e("li",null,[e("a",{class:"dropdown-item",onClick:c=>s.removePlayerFromCommand(o.id),href:"javascript:void(0)"},"Удалить",8,Zo)])])])]))),256))])])):a("",!0)]),e("div",xo,[e("div",el,[e("button",sl,[s.commandForm.id==null?(i(),n("span",tl,"Сохранить команду")):(i(),n("span",ol,"Обновить команду"))])])])],32),e("div",ll,[e("div",il,[e("div",nl,[al,e("div",dl,[_(C,{simple:!0,onSelect:s.selectBotUser},null,8,["onSelect"])]),rl])])])],64)}}}),ml={key:0,class:"py-2"},_l={class:"row"},pl={class:"col-12"},hl={key:1,class:"py-2"},bl={class:"row"},fl={class:"col-12"},yl={key:2,class:"py-2"},$l={class:"row"},gl={class:"col-12"},vl={class:"nav nav-tabs justify-content-center"},ql={key:0,class:"row py-3"},kl={class:"col-12"},zl={key:1,class:"row py-3"},Fl={class:"col-12"},wl={class:"col-12 py-3"},Cl=e("h4",null,"Доступные вопросы",-1),Ql={key:2,class:"row"},Sl={class:"col-12"},Vl={class:"col-12 py-3"},Ul=e("h4",null,"Команды участники квиза",-1),Ml={key:3,class:"row"},Tl={class:"col-12 py-3"},jl=e("h4",null,"Статистика",-1),Il={key:4,class:"row"},Al=e("div",{class:"col-12"},null,-1),Pl=e("div",{class:"col-12 py-3"},[e("h4",null,"Отзывы к событию")],-1),Rl=[Al,Pl],Ol={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadQuizCommand:!1,loadQuizQuestion:!1,loadQuizQuestionTable:!1,loadQuizCommandTable:!1,loadQuizResult:!1,loadForm:!1,selectedQuiz:null,selectedQuizQuestion:null,selectedQuizCommand:null,selectedQuizResult:null}},mounted(){},methods:{callbackCommandForm(){this.loadQuizCommandTable=!0,this.$nextTick(()=>{this.loadQuizCommandTable=!1})},callbackQuestionForm(){this.loadQuizQuestionTable=!0,this.$nextTick(()=>{this.loadQuizQuestionTable=!1})},callbackForm(){this.loadTable=!0,this.part=0,this.$nextTick(()=>{this.loadTable=!1})},createQuiz(){this.part=2},selectQuizResult(l){this.loadQuizResult=!0,this.$nextTick(()=>{this.loadQuizResult=!1,this.selectedQuizResult=l})},selectQuizCommand(l){this.loadQuizCommand=!0,this.$nextTick(()=>{this.loadQuizCommand=!1,this.selectedQuizCommand=l})},selectQuizQuestion(l){this.loadQuizQuestion=!0,this.$nextTick(()=>{this.loadQuizQuestion=!1,this.selectedQuizQuestion=l})},selectQuiz(l){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedQuiz=l,this.part=1,this.tab=0})}}},Bl=Object.assign(Ol,{__name:"Quizzes",setup(l){return(s,t)=>(i(),n($,null,[s.part===0?(i(),n("div",ml,[e("div",_l,[e("div",pl,[e("button",{type:"button",onClick:t[0]||(t[0]=(...d)=>s.createQuiz&&s.createQuiz(...d)),class:"btn btn-primary"}," Создать новый квиз ")])]),s.loadTable?a("",!0):(i(),p(V,{key:0,onCreate:s.createQuiz,onSelect:s.selectQuiz,bot:l.bot},null,8,["onCreate","onSelect","bot"]))])):a("",!0),s.part===2?(i(),n("div",hl,[e("div",bl,[e("div",fl,[e("button",{type:"button",onClick:t[1]||(t[1]=d=>s.part=0),class:"btn btn-outline-primary"}," Назад ")])]),s.loadForm?a("",!0):(i(),p(w,{key:0,onCallback:s.callbackForm,bot:l.bot},null,8,["onCallback","bot"]))])):a("",!0),s.part===1?(i(),n("div",yl,[e("div",$l,[e("div",gl,[e("button",{type:"button",onClick:t[2]||(t[2]=d=>s.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e("ul",vl,[e("li",{class:"nav-item",onClick:t[3]||(t[3]=d=>s.tab=0)},[e("a",{class:g(["nav-link",{active:s.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о квизе",2)]),e("li",{class:"nav-item",onClick:t[4]||(t[4]=d=>s.tab=1)},[e("a",{class:g(["nav-link",{active:s.tab===1}]),href:"javascript:void(0)"},"Вопросы квиза",2)]),e("li",{class:"nav-item",onClick:t[5]||(t[5]=d=>s.tab=2)},[e("a",{class:g(["nav-link",{active:s.tab===2}]),href:"javascript:void(0)"},"Команды на квизе",2)]),e("li",{class:"nav-item",onClick:t[6]||(t[6]=d=>s.tab=3)},[e("a",{class:g(["nav-link",{active:s.tab===3}]),href:"javascript:void(0)"},"Командная статистика",2)])]),s.tab===0?(i(),n("div",ql,[e("div",kl,[s.loadForm?a("",!0):(i(),p(w,{key:0,onCallback:s.callbackForm,quiz:s.selectedQuiz,bot:l.bot},null,8,["onCallback","quiz","bot"]))])])):a("",!0),s.tab===1?(i(),n("div",zl,[e("div",Fl,[s.loadQuizQuestion?a("",!0):(i(),p(Co,{key:0,question:s.selectedQuizQuestion,"quiz-id":s.selectedQuiz.id,onCallback:s.callbackQuestionForm,bot:l.bot},null,8,["question","quiz-id","onCallback","bot"]))]),e("div",wl,[Cl,s.loadQuizQuestionTable?a("",!0):(i(),p(U,{key:0,"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizQuestion,bot:l.bot},null,8,["quiz-id","onSelect","bot"]))])])):a("",!0),s.tab===2?(i(),n("div",Ql,[e("div",Sl,[s.loadQuizCommand?a("",!0):(i(),p(cl,{key:0,command:s.selectedQuizCommand,"quiz-id":s.selectedQuiz.id,onCallback:s.callbackCommandForm,bot:l.bot},null,8,["command","quiz-id","onCallback","bot"]))]),e("div",Vl,[Ul,s.loadQuizCommandTable?a("",!0):(i(),p(M,{key:0,"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizCommand,bot:l.bot},null,8,["quiz-id","onSelect","bot"]))])])):a("",!0),s.tab===3?(i(),n("div",Ml,[e("div",Tl,[jl,_(T,{"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizResult,bot:l.bot},null,8,["quiz-id","onSelect","bot"])])])):a("",!0),s.tab===4?(i(),n("div",Il,Rl)):a("",!0)])):a("",!0)],64))}}),Nl={class:"d-flex custom-dropdown justify-content-between align-items-center"},Ll={class:"btn-group"},Dl=e("i",{class:"fa-solid fa-info mr-2"},null,-1),El=e("i",{class:"fa-solid fa-file mr-2"},null,-1),Jl={key:0,class:"dropdown"},Yl=e("button",{type:"button",class:"btn btn-primary dropdown-toggle text-primary p-2",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-screwdriver-wrench mr-2"})],-1),Hl={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},Kl=e("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1),Xl=e("i",{class:"fa-solid fa-q mr-2"},null,-1),Gl=e("i",{class:"fa-solid fa-code mr-2"},null,-1),Wl=e("i",{class:"fa-solid fa-keyboard mr-2"},null,-1),Zl=e("i",{class:"fa-solid fa-scroll mr-2"},null,-1),xl=e("i",{class:"fa-solid fa-comment-dots mr-2"},null,-1),ei=e("i",{class:"fa-solid fa-users mr-2"},null,-1),si=e("i",{class:"fa-regular fa-newspaper mr-2"},null,-1),ti=e("i",{class:"fa-solid fa-list-check mr-2"},null,-1),oi=e("i",{class:"fa-solid fa-list-check mr-2"},null,-1),li=e("i",{class:"fa-brands fa-shopify mr-2"},null,-1),ii=e("i",{class:"fa-brands fa-shopify mr-2"},null,-1),ni={key:0,class:"pb-5 mb-5"},ai={key:1,class:"pb-5 mb-5"},di={key:2,class:"pb-5 mb-5"},ri={key:3,class:"pb-5 mb-5"},ui={key:4,class:"pb-5 mb-5"},ci={key:5,class:"pb-5 pt-2 mb-5"},mi={key:6,class:"pb-5 mb-5"},_i={key:7,class:"pb-5 mb-5 pt-2"},pi={key:8,class:"pb-5 mb-5"},hi={key:9,class:"pb-5 mb-5 pt-2"},bi={key:10,class:"pb-5 mb-5 pt-2"},fi={key:11,class:"pb-5 mb-5 pt-2"},yi={key:12,class:"row pb-5 mb-5"},$i={key:0,class:"col-12 col-md-12"},gi={key:13,class:"pb-5 mb-5"},vi={props:["bot"],data(){return{page:null,step:0,load:!1,loadPage:!1}},mounted(){this.setStep(localStorage.getItem("cashman_set_botform_step_index")||0)},methods:{hasRole(l){return window.hasRole(l)||!1},setStep(l){this.step=parseInt(l),localStorage.setItem("cashman_set_botform_step_index",l)},pageListCallback(l){this.loadPage=!0,this.page=l,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(l){this.page=l,this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})},loadCurrentCompany(l=null){this.$store.dispatch("updateCurrentCompany",{company:l}).then(()=>{this.company=this.getCurrentCompany})},companyListCallback(l){this.load=!0,this.loadCurrentCompany(l),this.$nextTick(()=>{this.load=!1})}}},Ci=Object.assign(vi,{__name:"BotSection",setup(l){return(s,t)=>(i(),n($,null,[e("div",Nl,[e("div",Ll,[e("button",{type:"button",class:g(["btn btn-primary text-primary",{"bg-primary text-white":s.step==0}]),onClick:t[0]||(t[0]=d=>s.setStep(0))},[Dl,u("Информация о боте")],2),e("button",{type:"button",class:g(["btn btn-primary text-primary",{"bg-primary text-white":s.step==4}]),onClick:t[1]||(t[1]=d=>s.setStep(4))},[El,u("Страницы")],2)]),s.hasRole("admin")?(i(),n("div",Jl,[Yl,e("ul",Hl,[e("li",null,[e("a",{class:"dropdown-item",href:"#bot-appointments",onClick:t[2]||(t[2]=d=>s.setStep(13))},[Kl,u("Запись на событие (прием)")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-quizzes",onClick:t[3]||(t[3]=d=>s.setStep(14))},[Xl,u("Квизы")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-custom-fields",onClick:t[4]||(t[4]=d=>s.setStep(10))},[Gl,u("Настраиваемые поля")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-menu-template",onClick:t[5]||(t[5]=d=>s.setStep(1))},[Wl,u("Все клавиатуры в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-slugs",onClick:t[6]||(t[6]=d=>s.setStep(2))},[Zl,u("Все скрипты в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-dialogs",onClick:t[7]||(t[7]=d=>s.setStep(6))},[xl,u("Все диалоги в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-users",onClick:t[8]||(t[8]=d=>s.setStep(3))},[ei,u("Все пользователи в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-news",onClick:t[9]||(t[9]=d=>s.setStep(9))},[si,u(" Новостной канал")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-amo",onClick:t[10]||(t[10]=d=>s.setStep(7))},[ti,u(" AMO CRM")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-y-clients",onClick:t[11]||(t[11]=d=>s.setStep(12))},[oi,u(" YClients")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-shop",onClick:t[12]||(t[12]=d=>s.setStep(8))},[li,u(" Магазин")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-media",onClick:t[13]||(t[13]=d=>s.setStep(11))},[ii,u(" Медиа файлы бота")])])])])):a("",!0)]),s.step===14?(i(),n("div",ni,[s.load?a("",!0):(i(),p(Bl,{key:0,bot:l.bot},null,8,["bot"]))])):a("",!0),s.step===13?(i(),n("div",ai,[s.load?a("",!0):(i(),p(j,{key:0,bot:l.bot},null,8,["bot"]))])):a("",!0),s.step===0?(i(),n("div",di,[s.load?a("",!0):(i(),p(I,{key:0,bot:l.bot},null,8,["bot"]))])):a("",!0),s.step===7?(i(),n("div",ri,[s.load?a("",!0):(i(),p(A,{key:0,data:l.bot.amo},null,8,["data"]))])):a("",!0),s.step===12?(i(),n("div",ui,[s.load?a("",!0):(i(),p(P,{key:0,data:l.bot.y_clients},null,8,["data"]))])):a("",!0),s.step===11?(i(),n("div",ci,[s.load?a("",!0):(i(),p(R,{key:0}))])):a("",!0),s.step===8?(i(),n("div",mi,[s.load?a("",!0):(i(),p(O,{key:0}))])):a("",!0),s.step===10?(i(),n("div",_i,[s.load?a("",!0):(i(),p(B,{key:0}))])):a("",!0),s.step===1?(i(),n("div",pi,[s.load?a("",!0):(i(),p(Q,{key:0,"select-mode":!1}))])):a("",!0),s.step===6?(i(),n("div",hi,[s.load?a("",!0):(i(),p(N,{key:0}))])):a("",!0),s.step===2?(i(),n("div",bi,[s.load?a("",!0):(i(),p(L,{key:0}))])):a("",!0),s.step===3?(i(),n("div",fi,[s.load?a("",!0):(i(),p(C,{key:0}))])):a("",!0),s.step===4?(i(),n("div",yi,[s.load?a("",!0):(i(),n("div",$i,[s.loadPage?a("",!0):(i(),p(D,{key:0,page:s.page,onCallback:s.pageCallback},null,8,["page","onCallback"]))]))])):a("",!0),s.step===9?(i(),n("div",gi,[_(S)])):a("",!0)],64))}});export{Ci as _};
