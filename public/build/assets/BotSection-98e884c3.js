import{_ as C,a as Q}from"./Mail-2b6e5867.js";import{e as w,f as S,g as V,h as U,i as M,j as T,_ as j,A as I,Y as A,k as P,l as R,B as O,d as B,m as N,c as L}from"./BotList-8fc56de1.js";import{aS as k,aF as l,A as n,D as e,P as _,bw as r,O as u,by as m,bn as h,bj as y,z as a,b4 as b,F as $,aQ as v,bm as D,bB as z,ap as g,y as p}from"./index.es-cc022547.js";import{_ as q}from"./GlobalSlugList-0b171da3.js";const E={class:"row"},J={class:"col-12 mb-3"},Y={class:"form-label",id:"quiz-title"},G=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),H=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),K={class:"col-12 mb-3"},W={class:"form-check"},X=e("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),Z={key:0,class:"col-12 mb-3"},x={class:"form-label",id:"quiz-images"},ee=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),se=e("div",null," Изображение, которое видит пользователь при выборе квиза ",-1),te=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),oe={class:"col-12 mb-3"},le={class:"form-label",id:"quiz-description"},ie=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ne=e("div",null," Краткая информация о квизе ",-1),ae=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),de={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},re={class:"col-12 mb-3"},ue={class:"form-label",id:"quiz-time_limit"},ce=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),me=e("div",null," Время на ответ ",-1),_e=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),pe={class:"col-12 mb-3"},he={class:"form-check"},be=e("label",{class:"form-check-label",for:"is-group"}," Показывать ответы по окончанию раунда ",-1),fe={class:"col-12 mb-3"},ye={class:"form-check"},$e=e("label",{class:"form-check-label",for:"is_active"}," Квиз виден пользователям ",-1),ge={class:"col-12 mb-3"},ve={class:"form-check"},qe=e("label",{class:"form-check-label",for:"round_mode"}," Использовать систему раундов ",-1),ke={class:"col-12 mb-3"},ze={class:"form-check"},Fe=e("label",{class:"form-check-label",for:"polling_mode"}," Квиз в режиме опроса (без команд) ",-1),we={class:"col-12 mb-3"},Ce={class:"form-label",id:"quiz-time_limit"},Qe=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Se=e("div",null," Число попыток прохождения квиза ",-1),Ve=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ue={class:"col-12 mb-3"},Me={class:"form-label",id:"quiz-time_limit"},Te=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),je=e("div",null," Сколько % нужно ответить чтоб пройти ",-1),Ie=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ae={class:"row"},Pe={class:"col-12 py-2"},Re={class:"col-12 mb-3"},Oe={class:"row"},Be={class:"col-10"},Ne={class:"form-label",id:"quiz-success_message"},Le=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),De=e("div",null," Текст в случае успешного прохождения квиза ",-1),Ee=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Je={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ye=["onUpdate:modelValue"],Ge={class:"col-2 d-flex align-items-center justify-content-center"},He=["disabled","onClick"],Ke={class:"row"},We={class:"col-12 py-2"},Xe={class:"col-12 mb-3"},Ze={class:"row"},xe={class:"col-10"},es=["id"],ss=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ts=e("div",null," Текст в случае неудачного прохождения квиза ",-1),os=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ls={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},is=["onUpdate:modelValue"],ns={class:"col-2 d-flex align-items-center justify-content-center"},as=["disabled","onClick"],ds={class:"row"},rs={class:"col-12 mb-3"},us={class:"form-floating"},cs=["value","selected"],ms=e("label",{for:"quiz-display-type"},"Тип вывода вопросов",-1),_s={key:0,class:"row"},ps={class:"col-12 mb-3"},hs={class:"form-label",id:"quiz-time_limit"},bs=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),fs=e("div",null," Дата и время начала квиза ",-1),ys=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),$s={class:"col-12 mb-3"},gs={class:"form-label",id:"quiz-time_limit"},vs=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qs=e("div",null," Дата и время окончания квиза ",-1),ks=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),zs={class:"col-12 mb-3"},Fs={class:"form-label",id:"quiz-time_limit"},ws=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Cs=e("div",null," Дата и время окончания квиза. Квиз создается на 1 игру. Данное поле заполняется автоматически при прохождении квиза командой. ",-1),Qs={class:"row"},Ss={class:"col-12"},Vs={type:"submit",class:"btn btn-outline-success w-100 p-3"},Us={key:0},Ms={key:1},Ts={props:["quiz","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"],quizForm:{id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]}}},watch:{quizForm:{handler(o){this.need_reset=!0},deep:!0}},mounted(){this.quiz&&this.$nextTick(()=>{this.quizForm={id:this.quiz.id||null,title:this.quiz.title||null,image:this.quiz.image||null,description:this.quiz.description||null,completed_at:this.quiz.completed_at?this.$filters.currentFull(this.quiz.completed_at):null,start_at:this.quiz.start_at?this.$filters.currentFull(this.quiz.start_at):null,end_at:this.quiz.end_at?this.$filters.currentFull(this.quiz.end_at):null,display_type:this.quiz.display_type||0,time_limit:this.quiz.time_limit||30,show_answers:this.quiz.show_answers||!1,polling_mode:this.quiz.polling_mode||!1,round_mode:this.quiz.round_mode||!1,is_active:this.quiz.is_active||!1,try_count:this.quiz.try_count||1,success_percent:this.quiz.success_percent||50,success_message:this.quiz.success_message||["Задание успешно пройдено!"],failure_message:this.quiz.failure_message||["К сожалению вы не прошли задание!"]}})},methods:{selectPhoto(o){this.quizForm.image=o.file_id},removeMessage(o,s){this.quizForm[o||"success_message"].splice(s,1)},addMessage(o,s){this.quizForm[o||"success_message"].push(s)},submitForm(){let o=new FormData;Object.keys(this.quizForm).forEach(s=>{const t=this.quizForm[s]||"";typeof t=="object"?o.append(s,JSON.stringify(t)):o.append(s,t)}),o.append("bot_id",this.bot.id),this.$store.dispatch("storeQuiz",{quizForm:o}).then(s=>{this.$emit("callback",s.data),this.quizForm={id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]},this.$notify("Событие успешно создано")}).catch(s=>{this.$notify("Ошибка создания события")})}}},F=Object.assign(Ts,{__name:"QuizForm",setup(o){return(s,t)=>{const d=k("Popper");return l(),n("form",{onSubmit:t[16]||(t[16]=z((...i)=>s.submitForm&&s.submitForm(...i),["prevent"])),class:"py-3"},[e("div",E,[e("div",J,[e("label",Y,[_(d,{content:"Название вашего квиза"},{default:r(()=>[G]),_:1}),u(" Название квиза "),H]),m(e("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":t[0]||(t[0]=i=>s.quizForm.title=i),maxlength:"255","aria-describedby":"quiz-title",required:""},null,512),[[h,s.quizForm.title]])]),e("div",K,[e("div",W,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=i=>s.need_media=i),type:"checkbox",id:"need_media"},null,512),[[y,s.need_media]]),X])]),s.need_media?(l(),n("div",Z,[e("label",x,[_(d,null,{content:r(()=>[se]),default:r(()=>[ee]),_:1}),u(" Изображение к квизу "),te]),_(q,{"need-photo":!0,selected:s.quizForm.image,onSelect:s.selectPhoto},null,8,["selected","onSelect"])])):a("",!0),e("div",oe,[e("label",le,[_(d,null,{content:r(()=>[ne]),default:r(()=>[ie]),_:1}),u(" Описание события "),ae,s.quizForm.description?(l(),n("small",de," Длина текста "+b(s.quizForm.description.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":t[2]||(t[2]=i=>s.quizForm.description=i),"aria-describedby":"quiz-description",required:""},`
                    `,512),[[h,s.quizForm.description]])]),e("div",re,[e("label",ue,[_(d,null,{content:r(()=>[me]),default:r(()=>[ce]),_:1}),u(" Лимит времени на ответ в секундах "),_e]),m(e("input",{type:"number",class:"form-control",placeholder:"Лимит времени на ответ","aria-label":"Лимит времени на ответ",step:"0.1",min:"0","onUpdate:modelValue":t[3]||(t[3]=i=>s.quizForm.time_limit=i),"aria-describedby":"quiz-time_limit",required:""},null,512),[[h,s.quizForm.time_limit]])]),e("div",pe,[e("div",he,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=i=>s.quizForm.show_answers=i),type:"checkbox",id:"is-group"},null,512),[[y,s.quizForm.show_answers]]),be])]),e("div",fe,[e("div",ye,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=i=>s.quizForm.is_active=i),type:"checkbox",id:"is_active"},null,512),[[y,s.quizForm.is_active]]),$e])]),e("div",ge,[e("div",ve,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=i=>s.quizForm.round_mode=i),type:"checkbox",id:"round_mode"},null,512),[[y,s.quizForm.round_mode]]),qe])]),e("div",ke,[e("div",ze,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=i=>s.quizForm.polling_mode=i),type:"checkbox",id:"polling_mode"},null,512),[[y,s.quizForm.polling_mode]]),Fe])]),e("div",we,[e("label",Ce,[_(d,null,{content:r(()=>[Se]),default:r(()=>[Qe]),_:1}),u(" Количество попыток "),Ve]),m(e("input",{type:"number",class:"form-control",placeholder:"Число попыток","aria-label":"Число попыток",step:"1",min:"1","onUpdate:modelValue":t[8]||(t[8]=i=>s.quizForm.try_count=i),"aria-describedby":"quiz-try_count",required:""},null,512),[[h,s.quizForm.try_count]])]),e("div",Ue,[e("label",Me,[_(d,null,{content:r(()=>[je]),default:r(()=>[Te]),_:1}),u(" % для прохождения "),Ie]),m(e("input",{type:"number",class:"form-control",placeholder:"Процент для победы","aria-label":"Процент для победы",step:"1",min:"0","onUpdate:modelValue":t[9]||(t[9]=i=>s.quizForm.success_percent=i),"aria-describedby":"quiz-success_percent",required:""},null,512),[[h,s.quizForm.success_percent]])])]),e("div",Ae,[e("div",Pe,[e("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:t[10]||(t[10]=i=>s.addMessage("success_message",null))},"Добавить еще вариант текста")]),(l(!0),n($,null,v(s.quizForm.success_message,(i,c)=>(l(),n("div",Re,[e("div",Oe,[e("div",Be,[e("label",Ne,[_(d,null,{content:r(()=>[De]),default:r(()=>[Le]),_:1}),u(" Текст при победе "),Ee,s.quizForm.success_message[c]?(l(),n("small",Je," Длина текста "+b(s.quizForm.success_message[c].length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при победе","aria-label":"Текст при победе",maxlength:"255","onUpdate:modelValue":f=>s.quizForm.success_message[c]=f,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,Ye),[[h,s.quizForm.success_message[c]]])]),e("div",Ge,[e("button",{class:"btn btn-outline-danger",disabled:s.quizForm.success_message.length<=1,onClick:f=>s.removeMessage("success_message",c)},"Удалить",8,He)])])]))),256))]),e("div",Ke,[e("div",We,[e("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:t[11]||(t[11]=i=>s.addMessage("failure_message",null))},"Добавить еще вариант текста")]),(l(!0),n($,null,v(s.quizForm.failure_message,(i,c)=>(l(),n("div",Xe,[e("div",Ze,[e("div",xe,[e("label",{class:"form-label",id:"quiz-failure_message"+c},[_(d,null,{content:r(()=>[ts]),default:r(()=>[ss]),_:1}),u(" Текст при проигрыше "),os,s.quizForm.failure_message[c]?(l(),n("small",ls," Длина текста "+b(s.quizForm.failure_message[c].length)+"/255",1)):a("",!0)],8,es),m(e("textarea",{class:"form-control",placeholder:"Текст при проигрыше","aria-label":"Текст при проигрыше",maxlength:"255","onUpdate:modelValue":f=>s.quizForm.failure_message[c]=f,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,is),[[h,s.quizForm.failure_message[c]]])]),e("div",ns,[e("button",{class:"btn btn-outline-danger",disabled:s.quizForm.failure_message.length<=1,onClick:f=>s.removeMessage("failure_message",c)},"Удалить",8,as)])])]))),256))]),e("div",ds,[e("div",rs,[e("div",us,[m(e("select",{class:"form-select","onUpdate:modelValue":t[12]||(t[12]=i=>s.quizForm.display_type=i),id:"quiz-display-type","aria-label":"quiz-display-type"},[(l(!0),n($,null,v(s.types,(i,c)=>(l(),n("option",{value:c,selected:c==s.quizForm.display_type},b(i),9,cs))),256))],512),[[D,s.quizForm.display_type]]),ms])])]),s.quizForm.polling_mode?a("",!0):(l(),n("div",_s,[e("div",ps,[e("label",hs,[_(d,null,{content:r(()=>[fs]),default:r(()=>[bs]),_:1}),u(" Дата и время начала начала "),ys]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время начала квиза ","aria-label":"Дата и время начала квиза",maxlength:"255","onUpdate:modelValue":t[13]||(t[13]=i=>s.quizForm.start_at=i),"aria-describedby":"quiz-start_at",required:""},null,512),[[h,s.quizForm.start_at]])]),e("div",$s,[e("label",gs,[_(d,null,{content:r(()=>[qs]),default:r(()=>[vs]),_:1}),u(" Дата и время окончания квиза "),ks]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время окончания квиза","aria-label":"Дата и время окончания квиза",maxlength:"255","onUpdate:modelValue":t[14]||(t[14]=i=>s.quizForm.end_at=i),"aria-describedby":"quiz-end_at",required:""},null,512),[[h,s.quizForm.end_at]])]),e("div",zs,[e("label",Fs,[_(d,null,{content:r(()=>[Cs]),default:r(()=>[ws]),_:1}),u(" Дата и время прохождения квиза ")]),m(e("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время прохождения квиза","aria-label":"Дата и время прохождения квиза",maxlength:"255","onUpdate:modelValue":t[15]||(t[15]=i=>s.quizForm.completed_at=i),"aria-describedby":"quiz-completed_at"},null,512),[[h,s.quizForm.completed_at]])])])),e("div",Qs,[e("div",Ss,[e("button",Vs,[s.quizForm.id==null?(l(),n("span",Us,"Создать квиз")):(l(),n("span",Ms,"Обновить квиз"))])])])],32)}}}),js={class:"row py-3"},Is={class:"col-12"},As={class:"row"},Ps={class:"col-12 mb-3"},Rs={key:0},Os=["onClick"],Bs={class:"form-label",id:"quiz-round"},Ns=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ls=e("div",null," Раунд, в котором будет отображен вопрос ",-1),Ds=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Es={class:"col-12 mb-3"},Js={class:"form-label",id:"event-on_after_appointment"},Ys=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Gs=e("div",null," Текст вопроса ",-1),Hs=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ks={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ws={class:"col-12 mb-3"},Xs={class:"form-check"},Zs=e("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),xs={key:0,class:"col-12 mb-3"},et={class:"form-label",id:"quiz-images"},st=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),tt=e("div",null," Изображение, видео, аудио сопровождение вопроса ",-1),ot={key:0,class:"badge rounded-pill text-bg-info m-0"},lt=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),it={class:"col-12 mb-3"},nt={class:"form-check"},at=e("label",{class:"form-check-label",for:"is_multiply"}," Множественные ответы ",-1),dt={class:"col-12 mb-3"},rt={class:"form-check"},ut=e("label",{class:"form-check-label",for:"is_open"}," Открытый вопрос ",-1),ct={class:"col-12 mb-3"},mt={class:"form-label",id:"quiz-description"},_t=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pt=e("div",null," Текст при выборе правильного ответа ",-1),ht=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),bt={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},ft={class:"col-12 mb-3"},yt={class:"form-check"},$t=e("label",{class:"form-check-label",for:"need_media_for_success"}," Нужен медиа-контент при правильном ответе ",-1),gt={key:1,class:"col-12 mb-3"},vt={class:"col-12 mb-3"},qt={class:"form-label",id:"quiz-description"},kt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),zt=e("div",null," Текст в выбора неправильного ответа ",-1),Ft=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wt={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ct={class:"col-12 mb-3"},Qt={class:"form-check"},St=e("label",{class:"form-check-label",for:"need_media_for_failed"}," Нужен медиа-контент при неправильном ответе ",-1),Vt={key:2,class:"col-12 mb-3"},Ut={class:"row"},Mt={class:"col-12"},Tt={class:"col-12"},jt={key:0,class:"table"},It=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Текст вопроса"),e("th",{scope:"col"},"Баллы"),e("th",{scope:"col"},"Контент"),e("th",{scope:"col"},"Тип контента"),e("th",{scope:"col"},"Является верным"),e("th",{scope:"col"},"Действие")])],-1),At={scope:"row"},Pt={class:"form-floating mb-3"},Rt=["onUpdate:modelValue","id"],Ot=["for"],Bt={class:"form-floating mb-3"},Nt=["onUpdate:modelValue","id"],Lt=["for"],Dt=["onClick"],Et={class:"form-check"},Jt=["onUpdate:modelValue","id"],Yt=["for"],Gt={class:"dropdown"},Ht=e("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-ellipsis"})],-1),Kt={class:"dropdown-menu"},Wt={key:0},Xt=["onClick"],Zt={key:1},xt=["onClick"],eo={key:1},so={class:"row"},to={class:"col-12"},oo={type:"submit",class:"btn btn-outline-success w-100 p-3"},lo={key:0},io={key:1},no={class:"modal fade",id:"chooseMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ao={class:"modal-dialog"},ro={class:"modal-content"},uo={key:0,class:"modal-body"},co=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),mo={props:["quizId","bot","question"],data(){return{step:0,load:!1,selectedQuestionIndex:null,need_media:!1,need_media_for_success:!1,need_media_for_failed:!1,rounds:[],questionForm:{id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}}},watch:{questionForm:{handler(o){this.need_reset=!0},deep:!0},need_media:function(o,s){this.need_page_images||(this.questionForm.media_content=null,this.questionForm.content_type=null)},need_media_for_success:function(o,s){this.need_page_images||(this.questionForm.success_media_content=null,this.questionForm.success_media_content_type=null)},need_media_for_failed:function(o,s){this.need_page_images||(this.questionForm.failure_media_content=null,this.questionForm.failure_media_content_type=null)}},mounted(){this.loadQuizRounds(),this.question&&this.$nextTick(()=>{this.questionForm={id:this.question.id||null,text:this.question.text||null,round:this.question.round||null,media_content:this.question.media_content||null,content_type:this.question.content_type||null,is_multiply:this.question.is_multiply||!1,is_open:this.question.is_open||!1,answers:this.question.answers||[],success_message:this.question.success_message||null,failure_message:this.question.failure_message||null,success_media_content:this.question.success_media_content||null,failure_media_content:this.question.failure_media_content||null,success_media_content_type:this.question.success_media_content_type||null,failure_media_content_type:this.question.failure_media_content_type||null},this.questionForm.media_content!=null&&(this.need_media=!0),this.questionForm.success_media_content!=null&&(this.need_media_for_success=!0),this.questionForm.failure_media_content!=null&&(this.need_media_for_failed=!0)})},methods:{loadQuizRounds(){this.$store.dispatch("loadQuizRounds",{dataObject:{bot_id:this.bot.id||null,quiz_id:this.quizId||null}}).then(o=>{this.rounds=o})},chooseMediaContent(o){this.selectedQuestionIndex=null,this.$nextTick(()=>{this.selectedQuestionIndex=o}),new bootstrap.Modal(document.getElementById("chooseMediaContent"),{}).show()},selectMediaForFailure(o){this.questionForm.failure_media_content=o.file_id,this.questionForm.failure_media_content_type=o.type},selectMediaForSuccess(o){this.questionForm.success_media_content=o.file_id,this.questionForm.success_media_content_type=o.type},selectMediaForAnswer(o){this.questionForm.answers[this.selectedQuestionIndex].media_content=o.file_id,this.questionForm.answers[this.selectedQuestionIndex].content_type=o.type},selectMedia(o){this.questionForm.media_content=o.file_id,this.questionForm.content_type=o.type},clearQuestionForm(){this.questionForm={id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}},addNewAnswer(){this.questionForm.answers.push({text:null,media_content:null,content_type:null,is_right_answer:!1,points:0})},removeAnswerFromArray(o){this.questionForm.answers.splice(o,1)},removeAnswer(o){this.$store.dispatch("removeQuizAnswer",{quizAnswerId:o}).then(s=>{this.$notify("Вопрос успешно удален");let t=this.questionForm.answers.findIndex(d=>d.id==o);this.questionForm.answers.splice(t,1)}).catch(s=>{this.$notify("Ошибка удаления вопроса")})},submitForm(){let o=new FormData;Object.keys(this.questionForm).forEach(s=>{const t=this.questionForm[s]||"";typeof t=="object"?o.append(s,JSON.stringify(t)):o.append(s,t)}),o.append("bot_id",this.bot.id),o.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizQuestion",{quizQuestionForm:o}).then(s=>{this.$emit("callback",s.data),this.$notify("Вопрос успешно создан"),this.clearQuestionForm(),this.loadQuizRounds()}).catch(s=>{this.$notify("Ошибка создания вопроса")})}}},_o=Object.assign(mo,{__name:"QuizQuestionForm",setup(o){return(s,t)=>{const d=k("Popper");return l(),n($,null,[e("div",js,[e("div",Is,[e("button",{onClick:t[0]||(t[0]=(...i)=>s.clearQuestionForm&&s.clearQuestionForm(...i)),class:"btn btn-primary"},"Новый вопрос ")])]),e("form",{onSubmit:t[11]||(t[11]=z((...i)=>s.submitForm&&s.submitForm(...i),["prevent"]))},[e("div",As,[e("div",Ps,[s.rounds.length>0?(l(),n("p",Rs,[u(" Ранее созданные раунды: "),(l(!0),n($,null,v(s.rounds,i=>(l(),n("span",{onClick:c=>s.questionForm.round=i,class:"badge bg-primary mr-1 cursor-pointer"},b(i),9,Os))),256))])):a("",!0),e("label",Bs,[_(d,null,{content:r(()=>[Ls]),default:r(()=>[Ns]),_:1}),u(" Раунд "),Ds]),m(e("input",{type:"number",class:"form-control",placeholder:"Раунд","aria-label":"Раундт",step:"1",min:"1","onUpdate:modelValue":t[1]||(t[1]=i=>s.questionForm.round=i),"aria-describedby":"quiz-round",required:""},null,512),[[h,s.questionForm.round]])]),e("div",Es,[e("label",Js,[_(d,null,{content:r(()=>[Gs]),default:r(()=>[Ys]),_:1}),u(" Текст вопроса "),Hs,s.questionForm.text?(l(),n("small",Ks," Длина текста "+b(s.questionForm.text.length)+"/255",1)):a("",!0)]),m(e("textarea",{type:"text",class:"form-control",placeholder:"Текст вопроса","aria-label":"Текст вопроса","onUpdate:modelValue":t[2]||(t[2]=i=>s.questionForm.text=i),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[h,s.questionForm.text]])]),e("div",Ws,[e("div",Xs,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=i=>s.need_media=i),type:"checkbox",id:"need_media"},null,512),[[y,s.need_media]]),Zs])]),s.need_media?(l(),n("div",xs,[e("label",et,[_(d,null,{content:r(()=>[tt]),default:r(()=>[st]),_:1}),u(" Медиа контент к вопросу "),s.questionForm.content_type?(l(),n("span",ot,b(s.questionForm.content_type),1)):a("",!0),lt]),_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.media_content],onSelect:s.selectMedia},null,8,["selected","onSelect"])])):a("",!0),e("div",it,[e("div",nt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=i=>s.questionForm.is_multiply=i),type:"checkbox",id:"is_multiply"},null,512),[[y,s.questionForm.is_multiply]]),at])]),e("div",dt,[e("div",rt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=i=>s.questionForm.is_open=i),type:"checkbox",id:"is_open"},null,512),[[y,s.questionForm.is_open]]),ut])]),e("div",ct,[e("label",mt,[_(d,null,{content:r(()=>[pt]),default:r(()=>[_t]),_:1}),u(" Текст при выборе правильного ответа "),ht,s.questionForm.success_message?(l(),n("small",bt," Длина текста "+b(s.questionForm.success_message.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при правильном ответе","aria-label":"Текст при правильном ответе",maxlength:"255","onUpdate:modelValue":t[6]||(t[6]=i=>s.questionForm.success_message=i),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[h,s.questionForm.success_message]])]),e("div",ft,[e("div",yt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=i=>s.need_media_for_success=i),type:"checkbox",id:"need_media_for_success"},null,512),[[y,s.need_media_for_success]]),$t])]),s.need_media_for_success?(l(),n("div",gt,[_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.success_media_content],onSelect:s.selectMediaForSuccess},null,8,["selected","onSelect"])])):a("",!0),e("div",vt,[e("label",qt,[_(d,null,{content:r(()=>[zt]),default:r(()=>[kt]),_:1}),u(" Текст при выборе неправильного ответа "),Ft,s.questionForm.failure_message?(l(),n("small",wt," Длина текста "+b(s.questionForm.failure_message.length)+"/255",1)):a("",!0)]),m(e("textarea",{class:"form-control",placeholder:"Текст при неправильном ответе","aria-label":"Текст при неправильном ответе",maxlength:"255","onUpdate:modelValue":t[8]||(t[8]=i=>s.questionForm.failure_message=i),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[h,s.questionForm.failure_message]])]),e("div",Ct,[e("div",Qt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=i=>s.need_media_for_failed=i),type:"checkbox",id:"need_media_for_failed"},null,512),[[y,s.need_media_for_failed]]),St])]),s.need_media_for_failed?(l(),n("div",Vt,[_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.failure_media_content],onSelect:s.selectMediaForFailure},null,8,["selected","onSelect"])])):a("",!0)]),e("div",Ut,[e("div",Mt,[e("button",{onClick:t[10]||(t[10]=(...i)=>s.addNewAnswer&&s.addNewAnswer(...i)),type:"button",class:"btn btn-outline-success rounded-5"}," Добавить ответы ")]),e("div",Tt,[s.questionForm.answers.length>0?(l(),n("table",jt,[It,e("tbody",null,[(l(!0),n($,null,v(s.questionForm.answers,(i,c)=>(l(),n("tr",{class:g({"border-info":i.deleted_at==null,"border-danger":i.deleted_at!=null})},[e("th",At,b(i.id||"Новый"),1),e("td",null,[e("div",Pt,[m(e("input",{type:"text","onUpdate:modelValue":f=>s.questionForm.answers[c].text=f,class:"form-control",id:"answer-text-"+c,placeholder:"Текст ответа"},null,8,Rt),[[h,s.questionForm.answers[c].text]]),e("label",{for:"answer-text-"+c},"Текст ответа",8,Ot)])]),e("td",null,[e("div",Bt,[m(e("input",{type:"text","onUpdate:modelValue":f=>s.questionForm.answers[c].points=f,class:"form-control",id:"answer-points-"+c,placeholder:"Текст ответа"},null,8,Nt),[[h,s.questionForm.answers[c].points]]),e("label",{for:"answer-points-"+c},"Баллы",8,Lt)])]),e("td",null,[e("p",{class:"cursor-pointer",onClick:f=>s.chooseMediaContent(c)},b(i.media_content||"Не указано"),9,Dt)]),e("td",null,b(i.content_type||"Не указано"),1),e("td",null,[e("div",Et,[m(e("input",{class:"form-check-input","onUpdate:modelValue":f=>s.questionForm.answers[c].is_right_answer=f,type:"checkbox",id:"answer-is_right_answer-"+c},null,8,Jt),[[y,s.questionForm.answers[c].is_right_answer]]),e("label",{class:"form-check-label",for:"answer-is_right_answer-"+c}," Правильный ответ ",8,Yt)])]),e("td",null,[e("div",Gt,[Ht,e("ul",Kt,[i.id==null?(l(),n("li",Wt,[e("a",{class:"dropdown-item",onClick:f=>s.removeAnswerFromArray(c),href:"javascript:void(0)"},"Удалить",8,Xt)])):a("",!0),i.deleted_at==null&&i.id!=null?(l(),n("li",Zt,[e("a",{class:"dropdown-item",onClick:f=>s.removeAnswer(i.id),href:"javascript:void(0)"},"Удалить",8,xt)])):a("",!0)])])])],2))),256))])])):(l(),n("p",eo,"На текущий момент нет ни одного созданного ответа"))])]),e("div",so,[e("div",to,[e("button",oo,[s.questionForm.id==null?(l(),n("span",lo,"Сохранить вопрос")):(l(),n("span",io,"Обновить вопрос"))])])])],32),e("div",no,[e("div",ao,[e("div",ro,[s.selectedQuestionIndex!=null?(l(),n("div",uo,[_(q,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[s.questionForm.answers[s.selectedQuestionIndex||0].media_content||""],onSelect:s.selectMediaForAnswer},null,8,["selected","onSelect"])])):a("",!0),co])])])],64)}}}),po={class:"row py-3"},ho={class:"col-12"},bo={class:"row"},fo={class:"col-12 mb-3"},yo={class:"form-label",id:"command-title"},$o=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),go=e("div",null," Название команды ",-1),vo=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),qo={class:"col-12 mb-3"},ko={class:"form-label",id:"event-on_after_appointment"},zo=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Fo=e("div",null," Текст описания команды ",-1),wo=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Co={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Qo=e("div",{class:"col-12 mb-3"},[e("button",{type:"button",class:"btn btn-outline-info rounded-5","data-bs-toggle":"modal","data-bs-target":"#select-players"}," Подобрать участников команды ")],-1),So={key:0,class:"col-12 mb-3"},Vo=e("h4",null,"Пользователи в команде",-1),Uo={class:"list-group list-group-numbered"},Mo={class:"list-group-item d-flex justify-content-between align-items-start"},To={class:"ms-2 me-auto"},jo={class:"fw-bold"},Io={class:"dropdown"},Ao=e("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-ellipsis"})],-1),Po={class:"dropdown-menu"},Ro=["onClick"],Oo={class:"row"},Bo={class:"col-12"},No={type:"submit",class:"btn btn-outline-success w-100 p-3"},Lo={key:0},Do={key:1},Eo={class:"modal fade",id:"select-players",tabindex:"-1","aria-labelledby":"select-players-label","aria-hidden":"true"},Jo={class:"modal-dialog modal-fullscreen"},Yo={class:"modal-content"},Go=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"select-players-label"},"Подбор участников команды"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ho={class:"modal-body"},Ko=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Wo={props:["quizId","bot","command"],data(){return{step:0,load:!1,commandForm:{id:null,title:null,description:null,players:[]}}},watch:{commandForm:{handler(o){this.need_reset=!0},deep:!0}},mounted(){this.command&&this.$nextTick(()=>{this.commandForm={id:this.command.id||null,title:this.command.title||null,description:this.command.description||null,players:this.command.players||[]}})},methods:{removePlayerFromCommand(o){},selectBotUser(o){if(this.commandForm.players.findIndex(t=>t.id==o.id)>=0){this.$notify("Такой пользователь уже есть в списке");return}this.$notify("Пользователь успешно добавлен"),this.commandForm.players.push(o)},clearCommandForm(){this.commandForm={id:null,title:null,description:null,players:[]}},submitForm(){let o=new FormData;Object.keys(this.commandForm).forEach(s=>{const t=this.commandForm[s]||"";typeof t=="object"?o.append(s,JSON.stringify(t)):o.append(s,t)}),o.append("bot_id",this.bot.id),o.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizCommand",{quizCommandForm:o}).then(s=>{this.$emit("callback",s.data),this.$notify("Команда успешно создана"),this.clearCommandForm()}).catch(s=>{this.$notify("Ошибка создания команды")})}}},Xo=Object.assign(Wo,{__name:"QuizCommandForm",setup(o){return(s,t)=>{const d=k("Popper");return l(),n($,null,[e("div",po,[e("div",ho,[e("button",{onClick:t[0]||(t[0]=(...i)=>s.clearCommandForm&&s.clearCommandForm(...i)),class:"btn btn-primary"},"Новая команда")])]),e("form",{onSubmit:t[3]||(t[3]=z((...i)=>s.submitForm&&s.submitForm(...i),["prevent"]))},[e("div",bo,[e("div",fo,[e("label",yo,[_(d,null,{content:r(()=>[go]),default:r(()=>[$o]),_:1}),u(" Название команды "),vo]),m(e("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":t[1]||(t[1]=i=>s.commandForm.title=i),"aria-describedby":"command-title",required:""},null,512),[[h,s.commandForm.title]])]),e("div",qo,[e("label",ko,[_(d,null,{content:r(()=>[Fo]),default:r(()=>[zo]),_:1}),u(" Описание команды "),wo,s.commandForm.description?(l(),n("small",Co," Длина текста "+b(s.commandForm.description.length)+"/255",1)):a("",!0)]),m(e("textarea",{type:"text",class:"form-control",placeholder:"Текст описания","aria-label":"Текст описания","onUpdate:modelValue":t[2]||(t[2]=i=>s.commandForm.description=i),maxlength:"255","aria-describedby":"command-text",required:""},`
                    `,512),[[h,s.commandForm.description]])]),Qo,s.commandForm.players.length>0?(l(),n("div",So,[Vo,e("ol",Uo,[(l(!0),n($,null,v(s.commandForm.players,i=>(l(),n("li",Mo,[e("div",To,[e("div",jo,"#"+b(i.id),1),u(" "+b(i.fio_from_telegram||i.telegram_chat_id),1)]),e("div",Io,[Ao,e("ul",Po,[e("li",null,[e("a",{class:"dropdown-item",onClick:c=>s.removePlayerFromCommand(i.id),href:"javascript:void(0)"},"Удалить",8,Ro)])])])]))),256))])])):a("",!0)]),e("div",Oo,[e("div",Bo,[e("button",No,[s.commandForm.id==null?(l(),n("span",Lo,"Сохранить команду")):(l(),n("span",Do,"Обновить команду"))])])])],32),e("div",Eo,[e("div",Jo,[e("div",Yo,[Go,e("div",Ho,[_(w,{simple:!0,onSelect:s.selectBotUser},null,8,["onSelect"])]),Ko])])])],64)}}}),Zo={key:0,class:"py-2"},xo={class:"row"},el={class:"col-12"},sl={key:1,class:"py-2"},tl={class:"row"},ol={class:"col-12"},ll={key:2,class:"py-2"},il={class:"row"},nl={class:"col-12"},al={class:"nav nav-tabs justify-content-center"},dl={key:0,class:"row py-3"},rl={class:"col-12"},ul={key:1,class:"row py-3"},cl={class:"col-12"},ml={class:"col-12 py-3"},_l=e("h4",null,"Доступные вопросы",-1),pl={key:2,class:"row"},hl={class:"col-12"},bl={class:"col-12 py-3"},fl=e("h4",null,"Команды участники квиза",-1),yl={key:3,class:"row"},$l={class:"col-12 py-3"},gl=e("h4",null,"Статистика",-1),vl={key:4,class:"row"},ql=e("div",{class:"col-12"},null,-1),kl=e("div",{class:"col-12 py-3"},[e("h4",null,"Отзывы к событию")],-1),zl=[ql,kl],Fl={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadQuizCommand:!1,loadQuizQuestion:!1,loadQuizQuestionTable:!1,loadQuizCommandTable:!1,loadQuizResult:!1,loadForm:!1,selectedQuiz:null,selectedQuizQuestion:null,selectedQuizCommand:null,selectedQuizResult:null}},mounted(){},methods:{callbackCommandForm(){this.loadQuizCommandTable=!0,this.$nextTick(()=>{this.loadQuizCommandTable=!1})},callbackQuestionForm(){this.loadQuizQuestionTable=!0,this.$nextTick(()=>{this.loadQuizQuestionTable=!1})},callbackForm(){this.loadTable=!0,this.$nextTick(()=>{this.loadTable=!1})},createQuiz(){this.part=2},selectQuizResult(o){this.loadQuizResult=!0,this.$nextTick(()=>{this.loadQuizResult=!1,this.selectedQuizResult=o})},selectQuizCommand(o){this.loadQuizCommand=!0,this.$nextTick(()=>{this.loadQuizCommand=!1,this.selectedQuizCommand=o})},selectQuizQuestion(o){this.loadQuizQuestion=!0,this.$nextTick(()=>{this.loadQuizQuestion=!1,this.selectedQuizQuestion=o})},selectQuiz(o){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedQuiz=o,this.part=1,this.tab=0})}}},wl=Object.assign(Fl,{__name:"Quizzes",setup(o){return(s,t)=>(l(),n($,null,[s.part===0?(l(),n("div",Zo,[e("div",xo,[e("div",el,[e("button",{type:"button",onClick:t[0]||(t[0]=(...d)=>s.createQuiz&&s.createQuiz(...d)),class:"btn btn-primary"}," Создать новый квиз ")])]),s.loadTable?a("",!0):(l(),p(S,{key:0,onCreate:s.createQuiz,onSelect:s.selectQuiz,bot:o.bot},null,8,["onCreate","onSelect","bot"]))])):a("",!0),s.part===2?(l(),n("div",sl,[e("div",tl,[e("div",ol,[e("button",{type:"button",onClick:t[1]||(t[1]=d=>s.part=0),class:"btn btn-outline-primary"}," Назад ")])]),s.loadForm?a("",!0):(l(),p(F,{key:0,onCallback:s.callbackForm,bot:o.bot},null,8,["onCallback","bot"]))])):a("",!0),s.part===1?(l(),n("div",ll,[e("div",il,[e("div",nl,[e("button",{type:"button",onClick:t[2]||(t[2]=d=>s.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e("ul",al,[e("li",{class:"nav-item",onClick:t[3]||(t[3]=d=>s.tab=0)},[e("a",{class:g(["nav-link",{active:s.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о квизе",2)]),e("li",{class:"nav-item",onClick:t[4]||(t[4]=d=>s.tab=1)},[e("a",{class:g(["nav-link",{active:s.tab===1}]),href:"javascript:void(0)"},"Вопросы квиза",2)]),e("li",{class:"nav-item",onClick:t[5]||(t[5]=d=>s.tab=2)},[e("a",{class:g(["nav-link",{active:s.tab===2}]),href:"javascript:void(0)"},"Команды на квизе",2)]),e("li",{class:"nav-item",onClick:t[6]||(t[6]=d=>s.tab=3)},[e("a",{class:g(["nav-link",{active:s.tab===3}]),href:"javascript:void(0)"},"Командная статистика",2)])]),s.tab===0?(l(),n("div",dl,[e("div",rl,[s.loadForm?a("",!0):(l(),p(F,{key:0,onCallback:s.callbackForm,quiz:s.selectedQuiz,bot:o.bot},null,8,["onCallback","quiz","bot"]))])])):a("",!0),s.tab===1?(l(),n("div",ul,[e("div",cl,[s.loadQuizQuestion?a("",!0):(l(),p(_o,{key:0,question:s.selectedQuizQuestion,"quiz-id":s.selectedQuiz.id,onCallback:s.callbackQuestionForm,bot:o.bot},null,8,["question","quiz-id","onCallback","bot"]))]),e("div",ml,[_l,s.loadQuizQuestionTable?a("",!0):(l(),p(V,{key:0,"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizQuestion,bot:o.bot},null,8,["quiz-id","onSelect","bot"]))])])):a("",!0),s.tab===2?(l(),n("div",pl,[e("div",hl,[s.loadQuizCommand?a("",!0):(l(),p(Xo,{key:0,command:s.selectedQuizCommand,"quiz-id":s.selectedQuiz.id,onCallback:s.callbackCommandForm,bot:o.bot},null,8,["command","quiz-id","onCallback","bot"]))]),e("div",bl,[fl,s.loadQuizCommandTable?a("",!0):(l(),p(U,{key:0,"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizCommand,bot:o.bot},null,8,["quiz-id","onSelect","bot"]))])])):a("",!0),s.tab===3?(l(),n("div",yl,[e("div",$l,[gl,_(M,{"quiz-id":s.selectedQuiz.id,onSelect:s.selectQuizResult,bot:o.bot},null,8,["quiz-id","onSelect","bot"])])])):a("",!0),s.tab===4?(l(),n("div",vl,zl)):a("",!0)])):a("",!0)],64))}}),Cl={class:"d-flex custom-dropdown justify-content-between align-items-center"},Ql={class:"btn-group"},Sl=e("i",{class:"fa-solid fa-info mr-2"},null,-1),Vl=e("i",{class:"fa-solid fa-file mr-2"},null,-1),Ul={key:0,class:"dropdown"},Ml=e("button",{type:"button",class:"btn btn-primary dropdown-toggle text-primary p-2",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-screwdriver-wrench mr-2"})],-1),Tl={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},jl=e("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1),Il=e("i",{class:"fa-solid fa-q mr-2"},null,-1),Al=e("i",{class:"fa-solid fa-code mr-2"},null,-1),Pl=e("i",{class:"fa-solid fa-keyboard mr-2"},null,-1),Rl=e("i",{class:"fa-solid fa-scroll mr-2"},null,-1),Ol=e("i",{class:"fa-solid fa-comment-dots mr-2"},null,-1),Bl=e("i",{class:"fa-solid fa-users mr-2"},null,-1),Nl=e("i",{class:"fa-regular fa-newspaper mr-2"},null,-1),Ll=e("i",{class:"fa-solid fa-list-check mr-2"},null,-1),Dl=e("i",{class:"fa-solid fa-list-check mr-2"},null,-1),El=e("i",{class:"fa-brands fa-shopify mr-2"},null,-1),Jl=e("i",{class:"fa-brands fa-shopify mr-2"},null,-1),Yl={key:0,class:"pb-5 mb-5"},Gl={key:1,class:"pb-5 mb-5"},Hl={key:2,class:"pb-5 mb-5"},Kl={key:3,class:"pb-5 mb-5"},Wl={key:4,class:"pb-5 mb-5"},Xl={key:5,class:"pb-5 pt-2 mb-5"},Zl={key:6,class:"pb-5 mb-5"},xl={key:7,class:"pb-5 mb-5 pt-2"},ei={key:8,class:"pb-5 mb-5"},si={key:9,class:"pb-5 mb-5 pt-2"},ti={key:10,class:"pb-5 mb-5 pt-2"},oi={key:11,class:"pb-5 mb-5 pt-2"},li={key:12,class:"row pb-5 mb-5"},ii={key:0,class:"col-12 col-md-12"},ni={key:13,class:"pb-5 mb-5"},ai={props:["bot"],data(){return{page:null,step:0,load:!1,loadPage:!1}},mounted(){this.setStep(localStorage.getItem("cashman_set_botform_step_index")||0)},methods:{hasRole(o){return window.hasRole(o)||!1},setStep(o){this.step=parseInt(o),localStorage.setItem("cashman_set_botform_step_index",o)},pageListCallback(o){this.loadPage=!0,this.page=o,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(o){this.page=o,this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})},loadCurrentCompany(o=null){this.$store.dispatch("updateCurrentCompany",{company:o}).then(()=>{this.company=this.getCurrentCompany})},companyListCallback(o){this.load=!0,this.loadCurrentCompany(o),this.$nextTick(()=>{this.load=!1})}}},mi=Object.assign(ai,{__name:"BotSection",setup(o){return(s,t)=>(l(),n($,null,[e("div",Cl,[e("div",Ql,[e("button",{type:"button",class:g(["btn btn-primary text-primary",{"bg-primary text-white":s.step==0}]),onClick:t[0]||(t[0]=d=>s.setStep(0))},[Sl,u("Информация о боте")],2),e("button",{type:"button",class:g(["btn btn-primary text-primary",{"bg-primary text-white":s.step==4}]),onClick:t[1]||(t[1]=d=>s.setStep(4))},[Vl,u("Страницы")],2)]),s.hasRole("admin")?(l(),n("div",Ul,[Ml,e("ul",Tl,[e("li",null,[e("a",{class:"dropdown-item",href:"#bot-appointments",onClick:t[2]||(t[2]=d=>s.setStep(13))},[jl,u("Запись на событие (прием)")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-quizzes",onClick:t[3]||(t[3]=d=>s.setStep(14))},[Il,u("Квизы")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-custom-fields",onClick:t[4]||(t[4]=d=>s.setStep(10))},[Al,u("Настраиваемые поля")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-menu-template",onClick:t[5]||(t[5]=d=>s.setStep(1))},[Pl,u("Все клавиатуры в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-slugs",onClick:t[6]||(t[6]=d=>s.setStep(2))},[Rl,u("Все скрипты в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-dialogs",onClick:t[7]||(t[7]=d=>s.setStep(6))},[Ol,u("Все диалоги в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-users",onClick:t[8]||(t[8]=d=>s.setStep(3))},[Bl,u("Все пользователи в боте")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-news",onClick:t[9]||(t[9]=d=>s.setStep(9))},[Nl,u(" Новостной канал")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-amo",onClick:t[10]||(t[10]=d=>s.setStep(7))},[Ll,u(" AMO CRM")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-y-clients",onClick:t[11]||(t[11]=d=>s.setStep(12))},[Dl,u(" YClients")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-shop",onClick:t[12]||(t[12]=d=>s.setStep(8))},[El,u(" Магазин")])]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-media",onClick:t[13]||(t[13]=d=>s.setStep(11))},[Jl,u(" Медиа файлы бота")])])])])):a("",!0)]),s.step===14?(l(),n("div",Yl,[s.load?a("",!0):(l(),p(wl,{key:0,bot:o.bot},null,8,["bot"]))])):a("",!0),s.step===13?(l(),n("div",Gl,[s.load?a("",!0):(l(),p(T,{key:0,bot:o.bot},null,8,["bot"]))])):a("",!0),s.step===0?(l(),n("div",Hl,[s.load?a("",!0):(l(),p(j,{key:0,bot:o.bot},null,8,["bot"]))])):a("",!0),s.step===7?(l(),n("div",Kl,[s.load?a("",!0):(l(),p(I,{key:0,data:o.bot.amo},null,8,["data"]))])):a("",!0),s.step===12?(l(),n("div",Wl,[s.load?a("",!0):(l(),p(A,{key:0,data:o.bot.y_clients},null,8,["data"]))])):a("",!0),s.step===11?(l(),n("div",Xl,[s.load?a("",!0):(l(),p(P,{key:0}))])):a("",!0),s.step===8?(l(),n("div",Zl,[s.load?a("",!0):(l(),p(R,{key:0}))])):a("",!0),s.step===10?(l(),n("div",xl,[s.load?a("",!0):(l(),p(O,{key:0}))])):a("",!0),s.step===1?(l(),n("div",ei,[s.load?a("",!0):(l(),p(C,{key:0,"select-mode":!1}))])):a("",!0),s.step===6?(l(),n("div",si,[s.load?a("",!0):(l(),p(B,{key:0}))])):a("",!0),s.step===2?(l(),n("div",ti,[s.load?a("",!0):(l(),p(N,{key:0}))])):a("",!0),s.step===3?(l(),n("div",oi,[s.load?a("",!0):(l(),p(w,{key:0}))])):a("",!0),s.step===4?(l(),n("div",li,[s.load?a("",!0):(l(),n("div",ii,[s.loadPage?a("",!0):(l(),p(L,{key:0,page:s.page,onCallback:s.pageCallback},null,8,["page","onCallback"]))]))])):a("",!0),s.step===9?(l(),n("div",ni,[_(Q)])):a("",!0)],64))}});export{mi as _};
