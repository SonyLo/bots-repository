import{q as r,t as d,v as n,F as E,C as oe,y as C,D as T,A as c,P as De,H as $,X as Lt,x as I,K as me,G as Le,J as X,Q as Oe,B as le,a7 as Pe,Y as Vt,L as On,O as q,a3 as At,M as Fs,j as Mn,o as ue,k as et,a8 as en,a9 as En,a4 as it,n as Wt,g as J,a5 as ja,w as Ht,aa as ct,N as ye,ab as Ze,ac as ut,u as k,ad as at,a1 as eo,ae as _n,af as Ts,f as Ds,ag as to,z as vt,ah as Fn,ai as Ps,aj as Ss,ak as Os,al as Ms,am as As}from"./index.es-a464651f.js";import{_ as jo,a as js,b as rn}from"./GlobalSlugList-06ad1c39.js";import{P as lt}from"./Pagination-ab88b7a7.js";import{_ as Us}from"./CompanyList-8ff261a2.js";import{T as qn}from"./TelegramChannelHelper-68ec4b8e.js";import{B as Ln,_ as no}from"./Mail-0b2e5b02.js";import{_ as tn}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */const Vs={props:["param"],data(){return{expressions:[{expression:"{{userName}}",description:"Имя пользователя"},{expression:"{{telegramChatId}}",description:"Идентификатор чата"},{expression:"{{referralLink}}",description:"Реферальная ссылка"},{expression:"{{referralQr}}",description:"Реферальный QR-код"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},Ys={class:"dropdown"},Rs=n("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-brands fa-hire-a-helper"})],-1),xs={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Bs=["onClick"];function Is(t,e,a,o,s,l){return r(),d("div",Ys,[Rs,n("div",xs,[n("li",null,[(r(!0),d(E,null,oe(s.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},C(i.description||"-"),9,Bs))),256))])])])}const Ns=tn(Vs,[["render",Is]]);const Es={class:"card-header d-flex justify-content-between"},qs={class:"dropdown"},Ls=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),Ws={class:"dropdown-menu"},Hs=n("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),zs=n("hr",null,null,-1),Qs=["data-bs-target"],Xs=n("i",{class:"fa-regular fa-pen-to-square mr-1"},null,-1),Ks=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),Zs=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Gs={key:0,class:"fa-solid fa-arrow-up-short-wide"},Js={key:1,class:"fa-solid fa-arrow-down-short-wide"},el={class:"card-body"},tl={class:"row"},nl={class:"col-12"},al={key:0},ol={key:1,class:"list-group list-group-numbered"},sl={class:"list-group-item d-flex justify-content-between align-items-start"},ll={class:"ms-2 me-auto"},il=n("div",{class:"fw-bold"},"Идентификатор",-1),rl={class:"list-group-item d-flex justify-content-between align-items-start"},dl={class:"ms-2 me-auto"},ul=n("div",{class:"fw-bold"},"Команда",-1),cl={class:"list-group-item d-flex justify-content-between align-items-start"},ml={class:"ms-2 me-auto"},hl=n("div",{class:"fw-bold"},"Мнемоническое имя",-1),pl={class:"list-group-item d-flex justify-content-between align-items-start"},_l={class:"ms-2 me-auto"},vl=n("div",{class:"fw-bold"},"Пояснение",-1),fl={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},bl={class:"ms-2 me-auto"},gl=n("div",{class:"fw-bold"},"Набор параметров скрипта",-1),yl={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},kl=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Привязана страница")],-1),$l=[kl],wl={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},Cl=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Глобальный скрипт")],-1),Fl=[Cl],Tl={class:"list-group-item d-flex justify-content-between align-items-start"},Dl={class:"ms-2 me-auto w-100"},Pl=n("div",{class:"fw-bold"},"Перенести данные из:",-1),Sl=n("option",{value:null},"Не выбрано",-1),Ol=["value"],Ml=n("p",{class:"my-2"},[n("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),Al=["disabled"],jl=["id"],Ul={class:"modal-dialog modal-fullscreen"},Vl={class:"modal-content"},Yl={class:"modal-header"},Rl={class:"modal-title",id:"exampleModalLabel"},xl=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Bl={class:"modal-body"},Il=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Nl={props:["item","bot","selectMode"],data(){return{selected_slug_id:null,slugs:[],load:!1,simple:!0}},watch:{simple:function(){this.simple||this.loadAllSlugs()}},mounted(){},methods:{selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.selected_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},loadAllSlugs(){this.$store.dispatch("loadAllSlugs",{botId:this.bot.id}).then(t=>{this.slugs=t.data})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},El=Object.assign(Nl,{__name:"Slug",setup(t){return(e,a)=>(r(),d(E,null,[n("div",{class:I(["card",{"deprecated-slug":t.item.deprecated_at!=null,"global-slug":t.item.is_global}])},[n("div",Es,[n("div",qs,[Ls,n("ul",Ws,[n("li",null,[n("a",{onClick:a[0]||(a[0]=(...o)=>e.selectSlug&&e.selectSlug(...o)),title:"Выбрать команду",class:"dropdown-item cursor-pointer"},[Hs,T(" Выбрать команду ")])]),zs,n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:a[1]||(a[1]=(...o)=>e.editSlug&&e.editSlug(...o)),"data-bs-toggle":"modal","data-bs-target":"#edit-slug-"+t.item.id},[Xs,T(" Редактировать")],8,Qs)]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:a[2]||(a[2]=(...o)=>e.duplicateSlug&&e.duplicateSlug(...o))},[Ks,T(" Дублировать")])]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:a[3]||(a[3]=(...o)=>e.removeSlug&&e.removeSlug(...o))},[Zs,T(" Удалить")])])])]),n("button",{type:"button",onClick:a[4]||(a[4]=o=>e.simple=!e.simple),class:"btn btn-outline-primary ml-2"},[e.simple?(r(),d("i",Gs)):(r(),d("i",Js))])]),n("div",el,[n("div",tl,[n("div",nl,[e.simple?(r(),d("p",al,C(t.item.command||"Нет команды"),1)):(r(),d("ol",ol,[n("li",sl,[n("div",ll,[il,T(" №"+C(t.item.id||"Нет идентификатора"),1)])]),n("li",rl,[n("div",dl,[ul,T(" "+C(t.item.command||"Нет команды"),1)])]),n("li",cl,[n("div",ml,[hl,T(" "+C(t.item.slug||"Slug"),1)])]),n("li",pl,[n("div",_l,[vl,T(" "+C(t.item.comment||"Пояснение не указано"),1)])]),t.item.config?(r(),d("li",fl,[n("div",bl,[gl,t.item.config?(r(!0),d(E,{key:0},oe(t.item.config,o=>(r(),d("p",null,[n("strong",null,C(o.key||"Ключ не найден")+":",1),T(C(o.value||"Не указано"),1)]))),256)):c("",!0)])])):c("",!0),t.item.page?(r(),d("li",yl,$l)):c("",!0),t.item.is_global?(r(),d("li",wl,Fl)):c("",!0),n("li",Tl,[n("div",Dl,[n("form",{onSubmit:a[6]||(a[6]=De((...o)=>e.submitRelocateData&&e.submitRelocateData(...o),["prevent"]))},[Pl,$(n("select",{class:"form-control w-100","onUpdate:modelValue":a[5]||(a[5]=o=>e.selected_slug_id=o),required:""},[Sl,(r(!0),d(E,null,oe(e.slugs,o=>(r(),d("option",{value:o.id},"#"+C(o.id)+" "+C(o.slug||"Не указан"),9,Ol))),256))],512),[[Lt,e.selected_slug_id]]),Ml,n("button",{disabled:e.selected_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,Al)],32)])])]))])])])],2),n("div",{class:"modal fade",id:"edit-slug-"+t.item.id,tabindex:"-1"},[n("div",Ul,[n("div",Vl,[n("div",Yl,[n("h5",Rl,[T("Редактирование команды #"),n("span",null,C(t.item.id),1)]),xl]),n("div",Bl,[e.load?c("",!0):(r(),me(jo,{key:0,item:t.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"]))]),Il])])],8,jl)],64))}}),ql={key:0,class:"row"},Ll={class:"col-12 mb-2"},Wl={key:0},Hl=n("i",{class:"fa-solid fa-scroll"},null,-1),zl={key:1},Ql=n("i",{class:"fa-regular fa-square-minus"},null,-1),Xl={key:0,class:"col-12"},Kl={class:"col-12"},Zl={class:"form-floating mb-3"},Gl=n("label",{for:"floatingInput"},"Быстрый поиск команды",-1),Jl={class:"col-12 mb-2"},ei={class:"form-check"},ti={class:"form-check-label",for:"need_global"},ni={key:0},ai={key:1},oi={class:"form-check"},si=n("label",{class:"form-check-label",for:"need_show_deleted"}," Удаленные ",-1),li={key:1,class:"mb-3 col-12 col-sm-12"},ii={class:"table"},ri=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Команда"),n("th",{scope:"col"},"Пояснение"),n("th",{scope:"col"},"Глобальный"),n("th",{scope:"col"},"Действия")])],-1),di=["onClick"],ui={key:0},ci=n("i",{class:"fa-solid fa-check text-success"},null,-1),mi=[ci],hi={key:1},pi=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),_i=[pi],vi={class:"dropdown"},fi=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),bi={class:"dropdown-menu"},gi={key:0},yi=["onClick"],ki=n("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),$i={key:1},wi=["onClick"],Ci=n("a",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#edit-table-slug"},[n("i",{class:"fa-regular fa-pen-to-square mr-1"}),T(" Редактировать")],-1),Fi=[Ci],Ti=["onClick"],Di=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),Pi=["href"],Si=n("i",{class:"fa-regular fa-file-excel mr-1"},null,-1),Oi={key:2},Mi=["onClick"],Ai=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),ji={key:3},Ui=["onClick"],Vi=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Yi={key:3,class:"mb-3 col-md-12"},Ri=n("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),xi=[Ri],Bi={class:"modal fade",id:"edit-table-slug",tabindex:"-1"},Ii={class:"modal-dialog modal-fullscreen"},Ni={key:0,class:"modal-content"},Ei={class:"modal-header"},qi={class:"modal-title",id:"exampleModalLabel"},Li=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Wi={class:"modal-body"},Hi={class:"row"},zi={class:"col-8"},Qi={class:"col-4"},Xi={class:"list-group list-group-numbered"},Ki={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},Zi={class:"ms-2 me-auto"},Gi=n("div",{class:"fw-bold"},"Набор параметров скрипта",-1),Ji={key:1},er={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},tr=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Привязана страница")],-1),nr=[tr],ar={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},or=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Является глобальным скриптом")],-1),sr=[or],lr={class:"list-group-item d-flex justify-content-between align-items-start"},ir={class:"ms-2 me-auto w-100"},rr=n("div",{class:"fw-bold"},"Перенести данные из:",-1),dr=n("option",{value:null},"Не выбрано",-1),ur=["value"],cr=n("p",{class:"my-2"},[n("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),mr=["disabled"],hr=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),pr={props:["command","canSelect"],data(){return{bot:null,relocated_slug_id:null,need_global:!0,need_show_deleted:!0,show:!1,load:!1,slugs:[],paginate:[],selectedSlug:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{ownSearch:function(t,e){this.loadSlugs()},need_global:function(t,e){this.loadSlugs()},need_show_deleted:function(t,e){this.loadSlugs()}},computed:{...Le(["getCurrentBot","getSlugs","getSlugsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})})},methods:{nextSlugs(t){this.loadSlugs(t)},loadSlugs(t=0){return this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,needGlobal:this.need_global,needDeleted:this.need_show_deleted,search:this.ownSearch},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},callbackSlugs(){this.loadSlugs()},selectSlug(t){this.load=!0,this.$nextTick(()=>{this.selectedSlug=t,this.load=!1}),this.$emit("select",t)},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0;const t=this.selectedSlug;this.loadSlugs().then(()=>{let e=this.slugs.find(a=>a.id===t.id);this.selectSlug(e||null)}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},duplicateSlug(t){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.loadSlugs(),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.relocated_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},restoreSlug(t){this.load=!0,this.$store.dispatch("restoreSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно восстановлена",type:"success"}),this.loadSlugs(),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})},removeSlug(t){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.loadSlugs()}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},lU=Object.assign(pr,{__name:"BotSlugTableList",setup(t){return(e,a)=>(r(),d(E,null,[e.bot?(r(),d("div",ql,[n("div",Ll,[n("button",{type:"button",onClick:a[0]||(a[0]=o=>e.show=!e.show),class:"btn btn-outline-success p-3 w-100"},[e.show?(r(),d("span",zl,[Ql,T(" Свернуть форму добавления")])):(r(),d("span",Wl,[Hl,T(" Добавить глобальный скрипт")]))])]),e.show?(r(),d("div",Xl,[e.bot?(r(),me(js,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),n("div",Kl,[n("div",Zl,[$(n("input",{type:"search","onUpdate:modelValue":a[1]||(a[1]=o=>e.ownSearch=o),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[X,e.ownSearch]]),Gl])]),n("div",Jl,[n("div",ei,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[2]||(a[2]=o=>e.need_global=o),type:"checkbox",id:"need_global"},null,512),[[Oe,e.need_global]]),n("label",ti,[e.need_global?(r(),d("span",ni,"Глобальные")):(r(),d("span",ai,"Локальные"))])]),n("div",oi,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[3]||(a[3]=o=>e.need_show_deleted=o),type:"checkbox",id:"need_show_deleted"},null,512),[[Oe,e.need_show_deleted]]),si])]),e.slugs&&e.bot?(r(),d("div",li,[n("table",ii,[ri,n("tbody",null,[(r(!0),d(E,null,oe(e.slugs,(o,s)=>(r(),d("tr",{class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",{scope:"row",class:I({"text-danger":o.deleted_at!=null})},C(o.id||"Нет идентификатора"),3),n("td",{onClick:l=>e.selectSlug(o),"data-bs-toggle":"modal","data-bs-target":"#edit-table-slug",class:I({"text-danger":o.deleted_at!=null})},C(o.command||"Нет команды"),11,di),n("td",{class:I({"text-danger":o.deleted_at!=null})},C(o.comment||"Пояснение не указано"),3),n("td",null,[o.is_global?(r(),d("span",ui,mi)):(r(),d("span",hi,_i))]),n("td",null,[n("div",vi,[fi,n("ul",bi,[t.canSelect?(r(),d("li",gi,[n("a",{onClick:l=>e.selectSlug(o),title:"Выбрать команду",class:"dropdown-item cursor-pointer"},[ki,T(" Выбрать команду ")],8,yi)])):c("",!0),t.canSelect?(r(),d("hr",$i)):c("",!0),n("li",{onClick:l=>e.selectSlug(o)},Fi,8,wi),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.duplicateSlug(o)},[Di,T(" Дублировать")],8,Ti)]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",target:"_blank",href:"/admin/slugs/action-data-export/"+o.id},[Si,T(" Скачать данные участников")],8,Pi)]),o.deleted_at==null?(r(),d("li",Oi,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.removeSlug(o)},[Ai,T(" Удалить")],8,Mi)])):c("",!0),o.deleted_at!=null?(r(),d("li",ji,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.restoreSlug(o)},[Vi,T(" Восстановить")],8,Ui)])):c("",!0)])])])],2))),256))])])])):c("",!0),e.paginate?(r(),me(lt,{key:2,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0),e.slugs.length===0?(r(),d("div",Yi,xi)):c("",!0)])):c("",!0),n("div",Bi,[n("div",Ii,[e.selectedSlug&&!e.load?(r(),d("div",Ni,[n("div",Ei,[n("h5",qi,[T("Редактирование команды #"),n("span",null,C(e.selectedSlug.id),1)]),Li]),n("div",Wi,[n("div",Hi,[n("div",zi,[le(jo,{item:e.selectedSlug,onCallback:e.slugFormCallback},null,8,["item","onCallback"])]),n("div",Qi,[n("ol",Xi,[e.selectedSlug.config?(r(),d("li",Ki,[n("div",Zi,[Gi,(e.selectedSlug.config||[]).length>0?(r(!0),d(E,{key:0},oe(e.selectedSlug.config,o=>(r(),d("p",null,[n("strong",null,C(o.key||"Ключ не найден")+":",1),T(C(o.value||"Не указано"),1)]))),256)):(r(),d("p",Ji,"Отсутствует"))])])):c("",!0),e.selectedSlug.page?(r(),d("li",er,nr)):c("",!0),e.selectedSlug.is_global?(r(),d("li",ar,sr)):c("",!0),n("li",lr,[n("div",ir,[n("form",{onSubmit:a[5]||(a[5]=De((...o)=>e.submitRelocateData&&e.submitRelocateData(...o),["prevent"]))},[rr,$(n("select",{class:"form-control w-100","onUpdate:modelValue":a[4]||(a[4]=o=>e.relocated_slug_id=o),required:""},[dr,(r(!0),d(E,null,oe(e.slugs,o=>(r(),d("option",{value:o.id},"#"+C(o.id)+" "+C(o.slug||"Не указан"),9,ur))),256))],512),[[Lt,e.relocated_slug_id]]),cr,n("button",{disabled:e.relocated_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,mr)],32)])])])])])]),hr])):c("",!0)])])],64))}}),_r={class:"row mt-2"},vr={class:"input-group mb-3"},fr={key:0,class:"row"},br={class:"col-12 col-md-12 mb-3"},gr={class:"table"},yr=n("th",{scope:"col"},"#",-1),kr=n("th",{scope:"col"},"Ф.И.О. из телеграмма",-1),$r=n("th",{scope:"col"},"Имя пользователя",-1),wr=n("th",{scope:"col"},"Домен",-1),Cr=n("th",{scope:"col"},"Телефон",-1),Fr=n("th",{scope:"col"},"TG id",-1),Tr={key:0,scope:"col"},Dr={key:1,scope:"col"},Pr={key:2,scope:"col"},Sr={key:3,scope:"col"},Or={key:4,scope:"col"},Mr=["onClick"],Ar={scope:"row"},jr=["href"],Ur={key:1},Vr={key:0},Yr=["onClick"],Rr=n("i",{class:"fa-solid fa-check text-success"},null,-1),xr=[Rr],Br=["onClick"],Ir=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Nr=[Ir],Er={key:1},qr=["onClick"],Lr=n("i",{class:"fa-solid fa-check text-success"},null,-1),Wr=[Lr],Hr=["onClick"],zr=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Qr=[zr],Xr={key:2},Kr=["onClick"],Zr=n("i",{class:"fa-solid fa-check text-success"},null,-1),Gr=[Zr],Jr=["onClick"],ed=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),td=[ed],nd={key:3},ad=["onClick"],od=n("i",{class:"fa-solid fa-check text-success"},null,-1),sd=[od],ld=["onClick"],id=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),rd=[id],dd={key:4},ud=["onClick"],cd=n("i",{class:"fa-solid fa-check text-success"},null,-1),md=[cd],hd=["onClick"],pd=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),_d=[pd],vd={class:"col-12"},fd={key:1,class:"row"},bd=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет пользователей ")],-1),gd=[bd],yd={props:["simple"],data(){return{bot:null,loading:!0,bot_users:[],search:null,bot_users_paginate_object:null}},computed:{...Le(["getBotUsers","getBotUsersPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadUsers()})},methods:{selectUser(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},changeUserStatus(t,e,a="is_admin"){this.bot_users[t][a]=e===1,this.$store.dispatch("changeUserStatus",{dataObject:{bot_user_id:this.bot_users[t].id,status:e,type:a}}).then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус пользователя успешно изменен! Пользователь оповещен об изменении статуса!",type:"success"})}).catch(()=>{this.$notify({title:"Конструктор ботов",text:"Ошибка изменения статуса",type:"error"})})},nextUsers(t){this.loadUsers(t)},loadUsers(t=0){this.loading=!0,this.$store.dispatch("loadBotUsers",{dataObject:{botId:this.bot.id||null,search:this.search},size:100,page:t}).then(e=>{this.loading=!1,this.bot_users=this.getBotUsers,this.bot_users_paginate_object=this.getBotUsersPaginateObject}).catch(()=>{this.loading=!1})}}},Uo=Object.assign(yd,{__name:"BotUserList",setup(t){return(e,a)=>(r(),d(E,null,[n("div",_r,[n("div",vr,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск пользователя","aria-label":"Поиск пользователя",onKeydown:a[0]||(a[0]=Pe(o=>e.loadUsers(0),["enter"])),"onUpdate:modelValue":a[1]||(a[1]=o=>e.search=o)},null,544),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[2]||(a[2]=o=>e.loadUsers(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.bot_users.length>0?(r(),d("div",fr,[n("div",br,[n("table",gr,[n("thead",null,[n("tr",null,[yr,kr,$r,wr,Cr,Fr,t.simple?c("",!0):(r(),d("th",Tr,"Админ")),t.simple?c("",!0):(r(),d("th",Dr,"VIP")),t.simple?c("",!0):(r(),d("th",Pr,"Доставщик")),t.simple?c("",!0):(r(),d("th",Sr,"Менеджер")),t.simple?c("",!0):(r(),d("th",Or,"За работой"))])]),n("tbody",null,[(r(!0),d(E,null,oe(e.bot_users,(o,s)=>(r(),d("tr",{onClick:l=>e.selectUser(o)},[n("th",Ar,C(o.id),1),n("td",null,C(o.fio_from_telegram||"Не указано"),1),n("td",null,C(o.name||"Не указано"),1),n("td",null,[o.username?(r(),d("a",{key:0,href:"https://t.me/"+o.username,target:"_blank"},"@"+C(o.username),9,jr)):(r(),d("span",Ur,"Не указано"))]),n("td",null,C(o.phone||"Не указано"),1),n("td",null,C(o.telegram_chat_id||"Не указано"),1),t.simple?c("",!0):(r(),d("td",Vr,[o.is_admin?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(s,0,"is_admin")},xr,8,Yr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(s,1,"is_admin")},Nr,8,Br))])),t.simple?c("",!0):(r(),d("td",Er,[o.is_vip?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(s,0,"is_vip")},Wr,8,qr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(s,1,"is_vip")},Qr,8,Hr))])),t.simple?c("",!0):(r(),d("td",Xr,[o.is_deliveryman?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(s,0,"is_deliveryman")},Gr,8,Kr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(s,1,"is_deliveryman")},td,8,Jr))])),t.simple?c("",!0):(r(),d("td",nd,[o.is_manager?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(s,0,"is_manager")},sd,8,ad)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(s,1,"is_manager")},rd,8,ld))])),t.simple?c("",!0):(r(),d("td",dd,[o.is_work?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(s,0,"is_work")},md,8,ud)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(s,1,"is_work")},_d,8,hd))]))],8,Mr))),256))])])]),n("div",vd,[e.bot_users_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextUsers,pagination:e.bot_users_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",fd,gd))],64))}});const kd={class:"row"},$d={class:"col-md-12 col-12"},wd={key:0,class:"alert alert-danger"},Cd={class:"form-check mb-3"},Fd=["value"],Td=n("label",{class:"form-check-label",for:"bot-select-company"}," Отобразить список клиентов (выбор клиента для бота) ",-1),Dd={key:0,class:"col-md-12 col-12"},Pd={key:1,class:"col-md-12 col-12"},Sd={class:"card alert alert-success"},Od={class:"col-md-12 col-12"},Md={class:"form-check mb-3"},Ad=["value"],jd=n("label",{class:"form-check-label",for:"bot-is-template"}," Сделать шаблоном ",-1),Ud={key:2,class:"col-md-12 col-12"},Vd={class:"mb-3"},Yd={class:"form-label",id:"bot-template-description"},Rd=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xd=n("div",null,"Если Вы создаете шаблон, а не реального бота ",-1),Bd=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Id={class:"row"},Nd=n("div",{class:"col-12"},[n("p",null,[T("Для создания бота в Телеграм воспользуйтесь "),n("a",{href:"https://telegra.ph/Sozdanie-telegram-bota-06-12",target:"_blank"},"инструкцией")])],-1),Ed={class:"col-md-12 col-12"},qd={class:"mb-3"},Ld={class:"form-label d-flex justify-content-between",id:"bot-token"},Wd=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hd=n("div",null,"Взять из BotFather при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),zd=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Qd=n("a",{href:"https://t.me/botfather",target:"_blank"},"Создать нового бота в ТГ",-1),Xd={key:0,class:"row"},Kd={class:"col-12 mb-3"},Zd=n("h6",null,[T("Аватар для бота "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),Gd={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},Jd={key:0,for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2 bg-primary text-white shadow-md"},eu=n("span",null,"+",-1),tu={class:"mb-2 img-preview",style:{"margin-right":"10px"}},nu={class:"remove"},au=n("i",{class:"fa-regular fa-trash-can"},null,-1),ou=[au],su={key:2,class:"mb-2 img-preview",style:{"margin-right":"10px"}},lu={class:"remove"},iu=n("i",{class:"fa-regular fa-trash-can"},null,-1),ru=[iu],du={key:1,class:"row"},uu={class:"col-12"},cu={class:"nav nav-tabs justify-content-center"},mu={class:"row py-3"},hu={class:"col-md-12 col-12"},pu={class:"mb-3"},_u={class:"form-label",id:"bot-domain"},vu=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),fu=n("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),bu=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),gu={key:0},yu=["href"],ku={class:"col-md-12 col-12"},$u={class:"card"},wu={class:"card-body"},Cu=n("h6",null,"Настройка параметров бота в BotFather",-1),Fu={class:"mb-3"},Tu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-title"},Du={key:0},Pu={key:0,class:"text-secondary"},Su={class:"mb-3"},Ou={class:"form-label d-flex justify-content-between align-items-center",id:"bot-short-description"},Mu={key:0,class:"text-secondary"},Au={class:"mb-3"},ju={class:"form-label d-flex justify-content-between align-items-center",id:"bot-long-description"},Uu={key:0,class:"text-secondary"},Vu={class:"col-5"},Yu={class:"mb-3"},Ru=["onUpdate:modelValue","aria-describedby"],xu={class:"col-5"},Bu={class:"mb-3"},Iu=["onUpdate:modelValue","aria-describedby"],Nu={class:"col-2"},Eu=["onClick"],qu=n("i",{class:"fa-regular fa-trash-can"},null,-1),Lu=[qu],Wu={class:"row"},Hu={class:"col-12"},zu={class:"col-md-12 col-12"},Qu={class:"mb-3"},Xu=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ku=n("div",null,"Ссылка на внешний сервис обработки данных ",-1),Zu=n("label",{class:"form-label",id:"callback_link"},"Ссылка на внешний сервис обработки данных ",-1),Gu={class:"row py-3"},Ju={class:"col-md-6 col-12"},ec={class:"mb-3"},tc={class:"form-label",id:"bot-balance"},nc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ac=n("div",null,"Начальная сумма денег на счету у конкретного бота",-1),oc=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),sc={class:"col-md-6 col-12"},lc={class:"mb-3"},ic={class:"form-label",id:"bot-tax-per-day"},rc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dc=n("div",null,"Сумма списания денег за сутки работы бота (тариф)",-1),uc=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),cc={class:"col-md-6 col-12"},mc={class:"mb-3"},hc=n("label",{class:"form-label",id:"bot-level-1"},[T(" Уровень 1 CashBack, % "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),pc={class:"col-md-6 col-12"},_c={class:"mb-3"},vc=n("label",{class:"form-label",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),fc={class:"col-md-6 col-12"},bc={class:"mb-3"},gc=n("label",{class:"form-label",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),yc={class:"col-md-12 col-12"},kc={class:"mb-3"},$c=n("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),wc=["value"],Cc={key:0,class:"mb-3"},Fc=n("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),Tc={class:"mb-2"},Dc={class:"form-check"},Pc=n("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),Sc={class:"col-12 mb-2"},Oc={class:"form-check"},Mc=n("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),Ac={key:0,class:"col-md-12 col-12"},jc={class:"form-check mb-3"},Uc=["value"],Vc=n("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),Yc={class:"mb-3"},Rc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xc=n("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),Bc=n("label",{class:"form-label",id:"payment_provider_token"},[T("Токен платежной системы "),n("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить")],-1),Ic={class:"col-12 mb-2"},Nc={class:"form-check"},Ec=n("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),qc={key:1,class:"col-md-12 col-12"},Lc={class:"mb-3"},Wc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hc=n("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),zc=n("label",{class:"form-label",id:"bot-vk_shop_link"},[T("Ссылка на группу ВК с товарами "),n("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),Qc={key:2,class:"mb-2"},Xc=n("h6",null,"Настройка категорий CashBack-а",-1),Kc={class:"d-flex justify-content-between align-items-center w-100"},Zc=n("small",null,"Название категории",-1),Gc=["onClick"],Jc=n("i",{class:"fa-regular fa-trash-can"},null,-1),em=[Jc],tm=["onUpdate:modelValue","aria-describedby"],nm=n("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),am={class:"row py-3"},om={class:"col-md-6 col-12"},sm={class:"mb-3"},lm={class:"d-flex justify-content-between align-items-center"},im={class:"form-label d-flex justify-content-between",id:"bot-order-channel"},rm=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dm=n("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),um=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),cm={class:"col-md-6 col-12"},mm={class:"mb-3"},hm={class:"d-flex justify-content-between"},pm=n("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов (id,рекламный)",-1),_m={key:0,class:"col-12 mb-2"},vm={class:"form-check"},fm=n("label",{class:"form-check-label",for:"need-payments"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),bm={key:1,class:"col-12 mb-2"},gm={class:"d-flex justify-content-between align-items-center mb-2"},ym=n("p",null,'Для того, чтоб узнать идентификатор топика в группе впишите в чат "Мой id"',-1),km=n("i",{class:"fa-solid fa-paperclip mr-2"},null,-1),$m={class:"list-group"},wm={class:"list-group-item"},Cm={class:"mb-0"},Fm=["onUpdate:modelValue"],Tm={class:"col-md-12 col-12 mb-2"},Dm={class:"card border-warning"},Pm={class:"card-body"},Sm={class:"form-group"},Om=n("label",{class:"form-check-label",for:"warning-rules"},[n("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),T(" Правила критических оповещений ")],-1),Mm=n("option",{value:null},"Не выбрано",-1),Am=["value"],jm={class:"card my-2 p-2"},Um={class:"row"},Vm={class:"col-md-4 d-flex align-items-center"},Ym={class:"m-0"},Rm={class:"col-md-2"},xm={class:"form-check"},Bm=["onUpdate:modelValue","id"],Im=["for"],Nm={key:0},Em={key:1},qm={class:"col-md-5"},Lm=["onUpdate:modelValue"],Wm={class:"col-md-1 d-flex justify-content-center"},Hm=["onClick"],zm=n("i",{class:"fa-solid fa-trash-can"},null,-1),Qm=[zm],Xm={class:"row py-3"},Km={class:"col-12"},Zm={class:"mb-3"},Gm={class:"d-flex justify-content-between"},Jm={class:"form-label",id:"bot-description"},eh=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),th=n("div",null,"Отобразится пользователю при первом запуске",-1),nh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ah={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},oh={class:"col-12"},sh={class:"mb-3"},lh={class:"d-flex justify-content-between"},ih={class:"form-label",id:"bot-description"},rh=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dh=n("div",null,'Для меню "О Боте"',-1),uh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ch={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},mh={class:"col-12"},hh={class:"mb-3"},ph={class:"d-flex justify-content-between"},_h={class:"form-label",id:"bot-maintenance-message"},vh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),fh={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},bh={class:"row py-3"},gh={class:"col-12"},yh={class:"card mb-3"},kh=n("div",{class:"card-header"},[n("h6",null,[T("Информационная ссылка: создайте контент в "),n("a",{target:"_blank",href:"https://telegra.ph"},"https://telegra.ph")])],-1),$h={class:"card-body"},wh=n("div",{class:"row"},[n("div",{class:"col-12"},[n("h6",null,"Ссылка")])],-1),Ch={class:"row"},Fh={class:"col-12"},Th={class:"mb-3"},Dh={class:"col-12"},Ph={class:"card mb-3"},Sh=n("div",{class:"card-header"},[n("h6",null,"Ссылки на соц. сети")],-1),Oh={class:"card-body"},Mh=n("div",{class:"row"},[n("div",{class:"col-12"},[n("h6",null,"Ссылка")])],-1),Ah={class:"col-5"},jh={class:"mb-3"},Uh=["onUpdate:modelValue","aria-describedby"],Vh={class:"col-5"},Yh={class:"mb-3"},Rh=["onUpdate:modelValue","aria-describedby"],xh={class:"col-2"},Bh=["onClick"],Ih=n("i",{class:"fa-regular fa-trash-can"},null,-1),Nh=[Ih],Eh={class:"row"},qh={class:"col-12"},Lh={class:"row"},Wh={class:"col-12"},Hh={class:"alert alert-danger alert-dismissible fade show",role:"alert"},zh=n("strong",null,"Внимание!",-1),Qh=["onClick"],Xh={class:"col-12"},Kh=["disabled"],Zh={key:0},Gh={key:1},Jh={props:["bot"],data(){return{tab:0,messages:[],need_company_select:!1,selected_warning:null,page:null,step:0,templates:[],load:!1,loadPage:!1,needPageListUpdate:!1,need_threads:!1,need_company:!1,need_cashback_config:!1,need_payments:!1,need_shop:!1,command:null,company:null,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],botForm:{title:"",short_description:"",long_description:"",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,company_id:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,cashback_fire_percent:0,cashback_fire_period:0,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],commands:null,selected_bot_template_id:null,pages:[],amo:null,warnings:[]}}},watch:{"botForm.bot_token":{handler(t){this.botForm.bot_token&&this.getMe()},deep:!0},need_threads:function(t,e){let a=[{title:"Отзывы",key:"reviews",value:null},{title:"Начисление cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null},{title:"Доставка",key:"delivery",value:null},{title:"Ответы",key:"response",value:null},{title:"Обратная связь",key:"callback",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=a),this.need_threads&&this.botForm.message_threads&&a.forEach(o=>{this.botForm.message_threads.findIndex(l=>l.key===o.key)===-1&&this.botForm.message_threads.push(o)})},need_payments:function(t,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},computed:{...Le(["getSlugs","getCurrentCompany"]),filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(t=>!(this.botForm.warnings.findIndex(e=>e.rule_key===t.key)>=0))}},mounted(){window.addEventListener("store_current_company-change-event",t=>{this.company=this.getCurrentCompany}),this.bot&&this.$nextTick(()=>{this.botForm={id:this.bot.id||null,title:this.bot.title||"",short_description:this.bot.short_description||"",long_description:this.bot.long_description||"",is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,image:this.bot.image||null,commands:this.bot.commands||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1,level_2:this.bot.level_2,level_3:this.bot.level_3,company_id:this.bot.company_id,photos:this.bot.photos||[],warnings:this.bot.warnings||[],amo:this.bot.amo||null},this.botForm.commands==null&&(this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]),this.botForm.message_threads&&(this.need_threads=!0),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0),this.bot.company&&(this.company=this.bot.company)})},methods:{alert(t,e=null){e!=null&&(this.tab=e),this.messages.push(t)},removeMessage(t){this.messages.splice(t,1)},createBotTopics(){this.$store.dispatch("createBotTopics",{dataObject:{topics:this.botForm.message_threads,bot_id:this.bot.id}}).then(t=>{this.botForm.message_threads=t.data})},getMe(){let t=this.botForm.bot_token||"";t.length<40||this.$store.dispatch("getMe",{bot_token:t}).then(e=>{let a=e.username||null,o=e.first_name||null;a&&(this.botForm.bot_domain=a),o&&(this.botForm.title=o)})},getChatLink(t){this.$store.dispatch("loadChatInfo",{dataObject:{chat_id:t,bot_id:this.bot.id}}).then(e=>{console.log("chat info",e)})},addTextTo(t={param:null,text:null}){this.botForm[t.param]=t.text},removeCommands(t){this.botForm.commands.splice(t,1)},addCommands(){this.botForm.commands||(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},onChangePhotos(t){const e=t.target.files;this.botForm.image=null;for(let a=0;a<e.length;a++)this.botForm.photos=[e[a]]},addItem(t){this.botForm[t].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(t,e){this.botForm[t].splice(e,1)},removePhoto(){this.botForm.photos=[],this.botForm.image=null},addBot(){let t=new FormData;Object.keys(this.botForm).forEach(e=>{const a=this.botForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),this.company&&t.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)t.append("images[]",this.botForm.photos[e]);t.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:t}).then(e=>{let a=e.data;this.$emit("callback",a),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.$store.dispatch("updateBotWebhook",{dataObject:{bot_id:a.id}}),this.bot==null&&(this.botForm={title:"",short_description:"",long_description:"",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,main_channel:null,balance:null,tax_per_day:null,callback_link:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],warnings:[],selected_bot_template_id:null,pages:[]})}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибочка...",type:"error"})})},removeCashBackConfig(t){this.botForm.cashback_config.splice(t,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(t){let e=this.warnings.find(a=>a.key===t);return e||{title:"Не найдено"}},removeWarning(t){this.botForm.warnings.splice(t,1)},companyListCallback(t){this.load=!0,this.botForm.company_id=t.id,this.need_company_select=!1,this.$nextTick(()=>{this.load=!1})},addWarning(){const t=this.selected_warning;this.botForm.warnings.push({rule_key:t.key,rule_value:0,is_active:!0}),this.selected_warning=null}}},iU=Object.assign(Jh,{__name:"BotForm",setup(t){return(e,a)=>{const o=Vt("Popper"),s=On("lazy");return r(),d("form",{class:"py-3 mb-5",onSubmit:a[59]||(a[59]=De((...l)=>e.addBot&&e.addBot(...l),["prevent"]))},[n("div",kd,[n("div",$d,[e.botForm.company_id==null?(r(),d("p",wd,"Внимание! Вы не выбрали клиента!")):c("",!0),n("div",Cd,[$(n("input",{class:"form-check-input",type:"checkbox",value:e.need_company_select,"onUpdate:modelValue":a[0]||(a[0]=l=>e.need_company_select=l),id:"bot-select-company"},null,8,Fd),[[Oe,e.need_company_select]]),Td])]),e.need_company_select?(r(),d("div",Dd,[e.load?c("",!0):(r(),me(Us,{key:0,selected:e.botForm.company_id,onCallback:e.companyListCallback},null,8,["selected","onCallback"]))])):c("",!0),e.company?(r(),d("div",Pd,[n("div",Sd," Выбранный клиент #"+C(e.company.id)+" "+C(e.company.title),1)])):c("",!0),n("div",Od,[n("div",Md,[$(n("input",{class:"form-check-input",type:"checkbox",value:e.botForm.is_template||!1,"onUpdate:modelValue":a[1]||(a[1]=l=>e.botForm.is_template=l),id:"bot-is-template"},null,8,Ad),[[Oe,e.botForm.is_template]]),jd])]),e.botForm.is_template?(r(),d("div",Ud,[n("div",Vd,[n("label",Yd,[le(o,null,{content:q(()=>[xd]),default:q(()=>[Rd]),_:1}),T(" Название шаблона бота "),Bd]),$(n("input",{type:"text",class:"form-control",placeholder:"Название \\ описание шаблона","aria-label":"Описание шаблона","onUpdate:modelValue":a[2]||(a[2]=l=>e.botForm.template_description=l),maxlength:"255",onInvalid:a[3]||(a[3]=l=>e.alert("Вы не ввели название шаблона!")),"aria-describedby":"bot-template-description",required:""},null,544),[[X,e.botForm.template_description]])])])):c("",!0)]),n("div",Id,[Nd,n("div",Ed,[n("div",qd,[n("label",Ld,[n("div",null,[le(o,null,{content:q(()=>[Hd]),default:q(()=>[Wd]),_:1}),T(" Токен бота "),zd]),Qd]),$(n("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":a[4]||(a[4]=l=>e.botForm.bot_token=l),maxlength:"255",onInvalid:a[5]||(a[5]=l=>e.alert("Вы не ввели токен бота!")),"aria-describedby":"bot-token",required:""},null,544),[[X,e.botForm.bot_token]])])])]),e.botForm.bot_token?(r(),d("div",Xd,[n("div",Kd,[Zd,n("div",Gd,[e.botForm.photos?(r(),d("label",Jd,[eu,n("input",{type:"file",id:"bot-photos",accept:"image/*",onChange:a[6]||(a[6]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)])):c("",!0),e.botForm.photos?(r(!0),d(E,{key:1},oe(e.botForm.photos,(l,i)=>(r(),d("div",tu,[$(n("img",null,null,512),[[s,e.getPhoto(l).imageUrl]]),n("div",nu,[n("a",{onClick:a[7]||(a[7]=u=>e.removePhoto())},ou)])]))),256)):(r(),d("div",su,[$(n("img",null,null,512),[[s,"/images-by-bot-id/"+t.bot.id+"/"+e.botForm.image]]),n("div",lu,[n("a",{onClick:a[8]||(a[8]=l=>e.removePhoto())},ru)])]))])])])):c("",!0),e.botForm.bot_token?(r(),d("div",du,[n("div",uu,[n("ul",cu,[n("li",{class:"nav-item",onClick:a[9]||(a[9]=l=>e.tab=0)},[n("a",{class:I(["nav-link",{active:e.tab===0}]),href:"javascript:void(0)"},"Базовые настройки",2)]),n("li",{class:"nav-item",onClick:a[10]||(a[10]=l=>e.tab=1)},[n("a",{class:I(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Оплата и Кэшбэк",2)]),n("li",{class:"nav-item",onClick:a[11]||(a[11]=l=>e.tab=2)},[n("a",{class:I(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Обратная связь",2)]),n("li",{class:"nav-item",onClick:a[12]||(a[12]=l=>e.tab=3)},[n("a",{class:I(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Сообщения",2)]),n("li",{class:"nav-item",onClick:a[13]||(a[13]=l=>e.tab=4)},[n("a",{class:I(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Другие настройки",2)])])])])):c("",!0),$(n("div",mu,[n("div",hu,[n("div",pu,[n("label",_u,[le(o,null,{content:q(()=>[fu]),default:q(()=>[vu]),_:1}),T(" Доменное имя бота (загружается автоматически) "),bu]),$(n("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота",name:"bot_domain",onInvalid:a[14]||(a[14]=l=>e.alert("Вы не ввели доменное имя бота!",0)),"onUpdate:modelValue":a[15]||(a[15]=l=>e.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,544),[[X,e.botForm.bot_domain]]),e.botForm.bot_domain?(r(),d("p",gu,[T("Проверить работу бота "),n("a",{href:"https://t.me/"+e.botForm.bot_domain,target:"_blank"},"@"+C(e.botForm.bot_domain),9,yu)])):c("",!0)])]),n("div",ku,[n("div",$u,[n("div",wu,[Cu,n("div",Fu,[n("label",Tu,[e.botForm.title?(r(),d("span",Du,[T(" Название бота "),e.botForm.title.length>0?(r(),d("small",Pu,"Длина текста "+C(e.botForm.title.length)+"/64",1)):c("",!0)])):c("",!0)]),$(n("input",{type:"text",class:"form-control",placeholder:"Текст названия","aria-label":"Текст названия","onUpdate:modelValue":a[16]||(a[16]=l=>e.botForm.title=l),maxlength:"64","aria-describedby":"bot-title"},null,512),[[X,e.botForm.title]])]),n("div",Su,[n("label",Ou,[n("span",null,[T(" Короткое описание бота "),e.botForm.short_description.length>0?(r(),d("small",Mu,"Длина текста "+C(e.botForm.short_description.length)+"/120",1)):c("",!0)])]),$(n("textarea",{class:"form-control",placeholder:"Короткий текст описания бота","aria-label":"Короткий текст описания бота","onUpdate:modelValue":a[17]||(a[17]=l=>e.botForm.short_description=l),maxlength:"120","aria-describedby":"bot-short-description"},`
                                `,512),[[X,e.botForm.short_description]])]),n("div",Au,[n("label",ju,[n("span",null,[T(" Длинное описание бота "),e.botForm.long_description.length>0?(r(),d("small",Uu,"Длина текста "+C(e.botForm.long_description.length)+"/512",1)):c("",!0)])]),$(n("textarea",{class:"form-control",placeholder:"Длинный текст описания бота","aria-label":"Длинный текст описания бота","onUpdate:modelValue":a[18]||(a[18]=l=>e.botForm.long_description=l),maxlength:"512","aria-describedby":"bot-long-description"},`
                                `,512),[[X,e.botForm.long_description]])]),(r(!0),d(E,null,oe(e.botForm.commands,(l,i)=>(r(),d("div",{class:"row",key:"commands-"+i},[n("div",Vu,[n("div",Yu,[$(n("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255",onInvalid:a[19]||(a[19]=u=>e.alert("Вы не ввели название команды",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].command=u,"aria-describedby":"bot-command-"+i,required:""},null,40,Ru),[[X,e.botForm.commands[i].command]])])]),n("div",xu,[n("div",Bu,[$(n("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255",onInvalid:a[20]||(a[20]=u=>e.alert("Вы не ввели описание команды!",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].description=u,"aria-describedby":"bot-command-description-"+i,required:""},null,40,Iu),[[X,e.botForm.commands[i].description]])])]),n("div",Nu,[n("button",{type:"button",onClick:u=>e.removeCommands(i),class:"btn btn-outline-danger w-100"},Lu,8,Eu)])]))),128)),n("div",Wu,[n("div",Hu,[n("button",{type:"button",onClick:a[21]||(a[21]=l=>e.addCommands()),class:"btn btn-outline-success w-100"},"Добавить еще команду ")])])])])]),n("div",zu,[n("div",Qu,[le(o,null,{content:q(()=>[Ku]),default:q(()=>[Xu]),_:1}),Zu,$(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"ссылка на внешний сервис","onUpdate:modelValue":a[22]||(a[22]=l=>e.botForm.callback_link=l),"aria-describedby":"callback_link"},null,512),[[X,e.botForm.callback_link]])])])],512),[[At,e.tab===0&&e.botForm.bot_token]]),$(n("div",Gu,[n("div",Ju,[n("div",ec,[n("label",tc,[le(o,null,{content:q(()=>[ac]),default:q(()=>[nc]),_:1}),T(" Баланс бота, руб "),oc]),$(n("input",{type:"number",class:"form-control",placeholder:"Баланс","aria-label":"Баланс","onUpdate:modelValue":a[23]||(a[23]=l=>e.botForm.balance=l),min:"0",onInvalid:a[24]||(a[24]=l=>e.alert("Вы не ввели сумму баланса бота!",1)),"aria-describedby":"bot-balance",required:""},null,544),[[X,e.botForm.balance]])])]),n("div",sc,[n("div",lc,[n("label",ic,[le(o,null,{content:q(()=>[dc]),default:q(()=>[rc]),_:1}),T(" Списание за сутки, руб "),uc]),$(n("input",{type:"number",class:"form-control",placeholder:"Списание","aria-label":"Списание","onUpdate:modelValue":a[25]||(a[25]=l=>e.botForm.tax_per_day=l),min:"0",onInvalid:a[26]||(a[26]=l=>e.alert("Вы не ввели сумму списания бота!",1)),"aria-describedby":"bot-tax-per-day",required:""},null,544),[[X,e.botForm.tax_per_day]])])]),n("div",cc,[n("div",mc,[hc,$(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":a[27]||(a[27]=l=>e.botForm.level_1=l),min:"0",onInvalid:a[28]||(a[28]=l=>e.alert("Вы не ввели значение кэшбэка 1 уровня бота!",1)),"aria-describedby":"bot-level-1",required:""},null,544),[[X,e.botForm.level_1]])])]),n("div",pc,[n("div",_c,[vc,$(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":a[29]||(a[29]=l=>e.botForm.level_2=l),min:"0","aria-describedby":"bot-level-2"},null,512),[[X,e.botForm.level_2]])])]),n("div",fc,[n("div",bc,[gc,$(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":a[30]||(a[30]=l=>e.botForm.level_3=l),min:"0","aria-describedby":"bot-level-3"},null,512),[[X,e.botForm.level_3]])])]),n("div",yc,[n("div",kc,[$c,$(n("select",{class:"form-control","onUpdate:modelValue":a[31]||(a[31]=l=>e.botForm.cashback_fire_period=l),id:"cashback-fired-period"},[(r(!0),d(E,null,oe(e.cashback_fire_periods,l=>(r(),d("option",{value:l.value},C(l.title||"Не указано"),9,wc))),256))],512),[[Lt,e.botForm.cashback_fire_period]])]),e.botForm.cashback_fire_period>0?(r(),d("div",Cc,[Fc,$(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":a[32]||(a[32]=l=>e.botForm.cashback_fire_percent=l),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[X,e.botForm.cashback_fire_percent]])])):c("",!0)]),n("div",Tc,[n("div",Dc,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[33]||(a[33]=l=>e.need_cashback_config=l),type:"checkbox",id:"need-cashback-config"},null,512),[[Oe,e.need_cashback_config]]),Pc])]),n("div",Sc,[n("div",Oc,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[34]||(a[34]=l=>e.need_payments=l),type:"checkbox",id:"need-payments"},null,512),[[Oe,e.need_payments]]),Mc])]),e.need_payments?(r(),d("div",Ac,[n("div",jc,[$(n("input",{class:"form-check-input",type:"checkbox",value:e.botForm.auto_cashback_on_payments,"onUpdate:modelValue":a[35]||(a[35]=l=>e.botForm.auto_cashback_on_payments=l),id:"bot-auto-cashback-on-payments"},null,8,Uc),[[Oe,e.botForm.auto_cashback_on_payments]]),Vc]),n("div",Yc,[le(o,null,{content:q(()=>[xc]),default:q(()=>[Rc]),_:1}),Bc,$(n("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":a[36]||(a[36]=l=>e.botForm.payment_provider_token=l),"aria-describedby":"payment_provider_token"},null,512),[[X,e.botForm.payment_provider_token]])])])):c("",!0),n("div",Ic,[n("div",Nc,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[37]||(a[37]=l=>e.need_shop=l),type:"checkbox",id:"need-shop"},null,512),[[Oe,e.need_shop]]),Ec])]),e.need_shop?(r(),d("div",qc,[n("div",Lc,[le(o,null,{content:q(()=>[Hc]),default:q(()=>[Wc]),_:1}),zc,$(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":a[38]||(a[38]=l=>e.botForm.vk_shop_link=l),"aria-describedby":"vk_shop_link"},null,512),[[X,e.botForm.vk_shop_link]])])])):c("",!0),e.need_cashback_config?(r(),d("div",Qc,[Xc,(r(!0),d(E,null,oe(e.botForm.cashback_config,(l,i)=>(r(),d("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+i},[n("div",Kc,[Zc,n("button",{type:"button",onClick:u=>e.removeCashBackConfig(i),class:"btn btn-link text-danger"},em,8,Gc)]),$(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255",onInvalid:a[39]||(a[39]=u=>e.alert("Вы не ввели название категории!",1)),"onUpdate:modelValue":u=>e.botForm.cashback_config[i].title=u,"aria-describedby":"bot-cashback-config-"+i,required:""},null,40,tm),[[X,e.botForm.cashback_config[i].title]])]))),128)),n("button",{type:"button",onClick:a[40]||(a[40]=l=>e.addCashBackConfig()),class:"btn mb-2 rounded-sm text-uppercase btn-outline-info w-100"}," Добавить еще категорию "),nm])):c("",!0)],512),[[At,e.tab===1&&e.botForm.bot_token]]),$(n("div",am,[n("div",om,[n("div",sm,[n("div",lm,[n("label",im,[n("div",null,[le(o,null,{content:q(()=>[dm]),default:q(()=>[rm]),_:1}),T(" Канал для заказов (id) "),um])]),le(qn,{token:e.botForm.bot_token,param:"order_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),$(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":a[41]||(a[41]=l=>e.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[X,e.botForm.order_channel]]),n("small",null,[n("a",{onClick:a[42]||(a[42]=l=>e.getChatLink(e.botForm.order_channel)),href:"javascript:void(0)"},"Узнать ссылку"),T("(будет отправлена в бота)")])])]),n("div",cm,[n("div",mm,[n("div",hm,[pm,le(qn,{token:e.botForm.bot_token,param:"main_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),$(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":a[43]||(a[43]=l=>e.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[X,e.botForm.main_channel]]),n("small",null,[n("a",{onClick:a[44]||(a[44]=l=>e.getChatLink(e.botForm.main_channel)),href:"javascript:void(0)"},"Узнать ссылку"),T("(будет отправлена в бота)")])])]),e.botForm.order_channel?(r(),d("div",_m,[n("div",vm,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[45]||(a[45]=l=>e.need_threads=l),type:"checkbox",id:"need-payments"},null,512),[[Oe,e.need_threads]]),fm])])):c("",!0),e.need_threads&&e.botForm.order_channel?(r(),d("div",bm,[n("div",gm,[ym,n("a",{class:"btn btn-outline-info",onClick:a[46]||(a[46]=(...l)=>e.createBotTopics&&e.createBotTopics(...l)),href:"javascript:void(0)"},[km,T("Создать топики автоматически ")])]),n("ul",$m,[(r(!0),d(E,null,oe(e.botForm.message_threads,(l,i)=>(r(),d("li",wm,[n("p",Cm,C(l.title)+" ("+C(l.key)+")",1),$(n("input",{type:"number",class:"form-control",min:"0",max:"10000",placeholder:"Идентификатор топика","onUpdate:modelValue":u=>e.botForm.message_threads[i].value=u},null,8,Fm),[[X,e.botForm.message_threads[i].value]])]))),256))])])):c("",!0),n("div",Tm,[n("div",Dm,[n("div",Pm,[n("div",Sm,[Om,$(n("select",{class:"form-control","onUpdate:modelValue":a[47]||(a[47]=l=>e.selected_warning=l),onChange:a[48]||(a[48]=(...l)=>e.addWarning&&e.addWarning(...l)),id:"warning-rules"},[Mm,(r(!0),d(E,null,oe(e.filteredWarnings,l=>(r(),d("option",{value:l},C(l.title),9,Am))),256))],544),[[Lt,e.selected_warning]])]),(r(!0),d(E,null,oe(e.botForm.warnings,(l,i)=>(r(),d("div",jm,[n("div",Um,[n("div",Vm,[n("p",Ym,C(e.getWarning(l.rule_key).title||"Не найдено"),1)]),n("div",Rm,[n("div",xm,[$(n("input",{class:"form-check-input","onUpdate:modelValue":u=>e.botForm.warnings[i].is_active=u,type:"checkbox",id:"warning-is-active-"+i},null,8,Bm),[[Oe,e.botForm.warnings[i].is_active]]),n("label",{class:"form-check-label",for:"warning-is-active-"+i},[e.botForm.warnings[i].is_active?(r(),d("span",Nm,"Вкл")):(r(),d("span",Em,"Выкл"))],8,Im)])]),n("div",qm,[$(n("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":u=>e.botForm.warnings[i].rule_value=u,min:"0","aria-describedby":"bot-level-3"},null,8,Lm),[[X,e.botForm.warnings[i].rule_value]])]),n("div",Wm,[n("button",{onClick:u=>e.removeWarning(i),type:"button",class:"btn btn-outline-danger"},Qm,8,Hm)])])]))),256))])])])],512),[[At,e.tab===2&&e.botForm.bot_token]]),$(n("div",Xm,[n("div",Km,[n("div",Zm,[n("div",Gm,[n("label",Jm,[le(o,null,{content:q(()=>[th]),default:q(()=>[eh]),_:1}),T(" Приветственное сообщение "),nh,e.botForm.welcome_message?(r(),d("small",ah," Длина текста "+C(e.botForm.welcome_message.length),1)):c("",!0)])]),$(n("textarea",{type:"text",class:"form-control",style:{"min-height":"400px"},placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":a[49]||(a[49]=l=>e.botForm.welcome_message=l),onInvalid:a[50]||(a[50]=l=>e.alert("Вы не ввели приветственное сообщение!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[X,e.botForm.welcome_message]])])]),n("div",oh,[n("div",sh,[n("div",lh,[n("label",ih,[le(o,null,{content:q(()=>[dh]),default:q(()=>[rh]),_:1}),T(" Описание бота "),uh,e.botForm.description?(r(),d("small",ch," Длина текста "+C(e.botForm.description.length),1)):c("",!0)])]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":a[51]||(a[51]=l=>e.botForm.description=l),onInvalid:a[52]||(a[52]=l=>e.alert("Вы не ввели описание бота!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[X,e.botForm.description]])])]),n("div",mh,[n("div",hh,[n("div",ph,[n("label",_h,[T("Сообщение для режима тех. работ "),vh,e.botForm.maintenance_message?(r(),d("small",fh," Длина текста "+C(e.botForm.maintenance_message.length),1)):c("",!0)])]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":a[53]||(a[53]=l=>e.botForm.maintenance_message=l),maxlength:"255",onInvalid:a[54]||(a[54]=l=>e.alert("Вы не ввели сообщение для технических работ бота!",3)),"aria-describedby":"bot-maintenance-message",required:""},`
                    `,544),[[X,e.botForm.maintenance_message]])])])],512),[[At,e.tab===3&&e.botForm.bot_token]]),$(n("div",bh,[n("div",gh,[n("div",yh,[kh,n("div",$h,[wh,n("div",Ch,[n("div",Fh,[n("div",Th,[$(n("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":a[55]||(a[55]=l=>e.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[X,e.botForm.info_link]])])])])])])]),n("div",Dh,[n("div",Ph,[Sh,n("div",Oh,[Mh,(r(!0),d(E,null,oe(e.botForm.social_links,(l,i)=>(r(),d("div",{class:"row",key:"social-link"+i},[n("div",Ah,[n("div",jh,[$(n("input",{type:"text",class:"form-control",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255",onInvalid:a[56]||(a[56]=u=>e.alert("Вы не ввели название ссылки на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].title=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,Uh),[[X,e.botForm.social_links[i].title]])])]),n("div",Vh,[n("div",Yh,[$(n("input",{type:"text",class:"form-control",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255",onInvalid:a[57]||(a[57]=u=>e.alert("Вы не ввели ссылку на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].url=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,Rh),[[X,e.botForm.social_links[i].url]])])]),n("div",xh,[n("button",{type:"button",onClick:u=>e.removeItem("social_links",i),class:"btn btn-outline-danger w-100"},Nh,8,Bh)])]))),128)),n("div",Eh,[n("div",qh,[n("button",{type:"button",onClick:a[58]||(a[58]=l=>e.addSocialLinks()),class:"btn btn-outline-success w-100"},"Добавить еще ссылку ")])])])])])],512),[[At,e.tab===4&&e.botForm.bot_token]]),n("div",Lh,[n("div",Wh,[e.messages.length>0?(r(!0),d(E,{key:0},oe(e.messages,(l,i)=>(r(),d("div",Hh,[zh,T(" "+C(l||"Ошибка")+" ",1),n("button",{type:"button",class:"btn-close",onClick:u=>e.removeMessage(i)},null,8,Qh)]))),256)):c("",!0)]),n("div",Xh,[n("button",{type:"submit",disabled:!e.botForm.bot_token,title:"Сохранение бота",class:"btn btn-primary min-menu-btn w-100"},[t.bot?(r(),d("span",Gh,"Обновить бота")):(r(),d("span",Zh,"Добавить бота"))],8,Kh)])])],32)}}});const ep={class:"row"},tp={class:"input-group mb-3"},np={class:"row"},ap={class:"col-12"},op={class:"form-check"},sp=n("label",{class:"form-check-label",for:"needDeleted"},"Отобразить удаленные",-1),lp={key:0,class:"row"},ip={key:0,class:"col-12"},rp={class:"col-12 mb-3"},dp={class:"list-group w-100"},up={class:"d-flex justify-content-between"},cp=["onClick"],mp={key:0},hp={key:1},pp={key:2},_p=n("i",{class:"fa-solid fa-lock"},null,-1),vp=[_p],fp={key:0},bp={class:"dropdown"},gp=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),yp={class:"dropdown-menu"},kp={key:0},$p=["onClick"],wp=n("i",{class:"fa-solid fa-copy mr-1"},null,-1),Cp={key:1},Fp=["onClick"],Tp=n("i",{class:"fa-solid fa-ban mr-1"},null,-1),Dp=["onClick"],Pp=n("i",{class:"fa-solid fa-copy mr-1"},null,-1),Sp={key:2},Op=["onClick"],Mp=n("i",{class:"fa-solid fa-trash mr-1"},null,-1),Ap={key:0,class:"component-icons"},jp={key:0},Up=n("i",{class:"fa-regular fa-images"},null,-1),Vp=[Up],Yp={key:1},Rp=n("i",{class:"fa-regular fa-note-sticky"},null,-1),xp=[Rp],Bp={key:2},Ip=n("i",{class:"fa-solid fa-photo-film"},null,-1),Np=[Ip],Ep={key:3},qp=n("i",{class:"fa-regular fa-file-audio"},null,-1),Lp=[qp],Wp={key:4},Hp=n("i",{class:"fa-regular fa-file-word"},null,-1),zp=[Hp],Qp={key:5},Xp=n("i",{class:"fa-solid fa-link"},null,-1),Kp=[Xp],Zp={key:6},Gp=n("i",{class:"fa-solid fa-scroll"},null,-1),Jp=[Gp],e_={key:7},t_=n("i",{class:"fa-regular fa-comment-dots"},null,-1),n_=[t_],a_={key:8},o_=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),s_=[o_],l_={key:9},i_=n("i",{class:"fa-regular fa-keyboard"},null,-1),r_=[i_],d_={key:10},u_=n("i",{class:"fa-solid fa-ellipsis"},null,-1),c_=[u_],m_={class:"col-12"},h_={key:1,class:"row"},p_=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," Созданных страниц не найдено! ")],-1),__=[p_],v_={props:["editor","current"],data(){return{bot:null,current_page:0,need_deleted:!1,loading:!0,pages:[],search:null,pages_paginate_object:null,need_new_page:!1}},watch:{need_deleted:function(t,e){this.nextPages(0)},getPages:function(t,e){this.$nextTick(()=>{this.search||(this.pages=this.getPages)})},search:function(t,e){this.nextPages(0)}},computed:{...Le(["getPages","getCurrentBot","getPagesPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.bot&&(this.current_page=localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0),this.loadPages()})},methods:{loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},selectPage(t){this.$emit("callback",t),this.$notify("Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы")},nextPages(t){this.current_page=t,this.bot&&localStorage.setItem(`cashman_pagelist_${this.bot.id}_page_index`,this.current_page),this.loadPages()},duplicatePage(t){this.loading=!0,this.$store.dispatch("duplicatePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},forceRemovePage(t){this.loading=!0,this.$store.dispatch("forceRemovePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},restorePage(t){this.loading=!0,this.$store.dispatch("restorePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},removePage(t){this.loading=!0,this.$store.dispatch("removePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},loadPages(){this.loading=!0,this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id||null,search:this.search||null,needDeleted:this.need_deleted},page:this.current_page||0}).then(t=>{this.loading=!1,this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject,this.pages.length===0&&localStorage.setItem(`cashman_pagelist_${this.bot.id}_page_index`,0)}).catch(()=>{this.loading=!1})}}},$a=Object.assign(v_,{__name:"PagesList",setup(t){return(e,a)=>(r(),d(E,null,[n("div",ep,[n("div",tp,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск страницы","aria-label":"Поиск бота","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),"aria-describedby":"button-addon2"},null,512),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[1]||(a[1]=(...o)=>e.loadPages&&e.loadPages(...o)),type:"button",id:"button-addon2"},"Найти ")])]),n("div",np,[n("div",ap,[n("div",op,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[2]||(a[2]=o=>e.need_deleted=o),type:"checkbox",id:"needDeleted"},null,512),[[Oe,e.need_deleted]]),sp])])]),e.pages.length>0?(r(),d("div",lp,[e.pages.length>7?(r(),d("div",ip,[e.pages_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0),n("div",rp,[n("ul",dp,[(r(!0),d(E,null,oe(e.pages,(o,s)=>(r(),d("li",{class:I(["list-group-item cursor-pointer page-menu-item btn btn-outline-info mb-1",{"border border-warning":o.deleted_at!=null}])},[n("div",up,[n("strong",{onClick:l=>e.selectPage(o)},[T("#"+C(o.id||"Не указано")+" ",1),o.slug?(r(),d("span",mp,C(o.slug.command||"Не указано"),1)):(r(),d("span",hp,"Не привязано к команде")),t.current&&t.current==o.id?(r(),d("span",pp,vp)):c("",!0)],8,cp),t.editor?(r(),d("div",fp,[n("div",bp,[gp,n("ul",yp,[o.deleted_at!=null?(r(),d("li",kp,[n("a",{class:"dropdown-item",onClick:l=>e.restorePage(o.id)},[wp,T("Восстановить")],8,$p)])):c("",!0),o.deleted_at!=null?(r(),d("li",Cp,[n("a",{class:"dropdown-item",onClick:l=>e.forceRemovePage(o.id)},[Tp,T("Удалить полностью")],8,Fp)])):c("",!0),n("li",null,[n("a",{class:"dropdown-item",onClick:l=>e.duplicatePage(o.id)},[Pp,T("Дублировать")],8,Dp)]),o.deleted_at==null?(r(),d("li",Sp,[n("a",{class:"dropdown-item",onClick:l=>e.removePage(o.id)},[Mp,T("Удалить")],8,Op)])):c("",!0)])])])):c("",!0)]),o?(r(),d("ul",Ap,[(o.images||[]).length>0?(r(),d("li",jp,Vp)):c("",!0),o.sticker?(r(),d("li",Yp,xp)):c("",!0),(o.videos||[]).length>0?(r(),d("li",Bp,Np)):c("",!0),(o.audios||[]).length>0?(r(),d("li",Ep,Lp)):c("",!0),(o.documents||[]).length>0?(r(),d("li",Wp,zp)):c("",!0),o.next_page_id?(r(),d("li",Qp,Kp)):c("",!0),o.next_bot_menu_slug_id?(r(),d("li",Zp,Jp)):c("",!0),o.next_bot_dialog_command_id?(r(),d("li",e_,n_)):c("",!0),o.rules_if?(r(),d("li",a_,s_)):c("",!0),o.reply_keyboard_id?(r(),d("li",l_,r_)):c("",!0),o.inline_keyboard_id?(r(),d("li",d_,c_)):c("",!0)])):c("",!0)],2))),256))])]),n("div",m_,[e.pages_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",h_,__))],64))}}),f_={class:"row"},b_={class:"col-12"},g_={class:"card-body"},y_=n("h6",null,"Добавление нового скрипта в бота",-1),k_={key:0,class:"row"},$_={class:"col-md-4 mb-2"},w_={key:1,class:"row"},C_=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"},' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')],-1),F_=[C_],T_={props:["bot","global"],data(){return{load:!1,search:null,slugs:[],paginate:[]}},computed:{...Le(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(t=>{let e=t.slug||"",a=t.command||"",o=t.comment||"";return a.toLowerCase().indexOf(this.search.toLowerCase())!==-1||o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(t){this.loadSlugs(t)},selectSlug(t){this.$emit("callback",{id:t.id||null,slug:t.slug,comment:t.comment,command:t.command}),this.$notify("Вы выбрали скрипт из списка!")},loadSlugs(t=0){this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,search:this.search,needGlobal:this.global},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){}}},D_=Object.assign(T_,{__name:"BotSlugListSimple",setup(t){return(e,a)=>(r(),d("div",f_,[n("div",b_,[n("div",g_,[y_,n("div",null,[$(n("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),onKeyup:a[1]||(a[1]=(...o)=>e.loadSlugs&&e.loadSlugs(...o)),placeholder:"Поиск нужного скрипта по описанию"},null,544),[[X,e.search]])]),e.slugs.length>0?(r(),d("div",k_,[(r(!0),d(E,null,oe(e.slugs,(o,s)=>(r(),d("div",$_,[le(El,{item:o,bot:t.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["item","bot","onCallback","onSelect"])]))),256)),e.paginate?(r(),me(lt,{key:0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",w_,F_))])])]))}});const P_={props:["param"],data(){return{expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона: +7(982)000-00-00"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату DD.MM.YYYY"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},S_={class:"dropdown"},O_=n("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-regular fa-registered"})],-1),M_={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},A_=["onClick"];function j_(t,e,a,o,s,l){return r(),d("div",S_,[O_,n("div",M_,[n("li",null,[(r(!0),d(E,null,oe(s.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},C(i.description||"-"),9,A_))),256))])])])}const U_=tn(P_,[["render",j_]]),V_={key:0,class:"mb-2 d-flex justify-content-start flex-wrap"},Y_=n("p",null,"Связь цепочек: ",-1),R_=["onClick"],x_={key:0,class:"fa-solid fa-arrow-right font-12"},B_={class:"form-floating mb-2"},I_=["id"],N_=["for"],E_={class:"form-check mb-2"},q_=n("label",{class:"form-check-label",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),L_={key:1,class:"form-floating mb-2"},W_=["id"],H_=["for"],z_={key:2,class:"form-floating mb-2"},Q_=["id"],X_=["for"],K_={key:3,class:"mb-2"},Z_={class:"d-flex justify-content-between"},G_=["for"],J_=["id"],ev={class:"mb-2"},tv={class:"d-flex justify-content-between"},nv=["for"],av=["id"],ov={class:"mb-2"},sv={class:"form-check"},lv=n("label",{class:"form-check-label",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),iv={class:"form-check"},rv=n("label",{class:"form-check-label",for:"need-dialog-menu-inline"}," В диалоге нужно меню тексту ",-1),dv={class:"form-check"},uv=n("label",{class:"form-check-label",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),cv={key:4,class:"card mb-2"},mv={class:"card-body"},hv=n("h6",null,"Фотографии к диалогу",-1),pv={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},_v={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},vv=n("span",null,"+",-1),fv={class:"mb-2 img-preview",style:{"margin-right":"10px"}},bv={class:"remove"},gv=["onClick"],yv={class:"mb-2 img-preview",style:{"margin-right":"10px"}},kv={class:"remove"},$v=["onClick"],wv={key:5,class:"card mb-2"},Cv=n("div",{class:"card-header"},[n("h6",null,"Кнопки к тексту вопроса")],-1),Fv={class:"card-body"},Tv={key:6,class:"card mb-2"},Dv=n("div",{class:"card-header"},[n("h6",null,"Кнопки в виде нижнего меню")],-1),Pv={class:"card-body"},Sv={class:"mb-2"},Ov=n("label",{class:"form-check-label",for:"need-empty-dialog"}," Сохранить в переменную ",-1),Mv=n("option",{selected:""},"Не выбрано",-1),Av=["value"],jv={class:"form-check mb-2"},Uv=n("label",{class:"form-check-label",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),Vv={key:7,class:"mb-2"},Yv=n("p",null,"Выбрать флаги",-1),Rv=["onClick"],xv={key:8,class:"mb-2"},Bv={key:0,class:"row"},Iv=n("div",{class:"col-12"},[n("p",null,"Доступные для связывания диалоги:")],-1),Nv={class:"col-md-12 mb-1"},Ev={type:"button",class:"btn btn-outline-primary w-100 d-flex justify-content-between align-items-center",style:{"text-align":"left"}},qv=["onClick"],Lv={key:0,class:"fa-solid fa-link mr-2 text-success"},Wv={key:1,class:"row"},Hv=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"}," Диалогов для связывания нет ")],-1),zv=[Hv],Qv=n("hr",null,null,-1),Xv={class:"mb-2"},Kv={type:"submit",class:"btn btn-outline-success p-3 w-100"},Zv={key:0},Gv={key:1},Jv={props:["item","bot"],data(){return{loading:!0,dialog_commands:[],dialog_commands_paginate_object:null,need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,is_empty:!1,result_flags:[],store_to:null,result_channel:null,inline_keyboard:null,reply_keyboard:null},photos:[]}},computed:{...Le(["getDialogCommands","getDialogCommandsPaginateObject"]),filteredCommands(){return this.dialog_commands?this.dialog_commands.filter(t=>t.id!=this.commandForm.id):[]}},mounted(){this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.item&&(this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject)},methods:{nextDialogs(t){this.loadDialogs(t)},loadDialogs(t=0){this.loading=!0,this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{this.loading=!1,this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject}).catch(()=>{this.loading=!1})},doCommandLink(t){this.loading=!0,this.commandForm.next_bot_dialog_command_id=t},submit(){this.loading=!0;let t=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const a=this.commandForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),this.photos){for(let e=0;e<this.photos.length;e++)t.append("files[]",this.photos[e]);t.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:t}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Успешная обработка диалоговой команды",type:"success"}),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,is_empty:!1,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t,e){this[t].splice(e,1)},onChangePhotos(t){const e=t.target.files;for(let a=0;a<e.length;a++)this.photos.push(e[a])},saveInlineKeyboard(t){this.commandForm.inline_keyboard=t},saveReplyKeyboard(t){this.commandForm.reply_keyboard=t},addTextTo(t={param:null,text:null}){this.commandForm[t.param]=t.text},selectElementById(t){this.$emit("select-element",t)},selectFlag(t){(!this.commandForm.result_flags||!Array.isArray(this.commandForm.result_flags))&&(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(t.key);e===-1?this.commandForm.result_flags.push(t.key):this.commandForm.result_flags.splice(e,1)}}},ef=Object.assign(Jv,{__name:"BotDialogCommandForm",setup(t){return(e,a)=>{const o=On("lazy");return r(),d("form",{onSubmit:a[13]||(a[13]=De((...s)=>e.submit&&e.submit(...s),["prevent"]))},[e.commandForm.next_bot_dialog_command_id?(r(),d("div",V_,[Y_,(r(!0),d(E,null,oe(t.item.chain,(s,l)=>(r(),d("div",null,[n("span",{class:I(["badge cursor-pointer",{"bg-success":e.commandForm.id==s,"bg-primary":e.commandForm.id!=s}]),onClick:i=>e.selectElementById(s)},C(s),11,R_),l<t.item.chain.length-1?(r(),d("i",x_)):c("",!0)]))),256))])):c("",!0),n("div",B_,[$(n("input",{type:"text",class:"form-control",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":a[0]||(a[0]=s=>e.commandForm.pre_text=s),required:""},null,8,I_),[[X,e.commandForm.pre_text]]),n("label",{for:"commandForm-pre-text-"+e.commandForm.id},"Текст диалога",8,N_)]),n("div",E_,[$(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=s=>e.commandForm.is_empty=s),id:"need-empty-dialog",checked:""},null,512),[[Oe,e.commandForm.is_empty]]),q_]),e.commandForm.is_empty?c("",!0):(r(),d("div",L_,[$(n("input",{type:"text",class:"form-control",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":a[2]||(a[2]=s=>e.commandForm.post_text=s),required:""},null,8,W_),[[X,e.commandForm.post_text]]),n("label",{for:"commandForm-post-text-"+e.commandForm.id},"Текст после успешного завершения диалога",8,H_)])),e.commandForm.is_empty?c("",!0):(r(),d("div",z_,[$(n("input",{type:"text",class:"form-control",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":a[3]||(a[3]=s=>e.commandForm.error_text=s),required:""},null,8,Q_),[[X,e.commandForm.error_text]]),n("label",{for:"commandForm-error-text-"+e.commandForm.id},"Текст на случай ошибки корректности данных",8,X_)])),e.commandForm.is_empty?c("",!0):(r(),d("div",K_,[n("div",Z_,[n("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для валидации данных ",8,G_),le(U_,{param:"input_pattern",onCallback:e.addTextTo},null,8,["onCallback"])]),$(n("input",{type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":a[4]||(a[4]=s=>e.commandForm.input_pattern=s),maxlength:"255",id:"commandForm-input-pattern-"+e.commandForm.id,"aria-describedby":"commandForm-input-pattern"},null,8,J_),[[X,e.commandForm.input_pattern]])])),n("div",ev,[n("div",tv,[n("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,nv),t.bot?(r(),me(qn,{key:0,token:t.bot.bot_token,param:"result_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])):c("",!0)]),$(n("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":a[5]||(a[5]=s=>e.commandForm.result_channel=s),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,av),[[X,e.commandForm.result_channel]])]),n("div",ov,[n("div",sv,[$(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=s=>e.need_images=s),id:"need-dialog-image",checked:""},null,512),[[Oe,e.need_images]]),lv]),n("div",iv,[$(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=s=>e.need_inline_keyboard=s),id:"need-dialog-menu-inline",checked:""},null,512),[[Oe,e.need_inline_keyboard]]),rv]),n("div",dv,[$(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=s=>e.need_reply_keyboard=s),id:"need-dialog-menu-reply",checked:""},null,512),[[Oe,e.need_reply_keyboard]]),uv])]),e.need_images?(r(),d("div",cv,[n("div",mv,[hv,n("div",pv,[n("label",_v,[vv,n("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:a[9]||(a[9]=(...s)=>e.onChangePhotos&&e.onChangePhotos(...s)),style:{display:"none"}},null,32)]),e.photos.length>0?(r(!0),d(E,{key:0},oe(e.photos,(s,l)=>(r(),d("div",fv,[$(n("img",null,null,512),[[o,e.getPhoto(s).imageUrl]]),n("div",bv,[n("a",{onClick:i=>e.removePhoto("photos",l)},"Удалить",8,gv)])]))),256)):c("",!0),e.commandForm.images&&t.bot?(r(!0),d(E,{key:1},oe(e.commandForm.images,(s,l)=>(r(),d("div",yv,[$(n("img",null,null,512),[[o,"/images-by-bot-id/"+t.bot.id+"/"+s]]),n("div",kv,[n("a",{onClick:i=>e.removePhoto("images",l)},"Удалить",8,$v)])]))),256)):c("",!0)])])])):c("",!0),e.need_inline_keyboard?(r(),d("div",wv,[Cv,n("div",Fv,[le(Ln,{onSave:e.saveInlineKeyboard,"edited-keyboard":e.commandForm.inline_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),e.need_reply_keyboard?(r(),d("div",Tv,[Dv,n("div",Pv,[le(Ln,{onSave:e.saveReplyKeyboard,"edited-keyboard":e.commandForm.reply_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),n("div",Sv,[Ov,$(n("select",{class:"form-control","onUpdate:modelValue":a[10]||(a[10]=s=>e.commandForm.store_to=s)},[Mv,(r(!0),d(E,null,oe(e.store_variants,s=>(r(),d("option",{value:s.key},C(s.title||"Не указано"),9,Av))),256))],512),[[Lt,e.commandForm.store_to]])]),n("div",jv,[$(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=s=>e.need_set_flags=s),id:"need-set-flags",checked:""},null,512),[[Oe,e.need_set_flags]]),Uv]),e.need_set_flags?(r(),d("div",Vv,[Yv,(r(!0),d(E,null,oe(e.flags_variants,s=>(r(),d("span",{class:I(["badge text-info mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(s.key)!=-1}]),onClick:l=>e.selectFlag(s)},C(s.title),11,Rv))),256))])):c("",!0),e.commandForm.id?(r(),d("div",xv,[e.filteredCommands.length>0?(r(),d("div",Bv,[Iv,(r(!0),d(E,null,oe(e.filteredCommands,(s,l)=>(r(),d("div",Nv,[n("button",Ev,[n("span",{onClick:i=>e.doCommandLink(s.id)},[e.commandForm.next_bot_dialog_command_id==s.id?(r(),d("i",Lv)):c("",!0),T(" #"+C(s.id)+" "+C(s.pre_text||"Без текста"),1)],8,qv),e.commandForm.next_bot_dialog_command_id==s.id?(r(),d("i",{key:0,class:"fa-solid fa-unlink text-danger",onClick:a[12]||(a[12]=i=>e.doCommandLink(null))})):c("",!0)])]))),256)),e.dialog_commands_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",Wv,zv))])):c("",!0),Qv,n("div",Xv,[n("button",Kv,[e.commandForm.id?(r(),d("span",Zv,"Обновить диалог")):(r(),d("span",Gv,"Добавить диалог"))])])],32)}}});const tf={class:"row"},nf={class:"col-md-2 col-12"},af=n("i",{class:"fa-regular fa-comment-dots",style:{"margin-right":"10px"}},null,-1),of={class:"col-md-10 col-12"},sf={class:"input-group mb-3"},lf={key:0,class:"row"},rf={class:"col-md-12"},df={class:"table"},uf=n("thead",null,[n("tr",null,[n("th",{class:"text-center",scope:"col"},"#"),n("th",{class:"text-center",scope:"col"},"Текст диалога"),n("th",{class:"text-center",scope:"col"},"Цепочки"),n("th",{class:"text-center",scope:"col"},"Текст успеха"),n("th",{class:"text-center",scope:"col"},"Текст ошибки"),n("th",{class:"text-center",scope:"col"},"Канал результата"),n("th",{class:"text-center",scope:"col"},"Флаги"),n("th",{class:"text-center",scope:"col"},"Сохранить в"),n("th",{class:"text-center",scope:"col"},"Есть изображения"),n("th",{class:"text-center",scope:"col"},"Есть паттерны"),n("th",{class:"text-center",scope:"col"},"Пустой"),n("th",{class:"text-center",scope:"col"},"Есть кнопки"),n("th",{class:"text-center",scope:"col"},"Есть меню"),n("th",{class:"text-center",scope:"col"},"Команды")])],-1),cf={scope:"row"},mf={class:"text-center"},hf=["onClick"],pf={class:"text-center"},_f={key:0,class:"badge bg-primary"},vf={key:1},ff=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),bf=[ff],gf={class:"text-center"},yf={key:0},kf={key:1},$f=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),wf=[$f],Cf={class:"text-center"},Ff={key:0},Tf={key:1},Df=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Pf=[Df],Sf={class:"text-center"},Of={key:0},Mf={key:1},Af=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),jf=[Af],Uf={class:"text-center"},Vf={key:0},Yf={class:"badge bg-primary"},Rf={key:1},xf=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Bf=[xf],If={class:"text-center"},Nf={key:0},Ef={key:1},qf=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Lf=[qf],Wf={class:"text-center"},Hf={key:0,class:"fa-solid fa-check text-success"},zf={key:1,class:"fa-solid fa-xmark text-danger"},Qf={class:"text-center"},Xf={key:0},Kf={key:1},Zf=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Gf=[Zf],Jf={class:"text-center"},eb={key:0,class:"fa-solid fa-check text-success"},tb={key:1,class:"fa-solid fa-xmark text-danger"},nb={class:"text-center"},ab={key:0,class:"fa-solid fa-check text-success"},ob={key:1,class:"fa-solid fa-xmark text-danger"},sb={class:"text-center"},lb={key:0,class:"fa-solid fa-check text-success"},ib={key:1,class:"fa-solid fa-xmark text-danger"},rb={class:"text-center"},db={class:"dropdown"},ub=["disabled"],cb=n("i",{class:"fa-solid fa-ellipsis"},null,-1),mb=[cb],hb={class:"dropdown-menu"},pb=["onClick"],_b=n("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),vb=n("hr",null,null,-1),fb=["onClick"],bb=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),gb=["onClick"],yb=n("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),kb={key:1,class:"row"},$b=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"}," Не найдено ни одного диалога! ")],-1),wb=[$b],Cb={class:"modal fade",id:"dialog-command-modal-editor",tabindex:"-1"},Fb={class:"modal-dialog modal-fullscreen"},Tb={class:"modal-content"},Db=n("div",{class:"modal-header"},[n("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Создание диалогового сообщения "),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Pb={class:"modal-body"},Sb=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Ob={data(){return{bot:null,selected:null,loading:!0,dialog_commands:[],search:null,dialog_commands_paginate_object:null}},computed:{...Le(["getDialogCommands","getCurrentBot","getDialogCommandsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadDialogs()})},methods:{openEditor(t){this.loading=!0,this.$nextTick(()=>{this.selected=t,this.loading=!1})},removeCommand(t){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно удалена!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},duplicate(t){this.loading=!0,this.$store.dispatch("duplicateDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно продублирована!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},selectDialog(t){this.$emit("select-dialog",t),this.$notify("Вы выбрали диалог из списка!")},nextDialogs(t){this.loadDialogs(t)},selectElement(t){this.loading=!0,this.$nextTick(()=>{this.selected=this.dialog_commands.find(e=>e.id===t)||null,this.loading=!1})},loadDialogs(t=0){this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{const a=this.selected;this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject,this.loading=!0,this.$nextTick(()=>{a&&(this.selected=this.dialog_commands.find(o=>o.id===a.id)||null),this.loading=!1})}).catch(()=>{this.loading=!1})}}},Mb=Object.assign(Ob,{__name:"BotDialogGroupList",setup(t){return(e,a)=>(r(),d(E,null,[n("div",tf,[n("div",nf,[n("button",{type:"button",onClick:a[0]||(a[0]=o=>e.openEditor(null)),"data-bs-toggle":"modal","data-bs-target":"#dialog-command-modal-editor",class:"btn btn-outline-success mb-2 w-100"},[af,T("Новый диалог ")])]),n("div",of,[n("div",sf,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск диалога","aria-label":"Поиск диалога","onUpdate:modelValue":a[1]||(a[1]=o=>e.search=o),"aria-describedby":"button-addon2"},null,512),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[2]||(a[2]=o=>e.loadDialogs(0)),type:"button",id:"button-addon2"},"Найти ")])])]),e.dialog_commands.length>0?(r(),d("div",lf,[n("div",rf,[n("table",df,[uf,n("tbody",null,[(r(!0),d(E,null,oe(e.dialog_commands,(o,s)=>(r(),d("tr",null,[n("th",cf,C(o.id),1),n("td",mf,[n("a",{"data-bs-toggle":"modal",onClick:l=>e.openEditor(o),"data-bs-target":"#dialog-command-modal-editor",href:"javascript:void(0)"},C(o.pre_text||"-"),9,hf)]),n("td",pf,[o.next_bot_dialog_command_id?(r(),d("span",_f,"#"+C(o.next_bot_dialog_command_id||"-")+" ("+C(o.chain.length||0)+")",1)):(r(),d("span",vf,bf))]),n("td",gf,[o.post_text?(r(),d("p",yf,C(o.post_text),1)):(r(),d("p",kf,wf))]),n("td",Cf,[o.error_text?(r(),d("p",Ff,C(o.error_text),1)):(r(),d("p",Tf,Pf))]),n("td",Sf,[o.result_channel?(r(),d("p",Of,C(o.result_channel),1)):(r(),d("p",Mf,jf))]),n("td",Uf,[o.result_flags.length>0?(r(),d("p",Vf,[(r(!0),d(E,null,oe(o.result_flags,l=>(r(),d("span",Yf,C(l||"-"),1))),256))])):(r(),d("p",Rf,Bf))]),n("td",If,[o.store_to?(r(),d("p",Nf,C(o.store_to),1)):(r(),d("p",Ef,Lf))]),n("td",Wf,[o.images.length>0?(r(),d("i",Hf)):(r(),d("i",zf))]),n("td",Qf,[o.input_pattern?(r(),d("p",Xf,C(o.input_pattern),1)):(r(),d("p",Kf,Gf))]),n("td",Jf,[o.is_empty?(r(),d("i",eb)):(r(),d("i",tb))]),n("td",nb,[o.inline_keyboard_id!=null?(r(),d("i",ab)):(r(),d("i",ob))]),n("td",sb,[o.reply_keyboard_id!=null?(r(),d("i",lb)):(r(),d("i",ib))]),n("td",rb,[n("div",db,[n("button",{disabled:e.loading,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},mb,8,ub),n("ul",hb,[n("li",null,[n("a",{onClick:l=>e.selectDialog(o),title:"Выбрать диалог",class:"dropdown-item cursor-pointer"},[_b,T(" Выбрать диалог ")],8,pb)]),vb,n("li",null,[n("a",{title:"Дублирование команды",onClick:l=>e.duplicate(o.id),class:"dropdown-item cursor-pointer"},[bb,T(" Дублирование диалога ")],8,fb)]),n("li",null,[n("a",{onClick:l=>e.removeCommand(o.id),title:"Удаление команды",class:"dropdown-item cursor-pointer"},[yb,T(" Удаление диалога ")],8,gb)])])])])]))),256))])]),e.dialog_commands_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",kb,wb)),n("div",Cb,[n("div",Fb,[n("div",Tb,[Db,n("div",Pb,[e.bot&&!e.loading?(r(),me(ef,{key:0,item:e.selected,onCallback:e.loadDialogs,onSelectElement:e.selectElement,bot:e.bot},null,8,["item","onCallback","onSelectElement","bot"])):c("",!0)]),Sb])])])],64))}}),Ab=n("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),jb=n("h6",null,"Блок условий",-1),Ub={key:0,class:"py-2"},Vb={class:"form-label",id:"bot-domain"},Yb=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Rb=n("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),xb={class:"dropdown mb-2"},Bb=n("button",{class:"btn btn-outline-info dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить условие ",-1),Ib={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Nb=["onClick"],Eb={key:1},qb={key:2,class:"list-group"},Lb={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},Wb={class:"form-check"},Hb={class:"form-check-label",for:"bot-user-is-vip"},zb={key:0},Qb={key:1},Xb=n("i",{class:"fa-solid fa-trash-can"},null,-1),Kb=[Xb],Zb={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},Gb={class:"form-check"},Jb={class:"form-check-label",for:"bot-user-is-admin"},eg={key:0},tg={key:1},ng=n("i",{class:"fa-solid fa-trash-can"},null,-1),ag=[ng],og={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},sg={class:"form-check"},lg={class:"form-check-label",for:"bot-user-is-deliveryman"},ig={key:0},rg={key:1},dg=n("i",{class:"fa-solid fa-trash-can"},null,-1),ug=[dg],cg={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},mg={class:"form-check"},hg={class:"form-check-label",for:"bot-user-is-work"},pg={key:0},_g={key:1},vg=n("i",{class:"fa-solid fa-trash-can"},null,-1),fg=[vg],bg={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},gg={class:"form-check"},yg={class:"form-check-label",for:"bot-user-in-location"},kg={key:0},$g={key:1},wg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Cg=[wg],Fg={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},Tg=n("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),Dg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Pg=[Dg],Sg={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},Og=n("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),Mg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Ag=[Mg],jg={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},Ug={class:"form-check"},Vg={class:"form-check-label",for:"bot-user-sex"},Yg={key:0},Rg={key:1},xg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Bg=[xg],Ig={key:8,class:"list-group-item"},Ng={class:"mb-3"},Eg={class:"d-flex justify-content-between align-items-center"},qg={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},Lg=["onClick"],Wg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Hg=[Wg],zg=["onUpdate:modelValue"],Qg={key:3,class:"mt-5"},Xg={key:4,class:"d-flex justify-content-between"},Kg={key:6,class:"py-2"},Zg={class:"form-label",id:"bot-domain"},Gg=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Jg=n("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),e1={props:["bot","rulesForm"],data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},computed:{rulesForCustomFields(){let t=this.rules.filter(e=>e.key!=null);return console.log("filtered rules",t),t}},mounted(){},methods:{hasRuleKey(t){return this.rulesForm.rules_if==null?!1:(console.log("key=>",t||"-"),Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===t)!=null)},modifyChannel(t){this.rulesForm.rules_if.channels[t.param]=t.text},removeChannelFromRule(t){this.rulesForm.rules_if.channels.splice(t,1)},removeRule(t){delete this.rulesForm.rules_if.bot_user[t]},addRules(t){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),t.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...t.rule}),t.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(t.rule.channel)},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{(t.data||[]).forEach(a=>{a.is_active&&(this.rules.push({id:this.rules.length+1,title:a.label,key:a.key,type:a.type,rules_block:"bot_user",rule:{}}),a.type===0&&(this.rules[this.rules.length-1].rule[a.key]=""),a.type===1&&(this.rules[this.rules.length-1].rule[a.key]=0),a.type===2&&(this.rules[this.rules.length-1].rule[a.key]=!0))}),console.log("new rules=>",this.rules)})},attachPageToRule(t){t.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=t.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})}}},t1=Object.assign(e1,{__name:"PageRules",setup(t){return(e,a)=>{const o=Vt("Popper");return r(),d(E,null,[Ab,jb,t.rulesForm.rules_if?(r(),d("div",Ub,[n("label",Vb,[le(o,null,{content:q(()=>[Rb]),default:q(()=>[Yb]),_:1}),T(" Сообщение при успешном прохождении условий (не обязательно) ")]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":a[0]||(a[0]=s=>t.rulesForm.rules_if_message=s),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[X,t.rulesForm.rules_if_message]])])):c("",!0),n("div",xb,[Bb,n("ul",Ib,[(r(!0),d(E,null,oe(e.rules,s=>(r(),d("li",null,[n("a",{onClick:l=>e.addRules(s),class:"dropdown-item",href:"javascript:void(0)"},C(s.title||"Не указан"),9,Nb)]))),256))])]),t.rulesForm.rules_if?(r(),d("h6",Eb,"Выбранные условия")):c("",!0),t.rulesForm.rules_if?(r(),d("ul",qb,[e.hasRuleKey("is_vip")?(r(),d("li",Lb,[n("div",Wb,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[1]||(a[1]=s=>t.rulesForm.rules_if.bot_user.is_vip=s),type:"checkbox",id:"bot-user-is-vip"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.is_vip]]),n("label",Hb,[t.rulesForm.rules_if.bot_user.is_vip?(r(),d("span",zb,"Является VIP-пользователем")):(r(),d("span",Qb,"Не является VIP-пользователем"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[2]||(a[2]=s=>e.removeRule("is_vip"))},Kb)])):c("",!0),e.hasRuleKey("is_admin")?(r(),d("li",Zb,[n("div",Gb,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[3]||(a[3]=s=>t.rulesForm.rules_if.bot_user.is_admin=s),type:"checkbox",id:"bot-user-is-admin"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.is_admin]]),n("label",Jb,[t.rulesForm.rules_if.bot_user.is_admin?(r(),d("span",eg,"Является администратором")):(r(),d("span",tg,"Не является администратором"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[4]||(a[4]=s=>e.removeRule("is_admin"))},ag)])):c("",!0),e.hasRuleKey("is_deliveryman")?(r(),d("li",og,[n("div",sg,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[5]||(a[5]=s=>t.rulesForm.rules_if.bot_user.is_deliveryman=s),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.is_deliveryman]]),n("label",lg,[t.rulesForm.rules_if.bot_user.is_deliveryman?(r(),d("span",ig,"Является доставщиком")):(r(),d("span",rg,"Не является доставщиком"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[6]||(a[6]=s=>e.removeRule("is_deliveryman"))},ug)])):c("",!0),e.hasRuleKey("is_work")?(r(),d("li",cg,[n("div",mg,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[7]||(a[7]=s=>t.rulesForm.rules_if.bot_user.is_work=s),type:"checkbox",id:"bot-user-is-work"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.is_work]]),n("label",hg,[t.rulesForm.rules_if.bot_user.is_work?(r(),d("span",pg,"За работой")):(r(),d("span",_g,"Не работает"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[8]||(a[8]=s=>e.removeRule("is_work"))},fg)])):c("",!0),e.hasRuleKey("user_in_location")?(r(),d("li",bg,[n("div",gg,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[9]||(a[9]=s=>t.rulesForm.rules_if.bot_user.user_in_location=s),type:"checkbox",id:"bot-user-in-location"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.user_in_location]]),n("label",yg,[t.rulesForm.rules_if.bot_user.user_in_location?(r(),d("span",kg,"Находится в заведении")):(r(),d("span",$g,"Не находится в заведении"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[10]||(a[10]=s=>e.removeRule("user_in_location"))},Cg)])):c("",!0),e.hasRuleKey("age")?(r(),d("li",Fg,[n("div",null,[Tg,$(n("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":a[11]||(a[11]=s=>t.rulesForm.rules_if.bot_user.age=s),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[X,t.rulesForm.rules_if.bot_user.age]])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[12]||(a[12]=s=>e.removeRule("age"))},Pg)])):c("",!0),e.hasRuleKey("city")?(r(),d("li",Sg,[n("div",null,[Og,$(n("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":a[13]||(a[13]=s=>t.rulesForm.rules_if.bot_user.city=s),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[X,t.rulesForm.rules_if.bot_user.city]])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[14]||(a[14]=s=>e.removeRule("city"))},Ag)])):c("",!0),e.hasRuleKey("sex")?(r(),d("li",jg,[n("div",Ug,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[15]||(a[15]=s=>t.rulesForm.rules_if.bot_user.sex=s),type:"checkbox",id:"bot-user-sex"},null,512),[[Oe,t.rulesForm.rules_if.bot_user.sex]]),n("label",Vg,[t.rulesForm.rules_if.bot_user.sex?(r(),d("span",Yg,"Только для мужчин")):(r(),d("span",Rg,"Только для женщин"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:a[16]||(a[16]=s=>e.removeRule("sex"))},Bg)])):c("",!0),t.rulesForm.rules_if.channels.length>0?(r(),d("li",Ig,[T("Проверка нахождения в канале \\ группе: "),(r(!0),d(E,null,oe(t.rulesForm.rules_if.channels,(s,l)=>(r(),d("div",Ng,[n("div",Eg,[n("label",qg,[le(qn,{token:t.bot.bot_token,param:`${l}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),T(" Канал для проверки ")]),n("button",{type:"button",class:"btn btn-link text-danger",onClick:i=>e.removeChannelFromRule(l)},Hg,8,Lg)]),$(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":i=>t.rulesForm.rules_if.channels[l]=i,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,zg),[[X,t.rulesForm.rules_if.channels[l]]])]))),256))])):c("",!0)])):c("",!0),t.rulesForm.rules_if?(r(),d("h6",Qg,"Иначе")):c("",!0),t.rulesForm.rules_else_page_id?(r(),d("p",Xg,[T("Вы выбрали страницу #"+C(t.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),n("a",{href:"javascript:void(0)",onClick:a[17]||(a[17]=s=>t.rulesForm.rules_else_page_id=null)},"Очистить")])):c("",!0),t.rulesForm.rules_if?(r(),me($a,{key:5,current:t.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):c("",!0),t.rulesForm.rules_if?(r(),d("div",Kg,[n("label",Zg,[le(o,null,{content:q(()=>[Jg]),default:q(()=>[Gg]),_:1}),T(" Сообщение в случае невыполнения условий (не обязательно) ")]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":a[18]||(a[18]=s=>t.rulesForm.rules_else_message=s),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[X,t.rulesForm.rules_else_message]])])):c("",!0)],64)}}});const n1={key:0,class:"row"},a1={class:"col-12 mb-2"},o1=n("h6",null,"На странице выбраны следующие разделы",-1),s1={class:"mini-pics justify-content-start d-inline-flex"},l1=n("i",{class:"fa-regular fa-images"},null,-1),i1=[l1],r1=n("i",{class:"fa-regular fa-note-sticky"},null,-1),d1=[r1],u1=n("i",{class:"fa-solid fa-photo-film"},null,-1),c1=[u1],m1=n("i",{class:"fa-regular fa-file-audio"},null,-1),h1=[m1],p1=n("i",{class:"fa-regular fa-file-word"},null,-1),_1=[p1],v1=n("i",{class:"fa-solid fa-link"},null,-1),f1=[v1],b1=n("i",{class:"fa-solid fa-scroll"},null,-1),g1=[b1],y1=n("i",{class:"fa-regular fa-comment-dots"},null,-1),k1=[y1],$1=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),w1=[$1],C1=n("i",{class:"fa-regular fa-keyboard"},null,-1),F1=[C1],T1=n("i",{class:"fa-solid fa-ellipsis"},null,-1),D1=[T1],P1={class:"row"},S1={class:"col-8 mb-2"},O1={class:"form-label",id:"bot-domain"},M1=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),A1=n("div",null,[T(" Команда должна начинаться с символа . и *"),n("br"),T(" Например: .*Меню"),n("br")],-1),j1=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),U1={class:"col-4 mb-2 d-flex justify-content-end align-items-end"},V1={class:"btn-group",style:{background:"white"},role:"group","aria-label":"Basic example"},Y1={key:0,type:"submit",title:"Сохранить страницу",class:"btn btn-primary min-menu-btn"},R1=n("i",{class:"fa-regular fa-floppy-disk"},null,-1),x1=[R1],B1=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),I1=[B1],N1=n("button",{type:"button",title:"Список страниц","data-bs-toggle":"modal","data-bs-target":"#pages-modal",class:"btn btn-outline-primary min-menu-btn"},[n("i",{class:"fa-solid fa-list-ol"})],-1),E1={class:"col-12 mb-2"},q1={class:"form-check"},L1=n("label",{class:"form-check-label",for:"is-external"}," Внешнее управление страницей ",-1),W1={key:1,class:"row"},H1={class:"col-12 mb-2"},z1={class:"form-label d-flex justify-content-between align-items-center mb-0",id:"bot-domain"},Q1=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),X1=n("div",null,[T(" Текстовый редактор. Данный текст будет в таком"),n("br"),T(" же виде отображен в посте в телеграм. ")],-1),K1=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Z1={class:"form-floating"},G1={for:"floatingTextarea2"},J1={key:0},ey={class:"col-12 mb-2"},ty={class:"nav nav-tabs justify-content-center"},ny=n("i",{class:"fa-regular fa-keyboard"},null,-1),ay=n("span",null,"Нижнее меню",-1),oy=[ny,ay],sy=n("i",{class:"fa-solid fa-ellipsis"},null,-1),ly=n("span",null,"Меню под текстом",-1),iy=[sy,ly],ry=n("i",{class:"fa-regular fa-images"},null,-1),dy=n("span",null,"Изображения",-1),uy=[ry,dy],cy=n("i",{class:"fa-solid fa-photo-film"},null,-1),my=n("span",null,"Видео",-1),hy=[cy,my],py=n("i",{class:"fa-regular fa-note-sticky"},null,-1),_y=n("span",null,"Стикеры",-1),vy=[py,_y],fy=n("i",{class:"fa-regular fa-file-audio"},null,-1),by=n("span",null,"Аудио",-1),gy=[fy,by],yy=n("i",{class:"fa-regular fa-file-word"},null,-1),ky=n("span",null,"Документы",-1),$y=[yy,ky],wy=n("i",{class:"fa-solid fa-link"},null,-1),Cy=n("span",null,"Другая страница",-1),Fy=[wy,Cy],Ty=n("i",{class:"fa-solid fa-scroll"},null,-1),Dy=n("span",null,"Скрипт",-1),Py=[Ty,Dy],Sy=n("i",{class:"fa-regular fa-comment-dots"},null,-1),Oy=n("span",null,"Начало диалога",-1),My=[Sy,Oy],Ay=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),jy=n("span",null,"Правила",-1),Uy=[Ay,jy],Vy={key:0},Yy={key:0,class:"col-12 mb-2"},Ry={class:"form-check"},xy=n("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),By={key:1,class:"col-12 mb-2"},Iy={class:"card"},Ny={class:"card-header d-flex justify-between align-items-center"},Ey=n("h6",null,"Конструктор нижнего меню",-1),qy={key:0},Ly={key:1},Wy={class:"card-body"},Hy={class:"row"},zy={class:"col-12 mb-2"},Qy={class:"form-label",id:"bot-domain"},Xy=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ky=n("div",null," Заголовок для нижнего меню ",-1),Zy={key:2,class:"col-12 mb-2"},Gy={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Jy={class:"d-flex justify-content-center mb-3"},e0={alt:"",width:"100",height:"100"},t0=n("h1",{class:"text-body-emphasis"},"Нижнее меню",-1),n0=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Создание и настройка нижнего меню страницы бота. Добавление и редактирование функций кнопок бота на странице. Данное меню отображается пользователю всегда. ",-1),a0={class:"d-inline-flex gap-2 mb-5"},o0=["disabled"],s0=n("a",{href:"https://telegra.ph/Nizhnee-menyu-bota-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),l0={key:1},i0={key:0,class:"col-12 mb-2"},r0={class:"form-check"},d0=n("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),u0={key:1,class:"col-12 mb-2"},c0={class:"card"},m0={class:"card-header d-flex justify-between align-items-center"},h0=n("h6",null,"Конструктор меню в сообщении",-1),p0={key:0},_0={key:1},v0={class:"card-body"},f0={key:2,class:"col-12 mb-2"},b0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},g0={class:"d-flex justify-content-center mb-3"},y0={alt:"",width:"100",height:"100"},k0=n("h1",{class:"text-body-emphasis"},"Меню под текстом",-1),$0=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," В отличии от нижнего меню, которое отображается всегда, меню под текстом показывается под контентом только в момент отображения этого контента. ",-1),w0={class:"d-inline-flex gap-2 mb-5"},C0=["disabled"],F0=n("a",{href:"https://telegra.ph/Menyu-k-tekstu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),T0={key:2},D0={key:0,class:"col-12 mb-2"},P0={class:"form-check"},S0=n("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),O0={key:1,class:"col-12 mb-2"},M0={class:"card mb-3"},A0=n("div",{class:"card-header"},[n("h6",null,"Загрузите изображения с файловой системы")],-1),j0={class:"card-body d-flex justify-content-start"},U0={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},V0={class:"row"},Y0={key:0,class:"col-12 d-flex flex-wrap"},R0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},x0={class:"remove"},B0=["onClick"],I0={key:1},N0={key:2,class:"col-12 d-flex flex-wrap"},E0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},q0={class:"remove"},L0=["onClick"],W0={key:2,class:"col-12 mb-2"},H0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},z0={class:"d-flex justify-content-center mb-3"},Q0={alt:"",width:"100",height:"100"},X0=n("h1",{class:"text-body-emphasis"},"Изображения",-1),K0=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[T(" Вы можете добавить к одной странице от "),n("b",null,"1"),T(" до "),n("b",null,"10"),T(" изображений. Изображения (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. Если изображение одно, то текст будет отображен под ним. ")],-1),Z0={class:"d-inline-flex gap-2 mb-5"},G0=["disabled"],J0=n("a",{href:"https://telegra.ph/Dobavlenie-izobrazhenij-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),ek={key:3},tk={key:0,class:"col-12 mb-2"},nk={class:"form-check"},ak=n("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),ok={key:1,class:"col-12 mb-2"},sk={key:2,class:"col-12 mb-2"},lk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},ik={class:"d-flex justify-content-center mb-3"},rk={alt:"",width:"100",height:"100"},dk=n("h1",{class:"text-body-emphasis"},"Видео",-1),uk=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[T(" Вы можете добавить к одной странице от "),n("b",null,"1"),T(" до "),n("b",null,"10"),T(" видео. Ролики (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. ")],-1),ck={class:"d-inline-flex gap-2 mb-5"},mk=["disabled"],hk=n("a",{href:"https://telegra.ph/Dobavlenie-video-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),pk={key:4},_k={key:0,class:"col-12 mb-2"},vk={class:"form-check"},fk=n("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),bk={key:1,class:"col-12 mb-2"},gk={key:2,class:"col-12 mb-2"},yk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},kk={class:"d-flex justify-content-center mb-3"},$k={alt:"",width:"100",height:"100"},wk=n("h1",{class:"text-body-emphasis"},"Стикеры",-1),Ck=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете переслать любой стикер в бота (от лица администратора) и затем этот стикер использовать для взаимодействия с пользователем. ",-1),Fk={class:"d-inline-flex gap-2 mb-5"},Tk=["disabled"],Dk=n("a",{href:"https://telegra.ph/Dobavlenie-stikera-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Pk={key:5},Sk={key:0,class:"col-12 mb-2"},Ok={class:"form-check"},Mk=n("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),Ak={key:1,class:"col-12 mb-2"},jk={key:2,class:"col-12 mb-2"},Uk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Vk={class:"d-flex justify-content-center mb-3"},Yk={alt:"",width:"100",height:"100"},Rk=n("h1",{class:"text-body-emphasis"},"Аудио",-1),xk=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[T(" Вы можете добавить к одной странице от "),n("b",null,"1"),T(" до "),n("b",null,"10"),T(" аудио. Музыка (от 2х) будет собрана в группу и показана под текстовым содержимым страницы. Если вы хотите использовать "),n("b",{class:"text-danger"},"голосовое"),T(", то можно использовать максимум "),n("b",{class:"text-danger"},"одну запись"),T(". Или же, вы можете конвертировать её в mp3 и залить как музыкальный файл в бота. ")],-1),Bk={class:"d-inline-flex gap-2 mb-5"},Ik=["disabled"],Nk=n("a",{href:"https://telegra.ph/Dobavlenie-audio-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Ek={key:6},qk={key:0,class:"col-12 mb-2"},Lk={class:"form-check"},Wk=n("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),Hk={key:1,class:"col-12 mb-2"},zk={key:2,class:"col-12 mb-2"},Qk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Xk={class:"d-flex justify-content-center mb-3"},Kk={alt:"",width:"100",height:"100"},Zk=n("h1",{class:"text-body-emphasis"},"Документы",-1),Gk=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[T(" Вы можете добавить к одной странице от "),n("b",null,"1"),T(" до "),n("b",null,"10"),T(" документов. Документы (от 2х) будут собраны в группу и показана под текстовым содержимым страницы. В качестве файлов вы можете использовать текстовые документы, презентации, файлы-pdf, изображения в оригинальном размере. ")],-1),Jk={class:"d-inline-flex gap-2 mb-5"},e2=["disabled"],t2=n("a",{href:"https://telegra.ph/Dobavlenie-dokumenta-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),n2={key:7},a2={key:0,class:"col-12 mb-2"},o2={class:"form-check"},s2=n("label",{class:"form-check-label",for:"need-page-attach"}," Связать с другой страницей ",-1),l2={key:1,class:"col-12 mb-2"},i2={key:0},r2={key:2,class:"col-12 mb-2"},d2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},u2={class:"d-flex justify-content-center mb-3"},c2={alt:"",width:"100",height:"100"},m2=n("h1",{class:"text-body-emphasis"},"Связь со страницей",-1),h2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете привязать вызов другой страницы непосредственно после вызова текущей. Это позволит выводить контент по цепочке для пользователя. ",-1),p2={class:"d-inline-flex gap-2 mb-5"},_2=["disabled"],v2=n("a",{href:"https://telegra.ph/Svyazyvanie-so-stranicej-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),f2={key:8},b2={key:0,class:"col-12 mb-2"},g2={class:"form-check"},y2=n("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),k2={key:1,class:"col-12 mb-2"},$2={key:0},w2={key:2,class:"col-12 mb-2"},C2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},F2={class:"d-flex justify-content-center mb-3"},T2={alt:"",width:"100",height:"100"},D2=n("h1",{class:"text-body-emphasis"},"Скрипты",-1),P2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Скрипты содержат основной функционал системы. Вы можете к каждой странице привязать один скрипт, который будет вызван после вывода основного содержимого страницы. ",-1),S2={class:"d-inline-flex gap-2 mb-5"},O2=["disabled"],M2=n("a",{href:"https://telegra.ph/Svyazyvanie-so-skriptom-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),A2={key:9},j2={key:0,class:"col-12 mb-2"},U2={class:"form-check"},V2=n("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),Y2={key:1,class:"col-12 mb-2"},R2={key:0},x2={key:2,class:"col-12 mb-2"},B2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},I2={class:"d-flex justify-content-center mb-3"},N2={alt:"",width:"100",height:"100"},E2=n("h1",{class:"text-body-emphasis"},"Диалоги",-1),q2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Диалоги страницы - это инструмент запроса данных от пользователя. Вы можете привязать начало диалога к странице, а сам диалог будет вызван по цепочке. ",-1),L2={class:"d-inline-flex gap-2 mb-5"},W2=["disabled"],H2=n("a",{href:"https://telegra.ph/Dobavlenie-dialoga-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),z2={key:10},Q2={key:0,class:"col-12 mb-2"},X2={class:"form-check"},K2=n("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),Z2={key:1,class:"col-12 mb-2"},G2={key:2,class:"col-12 mb-2"},J2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},e$={class:"d-flex justify-content-center mb-3"},t$={alt:"",width:"100",height:"100"},n$=n("h1",{class:"text-body-emphasis"},"Правила отображения страницы",-1),a$=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете создать правила, согласно которым будет отображена та или иная страница. Вы можете перенаправить пользователя с одной страницы на другую, в случае если ваше условие не выполнено. ",-1),o$={class:"d-inline-flex gap-2 mb-5"},s$=["disabled"],l$=n("a",{href:"https://telegra.ph/Pravila-na-stranice-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),i$={class:"modal fade",id:"save-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r$={class:"modal-dialog"},d$={class:"modal-content"},u$=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalLabel"},"Сохранение страницы"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),c$={class:"modal-body"},m$={key:0,class:"row"},h$={class:"col-12 mb-2"},p$={class:"d-flex justify-between"},_$={class:"col-12 mb-2"},v$=n("h6",null,"На странице выбраны следующие разделы",-1),f$={class:"mini-pics"},b$=n("i",{class:"fa-regular fa-images"},null,-1),g$=[b$],y$=n("i",{class:"fa-regular fa-note-sticky"},null,-1),k$=[y$],$$=n("i",{class:"fa-solid fa-photo-film"},null,-1),w$=[$$],C$=n("i",{class:"fa-regular fa-file-audio"},null,-1),F$=[C$],T$=n("i",{class:"fa-regular fa-file-word"},null,-1),D$=[T$],P$=n("i",{class:"fa-solid fa-link"},null,-1),S$=[P$],O$=n("i",{class:"fa-solid fa-scroll"},null,-1),M$=[O$],A$=n("i",{class:"fa-regular fa-comment-dots"},null,-1),j$=[A$],U$=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),V$=[U$],Y$=n("i",{class:"fa-regular fa-keyboard"},null,-1),R$=[Y$],x$=n("i",{class:"fa-solid fa-ellipsis"},null,-1),B$=[x$],I$={key:0,class:"col-12 mb-2"},N$={class:"form-check"},E$=n("label",{class:"form-check-label",for:"need-show-qr-and-link"}," Показать ссылку на страницу и QR-код ",-1),q$={key:1,class:"col-12 mb-2"},L$={class:"d-flex justify-content-center"},W$={style:{width:"200px",height:"200px"}},H$={class:"col-12 mb-2"},z$={class:"form-label",id:"bot-domain"},Q$=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),X$=n("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять Вас. ",-1),K$=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Z$=n("div",{class:"col-12"},[n("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Сохранить ")],-1),G$=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Не сохранять")],-1),J$={class:"modal fade",id:"pages-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ew={class:"modal-dialog"},tw={class:"modal-content"},nw={class:"modal-body"},aw={data(){return{tab:0,saveModal:null,page:null,need_show_qr_and_link:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,showMenu:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,need_rules:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,videos:[],images:[],audios:[],documents:[],sticker:null,reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_page_images:function(t,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_audios:function(t,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(t,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(t,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_video:function(t,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(t,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_rules:function(t,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_reply_menu:function(t,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(t,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(t,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(t,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(t){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{...Le(["getCurrentBot"]),qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},hasParts(){return this.need_page_sticker||this.need_page_audios||this.need_page_documents||this.need_page_video||this.need_page_images||this.need_inline_menu||this.need_reply_menu||this.need_attach_page||this.need_attach_dialog||this.need_attach_slug||this.need_rules},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let t="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)t+="0";return t+=this.pageForm.id,"https://t.me/"+this.getCurrentBot.bot_domain+"?start="+btoa("004"+t)}},mounted(){this.page?this.preparePageForm():this.clearForm(),this.loadCurrentBot().then(()=>{this.saveModal=new bootstrap.Modal(document.getElementById("save-modal"),{})})},methods:{preparePageForm(){let t=this.page;this.photos=[],this.pageForm={id:t.id,slug_id:t.slug?t.slug.id:null,content:t.content,command:t.slug?t.slug.command:null,slug:t.slug?t.slug.slug:null,comment:t.slug?t.slug.comment:null,images:t.images||[],sticker:t.sticker||null,reply_keyboard_title:t.reply_keyboard_title||null,reply_keyboard_id:t.reply_keyboard_id||null,inline_keyboard_id:t.inline_keyboard_id||null,reply_keyboard:t.replyKeyboard||null,inline_keyboard:t.inlineKeyboard||null,next_page_id:t.next_page_id||null,next_bot_dialog_command_id:t.next_bot_dialog_command_id||null,next_bot_menu_slug_id:t.next_bot_menu_slug_id||null,is_external:t.is_external||!1,rules_if:t.rules_if||null,rules_else_page_id:t.rules_else_page_id||null,audios:t.audios||[],documents:t.documents||[],videos:t.videos||[],rules_if_message:t.rules_if_message||null,rules_else_message:t.rules_else_message||null}},copyToClipBoard(t){navigator.clipboard.writeText(t).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},associateDialog(t){this.pageForm.next_bot_dialog_command_id=t.id},associateSlug(t){this.pageForm.next_bot_menu_slug_id=t.id},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},attachPage(t){t.id!=this.pageForm.id?this.pageForm.next_page_id=t.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},injectContent(t){this.pageForm.content?this.pageForm.content+=t.text:this.pageForm.content=t.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard:null,inline_keyboard:null,is_external:!1,videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_images=!1,this.need_page_video=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.need_page_sticker=!1,this.$nextTick(()=>{this.need_clean=!1})},openSaveModal(){this.saveModal.show()},submitPage(){let t=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const a=this.pageForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:t}).then(e=>{this.pageForm.id==null&&(this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()})),this.saveModal.hide(),this.$emit("callback",e.data),this.$notify({title:"Конструктор ботов",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"}),this.pageForm.id!=null&&this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id},page:localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0})}).catch(e=>{})},saveInlineKeyboard(t){this.pageForm.inline_keyboard=t},selectReplyKeyboard(t){this.pageForm.reply_keyboard=t,this.showReplyTemplateSelector=!1},selectInlineKeyboard(t){this.pageForm.inline_keyboard=t,this.showInlineTemplateSelector=!1},saveReplyKeyboard(t){this.pageForm.reply_keyboard=t},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t){this.photos.splice(t,1)},removeImage(t){this.pageForm.images.splice(t,1)},onChangePhotos(t){const e=t.target.files;for(let a=0;a<e.length;a++)this.photos.push(e[a])},onChange(t){this.pageForm.content=t},selectPhoto(t){this.pageForm.images||(this.pageForm.images=[]);let e=this.pageForm.images.indexOf(t.file_id);e!==-1?this.pageForm.images.splice(e,1):this.pageForm.images.push(t.file_id)},selectSticker(t){this.pageForm.sticker=t.file_id},selectVideo(t){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(t.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(t.file_id)},selectAudio(t){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(t.file_id);if(t.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[t.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(t.file_id)},selectDocument(t){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(t.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(t.file_id)},pageListCallback(t){this.load=!0,this.page=t,this.preparePageForm(),this.$nextTick(()=>{this.load=!1})}}},rU=Object.assign(aw,{__name:"Page",setup(t){return(e,a)=>{const o=Vt("Popper"),s=On("lazy");return r(),d(E,null,[e.bot?(r(),d("form",{key:0,id:"page-construct",onSubmit:a[44]||(a[44]=De((...l)=>e.openSaveModal&&e.openSaveModal(...l),["prevent"]))},[e.hasParts?(r(),d("div",n1,[n("div",a1,[o1,n("ul",s1,[n("li",{title:"Изображения",class:I({active:e.need_page_images})},i1,2),n("li",{title:"Стикеры",class:I({active:e.need_page_sticker})},d1,2),n("li",{title:"Видео",class:I({active:e.need_page_video})},c1,2),n("li",{title:"Аудио",class:I({active:e.need_page_audios})},h1,2),n("li",{title:"Документы",class:I({active:e.need_page_documents})},_1,2),n("li",{title:"Страницы",class:I({active:e.need_attach_page})},f1,2),n("li",{title:"Скрипты",class:I({active:e.need_attach_slug})},g1,2),n("li",{title:"Диалоги",class:I({active:e.need_attach_dialog})},k1,2),n("li",{title:"Правила",class:I({active:e.need_rules})},w1,2),n("li",{title:"Нижнее меню",class:I({active:e.need_reply_menu})},F1,2),n("li",{title:"Текстовое меню",class:I({active:e.need_inline_menu})},D1,2)])])])):c("",!0),n("div",P1,[n("div",S1,[n("label",O1,[le(o,null,{content:q(()=>[A1]),default:q(()=>[M1]),_:1}),T(" Команда "),j1]),$(n("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":a[0]||(a[0]=l=>e.pageForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[X,e.pageForm.command]])]),n("div",U1,[n("div",V1,[e.pageForm.id||e.need_clean?(r(),d("button",Y1,x1)):c("",!0),e.pageForm.id||e.need_clean?(r(),d("button",{key:1,type:"button",onClick:a[1]||(a[1]=(...l)=>e.clearForm&&e.clearForm(...l)),title:"Очистить \\ Новая страница",class:"btn btn-outline-primary min-menu-btn"},I1)):c("",!0),N1])]),n("div",E1,[n("div",q1,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[2]||(a[2]=l=>e.pageForm.is_external=l),type:"checkbox",id:"is-external"},null,512),[[Oe,e.pageForm.is_external]]),L1])])]),e.pageForm.is_external?c("",!0):(r(),d("div",W1,[n("div",H1,[n("label",z1,[n("div",null,[le(o,null,{content:q(()=>[X1]),default:q(()=>[Q1]),_:1}),T(" Текстовое содержимое страницы "),K1]),le(Ns,{param:"content",onCallback:e.injectContent},null,8,["onCallback"])]),n("div",Z1,[$(n("textarea",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=l=>e.pageForm.content=l),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"300px"}},null,512),[[X,e.pageForm.content]]),n("label",G1,[T("Содержимое страницы "),e.pageForm.content?(r(),d("span",J1,C(e.pageForm.content.length)+"/4096 ",1)):c("",!0)])])]),n("div",ey,[n("ul",ty,[n("li",{class:"nav-item",onClick:a[4]||(a[4]=l=>e.tab=0)},[n("a",{class:I([{active:e.tab===0},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},oy,2)]),n("li",{class:"nav-item",onClick:a[5]||(a[5]=l=>e.tab=1)},[n("a",{class:I([{active:e.tab===1},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},iy,2)]),n("li",{class:"nav-item",onClick:a[6]||(a[6]=l=>e.tab=2)},[n("a",{class:I([{active:e.tab===2},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},uy,2)]),n("li",{class:"nav-item",onClick:a[7]||(a[7]=l=>e.tab=3)},[n("a",{class:I([{active:e.tab===3},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},hy,2)]),n("li",{class:"nav-item",onClick:a[8]||(a[8]=l=>e.tab=4)},[n("a",{class:I([{active:e.tab===4},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},vy,2)]),n("li",{class:"nav-item",onClick:a[9]||(a[9]=l=>e.tab=5)},[n("a",{class:I([{active:e.tab===5},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},gy,2)]),n("li",{class:"nav-item",onClick:a[10]||(a[10]=l=>e.tab=6)},[n("a",{class:I([{active:e.tab===6},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},$y,2)]),n("li",{class:"nav-item",onClick:a[11]||(a[11]=l=>e.tab=7)},[n("a",{class:I([{active:e.tab===7},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Fy,2)]),n("li",{class:"nav-item",onClick:a[12]||(a[12]=l=>e.tab=8)},[n("a",{class:I([{active:e.tab===8},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Py,2)]),n("li",{class:"nav-item",onClick:a[13]||(a[13]=l=>e.tab=9)},[n("a",{class:I([{active:e.tab===9},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},My,2)]),n("li",{class:"nav-item",onClick:a[14]||(a[14]=l=>e.tab=10)},[n("a",{class:I([{active:e.tab===10},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Uy,2)])])]),e.tab===0?(r(),d("div",Vy,[e.need_reply_menu?(r(),d("div",Yy,[n("div",Ry,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[15]||(a[15]=l=>e.need_reply_menu=l),type:"checkbox",id:"need-reply-menu"},null,512),[[Oe,e.need_reply_menu]]),xy])])):c("",!0),e.need_reply_menu?(r(),d("div",By,[n("div",Iy,[n("div",Ny,[Ey,n("button",{class:I(["btn",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:a[16]||(a[16]=l=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(r(),d("span",Ly," Скрыть шаблоны меню")):(r(),d("span",qy," Открыть шаблоны меню"))],2)]),n("div",Wy,[n("div",Hy,[n("div",zy,[n("label",Qy,[le(o,null,{content:q(()=>[Ky]),default:q(()=>[Xy]),_:1}),T(" Заголовок ")]),$(n("input",{type:"text",class:"form-control",placeholder:"Заголовок меню","aria-label":"Заголовок меню","onUpdate:modelValue":a[17]||(a[17]=l=>e.pageForm.reply_keyboard_title=l),maxlength:"255","aria-describedby":"bot-domain"},null,512),[[X,e.pageForm.reply_keyboard_title]])])]),e.showReplyTemplateSelector?(r(),me(no,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),me(Ln,{key:1,type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",Zy,[n("div",Gy,[n("div",Jy,[$(n("img",e0,null,512),[[s,"../images/icon.png"]])]),t0,n0,n("div",a0,[n("button",{disabled:e.need_reply_menu,onClick:a[18]||(a[18]=l=>e.need_reply_menu=!0),class:I([{"btn-primary":!e.need_reply_menu,"btn-outline-secondary":e.need_reply_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,o0),s0])])]))])):c("",!0),e.tab===1?(r(),d("div",l0,[e.need_inline_menu?(r(),d("div",i0,[n("div",r0,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[19]||(a[19]=l=>e.need_inline_menu=l),type:"checkbox",id:"need-inline-menu"},null,512),[[Oe,e.need_inline_menu]]),d0])])):c("",!0),e.need_inline_menu?(r(),d("div",u0,[n("div",c0,[n("div",m0,[h0,n("button",{class:I(["btn",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:a[20]||(a[20]=l=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(r(),d("span",_0," Скрыть шаблоны меню")):(r(),d("span",p0," Открыть шаблоны меню"))],2)]),n("div",v0,[e.showInlineTemplateSelector?(r(),me(no,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),me(Ln,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",f0,[n("div",b0,[n("div",g0,[$(n("img",y0,null,512),[[s,"../images/icon.png"]])]),k0,$0,n("div",w0,[n("button",{disabled:e.need_inline_menu,onClick:a[21]||(a[21]=l=>e.need_inline_menu=!0),class:I([{"btn-primary":!e.need_inline_menu,"btn-outline-secondary":e.need_inline_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,C0),F0])])]))])):c("",!0),e.tab===2?(r(),d("div",T0,[e.need_page_images?(r(),d("div",D0,[n("div",P0,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[22]||(a[22]=l=>e.need_page_images=l),type:"checkbox",id:"need-page-images"},null,512),[[Oe,e.need_page_images]]),S0])])):c("",!0),e.need_page_images?(r(),d("div",O0,[n("div",M0,[A0,n("div",j0,[n("label",U0,[T(" + "),n("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:a[23]||(a[23]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)]),n("div",V0,[e.photos.length>0?(r(),d("div",Y0,[(r(!0),d(E,null,oe(e.photos,(l,i)=>(r(),d("div",R0,[$(n("img",null,null,512),[[s,e.getPhoto(l).imageUrl]]),n("div",x0,[n("a",{onClick:u=>e.removePhoto(i)},"Удалить",8,B0)])]))),256))])):c("",!0),e.pageForm.images.length>0?(r(),d("h6",I0,"Ранее загруженные фотографии")):c("",!0),e.pageForm.images.length>0?(r(),d("div",N0,[(r(!0),d(E,null,oe(e.pageForm.images,(l,i)=>(r(),d("div",E0,[$(n("img",null,null,512),[[s,"/images-by-bot-id/"+e.bot.id+"/"+l]]),n("div",q0,[n("a",{onClick:u=>e.removeImage(i)},"Удалить",8,L0)])]))),256))])):c("",!0)])])])])):(r(),d("div",W0,[n("div",H0,[n("div",z0,[$(n("img",Q0,null,512),[[s,"../images/icon.png"]])]),X0,K0,n("div",Z0,[n("button",{disabled:e.need_page_images,onClick:a[24]||(a[24]=l=>e.need_page_images=!0),class:I([{"btn-primary":!e.need_page_images,"btn-outline-secondary":e.need_page_images},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,G0),J0])])]))])):c("",!0),e.tab===3?(r(),d("div",ek,[e.need_page_video?(r(),d("div",tk,[n("div",nk,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[25]||(a[25]=l=>e.need_page_video=l),type:"checkbox",id:"need-page-video"},null,512),[[Oe,e.need_page_video]]),ak])])):c("",!0),e.need_page_video?(r(),d("div",ok,[le(rn,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):(r(),d("div",sk,[n("div",lk,[n("div",ik,[$(n("img",rk,null,512),[[s,"../images/icon.png"]])]),dk,uk,n("div",ck,[n("button",{disabled:e.need_page_video,onClick:a[26]||(a[26]=l=>e.need_page_video=!0),class:I([{"btn-primary":!e.need_page_video,"btn-outline-secondary":e.need_page_video},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,mk),hk])])]))])):c("",!0),e.tab===4?(r(),d("div",pk,[e.need_page_sticker?(r(),d("div",_k,[n("div",vk,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[27]||(a[27]=l=>e.need_page_sticker=l),type:"checkbox",id:"need-page-sticker"},null,512),[[Oe,e.need_page_sticker]]),fk])])):c("",!0),e.need_page_sticker?(r(),d("div",bk,[le(rn,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):(r(),d("div",gk,[n("div",yk,[n("div",kk,[$(n("img",$k,null,512),[[s,"../images/icon.png"]])]),wk,Ck,n("div",Fk,[n("button",{disabled:e.need_page_sticker,onClick:a[28]||(a[28]=l=>e.need_page_sticker=!0),class:I([{"btn-primary":!e.need_page_sticker,"btn-outline-secondary":e.need_page_sticker},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Tk),Dk])])]))])):c("",!0),e.tab===5?(r(),d("div",Pk,[e.need_page_audios?(r(),d("div",Sk,[n("div",Ok,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[29]||(a[29]=l=>e.need_page_audios=l),type:"checkbox",id:"need-page-audio"},null,512),[[Oe,e.need_page_audios]]),Mk])])):c("",!0),e.need_page_audios?(r(),d("div",Ak,[le(rn,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):(r(),d("div",jk,[n("div",Uk,[n("div",Vk,[$(n("img",Yk,null,512),[[s,"../images/icon.png"]])]),Rk,xk,n("div",Bk,[n("button",{disabled:e.need_page_audios,onClick:a[30]||(a[30]=l=>e.need_page_audios=!0),class:I([{"btn-primary":!e.need_page_audios,"btn-outline-secondary":e.need_page_audios},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Ik),Nk])])]))])):c("",!0),e.tab===6?(r(),d("div",Ek,[e.need_page_documents?(r(),d("div",qk,[n("div",Lk,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[31]||(a[31]=l=>e.need_page_documents=l),type:"checkbox",id:"need-page-document"},null,512),[[Oe,e.need_page_documents]]),Wk])])):c("",!0),e.need_page_documents?(r(),d("div",Hk,[le(rn,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):(r(),d("div",zk,[n("div",Qk,[n("div",Xk,[$(n("img",Kk,null,512),[[s,"../images/icon.png"]])]),Zk,Gk,n("div",Jk,[n("button",{disabled:e.need_page_documents,onClick:a[32]||(a[32]=l=>e.need_page_documents=!0),class:I([{"btn-primary":!e.need_page_documents,"btn-outline-secondary":e.need_page_documents},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,e2),t2])])]))])):c("",!0),e.tab===7?(r(),d("div",n2,[e.need_attach_page?(r(),d("div",a2,[n("div",o2,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[33]||(a[33]=l=>e.need_attach_page=l),type:"checkbox",id:"need-page-attach"},null,512),[[Oe,e.need_attach_page]]),s2])])):c("",!0),e.need_attach_page?(r(),d("div",l2,[e.pageForm.next_page_id?(r(),d("p",i2,[T("Связано со страницей #"+C(e.pageForm.next_page_id)+" ",1),n("a",{class:"btn btn-link",onClick:a[34]||(a[34]=l=>e.pageForm.next_page_id=null)},"Очистить")])):c("",!0),le($a,{current:e.pageForm.id,onCallback:e.attachPage,editor:!1},null,8,["current","onCallback"])])):(r(),d("div",r2,[n("div",d2,[n("div",u2,[$(n("img",c2,null,512),[[s,"../images/icon.png"]])]),m2,h2,n("div",p2,[n("button",{disabled:e.need_attach_page,onClick:a[35]||(a[35]=l=>e.need_attach_page=!0),class:I([{"btn-primary":!e.need_attach_page,"btn-outline-secondary":e.need_attach_page},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,_2),v2])])]))])):c("",!0),e.tab===8?(r(),d("div",f2,[e.need_attach_slug?(r(),d("div",b2,[n("div",g2,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[36]||(a[36]=l=>e.need_attach_slug=l),type:"checkbox",id:"need-slug-attach"},null,512),[[Oe,e.need_attach_slug]]),y2])])):c("",!0),e.need_attach_slug?(r(),d("div",k2,[e.pageForm.next_bot_menu_slug_id?(r(),d("p",$2,[T("Связано со скриптом #"+C(e.pageForm.next_bot_menu_slug_id)+" ",1),n("a",{class:"btn btn-link",onClick:a[37]||(a[37]=l=>e.pageForm.next_bot_menu_slug_id=null)},"Очистить")])):c("",!0),e.bot?(r(),me(D_,{key:1,global:!0,onCallback:e.associateSlug,bot:e.bot},null,8,["onCallback","bot"])):c("",!0)])):(r(),d("div",w2,[n("div",C2,[n("div",F2,[$(n("img",T2,null,512),[[s,"../images/icon.png"]])]),D2,P2,n("div",S2,[n("button",{disabled:e.need_attach_slug,onClick:a[38]||(a[38]=l=>e.need_attach_slug=!0),class:I([{"btn-primary":!e.need_attach_slug,"btn-outline-secondary":e.need_attach_slug},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,O2),M2])])]))])):c("",!0),e.tab===9?(r(),d("div",A2,[e.need_attach_dialog?(r(),d("div",j2,[n("div",U2,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[39]||(a[39]=l=>e.need_attach_dialog=l),type:"checkbox",id:"need-dialog-attach"},null,512),[[Oe,e.need_attach_dialog]]),V2])])):c("",!0),e.need_attach_dialog?(r(),d("div",Y2,[e.pageForm.next_bot_dialog_command_id?(r(),d("p",R2,[T("Связано с диалогом #"+C(e.pageForm.next_bot_dialog_command_id)+" ",1),n("a",{class:"btn btn-link",onClick:a[40]||(a[40]=l=>e.pageForm.next_bot_dialog_command_id=null)},"Очистить")])):c("",!0),e.bot?(r(),me(Mb,{key:1,onSelectDialog:e.associateDialog,bot:e.bot},null,8,["onSelectDialog","bot"])):c("",!0)])):(r(),d("div",x2,[n("div",B2,[n("div",I2,[$(n("img",N2,null,512),[[s,"../images/icon.png"]])]),E2,q2,n("div",L2,[n("button",{disabled:e.need_attach_dialog,onClick:a[41]||(a[41]=l=>e.need_attach_dialog=!0),class:I([{"btn-primary":!e.need_attach_dialog,"btn-outline-secondary":e.need_attach_dialog},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,W2),H2])])]))])):c("",!0),e.tab===10?(r(),d("div",z2,[e.need_rules?(r(),d("div",Q2,[n("div",X2,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[42]||(a[42]=l=>e.need_rules=l),type:"checkbox",id:"need-rules"},null,512),[[Oe,e.need_rules]]),K2])])):c("",!0),e.need_rules?(r(),d("div",Z2,[le(t1,{bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])])):(r(),d("div",G2,[n("div",J2,[n("div",e$,[$(n("img",t$,null,512),[[s,"../images/icon.png"]])]),n$,a$,n("div",o$,[n("button",{disabled:e.need_rules,onClick:a[43]||(a[43]=l=>e.need_rules=!0),class:I([{"btn-primary":!e.need_rules,"btn-outline-secondary":e.need_rules},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,s$),l$])])]))])):c("",!0)]))],32)):c("",!0),n("div",i$,[n("div",r$,[n("div",d$,[u$,n("div",c$,[e.bot?(r(),d("div",m$,[n("div",h$,[n("h6",p$,[n("span",null,"Вы создаете страницу для "+C(e.bot.bot_domain),1)])])])):c("",!0),n("form",{onSubmit:a[48]||(a[48]=De((...l)=>e.submitPage&&e.submitPage(...l),["prevent"])),class:"row"},[n("div",_$,[v$,n("ul",f$,[n("li",{class:I({active:e.need_page_images})},g$,2),n("li",{class:I({active:e.need_page_sticker})},k$,2),n("li",{class:I({active:e.need_page_video})},w$,2),n("li",{class:I({active:e.need_page_audios})},F$,2),n("li",{class:I({active:e.need_page_documents})},D$,2),n("li",{class:I({active:e.need_attach_page})},S$,2),n("li",{class:I({active:e.need_attach_slug})},M$,2),n("li",{class:I({active:e.need_attach_dialog})},j$,2),n("li",{class:I({active:e.need_rules})},V$,2),n("li",{class:I({active:e.need_reply_menu})},R$,2),n("li",{class:I({active:e.need_inline_menu})},B$,2)])]),e.pageForm.id?(r(),d("div",I$,[n("div",N$,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[45]||(a[45]=l=>e.need_show_qr_and_link=l),type:"checkbox",id:"need-show-qr-and-link"},null,512),[[Oe,e.need_show_qr_and_link]]),E$])])):c("",!0),e.pageForm.id&&e.need_show_qr_and_link?(r(),d("div",q$,[n("p",null,[T("Ссылка на текущую страницу: "),n("span",{class:"bg-secondary font-bold cursor-pointer",onClick:a[46]||(a[46]=l=>e.copyToClipBoard(e.pageLink))},C(e.pageLink),1)]),n("div",L$,[$(n("img",W$,null,512),[[s,e.qr]])])])):c("",!0),n("div",H$,[n("label",z$,[le(o,null,{content:q(()=>[X$]),default:q(()=>[Q$]),_:1}),T(" Описание страницы "),K$]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":a[47]||(a[47]=l=>e.pageForm.comment=l),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[X,e.pageForm.comment]])]),Z$],32)]),G$])])]),n("div",J$,[n("div",ew,[n("div",tw,[n("div",nw,[le($a,{editor:!0,current:e.page,onCallback:e.pageListCallback},null,8,["current","onCallback"])])])])])],64)}}}),ow={props:["bot","item"],data(){return{sectionForm:{section:null},categoryForm:{label:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]}}},computed:{...Le(["getProductCategories"]),filteredCategories(){return this.productCategories.length===0?this.categories:this.categories.filter(t=>this.productCategories.indexOf(t.value)===-1)}},mounted(){this.loadProductCategories(),this.item&&this.$nextTick(()=>{this.productForm={id:this.item.id||null,article:this.item.article||null,vk_product_id:this.item.vk_product_id||null,title:this.item.title||null,description:this.item.description||null,images:this.item.images||null,type:this.item.type||1,old_price:this.item.old_price||null,current_price:this.item.current_price||null,variants:this.item.variants||null,in_stop_list_at:this.item.in_stop_list_at||null,bot_id:this.item.bot_id||null,options:this.item.options||null,reviews:this.item.reviews||null},this.options=[],this.item.categories.forEach(t=>{this.productCategories.push(t.id)})})},methods:{prepareCategoryName(t){let e=this.categories.find(a=>a.value===t);return console.log(e),e?e.label:t},addCategory(){const t=this.categoryForm.label;this.productCategories.push(t),this.categoryForm.label=null},selectCategory(t){this.productCategories.push(t.value)},submit(){let t=new FormData;if(Object.keys(this.productForm).forEach(e=>{const a=this.productForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.removed_options.length>0&&t.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&t.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:t}).then(e=>{this.load=!0,this.$notify({title:"Конструктор ботов",text:"Продукт успешно сохранен!",type:"success"}),this.clearForm(),this.$emit("refresh")}).catch(e=>{})},onChangePhotos(t){const e=t.target.files;for(let a=0;a<e.length;a++)this.photos.push(e[a])},loadProductCategories(){this.$store.dispatch("loadProductCategories",{dataObject:{bot_id:this.bot.id}}).then(()=>{this.getProductCategories.forEach(e=>{this.categories.push({value:e.id,label:e.title})})})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removeSection(t){this.sections.splice(t,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeProductCategory(t){this.productCategories.splice(t,1)},removeVariant(t){this.productForm.variants.splice(t,1)},removeOption(t){this.productForm.options[t].id&&this.removed_options.push(this.productForm.options[t].id),this.productForm.options.splice(t,1)},removeImage(t){this.productForm.images.splice(t,1)},removePhoto(t){this.photos.splice(t,1)},clearForm(){const t={article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=t}}},sw={class:"nav nav-tabs"},lw={class:"nav-item"},iw={class:"nav-item"},rw={class:"nav-item"},dw={key:0},uw={class:"col-md-8 d-flex align-items-center"},cw={class:"form-check"},mw=n("label",{class:"form-check-label",for:"in-stop-list"}," Товар находится в стоп-листе ",-1),hw={class:"col-md-4 d-flex justify-content-end"},pw={class:"col-md-12 mb-3"},_w=["onClick"],vw={class:"dropdown"},fw=n("button",{type:"button",class:"btn btn-outline-info w-100","data-bs-toggle":"dropdown","data-bs-display":"static","aria-expanded":"false"},[n("p",{class:"mb-0"},"Выберите категорию")],-1),bw={class:"dropdown-menu w-100",style:{"overflow-y":"scroll",height:"300px"}},gw={class:"p-3"},yw=n("label",{for:"exampleDropdownFormEmail1",class:"form-label"},"Новая категория",-1),kw={class:"p-3"},$w=n("li",null,[n("hr",{class:"dropdown-divider"})],-1),ww=["onClick"],Cw={class:"col-md-6"},Fw={class:"form-floating mb-3"},Tw=n("label",{for:"article"},"Артикул товара",-1),Dw={class:"col-md-6"},Pw={class:"form-floating mb-3"},Sw=n("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),Ow={class:"col-md-6"},Mw={class:"form-floating mb-3"},Aw=n("label",{for:"title"},"Названи товара",-1),jw={class:"col-md-6"},Uw={class:"form-floating mb-3"},Vw=["value"],Yw=n("label",{for:"type"},"Тип товара",-1),Rw={class:"col-md-12"},xw={class:"form-floating mb-3"},Bw=n("label",{for:"description"},"Описание товара",-1),Iw={class:"col-md-6"},Nw={class:"form-floating mb-3"},Ew=n("label",{for:"current-price"},"Актуальная цена",-1),qw={class:"col-md-6"},Lw={class:"form-floating mb-3"},Ww=n("label",{for:"old-price"},"Старая цена",-1),Hw={class:"col-md-12 mb-3"},zw={class:"card"},Qw={class:"card-header"},Xw={key:0},Kw={class:"card-body"},Zw={class:"row"},Gw={class:"col-12 mb-3"},Jw={class:"col-md-6 mb-3"},e3={class:"card w-100"},t3={class:"card-body"},n3={class:"form-floating mb-3"},a3=["onUpdate:modelValue","id"],o3=["for"],s3={class:"form-floating mb-3"},l3=["onUpdate:modelValue","id"],i3=["for"],r3={class:"card-footer"},d3=["onClick"],u3=n("i",{class:"fa-solid fa-trash-can"},null,-1),c3=[u3],m3={class:"col-md-12 mb-3"},h3={class:"card"},p3=n("div",{class:"card-header"},[n("h6",null,"Характеристики товара")],-1),_3={class:"card-body"},v3={class:"row mb-3"},f3={class:"col-12"},b3=n("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"},"Добавить секцию ",-1),g3={class:"badge bg-info mr-1"},y3=["onClick"],k3=n("i",{class:"fa-solid fa-xmark"},null,-1),$3=[k3],w3={class:"row"},C3={class:"col-md-4 mb-3"},F3={class:"card w-100"},T3={class:"card-body"},D3={class:"form-floating mb-3"},P3=["onUpdate:modelValue","id"],S3=["for"],O3={class:"form-floating mb-3"},M3=["onUpdate:modelValue","id"],A3=["for"],j3={class:"form-floating mb-3"},U3=["onUpdate:modelValue","id"],V3=n("option",{value:null},"Без секции",-1),Y3=["value"],R3=["for"],x3={class:"card-footer"},B3=["onClick"],I3=n("i",{class:"fa-solid fa-trash-can"},null,-1),N3=[I3],E3={class:"row"},q3={class:"col-12"},L3={class:"col-md-12 mb-3"},W3=n("h6",null,"Фотографии товара",-1),H3={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},z3={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Q3=n("span",null,"+",-1),X3={class:"mb-2 img-preview",style:{"margin-right":"10px"}},K3={class:"remove"},Z3=["onClick"],G3={class:"mb-2 img-preview",style:{"margin-right":"10px"}},J3={class:"remove"},eC=["onClick"],tC=n("div",{class:"col-12"},[n("button",{type:"submit",class:"btn btn-outline-primary w-100 p-3"},"Сохранить ")],-1),nC={key:1};function aC(t,e,a,o,s,l){const i=On("lazy");return r(),d(E,null,[n("ul",sw,[n("li",lw,[n("a",{class:I(["nav-link",{active:s.tab===0}]),onClick:e[0]||(e[0]=u=>s.tab=0),"aria-current":"page",href:"#product-form-info"},"Информация о товаре",2)]),n("li",iw,[n("a",{class:I(["nav-link",{active:s.tab===1}]),onClick:e[1]||(e[1]=u=>s.tab=1),href:"#product-reviews"},"Комментарии",2)]),n("li",rw,[n("a",{class:I(["nav-link",{active:s.tab===2}]),onClick:e[2]||(e[2]=u=>s.tab=2),href:"#product-reviews"},"Заказы",2)])]),s.tab===0?(r(),d("div",dw,[n("form",{onSubmit:e[19]||(e[19]=De((...u)=>l.submit&&l.submit(...u),["prevent"])),class:"row"},[n("div",uw,[n("div",cw,[$(n("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=u=>s.productForm.in_stop_list_at=u),type:"checkbox",value:"false",id:"in-stop-list"},null,512),[[Oe,s.productForm.in_stop_list_at]]),mw])]),n("div",hw,[n("a",{href:"#",class:"btn btn-link",onClick:e[4]||(e[4]=(...u)=>l.clearForm&&l.clearForm(...u))},"Новый товар")]),n("div",pw,[(r(!0),d(E,null,oe(s.productCategories,(u,h)=>(r(),d("span",{class:"badge bg-info mr-1 mb-1 cursor-pointer",onClick:p=>l.removeProductCategory(h)},C(l.prepareCategoryName(u)),9,_w))),256)),n("div",vw,[fw,n("ul",bw,[n("div",gw,[yw,$(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=u=>s.categoryForm.label=u),id:"exampleDropdownFormEmail1",placeholder:"Название категории"},null,512),[[X,s.categoryForm.label]])]),n("div",kw,[n("button",{class:"btn btn-primary w-100",type:"button",onClick:e[6]||(e[6]=(...u)=>l.addCategory&&l.addCategory(...u))},"Добавить категорию ")]),$w,(r(!0),d(E,null,oe(l.filteredCategories,u=>(r(),d("li",null,[n("button",{class:"dropdown-item",type:"button",onClick:h=>l.selectCategory(u)},C(u.label),9,ww)]))),256))])])]),n("div",Cw,[n("div",Fw,[$(n("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=u=>s.productForm.article=u),class:"form-control",id:"article",placeholder:"name@example.com"},null,512),[[X,s.productForm.article]]),Tw])]),n("div",Dw,[n("div",Pw,[$(n("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=u=>s.productForm.vk_product_id=u),disabled:!0,class:"form-control",id:"vk-product-id",placeholder:"name@example.com"},null,512),[[X,s.productForm.vk_product_id]]),Sw])]),n("div",Ow,[n("div",Mw,[$(n("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>s.productForm.title=u),class:"form-control",id:"title",placeholder:"name@example.com"},null,512),[[X,s.productForm.title]]),Aw])]),n("div",jw,[n("div",Uw,[$(n("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=u=>s.productForm.type=u),id:"type","aria-label":"Floating label select example"},[(r(!0),d(E,null,oe(s.types,(u,h)=>(r(),d("option",{value:u.value},C(u.title),9,Vw))),256))],512),[[Lt,s.productForm.type]]),Yw])]),n("div",Rw,[n("div",xw,[$(n("textarea",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=u=>s.productForm.description=u),placeholder:"Leave a comment here",id:"description"},null,512),[[X,s.productForm.description]]),Bw])]),n("div",Iw,[n("div",Nw,[$(n("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=u=>s.productForm.current_price=u),class:"form-control",id:"current-price",placeholder:"name@example.com"},null,512),[[X,s.productForm.current_price]]),Ew])]),n("div",qw,[n("div",Lw,[$(n("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=u=>s.productForm.old_price=u),class:"form-control",id:"old-price",placeholder:"name@example.com"},null,512),[[X,s.productForm.old_price]]),Ww])]),n("div",Hw,[n("div",zw,[n("div",Qw,[n("h6",null,[T("Варианты товара "),s.productForm.variants?(r(),d("span",Xw,"("+C(s.productForm.variants.length)+")",1)):c("",!0)])]),n("div",Kw,[n("div",Zw,[n("div",Gw,[n("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[14]||(e[14]=(...u)=>l.addVariant&&l.addVariant(...u))},"Добавить вариант ")]),(r(!0),d(E,null,oe(s.productForm.variants,(u,h)=>(r(),d("div",Jw,[n("div",e3,[n("div",t3,[n("div",n3,[$(n("input",{type:"text","onUpdate:modelValue":p=>s.productForm.variants[h].key=p,class:"form-control",id:"variant-key-"+h,placeholder:"name@example.com",required:""},null,8,a3),[[X,s.productForm.variants[h].key]]),n("label",{for:"variant-key-"+h},"Ключ",8,o3)]),n("div",s3,[$(n("input",{type:"text","onUpdate:modelValue":p=>s.productForm.variants[h].value=p,class:"form-control",id:"variant-value-"+h,placeholder:"name@example.com",required:""},null,8,l3),[[X,s.productForm.variants[h].value]]),n("label",{for:"variant-value-"+h},"Значение",8,i3)])]),n("div",r3,[n("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeVariant(h)},c3,8,d3)])])]))),256))])])])]),n("div",m3,[n("div",h3,[p3,n("div",_3,[n("div",v3,[n("div",f3,[n("form",{onSubmit:e[16]||(e[16]=De((...u)=>l.addSection&&l.addSection(...u),["prevent"])),class:"input-group mb-3"},[$(n("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=u=>s.sectionForm.section=u),class:"form-control border-info",placeholder:"Название секции","aria-label":"Recipient's username","aria-describedby":"button-addon2",required:""},null,512),[[X,s.sectionForm.section]]),b3],32),(r(!0),d(E,null,oe(s.sections,(u,h)=>(r(),d("span",g3,[T(C(u)+" ",1),n("strong",{onClick:p=>l.removeSection(h)},$3,8,y3)]))),256))])]),n("div",w3,[(r(!0),d(E,null,oe(s.productForm.options,(u,h)=>(r(),d("div",C3,[n("div",F3,[n("div",T3,[n("div",D3,[$(n("input",{type:"text","onUpdate:modelValue":p=>s.productForm.options[h].title=p,class:"form-control",id:"option-title-"+h,placeholder:"name@example.com"},null,8,P3),[[X,s.productForm.options[h].title]]),n("label",{for:"option-title-"+h},"Название характеристики",8,S3)]),n("div",O3,[$(n("input",{type:"text","onUpdate:modelValue":p=>s.productForm.options[h].value=p,class:"form-control",id:"option-value-"+h,placeholder:"name@example.com"},null,8,M3),[[X,s.productForm.options[h].value]]),n("label",{for:"option-value-"+h},"Значение характеристики",8,A3)]),n("div",j3,[$(n("select",{class:"form-select","onUpdate:modelValue":p=>s.productForm.options[h].section=p,id:"option-section-"+h,"aria-label":"Floating label select example"},[V3,(r(!0),d(E,null,oe(s.sections,p=>(r(),d("option",{value:p},C(p),9,Y3))),256))],8,U3),[[Lt,s.productForm.options[h].section]]),n("label",{for:"option-section-"+h},"Секция товара",8,R3)])]),n("div",x3,[n("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeOption(h)},N3,8,B3)])])]))),256))]),n("div",E3,[n("div",q3,[n("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[17]||(e[17]=(...u)=>l.addOption&&l.addOption(...u))},"Добавить характеристику ")])])])])]),n("div",L3,[W3,n("div",H3,[n("label",z3,[Q3,n("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[18]||(e[18]=(...u)=>l.onChangePhotos&&l.onChangePhotos(...u)),style:{display:"none"}},null,32)]),s.productForm.images?(r(!0),d(E,{key:0},oe(s.productForm.images,(u,h)=>(r(),d("div",X3,[$(n("img",null,null,512),[[i,u]]),n("div",K3,[n("a",{onClick:p=>l.removeImage(h)},"Удалить",8,Z3)])]))),256)):c("",!0),s.photos.length>0?(r(!0),d(E,{key:1},oe(s.photos,(u,h)=>(r(),d("div",G3,[$(n("img",null,null,512),[[i,l.getPhoto(u).imageUrl]]),n("div",J3,[n("a",{onClick:p=>l.removePhoto(h)},"Удалить",8,eC)])]))),256)):c("",!0)])]),tC],32)])):c("",!0),s.tab===1?(r(),d("div",nC," Отзывы ")):c("",!0)],64)}const oC=tn(ow,[["render",aC]]),sC={props:["item"],data(){return{bot:null}},methods:{preparedImgUrl(t){return t.toLocaleLowerCase().startsWith("https://")||t.toLocaleLowerCase().startsWith("http://")?t:"/images-by-bot-id/"+this.bot.id+"/"+t},removeProduct(){this.$store.dispatch("removeProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"})}).catch(t=>{})},duplicateProduct(){this.$store.dispatch("duplicateProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно продублирован!",type:"success"})}).catch(t=>{})}},mounted(){this.bot=this.getCurrentBot},computed:{...Le(["getCurrentBot"])}},lC={key:0,class:"card"},iC={class:"card-header"},rC={class:"card-body"},dC=["id"],uC={class:"carousel-inner"},cC=["src"],mC=["data-bs-target"],hC=n("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),pC=n("span",{class:"visually-hidden"},"Previous",-1),_C=[hC,pC],vC=["data-bs-target"],fC=n("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),bC=n("span",{class:"visually-hidden"},"Next",-1),gC=[fC,bC],yC={class:"card-footer d-flex justify-content-between"},kC=n("i",{class:"fa-regular fa-copy"},null,-1),$C=[kC],wC=n("i",{class:"fa-solid fa-trash-can"},null,-1),CC=[wC];function FC(t,e,a,o,s,l){return s.bot?(r(),d("div",lC,[n("div",iC,[n("p",null,"#"+C(a.item.id),1)]),n("div",rC,[n("p",null,C(a.item.title),1),n("div",{id:"image-slider-"+a.item.id,class:"carousel slide","data-bs-ride":"carousel"},[n("div",uC,[(r(!0),d(E,null,oe(a.item.images,(i,u)=>(r(),d("div",{class:I(["carousel-item",{active:u===0}]),style:{height:"300px"}},[n("img",{src:l.preparedImgUrl(i),class:"d-block w-100 object-fit-cover",alt:"..."},null,8,cC)],2))),256))]),n("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#image-slider-"+a.item.id,"data-bs-slide":"prev"},_C,8,mC),n("button",{class:"carousel-control-next",type:"button","data-bs-target":"#image-slider-"+a.item.id,"data-bs-slide":"next"},gC,8,vC)],8,dC)]),n("div",yC,[n("button",{title:"Дублировать товар",onClick:e[0]||(e[0]=(...i)=>l.duplicateProduct&&l.duplicateProduct(...i)),class:"btn btn-outline-info mr-1"},$C),n("button",{title:"Удалить товар",onClick:e[1]||(e[1]=(...i)=>l.removeProduct&&l.removeProduct(...i)),class:"btn btn-outline-danger"},CC)])])):c("",!0)}const TC=tn(sC,[["render",FC]]),DC=n("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"}," Найти ",-1),PC={key:0},SC={class:"row"},OC={class:"col-4 mb-2"},MC={props:["bot"],data(){return{search:null,products:[],paginate:null}},computed:{...Le(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(t=>t.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadProducts()},methods:{selectProduct(t){this.$emit("select",t)},nextProducts(t){this.loadProducts(t)},loadProducts(t=0){return this.$store.dispatch("loadProducts",{dataObject:{bot_id:this.bot.id,search:this.search},page:t}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})}}},AC=Object.assign(MC,{__name:"ProductList",setup(t){return(e,a)=>(r(),d(E,null,[n("form",{class:"input-group mb-3",onSubmit:a[1]||(a[1]=De(o=>e.loadProducts(0),["prevent"]))},[$(n("input",{type:"text",class:"form-control border-info",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),"aria-describedby":"button-addon2",required:""},null,512),[[X,e.search]]),DC],32),n("p",null,[T("Всего товаров: "),e.paginate?(r(),d("span",PC,C(e.paginate.meta.total||0),1)):c("",!0)]),n("div",SC,[(r(!0),d(E,null,oe(e.filteredProducts,(o,s)=>(r(),d("div",OC,[le(TC,{onClick:l=>e.selectProduct(o),item:o},null,8,["onClick","item"])]))),256))]),e.paginate?(r(),me(lt,{key:0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)],64))}}),jC={class:"card mb-2"},UC=n("div",{class:"card-header"},[n("h6",null,"Управление магазином")],-1),VC={class:"card-body"},YC={class:"row"},RC={class:"col-12"},xC={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},BC=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),IC=n("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),NC=n("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),EC=["disabled"],qC=n("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),LC={class:"row mb-3"},WC={class:"col-md-3"},HC=["href"],zC=Fs('<div class="col-md-3"><button class="btn btn-outline-info w-100">Экспорт в XLS</button></div><div class="col-md-3"><button class="btn btn-outline-info w-100">Импорт из XLS</button></div><div class="col-md-3"><button class="btn btn-outline-danger w-100">Удалить товары</button></div>',3),QC=n("div",{class:"row"},[n("div",{class:"col-md-3"},[n("button",{class:"btn btn-outline-info w-100"},"Экспортировать заказы")])],-1),XC={class:"card"},KC=n("div",{class:"card-header"},[n("h6",null,"Работа с товаром")],-1),ZC={class:"card-body"},GC={class:"card mt-2"},JC={class:"card-body"},e5={data(){return{load:!1,tab:0,url:null,link:null,bot:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{...Le(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.botForm.vk_shop_link=this.bot.vk_shop_link||null,this.updateProducts()},methods:{updateShopLink(){this.load=!0,this.botForm.bot_id=this.bot.id,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(t=>{this.load=!1,this.updateProducts(),this.$notify({title:"Менеджер магазина",text:"Ссылка на источник в ВК обновлена"})}).catch(()=>{this.load=!1})},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},selectProduct(t){this.load=!0,this.$nextTick(()=>{this.selectedProduct=t,this.load=!1})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk",{dataObject:{bot_domain:this.getCurrentBot.bot_domain}}).then(t=>{this.link=t.data.url,this.load=!1,this.url=null}).catch(()=>{this.load=!1})}}},dU=Object.assign(e5,{__name:"Shop",setup(t){return(e,a)=>{const o=Vt("Popper");return r(),d(E,null,[n("div",jC,[UC,n("div",VC,[n("div",YC,[n("div",RC,[n("form",{onSubmit:a[1]||(a[1]=De((...s)=>e.updateShopLink&&e.updateShopLink(...s),["prevent"])),class:"mb-2"},[n("label",xC,[n("div",null,[le(o,null,{content:q(()=>[IC]),default:q(()=>[BC]),_:1}),T(" ВК-группа ")]),NC]),$(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":a[0]||(a[0]=s=>e.botForm.vk_shop_link=s),"aria-describedby":"vk_shop_link"},null,512),[[X,e.botForm.vk_shop_link]]),n("button",{disabled:e.load,class:"btn btn-outline-primary mt-2 mb-2 w-100"},[qC,T(" Сохранить ")],8,EC)],32)])]),n("div",LC,[n("div",WC,[n("a",{target:"_blank",href:e.link,class:"btn btn-primary w-100"}," Обновить товар ",8,HC)]),zC]),QC])]),n("div",XC,[KC,n("div",ZC,[e.bot&&!e.load?(r(),me(oC,{key:0,bot:e.bot,item:e.selectedProduct,onRefresh:e.refresh},null,8,["bot","item","onRefresh"])):c("",!0)])]),n("div",GC,[n("div",JC,[e.bot&&!e.load?(r(),me(AC,{key:0,bot:e.bot,onSelect:e.selectProduct},null,8,["bot","onSelect"])):c("",!0)])])],64)}}}),t5={props:["data"],data(){return{hasConnect:!1,bot:null,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null}}},computed:{...Le(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data?this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null}):this.amoForm.bot_id=this.bot.id||null},methods:{submitAmo(){let t=new FormData;Object.keys(this.amoForm).forEach(e=>{const a=this.amoForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),this.$store.dispatch("saveAmoCRM",{amoForm:t}).then(e=>{this.$notify("Данные CRM успешно сохранены")}).catch(e=>{})}}},n5=n("div",{class:"col-12"},[n("p",null,[n("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),T(" по шагам")])],-1),a5={class:"col-md-6 col-12 mb-2"},o5={class:"form-label",id:"client_id"},s5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),l5=n("div",null,"ID интеграции",-1),i5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),r5={class:"col-md-6 col-12 mb-2"},d5={class:"form-label",id:"client_secret"},u5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),c5=n("div",null,"Секрет интеграции",-1),m5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),h5={class:"col-md-6 mb-2"},p5={class:"form-label",id:"auth_code"},_5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),v5=n("div",null,"Полученный код авторизации",-1),f5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),b5={class:"col-md-6 col-12 mb-2"},g5={class:"form-label",id:"subdomain2"},y5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),k5=n("div",null,"Ваш поддомен в системе AMO CRM",-1),$5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),w5=n("div",{class:"col-md-12 col-12"},[n("button",{type:"submit",class:"btn btn-outline-primary p-3 w-100"},[n("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),T(" Сохранить настройку AMO ")])],-1);function C5(t,e,a,o,s,l){const i=Vt("Popper");return r(),d("form",{onSubmit:e[4]||(e[4]=De((...u)=>l.submitAmo&&l.submitAmo(...u),["prevent"])),class:"row"},[n5,n("div",a5,[n("label",o5,[le(i,null,{content:q(()=>[l5]),default:q(()=>[s5]),_:1}),T(" client_id "),i5]),$(n("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=u=>s.amoForm.client_id=u),"aria-describedby":"client_id"},null,512),[[X,s.amoForm.client_id]])]),n("div",r5,[n("label",d5,[le(i,null,{content:q(()=>[c5]),default:q(()=>[u5]),_:1}),T(" client_secret "),m5]),$(n("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=u=>s.amoForm.client_secret=u),"aria-describedby":"client_secret"},null,512),[[X,s.amoForm.client_secret]])]),n("div",h5,[n("label",p5,[le(i,null,{content:q(()=>[v5]),default:q(()=>[_5]),_:1}),T(" auth_code "),f5]),$(n("textarea",{class:"form-control",placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=u=>s.amoForm.auth_code=u),"aria-describedby":"auth_code"},`
                                    `,512),[[X,s.amoForm.auth_code]])]),n("div",b5,[n("label",g5,[le(i,null,{content:q(()=>[k5]),default:q(()=>[y5]),_:1}),T(" subdomain "),$5]),$(n("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=u=>s.amoForm.subdomain=u),"aria-describedby":"subdomain"},null,512),[[X,s.amoForm.subdomain]])]),w5],32)}const uU=tn(t5,[["render",C5]]),F5={props:["data"],data(){return{load:!1,bot:null,yClientsForm:{login:null,password:null,partner_token:null,company:null}}},computed:{...Le(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data&&this.$nextTick(()=>{this.yClientsForm.login=this.data.login||null,this.yClientsForm.password=this.data.password||null,this.yClientsForm.partner_token=this.data.partner_token||null,this.yClientsForm.company=this.data.company||null})},methods:{submitYClients(){let t=new FormData;Object.keys(this.yClientsForm).forEach(e=>{const a=this.yClientsForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),this.$store.dispatch("saveYClients",{yClientsForm:t}).then(e=>{this.$notify({title:"Работа с YClients",text:"Данные YClients успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с YClients",text:"Ошибка сохранения данных",type:"error"})})}}},T5=n("h6",null,"Настройка YClients",-1),D5={class:"row"},P5={class:"col-md-12"},S5={class:"mb-2"},O5=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"login"},[T(" Логин "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),M5={class:"mb-2"},A5=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"password"},[T(" Пароль "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),j5={class:"mb-2"},U5=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[T(" Партнерский тоукен "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),V5={class:"mb-2"},Y5=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[T(" ID компании, в которую записывать клиентов "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),R5=n("button",{class:"btn btn-success w-100 r mb-3 text-uppercase font-900"}," Сохранить ",-1);function x5(t,e,a,o,s,l){return r(),d(E,null,[T5,n("form",{onSubmit:e[4]||(e[4]=De((...i)=>l.submitYClients&&l.submitYClients(...i),["prevent"]))},[n("div",D5,[n("div",P5,[n("div",S5,[O5,$(n("input",{type:"text",id:"login",class:"form-control",placeholder:"Ваш логин","aria-label":"Ваш логин","onUpdate:modelValue":e[0]||(e[0]=i=>s.yClientsForm.login=i),"aria-describedby":"Ваш логин",required:""},null,512),[[X,s.yClientsForm.login]])]),n("div",M5,[A5,$(n("input",{type:"text",id:"password",class:"form-control",placeholder:"Ваш пароль","aria-label":"Ваш пароль","onUpdate:modelValue":e[1]||(e[1]=i=>s.yClientsForm.password=i),"aria-describedby":"Ваш пароль",required:""},null,512),[[X,s.yClientsForm.password]])]),n("div",j5,[U5,$(n("input",{type:"text",id:"partner_token",class:"form-control",placeholder:"Ваш партнерский тоукен","aria-label":"Ваш партнерский тоукен","onUpdate:modelValue":e[2]||(e[2]=i=>s.yClientsForm.partner_token=i),"aria-describedby":"Ваш партнерский тоукен",required:""},null,512),[[X,s.yClientsForm.partner_token]])]),n("div",V5,[Y5,$(n("input",{type:"number",id:"throttle",class:"form-control",placeholder:"ID компании","aria-label":"ID компании","onUpdate:modelValue":e[3]||(e[3]=i=>s.yClientsForm.company=i),"aria-describedby":"ID компании",required:""},null,512),[[X,s.yClientsForm.company]])])])]),R5],32)],64)}const cU=tn(F5,[["render",x5]]),B5={data(){return{load:!1,bot:null,fieldTypes:[{title:"Текст",value:0},{title:"Число",value:1},{title:"Логический",value:2},{title:"Дата и время",value:3}],fieldForm:{fields:[]}}},computed:{...Le(["getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.bot=this.getCurrentBot,this.$nextTick(()=>{this.fieldForm.fields=this.bot.field_settings||[]}),this.loadCurrentBotFields()})},methods:{loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{this.fieldForm.fields=t.data||[]})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},removeField(t){this.fieldForm.fields.splice(t,1)},submit(){let t=new FormData;Object.keys(this.fieldForm).forEach(e=>{const a=this.fieldForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeBotFields",{dataObject:t}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Поля успешно обновлены",type:"success"}),this.fieldForm.fields=[],this.fieldForm.fields=e.data}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка обновления полей",type:"error"})})},addField(){if(this.fieldForm.fields||(this.fieldForm.fields=[]),this.fieldForm.fields.length>0&&this.fieldForm.fields.findIndex(e=>e.key==null)!==-1){this.$notify({title:"Настраиваемые поля",text:"У вас есть пустые ключевые поля!",type:"error"});return}this.fieldForm.fields.push({key:null,type:0,label:null,description:null,required:!1,validate_pattern:null})}}},I5={class:"mb-2"},N5={class:"d-flex justify-content-between"},E5=n("h6",null,"Настройка полей пользователя бота",-1),q5=n("i",{class:"fa-solid fa-plus mr-2"},null,-1),L5=n("p",null,[n("em",null,"Данные поля будут добавлены пользователю бота и будут автоматически учитываться в условиях страниц, скриптах (в формах заполнения данных), диалогах. Ключи должны быть уникальные для каждого бота. Если ключ дублируется, то будет использовано более позднее его значение. Если поле добавлено и сохранено, то удалить его уже нельзя, только скрыть. "),T(". "),n("br"),n("span",{class:"text-danger"},"*"),T(" - обязательное поле ")],-1),W5={class:"table"},H5=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},[T("Ключ"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},[T("Подпись поля"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},[T("Тип поля"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},"Паттерн"),n("th",{scope:"col"},"Обязательный"),n("th",{scope:"col"},[T("Вопрос для анкеты"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"})])],-1),z5={scope:"row"},Q5={scope:"col"},X5=["onUpdate:modelValue"],K5={scope:"col"},Z5=["onUpdate:modelValue"],G5={scope:"col"},J5=["onUpdate:modelValue"],eF=["value"],tF={scope:"col"},nF=["disabled","onUpdate:modelValue"],aF={scope:"col"},oF={class:"form-check"},sF=["onUpdate:modelValue","id"],lF=["for"],iF={key:0},rF={key:1},dF={scope:"col"},uF=["onUpdate:modelValue"],cF={scope:"col"},mF=["onClick"],hF=n("i",{class:"fa-regular fa-trash-can"},null,-1),pF=[hF],_F={key:1,class:"form-check mt-2"},vF=["onUpdate:modelValue","id"],fF=["for"],bF={key:0},gF=n("i",{class:"fa-solid fa-eye text-success"},null,-1),yF=[gF],kF={key:1},$F=n("i",{class:"fa-solid fa-eye-slash text-danger"},null,-1),wF=[$F],CF=n("button",{type:"submit",class:"btn btn-success w-100 p-3"}," Сохранить поля ",-1);function FF(t,e,a,o,s,l){return r(),d("div",I5,[n("div",N5,[E5,n("button",{type:"button",onClick:e[0]||(e[0]=i=>l.addField()),class:"btn mb-2 rounded-sm btn-outline-info"},[q5,T(" Добавить параметр ")])]),L5,n("form",{onSubmit:e[1]||(e[1]=De((...i)=>l.submit&&l.submit(...i),["prevent"]))},[n("table",W5,[H5,n("tbody",null,[(r(!0),d(E,null,oe(s.fieldForm.fields,(i,u)=>(r(),d("tr",null,[n("th",z5,C(u+1),1),n("th",Q5,[$(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Ключ","aria-label":"Ключ",maxlength:"255","onUpdate:modelValue":h=>s.fieldForm.fields[u].key=h,required:""},null,8,X5),[[X,s.fieldForm.fields[u].key]])]),n("th",K5,[$(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Подпись поля","aria-label":"Название поля",maxlength:"255","onUpdate:modelValue":h=>s.fieldForm.fields[u].label=h,required:""},null,8,Z5),[[X,s.fieldForm.fields[u].label]])]),n("th",G5,[$(n("select",{class:"form-select","onUpdate:modelValue":h=>s.fieldForm.fields[u].type=h},[(r(!0),d(E,null,oe(s.fieldTypes,h=>(r(),d("option",{value:h.value},C(h.title||"Не указан"),9,eF))),256))],8,J5),[[Lt,s.fieldForm.fields[u].type]])]),n("th",tF,[$(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Паттерн","aria-label":"Паттерн",maxlength:"255",disabled:s.fieldForm.fields[u].type===2,"onUpdate:modelValue":h=>s.fieldForm.fields[u].validate_pattern=h},null,8,nF),[[X,s.fieldForm.fields[u].validate_pattern]])]),n("th",aF,[n("div",oF,[$(n("input",{class:"form-check-input","onUpdate:modelValue":h=>s.fieldForm.fields[u].required=h,type:"checkbox",value:"",id:"field-required"+u},null,8,sF),[[Oe,s.fieldForm.fields[u].required]]),n("label",{class:"form-check-label",for:"field-required"+u},[s.fieldForm.fields[u].required?(r(),d("span",iF,"Да")):c("",!0),s.fieldForm.fields[u].required?c("",!0):(r(),d("span",rF,"Нет"))],8,lF)])]),n("th",dF,[$(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Описание вопроса","aria-label":"Описание вопроса",maxlength:"255","onUpdate:modelValue":h=>s.fieldForm.fields[u].description=h,required:""},null,8,uF),[[X,s.fieldForm.fields[u].description]])]),n("th",cF,[s.fieldForm.fields[u].id?(r(),d("div",_F,[$(n("input",{class:"form-check-input d-none","onUpdate:modelValue":h=>s.fieldForm.fields[u].is_active=h,type:"checkbox",value:"",id:"field-is_active-"+u},null,8,vF),[[Oe,s.fieldForm.fields[u].is_active]]),n("label",{class:"form-check-label",for:"field-is_active-"+u},[s.fieldForm.fields[u].is_active?(r(),d("span",bF,yF)):c("",!0),s.fieldForm.fields[u].is_active?c("",!0):(r(),d("span",kF,wF))],8,fF)])):(r(),d("button",{key:0,type:"button",onClick:h=>l.removeField(u),class:"btn btn-link text-danger"},pF,8,mF))])]))),256))])]),CF],32)])}const mU=tn(B5,[["render",FF]]),TF={class:"row"},DF={class:"input-group mb-3"},PF={key:0,class:"row"},SF={class:"col-12 col-md-12 mb-3"},OF={class:"table"},MF=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Тип"),n("th",{scope:"col"},"Подпись"),n("th",{scope:"col"},"File Id"),n("th",{scope:"col"},"Действия")])],-1),AF={scope:"row"},jF={class:"badge bg-info rounded-pill"},UF=["onClick"],VF=["onClick"],YF={class:"col-12"},RF={key:1,class:"row"},xF=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ")],-1),BF=[xF],IF={data(){return{bot:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...Le(["getMedia","getMediaPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMedia()})},methods:{selectMedia(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},nextMedia(t){this.loadMedia(t)},remove(t){this.$store.dispatch("removeMedia",{dataObject:{mediaId:t}}).then(e=>{this.loadMedia(),this.$notify({title:"Удаление медиа-контента",text:"Медиа контент удален"})}).catch(()=>{})},showPreview(t){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:t}}).then(e=>{this.$notify({title:"Превью медиа-контента",text:"Отправлено в бота"})}).catch(()=>{})},loadMedia(t=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{bot_id:this.bot.id||null,search:this.search,needVideo:!0,needVideoNote:!0,needPhoto:!0,needAudio:!0,needDocument:!0,needSticker:!0},page:t}).then(e=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},hU=Object.assign(IF,{__name:"BotMediaTable",setup(t){return(e,a)=>(r(),d(E,null,[n("div",TF,[n("div",DF,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск файла","aria-label":"Поиск файла","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o)},null,512),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[1]||(a[1]=o=>e.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.media.length>0?(r(),d("div",PF,[n("div",SF,[n("table",OF,[MF,n("tbody",null,[(r(!0),d(E,null,oe(e.media,(o,s)=>(r(),d("tr",null,[n("th",AF,C(o.id),1),n("td",null,[n("span",jF,C(o.type),1)]),n("td",null,C(o.caption??"Без подписи"),1),n("td",null,[n("a",{href:"#file",onClick:l=>e.showPreview(o.id)},C(o.file_id),9,UF)]),n("td",null,[n("a",{href:"javascript:void(0)",class:"btn btn-link p-0 my-2 text-danger",onClick:l=>e.remove(o.id)},"Удалить",8,VF)])]))),256))])])]),n("div",YF,[e.media_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextMedia,pagination:e.media_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",RF,BF))],64))}});function ft(t){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(t)}function $e(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ve(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ke(t){ve(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ft(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function jt(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return isNaN(o)?new Date(NaN):(o&&a.setDate(a.getDate()+o),a)}function yt(t,e){ve(2,arguments);var a=ke(t),o=$e(e);if(isNaN(o))return new Date(NaN);if(!o)return a;var s=a.getDate(),l=new Date(a.getTime());l.setMonth(a.getMonth()+o+1,0);var i=l.getDate();return s>=i?l:(a.setFullYear(l.getFullYear(),l.getMonth(),s),a)}function Vo(t,e){if(ve(2,arguments),!e||ft(e)!=="object")return new Date(NaN);var a=e.years?$e(e.years):0,o=e.months?$e(e.months):0,s=e.weeks?$e(e.weeks):0,l=e.days?$e(e.days):0,i=e.hours?$e(e.hours):0,u=e.minutes?$e(e.minutes):0,h=e.seconds?$e(e.seconds):0,p=ke(t),y=o||a?yt(p,o+a*12):p,_=l||s?jt(y,l+s*7):y,w=u+i*60,D=h+w*60,S=D*1e3,B=new Date(_.getTime()+S);return B}function NF(t,e){ve(2,arguments);var a=ke(t).getTime(),o=$e(e);return new Date(a+o)}var EF={};function Ot(){return EF}function Gt(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=Ot(),_=$e((a=(o=(s=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:y.weekStartsOn)!==null&&o!==void 0?o:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&a!==void 0?a:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=ke(t),D=w.getDay(),S=(D<_?7:0)+D-_;return w.setDate(w.getDate()-S),w.setHours(0,0,0,0),w}function Wn(t){return ve(1,arguments),Gt(t,{weekStartsOn:1})}function qF(t){ve(1,arguments);var e=ke(t),a=e.getFullYear(),o=new Date(0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);var s=Wn(o),l=new Date(0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);var i=Wn(l);return e.getTime()>=s.getTime()?a+1:e.getTime()>=i.getTime()?a:a-1}function LF(t){ve(1,arguments);var e=qF(t),a=new Date(0);a.setFullYear(e,0,4),a.setHours(0,0,0,0);var o=Wn(a);return o}function Hn(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function ao(t){ve(1,arguments);var e=ke(t);return e.setHours(0,0,0,0),e}var WF=864e5;function HF(t,e){ve(2,arguments);var a=ao(t),o=ao(e),s=a.getTime()-Hn(a),l=o.getTime()-Hn(o);return Math.round((s-l)/WF)}function zF(t,e){ve(2,arguments);var a=$e(e),o=a*3;return yt(t,o)}function Ua(t,e){ve(2,arguments);var a=$e(e);return yt(t,a*12)}var Va=6e4,Ya=36e5,QF=1e3;function Yo(t){return ve(1,arguments),t instanceof Date||ft(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wn(t){if(ve(1,arguments),!Yo(t)&&typeof t!="number")return!1;var e=ke(t);return!isNaN(Number(e))}function oo(t){ve(1,arguments);var e=ke(t),a=Math.floor(e.getMonth()/3)+1;return a}function Ro(t,e){var a;ve(1,arguments);var o=t||{},s=ke(o.start),l=ke(o.end),i=l.getTime();if(!(s.getTime()<=i))throw new RangeError("Invalid interval");var u=[],h=s;h.setHours(0,0,0,0);var p=Number((a=e==null?void 0:e.step)!==null&&a!==void 0?a:1);if(p<1||isNaN(p))throw new RangeError("`options.step` must be a number greater than 1");for(;h.getTime()<=i;)u.push(ke(h)),h.setDate(h.getDate()+p),h.setHours(0,0,0,0);return u}function Tn(t){ve(1,arguments);var e=ke(t),a=e.getMonth(),o=a-a%3;return e.setMonth(o,1),e.setHours(0,0,0,0),e}function XF(t){ve(1,arguments);var e=t||{},a=ke(e.start),o=ke(e.end),s=o.getTime();if(!(a.getTime()<=s))throw new RangeError("Invalid interval");var l=Tn(a),i=Tn(o);s=i.getTime();for(var u=[],h=l;h.getTime()<=s;)u.push(ke(h)),h=zF(h,1);return u}function KF(t){ve(1,arguments);var e=ke(t),a=e.getFullYear();return e.setFullYear(a+1,0,0),e.setHours(23,59,59,999),e}function ZF(t){ve(1,arguments);var e=ke(t),a=new Date(0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}function GF(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=Ot(),_=$e((a=(o=(s=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:y.weekStartsOn)!==null&&o!==void 0?o:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&a!==void 0?a:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=ke(t),D=w.getDay(),S=(D<_?-7:0)+6-(D-_);return w.setDate(w.getDate()+S),w.setHours(23,59,59,999),w}function so(t){ve(1,arguments);var e=ke(t),a=e.getMonth(),o=a-a%3+3;return e.setMonth(o,0),e.setHours(23,59,59,999),e}function xo(t,e){ve(2,arguments);var a=$e(e);return NF(t,-a)}var JF=864e5;function e4(t){ve(1,arguments);var e=ke(t),a=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var o=e.getTime(),s=a-o;return Math.floor(s/JF)+1}function un(t){ve(1,arguments);var e=1,a=ke(t),o=a.getUTCDay(),s=(o<e?7:0)+o-e;return a.setUTCDate(a.getUTCDate()-s),a.setUTCHours(0,0,0,0),a}function Bo(t){ve(1,arguments);var e=ke(t),a=e.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(a+1,0,4),o.setUTCHours(0,0,0,0);var s=un(o),l=new Date(0);l.setUTCFullYear(a,0,4),l.setUTCHours(0,0,0,0);var i=un(l);return e.getTime()>=s.getTime()?a+1:e.getTime()>=i.getTime()?a:a-1}function t4(t){ve(1,arguments);var e=Bo(t),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var o=un(a);return o}var n4=6048e5;function Io(t){ve(1,arguments);var e=ke(t),a=un(e).getTime()-t4(e).getTime();return Math.round(a/n4)+1}function Jt(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=Ot(),_=$e((a=(o=(s=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:y.weekStartsOn)!==null&&o!==void 0?o:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&a!==void 0?a:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=ke(t),D=w.getUTCDay(),S=(D<_?7:0)+D-_;return w.setUTCDate(w.getUTCDate()-S),w.setUTCHours(0,0,0,0),w}function Ra(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=ke(t),_=y.getUTCFullYear(),w=Ot(),D=$e((a=(o=(s=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:w.firstWeekContainsDate)!==null&&o!==void 0?o:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setUTCFullYear(_+1,0,D),S.setUTCHours(0,0,0,0);var B=Jt(S,e),G=new Date(0);G.setUTCFullYear(_,0,D),G.setUTCHours(0,0,0,0);var V=Jt(G,e);return y.getTime()>=B.getTime()?_+1:y.getTime()>=V.getTime()?_:_-1}function a4(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=Ot(),_=$e((a=(o=(s=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&o!==void 0?o:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1),w=Ra(t,e),D=new Date(0);D.setUTCFullYear(w,0,_),D.setUTCHours(0,0,0,0);var S=Jt(D,e);return S}var o4=6048e5;function No(t,e){ve(1,arguments);var a=ke(t),o=Jt(a,e).getTime()-a4(a,e).getTime();return Math.round(o/o4)+1}function Ie(t,e){for(var a=t<0?"-":"",o=Math.abs(t).toString();o.length<e;)o="0"+o;return a+o}var s4={y:function(e,a){var o=e.getUTCFullYear(),s=o>0?o:1-o;return Ie(a==="yy"?s%100:s,a.length)},M:function(e,a){var o=e.getUTCMonth();return a==="M"?String(o+1):Ie(o+1,2)},d:function(e,a){return Ie(e.getUTCDate(),a.length)},a:function(e,a){var o=e.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(e,a){return Ie(e.getUTCHours()%12||12,a.length)},H:function(e,a){return Ie(e.getUTCHours(),a.length)},m:function(e,a){return Ie(e.getUTCMinutes(),a.length)},s:function(e,a){return Ie(e.getUTCSeconds(),a.length)},S:function(e,a){var o=a.length,s=e.getUTCMilliseconds(),l=Math.floor(s*Math.pow(10,o-3));return Ie(l,a.length)}};const xt=s4;var on={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},l4={G:function(e,a,o){var s=e.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return o.era(s,{width:"abbreviated"});case"GGGGG":return o.era(s,{width:"narrow"});case"GGGG":default:return o.era(s,{width:"wide"})}},y:function(e,a,o){if(a==="yo"){var s=e.getUTCFullYear(),l=s>0?s:1-s;return o.ordinalNumber(l,{unit:"year"})}return xt.y(e,a)},Y:function(e,a,o,s){var l=Ra(e,s),i=l>0?l:1-l;if(a==="YY"){var u=i%100;return Ie(u,2)}return a==="Yo"?o.ordinalNumber(i,{unit:"year"}):Ie(i,a.length)},R:function(e,a){var o=Bo(e);return Ie(o,a.length)},u:function(e,a){var o=e.getUTCFullYear();return Ie(o,a.length)},Q:function(e,a,o){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(a){case"Q":return String(s);case"QQ":return Ie(s,2);case"Qo":return o.ordinalNumber(s,{unit:"quarter"});case"QQQ":return o.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,a,o){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(a){case"q":return String(s);case"qq":return Ie(s,2);case"qo":return o.ordinalNumber(s,{unit:"quarter"});case"qqq":return o.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,a,o){var s=e.getUTCMonth();switch(a){case"M":case"MM":return xt.M(e,a);case"Mo":return o.ordinalNumber(s+1,{unit:"month"});case"MMM":return o.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(s,{width:"wide",context:"formatting"})}},L:function(e,a,o){var s=e.getUTCMonth();switch(a){case"L":return String(s+1);case"LL":return Ie(s+1,2);case"Lo":return o.ordinalNumber(s+1,{unit:"month"});case"LLL":return o.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(s,{width:"wide",context:"standalone"})}},w:function(e,a,o,s){var l=No(e,s);return a==="wo"?o.ordinalNumber(l,{unit:"week"}):Ie(l,a.length)},I:function(e,a,o){var s=Io(e);return a==="Io"?o.ordinalNumber(s,{unit:"week"}):Ie(s,a.length)},d:function(e,a,o){return a==="do"?o.ordinalNumber(e.getUTCDate(),{unit:"date"}):xt.d(e,a)},D:function(e,a,o){var s=e4(e);return a==="Do"?o.ordinalNumber(s,{unit:"dayOfYear"}):Ie(s,a.length)},E:function(e,a,o){var s=e.getUTCDay();switch(a){case"E":case"EE":case"EEE":return o.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(s,{width:"short",context:"formatting"});case"EEEE":default:return o.day(s,{width:"wide",context:"formatting"})}},e:function(e,a,o,s){var l=e.getUTCDay(),i=(l-s.weekStartsOn+8)%7||7;switch(a){case"e":return String(i);case"ee":return Ie(i,2);case"eo":return o.ordinalNumber(i,{unit:"day"});case"eee":return o.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(l,{width:"short",context:"formatting"});case"eeee":default:return o.day(l,{width:"wide",context:"formatting"})}},c:function(e,a,o,s){var l=e.getUTCDay(),i=(l-s.weekStartsOn+8)%7||7;switch(a){case"c":return String(i);case"cc":return Ie(i,a.length);case"co":return o.ordinalNumber(i,{unit:"day"});case"ccc":return o.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(l,{width:"narrow",context:"standalone"});case"cccccc":return o.day(l,{width:"short",context:"standalone"});case"cccc":default:return o.day(l,{width:"wide",context:"standalone"})}},i:function(e,a,o){var s=e.getUTCDay(),l=s===0?7:s;switch(a){case"i":return String(l);case"ii":return Ie(l,a.length);case"io":return o.ordinalNumber(l,{unit:"day"});case"iii":return o.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(s,{width:"short",context:"formatting"});case"iiii":default:return o.day(s,{width:"wide",context:"formatting"})}},a:function(e,a,o){var s=e.getUTCHours(),l=s/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,a,o){var s=e.getUTCHours(),l;switch(s===12?l=on.noon:s===0?l=on.midnight:l=s/12>=1?"pm":"am",a){case"b":case"bb":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,a,o){var s=e.getUTCHours(),l;switch(s>=17?l=on.evening:s>=12?l=on.afternoon:s>=4?l=on.morning:l=on.night,a){case"B":case"BB":case"BBB":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,a,o){if(a==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),o.ordinalNumber(s,{unit:"hour"})}return xt.h(e,a)},H:function(e,a,o){return a==="Ho"?o.ordinalNumber(e.getUTCHours(),{unit:"hour"}):xt.H(e,a)},K:function(e,a,o){var s=e.getUTCHours()%12;return a==="Ko"?o.ordinalNumber(s,{unit:"hour"}):Ie(s,a.length)},k:function(e,a,o){var s=e.getUTCHours();return s===0&&(s=24),a==="ko"?o.ordinalNumber(s,{unit:"hour"}):Ie(s,a.length)},m:function(e,a,o){return a==="mo"?o.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):xt.m(e,a)},s:function(e,a,o){return a==="so"?o.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):xt.s(e,a)},S:function(e,a){return xt.S(e,a)},X:function(e,a,o,s){var l=s._originalDate||e,i=l.getTimezoneOffset();if(i===0)return"Z";switch(a){case"X":return io(i);case"XXXX":case"XX":return Qt(i);case"XXXXX":case"XXX":default:return Qt(i,":")}},x:function(e,a,o,s){var l=s._originalDate||e,i=l.getTimezoneOffset();switch(a){case"x":return io(i);case"xxxx":case"xx":return Qt(i);case"xxxxx":case"xxx":default:return Qt(i,":")}},O:function(e,a,o,s){var l=s._originalDate||e,i=l.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+lo(i,":");case"OOOO":default:return"GMT"+Qt(i,":")}},z:function(e,a,o,s){var l=s._originalDate||e,i=l.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+lo(i,":");case"zzzz":default:return"GMT"+Qt(i,":")}},t:function(e,a,o,s){var l=s._originalDate||e,i=Math.floor(l.getTime()/1e3);return Ie(i,a.length)},T:function(e,a,o,s){var l=s._originalDate||e,i=l.getTime();return Ie(i,a.length)}};function lo(t,e){var a=t>0?"-":"+",o=Math.abs(t),s=Math.floor(o/60),l=o%60;if(l===0)return a+String(s);var i=e||"";return a+String(s)+i+Ie(l,2)}function io(t,e){if(t%60===0){var a=t>0?"-":"+";return a+Ie(Math.abs(t)/60,2)}return Qt(t,e)}function Qt(t,e){var a=e||"",o=t>0?"-":"+",s=Math.abs(t),l=Ie(Math.floor(s/60),2),i=Ie(s%60,2);return o+l+a+i}const i4=l4;var ro=function(e,a){switch(e){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},Eo=function(e,a){switch(e){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},r4=function(e,a){var o=e.match(/(P+)(p+)?/)||[],s=o[1],l=o[2];if(!l)return ro(e,a);var i;switch(s){case"P":i=a.dateTime({width:"short"});break;case"PP":i=a.dateTime({width:"medium"});break;case"PPP":i=a.dateTime({width:"long"});break;case"PPPP":default:i=a.dateTime({width:"full"});break}return i.replace("{{date}}",ro(s,a)).replace("{{time}}",Eo(l,a))},d4={p:Eo,P:r4};const wa=d4;var u4=["D","DD"],c4=["YY","YYYY"];function qo(t){return u4.indexOf(t)!==-1}function Lo(t){return c4.indexOf(t)!==-1}function zn(t,e,a){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var m4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},h4=function(e,a,o){var s,l=m4[e];return typeof l=="string"?s=l:a===1?s=l.one:s=l.other.replace("{{count}}",a.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+s:s+" ago":s};const p4=h4;function ia(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.width?String(e.width):t.defaultWidth,o=t.formats[a]||t.formats[t.defaultWidth];return o}}var _4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},v4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},f4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},b4={date:ia({formats:_4,defaultWidth:"full"}),time:ia({formats:v4,defaultWidth:"full"}),dateTime:ia({formats:f4,defaultWidth:"full"})};const g4=b4;var y4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k4=function(e,a,o,s){return y4[e]};const $4=k4;function gn(t){return function(e,a){var o=a!=null&&a.context?String(a.context):"standalone",s;if(o==="formatting"&&t.formattingValues){var l=t.defaultFormattingWidth||t.defaultWidth,i=a!=null&&a.width?String(a.width):l;s=t.formattingValues[i]||t.formattingValues[l]}else{var u=t.defaultWidth,h=a!=null&&a.width?String(a.width):t.defaultWidth;s=t.values[h]||t.values[u]}var p=t.argumentCallback?t.argumentCallback(e):e;return s[p]}}var w4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},C4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},T4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},D4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S4=function(e,a){var o=Number(e),s=o%100;if(s>20||s<10)switch(s%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},O4={ordinalNumber:S4,era:gn({values:w4,defaultWidth:"wide"}),quarter:gn({values:C4,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:gn({values:F4,defaultWidth:"wide"}),day:gn({values:T4,defaultWidth:"wide"}),dayPeriod:gn({values:D4,defaultWidth:"wide",formattingValues:P4,defaultFormattingWidth:"wide"})};const M4=O4;function yn(t){return function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],l=e.match(s);if(!l)return null;var i=l[0],u=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?j4(u,function(_){return _.test(i)}):A4(u,function(_){return _.test(i)}),p;p=t.valueCallback?t.valueCallback(h):h,p=a.valueCallback?a.valueCallback(p):p;var y=e.slice(i.length);return{value:p,rest:y}}}function A4(t,e){for(var a in t)if(t.hasOwnProperty(a)&&e(t[a]))return a}function j4(t,e){for(var a=0;a<t.length;a++)if(e(t[a]))return a}function U4(t){return function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.match(t.matchPattern);if(!o)return null;var s=o[0],l=e.match(t.parsePattern);if(!l)return null;var i=t.valueCallback?t.valueCallback(l[0]):l[0];i=a.valueCallback?a.valueCallback(i):i;var u=e.slice(s.length);return{value:i,rest:u}}}var V4=/^(\d+)(th|st|nd|rd)?/i,Y4=/\d+/i,R4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},x4={any:[/^b/i,/^(a|c)/i]},B4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},I4={any:[/1/i,/2/i,/3/i,/4/i]},N4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},E4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},z4={ordinalNumber:U4({matchPattern:V4,parsePattern:Y4,valueCallback:function(e){return parseInt(e,10)}}),era:yn({matchPatterns:R4,defaultMatchWidth:"wide",parsePatterns:x4,defaultParseWidth:"any"}),quarter:yn({matchPatterns:B4,defaultMatchWidth:"wide",parsePatterns:I4,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:yn({matchPatterns:N4,defaultMatchWidth:"wide",parsePatterns:E4,defaultParseWidth:"any"}),day:yn({matchPatterns:q4,defaultMatchWidth:"wide",parsePatterns:L4,defaultParseWidth:"any"}),dayPeriod:yn({matchPatterns:W4,defaultMatchWidth:"any",parsePatterns:H4,defaultParseWidth:"any"})};const Q4=z4;var X4={code:"en-US",formatDistance:p4,formatLong:g4,formatRelative:$4,localize:M4,match:Q4,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Wo=X4;var K4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G4=/^'([^]*?)'?$/,J4=/''/g,eT=/[a-zA-Z]/;function Nt(t,e,a){var o,s,l,i,u,h,p,y,_,w,D,S,B,G,V,Y,ee,P;ve(2,arguments);var W=String(e),H=Ot(),L=(o=(s=a==null?void 0:a.locale)!==null&&s!==void 0?s:H.locale)!==null&&o!==void 0?o:Wo,pe=$e((l=(i=(u=(h=a==null?void 0:a.firstWeekContainsDate)!==null&&h!==void 0?h:a==null||(p=a.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&u!==void 0?u:H.firstWeekContainsDate)!==null&&i!==void 0?i:(_=H.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(pe>=1&&pe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var te=$e((D=(S=(B=(G=a==null?void 0:a.weekStartsOn)!==null&&G!==void 0?G:a==null||(V=a.locale)===null||V===void 0||(Y=V.options)===null||Y===void 0?void 0:Y.weekStartsOn)!==null&&B!==void 0?B:H.weekStartsOn)!==null&&S!==void 0?S:(ee=H.locale)===null||ee===void 0||(P=ee.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&D!==void 0?D:0);if(!(te>=0&&te<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var g=ke(t);if(!wn(g))throw new RangeError("Invalid time value");var M=Hn(g),Q=xo(g,M),ie={firstWeekContainsDate:pe,weekStartsOn:te,locale:L,_originalDate:g},R=W.match(Z4).map(function(b){var A=b[0];if(A==="p"||A==="P"){var j=wa[A];return j(b,L.formatLong)}return b}).join("").match(K4).map(function(b){if(b==="''")return"'";var A=b[0];if(A==="'")return tT(b);var j=i4[A];if(j)return!(a!=null&&a.useAdditionalWeekYearTokens)&&Lo(b)&&zn(b,e,String(t)),!(a!=null&&a.useAdditionalDayOfYearTokens)&&qo(b)&&zn(b,e,String(t)),j(Q,b,L.localize,ie);if(A.match(eT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return b}).join("");return R}function tT(t){var e=t.match(G4);return e?e[1].replace(J4,"'"):t}function nT(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}function aT(t){ve(1,arguments);var e=ke(t),a=e.getDay();return a}function oT(t){ve(1,arguments);var e=ke(t),a=e.getFullYear(),o=e.getMonth(),s=new Date(0);return s.setFullYear(a,o+1,0),s.setHours(0,0,0,0),s.getDate()}function kt(t){ve(1,arguments);var e=ke(t),a=e.getHours();return a}var sT=6048e5;function lT(t){ve(1,arguments);var e=ke(t),a=Wn(e).getTime()-LF(e).getTime();return Math.round(a/sT)+1}function St(t){ve(1,arguments);var e=ke(t),a=e.getMinutes();return a}function Ve(t){ve(1,arguments);var e=ke(t),a=e.getMonth();return a}function cn(t){ve(1,arguments);var e=ke(t),a=e.getSeconds();return a}function iT(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=ke(t),_=y.getFullYear(),w=Ot(),D=$e((a=(o=(s=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:w.firstWeekContainsDate)!==null&&o!==void 0?o:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setFullYear(_+1,0,D),S.setHours(0,0,0,0);var B=Gt(S,e),G=new Date(0);G.setFullYear(_,0,D),G.setHours(0,0,0,0);var V=Gt(G,e);return y.getTime()>=B.getTime()?_+1:y.getTime()>=V.getTime()?_:_-1}function rT(t,e){var a,o,s,l,i,u,h,p;ve(1,arguments);var y=Ot(),_=$e((a=(o=(s=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&o!==void 0?o:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1),w=iT(t,e),D=new Date(0);D.setFullYear(w,0,_),D.setHours(0,0,0,0);var S=Gt(D,e);return S}var dT=6048e5;function uT(t,e){ve(1,arguments);var a=ke(t),o=Gt(a,e).getTime()-rT(a,e).getTime();return Math.round(o/dT)+1}function Me(t){return ve(1,arguments),ke(t).getFullYear()}function Dn(t,e){ve(2,arguments);var a=ke(t),o=ke(e);return a.getTime()>o.getTime()}function Pn(t,e){ve(2,arguments);var a=ke(t),o=ke(e);return a.getTime()<o.getTime()}function dn(t,e){ve(2,arguments);var a=ke(t),o=ke(e);return a.getTime()===o.getTime()}function uo(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function cT(t,e){if(t){if(typeof t=="string")return uo(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return uo(t,e)}}function co(t,e){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=cT(t))||e&&t&&typeof t.length=="number"){a&&(t=a);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(p){throw p},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,i=!1,u;return{s:function(){a=a.call(t)},n:function(){var p=a.next();return l=p.done,p},e:function(p){i=!0,u=p},f:function(){try{!l&&a.return!=null&&a.return()}finally{if(i)throw u}}}}function _e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ca(t,e){return Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Ca(t,e)}function Ye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e)}function Qn(t){return Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qn(t)}function Ho(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ho=function(){return!!t})()}function mT(t,e){if(e&&(ft(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _e(t)}function Re(t){var e=Ho();return function(){var o=Qn(t),s;if(e){var l=Qn(this).constructor;s=Reflect.construct(o,arguments,l)}else s=o.apply(this,arguments);return mT(this,s)}}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hT(t,e){if(ft(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,e||"default");if(ft(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zo(t){var e=hT(t,"string");return ft(e)=="symbol"?e:String(e)}function mo(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,zo(o.key),o)}}function Ue(t,e,a){return e&&mo(t.prototype,e),a&&mo(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function he(t,e,a){return e=zo(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var pT=10,Qo=function(){function t(){je(this,t),he(this,"priority",void 0),he(this,"subPriority",0)}return Ue(t,[{key:"validate",value:function(a,o){return!0}}]),t}(),_T=function(t){Ye(a,t);var e=Re(a);function a(o,s,l,i,u){var h;return je(this,a),h=e.call(this),h.value=o,h.validateValue=s,h.setValue=l,h.priority=i,u&&(h.subPriority=u),h}return Ue(a,[{key:"validate",value:function(s,l){return this.validateValue(s,this.value,l)}},{key:"set",value:function(s,l,i){return this.setValue(s,l,this.value,i)}}]),a}(Qo),vT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",pT),he(_e(o),"subPriority",-1),o}return Ue(a,[{key:"set",value:function(s,l){if(l.timestampIsSet)return s;var i=new Date(0);return i.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),i.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),i}}]),a}(Qo),Be=function(){function t(){je(this,t),he(this,"incompatibleTokens",void 0),he(this,"priority",void 0),he(this,"subPriority",void 0)}return Ue(t,[{key:"run",value:function(a,o,s,l){var i=this.parse(a,o,s,l);return i?{setter:new _T(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(a,o,s){return!0}}]),t}(),fT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",140),he(_e(o),"incompatibleTokens",["R","u","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"})||i.era(s,{width:"narrow"});case"GGGGG":return i.era(s,{width:"narrow"});case"GGGG":default:return i.era(s,{width:"wide"})||i.era(s,{width:"abbreviated"})||i.era(s,{width:"narrow"})}}},{key:"set",value:function(s,l,i){return l.era=i,s.setUTCFullYear(i,0,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),Qe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Tt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Xe(t,e){return t&&{value:e(t.value),rest:t.rest}}function He(t,e){var a=e.match(t);return a?{value:parseInt(a[0],10),rest:e.slice(a[0].length)}:null}function Dt(t,e){var a=e.match(t);if(!a)return null;if(a[0]==="Z")return{value:0,rest:e.slice(1)};var o=a[1]==="+"?1:-1,s=a[2]?parseInt(a[2],10):0,l=a[3]?parseInt(a[3],10):0,i=a[5]?parseInt(a[5],10):0;return{value:o*(s*Ya+l*Va+i*QF),rest:e.slice(a[0].length)}}function Xo(t){return He(Qe.anyDigitsSigned,t)}function ze(t,e){switch(t){case 1:return He(Qe.singleDigit,e);case 2:return He(Qe.twoDigits,e);case 3:return He(Qe.threeDigits,e);case 4:return He(Qe.fourDigits,e);default:return He(new RegExp("^\\d{1,"+t+"}"),e)}}function Xn(t,e){switch(t){case 1:return He(Qe.singleDigitSigned,e);case 2:return He(Qe.twoDigitsSigned,e);case 3:return He(Qe.threeDigitsSigned,e);case 4:return He(Qe.fourDigitsSigned,e);default:return He(new RegExp("^-?\\d{1,"+t+"}"),e)}}function xa(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ko(t,e){var a=e>0,o=a?e:1-e,s;if(o<=50)s=t||100;else{var l=o+50,i=Math.floor(l/100)*100,u=t>=l%100;s=t+i-(u?100:0)}return a?s:1-s}function Zo(t){return t%400===0||t%4===0&&t%100!==0}var bT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="yy"}};switch(l){case"y":return Xe(ze(4,s),u);case"yo":return Xe(i.ordinalNumber(s,{unit:"year"}),u);default:return Xe(ze(l.length,s),u)}}},{key:"validate",value:function(s,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(s,l,i){var u=s.getUTCFullYear();if(i.isTwoDigitYear){var h=Ko(i.year,u);return s.setUTCFullYear(h,0,1),s.setUTCHours(0,0,0,0),s}var p=!("era"in l)||l.era===1?i.year:1-i.year;return s.setUTCFullYear(p,0,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),gT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return Xe(ze(4,s),u);case"Yo":return Xe(i.ordinalNumber(s,{unit:"year"}),u);default:return Xe(ze(l.length,s),u)}}},{key:"validate",value:function(s,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(s,l,i,u){var h=Ra(s,u);if(i.isTwoDigitYear){var p=Ko(i.year,h);return s.setUTCFullYear(p,0,u.firstWeekContainsDate),s.setUTCHours(0,0,0,0),Jt(s,u)}var y=!("era"in l)||l.era===1?i.year:1-i.year;return s.setUTCFullYear(y,0,u.firstWeekContainsDate),s.setUTCHours(0,0,0,0),Jt(s,u)}}]),a}(Be),yT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l){return Xn(l==="R"?4:l.length,s)}},{key:"set",value:function(s,l,i){var u=new Date(0);return u.setUTCFullYear(i,0,4),u.setUTCHours(0,0,0,0),un(u)}}]),a}(Be),kT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l){return Xn(l==="u"?4:l.length,s)}},{key:"set",value:function(s,l,i){return s.setUTCFullYear(i,0,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),$T=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",120),he(_e(o),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"Q":case"QQ":return ze(l.length,s);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"})||i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(s,{width:"wide",context:"formatting"})||i.quarter(s,{width:"abbreviated",context:"formatting"})||i.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,l){return l>=1&&l<=4}},{key:"set",value:function(s,l,i){return s.setUTCMonth((i-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),wT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",120),he(_e(o),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"q":case"qq":return ze(l.length,s);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"})||i.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(s,{width:"wide",context:"standalone"})||i.quarter(s,{width:"abbreviated",context:"standalone"})||i.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,l){return l>=1&&l<=4}},{key:"set",value:function(s,l,i){return s.setUTCMonth((i-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),CT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),he(_e(o),"priority",110),o}return Ue(a,[{key:"parse",value:function(s,l,i){var u=function(p){return p-1};switch(l){case"M":return Xe(He(Qe.month,s),u);case"MM":return Xe(ze(2,s),u);case"Mo":return Xe(i.ordinalNumber(s,{unit:"month"}),u);case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"})||i.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(s,{width:"wide",context:"formatting"})||i.month(s,{width:"abbreviated",context:"formatting"})||i.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,l){return l>=0&&l<=11}},{key:"set",value:function(s,l,i){return s.setUTCMonth(i,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be),FT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",110),he(_e(o),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){var u=function(p){return p-1};switch(l){case"L":return Xe(He(Qe.month,s),u);case"LL":return Xe(ze(2,s),u);case"Lo":return Xe(i.ordinalNumber(s,{unit:"month"}),u);case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"})||i.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(s,{width:"wide",context:"standalone"})||i.month(s,{width:"abbreviated",context:"standalone"})||i.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,l){return l>=0&&l<=11}},{key:"set",value:function(s,l,i){return s.setUTCMonth(i,1),s.setUTCHours(0,0,0,0),s}}]),a}(Be);function TT(t,e,a){ve(2,arguments);var o=ke(t),s=$e(e),l=No(o,a)-s;return o.setUTCDate(o.getUTCDate()-l*7),o}var DT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",100),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"w":return He(Qe.week,s);case"wo":return i.ordinalNumber(s,{unit:"week"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=1&&l<=53}},{key:"set",value:function(s,l,i,u){return Jt(TT(s,i,u),u)}}]),a}(Be);function PT(t,e){ve(2,arguments);var a=ke(t),o=$e(e),s=Io(a)-o;return a.setUTCDate(a.getUTCDate()-s*7),a}var ST=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",100),he(_e(o),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"I":return He(Qe.week,s);case"Io":return i.ordinalNumber(s,{unit:"week"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=1&&l<=53}},{key:"set",value:function(s,l,i){return un(PT(s,i))}}]),a}(Be),OT=[31,28,31,30,31,30,31,31,30,31,30,31],MT=[31,29,31,30,31,30,31,31,30,31,30,31],AT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"subPriority",1),he(_e(o),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"d":return He(Qe.date,s);case"do":return i.ordinalNumber(s,{unit:"date"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){var i=s.getUTCFullYear(),u=Zo(i),h=s.getUTCMonth();return u?l>=1&&l<=MT[h]:l>=1&&l<=OT[h]}},{key:"set",value:function(s,l,i){return s.setUTCDate(i),s.setUTCHours(0,0,0,0),s}}]),a}(Be),jT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"subpriority",1),he(_e(o),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"D":case"DD":return He(Qe.dayOfYear,s);case"Do":return i.ordinalNumber(s,{unit:"date"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){var i=s.getUTCFullYear(),u=Zo(i);return u?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(s,l,i){return s.setUTCMonth(0,i),s.setUTCHours(0,0,0,0),s}}]),a}(Be);function Ba(t,e,a){var o,s,l,i,u,h,p,y;ve(2,arguments);var _=Ot(),w=$e((o=(s=(l=(i=a==null?void 0:a.weekStartsOn)!==null&&i!==void 0?i:a==null||(u=a.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&s!==void 0?s:(p=_.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&o!==void 0?o:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=ke(t),S=$e(e),B=D.getUTCDay(),G=S%7,V=(G+7)%7,Y=(V<w?7:0)+S-B;return D.setUTCDate(D.getUTCDate()+Y),D}var UT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["D","i","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,l){return l>=0&&l<=6}},{key:"set",value:function(s,l,i,u){return s=Ba(s,i,u),s.setUTCHours(0,0,0,0),s}}]),a}(Be),VT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i,u){var h=function(y){var _=Math.floor((y-1)/7)*7;return(y+u.weekStartsOn+6)%7+_};switch(l){case"e":case"ee":return Xe(ze(l.length,s),h);case"eo":return Xe(i.ordinalNumber(s,{unit:"day"}),h);case"eee":return i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,l){return l>=0&&l<=6}},{key:"set",value:function(s,l,i,u){return s=Ba(s,i,u),s.setUTCHours(0,0,0,0),s}}]),a}(Be),YT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i,u){var h=function(y){var _=Math.floor((y-1)/7)*7;return(y+u.weekStartsOn+6)%7+_};switch(l){case"c":case"cc":return Xe(ze(l.length,s),h);case"co":return Xe(i.ordinalNumber(s,{unit:"day"}),h);case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"})||i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})||i.day(s,{width:"abbreviated",context:"standalone"})||i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,l){return l>=0&&l<=6}},{key:"set",value:function(s,l,i,u){return s=Ba(s,i,u),s.setUTCHours(0,0,0,0),s}}]),a}(Be);function RT(t,e){ve(2,arguments);var a=$e(e);a%7===0&&(a=a-7);var o=1,s=ke(t),l=s.getUTCDay(),i=a%7,u=(i+7)%7,h=(u<o?7:0)+a-l;return s.setUTCDate(s.getUTCDate()+h),s}var xT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){var u=function(p){return p===0?7:p};switch(l){case"i":case"ii":return ze(l.length,s);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return Xe(i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),u);case"iiiii":return Xe(i.day(s,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Xe(i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),u);case"iiii":default:return Xe(i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(s,l){return l>=1&&l<=7}},{key:"set",value:function(s,l,i){return s=RT(s,i),s.setUTCHours(0,0,0,0),s}}]),a}(Be),BT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["b","B","H","k","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"a":case"aa":case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,l,i){return s.setUTCHours(xa(i),0,0,0),s}}]),a}(Be),IT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["a","B","H","k","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"b":case"bb":case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,l,i){return s.setUTCHours(xa(i),0,0,0),s}}]),a}(Be),NT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["a","b","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,l,i){return s.setUTCHours(xa(i),0,0,0),s}}]),a}(Be),ET=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["H","K","k","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"h":return He(Qe.hour12h,s);case"ho":return i.ordinalNumber(s,{unit:"hour"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=1&&l<=12}},{key:"set",value:function(s,l,i){var u=s.getUTCHours()>=12;return u&&i<12?s.setUTCHours(i+12,0,0,0):!u&&i===12?s.setUTCHours(0,0,0,0):s.setUTCHours(i,0,0,0),s}}]),a}(Be),qT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["a","b","h","K","k","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"H":return He(Qe.hour23h,s);case"Ho":return i.ordinalNumber(s,{unit:"hour"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=0&&l<=23}},{key:"set",value:function(s,l,i){return s.setUTCHours(i,0,0,0),s}}]),a}(Be),LT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["h","H","k","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"K":return He(Qe.hour11h,s);case"Ko":return i.ordinalNumber(s,{unit:"hour"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=0&&l<=11}},{key:"set",value:function(s,l,i){var u=s.getUTCHours()>=12;return u&&i<12?s.setUTCHours(i+12,0,0,0):s.setUTCHours(i,0,0,0),s}}]),a}(Be),WT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["a","b","h","H","K","t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"k":return He(Qe.hour24h,s);case"ko":return i.ordinalNumber(s,{unit:"hour"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=1&&l<=24}},{key:"set",value:function(s,l,i){var u=i<=24?i%24:i;return s.setUTCHours(u,0,0,0),s}}]),a}(Be),HT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",60),he(_e(o),"incompatibleTokens",["t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"m":return He(Qe.minute,s);case"mo":return i.ordinalNumber(s,{unit:"minute"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=0&&l<=59}},{key:"set",value:function(s,l,i){return s.setUTCMinutes(i,0,0),s}}]),a}(Be),zT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",50),he(_e(o),"incompatibleTokens",["t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l,i){switch(l){case"s":return He(Qe.second,s);case"so":return i.ordinalNumber(s,{unit:"second"});default:return ze(l.length,s)}}},{key:"validate",value:function(s,l){return l>=0&&l<=59}},{key:"set",value:function(s,l,i){return s.setUTCSeconds(i,0),s}}]),a}(Be),QT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",30),he(_e(o),"incompatibleTokens",["t","T"]),o}return Ue(a,[{key:"parse",value:function(s,l){var i=function(h){return Math.floor(h*Math.pow(10,-l.length+3))};return Xe(ze(l.length,s),i)}},{key:"set",value:function(s,l,i){return s.setUTCMilliseconds(i),s}}]),a}(Be),XT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",10),he(_e(o),"incompatibleTokens",["t","T","x"]),o}return Ue(a,[{key:"parse",value:function(s,l){switch(l){case"X":return Dt(Tt.basicOptionalMinutes,s);case"XX":return Dt(Tt.basic,s);case"XXXX":return Dt(Tt.basicOptionalSeconds,s);case"XXXXX":return Dt(Tt.extendedOptionalSeconds,s);case"XXX":default:return Dt(Tt.extended,s)}}},{key:"set",value:function(s,l,i){return l.timestampIsSet?s:new Date(s.getTime()-i)}}]),a}(Be),KT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",10),he(_e(o),"incompatibleTokens",["t","T","X"]),o}return Ue(a,[{key:"parse",value:function(s,l){switch(l){case"x":return Dt(Tt.basicOptionalMinutes,s);case"xx":return Dt(Tt.basic,s);case"xxxx":return Dt(Tt.basicOptionalSeconds,s);case"xxxxx":return Dt(Tt.extendedOptionalSeconds,s);case"xxx":default:return Dt(Tt.extended,s)}}},{key:"set",value:function(s,l,i){return l.timestampIsSet?s:new Date(s.getTime()-i)}}]),a}(Be),ZT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",40),he(_e(o),"incompatibleTokens","*"),o}return Ue(a,[{key:"parse",value:function(s){return Xo(s)}},{key:"set",value:function(s,l,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),a}(Be),GT=function(t){Ye(a,t);var e=Re(a);function a(){var o;je(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",20),he(_e(o),"incompatibleTokens","*"),o}return Ue(a,[{key:"parse",value:function(s){return Xo(s)}},{key:"set",value:function(s,l,i){return[new Date(i),{timestampIsSet:!0}]}}]),a}(Be),JT={G:new fT,y:new bT,Y:new gT,R:new yT,u:new kT,Q:new $T,q:new wT,M:new CT,L:new FT,w:new DT,I:new ST,d:new AT,D:new jT,E:new UT,e:new VT,c:new YT,i:new xT,a:new BT,b:new IT,B:new NT,h:new ET,H:new qT,K:new LT,k:new WT,m:new HT,s:new zT,S:new QT,X:new XT,x:new KT,t:new ZT,T:new GT},e6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n6=/^'([^]*?)'?$/,a6=/''/g,o6=/\S/,s6=/[a-zA-Z]/;function Fa(t,e,a,o){var s,l,i,u,h,p,y,_,w,D,S,B,G,V,Y,ee,P,W;ve(3,arguments);var H=String(t),L=String(e),pe=Ot(),te=(s=(l=o==null?void 0:o.locale)!==null&&l!==void 0?l:pe.locale)!==null&&s!==void 0?s:Wo;if(!te.match)throw new RangeError("locale must contain match property");var g=$e((i=(u=(h=(p=o==null?void 0:o.firstWeekContainsDate)!==null&&p!==void 0?p:o==null||(y=o.locale)===null||y===void 0||(_=y.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&h!==void 0?h:pe.firstWeekContainsDate)!==null&&u!==void 0?u:(w=pe.locale)===null||w===void 0||(D=w.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=$e((S=(B=(G=(V=o==null?void 0:o.weekStartsOn)!==null&&V!==void 0?V:o==null||(Y=o.locale)===null||Y===void 0||(ee=Y.options)===null||ee===void 0?void 0:ee.weekStartsOn)!==null&&G!==void 0?G:pe.weekStartsOn)!==null&&B!==void 0?B:(P=pe.locale)===null||P===void 0||(W=P.options)===null||W===void 0?void 0:W.weekStartsOn)!==null&&S!==void 0?S:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(L==="")return H===""?ke(a):new Date(NaN);var Q={firstWeekContainsDate:g,weekStartsOn:M,locale:te},ie=[new vT],R=L.match(t6).map(function(be){var Z=be[0];if(Z in wa){var Ce=wa[Z];return Ce(be,te.formatLong)}return be}).join("").match(e6),b=[],A=co(R),j;try{var z=function(){var Z=j.value;!(o!=null&&o.useAdditionalWeekYearTokens)&&Lo(Z)&&zn(Z,L,t),!(o!=null&&o.useAdditionalDayOfYearTokens)&&qo(Z)&&zn(Z,L,t);var Ce=Z[0],ge=JT[Ce];if(ge){var N=ge.incompatibleTokens;if(Array.isArray(N)){var se=b.find(function(de){return N.includes(de.token)||de.token===Ce});if(se)throw new RangeError("The format string mustn't contain `".concat(se.fullToken,"` and `").concat(Z,"` at the same time"))}else if(ge.incompatibleTokens==="*"&&b.length>0)throw new RangeError("The format string mustn't contain `".concat(Z,"` and any other token at the same time"));b.push({token:Ce,fullToken:Z});var Te=ge.run(H,Z,te.match,Q);if(!Te)return{v:new Date(NaN)};ie.push(Te.setter),H=Te.rest}else{if(Ce.match(s6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ce+"`");if(Z==="''"?Z="'":Ce==="'"&&(Z=l6(Z)),H.indexOf(Z)===0)H=H.slice(Z.length);else return{v:new Date(NaN)}}};for(A.s();!(j=A.n()).done;){var v=z();if(ft(v)==="object")return v.v}}catch(be){A.e(be)}finally{A.f()}if(H.length>0&&o6.test(H))return new Date(NaN);var m=ie.map(function(be){return be.priority}).sort(function(be,Z){return Z-be}).filter(function(be,Z,Ce){return Ce.indexOf(be)===Z}).map(function(be){return ie.filter(function(Z){return Z.priority===be}).sort(function(Z,Ce){return Ce.subPriority-Z.subPriority})}).map(function(be){return be[0]}),O=ke(a);if(isNaN(O.getTime()))return new Date(NaN);var x=xo(O,Hn(O)),ae={},re=co(m),U;try{for(re.s();!(U=re.n()).done;){var f=U.value;if(!f.validate(x,Q))return new Date(NaN);var fe=f.set(x,ae,Q);Array.isArray(fe)?(x=fe[0],nT(ae,fe[1])):x=fe}}catch(be){re.e(be)}finally{re.f()}return x}function l6(t){return t.match(n6)[1].replace(a6,"'")}function ho(t,e){ve(2,arguments);var a=Tn(t),o=Tn(e);return a.getTime()===o.getTime()}function i6(t,e){ve(2,arguments);var a=$e(e);return jt(t,-a)}function r6(t,e){var a;ve(1,arguments);var o=$e((a=e==null?void 0:e.additionalDigits)!==null&&a!==void 0?a:2);if(o!==2&&o!==1&&o!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=m6(t),l;if(s.date){var i=h6(s.date,o);l=p6(i.restDateString,i.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var u=l.getTime(),h=0,p;if(s.time&&(h=_6(s.time),isNaN(h)))return new Date(NaN);if(s.timezone){if(p=v6(s.timezone),isNaN(p))return new Date(NaN)}else{var y=new Date(u+h),_=new Date(0);return _.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),_.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),_}return new Date(u+h+p)}var xn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d6=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u6=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c6=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m6(t){var e={},a=t.split(xn.dateTimeDelimiter),o;if(a.length>2)return e;if(/:/.test(a[0])?o=a[0]:(e.date=a[0],o=a[1],xn.timeZoneDelimiter.test(e.date)&&(e.date=t.split(xn.timeZoneDelimiter)[0],o=t.substr(e.date.length,t.length))),o){var s=xn.timezone.exec(o);s?(e.time=o.replace(s[1],""),e.timezone=s[1]):e.time=o}return e}function h6(t,e){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),o=t.match(a);if(!o)return{year:NaN,restDateString:""};var s=o[1]?parseInt(o[1]):null,l=o[2]?parseInt(o[2]):null;return{year:l===null?s:l*100,restDateString:t.slice((o[1]||o[2]).length)}}function p6(t,e){if(e===null)return new Date(NaN);var a=t.match(d6);if(!a)return new Date(NaN);var o=!!a[4],s=kn(a[1]),l=kn(a[2])-1,i=kn(a[3]),u=kn(a[4]),h=kn(a[5])-1;if(o)return k6(e,u,h)?f6(e,u,h):new Date(NaN);var p=new Date(0);return!g6(e,l,i)||!y6(e,s)?new Date(NaN):(p.setUTCFullYear(e,l,Math.max(s,i)),p)}function kn(t){return t?parseInt(t):1}function _6(t){var e=t.match(u6);if(!e)return NaN;var a=ra(e[1]),o=ra(e[2]),s=ra(e[3]);return $6(a,o,s)?a*Ya+o*Va+s*1e3:NaN}function ra(t){return t&&parseFloat(t.replace(",","."))||0}function v6(t){if(t==="Z")return 0;var e=t.match(c6);if(!e)return 0;var a=e[1]==="+"?-1:1,o=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return w6(o,s)?a*(o*Ya+s*Va):NaN}function f6(t,e,a){var o=new Date(0);o.setUTCFullYear(t,0,4);var s=o.getUTCDay()||7,l=(e-1)*7+a+1-s;return o.setUTCDate(o.getUTCDate()+l),o}var b6=[31,null,31,30,31,30,31,31,30,31,30,31];function Go(t){return t%400===0||t%4===0&&t%100!==0}function g6(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(b6[e]||(Go(t)?29:28))}function y6(t,e){return e>=1&&e<=(Go(t)?366:365)}function k6(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function $6(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function w6(t,e){return e>=0&&e<=59}function Jo(t,e){ve(2,arguments);var a=ke(t),o=$e(e),s=a.getFullYear(),l=a.getDate(),i=new Date(0);i.setFullYear(s,o,15),i.setHours(0,0,0,0);var u=oT(i);return a.setMonth(o,Math.min(l,u)),a}function qe(t,e){if(ve(2,arguments),ft(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var a=ke(t);return isNaN(a.getTime())?new Date(NaN):(e.year!=null&&a.setFullYear(e.year),e.month!=null&&(a=Jo(a,e.month)),e.date!=null&&a.setDate($e(e.date)),e.hours!=null&&a.setHours($e(e.hours)),e.minutes!=null&&a.setMinutes($e(e.minutes)),e.seconds!=null&&a.setSeconds($e(e.seconds)),e.milliseconds!=null&&a.setMilliseconds($e(e.milliseconds)),a)}function es(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return a.setHours(o),a}function Ia(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return a.setMilliseconds(o),a}function ts(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return a.setMinutes(o),a}function Na(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return a.setSeconds(o),a}function Pt(t,e){ve(2,arguments);var a=ke(t),o=$e(e);return isNaN(a.getTime())?new Date(NaN):(a.setFullYear(o),a)}function mn(t,e){ve(2,arguments);var a=$e(e);return yt(t,-a)}function C6(t,e){if(ve(2,arguments),!e||ft(e)!=="object")return new Date(NaN);var a=e.years?$e(e.years):0,o=e.months?$e(e.months):0,s=e.weeks?$e(e.weeks):0,l=e.days?$e(e.days):0,i=e.hours?$e(e.hours):0,u=e.minutes?$e(e.minutes):0,h=e.seconds?$e(e.seconds):0,p=mn(t,o+a*12),y=i6(p,l+s*7),_=u+i*60,w=h+_*60,D=w*1e3,S=new Date(y.getTime()-D);return S}function ns(t,e){ve(2,arguments);var a=$e(e);return Ua(t,-a)}function vn(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),n("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),n("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),n("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}vn.compatConfig={MODE:3};function as(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),n("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}as.compatConfig={MODE:3};function Ea(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Ea.compatConfig={MODE:3};function qa(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}qa.compatConfig={MODE:3};function La(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),n("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}La.compatConfig={MODE:3};function Wa(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Wa.compatConfig={MODE:3};function Ha(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}Ha.compatConfig={MODE:3};function za(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var os={exports:{}};(function(t){function e(a){return a&&a.__esModule?a:{default:a}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(os);var F6=os.exports,Ta={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(o){if(o===null||o===!0||o===!1)return NaN;var s=Number(o);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}t.exports=e.default})(Ta,Ta.exports);var T6=Ta.exports;const D6=za(T6);var Da={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(o){var s=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return s.setUTCFullYear(o.getFullYear()),o.getTime()-s.getTime()}t.exports=e.default})(Da,Da.exports);var P6=Da.exports;const po=za(P6);function S6(t,e){var a=j6(e);return a.formatToParts?M6(a,t):A6(a,t)}var O6={year:0,month:1,day:2,hour:3,minute:4,second:5};function M6(t,e){try{for(var a=t.formatToParts(e),o=[],s=0;s<a.length;s++){var l=O6[a[s].type];l>=0&&(o[l]=parseInt(a[s].value,10))}return o}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function A6(t,e){var a=t.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[o[3],o[1],o[2],o[4],o[5],o[6]]}var da={};function j6(t){if(!da[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),a=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";da[t]=a?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return da[t]}function Qa(t,e,a,o,s,l,i){var u=new Date(0);return u.setUTCFullYear(t,e,a),u.setUTCHours(o,s,l,i),u}var _o=36e5,U6=6e4,ua={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Xa(t,e,a){var o,s;if(t===""||(o=ua.timezoneZ.exec(t),o))return 0;var l;if(o=ua.timezoneHH.exec(t),o)return l=parseInt(o[1],10),vo(l)?-(l*_o):NaN;if(o=ua.timezoneHHMM.exec(t),o){l=parseInt(o[1],10);var i=parseInt(o[2],10);return vo(l,i)?(s=Math.abs(l)*_o+i*U6,l>0?-s:s):NaN}if(R6(t)){e=new Date(e||Date.now());var u=a?e:V6(e),h=Pa(u,t),p=a?h:Y6(e,h,t);return-p}return NaN}function V6(t){return Qa(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Pa(t,e){var a=S6(t,e),o=Qa(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime(),s=t.getTime(),l=s%1e3;return s-=l>=0?l:1e3+l,o-s}function Y6(t,e,a){var o=t.getTime(),s=o-e,l=Pa(new Date(s),a);if(e===l)return e;s-=l-e;var i=Pa(new Date(s),a);return l===i?l:Math.max(l,i)}function vo(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var fo={};function R6(t){if(fo[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),fo[t]=!0,!0}catch{return!1}}var ss=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ca=36e5,bo=6e4,x6=2,dt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ss};function Sa(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var a=e||{},o=a.additionalDigits==null?x6:D6(a.additionalDigits);if(o!==2&&o!==1&&o!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=B6(t),l=I6(s.date,o),i=l.year,u=l.restDateString,h=N6(u,i);if(isNaN(h))return new Date(NaN);if(h){var p=h.getTime(),y=0,_;if(s.time&&(y=E6(s.time),isNaN(y)))return new Date(NaN);if(s.timeZone||a.timeZone){if(_=Xa(s.timeZone||a.timeZone,new Date(p+y)),isNaN(_))return new Date(NaN)}else _=po(new Date(p+y)),_=po(new Date(p+y+_));return new Date(p+y+_)}else return new Date(NaN)}function B6(t){var e={},a=dt.dateTimePattern.exec(t),o;if(a?(e.date=a[1],o=a[3]):(a=dt.datePattern.exec(t),a?(e.date=a[1],o=a[2]):(e.date=null,o=t)),o){var s=dt.timeZone.exec(o);s?(e.time=o.replace(s[1],""),e.timeZone=s[1].trim()):e.time=o}return e}function I6(t,e){var a=dt.YYY[e],o=dt.YYYYY[e],s;if(s=dt.YYYY.exec(t)||o.exec(t),s){var l=s[1];return{year:parseInt(l,10),restDateString:t.slice(l.length)}}if(s=dt.YY.exec(t)||a.exec(t),s){var i=s[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}return{year:null}}function N6(t,e){if(e===null)return null;var a,o,s,l;if(t.length===0)return o=new Date(0),o.setUTCFullYear(e),o;if(a=dt.MM.exec(t),a)return o=new Date(0),s=parseInt(a[1],10)-1,yo(e,s)?(o.setUTCFullYear(e,s),o):new Date(NaN);if(a=dt.DDD.exec(t),a){o=new Date(0);var i=parseInt(a[1],10);return W6(e,i)?(o.setUTCFullYear(e,0,i),o):new Date(NaN)}if(a=dt.MMDD.exec(t),a){o=new Date(0),s=parseInt(a[1],10)-1;var u=parseInt(a[2],10);return yo(e,s,u)?(o.setUTCFullYear(e,s,u),o):new Date(NaN)}if(a=dt.Www.exec(t),a)return l=parseInt(a[1],10)-1,ko(e,l)?go(e,l):new Date(NaN);if(a=dt.WwwD.exec(t),a){l=parseInt(a[1],10)-1;var h=parseInt(a[2],10)-1;return ko(e,l,h)?go(e,l,h):new Date(NaN)}return null}function E6(t){var e,a,o;if(e=dt.HH.exec(t),e)return a=parseFloat(e[1].replace(",",".")),ma(a)?a%24*ca:NaN;if(e=dt.HHMM.exec(t),e)return a=parseInt(e[1],10),o=parseFloat(e[2].replace(",",".")),ma(a,o)?a%24*ca+o*bo:NaN;if(e=dt.HHMMSS.exec(t),e){a=parseInt(e[1],10),o=parseInt(e[2],10);var s=parseFloat(e[3].replace(",","."));return ma(a,o,s)?a%24*ca+o*bo+s*1e3:NaN}return null}function go(t,e,a){e=e||0,a=a||0;var o=new Date(0);o.setUTCFullYear(t,0,4);var s=o.getUTCDay()||7,l=e*7+a+1-s;return o.setUTCDate(o.getUTCDate()+l),o}var q6=[31,28,31,30,31,30,31,31,30,31,30,31],L6=[31,29,31,30,31,30,31,31,30,31,30,31];function ls(t){return t%400===0||t%4===0&&t%100!==0}function yo(t,e,a){if(e<0||e>11)return!1;if(a!=null){if(a<1)return!1;var o=ls(t);if(o&&a>L6[e]||!o&&a>q6[e])return!1}return!0}function W6(t,e){if(e<1)return!1;var a=ls(t);return!(a&&e>366||!a&&e>365)}function ko(t,e,a){return!(e<0||e>52||a!=null&&(a<0||a>6))}function ma(t,e,a){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||a!=null&&(a<0||a>=60))}var Oa={exports:{}},Ma={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(o,s){if(o==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l]);return o}t.exports=e.default})(Ma,Ma.exports);var H6=Ma.exports;(function(t,e){var a=F6.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var o=a(H6);function s(l){return(0,o.default)({},l)}t.exports=e.default})(Oa,Oa.exports);var z6=Oa.exports;const Q6=za(z6);function X6(t,e,a){var o=Sa(t,a),s=Xa(e,o,!0),l=new Date(o.getTime()-s),i=new Date(0);return i.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),i.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),i}function K6(t,e,a){if(typeof t=="string"&&!t.match(ss)){var o=Q6(a);return o.timeZone=e,Sa(t,o)}var s=Sa(t,a),l=Qa(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()).getTime(),i=Xa(e,new Date(l));return new Date(l+i)}function $o(t){return e=>new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function Z6(t){return e=>Nt(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:t})}const G6=(t,e,a)=>{const o=[1,2,3,4,5,6,7];let s;if(t!==null)try{s=o.map(Z6(t))}catch{s=o.map($o(e))}else s=o.map($o(e));const l=s.slice(0,a),i=s.slice(a+1,s.length);return[s[a]].concat(...i).concat(...l)},Ka=(t,e)=>{const a=[];for(let o=+t[0];o<=+t[1];o++)a.push({value:+o,text:`${o}`});return e?a.reverse():a},is=(t,e,a)=>{const o=[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>{const i=l<10?`0${l}`:l;return new Date(`2017-${i}-01T00:00:00+00:00`)});if(t!==null)try{const l=a==="long"?"MMMM":"MMM";return o.map((i,u)=>{const h=Nt(i,l,{locale:t});return{text:h.charAt(0).toUpperCase()+h.substring(1),value:u}})}catch{}const s=new Intl.DateTimeFormat(e,{month:a,timeZone:"UTC"});return o.map((l,i)=>{const u=s.format(l);return{text:u.charAt(0).toUpperCase()+u.substring(1),value:i}})},J6=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],Ge=t=>{const e=k(t);return e!=null&&e.$el?e==null?void 0:e.$el:e},eD=t=>Object.assign({type:"dot"},t),rs=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,Kn={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},Je=t=>t,wo=t=>t===0?t:!t||isNaN(+t)?null:+t,Co=t=>t===null,tD=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},nD=t=>{const e=[],a=o=>o.filter(s=>s);for(let o=0;o<t.length;o+=3){const s=[t[o],t[o+1],t[o+2]];e.push(a(s))}return e},Sn=(t,e,a)=>{const o=a!=null,s=e!=null;if(!o&&!s)return!1;const l=+a,i=+e;return o&&s?+t>l||+t<i:o?+t>l:s?+t<i:!1},hn=(t,e)=>nD(t).map(a=>a.map(o=>{const{active:s,disabled:l,isBetween:i,highlighted:u}=e(o);return{...o,active:s,disabled:l,className:{dp__overlay_cell_active:s,dp__overlay_cell:!s,dp__overlay_cell_disabled:l,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:l&&s,dp__cell_in_between:i,"dp--highlighted":u}}})),Et=(t,e,a=!1)=>{t&&e.allowStopPropagation&&(a&&t.stopImmediatePropagation(),t.stopPropagation())},aD=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function oD(t,e){let a=[...document.querySelectorAll(aD())];a=a.filter(s=>!t.contains(s)||s.hasAttribute("data-datepicker-instance"));const o=a.indexOf(t);if(o>=0&&(e?o-1>=0:o+1<=a.length))return a[o+(e?-1:1)]}const sD=(t,e)=>{let a;return function(...o){clearTimeout(a),a=setTimeout(()=>{t(...o)},e)}},Fo=(t,e,a,o,s)=>{const l=Fa(t,e.slice(0,t.length),new Date);return wn(l)&&Yo(l)?o||s?l:qe(l,{hours:+a.hours,minutes:+(a==null?void 0:a.minutes),seconds:+(a==null?void 0:a.seconds),milliseconds:0}):null},lD=(t,e,a,o,s)=>{const l=Array.isArray(a)?a[0]:a;if(typeof e=="string")return Fo(t,e,l,o,s);if(Array.isArray(e)){let i=null;for(const u of e)if(i=Fo(t,u,l,o,s),i)break;return i}return typeof e=="function"?e(t):null},K=t=>t?new Date(t):new Date,iD=(t,e,a)=>{if(e){const s=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),u=t.getMinutes().toString().padStart(2,"0"),h=a?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${s}-${l}T${i}:${u}:${h}.000Z`}const o=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(o).toISOString()},st=t=>{let e=K(JSON.parse(JSON.stringify(t)));return e=es(e,0),e=ts(e,0),e=Na(e,0),e=Ia(e,0),e},qt=(t,e,a,o)=>{let s=t?K(t):K();return(e||e===0)&&(s=es(s,+e)),(a||a===0)&&(s=ts(s,+a)),(o||o===0)&&(s=Na(s,+o)),Ia(s,0)},nt=(t,e)=>!t||!e?!1:Pn(st(t),st(e)),xe=(t,e)=>!t||!e?!1:dn(st(t),st(e)),ot=(t,e)=>!t||!e?!1:Dn(st(t),st(e)),Zn=(t,e,a)=>t!=null&&t[0]&&t!=null&&t[1]?ot(a,t[0])&&nt(a,t[1]):t!=null&&t[0]&&e?ot(a,t[0])&&nt(a,e)||nt(a,t[0])&&ot(a,e):!1,gt=t=>{const e=qe(new Date(t),{date:1});return st(e)},ha=(t,e,a)=>e&&(a||a===0)?Object.fromEntries(["hours","minutes","seconds"].map(o=>o===e?[o,a]:[o,isNaN(+t[o])?void 0:+t[o]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},Kt=t=>({hours:kt(t),minutes:St(t),seconds:cn(t)}),ds=(t,e)=>{if(e){const a=Me(K(e));if(a>t)return 12;if(a===t)return Ve(K(e))}},us=(t,e)=>{if(e){const a=Me(K(e));return a<t?-1:a===t?Ve(K(e)):void 0}},pn=t=>{if(t)return Me(K(t))},$t=(t,e)=>e?X6(t,e):t,cs=(t,e)=>e?K6(t,e):t,rD=t=>t instanceof Date?t:r6(t),ms=(t,e)=>{const a=ot(t,e)?e:t,o=ot(e,t)?e:t;return Ro({start:a,end:o})},dD=t=>{const e=yt(t,1);return{month:Ve(e),year:Me(e)}},Nn=(t,e,a)=>{const o=Gt($t(t,e),{weekStartsOn:+a}),s=GF($t(t,e),{weekStartsOn:+a});return[o,s]},hs=(t,e)=>{const a={hours:kt(K()),minutes:St(K()),seconds:e?cn(K()):0};return Object.assign(a,t)},It=(t,e,a)=>[qe(K(t),{date:1}),qe(K(),{month:e,year:a,date:1})],Ut=(t,e,a)=>{let o=t?K(t):K();return(e||e===0)&&(o=Jo(o,e)),a&&(o=Pt(o,a)),o},ps=(t,e,a,o,s)=>{if(!o||s&&!e||!s&&!a)return!1;const l=s?yt(t,1):mn(t,1),i=[Ve(l),Me(l)];return s?!cD(...i,e):!uD(...i,a)},uD=(t,e,a)=>nt(...It(a,t,e))||xe(...It(a,t,e)),cD=(t,e,a)=>ot(...It(a,t,e))||xe(...It(a,t,e)),_s=(t,e,a,o,s,l,i)=>{if(typeof e=="function"&&!i)return e(t);const u=a?{locale:a}:void 0;return Array.isArray(t)?`${Nt(t[0],l,u)}${s&&!t[1]?"":o}${t[1]?Nt(t[1],l,u):""}`:Nt(t,l,u)},sn=t=>{if(t)return null;throw new Error(Kn.prop("partial-range"))},Bn=(t,e)=>{if(e)return t();throw new Error(Kn.prop("range"))},Aa=t=>Array.isArray(t)?wn(t[0])&&(t[1]?wn(t[1]):!0):t?wn(t):!1,mD=(t,e)=>qe(e??K(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),pa=(t,e,a,o)=>{if(!t)return!0;if(o){const s=a==="max"?Pn(t,e):Dn(t,e),l={seconds:0,milliseconds:0};return s||dn(qe(t,l),qe(e,l))}return a==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},_a=(t,e,a)=>t?mD(t,e):K(a??e),To=(t,e,a,o,s)=>{if(Array.isArray(o)){const i=_a(t,o[0],e),u=_a(t,o[1],e);return pa(o[0],i,a,!!e)&&pa(o[1],u,a,!!e)&&s}const l=_a(t,o,e);return pa(o,l,a,!!e)&&s},va=t=>qe(K(),Kt(t)),hD=(t,e)=>Array.isArray(t)?t.map(a=>K(a)).filter(a=>Me(K(a))===e).map(a=>Ve(a)):[],vs=(t,e,a)=>typeof t=="function"?t({month:e,year:a}):!!t.months.find(o=>o.month===e&&o.year===a),Za=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),$n=Mn({menuFocused:!1,shiftKeyInMenu:!1}),fs=()=>{const t=a=>{$n.menuFocused=a},e=a=>{$n.shiftKeyInMenu!==a&&($n.shiftKeyInMenu=a)};return{control:J(()=>({shiftKeyInMenu:$n.shiftKeyInMenu,menuFocused:$n.menuFocused})),setMenuFocused:t,setShiftKey:e}},Ee=Mn({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),fa=ue(null),In=ue(!1),ba=ue(!1),ga=ue(!1),ya=ue(!1),rt=ue(0),tt=ue(0),zt=()=>{const t=J(()=>In.value?[...Ee.selectionGrid,Ee.actionRow].filter(_=>_.length):ba.value?[...Ee.timePicker[0],...Ee.timePicker[1],ya.value?[]:[fa.value],Ee.actionRow].filter(_=>_.length):ga.value?[...Ee.monthPicker,Ee.actionRow]:[Ee.monthYear,...Ee.calendar,Ee.time,Ee.actionRow].filter(_=>_.length)),e=_=>{rt.value=_?rt.value+1:rt.value-1;let w=null;t.value[tt.value]&&(w=t.value[tt.value][rt.value]),w||(rt.value=_?rt.value-1:rt.value+1)},a=_=>{tt.value===0&&!_||tt.value===t.value.length&&_||(tt.value=_?tt.value+1:tt.value-1,t.value[tt.value]?t.value[tt.value]&&!t.value[tt.value][rt.value]&&rt.value!==0&&(rt.value=t.value[tt.value].length-1):tt.value=_?tt.value-1:tt.value+1)},o=_=>{let w=null;t.value[tt.value]&&(w=t.value[tt.value][rt.value]),w?w.focus({preventScroll:!In.value}):rt.value=_?rt.value-1:rt.value+1},s=()=>{e(!0),o(!0)},l=()=>{e(!1),o(!1)},i=()=>{a(!1),o(!0)},u=()=>{a(!0),o(!0)},h=(_,w)=>{Ee[w]=_},p=(_,w)=>{Ee[w]=_},y=()=>{rt.value=0,tt.value=0};return{buildMatrix:h,buildMultiLevelMatrix:p,setTimePickerBackRef:_=>{fa.value=_},setSelectionGrid:_=>{In.value=_,y(),_||(Ee.selectionGrid=[])},setTimePicker:(_,w=!1)=>{ba.value=_,ya.value=w,y(),_||(Ee.timePicker[0]=[],Ee.timePicker[1]=[])},setTimePickerElements:(_,w=0)=>{Ee.timePicker[w]=_},arrowRight:s,arrowLeft:l,arrowUp:i,arrowDown:u,clearArrowNav:()=>{Ee.monthYear=[],Ee.calendar=[],Ee.time=[],Ee.actionRow=[],Ee.selectionGrid=[],Ee.timePicker[0]=[],Ee.timePicker[1]=[],In.value=!1,ba.value=!1,ya.value=!1,ga.value=!1,y(),fa.value=null},setMonthPicker:_=>{ga.value=_,y()},refSets:Ee}},Do=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),pD=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...t??{}}),Po=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,_D=t=>{const e=typeof t=="object"&&t,a={static:!0,solo:!1};if(!t)return{...a,count:Po(!1)};const o=e?t:{},s=e?o.count??!0:t,l=Po(s);return Object.assign(a,o,{count:l})},vD=(t,e,a)=>t||(typeof a=="string"?a:e),fD=t=>typeof t=="boolean"?t?Do({}):!1:Do(t),bD=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},gD=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),yD=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),kD=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},$D=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...t??{}}),wD=(t,e,a)=>{const o={dates:Array.isArray(t)?t.map(s=>K(s)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:a}};return typeof t=="function"?t:{...o,...t??{}}},CD=t=>typeof t=="object"?{type:t.type,hideOnOffsetDates:t.hideOnOffsetDates??!1}:{type:t,hideOnOffsetDates:!1},Ke=t=>{const e=()=>{const V=t.enableSeconds?":ss":"";return t.is24?`HH:mm${V}`:`hh:mm${V} aa`},a=()=>t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?"MM/dd/yyyy":t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",o=V=>hs(V,t.enableSeconds),s=()=>t.range?t.startTime&&Array.isArray(t.startTime)?[o(t.startTime[0]),o(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?o(t.startTime):null,l=J(()=>_D(t.multiCalendars)),i=J(()=>s()),u=J(()=>pD(t.ariaLabels)),h=J(()=>gD(t.filters)),p=J(()=>fD(t.transitions)),y=J(()=>yD(t.actionRow)),_=J(()=>vD(t.previewFormat,t.format,a())),w=J(()=>bD(t.textInput)),D=J(()=>kD(t.inline)),S=J(()=>$D(t.config)),B=J(()=>wD(t.highlight,t.highlightWeekDays,t.highlightDisabledDays)),G=J(()=>CD(t.weekNumbers));return{defaultedTransitions:p,defaultedMultiCalendars:l,defaultedStartTime:i,defaultedAriaLabels:u,defaultedFilters:h,defaultedActionRow:y,defaultedPreviewFormat:_,defaultedTextInput:w,defaultedInline:D,defaultedConfig:S,defaultedHighlight:B,defaultedWeekNumbers:G,getDefaultPattern:a,getDefaultStartTime:s}},FD=(t,e,a)=>{const o=ue(),{defaultedTextInput:s,getDefaultPattern:l}=Ke(e),i=ue(""),u=En(e,"format");Ht(o,()=>{t("internal-model-change",o.value)}),Ht(u,()=>{R()});const h=m=>cs(m,e.timezone),p=m=>$t(m,e.timezone),y=(m,O,x=!1)=>_s(m,e.format,e.formatLocale,s.value.rangeSeparator,e.modelAuto,O??l(),x),_=m=>m?e.modelType?A(m):{hours:kt(m),minutes:St(m),seconds:e.enableSeconds?cn(m):0}:null,w=m=>e.modelType?A(m):{month:Ve(m),year:Me(m)},D=m=>Array.isArray(m)?e.multiDates?m.map(O=>S(O,Pt(K(),O))):Bn(()=>[Pt(K(),m[0]),m[1]?Pt(K(),m[1]):sn(e.partialRange)],e.range):Pt(K(),+m),S=(m,O)=>(typeof m=="string"||typeof m=="number")&&e.modelType?b(m):O,B=m=>Array.isArray(m)?[S(m[0],qt(null,+m[0].hours,+m[0].minutes,m[0].seconds)),S(m[1],qt(null,+m[1].hours,+m[1].minutes,m[1].seconds))]:S(m,qt(null,m.hours,m.minutes,m.seconds)),G=m=>Array.isArray(m)?e.multiDates?m.map(O=>S(O,Ut(null,+O.month,+O.year))):Bn(()=>[S(m[0],Ut(null,+m[0].month,+m[0].year)),S(m[1],m[1]?Ut(null,+m[1].month,+m[1].year):sn(e.partialRange))],e.range):S(m,Ut(null,+m.month,+m.year)),V=m=>{if(Array.isArray(m))return m.map(O=>b(O));throw new Error(Kn.dateArr("multi-dates"))},Y=m=>{if(Array.isArray(m))return[K(m[0]),K(m[1])];throw new Error(Kn.dateArr("week-picker"))},ee=m=>e.modelAuto?Array.isArray(m)?[b(m[0]),b(m[1])]:e.autoApply?[b(m)]:[b(m),null]:Array.isArray(m)?Bn(()=>[b(m[0]),m[1]?b(m[1]):sn(e.partialRange)],e.range):b(m),P=()=>{Array.isArray(o.value)&&e.range&&o.value.length===1&&o.value.push(sn(e.partialRange))},W=()=>{const m=o.value;return[A(m[0]),m[1]?A(m[1]):sn(e.partialRange)]},H=()=>o.value[1]?W():A(Je(o.value[0])),L=()=>(o.value||[]).map(m=>A(m)),pe=()=>(P(),e.modelAuto?H():e.multiDates?L():Array.isArray(o.value)?Bn(()=>W(),e.range):A(Je(o.value))),te=m=>!m||Array.isArray(m)&&!m.length?null:e.timePicker?B(Je(m)):e.monthPicker?G(Je(m)):e.yearPicker?D(Je(m)):e.multiDates?V(Je(m)):e.weekPicker?Y(Je(m)):ee(Je(m)),g=m=>{const O=te(m);Aa(Je(O))?(o.value=Je(O),R()):(o.value=null,i.value="")},M=()=>{const m=O=>Nt(O,s.value.format);return`${m(o.value[0])} ${s.value.rangeSeparator} ${o.value[1]?m(o.value[1]):""}`},Q=()=>a.value&&o.value?Array.isArray(o.value)?M():Nt(o.value,s.value.format):y(o.value),ie=()=>o.value?e.multiDates?o.value.map(m=>y(m)).join("; "):s.value.enabled&&typeof s.value.format=="string"?Q():y(o.value):"",R=()=>{!e.format||typeof e.format=="string"||s.value.enabled&&typeof s.value.format=="string"?i.value=ie():i.value=e.format(o.value)},b=m=>{if(e.utc){const O=new Date(m);return e.utc==="preserve"?new Date(O.getTime()+O.getTimezoneOffset()*6e4):O}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?p(new Date(m)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?Fa(m,l(),new Date):p(Fa(m,e.modelType,new Date)):p(new Date(m))},A=m=>m?e.utc?iD(m,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+h(m):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?y(h(m)):y(h(m),e.modelType,!0):h(m):"",j=(m,O=!1)=>{if(t("update:model-value",m),e.emitTimezone&&O){const x=Array.isArray(m)?m.map(ae=>$t(Je(ae)),e.emitTimezone):$t(Je(m),e.emitTimezone);t("update:model-timezone-value",x)}},z=m=>Array.isArray(o.value)?e.multiDates?o.value.map(O=>m(O)):[m(o.value[0]),o.value[1]?m(o.value[1]):sn(e.partialRange)]:m(Je(o.value)),v=m=>j(Je(z(m)));return{inputValue:i,internalModelValue:o,checkBeforeEmit:()=>o.value?e.range?e.partialRange?o.value.length>=1:o.value.length===2:!!o.value:!1,parseExternalModelValue:g,formatInputValue:R,emitModelValue:()=>(R(),e.monthPicker?v(w):e.timePicker?v(_):e.yearPicker?v(Me):e.weekPicker?j(o.value.map(m=>A(m)),!0):j(pe(),!0))}},TD=(t,e)=>{const{defaultedFilters:a}=Ke(t),{validateMonthYearInRange:o}=nn(t),s=(p,y)=>{let _=p;return a.value.months.includes(Ve(_))?(_=y?yt(p,1):mn(p,1),s(_,y)):_},l=(p,y)=>{let _=p;return a.value.years.includes(Me(_))?(_=y?Ua(p,1):ns(p,1),l(_,y)):_},i=(p,y=!1)=>{const _=qe(new Date,{month:t.month,year:t.year});let w=p?yt(_,1):mn(_,1);t.disableYearSelect&&(w=Pt(w,t.year));let D=Ve(w),S=Me(w);a.value.months.includes(D)&&(w=s(w,p),D=Ve(w),S=Me(w)),a.value.years.includes(S)&&(w=l(w,p),S=Me(w)),o(D,S,p,t.preventMinMaxNavigation)&&u(D,S,y)},u=(p,y,_)=>{e("update-month-year",{month:p,year:y,fromNav:_})},h=J(()=>p=>ps(qe(new Date,{month:t.month,year:t.year}),t.maxDate,t.minDate,t.preventMinMaxNavigation,p));return{handleMonthYearChange:i,isDisabled:h,updateMonthYear:u}};var ln=(t=>(t.center="center",t.left="left",t.right="right",t))(ln||{}),bt=(t=>(t.month="month",t.year="year",t))(bt||{}),Xt=(t=>(t.top="top",t.bottom="bottom",t))(Xt||{}),Zt=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(Zt||{}),Ft=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(Ft||{});const DD=({menuRef:t,menuRefInner:e,inputRef:a,pickerWrapperRef:o,inline:s,emit:l,props:i,slots:u})=>{const h=ue({}),p=ue(!1),y=ue({top:"0",left:"0"}),_=ue(!1),w=En(i,"teleportCenter");Ht(w,()=>{y.value=JSON.parse(JSON.stringify({})),P()});const D=b=>{if(i.teleport){const A=b.getBoundingClientRect();return{left:A.left+window.scrollX,top:A.top+window.scrollY}}return{top:0,left:0}},S=(b,A)=>{y.value.left=`${b+A-h.value.width}px`},B=b=>{y.value.left=`${b}px`},G=(b,A)=>{i.position===ln.left&&B(b),i.position===ln.right&&S(b,A),i.position===ln.center&&(y.value.left=`${b+A/2-h.value.width/2}px`)},V=b=>{const{width:A,height:j}=b.getBoundingClientRect(),{top:z,left:v}=i.altPosition?i.altPosition(b):D(b);return{top:+z,left:+v,width:A,height:j}},Y=()=>{y.value.left="50%",y.value.top="50%",y.value.transform="translate(-50%, -50%)",y.value.position="fixed",delete y.value.opacity},ee=()=>{const b=Ge(a),{top:A,left:j,transform:z}=i.altPosition(b);y.value={top:`${A}px`,left:`${j}px`,transform:z??""}},P=(b=!0)=>{var A;if(!s.value.enabled){if(w.value)return Y();if(i.altPosition!==null)return ee();if(b){const j=i.teleport?(A=e.value)==null?void 0:A.$el:t.value;j&&(h.value=j.getBoundingClientRect()),l("recalculate-position")}return M()}},W=({inputEl:b,left:A,width:j})=>{window.screen.width>768&&!p.value&&G(A,j),pe(b)},H=b=>{const{top:A,left:j,height:z,width:v}=V(b);y.value.top=`${z+A+ +i.offset}px`,_.value=!1,p.value||(y.value.left=`${j+v/2-h.value.width/2}px`),W({inputEl:b,left:j,width:v})},L=b=>{const{top:A,left:j,width:z}=V(b);y.value.top=`${A-+i.offset-h.value.height}px`,_.value=!0,W({inputEl:b,left:j,width:z})},pe=b=>{if(i.autoPosition){const{left:A,width:j}=V(b),{left:z,right:v}=h.value;if(!p.value){if(Math.abs(z)!==Math.abs(v)){if(z<=0)return p.value=!0,B(A);if(v>=document.documentElement.clientWidth)return p.value=!0,S(A,j)}return G(A,j)}}},te=()=>{const b=Ge(a);if(b){const{height:A}=h.value,{top:j,height:z}=b.getBoundingClientRect(),v=window.innerHeight-j-z,m=j;return A<=v?Xt.bottom:A>v&&A<=m?Xt.top:v>=m?Xt.bottom:Xt.top}return Xt.bottom},g=b=>te()===Xt.bottom?H(b):L(b),M=()=>{const b=Ge(a);if(b)return i.autoPosition?g(b):H(b)},Q=function(b){if(b){const A=b.scrollHeight>b.clientHeight,j=window.getComputedStyle(b).overflowY.indexOf("hidden")!==-1;return A&&!j}return!0},ie=function(b){return!b||b===document.body||b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:Q(b)?b:ie(b.parentNode)},R=b=>{if(b)switch(i.position){case ln.left:return{left:0,transform:"translateX(0)"};case ln.right:return{left:`${b.width}px`,transform:"translateX(-100%)"};default:return{left:`${b.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:_,menuStyle:y,xCorrect:p,setMenuPosition:P,getScrollableParent:ie,shadowRender:(b,A)=>{var j,z,v;const m=document.createElement("div"),O=(j=Ge(a))==null?void 0:j.getBoundingClientRect();m.setAttribute("id","dp--temp-container");const x=(z=o.value)!=null&&z.clientWidth?o.value:document.body;x.append(m);const ae=R(O),re=Ds(b,{...A,shadow:!0,style:{opacity:0,position:"absolute",...ae}},Object.fromEntries(Object.keys(u).filter(U=>["right-sidebar","left-sidebar"].includes(U)).map(U=>[U,u[U]])));to(re,m),h.value=(v=re.el)==null?void 0:v.getBoundingClientRect(),to(null,m),x.removeChild(m)}}},Bt=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],PD=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],SD={all:()=>Bt,monthYear:()=>Bt.filter(t=>t.use.includes("month-year")),input:()=>PD,timePicker:()=>Bt.filter(t=>t.use.includes("time")),action:()=>Bt.filter(t=>t.use.includes("action")),calendar:()=>Bt.filter(t=>t.use.includes("calendar")),menu:()=>Bt.filter(t=>t.use.includes("menu")),shared:()=>Bt.filter(t=>t.use.includes("shared")),yearMode:()=>Bt.filter(t=>t.use.includes("year-mode"))},ht=(t,e,a)=>{const o=[];return SD[e]().forEach(s=>{t[s.name]&&o.push(s.name)}),a!=null&&a.length&&a.forEach(s=>{s.slot&&o.push(s.slot)}),o},An=t=>{const e=J(()=>o=>t.value?o?t.value.open:t.value.close:""),a=J(()=>o=>t.value?o?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:a}},jn=(t,e)=>{const a=K($t(new Date,t.timezone)),o=ue([{month:Ve(a),year:Me(a)}]),s=Mn({hours:t.range?[kt(a),kt(a)]:kt(a),minutes:t.range?[St(a),St(a)]:St(a),seconds:t.range?[0,0]:0}),l=J({get:()=>t.internalModelValue,set:h=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",h)}}),i=J(()=>h=>o.value[h]?o.value[h].month:0),u=J(()=>h=>o.value[h]?o.value[h].year:0);return{calendars:o,time:s,modelValue:l,month:i,year:u}},OD=(t,e)=>{const{defaultedMultiCalendars:a,defaultedHighlight:o}=Ke(e),{isDisabled:s,matchDate:l}=nn(e),i=ue(null),u=ue(K($t(new Date,e.timezone))),h=v=>{!v.current&&e.hideOffsetDates||(i.value=v.value)},p=()=>{i.value=null},y=v=>Array.isArray(t.value)&&e.range&&t.value[0]&&i.value?v?ot(i.value,t.value[0]):nt(i.value,t.value[0]):!0,_=(v,m)=>{const O=()=>t.value?m?t.value[0]||null:t.value[1]:null,x=t.value&&Array.isArray(t.value)?O():null;return xe(K(v.value),x)},w=v=>{const m=Array.isArray(t.value)?t.value[0]:null;return v?!nt(i.value??null,m):!0},D=(v,m=!0)=>(e.range||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!v.current?!1:xe(K(v.value),t.value[m?0:1]):e.range?_(v,m)&&w(m)||xe(v.value,Array.isArray(t.value)?t.value[0]:null)&&y(m):!1,S=(v,m,O)=>Array.isArray(t.value)&&t.value[0]&&t.value.length===1?v?!1:O?ot(t.value[0],m.value):nt(t.value[0],m.value):!1,B=v=>!t.value||e.hideOffsetDates&&!v.current?!1:e.range?e.modelAuto&&Array.isArray(t.value)?xe(v.value,t.value[0]?t.value[0]:u.value):!1:e.multiDates&&Array.isArray(t.value)?t.value.some(m=>xe(m,v.value)):xe(v.value,t.value?t.value:u.value),G=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=jt(i.value,+e.autoRange),O=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?xe(O[1],K(v.value)):xe(m,K(v.value))}return!1}return!1},V=v=>{if(e.autoRange||e.weekPicker){if(i.value){const m=jt(i.value,+e.autoRange);if(e.hideOffsetDates&&!v.current)return!1;const O=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?ot(v.value,O[0])&&nt(v.value,O[1]):ot(v.value,i.value)&&nt(v.value,m)}return!1}return!1},Y=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?xe(m[0],v.value):xe(i.value,v.value)}return!1}return!1},ee=v=>Zn(t.value,i.value,v.value),P=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,W=()=>e.modelAuto?rs(e.internalModelValue):!0,H=v=>{if(Array.isArray(t.value)&&t.value.length||e.weekPicker)return!1;const m=e.range?!D(v)&&!D(v,!1):!0;return!s(v.value)&&!B(v)&&!(!v.current&&e.hideOffsetDates)&&m},L=v=>e.range?e.modelAuto?P()&&B(v):!1:B(v),pe=v=>{var m;return o.value?typeof o.value=="function"?o.value(v.value):l(v.value,(m=e.arrMapValues)!=null&&m.highlightedDates?e.arrMapValues.highlightedDates:o.value.dates):!1},te=v=>{const m=s(v.value);return m&&(typeof o.value=="function"?!o.value(v.value,m):!o.value.options.highlightDisabled)},g=v=>{var m;return typeof o.value=="function"?o.value(v.value):(m=o.value.weekdays)==null?void 0:m.includes(v.value.getDay())},M=v=>(e.range||e.weekPicker)&&(!(a.value.count>0)||v.current)&&W()&&!(!v.current&&e.hideOffsetDates)&&!B(v)?ee(v):!1,Q=v=>{const{isRangeStart:m,isRangeEnd:O}=b(v),x=e.range?m||O:!1;return{dp__cell_offset:!v.current,dp__pointer:!e.disabled&&!(!v.current&&e.hideOffsetDates)&&!s(v.value),dp__cell_disabled:s(v.value),dp__cell_highlight:!te(v)&&(pe(v)||g(v))&&!L(v)&&!x&&!Y(v)&&!(M(v)&&e.weekPicker)&&!O,dp__cell_highlight_active:!te(v)&&(pe(v)||g(v))&&L(v),dp__today:!e.noToday&&xe(v.value,u.value)&&v.current}},ie=v=>({dp__active_date:L(v),dp__date_hover:H(v)}),R=v=>({...A(v),...j(v),dp__range_between_week:M(v)&&e.weekPicker}),b=v=>{const m=a.value.count>0?v.current&&D(v)&&W():D(v)&&W(),O=a.value.count>0?v.current&&D(v,!1)&&W():D(v,!1)&&W();return{isRangeStart:m,isRangeEnd:O}},A=v=>{const{isRangeStart:m,isRangeEnd:O}=b(v);return{dp__range_start:m,dp__range_end:O,dp__range_between:M(v)&&!e.weekPicker,dp__date_hover_start:S(H(v),v,!0),dp__date_hover_end:S(H(v),v,!1)}},j=v=>({...A(v),dp__cell_auto_range:V(v),dp__cell_auto_range_start:Y(v),dp__cell_auto_range_end:G(v)}),z=v=>e.range?e.autoRange?j(v):e.modelAuto?{...ie(v),...A(v)}:A(v):e.weekPicker?R(v):ie(v);return{setHoverDate:h,clearHoverDate:p,getDayClassData:v=>e.hideOffsetDates&&!v.current?{}:{...Q(v),...z(v),[e.dayClass?e.dayClass(v.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},nn=t=>{const{defaultedFilters:e,defaultedHighlight:a}=Ke(t),o=()=>{if(t.timezone)return t.timezone;if(t.utc)return"UTC"},s=g=>{const M=st(l(K(g))).toISOString(),[Q]=M.split("T");return Q},l=g=>t.utc==="preserve"?cs(g,o()):$t(g,o()),i=g=>{var M;const Q=t.maxDate?ot(g,l(K(t.maxDate))):!1,ie=t.minDate?nt(g,l(K(t.minDate))):!1,R=y(l(g),(M=t.arrMapValues)!=null&&M.disabledDates?t.arrMapValues.disabledDates:t.disabledDates),b=e.value.months.map(m=>+m).includes(Ve(g)),A=t.disabledWeekDays.length?t.disabledWeekDays.some(m=>+m===aT(g)):!1,j=w(g),z=Me(g),v=z<+t.yearRange[0]||z>+t.yearRange[1];return!(Q||ie||R||b||v||A||j)},u=(g,M)=>nt(...It(t.minDate,g,M))||xe(...It(t.minDate,g,M)),h=(g,M)=>ot(...It(t.maxDate,g,M))||xe(...It(t.maxDate,g,M)),p=(g,M,Q)=>{let ie=!1;return t.maxDate&&Q&&h(g,M)&&(ie=!0),t.minDate&&!Q&&u(g,M)&&(ie=!0),ie},y=(g,M)=>g?M instanceof Map?!!M.get(s(g)):Array.isArray(M)?M.some(Q=>xe(l(K(Q)),g)):M?M(K(JSON.parse(JSON.stringify(g)))):!1:!0,_=(g,M,Q,ie)=>{let R=!1;return ie?t.minDate&&t.maxDate?R=p(g,M,Q):(t.minDate&&u(g,M)||t.maxDate&&h(g,M))&&(R=!0):R=!0,R},w=g=>{var M,Q,ie,R,b;return Array.isArray(t.allowedDates)&&!((M=t.allowedDates)!=null&&M.length)?!0:(Q=t.arrMapValues)!=null&&Q.allowedDates?!y(g,(ie=t.arrMapValues)==null?void 0:ie.allowedDates):(R=t.allowedDates)!=null&&R.length?!((b=t.allowedDates)!=null&&b.some(A=>xe(st(A),l(st(g))))):!1},D=g=>!i(g),S=g=>t.noDisabledRange?!Ro({start:g[0],end:g[1]}).some(M=>D(M)):!0,B=(g,M,Q=0)=>{if(Array.isArray(M)&&M[Q]){const ie=HF(g,M[Q]),R=ms(M[Q],g),b=R.length===1?0:R.filter(j=>D(j)).length,A=Math.abs(ie)-b;if(t.minRange&&t.maxRange)return A>=+t.minRange&&A<=+t.maxRange;if(t.minRange)return A>=+t.minRange;if(t.maxRange)return A<=+t.maxRange}return!0},G=g=>new Map(g.map(M=>[s(M),!0])),V=g=>Array.isArray(g)&&g.length>0,Y=()=>{const g={disabledDates:null,allowedDates:null,highlightedDates:null};return V(t.allowedDates)&&(g.allowedDates=G(t.allowedDates)),typeof a.value!="function"&&V(a.value.dates)&&(g.highlightedDates=G(a.value.dates)),V(t.disabledDates)&&(g.disabledDates=G(t.disabledDates)),g},ee=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,P=g=>Array.isArray(g)?[g[0]?va(g[0]):null,g[1]?va(g[1]):null]:va(g),W=(g,M,Q)=>g.find(ie=>+ie.hours===kt(M)&&ie.minutes==="*"?!0:+ie.minutes===St(M)&&+ie.hours===kt(M))&&Q,H=(g,M,Q)=>{const[ie,R]=g,[b,A]=M;return!W(ie,b,Q)&&!W(R,A,Q)&&Q},L=(g,M)=>{const Q=Array.isArray(M)?M:[M];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?H(t.disabledTimes,Q,g):!Q.some(ie=>W(t.disabledTimes,ie,g)):g},pe=(g,M)=>{const Q=Array.isArray(M)?[Kt(M[0]),M[1]?Kt(M[1]):void 0]:Kt(M),ie=!t.disabledTimes(Q);return g&&ie},te=(g,M)=>t.disabledTimes?Array.isArray(t.disabledTimes)?L(M,g):pe(M,g):M;return{isDisabled:D,validateDate:i,validateMonthYearInRange:_,isDateRangeAllowed:S,checkMinMaxRange:B,matchDate:y,mapDatesArrToMap:Y,isValidTime:g=>{let M=!0;if(!g||ee())return!0;const Q=!t.minDate&&!t.maxDate?P(g):g;return(t.maxTime||t.maxDate)&&(M=To(t.maxTime,t.maxDate,"max",Je(Q),M)),(t.minTime||t.minDate)&&(M=To(t.minTime,t.minDate,"min",Je(Q),M)),te(g,M)}}},Gn=()=>{const t=J(()=>(o,s)=>o==null?void 0:o.includes(s)),e=J(()=>(o,s)=>o.count?o.solo?!0:s===0:!0),a=J(()=>(o,s)=>o.count?o.solo?!0:s===o.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:a}},MD=(t,e,a)=>{const o=ue(0),s=Mn({[Zt.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[Zt.calendar]:!1,[Zt.header]:!1}),l=J(()=>t.monthPicker),i=_=>{var w;if((w=t.flow)!=null&&w.length){if(!_&&l.value)return y();s[_]=!0,Object.keys(s).filter(D=>!s[D]).length||y()}},u=()=>{var _;(_=t.flow)!=null&&_.length&&o.value!==-1&&(o.value+=1,e("flow-step",o.value),y())},h=()=>{o.value=-1},p=(_,w,...D)=>{t.flow[o.value]===_&&a.value&&a.value[w](...D)},y=()=>{p(Ft.month,"toggleMonthPicker",!0),p(Ft.year,"toggleYearPicker",!0),p(Ft.calendar,"toggleTimePicker",!1,!0),p(Ft.time,"toggleTimePicker",!0,!0);const _=t.flow[o.value];(_===Ft.hours||_===Ft.minutes||_===Ft.seconds)&&p(_,"toggleTimePicker",!0,!0,_)};return{childMount:i,updateFlowStep:u,resetFlow:h,flowStep:o}},Jn={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},wt={...Jn,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},AD={key:1,class:"dp__input_wrap"},jD=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],UD={key:2,class:"dp__clear_icon"},VD=et({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Jn},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(t,{expose:e,emit:a}){const o=a,s=t,{defaultedTextInput:l,defaultedAriaLabels:i,defaultedInline:u,defaultedConfig:h,getDefaultPattern:p,getDefaultStartTime:y}=Ke(s),{checkMinMaxRange:_}=nn(s),w=ue(),D=ue(null),S=ue(!1),B=ue(!1),G=J(()=>({dp__pointer:!s.disabled&&!s.readonly&&!l.value.enabled,dp__disabled:s.disabled,dp__input_readonly:!l.value.enabled,dp__input:!0,dp__input_icon_pad:!s.hideInputIcon,dp__input_valid:!!s.state,dp__input_invalid:s.state===!1,dp__input_focus:S.value||s.isMenuOpen,dp__input_reg:!l.value.enabled,[s.inputClassName]:!!s.inputClassName})),V=()=>{o("set-input-date",null),s.autoApply&&(o("set-empty-date"),w.value=null)},Y=R=>{const b=y();return lD(R,l.value.format??p(),b??hs({},s.enableSeconds),s.inputValue,B.value)},ee=R=>{const{rangeSeparator:b}=l.value,[A,j]=R.split(`${b}`);if(A){const z=Y(A.trim()),v=j?Y(j.trim()):null,m=z&&v?[z,v]:[z];_(v,m,0)&&(w.value=z?m:null)}},P=()=>{B.value=!0},W=R=>{if(s.range)ee(R);else if(s.multiDates){const b=R.split(";");w.value=b.map(A=>Y(A.trim())).filter(A=>A)}else w.value=Y(R)},H=R=>{var b;const A=typeof R=="string"?R:(b=R.target)==null?void 0:b.value;A!==""?(l.value.openMenu&&!s.isMenuOpen&&o("open"),W(A),o("set-input-date",w.value)):V(),B.value=!1,o("update:input-value",A)},L=R=>{l.value.enabled?(W(R.target.value),l.value.enterSubmit&&Aa(w.value)&&s.inputValue!==""?(o("set-input-date",w.value,!0),w.value=null):l.value.enterSubmit&&s.inputValue===""&&(w.value=null,o("clear"))):g(R)},pe=R=>{l.value.enabled&&l.value.tabSubmit&&W(R.target.value),l.value.tabSubmit&&Aa(w.value)&&s.inputValue!==""?(o("set-input-date",w.value,!0,!0),w.value=null):l.value.tabSubmit&&s.inputValue===""&&(w.value=null,o("clear",!0))},te=()=>{var R;S.value=!0,o("focus"),l.value.enabled&&l.value.selectOnFocus&&((R=D.value)==null||R.select())},g=R=>{R.preventDefault(),Et(R,h.value,!0),l.value.enabled&&l.value.openMenu&&!u.value.input&&!s.isMenuOpen?o("open"):l.value.enabled||o("toggle")},M=()=>{o("real-blur"),S.value=!1,(!s.isMenuOpen||u.value.enabled&&u.value.input)&&o("blur"),s.autoApply&&l.value.enabled&&w.value&&!s.isMenuOpen&&(o("set-input-date",w.value),o("select-date"),w.value=null)},Q=R=>{Et(R,h.value,!0),o("clear")},ie=R=>{if(!l.value.enabled){if(R.code==="Tab")return;R.preventDefault()}};return e({focusInput:()=>{var R;(R=D.value)==null||R.focus({preventScroll:!0})},setParsedDate:R=>{w.value=R}}),(R,b)=>{var A;return r(),d("div",{onClick:g},[R.$slots.trigger&&!R.$slots["dp-input"]&&!k(u).enabled?ye(R.$slots,"trigger",{key:0}):c("",!0),!R.$slots.trigger&&(!k(u).enabled||k(u).input)?(r(),d("div",AD,[R.$slots["dp-input"]&&!R.$slots.trigger&&!k(u).enabled?ye(R.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:H,onEnter:L,onTab:pe,onClear:Q,onBlur:M,onKeypress:ie,onPaste:P,openMenu:()=>R.$emit("open"),closeMenu:()=>R.$emit("close"),toggleMenu:()=>R.$emit("toggle")}):c("",!0),R.$slots["dp-input"]?c("",!0):(r(),d("input",{key:1,id:R.uid?`dp-input-${R.uid}`:void 0,ref_key:"inputRef",ref:D,name:R.name,class:I(G.value),inputmode:k(l).enabled?"text":"none",placeholder:R.placeholder,disabled:R.disabled,readonly:R.readonly,required:R.required,value:t.inputValue,autocomplete:R.autocomplete,"aria-label":(A=k(i))==null?void 0:A.input,"aria-disabled":R.disabled||void 0,"aria-invalid":R.state===!1?!0:void 0,onInput:H,onKeydown:[Pe(L,["enter"]),Pe(pe,["tab"]),ie],onBlur:M,onFocus:te,onKeypress:ie,onPaste:P},null,42,jD)),n("div",{onClick:b[2]||(b[2]=j=>o("toggle"))},[R.$slots["input-icon"]&&!R.hideInputIcon?(r(),d("span",{key:0,class:"dp__input_icon",onClick:b[0]||(b[0]=j=>o("toggle"))},[ye(R.$slots,"input-icon")])):c("",!0),!R.$slots["input-icon"]&&!R.hideInputIcon&&!R.$slots["dp-input"]?(r(),me(k(vn),{key:1,class:"dp__input_icon dp__input_icons",onClick:b[1]||(b[1]=j=>o("toggle"))})):c("",!0)]),R.$slots["clear-icon"]&&t.inputValue&&R.clearable&&!R.disabled&&!R.readonly?(r(),d("span",UD,[ye(R.$slots,"clear-icon",{clear:Q})])):c("",!0),R.clearable&&!R.$slots["clear-icon"]&&t.inputValue&&!R.disabled&&!R.readonly?(r(),me(k(as),{key:3,class:"dp__clear_icon dp__input_icons",onClick:b[3]||(b[3]=De(j=>Q(j),["prevent"]))})):c("",!0)])):c("",!0)])}}}),YD=["title"],RD={class:"dp__action_buttons"},xD=["disabled"],BD=et({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...wt},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const a=e,o=t,{defaultedActionRow:s,defaultedPreviewFormat:l,defaultedMultiCalendars:i,defaultedTextInput:u,defaultedInline:h,getDefaultPattern:p}=Ke(o),{isValidTime:y}=nn(o),{buildMatrix:_}=zt(),w=ue(null),D=ue(null);it(()=>{o.arrowNavigation&&_([Ge(w),Ge(D)],"actionRow")});const S=J(()=>o.range&&!o.partialRange&&o.internalModelValue?o.internalModelValue.length===2:!0),B=J(()=>!G.value||!V.value||!S.value),G=J(()=>!o.enableTimePicker||o.ignoreTimeValidation?!0:y(o.internalModelValue)),V=J(()=>o.monthPicker?o.range&&Array.isArray(o.internalModelValue)?!o.internalModelValue.filter(g=>!pe(g)).length:pe(o.internalModelValue):!0),Y=()=>{const g=l.value;return o.timePicker||o.monthPicker,g(Je(o.internalModelValue))},ee=()=>{const g=o.internalModelValue;return i.value.count>0?`${P(g[0])} - ${P(g[1])}`:[P(g[0]),P(g[1])]},P=g=>_s(g,l.value,o.formatLocale,u.value.rangeSeparator,o.modelAuto,p()),W=J(()=>!o.internalModelValue||!o.menuMount?"":typeof l.value=="string"?Array.isArray(o.internalModelValue)?o.internalModelValue.length===2&&o.internalModelValue[1]?ee():o.multiDates?o.internalModelValue.map(g=>`${P(g)}`):o.modelAuto?`${P(o.internalModelValue[0])}`:`${P(o.internalModelValue[0])} -`:P(o.internalModelValue):Y()),H=()=>o.multiDates?"; ":" - ",L=J(()=>Array.isArray(W.value)?W.value.join(H()):W.value),pe=g=>{if(!o.monthPicker)return!0;let M=!0;const Q=K(gt(g));if(o.minDate&&o.maxDate){const ie=K(gt(o.minDate)),R=K(gt(o.maxDate));return ot(Q,ie)&&nt(Q,R)||xe(Q,ie)||xe(Q,R)}if(o.minDate){const ie=K(gt(o.minDate));M=ot(Q,ie)||xe(Q,ie)}if(o.maxDate){const ie=K(gt(o.maxDate));M=nt(Q,ie)||xe(Q,ie)}return M},te=()=>{G.value&&V.value&&S.value?a("select-date"):a("invalid-select")};return(g,M)=>(r(),d("div",{class:"dp__action_row",style:vt(t.calendarWidth?{width:`${t.calendarWidth}px`}:{})},[g.$slots["action-row"]?ye(g.$slots,"action-row",Ze(at({key:0},{internalModelValue:g.internalModelValue,disabled:B.value,selectDate:()=>g.$emit("select-date"),closePicker:()=>g.$emit("close-picker")}))):(r(),d(E,{key:1},[k(s).showPreview?(r(),d("div",{key:0,class:"dp__selection_preview",title:L.value},[g.$slots["action-preview"]?ye(g.$slots,"action-preview",{key:0,value:g.internalModelValue}):c("",!0),g.$slots["action-preview"]?c("",!0):(r(),d(E,{key:1},[T(C(L.value),1)],64))],8,YD)):c("",!0),n("div",RD,[g.$slots["action-buttons"]?ye(g.$slots,"action-buttons",{key:0,value:g.internalModelValue}):c("",!0),g.$slots["action-buttons"]?c("",!0):(r(),d(E,{key:1},[!k(h).enabled&&k(s).showCancel?(r(),d("button",{key:0,ref_key:"cancelButtonRef",ref:w,type:"button",class:"dp__action_button dp__action_cancel",onClick:M[0]||(M[0]=Q=>g.$emit("close-picker")),onKeydown:[M[1]||(M[1]=Pe(Q=>g.$emit("close-picker"),["enter"])),M[2]||(M[2]=Pe(Q=>g.$emit("close-picker"),["space"]))]},C(g.cancelText),545)):c("",!0),k(s).showNow?(r(),d("button",{key:1,ref_key:"cancelButtonRef",ref:w,type:"button",class:"dp__action_button dp__action_cancel",onClick:M[3]||(M[3]=Q=>g.$emit("select-now")),onKeydown:[M[4]||(M[4]=Pe(Q=>g.$emit("select-now"),["enter"])),M[5]||(M[5]=Pe(Q=>g.$emit("select-now"),["space"]))]},C(g.nowButtonLabel),545)):c("",!0),k(s).showSelect?(r(),d("button",{key:2,ref_key:"selectButtonRef",ref:D,type:"button",class:"dp__action_button dp__action_select",disabled:B.value,onKeydown:[Pe(te,["enter"]),Pe(te,["space"])],onClick:te},C(g.selectText),41,xD)):c("",!0)],64))])],64))],4))}}),ID=["onKeydown"],ND={class:"dp__selection_grid_header"},ED=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],qD=["aria-label"],Un=et({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:a}){const{setSelectionGrid:o,buildMultiLevelMatrix:s,setMonthPicker:l}=zt(),i=a,u=t,{defaultedAriaLabels:h,defaultedTextInput:p,defaultedConfig:y}=Ke(u),{hideNavigationButtons:_}=Gn(),w=ue(!1),D=ue(null),S=ue(null),B=ue([]),G=ue(),V=ue(null),Y=ue(0),ee=ue(null);Ps(()=>{D.value=null}),it(()=>{Wt().then(()=>M()),u.noOverlayFocus||W(),P(!0)}),ja(()=>P(!1));const P=v=>{var m;u.arrowNavigation&&((m=u.headerRefs)!=null&&m.length?l(v):o(v))},W=()=>{var v;const m=Ge(S);m&&(p.value.enabled||(D.value?(v=D.value)==null||v.focus({preventScroll:!0}):m.focus({preventScroll:!0})),w.value=m.clientHeight<m.scrollHeight)},H=J(()=>({dp__overlay:!0,"dp--overlay-absolute":!u.useRelative,"dp--overlay-relative":u.useRelative})),L=J(()=>u.useRelative?{height:`${u.height}px`,width:"260px"}:void 0),pe=J(()=>({dp__overlay_col:!0})),te=J(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:w.value,dp__button_bottom:u.isLast})),g=J(()=>{var v,m;return{dp__overlay_container:!0,dp__container_flex:((v=u.items)==null?void 0:v.length)<=6,dp__container_block:((m=u.items)==null?void 0:m.length)>6}});Ht(()=>u.items,()=>M(),{deep:!0});const M=()=>{Wt().then(()=>{const v=Ge(D),m=Ge(S),O=Ge(V),x=Ge(ee),ae=O?O.getBoundingClientRect().height:0;m&&(m.getBoundingClientRect().height?Y.value=m.getBoundingClientRect().height-ae:Y.value=y.value.modeHeight-ae),v&&x&&(x.scrollTop=v.offsetTop-x.offsetTop-(Y.value/2-v.getBoundingClientRect().height)-ae)})},Q=v=>{v.disabled||i("selected",v.value)},ie=()=>{i("toggle"),i("reset-flow")},R=()=>{u.escClose&&ie()},b=(v,m,O,x)=>{v&&((m.active||m.value===u.focusValue)&&(D.value=v),u.arrowNavigation&&(Array.isArray(B.value[O])?B.value[O][x]=v:B.value[O]=[v],A()))},A=()=>{var v,m;const O=(v=u.headerRefs)!=null&&v.length?[u.headerRefs].concat(B.value):B.value.concat([u.skipButtonRef?[]:[V.value]]);s(Je(O),(m=u.headerRefs)!=null&&m.length?"monthPicker":"selectionGrid")},j=v=>{u.arrowNavigation||Et(v,y.value,!0)},z=v=>{G.value=v,i("hover-value",v)};return e({focusGrid:W}),(v,m)=>{var O;return r(),d("div",{ref_key:"gridWrapRef",ref:S,class:I(H.value),style:vt(L.value),role:"dialog",tabindex:"0",onKeydown:[Pe(De(R,["prevent"]),["esc"]),m[0]||(m[0]=Pe(De(x=>j(x),["prevent"]),["left"])),m[1]||(m[1]=Pe(De(x=>j(x),["prevent"]),["up"])),m[2]||(m[2]=Pe(De(x=>j(x),["prevent"]),["down"])),m[3]||(m[3]=Pe(De(x=>j(x),["prevent"]),["right"]))]},[n("div",{ref_key:"containerRef",ref:ee,class:I(g.value),role:"grid",style:vt({height:`${Y.value}px`})},[n("div",ND,[ye(v.$slots,"header")]),v.$slots.overlay?ye(v.$slots,"overlay",{key:0}):(r(!0),d(E,{key:1},oe(v.items,(x,ae)=>(r(),d("div",{key:ae,class:I(["dp__overlay_row",{dp__flex_row:v.items.length>=3}]),role:"row"},[(r(!0),d(E,null,oe(x,(re,U)=>(r(),d("div",{key:re.value,ref_for:!0,ref:f=>b(f,re,ae,U),role:"gridcell",class:I(pe.value),"aria-selected":re.active,"aria-disabled":re.disabled||void 0,tabindex:"0",onClick:f=>Q(re),onKeydown:[Pe(De(f=>Q(re),["prevent"]),["enter"]),Pe(De(f=>Q(re),["prevent"]),["space"])],onMouseover:f=>z(re.value)},[n("div",{class:I(re.className)},[v.$slots.item?ye(v.$slots,"item",{key:0,item:re}):c("",!0),v.$slots.item?c("",!0):(r(),d(E,{key:1},[T(C(re.text),1)],64))],2)],42,ED))),128))],2))),128))],6),v.$slots["button-icon"]?$((r(),d("button",{key:0,ref_key:"toggleButton",ref:V,type:"button","aria-label":(O=k(h))==null?void 0:O.toggleOverlay,class:I(te.value),tabindex:"0",onClick:ie,onKeydown:[Pe(ie,["enter"]),Pe(ie,["tab"])]},[ye(v.$slots,"button-icon")],42,qD)),[[At,!k(_)(v.hideNavigation,v.type)]]):c("",!0)],46,ID)}}}),ea=et({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(t){const e=t,a=J(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),o=J(()=>({dp__instance_calendar:e.multiCalendars>0}));return(s,l)=>(r(),d("div",{class:I({dp__menu_inner:!s.stretch,"dp--menu--inner-stretched":s.stretch,dp__flex_display:s.multiCalendars>0})},[(r(!0),d(E,null,oe(a.value,(i,u)=>(r(),d("div",{key:i,class:I(o.value)},[ye(s.$slots,"default",{instance:i,index:u})],2))),128))],2))}}),LD=["aria-label","aria-disabled"],Cn=et({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const a=e,o=ue(null);return it(()=>a("set-ref",o)),(s,l)=>(r(),d("button",{ref_key:"elRef",ref:o,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":s.ariaLabel,"aria-disabled":s.disabled||void 0,onClick:l[0]||(l[0]=i=>s.$emit("activate")),onKeydown:[l[1]||(l[1]=Pe(De(i=>s.$emit("activate"),["prevent"]),["enter"])),l[2]||(l[2]=Pe(De(i=>s.$emit("activate"),["prevent"]),["space"]))]},[n("span",{class:I(["dp__inner_nav",{dp__inner_nav_disabled:s.disabled}])},[ye(s.$slots,"default")],2)],40,LD))}}),WD={class:"dp--year-mode-picker"},HD=["aria-label"],bs=et({__name:"YearModePicker",props:{...wt,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const a=e,o=t,{showRightIcon:s,showLeftIcon:l}=Gn(),{defaultedConfig:i,defaultedMultiCalendars:u,defaultedAriaLabels:h,defaultedTransitions:p}=Ke(o),{showTransition:y,transitionName:_}=An(p),w=(B=!1,G)=>{a("toggle-year-picker",{flow:B,show:G})},D=B=>{a("year-select",B)},S=(B=!1)=>{a("handle-year",B)};return(B,G)=>{var V,Y,ee;return r(),d("div",WD,[k(l)(k(u),t.instance)?(r(),me(Cn,{key:0,ref:"mpPrevIconRef","aria-label":(V=k(h))==null?void 0:V.prevYear,disabled:t.isDisabled(!1),onActivate:G[0]||(G[0]=P=>S(!1))},{default:q(()=>[B.$slots["arrow-left"]?ye(B.$slots,"arrow-left",{key:0}):c("",!0),B.$slots["arrow-left"]?c("",!0):(r(),me(k(Ea),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),n("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(Y=k(h))==null?void 0:Y.openYearsOverlay,onClick:G[1]||(G[1]=()=>w(!1)),onKeydown:G[2]||(G[2]=Pe(()=>w(!1),["enter"]))},[B.$slots.year?ye(B.$slots,"year",{key:0,year:t.year}):c("",!0),B.$slots.year?c("",!0):(r(),d(E,{key:1},[T(C(t.year),1)],64))],40,HD),k(s)(k(u),t.instance)?(r(),me(Cn,{key:1,ref:"mpNextIconRef","aria-label":(ee=k(h))==null?void 0:ee.nextYear,disabled:t.isDisabled(!0),onActivate:G[3]||(G[3]=P=>S(!0))},{default:q(()=>[B.$slots["arrow-right"]?ye(B.$slots,"arrow-right",{key:0}):c("",!0),B.$slots["arrow-right"]?c("",!0):(r(),me(k(qa),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),le(_n,{name:k(_)(t.showYearPicker),css:k(y)},{default:q(()=>[t.showYearPicker?(r(),me(Un,{key:0,items:t.items,"text-input":B.textInput,"esc-close":B.escClose,config:B.config,"is-last":B.autoApply&&!k(i).keepActionRow,"hide-navigation":B.hideNavigation,type:"year",onToggle:w,onSelected:G[4]||(G[4]=P=>D(P))},ct({"button-icon":q(()=>[B.$slots["calendar-icon"]?ye(B.$slots,"calendar-icon",{key:0}):c("",!0),B.$slots["calendar-icon"]?c("",!0):(r(),me(k(vn),{key:1}))]),_:2},[B.$slots["year-overlay-value"]?{name:"item",fn:q(({item:P})=>[ye(B.$slots,"year-overlay-value",{text:P.text,value:P.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):c("",!0)]),_:3},8,["name","css"])])}}}),Ga=(t,e,a)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(o=>xe(t,o))){const o=e.value.filter(s=>!xe(s,t));e.value=o.length?o:null}else(a&&+a>e.value.length||!a)&&e.value.push(t);else e.value=[t]},Ja=(t,e,a)=>{let o=t.value?t.value.slice():[];return o.length===2&&o[1]!==null&&(o=[]),o.length?nt(e,o[0])?(o.unshift(e),a("range-start",o[0]),a("range-start",o[1])):(o[1]=e,a("range-end",e)):(o=[e],a("range-start",e)),t.value=o,o},ta=(t,e,a,o)=>{t[0]&&t[1]&&a&&e("auto-apply"),t[0]&&!t[1]&&o&&a&&e("auto-apply")},gs=t=>{Array.isArray(t.value)&&t.value.length<=2&&t.range?t.modelValue.value=t.value.map(e=>$t(K(e),t.timezone)):Array.isArray(t.value)||(t.modelValue.value=$t(K(t.value),t.timezone))},ys=({multiCalendars:t,highlight:e,calendars:a,modelValue:o,props:s,year:l,month:i,emit:u})=>{const h=J(()=>Ka(s.yearRange,s.reverseYears)),p=ue([!1]),y=J(()=>(P,W)=>{const H=qe(gt(new Date),{month:i.value(P),year:l.value(P)});return ps(H,s.maxDate,s.minDate,s.preventMinMaxNavigation,W)}),_=()=>{for(let P=0;P<t.value.count;P++)if(P===0)a.value[P]=a.value[0];else{const W=qe(K(),a.value[P-1]);a.value[P]={month:Ve(W),year:Me(Ua(W,1))}}},w=P=>{if(!P)return _();const W=qe(K(),a.value[P]);return a.value[0].year=Me(ns(W,t.value.count-1)),_()},D=P=>s.focusStartDate?P[0]:P[1]?P[1]:P[0],S=()=>{if(o.value){const P=Array.isArray(o.value)?D(o.value):o.value;a.value[0]={month:Ve(P),year:Me(P)}}};it(()=>{S(),t.value.count&&_()});const B=(P,W)=>{a.value[W].year=P,t.value.count&&!t.value.solo&&w(W)},G=J(()=>P=>hn(h.value,W=>{const H=l.value(P)===W.value,L=Sn(W.value,pn(s.minDate),pn(s.maxDate)),pe=Za(e.value,W.value);return{active:H,disabled:L,highlighted:pe}})),V=(P,W)=>{B(P,W),ee(W)},Y=(P,W=!1)=>{if(!y.value(P,W)){const H=W?l.value(P)+1:l.value(P)-1;B(H,P)}},ee=(P,W=!1,H)=>{W||u("reset-flow"),H!==void 0?p.value[P]=H:p.value[P]=!p.value[P],p.value||u("overlay-closed")};return{isDisabled:y,groupedYears:G,showYearPicker:p,selectYear:B,toggleYearPicker:ee,handleYearSelect:V,handleYear:Y}},zD=(t,e)=>{const{defaultedMultiCalendars:a,defaultedAriaLabels:o,defaultedTransitions:s,defaultedConfig:l,defaultedHighlight:i}=Ke(t),{modelValue:u,year:h,month:p,calendars:y}=jn(t,e),_=J(()=>is(t.formatLocale,t.locale,t.monthNameFormat)),w=ue(null),{selectYear:D,groupedYears:S,showYearPicker:B,toggleYearPicker:G,handleYearSelect:V,handleYear:Y,isDisabled:ee}=ys({modelValue:u,multiCalendars:a,highlight:i,calendars:y,year:h,month:p,props:t,emit:e});it(()=>{t.startDate&&(u.value&&t.focusStartDate||!u.value)&&D(Me(K(t.startDate)),0)});const P=j=>j?{month:Ve(j),year:Me(j)}:{month:null,year:null},W=()=>u.value?Array.isArray(u.value)?u.value.map(j=>P(j)):P(u.value):P(),H=(j,z)=>{const v=y.value[j],m=W();return Array.isArray(m)?m.some(O=>O.year===(v==null?void 0:v.year)&&O.month===z):(v==null?void 0:v.year)===m.year&&z===m.month},L=(j,z,v)=>{var m,O;const x=W();return Array.isArray(x)?h.value(z)===((m=x[v])==null?void 0:m.year)&&j===((O=x[v])==null?void 0:O.month):!1},pe=(j,z)=>{if(t.range){const v=W();if(Array.isArray(u.value)&&Array.isArray(v)){const m=L(j,z,0)||L(j,z,1),O=Ut(gt(K()),j,h.value(z));return Zn(u.value,w.value,O)&&!m}return!1}return!1},te=J(()=>j=>hn(_.value,z=>{const v=H(j,z.value),m=Sn(z.value,ds(h.value(j),t.minDate),us(h.value(j),t.maxDate))||hD(t.disabledDates,h.value(j)).includes(z.value),O=pe(z.value,j),x=vs(i.value,z.value,h.value(j));return{active:v,disabled:m,isBetween:O,highlighted:x}})),g=(j,z)=>Ut(gt(K()),j,h.value(z)),M=(j,z)=>{const v=u.value?u.value:gt(new Date);u.value=Ut(v,j,h.value(z)),e("auto-apply")},Q=(j,z)=>{const v=Ja(u,g(j,z),e);ta(v,e,t.autoApply,t.modelAuto)},ie=(j,z)=>{Ga(g(j,z),u,t.multiDatesLimit),e("auto-apply",!0)},R=(j,z)=>(y.value[z].month=j,A(z,y.value[z].year,j),t.multiDates?ie(j,z):t.range?Q(j,z):M(j,z)),b=(j,z)=>{D(j,z),A(z,j,null)},A=(j,z,v)=>{let m=v;if(!m&&m!==0){const O=W();m=Array.isArray(O)?O[j].month:O.month}e("update-month-year",{instance:j,year:z,month:m})};return{groupedMonths:te,groupedYears:S,year:h,isDisabled:ee,defaultedMultiCalendars:a,defaultedAriaLabels:o,defaultedTransitions:s,defaultedConfig:l,showYearPicker:B,modelValue:u,presetDate:(j,z)=>{gs({value:j,modelValue:u,range:t.range,timezone:z?void 0:t.timezone}),e("auto-apply")},setHoverDate:(j,z)=>{w.value=g(j,z)},selectMonth:R,selectYear:b,toggleYearPicker:G,handleYearSelect:V,handleYear:Y,getModelMonthYear:W}},QD=et({compatConfig:{MODE:3},__name:"MonthPicker",props:{...wt},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(t,{expose:e,emit:a}){const o=a,s=en(),l=ht(s,"yearMode"),i=t;it(()=>{i.shadow||o("mount",null)});const{groupedMonths:u,groupedYears:h,year:p,isDisabled:y,defaultedMultiCalendars:_,defaultedConfig:w,showYearPicker:D,modelValue:S,presetDate:B,setHoverDate:G,selectMonth:V,selectYear:Y,toggleYearPicker:ee,handleYearSelect:P,handleYear:W,getModelMonthYear:H}=zD(i,o);return e({getSidebarProps:()=>({modelValue:S,year:p,getModelMonthYear:H,selectMonth:V,selectYear:Y,handleYear:W}),presetDate:B,toggleYearPicker:L=>ee(0,L)}),(L,pe)=>(r(),me(ea,{"multi-calendars":k(_).count,stretch:""},{default:q(({instance:te})=>[L.$slots["month-year"]?ye(L.$slots,"month-year",Ze(at({key:0},{year:k(p),months:k(u)(te),years:k(h)(te),selectMonth:k(V),selectYear:k(Y),instance:te}))):(r(),me(Un,{key:1,items:k(u)(te),"arrow-navigation":L.arrowNavigation,"is-last":L.autoApply&&!k(w).keepActionRow,"esc-close":L.escClose,height:k(w).modeHeight,config:L.config,"no-overlay-focus":!!(L.noOverlayFocus||L.textInput),"use-relative":"",type:"month",onSelected:g=>k(V)(g,te),onHoverValue:g=>k(G)(g,te)},{header:q(()=>[le(bs,at(L.$props,{items:k(h)(te),instance:te,"show-year-picker":k(D)[te],year:k(p)(te),"is-disabled":g=>k(y)(te,g),onHandleYear:g=>k(W)(te,g),onYearSelect:g=>k(P)(g,te),onToggleYearPicker:g=>k(ee)(te,g==null?void 0:g.flow,g==null?void 0:g.show)}),ct({_:2},[oe(k(l),(g,M)=>({name:g,fn:q(Q=>[ye(L.$slots,g,Ze(ut(Q)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),XD=(t,e)=>{const{modelValue:a}=jn(t,e),o=ue(null),{defaultedHighlight:s,defaultedFilters:l}=Ke(t),i=ue();it(()=>{t.startDate&&(a.value&&t.focusStartDate||!a.value)&&(i.value=Me(K(t.startDate)))});const u=_=>Array.isArray(a.value)?a.value.some(w=>Me(w)===_):a.value?Me(a.value)===_:!1,h=_=>t.range&&Array.isArray(a.value)?Zn(a.value,o.value,y(_)):!1,p=J(()=>hn(Ka(t.yearRange,t.reverseYears),_=>{const w=u(_.value),D=Sn(_.value,pn(t.minDate),pn(t.maxDate))||l.value.years.includes(_.value),S=h(_.value)&&!w,B=Za(s.value,_.value);return{active:w,disabled:D,isBetween:S,highlighted:B}})),y=_=>Pt(gt(new Date),_);return{groupedYears:p,modelValue:a,focusYear:i,setHoverValue:_=>{o.value=Pt(gt(new Date),_)},selectYear:_=>{var w;if(t.multiDates)return a.value?Array.isArray(a.value)&&(((w=a.value)==null?void 0:w.map(D=>Me(D))).includes(_)?a.value=a.value.filter(D=>Me(D)!==_):a.value.push(Pt(st(K()),_))):a.value=[Pt(st(K()),_)],e("auto-apply",!0);if(t.range){const D=Ja(a,y(_),e);return ta(D,e,t.autoApply,t.modelAuto)}a.value=y(_),e("auto-apply")}}},KD=et({compatConfig:{MODE:3},__name:"YearPicker",props:{...wt},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(t,{expose:e,emit:a}){const o=a,s=t,{groupedYears:l,modelValue:i,focusYear:u,selectYear:h,setHoverValue:p}=XD(s,o),{defaultedConfig:y}=Ke(s);return e({getSidebarProps:()=>({modelValue:i,selectYear:h})}),(_,w)=>(r(),d("div",null,[_.$slots["month-year"]?ye(_.$slots,"month-year",Ze(at({key:0},{years:k(l),selectYear:k(h)}))):(r(),me(Un,{key:1,items:k(l),"is-last":_.autoApply&&!k(y).keepActionRow,height:k(y).modeHeight,config:_.config,"no-overlay-focus":!!(_.noOverlayFocus||_.textInput),"focus-value":k(u),type:"year","use-relative":"",onSelected:k(h),onHoverValue:k(p)},ct({_:2},[_.$slots["year-overlay-value"]?{name:"item",fn:q(({item:D})=>[ye(_.$slots,"year-overlay-value",{text:D.text,value:D.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),ZD={key:0,class:"dp__time_input"},GD=["aria-label","onKeydown","onClick"],JD=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),eP=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),tP=["aria-label","disabled","onKeydown","onClick"],nP=["aria-label","onKeydown","onClick"],aP=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),oP=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),sP={key:0},lP=["aria-label","onKeydown"],iP=et({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...wt},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:a}){const o=a,s=t,{setTimePickerElements:l,setTimePickerBackRef:i}=zt(),{defaultedAriaLabels:u,defaultedTransitions:h,defaultedFilters:p,defaultedConfig:y}=Ke(s),{transitionName:_,showTransition:w}=An(h),D=Mn({hours:!1,minutes:!1,seconds:!1}),S=ue("AM"),B=ue(null),G=ue([]);it(()=>{o("mounted")});const V=f=>qe(new Date,{hours:f.hours,minutes:f.minutes,seconds:s.enableSeconds?f.seconds:0,milliseconds:0}),Y=J(()=>f=>R(f,s[f])||P(f,s[f])),ee=J(()=>({hours:s.hours,minutes:s.minutes,seconds:s.seconds})),P=(f,fe)=>s.range&&!s.disableTimeRangeValidation?!s.validateTime(f,fe):!1,W=(f,fe)=>{if(s.range&&!s.disableTimeRangeValidation){const be=fe?+s[`${f}Increment`]:-+s[`${f}Increment`],Z=s[f]+be;return!s.validateTime(f,Z)}return!1},H=J(()=>f=>!A(+s[f]+ +s[`${f}Increment`],f)||W(f,!0)),L=J(()=>f=>!A(+s[f]-+s[`${f}Increment`],f)||W(f,!1)),pe=(f,fe)=>Vo(qe(K(),f),fe),te=(f,fe)=>C6(qe(K(),f),fe),g=J(()=>({dp__time_col:!0,dp__time_col_block:!s.timePickerInline,dp__time_col_reg_block:!s.enableSeconds&&s.is24&&!s.timePickerInline,dp__time_col_reg_inline:!s.enableSeconds&&s.is24&&s.timePickerInline,dp__time_col_reg_with_button:!s.enableSeconds&&!s.is24,dp__time_col_sec:s.enableSeconds&&s.is24,dp__time_col_sec_with_button:s.enableSeconds&&!s.is24})),M=J(()=>{const f=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return s.enableSeconds?f.concat([{type:"",separator:!0},{type:"seconds"}]):f}),Q=J(()=>M.value.filter(f=>!f.separator)),ie=J(()=>f=>{if(f==="hours"){const fe=O(+s.hours);return{text:fe<10?`0${fe}`:`${fe}`,value:fe}}return{text:s[f]<10?`0${s[f]}`:`${s[f]}`,value:s[f]}}),R=(f,fe)=>{var be;if(!s.disabledTimesConfig)return!1;const Z=s.disabledTimesConfig(s.order,f==="hours"?fe:void 0);return Z[f]?!!((be=Z[f])!=null&&be.includes(fe)):!0},b=f=>{const fe=s.is24?24:12,be=f==="hours"?fe:60,Z=+s[`${f}GridIncrement`],Ce=f==="hours"&&!s.is24?Z:0,ge=[];for(let N=Ce;N<be;N+=Z)ge.push({value:N,text:N<10?`0${N}`:`${N}`});return f==="hours"&&!s.is24&&ge.push({value:0,text:"12"}),hn(ge,N=>({active:!1,disabled:p.value.times[f].includes(N.value)||!A(N.value,f)||R(f,N.value)||P(f,N.value)}))},A=(f,fe)=>{const be=s.minTime?V(ha(s.minTime)):null,Z=s.maxTime?V(ha(s.maxTime)):null,Ce=V(ha(ee.value,fe,f));return be&&Z?(Pn(Ce,Z)||dn(Ce,Z))&&(Dn(Ce,be)||dn(Ce,be)):be?Dn(Ce,be)||dn(Ce,be):Z?Pn(Ce,Z)||dn(Ce,Z):!0},j=f=>s[`no${f[0].toUpperCase()+f.slice(1)}Overlay`],z=f=>{j(f)||(D[f]=!D[f],D[f]||o("overlay-closed"))},v=f=>f==="hours"?kt:f==="minutes"?St:cn,m=(f,fe=!0)=>{const be=fe?pe:te,Z=fe?+s[`${f}Increment`]:-+s[`${f}Increment`];A(+s[f]+Z,f)&&o(`update:${f}`,v(f)(be({[f]:+s[f]},{[f]:+s[`${f}Increment`]})))},O=f=>s.is24?f:(f>=12?S.value="PM":S.value="AM",J6(f)),x=()=>{S.value==="PM"?(S.value="AM",o("update:hours",s.hours-12)):(S.value="PM",o("update:hours",s.hours+12)),o("am-pm-change",S.value)},ae=f=>{D[f]=!0},re=(f,fe,be)=>{if(f&&s.arrowNavigation){Array.isArray(G.value[fe])?G.value[fe][be]=f:G.value[fe]=[f];const Z=G.value.reduce((Ce,ge)=>ge.map((N,se)=>[...Ce[se]||[],ge[se]]),[]);i(s.closeTimePickerBtn),B.value&&(Z[1]=Z[1].concat(B.value)),l(Z,s.order)}},U=(f,fe)=>(z(f),f==="hours"&&!s.is24?o(`update:${f}`,S.value==="PM"?fe+12:fe):o(`update:${f}`,fe));return e({openChildCmp:ae}),(f,fe)=>{var be;return f.disabled?c("",!0):(r(),d("div",ZD,[(r(!0),d(E,null,oe(M.value,(Z,Ce)=>{var ge,N,se;return r(),d("div",{key:Ce,class:I(g.value)},[Z.separator?(r(),d(E,{key:0},[T(" : ")],64)):(r(),d(E,{key:1},[n("button",{ref_for:!0,ref:Te=>re(Te,Ce,0),type:"button",class:I({dp__btn:!0,dp__inc_dec_button:!f.timePickerInline,dp__inc_dec_button_inline:f.timePickerInline,dp__tp_inline_btn_top:f.timePickerInline,dp__inc_dec_button_disabled:H.value(Z.type)}),"aria-label":(ge=k(u))==null?void 0:ge.incrementValue(Z.type),tabindex:"0",onKeydown:[Pe(De(Te=>m(Z.type),["prevent"]),["enter"]),Pe(De(Te=>m(Z.type),["prevent"]),["space"])],onClick:Te=>m(Z.type)},[s.timePickerInline?(r(),d(E,{key:1},[JD,eP],64)):(r(),d(E,{key:0},[f.$slots["arrow-up"]?ye(f.$slots,"arrow-up",{key:0}):c("",!0),f.$slots["arrow-up"]?c("",!0):(r(),me(k(Wa),{key:1}))],64))],42,GD),n("button",{ref_for:!0,ref:Te=>re(Te,Ce,1),type:"button","aria-label":(N=k(u))==null?void 0:N.openTpOverlay(Z.type),class:I({dp__time_display:!0,dp__time_display_block:!f.timePickerInline,dp__time_display_inline:f.timePickerInline,"dp--time-invalid":Y.value(Z.type),"dp--time-overlay-btn":!Y.value(Z.type)}),disabled:j(Z.type),tabindex:"0",onKeydown:[Pe(De(Te=>z(Z.type),["prevent"]),["enter"]),Pe(De(Te=>z(Z.type),["prevent"]),["space"])],onClick:Te=>z(Z.type)},[f.$slots[Z.type]?ye(f.$slots,Z.type,{key:0,text:ie.value(Z.type).text,value:ie.value(Z.type).value}):c("",!0),f.$slots[Z.type]?c("",!0):(r(),d(E,{key:1},[T(C(ie.value(Z.type).text),1)],64))],42,tP),n("button",{ref_for:!0,ref:Te=>re(Te,Ce,2),type:"button",class:I({dp__btn:!0,dp__inc_dec_button:!f.timePickerInline,dp__inc_dec_button_inline:f.timePickerInline,dp__tp_inline_btn_bottom:f.timePickerInline,dp__inc_dec_button_disabled:L.value(Z.type)}),"aria-label":(se=k(u))==null?void 0:se.decrementValue(Z.type),tabindex:"0",onKeydown:[Pe(De(Te=>m(Z.type,!1),["prevent"]),["enter"]),Pe(De(Te=>m(Z.type,!1),["prevent"]),["space"])],onClick:Te=>m(Z.type,!1)},[s.timePickerInline?(r(),d(E,{key:1},[aP,oP],64)):(r(),d(E,{key:0},[f.$slots["arrow-down"]?ye(f.$slots,"arrow-down",{key:0}):c("",!0),f.$slots["arrow-down"]?c("",!0):(r(),me(k(Ha),{key:1}))],64))],42,nP)],64))],2)}),128)),f.is24?c("",!0):(r(),d("div",sP,[f.$slots["am-pm-button"]?ye(f.$slots,"am-pm-button",{key:0,toggle:x,value:S.value}):c("",!0),f.$slots["am-pm-button"]?c("",!0):(r(),d("button",{key:1,ref_key:"amPmButton",ref:B,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(be=k(u))==null?void 0:be.amPmButton,tabindex:"0",onClick:x,onKeydown:[Pe(De(x,["prevent"]),["enter"]),Pe(De(x,["prevent"]),["space"])]},C(S.value),41,lP))])),(r(!0),d(E,null,oe(Q.value,(Z,Ce)=>(r(),me(_n,{key:Ce,name:k(_)(D[Z.type]),css:k(w)},{default:q(()=>[D[Z.type]?(r(),me(Un,{key:0,items:b(Z.type),"is-last":f.autoApply&&!k(y).keepActionRow,"esc-close":f.escClose,type:Z.type,"text-input":f.textInput,config:f.config,"arrow-navigation":f.arrowNavigation,onSelected:ge=>U(Z.type,ge),onToggle:ge=>z(Z.type),onResetFlow:fe[0]||(fe[0]=ge=>f.$emit("reset-flow"))},ct({"button-icon":q(()=>[f.$slots["clock-icon"]?ye(f.$slots,"clock-icon",{key:0}):c("",!0),f.$slots["clock-icon"]?c("",!0):(r(),me(Fn(f.timePickerInline?k(vn):k(La)),{key:1}))]),_:2},[f.$slots[`${Z.type}-overlay-value`]?{name:"item",fn:q(({item:ge})=>[ye(f.$slots,`${Z.type}-overlay-value`,{text:ge.text,value:ge.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),rP={class:"dp--tp-wrap"},dP=["aria-label","tabindex"],uP=["tabindex"],cP=["aria-label"],ks=et({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...wt},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:a}){const o=a,s=t,{buildMatrix:l,setTimePicker:i}=zt(),u=en(),{defaultedTransitions:h,defaultedAriaLabels:p,defaultedTextInput:y,defaultedConfig:_}=Ke(s),{transitionName:w,showTransition:D}=An(h),{hideNavigationButtons:S}=Gn(),B=ue(null),G=ue(null),V=ue([]),Y=ue(null);it(()=>{o("mount"),!s.timePicker&&s.arrowNavigation?l([Ge(B.value)],"time"):i(!0,s.timePicker)});const ee=J(()=>s.range&&s.modelAuto?rs(s.internalModelValue):!0),P=ue(!1),W=b=>({hours:Array.isArray(s.hours)?s.hours[b]:s.hours,minutes:Array.isArray(s.minutes)?s.minutes[b]:s.minutes,seconds:Array.isArray(s.seconds)?s.seconds[b]:s.seconds}),H=J(()=>{const b=[];if(s.range)for(let A=0;A<2;A++)b.push(W(A));else b.push(W(0));return b}),L=(b,A=!1,j="")=>{A||o("reset-flow"),P.value=b,o(b?"overlay-opened":"overlay-closed"),s.arrowNavigation&&i(b),Wt(()=>{j!==""&&V.value[0]&&V.value[0].openChildCmp(j)})},pe=J(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:s.autoApply&&!_.value.keepActionRow})),te=ht(u,"timePicker"),g=(b,A,j)=>s.range?A===0?[b,H.value[1][j]]:[H.value[0][j],b]:b,M=b=>{o("update:hours",b)},Q=b=>{o("update:minutes",b)},ie=b=>{o("update:seconds",b)},R=()=>{if(Y.value&&!y.value.enabled&&!s.noOverlayFocus){const b=tD(Y.value);b&&b.focus({preventScroll:!0})}};return e({toggleTimePicker:L}),(b,A)=>{var j;return r(),d("div",rP,[!b.timePicker&&!b.timePickerInline?$((r(),d("button",{key:0,ref_key:"openTimePickerBtn",ref:B,type:"button",class:I(pe.value),"aria-label":(j=k(p))==null?void 0:j.openTimePicker,tabindex:b.noOverlayFocus?void 0:0,onKeydown:[A[0]||(A[0]=Pe(z=>L(!0),["enter"])),A[1]||(A[1]=Pe(z=>L(!0),["space"]))],onClick:A[2]||(A[2]=z=>L(!0))},[b.$slots["clock-icon"]?ye(b.$slots,"clock-icon",{key:0}):c("",!0),b.$slots["clock-icon"]?c("",!0):(r(),me(k(La),{key:1}))],42,dP)),[[At,!k(S)(b.hideNavigation,"time")]]):c("",!0),le(_n,{name:k(w)(P.value),css:k(D)&&!b.timePickerInline},{default:q(()=>{var z;return[P.value||b.timePicker||b.timePickerInline?(r(),d("div",{key:0,ref_key:"overlayRef",ref:Y,class:I({dp__overlay:!b.timePickerInline,"dp--overlay-absolute":!s.timePicker&&!b.timePickerInline,"dp--overlay-relative":s.timePicker}),style:vt(b.timePicker?{height:`${k(_).modeHeight}px`}:void 0),tabindex:b.timePickerInline?void 0:0},[n("div",{class:I(b.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[b.$slots["time-picker-overlay"]?ye(b.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:M,setMinutes:Q,setSeconds:ie}):c("",!0),b.$slots["time-picker-overlay"]?c("",!0):(r(),d("div",{key:1,class:I(b.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(r(!0),d(E,null,oe(H.value,(v,m)=>$((r(),me(iP,at({key:m},{...b.$props,order:m,hours:v.hours,minutes:v.minutes,seconds:v.seconds,closeTimePickerBtn:G.value,disabledTimesConfig:t.disabledTimesConfig,disabled:m===0?b.fixedStart:b.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:V,"validate-time":(O,x)=>t.validateTime(O,g(x,m,O)),"onUpdate:hours":O=>M(g(O,m,"hours")),"onUpdate:minutes":O=>Q(g(O,m,"minutes")),"onUpdate:seconds":O=>ie(g(O,m,"seconds")),onMounted:R,onOverlayClosed:R,onAmPmChange:A[3]||(A[3]=O=>b.$emit("am-pm-change",O))}),ct({_:2},[oe(k(te),(O,x)=>({name:O,fn:q(ae=>[ye(b.$slots,O,Ze(ut(ae)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[At,m===0?!0:ee.value]])),128))],2)),!b.timePicker&&!b.timePickerInline?$((r(),d("button",{key:2,ref_key:"closeTimePickerBtn",ref:G,type:"button",class:I(pe.value),"aria-label":(z=k(p))==null?void 0:z.closeTimePicker,tabindex:"0",onKeydown:[A[4]||(A[4]=Pe(v=>L(!1),["enter"])),A[5]||(A[5]=Pe(v=>L(!1),["space"]))],onClick:A[6]||(A[6]=v=>L(!1))},[b.$slots["calendar-icon"]?ye(b.$slots,"calendar-icon",{key:0}):c("",!0),b.$slots["calendar-icon"]?c("",!0):(r(),me(k(vn),{key:1}))],42,cP)),[[At,!k(S)(b.hideNavigation,"time")]]):c("",!0)],2)],14,uP)):c("",!0)]}),_:3},8,["name","css"])])}}}),$s=(t,e,a,o)=>{const s=(V,Y)=>Array.isArray(e[V])?e[V][Y]:e[V],l=V=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[V]:e.seconds:0,i=(V,Y)=>V?Y!==void 0?qt(V,s("hours",Y),s("minutes",Y),l(Y)):qt(V,e.hours,e.minutes,l()):Na(K(),l(Y)),u=(V,Y)=>{e[V]=Y},h=(V,Y)=>{const ee=Object.fromEntries(Object.keys(e).map(P=>P===V?[P,Y]:[P,e[P]].slice()));if(t.range&&!t.disableTimeRangeValidation){const P=H=>a.value?qt(a.value[H],ee.hours[H],ee.minutes[H],ee.seconds[H]):null,W=H=>Ia(a.value[H],0);return!(xe(P(0),P(1))&&(Dn(P(0),W(1))||Pn(P(1),W(0))))}return!0},p=(V,Y)=>{h(V,Y)&&(u(V,Y),o&&o())},y=V=>{p("hours",V)},_=V=>{p("minutes",V)},w=V=>{p("seconds",V)},D=(V,Y,ee,P)=>{Y&&y(V),!Y&&!ee&&_(V),ee&&w(V),a.value&&P(a.value)},S=V=>{if(V){const Y=Array.isArray(V),ee=Y?[+V[0].hours,+V[1].hours]:+V.hours,P=Y?[+V[0].minutes,+V[1].minutes]:+V.minutes,W=Y?[+V[0].seconds,+V[1].seconds]:+V.seconds;u("hours",ee),u("minutes",P),t.enableSeconds&&u("seconds",W)}},B=(V,Y)=>{const ee={hours:Array.isArray(e.hours)?e.hours[V]:e.hours,disabledArr:[]};return(Y||Y===0)&&(ee.hours=Y),Array.isArray(t.disabledTimes)&&(ee.disabledArr=t.range&&Array.isArray(t.disabledTimes[V])?t.disabledTimes[V]:t.disabledTimes),ee},G=J(()=>(V,Y)=>{var ee;if(Array.isArray(t.disabledTimes)){const{disabledArr:P,hours:W}=B(V,Y),H=P.filter(L=>+L.hours===W);return((ee=H[0])==null?void 0:ee.minutes)==="*"?{hours:[W],minutes:void 0,seconds:void 0}:{hours:[],minutes:(H==null?void 0:H.map(L=>+L.minutes))??[],seconds:(H==null?void 0:H.map(L=>L.seconds?+L.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:y,updateMinutes:_,updateSeconds:w,getSetDateTime:i,updateTimeValues:D,getSecondsValue:l,assignStartTime:S,validateTime:h,disabledTimesConfig:G}},mP=(t,e)=>{const{modelValue:a,time:o}=jn(t,e),{defaultedStartTime:s}=Ke(t),{updateTimeValues:l,getSetDateTime:i,setTime:u,assignStartTime:h,disabledTimesConfig:p,validateTime:y}=$s(t,o,a),_=Y=>{const{hours:ee,minutes:P,seconds:W}=Y;return{hours:+ee,minutes:+P,seconds:W?+W:0}},w=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const ee=_(t.startTime[0]),P=_(t.startTime[1]);return[qe(K(),ee),qe(K(),P)]}const Y=_(t.startTime);return qe(K(),Y)}return t.range?[null,null]:null},D=()=>{if(t.range){const[Y,ee]=w();a.value=[i(Y,0),i(ee,1)]}else a.value=i(w())},S=Y=>Array.isArray(Y)?[Kt(K(Y[0])),Kt(K(Y[1]))]:[Kt(Y??K())],B=(Y,ee,P)=>{u("hours",Y),u("minutes",ee),u("seconds",t.enableSeconds?P:0)},G=()=>{const[Y,ee]=S(a.value);return t.range?B([Y.hours,ee.hours],[Y.minutes,ee.minutes],[Y.seconds,ee.minutes]):B(Y.hours,Y.minutes,Y.seconds)};it(()=>{if(!t.shadow)return h(s.value),a.value?G():D()});const V=()=>{Array.isArray(a.value)?a.value=a.value.map((Y,ee)=>Y&&i(Y,ee)):a.value=i(a.value),e("time-update")};return{modelValue:a,time:o,disabledTimesConfig:p,updateTime:(Y,ee=!0,P=!1)=>{l(Y,ee,P,V)},validateTime:y}},hP=et({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...wt},emits:["update:internal-model-value","time-update","am-pm-change"],setup(t,{expose:e,emit:a}){const o=a,s=t,l=en(),i=ht(l,"timePicker"),{time:u,modelValue:h,disabledTimesConfig:p,updateTime:y,validateTime:_}=mP(s,o);return e({getSidebarProps:()=>({modelValue:h,time:u,updateTime:y})}),(w,D)=>(r(),me(ea,{"multi-calendars":0,stretch:""},{default:q(()=>[le(ks,at(w.$props,{hours:k(u).hours,minutes:k(u).minutes,seconds:k(u).seconds,"internal-model-value":w.internalModelValue,"disabled-times-config":k(p),"validate-time":k(_),"onUpdate:hours":D[0]||(D[0]=S=>k(y)(S)),"onUpdate:minutes":D[1]||(D[1]=S=>k(y)(S,!1)),"onUpdate:seconds":D[2]||(D[2]=S=>k(y)(S,!1,!0)),onAmPmChange:D[3]||(D[3]=S=>w.$emit("am-pm-change",S))}),ct({_:2},[oe(k(i),(S,B)=>({name:S,fn:q(G=>[ye(w.$slots,S,Ze(ut(G)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),pP={class:"dp__month_year_row"},_P=["aria-label","onClick","onKeydown"],vP=et({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...wt},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(t,{expose:e,emit:a}){const o=a,s=t,{defaultedTransitions:l,defaultedAriaLabels:i,defaultedMultiCalendars:u,defaultedFilters:h,defaultedConfig:p,defaultedHighlight:y}=Ke(s),{transitionName:_,showTransition:w}=An(l),{buildMatrix:D}=zt(),{handleMonthYearChange:S,isDisabled:B,updateMonthYear:G}=TD(s,o),{showLeftIcon:V,showRightIcon:Y}=Gn(),ee=ue(!1),P=ue(!1),W=ue([null,null,null,null]);it(()=>{o("mount")});const H=m=>({get:()=>s[m],set:O=>{const x=m===bt.month?bt.year:bt.month;o("update-month-year",{[m]:O,[x]:s[x]}),m===bt.month?R(!0):b(!0)}}),L=J(H(bt.month)),pe=J(H(bt.year)),te=J(()=>m=>({month:s.month,year:s.year,items:m===bt.month?s.months:s.years,instance:s.instance,updateMonthYear:G,toggle:m===bt.month?R:b})),g=J(()=>s.months.find(O=>O.value===s.month)||{text:"",value:0}),M=J(()=>hn(s.months,m=>{const O=s.month===m.value,x=Sn(m.value,ds(s.year,s.minDate),us(s.year,s.maxDate))||h.value.months.includes(m.value),ae=vs(y.value,m.value,s.year);return{active:O,disabled:x,highlighted:ae}})),Q=J(()=>hn(s.years,m=>{const O=s.year===m.value,x=Sn(m.value,pn(s.minDate),pn(s.maxDate))||h.value.years.includes(m.value),ae=Za(y.value,m.value);return{active:O,disabled:x,highlighted:ae}})),ie=(m,O)=>{O!==void 0?m.value=O:m.value=!m.value,m.value||o("overlay-closed")},R=(m=!1,O)=>{A(m),ie(ee,O)},b=(m=!1,O)=>{A(m),ie(P,O)},A=m=>{m||o("reset-flow")},j=(m,O)=>{s.arrowNavigation&&(W.value[O]=Ge(m),D(W.value,"monthYear"))},z=J(()=>{var m,O;return[{type:bt.month,index:1,toggle:R,modelValue:L.value,updateModelValue:x=>L.value=x,text:g.value.text,showSelectionGrid:ee.value,items:M.value,ariaLabel:(m=i.value)==null?void 0:m.openMonthsOverlay},{type:bt.year,index:2,toggle:b,modelValue:pe.value,updateModelValue:x=>pe.value=x,text:s.year,showSelectionGrid:P.value,items:Q.value,ariaLabel:(O=i.value)==null?void 0:O.openYearsOverlay}]}),v=J(()=>s.disableYearSelect?[z.value[0]]:s.yearFirst?[...z.value].reverse():z.value);return e({toggleMonthPicker:R,toggleYearPicker:b,handleMonthYearChange:S}),(m,O)=>{var x,ae,re;return r(),d("div",pP,[m.$slots["month-year"]?ye(m.$slots,"month-year",Ze(at({key:0},{month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:k(G),handleMonthYearChange:k(S),instance:t.instance}))):(r(),d(E,{key:1},[k(V)(k(u),t.instance)&&!m.vertical?(r(),me(Cn,{key:0,"aria-label":(x=k(i))==null?void 0:x.prevMonth,disabled:k(B)(!1),onActivate:O[0]||(O[0]=U=>k(S)(!1,!0)),onSetRef:O[1]||(O[1]=U=>j(U,0))},{default:q(()=>[m.$slots["arrow-left"]?ye(m.$slots,"arrow-left",{key:0}):c("",!0),m.$slots["arrow-left"]?c("",!0):(r(),me(k(Ea),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),n("div",{class:I(["dp__month_year_wrap",{dp__year_disable_select:m.disableYearSelect}])},[(r(!0),d(E,null,oe(v.value,(U,f)=>(r(),d(E,{key:U.type},[n("button",{ref_for:!0,ref:fe=>j(fe,f+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":U.ariaLabel,onClick:U.toggle,onKeydown:[Pe(De(U.toggle,["prevent"]),["enter"]),Pe(De(U.toggle,["prevent"]),["space"])]},[m.$slots[U.type]?ye(m.$slots,U.type,{key:0,text:U.text,value:s[U.type]}):c("",!0),m.$slots[U.type]?c("",!0):(r(),d(E,{key:1},[T(C(U.text),1)],64))],40,_P),le(_n,{name:k(_)(U.showSelectionGrid),css:k(w)},{default:q(()=>[U.showSelectionGrid?(r(),me(Un,{key:0,items:U.items,"arrow-navigation":m.arrowNavigation,"hide-navigation":m.hideNavigation,"is-last":m.autoApply&&!k(p).keepActionRow,"skip-button-ref":!1,config:m.config,type:U.type,"header-refs":[],"esc-close":m.escClose,"text-input":m.textInput,onSelected:U.updateModelValue,onToggle:U.toggle},ct({"button-icon":q(()=>[m.$slots["calendar-icon"]?ye(m.$slots,"calendar-icon",{key:0}):c("",!0),m.$slots["calendar-icon"]?c("",!0):(r(),me(k(vn),{key:1}))]),_:2},[m.$slots[`${U.type}-overlay-value`]?{name:"item",fn:q(({item:fe})=>[ye(m.$slots,`${U.type}-overlay-value`,{text:fe.text,value:fe.value})]),key:"0"}:void 0,m.$slots[`${U.type}-overlay`]?{name:"overlay",fn:q(()=>[ye(m.$slots,`${U.type}-overlay`,Ze(ut(te.value(U.type))))]),key:"1"}:void 0,m.$slots[`${U.type}-overlay-header`]?{name:"header",fn:q(()=>[ye(m.$slots,`${U.type}-overlay-header`,{toggle:U.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"])],64))),128))],2),k(V)(k(u),t.instance)&&m.vertical?(r(),me(Cn,{key:1,"aria-label":(ae=k(i))==null?void 0:ae.prevMonth,disabled:k(B)(!1),onActivate:O[2]||(O[2]=U=>k(S)(!1,!0))},{default:q(()=>[m.$slots["arrow-up"]?ye(m.$slots,"arrow-up",{key:0}):c("",!0),m.$slots["arrow-up"]?c("",!0):(r(),me(k(Wa),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),k(Y)(k(u),t.instance)?(r(),me(Cn,{key:2,ref:"rightIcon",disabled:k(B)(!0),"aria-label":(re=k(i))==null?void 0:re.nextMonth,onActivate:O[3]||(O[3]=U=>k(S)(!0,!0)),onSetRef:O[4]||(O[4]=U=>j(U,m.disableYearSelect?2:3))},{default:q(()=>[m.$slots[m.vertical?"arrow-down":"arrow-right"]?ye(m.$slots,m.vertical?"arrow-down":"arrow-right",{key:0}):c("",!0),m.$slots[m.vertical?"arrow-down":"arrow-right"]?c("",!0):(r(),me(Fn(m.vertical?k(Ha):k(qa)),{key:1}))]),_:3},8,["disabled","aria-label"])):c("",!0)],64))])}}}),fP=["aria-label"],bP={class:"dp__calendar_header",role:"row"},gP={key:0,class:"dp__calendar_header_item",role:"gridcell"},yP=n("div",{class:"dp__calendar_header_separator"},null,-1),kP=["aria-label"],$P={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},wP={class:"dp__cell_inner"},CP=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],FP=et({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...wt},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:a}){const o=a,s=t,{buildMultiLevelMatrix:l}=zt(),{defaultedTransitions:i,defaultedConfig:u,defaultedAriaLabels:h,defaultedMultiCalendars:p,defaultedWeekNumbers:y}=Ke(s),_=ue(null),w=ue({bottom:"",left:"",transform:""}),D=ue([]),S=ue(null),B=ue(!0),G=ue(""),V=ue({startX:0,endX:0,startY:0,endY:0}),Y=ue([]),ee=ue({left:"50%"}),P=J(()=>s.calendar?s.calendar(s.mappedDates):s.mappedDates),W=J(()=>s.dayNames?Array.isArray(s.dayNames)?s.dayNames:s.dayNames(s.locale,+s.weekStart):G6(s.formatLocale,s.locale,+s.weekStart));it(()=>{o("mount",{cmp:"calendar",refs:D}),u.value.noSwipe||S.value&&(S.value.addEventListener("touchstart",b,{passive:!1}),S.value.addEventListener("touchend",A,{passive:!1}),S.value.addEventListener("touchmove",j,{passive:!1})),s.monthChangeOnScroll&&S.value&&S.value.addEventListener("wheel",m,{passive:!1})});const H=U=>U?s.vertical?"vNext":"next":s.vertical?"vPrevious":"previous",L=(U,f)=>{if(s.transitions){const fe=st(Ut(K(),s.month,s.year));G.value=ot(st(Ut(K(),U,f)),fe)?i.value[H(!0)]:i.value[H(!1)],B.value=!1,Wt(()=>{B.value=!0})}},pe=J(()=>({[s.calendarClassName]:!!s.calendarClassName})),te=J(()=>U=>{const f=eD(U);return{dp__marker_dot:f.type==="dot",dp__marker_line:f.type==="line"}}),g=J(()=>U=>xe(U,_.value)),M=J(()=>({dp__calendar:!0,dp__calendar_next:p.value.count>0&&s.instance!==0})),Q=J(()=>U=>s.hideOffsetDates?U.current:!0),ie=async(U,f,fe)=>{var be,Z;if(o("set-hover-date",U),(Z=(be=U.marker)==null?void 0:be.tooltip)!=null&&Z.length){const Ce=Ge(D.value[f][fe]);if(Ce){const{width:ge,height:N}=Ce.getBoundingClientRect();_.value=U.value;let se={left:`${ge/2}px`},Te=-50;if(await Wt(),Y.value[0]){const{left:de,width:Ne}=Y.value[0].getBoundingClientRect();de<0&&(se={left:"0"},Te=0,ee.value.left=`${ge/2}px`),window.innerWidth<de+Ne&&(se={right:"0"},Te=0,ee.value.left=`${Ne-ge/2}px`)}w.value={bottom:`${N}px`,...se,transform:`translateX(${Te}%)`},o("tooltip-open",U.marker)}}},R=U=>{_.value&&(_.value=null,w.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),o("tooltip-close",U.marker))},b=U=>{V.value.startX=U.changedTouches[0].screenX,V.value.startY=U.changedTouches[0].screenY},A=U=>{V.value.endX=U.changedTouches[0].screenX,V.value.endY=U.changedTouches[0].screenY,z()},j=U=>{s.vertical&&!s.inline&&U.preventDefault()},z=()=>{const U=s.vertical?"Y":"X";Math.abs(V.value[`start${U}`]-V.value[`end${U}`])>10&&o("handle-swipe",V.value[`start${U}`]>V.value[`end${U}`]?"right":"left")},v=(U,f,fe)=>{U&&(Array.isArray(D.value[f])?D.value[f][fe]=U:D.value[f]=[U]),s.arrowNavigation&&l(D.value,"calendar")},m=U=>{s.monthChangeOnScroll&&(U.preventDefault(),o("handle-scroll",U))},O=U=>y.value.type==="local"?uT(U.value,{weekStartsOn:+s.weekStart}):y.value.type==="iso"?lT(U.value):typeof y.value.type=="function"?y.value.type(U.value):"",x=U=>{const f=U[0];return y.value.hideOnOffsetDates?U.some(fe=>fe.current)?O(f):"":O(f)},ae=(U,f)=>{Et(U,u.value),o("select-date",f)},re=U=>{Et(U,u.value)};return e({triggerTransition:L}),(U,f)=>{var fe;return r(),d("div",{class:I(M.value)},[n("div",{ref_key:"calendarWrapRef",ref:S,role:"grid",class:I(pe.value),"aria-label":(fe=k(h))==null?void 0:fe.calendarWrap},[(r(),d(E,{key:0},[n("div",bP,[U.weekNumbers?(r(),d("div",gP,C(U.weekNumName),1)):c("",!0),(r(!0),d(E,null,oe(W.value,(be,Z)=>(r(),d("div",{key:Z,class:"dp__calendar_header_item",role:"gridcell"},[U.$slots["calendar-header"]?ye(U.$slots,"calendar-header",{key:0,day:be,index:Z}):c("",!0),U.$slots["calendar-header"]?c("",!0):(r(),d(E,{key:1},[T(C(be),1)],64))]))),128))]),yP,le(_n,{name:G.value,css:!!U.transitions},{default:q(()=>{var be;return[B.value?(r(),d("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((be=k(h))==null?void 0:be.calendarDays)||void 0},[(r(!0),d(E,null,oe(P.value,(Z,Ce)=>(r(),d("div",{key:Ce,class:"dp__calendar_row",role:"row"},[U.weekNumbers?(r(),d("div",$P,[n("div",wP,C(x(Z.days)),1)])):c("",!0),(r(!0),d(E,null,oe(Z.days,(ge,N)=>{var se,Te,de;return r(),d("div",{id:ge.value.toISOString().split("T")[0],ref_for:!0,ref:Ne=>v(Ne,Ce,N),key:N+Ce,role:"gridcell",class:"dp__calendar_item","aria-selected":ge.classData.dp__active_date||ge.classData.dp__range_start||ge.classData.dp__range_start,"aria-disabled":ge.classData.dp__cell_disabled||void 0,"aria-label":(Te=(se=k(h))==null?void 0:se.day)==null?void 0:Te.call(se,ge),tabindex:"0",onClick:De(Ne=>ae(Ne,ge),["prevent"]),onKeydown:[Pe(Ne=>U.$emit("select-date",ge),["enter"]),Pe(Ne=>U.$emit("handle-space",ge),["space"])],onMouseenter:Ne=>ie(ge,Ce,N),onMouseleave:Ne=>R(ge)},[n("div",{class:I(["dp__cell_inner",ge.classData])},[U.$slots.day&&Q.value(ge)?ye(U.$slots,"day",{key:0,day:+ge.text,date:ge.value}):c("",!0),U.$slots.day?c("",!0):(r(),d(E,{key:1},[T(C(ge.text),1)],64)),ge.marker&&Q.value(ge)?(r(),d(E,{key:2},[U.$slots.marker?ye(U.$slots,"marker",{key:0,marker:ge.marker,day:+ge.text,date:ge.value}):(r(),d("div",{key:1,class:I(te.value(ge.marker)),style:vt(ge.marker.color?{backgroundColor:ge.marker.color}:{})},null,6))],64)):c("",!0),g.value(ge.value)?(r(),d("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:Y,class:"dp__marker_tooltip",style:vt(w.value)},[(de=ge.marker)!=null&&de.tooltip?(r(),d("div",{key:0,class:"dp__tooltip_content",onClick:re},[(r(!0),d(E,null,oe(ge.marker.tooltip,(Ne,mt)=>(r(),d("div",{key:mt,class:"dp__tooltip_text"},[U.$slots["marker-tooltip"]?ye(U.$slots,"marker-tooltip",{key:0,tooltip:Ne,day:ge.value}):c("",!0),U.$slots["marker-tooltip"]?c("",!0):(r(),d(E,{key:1},[n("div",{class:"dp__tooltip_mark",style:vt(Ne.color?{backgroundColor:Ne.color}:{})},null,4),n("div",null,C(Ne.text),1)],64))]))),128)),n("div",{class:"dp__arrow_bottom_tp",style:vt(ee.value)},null,4)])):c("",!0)],4)):c("",!0)],2)],40,CP)}),128))]))),128))],8,kP)):c("",!0)]}),_:3},8,["name","css"])],64))],10,fP)],2)}}}),So=t=>Array.isArray(t),TP=(t,e,a,o)=>{const s=ue([]),{modelValue:l,calendars:i,time:u}=jn(t,e),{defaultedMultiCalendars:h,defaultedStartTime:p}=Ke(t),{validateMonthYearInRange:y,isDisabled:_,isDateRangeAllowed:w,checkMinMaxRange:D}=nn(t),{updateTimeValues:S,getSetDateTime:B,setTime:G,assignStartTime:V,validateTime:Y,disabledTimesConfig:ee}=$s(t,u,l,o),P=J(()=>F=>i.value[F]?i.value[F].month:0),W=J(()=>F=>i.value[F]?i.value[F].year:0),H=(F,ne,we)=>{var Ae,We;i.value[F]||(i.value[F]={month:0,year:0}),i.value[F].month=Co(ne)?(Ae=i.value[F])==null?void 0:Ae.month:ne,i.value[F].year=Co(we)?(We=i.value[F])==null?void 0:We.year:we},L=()=>{t.autoApply&&e("select-date")};Ht(l,(F,ne)=>{JSON.stringify(F)!==JSON.stringify(ne)&&g()}),it(()=>{t.shadow||(l.value||(m(),p.value&&V(p.value)),g(!0),t.focusStartDate&&t.startDate&&m())});const pe=J(()=>{var F;return(F=t.flow)!=null&&F.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),te=()=>{t.autoApply&&pe.value&&e("auto-apply",t.partialFlow)},g=(F=!1)=>{if(l.value)return Array.isArray(l.value)?(s.value=l.value,A(F)):Q(l.value,F);if(h.value.count&&F&&!t.startDate)return M(K(),F)},M=(F,ne=!1)=>{if((!h.value.count||!h.value.static||ne)&&H(0,Ve(F),Me(F)),h.value.count&&(!h.value.solo||!l.value))for(let we=1;we<h.value.count;we++){const Ae=qe(K(),{month:P.value(we-1),year:W.value(we-1)}),We=Vo(Ae,{months:1});i.value[we]={month:Ve(We),year:Me(We)}}},Q=(F,ne)=>{M(F),G("hours",kt(F)),G("minutes",St(F)),G("seconds",cn(F)),h.value.count&&ne&&v()},ie=F=>{if(h.value.count){if(h.value.solo)return 0;const ne=Ve(F[0]),we=Ve(F[1]);return Math.abs(we-ne)<h.value.count?0:1}return 1},R=(F,ne)=>{F[1]&&t.showLastInRange?M(F[ie(F)],ne):M(F[0],ne);const we=(Ae,We)=>[Ae(F[0]),F[1]?Ae(F[1]):u[We][1]];G("hours",we(kt,"hours")),G("minutes",we(St,"minutes")),G("seconds",we(cn,"seconds"))},b=(F,ne)=>{if((t.range||t.weekPicker)&&!t.multiDates)return R(F,ne);if(t.multiDates&&ne){const we=F[F.length-1];return Q(we,ne)}},A=F=>{const ne=l.value;b(ne,F),h.value.count&&h.value.solo&&v()},j=(F,ne)=>{const we=qe(K(),{month:P.value(ne),year:W.value(ne)}),Ae=F<0?yt(we,1):mn(we,1);y(Ve(Ae),Me(Ae),F<0,t.preventMinMaxNavigation)&&(H(ne,Ve(Ae),Me(Ae)),e("update-month-year",{instance:ne,month:Ve(Ae),year:Me(Ae)}),h.value.count&&!h.value.solo&&z(ne),a())},z=F=>{for(let ne=F-1;ne>=0;ne--){const we=mn(qe(K(),{month:P.value(ne+1),year:W.value(ne+1)}),1);H(ne,Ve(we),Me(we))}for(let ne=F+1;ne<=h.value.count-1;ne++){const we=yt(qe(K(),{month:P.value(ne-1),year:W.value(ne-1)}),1);H(ne,Ve(we),Me(we))}},v=()=>{if(Array.isArray(l.value)&&l.value.length===2){const F=K(K(l.value[1]?l.value[1]:yt(l.value[0],1))),[ne,we]=[Ve(l.value[0]),Me(l.value[0])],[Ae,We]=[Ve(l.value[1]),Me(l.value[1])];(ne!==Ae||ne===Ae&&we!==We)&&h.value.solo&&H(1,Ve(F),Me(F))}else l.value&&!Array.isArray(l.value)&&(H(0,Ve(l.value),Me(l.value)),M(K()))},m=()=>{t.startDate&&(H(0,Ve(K(t.startDate)),Me(K(t.startDate))),h.value.count&&z(0))},O=sD((F,ne)=>{t.monthChangeOnScroll&&j(t.monthChangeOnScroll!=="inverse"?-F.deltaY:F.deltaY,ne)},50),x=(F,ne,we=!1)=>{t.monthChangeOnArrows&&t.vertical===we&&ae(F,ne)},ae=(F,ne)=>{j(F==="right"?-1:1,ne)},re=F=>t.markers.find(ne=>xe(rD(F.value),$t(K(ne.date),t.timezone))),U=(F,ne)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[F==0,!0];case"fair":return[F==0||ne>F,!0];case"append":return[!1,!1];default:return[!1,!1]}},f=(F,ne,we,Ae)=>{if(t.sixWeeks&&F.length<6){const We=6-F.length,Ct=(ne.getDay()+7-Ae)%7,Rt=6-(we.getDay()+7-Ae)%7,[ce,Se]=U(Ct,Rt);for(let Fe=1;Fe<=We;Fe++)if(Se?!!(Fe%2)==ce:ce){const _t=F[0].days[0],Mt=fe(jt(_t.value,-7),Ve(ne));F.unshift({days:Mt})}else{const _t=F[F.length-1],Mt=_t.days[_t.days.length-1],la=fe(jt(Mt.value,1),Ve(ne));F.push({days:la})}}return F},fe=(F,ne)=>{const we=K(F),Ae=[];for(let We=0;We<7;We++){const Ct=jt(we,We),Rt=Ve(Ct)!==ne;Ae.push({text:t.hideOffsetDates&&Rt?"":Ct.getDate(),value:Ct,current:!Rt,classData:{}})}return Ae},be=(F,ne)=>{const we=[],Ae=new Date(ne,F),We=new Date(ne,F+1,0),Ct=t.weekStart,Rt=Gt(Ae,{weekStartsOn:Ct}),ce=Se=>{const Fe=fe(Se,F);if(we.push({days:Fe}),!we[we.length-1].days.some(_t=>xe(st(_t.value),st(We)))){const _t=jt(Se,7);ce(_t)}};return ce(Rt),f(we,Ae,We,Ct)},Z=F=>(l.value=Nn(K(F.value),t.timezone,t.weekStart),e("date-update",F.value),te()),Ce=F=>{const ne=qt(K(F.value),u.hours,u.minutes,an());e("date-update",ne),t.multiDates?Ga(ne,l,t.multiDatesLimit):l.value=ne,o(),Wt().then(()=>{te()})},ge=F=>t.noDisabledRange?ms(s.value[0],F).some(ne=>_(ne)):!1,N=()=>{s.value=l.value?l.value.slice():[],s.value.length===2&&!(t.fixedStart||t.fixedEnd)&&(s.value=[])},se=(F,ne)=>{const we=[K(F.value),jt(K(F.value),+t.autoRange)];w(we)?(ne&&Te(F.value),s.value=we):e("invalid-date",F.value)},Te=F=>{const ne=Ve(K(F)),we=Me(K(F));if(H(0,ne,we),h.value.count>0)for(let Ae=1;Ae<h.value.count;Ae++){const We=dD(qe(K(F),{year:P.value(Ae-1),month:W.value(Ae-1)}));H(Ae,We.month,We.year)}},de=F=>Array.isArray(l.value)&&l.value.length===2?t.fixedStart&&(ot(F,l.value[0])||xe(F,l.value[0]))?[l.value[0],F]:t.fixedEnd&&(nt(F,l.value[1])||xe(F,l.value[1]))?[F,l.value[1]]:(e("invalid-fixed-range",F),l.value):[],Ne=F=>{if(ge(F.value)||!D(F.value,l.value,t.fixedStart?0:1))return e("invalid-date",F.value);s.value=de(K(F.value))},mt=(F,ne)=>{if(N(),t.autoRange)return se(F,ne);if(t.fixedStart||t.fixedEnd)return Ne(F);s.value[0]?D(K(F.value),l.value)&&!ge(F.value)?nt(K(F.value),K(s.value[0]))?(s.value.unshift(K(F.value)),e("range-end",s.value[0])):(s.value[1]=K(F.value),e("range-end",s.value[1])):(t.autoApply&&e("auto-apply-invalid",F.value),e("invalid-date",F.value)):(s.value[0]=K(F.value),e("range-start",s.value[0]))},an=(F=!0)=>t.enableSeconds?Array.isArray(u.seconds)?F?u.seconds[0]:u.seconds[1]:u.seconds:0,Yt=F=>{s.value[F]=qt(s.value[F],u.hours[F],u.minutes[F],an(F!==1))},Vn=()=>{var F,ne;s.value[0]&&s.value[1]&&+((F=s.value)==null?void 0:F[0])>+((ne=s.value)==null?void 0:ne[1])&&(s.value.reverse(),e("range-start",s.value[0]),e("range-end",s.value[1]))},Yn=()=>{s.value.length&&(s.value[0]&&!s.value[1]?Yt(0):(Yt(0),Yt(1),o()),Vn(),l.value=s.value.slice(),ta(s.value,e,t.autoApply,t.modelAuto))},aa=(F,ne=!1)=>{if(_(F.value)||!F.current&&t.hideOffsetDates)return e("invalid-date",F.value);if(t.weekPicker)return Z(F);if(!t.range)return Ce(F);So(u.hours)&&So(u.minutes)&&!t.multiDates&&(mt(F,ne),Yn())},bn=(F,ne)=>{var we;H(F,ne.month,ne.year),h.value.count&&!h.value.solo&&z(F),e("update-month-year",{instance:F,month:ne.month,year:ne.year}),a(h.value.solo?F:void 0);const Ae=(we=t.flow)!=null&&we.length?t.flow[t.flowStep]:void 0;!ne.fromNav&&(Ae===Ft.month||Ae===Ft.year)&&o()},pt=(F,ne)=>{gs({value:F,modelValue:l,range:t.range,timezone:ne?void 0:t.timezone}),L(),t.multiCalendars&&Wt().then(()=>g(!0))},oa=()=>{t.range?l.value&&Array.isArray(l.value)&&l.value[0]?l.value=nt(K(),l.value[0])?[K(),l.value[0]]:[l.value[0],K()]:l.value=[K()]:l.value=K(),L()},sa=()=>{if(Array.isArray(l.value))if(t.multiDates){const F=Rn();l.value[l.value.length-1]=B(F)}else l.value=l.value.map((F,ne)=>F&&B(F,ne));else l.value=B(l.value);e("time-update")},Rn=()=>Array.isArray(l.value)&&l.value.length?l.value[l.value.length-1]:null;return{calendars:i,modelValue:l,month:P,year:W,time:u,disabledTimesConfig:ee,validateTime:Y,getCalendarDays:be,getMarker:re,handleScroll:O,handleSwipe:ae,handleArrow:x,selectDate:aa,updateMonthYear:bn,presetDate:pt,selectCurrentDate:oa,updateTime:(F,ne=!0,we=!1)=>{S(F,ne,we,sa)}}},DP={key:0},PP=et({__name:"DatePicker",props:{...wt},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:a}){const o=a,s=t,{calendars:l,month:i,year:u,modelValue:h,time:p,disabledTimesConfig:y,validateTime:_,getCalendarDays:w,getMarker:D,handleArrow:S,handleScroll:B,handleSwipe:G,selectDate:V,updateMonthYear:Y,presetDate:ee,selectCurrentDate:P,updateTime:W}=TP(s,o,v,m),H=en(),{setHoverDate:L,getDayClassData:pe,clearHoverDate:te}=OD(h,s),{defaultedMultiCalendars:g}=Ke(s),M=ue([]),Q=ue([]),ie=ue(null),R=ht(H,"calendar"),b=ht(H,"monthYear"),A=ht(H,"timePicker"),j=x=>{s.shadow||o("mount",x)};Ht(l,()=>{s.shadow||setTimeout(()=>{o("recalculate-position")},0)},{deep:!0});const z=J(()=>x=>w(i.value(x),u.value(x)).map(ae=>({...ae,days:ae.days.map(re=>(re.marker=D(re),re.classData=pe(re),re))})));function v(x){var ae;x||x===0?(ae=Q.value[x])==null||ae.triggerTransition(i.value(x),u.value(x)):Q.value.forEach((re,U)=>re.triggerTransition(i.value(U),u.value(U)))}function m(){o("update-flow-step")}const O=(x,ae=!1)=>{V(x,ae),s.spaceConfirm&&o("select-date")};return e({clearHoverDate:te,presetDate:ee,selectCurrentDate:P,toggleMonthPicker:(x,ae,re=0)=>{var U;(U=M.value[re])==null||U.toggleMonthPicker(x,ae)},toggleYearPicker:(x,ae,re=0)=>{var U;(U=M.value[re])==null||U.toggleYearPicker(x,ae)},toggleTimePicker:(x,ae,re)=>{var U;(U=ie.value)==null||U.toggleTimePicker(x,ae,re)},handleArrow:S,updateMonthYear:Y,getSidebarProps:()=>({modelValue:h,month:i,year:u,time:p,updateTime:W,updateMonthYear:Y,selectDate:V,presetDate:ee})}),(x,ae)=>(r(),d(E,null,[le(ea,{"multi-calendars":k(g).count},{default:q(({instance:re,index:U})=>[x.disableMonthYearSelect?c("",!0):(r(),me(vP,at({key:0,ref:f=>{f&&(M.value[U]=f)},months:k(is)(x.formatLocale,x.locale,x.monthNameFormat),years:k(Ka)(x.yearRange,x.reverseYears),month:k(i)(re),year:k(u)(re),instance:re},x.$props,{onMount:ae[0]||(ae[0]=f=>j(k(Zt).header)),onResetFlow:ae[1]||(ae[1]=f=>x.$emit("reset-flow")),onUpdateMonthYear:f=>k(Y)(re,f),onOverlayClosed:ae[2]||(ae[2]=f=>x.$emit("focus-menu"))}),ct({_:2},[oe(k(b),(f,fe)=>({name:f,fn:q(be=>[ye(x.$slots,f,Ze(ut(be)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),le(FP,at({ref:f=>{f&&(Q.value[U]=f)},"mapped-dates":z.value(re),month:k(i)(re),year:k(u)(re),instance:re},x.$props,{onSelectDate:f=>k(V)(f,re!==1),onHandleSpace:f=>O(f,re!==1),onSetHoverDate:ae[3]||(ae[3]=f=>k(L)(f)),onHandleScroll:f=>k(B)(f,re),onHandleSwipe:f=>k(G)(f,re),onMount:ae[4]||(ae[4]=f=>j(k(Zt).calendar)),onResetFlow:ae[5]||(ae[5]=f=>x.$emit("reset-flow")),onTooltipOpen:ae[6]||(ae[6]=f=>x.$emit("tooltip-open",f)),onTooltipClose:ae[7]||(ae[7]=f=>x.$emit("tooltip-close",f))}),ct({_:2},[oe(k(R),(f,fe)=>({name:f,fn:q(be=>[ye(x.$slots,f,Ze(ut({...be})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),x.enableTimePicker?(r(),d("div",DP,[x.$slots["time-picker"]?ye(x.$slots,"time-picker",Ze(at({key:0},{time:k(p),updateTime:k(W)}))):(r(),me(ks,at({key:1,ref_key:"timePickerRef",ref:ie},x.$props,{hours:k(p).hours,minutes:k(p).minutes,seconds:k(p).seconds,"internal-model-value":x.internalModelValue,"disabled-times-config":k(y),"validate-time":k(_),onMount:ae[8]||(ae[8]=re=>j(k(Zt).timePicker)),"onUpdate:hours":ae[9]||(ae[9]=re=>k(W)(re)),"onUpdate:minutes":ae[10]||(ae[10]=re=>k(W)(re,!1)),"onUpdate:seconds":ae[11]||(ae[11]=re=>k(W)(re,!1,!0)),onResetFlow:ae[12]||(ae[12]=re=>x.$emit("reset-flow")),onOverlayClosed:ae[13]||(ae[13]=re=>x.$emit("time-picker-close")),onOverlayOpened:ae[14]||(ae[14]=re=>x.$emit("time-picker-open",re)),onAmPmChange:ae[15]||(ae[15]=re=>x.$emit("am-pm-change",re))}),ct({_:2},[oe(k(A),(re,U)=>({name:re,fn:q(f=>[ye(x.$slots,re,Ze(ut(f)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):c("",!0)],64))}}),SP=(t,e)=>{const a=ue(),{defaultedMultiCalendars:o,defaultedConfig:s,defaultedHighlight:l}=Ke(t),{modelValue:i,year:u,month:h,calendars:p}=jn(t,e),{isDisabled:y}=nn(t),{selectYear:_,groupedYears:w,showYearPicker:D,isDisabled:S,toggleYearPicker:B,handleYearSelect:G,handleYear:V}=ys({modelValue:i,multiCalendars:o,highlight:l,calendars:p,month:h,year:u,props:t,emit:e}),Y=(te,g)=>[te,g].map(M=>Nt(M,"MMMM",{locale:t.formatLocale})).join("-"),ee=J(()=>te=>i.value?Array.isArray(i.value)?i.value.some(g=>ho(te,g)):ho(i.value,te):!1),P=te=>{if(t.range){if(Array.isArray(i.value)){const g=xe(te,i.value[0])||xe(te,i.value[1]);return Zn(i.value,a.value,te)&&!g}return!1}return!1},W=J(()=>te=>{const g=qe(new Date,{year:u.value(te)});return XF({start:ZF(g),end:KF(g)}).map(M=>{const Q=Tn(M),ie=so(M),R=y(M),b=P(Q),A=typeof l.value=="function"?l.value({quarter:oo(Q),year:Me(Q)}):!!l.value.quarters.find(j=>j.quarter===oo(Q)&&j.year===Me(Q));return{text:Y(Q,ie),value:Q,active:ee.value(Q),highlighted:A,disabled:R,isBetween:b}})}),H=te=>{Ga(te,i,t.multiDatesLimit),e("auto-apply",!0)},L=te=>{const g=Ja(i,te,e);ta(g,e,t.autoApply,t.modelAuto)},pe=te=>{i.value=te,e("auto-apply")};return{defaultedConfig:s,defaultedMultiCalendars:o,groupedYears:w,year:u,isDisabled:S,quarters:W,showYearPicker:D,modelValue:i,setHoverDate:te=>{a.value=te},selectYear:_,selectQuarter:(te,g,M)=>{if(!M)return p.value[g].month=Ve(so(te)),t.multiDates?H(te):t.range?L(te):pe(te)},toggleYearPicker:B,handleYearSelect:G,handleYear:V}},OP={class:"dp--quarter-items"},MP=["disabled","onClick","onMouseover"],AP=et({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...wt},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(t,{expose:e,emit:a}){const o=a,s=t,l=en(),i=ht(l,"yearMode"),{defaultedMultiCalendars:u,defaultedConfig:h,groupedYears:p,year:y,isDisabled:_,quarters:w,modelValue:D,showYearPicker:S,setHoverDate:B,selectQuarter:G,toggleYearPicker:V,handleYearSelect:Y,handleYear:ee}=SP(s,o);return e({getSidebarProps:()=>({modelValue:D,year:y,selectQuarter:G,handleYearSelect:Y,handleYear:ee})}),(P,W)=>(r(),me(ea,{"multi-calendars":k(u).count,stretch:""},{default:q(({instance:H})=>[n("div",{class:"dp-quarter-picker-wrap",style:vt({minHeight:`${k(h).modeHeight}px`})},[n("div",null,[le(bs,at(P.$props,{items:k(p)(H),instance:H,"show-year-picker":k(S)[H],year:k(y)(H),"is-disabled":L=>k(_)(H,L),onHandleYear:L=>k(ee)(H,L),onYearSelect:L=>k(Y)(L,H),onToggleYearPicker:L=>k(V)(H,L==null?void 0:L.flow,L==null?void 0:L.show)}),ct({_:2},[oe(k(i),(L,pe)=>({name:L,fn:q(te=>[ye(P.$slots,L,Ze(ut(te)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),n("div",OP,[(r(!0),d(E,null,oe(k(w)(H),(L,pe)=>(r(),d("div",{key:pe},[n("button",{type:"button",class:I(["dp--qr-btn",{"dp--qr-btn-active":L.active,"dp--qr-btn-between":L.isBetween,"dp--qr-btn-disabled":L.disabled,"dp--highlighted":L.highlighted}]),disabled:L.disabled,onClick:te=>k(G)(L.value,H,L.disabled),onMouseover:te=>k(B)(L.value)},[P.$slots.quarter?ye(P.$slots,"quarter",{key:0,value:L.value,text:L.text}):(r(),d(E,{key:1},[T(C(L.text),1)],64))],42,MP)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),jP=["id"],UP={key:0,class:"dp__sidebar_left"},VP={key:1,class:"dp--preset-dates"},YP=["onClick","onKeydown"],RP={key:2,class:"dp__sidebar_right"},xP={key:3,class:"dp__action_extra"},Oo=et({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Jn,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:a}){const o=a,s=t,l=J(()=>{const{openOnTop:N,...se}=s;return{...se,flowStep:pe.value,noOverlayFocus:s.noOverlayFocus}}),{setMenuFocused:i,setShiftKey:u,control:h}=fs(),p=en(),{defaultedTextInput:y,defaultedInline:_,defaultedConfig:w}=Ke(s),D=ue(null),S=ue(0),B=ue(null),G=ue(null),V=ue(!1),Y=ue(null);it(()=>{if(!s.shadow){V.value=!0,ee(),window.addEventListener("resize",ee);const N=Ge(B);if(N&&!y.value.enabled&&!_.value.enabled&&(i(!0),ie()),N){const se=Te=>{w.value.allowPreventDefault&&Te.preventDefault(),Et(Te,w.value,!0)};N.addEventListener("pointerdown",se),N.addEventListener("mousedown",se)}}}),ja(()=>{window.removeEventListener("resize",ee)});const ee=()=>{const N=Ge(G);N&&(S.value=N.getBoundingClientRect().width)},{arrowRight:P,arrowLeft:W,arrowDown:H,arrowUp:L}=zt(),{flowStep:pe,updateFlowStep:te,childMount:g,resetFlow:M}=MD(s,o,Y),Q=J(()=>s.monthPicker?QD:s.yearPicker?KD:s.timePicker?hP:s.quarterPicker?AP:PP),ie=()=>{const N=Ge(B);N&&N.focus({preventScroll:!0})},R=J(()=>{var N;return((N=Y.value)==null?void 0:N.getSidebarProps())||{}}),b=()=>{s.openOnTop&&o("recalculate-position")},A=ht(p,"action"),j=J(()=>s.monthPicker||s.yearPicker?ht(p,"monthYear"):s.timePicker?ht(p,"timePicker"):ht(p,"shared")),z=J(()=>s.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),v=J(()=>({dp__menu_disabled:s.disabled,dp__menu_readonly:s.readonly})),m=J(()=>({dp__menu:!0,dp__menu_index:!_.value.enabled,dp__relative:_.value.enabled,[s.menuClassName]:!!s.menuClassName})),O=N=>{Et(N,w.value,!0)},x=()=>{s.escClose&&o("close-picker")},ae=N=>{if(s.arrowNavigation){if(N==="up")return L();if(N==="down")return H();if(N==="left")return W();if(N==="right")return P()}else N==="left"||N==="up"?be("handleArrow","left",0,N==="up"):be("handleArrow","right",0,N==="down")},re=N=>{u(N.shiftKey),!s.disableMonthYearSelect&&N.code==="Tab"&&N.target.classList.contains("dp__menu")&&h.value.shiftKeyInMenu&&(N.preventDefault(),Et(N,w.value,!0),o("close-picker"))},U=()=>{ie(),o("time-picker-close")},f=N=>{var se,Te,de;(se=Y.value)==null||se.toggleTimePicker(!1,!1),(Te=Y.value)==null||Te.toggleMonthPicker(!1,!1,N),(de=Y.value)==null||de.toggleYearPicker(!1,!1,N)},fe=(N,se=0)=>{var Te,de,Ne;return N==="month"?(Te=Y.value)==null?void 0:Te.toggleMonthPicker(!1,!0,se):N==="year"?(de=Y.value)==null?void 0:de.toggleYearPicker(!1,!0,se):N==="time"?(Ne=Y.value)==null?void 0:Ne.toggleTimePicker(!0,!1):f(se)},be=(N,...se)=>{var Te,de;(Te=Y.value)!=null&&Te[N]&&((de=Y.value)==null||de[N](...se))},Z=()=>{be("selectCurrentDate")},Ce=(N,se)=>{be("presetDate",N,se)},ge=()=>{be("clearHoverDate")};return e({updateMonthYear:(N,se)=>{be("updateMonthYear",N,se)},switchView:fe}),(N,se)=>{var Te;return r(),d("div",{id:N.uid?`dp-menu-${N.uid}`:void 0,ref_key:"dpMenuRef",ref:B,tabindex:"0",role:"dialog",class:I(m.value),onMouseleave:ge,onClick:O,onKeydown:[Pe(x,["esc"]),se[18]||(se[18]=Pe(De(de=>ae("left"),["prevent"]),["left"])),se[19]||(se[19]=Pe(De(de=>ae("up"),["prevent"]),["up"])),se[20]||(se[20]=Pe(De(de=>ae("down"),["prevent"]),["down"])),se[21]||(se[21]=Pe(De(de=>ae("right"),["prevent"]),["right"])),re]},[(N.disabled||N.readonly)&&k(_).enabled?(r(),d("div",{key:0,class:I(v.value)},null,2)):c("",!0),!k(_).enabled&&!N.teleportCenter?(r(),d("div",{key:1,class:I(z.value)},null,2)):c("",!0),n("div",{ref_key:"innerMenuRef",ref:G,class:I({dp__menu_content_wrapper:((Te=N.presetDates)==null?void 0:Te.length)||!!N.$slots["left-sidebar"]||!!N.$slots["right-sidebar"]}),style:vt({"--dp-menu-width":`${S.value}px`})},[N.$slots["left-sidebar"]?(r(),d("div",UP,[ye(N.$slots,"left-sidebar",Ze(ut(R.value)))])):c("",!0),N.presetDates.length?(r(),d("div",VP,[(r(!0),d(E,null,oe(N.presetDates,(de,Ne)=>(r(),d(E,{key:Ne},[de.slot?ye(N.$slots,de.slot,{key:0,presetDate:Ce,label:de.label,value:de.value}):(r(),d("button",{key:1,type:"button",style:vt(de.style||{}),class:"dp__btn dp--preset-range",onClick:De(mt=>Ce(de.value,de.noTz),["prevent"]),onKeydown:[Pe(De(mt=>Ce(de.value,de.noTz),["prevent"]),["enter"]),Pe(De(mt=>Ce(de.value,de.noTz),["prevent"]),["space"])]},C(de.label),45,YP))],64))),128))])):c("",!0),n("div",{ref_key:"calendarWrapperRef",ref:D,class:"dp__instance_calendar",role:"document"},[(r(),me(Fn(Q.value),at({ref_key:"dynCmpRef",ref:Y},l.value,{"flow-step":k(pe),onMount:k(g),onUpdateFlowStep:k(te),onResetFlow:k(M),onFocusMenu:ie,onSelectDate:se[0]||(se[0]=de=>N.$emit("select-date")),onDateUpdate:se[1]||(se[1]=de=>N.$emit("date-update",de)),onTooltipOpen:se[2]||(se[2]=de=>N.$emit("tooltip-open",de)),onTooltipClose:se[3]||(se[3]=de=>N.$emit("tooltip-close",de)),onAutoApply:se[4]||(se[4]=de=>N.$emit("auto-apply",de)),onRangeStart:se[5]||(se[5]=de=>N.$emit("range-start",de)),onRangeEnd:se[6]||(se[6]=de=>N.$emit("range-end",de)),onInvalidFixedRange:se[7]||(se[7]=de=>N.$emit("invalid-fixed-range",de)),onTimeUpdate:se[8]||(se[8]=de=>N.$emit("time-update")),onAmPmChange:se[9]||(se[9]=de=>N.$emit("am-pm-change",de)),onTimePickerOpen:se[10]||(se[10]=de=>N.$emit("time-picker-open",de)),onTimePickerClose:U,onRecalculatePosition:b,onUpdateMonthYear:se[11]||(se[11]=de=>N.$emit("update-month-year",de)),onAutoApplyInvalid:se[12]||(se[12]=de=>N.$emit("auto-apply-invalid",de)),onInvalidDate:se[13]||(se[13]=de=>N.$emit("invalid-date",de)),"onUpdate:internalModelValue":se[14]||(se[14]=de=>N.$emit("update:internal-model-value",de))}),ct({_:2},[oe(j.value,(de,Ne)=>({name:de,fn:q(mt=>[ye(N.$slots,de,Ze(ut({...mt})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),N.$slots["right-sidebar"]?(r(),d("div",RP,[ye(N.$slots,"right-sidebar",Ze(ut(R.value)))])):c("",!0),N.$slots["action-extra"]?(r(),d("div",xP,[N.$slots["action-extra"]?ye(N.$slots,"action-extra",{key:0,selectCurrentDate:Z}):c("",!0)])):c("",!0)],6),!N.autoApply||k(w).keepActionRow?(r(),me(BD,at({key:2,"menu-mount":V.value},l.value,{"calendar-width":S.value,onClosePicker:se[15]||(se[15]=de=>N.$emit("close-picker")),onSelectDate:se[16]||(se[16]=de=>N.$emit("select-date")),onInvalidSelect:se[17]||(se[17]=de=>N.$emit("invalid-select")),onSelectNow:Z}),ct({_:2},[oe(k(A),(de,Ne)=>({name:de,fn:q(mt=>[ye(N.$slots,de,Ze(ut({...mt})))])}))]),1040,["menu-mount","calendar-width"])):c("",!0)],42,jP)}}}),BP=typeof window<"u"?window:void 0,ka=()=>{},IP=t=>Ss()?(Os(t),!0):!1,NP=(t,e,a,o)=>{if(!t)return ka;let s=ka;const l=Ht(()=>k(t),u=>{s(),u&&(u.addEventListener(e,a,o),s=()=>{u.removeEventListener(e,a,o),s=ka})},{immediate:!0,flush:"post"}),i=()=>{l(),s()};return IP(i),i},EP=(t,e,a,o={})=>{const{window:s=BP,event:l="pointerdown"}=o;return s?NP(s,l,i=>{const u=Ge(t),h=Ge(e);!u||!h||u===i.target||i.composedPath().includes(u)||i.composedPath().includes(h)||a(i)},{passive:!0}):void 0},qP=et({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Jn},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(t,{expose:e,emit:a}){const o=a,s=t,l=en(),i=ue(!1),u=En(s,"modelValue"),h=En(s,"timezone"),p=ue(null),y=ue(null),_=ue(null),w=ue(!1),D=ue(null),S=ue(!1),B=ue(!1),{setMenuFocused:G,setShiftKey:V}=fs(),{clearArrowNav:Y}=zt(),{mapDatesArrToMap:ee,validateDate:P,isValidTime:W}=nn(s),{defaultedTransitions:H,defaultedTextInput:L,defaultedInline:pe,defaultedConfig:te}=Ke(s),{menuTransition:g,showTransition:M}=An(H);it(()=>{ae(s.modelValue),Wt().then(()=>{if(!pe.value.enabled){const ce=v(D.value);ce==null||ce.addEventListener("scroll",N),window==null||window.addEventListener("resize",se)}}),pe.value.enabled&&(i.value=!0),window==null||window.addEventListener("keyup",Te),window==null||window.addEventListener("keydown",de)});const Q=J(()=>ee());ja(()=>{if(!pe.value.enabled){const ce=v(D.value);ce==null||ce.removeEventListener("scroll",N),window==null||window.removeEventListener("resize",se)}window==null||window.removeEventListener("keyup",Te),window==null||window.removeEventListener("keydown",de)});const ie=ht(l,"all",s.presetDates),R=ht(l,"input");Ht([u,h],()=>{ae(u.value)},{deep:!0});const{openOnTop:b,menuStyle:A,xCorrect:j,setMenuPosition:z,getScrollableParent:v,shadowRender:m}=DD({menuRef:p,menuRefInner:y,inputRef:_,pickerWrapperRef:D,inline:pe,emit:o,props:s,slots:l}),{inputValue:O,internalModelValue:x,parseExternalModelValue:ae,emitModelValue:re,formatInputValue:U,checkBeforeEmit:f}=FD(o,s,w),fe=J(()=>({dp__main:!0,dp__theme_dark:s.dark,dp__theme_light:!s.dark,dp__flex_display:pe.value.enabled,dp__flex_display_with_input:pe.value.input})),be=J(()=>s.dark?"dp__theme_dark":"dp__theme_light"),Z=J(()=>({to:typeof s.teleport=="boolean"?"body":s.teleport,disabled:!s.teleport||pe.value.enabled})),Ce=J(()=>({class:"dp__outer_menu_wrap"})),ge=J(()=>pe.value.enabled&&(s.timePicker||s.monthPicker||s.yearPicker||s.quarterPicker)),N=()=>{i.value&&(te.value.closeOnScroll?pt():z())},se=()=>{i.value&&z()},Te=ce=>{ce.key==="Tab"&&!pe.value.enabled&&!s.teleport&&te.value.tabOutClosesMenu&&(D.value.contains(document.activeElement)||pt()),B.value=ce.shiftKey},de=ce=>{B.value=ce.shiftKey},Ne=()=>{!s.disabled&&!s.readonly&&(m(Oo,s),z(!1),i.value=!0,i.value&&o("open"),i.value||bn(),ae(s.modelValue))},mt=()=>{var ce;O.value="",bn(),(ce=_.value)==null||ce.setParsedDate(null),o("update:model-value",null),o("update:model-timezone-value",null),o("cleared"),te.value.closeOnClearValue&&pt()},an=()=>{const ce=x.value;return!ce||!Array.isArray(ce)&&P(ce)?!0:Array.isArray(ce)?s.multiDates||ce.length===2&&P(ce[0])&&P(ce[1])?!0:s.partialRange&&!s.timePicker?P(ce[0]):!1:!1},Yt=()=>{f()&&an()?(re(),pt()):o("invalid-select",x.value)},Vn=ce=>{Yn(),re(),te.value.closeOnAutoApply&&!ce&&pt()},Yn=()=>{_.value&&L.value.enabled&&_.value.setParsedDate(x.value)},aa=(ce=!1)=>{s.autoApply&&W(x.value)&&an()&&(s.range&&Array.isArray(x.value)?(s.partialRange||x.value.length===2)&&Vn(ce):Vn(ce))},bn=()=>{L.value.enabled||(x.value=null)},pt=()=>{pe.value.enabled||(i.value&&(i.value=!1,j.value=!1,G(!1),V(!1),Y(),o("closed"),O.value&&ae(u.value)),bn(),o("blur"))},oa=(ce,Se,Fe=!1)=>{if(!ce){x.value=null;return}const _t=Array.isArray(ce)?!ce.some(la=>!P(la)):P(ce),Mt=W(ce);_t&&Mt&&(x.value=ce,Se&&(S.value=Fe,Yt(),o("text-submit")))},sa=()=>{s.autoApply&&W(x.value)&&re(),Yn()},Rn=()=>i.value?pt():Ne(),F=ce=>{x.value=ce},ne=()=>{L.value.enabled&&(w.value=!0,U()),o("focus")},we=()=>{if(L.value.enabled&&(w.value=!1,ae(s.modelValue),S.value)){const ce=oD(D.value,B.value);ce==null||ce.focus()}o("blur")},Ae=ce=>{y.value&&y.value.updateMonthYear(0,{month:wo(ce.month),year:wo(ce.year)})},We=ce=>{ae(ce??s.modelValue)},Ct=(ce,Se)=>{var Fe;(Fe=y.value)==null||Fe.switchView(ce,Se)},Rt=ce=>te.value.onClickOutside?te.value.onClickOutside(ce):pt();return EP(p,_,()=>Rt(an)),e({closeMenu:pt,selectDate:Yt,clearValue:mt,openMenu:Ne,onScroll:N,formatInputValue:U,updateInternalModelValue:F,setMonthYear:Ae,parseModel:We,switchView:Ct,toggleMenu:Rn}),(ce,Se)=>(r(),d("div",{ref_key:"pickerWrapperRef",ref:D,class:I(fe.value),"data-datepicker-instance":""},[le(VD,at({ref_key:"inputRef",ref:_,"input-value":k(O),"onUpdate:inputValue":Se[0]||(Se[0]=Fe=>eo(O)?O.value=Fe:null),"is-menu-open":i.value},ce.$props,{onClear:mt,onOpen:Ne,onSetInputDate:oa,onSetEmptyDate:k(re),onSelectDate:Yt,onToggle:Rn,onClose:pt,onFocus:ne,onBlur:we,onRealBlur:Se[1]||(Se[1]=Fe=>w.value=!1)}),ct({_:2},[oe(k(R),(Fe,_t)=>({name:Fe,fn:q(Mt=>[ye(ce.$slots,Fe,Ze(ut(Mt)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),le(Ts,Ze(ut(Z.value)),{default:q(()=>[le(_n,{name:k(g)(k(b)),css:k(M)&&!k(pe).enabled},{default:q(()=>[i.value?(r(),d("div",at({key:0,ref_key:"dpWrapMenuRef",ref:p},Ce.value,{class:{"dp--menu-wrapper":!k(pe).enabled},style:k(pe).enabled?void 0:k(A)}),[le(Oo,at({ref_key:"dpMenuRef",ref:y},ce.$props,{"internal-model-value":k(x),"onUpdate:internalModelValue":Se[2]||(Se[2]=Fe=>eo(x)?x.value=Fe:null),class:{[be.value]:!0,"dp--menu-wrapper":ce.teleport},"open-on-top":k(b),"arr-map-values":Q.value,"no-overlay-focus":ge.value,onClosePicker:pt,onSelectDate:Yt,onAutoApply:aa,onTimeUpdate:sa,onFlowStep:Se[3]||(Se[3]=Fe=>ce.$emit("flow-step",Fe)),onUpdateMonthYear:Se[4]||(Se[4]=Fe=>ce.$emit("update-month-year",Fe)),onInvalidSelect:Se[5]||(Se[5]=Fe=>ce.$emit("invalid-select",k(x))),onAutoApplyInvalid:Se[6]||(Se[6]=Fe=>ce.$emit("invalid-select",Fe)),onInvalidFixedRange:Se[7]||(Se[7]=Fe=>ce.$emit("invalid-fixed-range",Fe)),onRecalculatePosition:k(z),onTooltipOpen:Se[8]||(Se[8]=Fe=>ce.$emit("tooltip-open",Fe)),onTooltipClose:Se[9]||(Se[9]=Fe=>ce.$emit("tooltip-close",Fe)),onTimePickerOpen:Se[10]||(Se[10]=Fe=>ce.$emit("time-picker-open",Fe)),onTimePickerClose:Se[11]||(Se[11]=Fe=>ce.$emit("time-picker-close",Fe)),onAmPmChange:Se[12]||(Se[12]=Fe=>ce.$emit("am-pm-change",Fe)),onRangeStart:Se[13]||(Se[13]=Fe=>ce.$emit("range-start",Fe)),onRangeEnd:Se[14]||(Se[14]=Fe=>ce.$emit("range-end",Fe)),onDateUpdate:Se[15]||(Se[15]=Fe=>ce.$emit("date-update",Fe)),onInvalidDate:Se[16]||(Se[16]=Fe=>ce.$emit("invalid-date",Fe))}),ct({_:2},[oe(k(ie),(Fe,_t)=>({name:Fe,fn:q(Mt=>[ye(ce.$slots,Fe,Ze(ut({...Mt})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):c("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),fn=(()=>{const t=qP;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),LP=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"}));Object.entries(LP).forEach(([t,e])=>{t!=="default"&&(fn[t]=e)});const WP={class:"row"},HP={class:"col-md-4"},zP={class:"col-12"},QP={key:0,class:"fa-solid fa-arrow-down-short-wide"},XP={key:1,class:"fa-solid fa-arrow-up-wide-short"},KP={key:0,class:"fa-solid fa-arrow-down-short-wide"},ZP={key:1,class:"fa-solid fa-arrow-up-wide-short"},GP={key:0,class:"fa-solid fa-arrow-down-short-wide"},JP={key:1,class:"fa-solid fa-arrow-up-wide-short"},eS={class:"col-md-4 mb-2"},tS=["onClick"],nS={class:"card-body text-center"},aS={class:"row"},oS={class:"col-md-6"},sS={class:"mb-0"},lS=n("p",{class:"mb-0"},"Начало сеанса",-1),iS={class:"mb-0"},rS=n("p",{class:"mb-0"},"Окончание сеанса",-1),dS={class:"mb-0"},uS={class:"col-md-6"},cS={class:"mb-0"},mS={class:"mb-0"},hS={class:"mb-0"},pS=n("p",{class:"mb-0"},[n("strong",null,"Период")],-1),_S={class:"mb-0"},vS={class:"row"},fS={class:"col-12"},bS={props:["bot","eventId"],components:{VueDatePicker:fn},data(){return{date:null,loading:!0,schedule:[],order:null,direction:null,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginate_object:null}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...Le(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"])},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{selectTime(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})}}},ws=Object.assign(bS,{__name:"AppointmentScheduleList",setup(t){return(e,a)=>(r(),d(E,null,[n("div",WP,[n("div",HP,[le(k(fn),{modelValue:e.date,"onUpdate:modelValue":a[0]||(a[0]=o=>e.date=o)},null,8,["modelValue"])]),n("div",zP,[n("p",null,[T(" Тип сортировки: "),n("a",{class:"mx-2",onClick:a[1]||(a[1]=o=>e.loadAndOrder("day")),href:"javascript:void(0)"},[T("По дню недели "),e.order==="day"&&e.direction==="asc"?(r(),d("i",QP)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",XP)):c("",!0)]),n("a",{class:"mx-2",onClick:a[2]||(a[2]=o=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[T("По времени начала "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",KP)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",ZP)):c("",!0)]),n("a",{class:"mx-2",onClick:a[3]||(a[3]=o=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[T("По времени окончания "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",GP)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",JP)):c("",!0)])])]),(r(!0),d(E,null,oe(e.schedule,o=>(r(),d("div",eS,[n("div",{class:I(["card btn",{"btn-outline-secondary bg-secondary":o.appointment!=null,"btn-outline-success":o.appointment==null}]),onClick:s=>e.selectTime(o)},[n("div",nS,[n("div",aS,[n("div",oS,[n("p",sS,[n("strong",null,C(e.days[o.day-1]),1)]),lS,n("p",iS,[n("strong",null,C(o.start_time||"-"),1)]),rS,n("p",dS,[n("strong",null,C(o.end_time||"-"),1)])]),n("div",uS,[n("p",cS,[n("strong",null,C(o.year||"-"),1)]),n("p",mS,[n("strong",null,C(e.months[o.month||0]),1)]),n("p",hS,[n("strong",null,C(o.day_number),1)]),pS,n("p",_S,[n("strong",null,"c "+C(o.week_start||"-"),1),T(" по "),n("strong",null,C(o.week_end||"-"),1)])])])])],10,tS)]))),256))]),n("div",vS,[n("div",fS,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])],64))}}),gS={class:"row"},yS={class:"col-12 mb-3"},kS={class:"form-label",id:"service-title"},$S=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),wS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),CS={class:"col-12 mb-3"},FS={key:0},TS=["onClick"],DS={class:"form-label",id:"service-category"},PS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),SS=n("div",null,"Категория услуги (используется для группировки) ",-1),OS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),MS={class:"col-12 mb-3"},AS={class:"form-label",id:"service-description"},jS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),US=n("div",null," Краткая информация об оказываемой услуге ",-1),VS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),YS={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},RS={class:"col-12 col-md-6 mb-3"},xS={class:"form-label",id:"service-title"},BS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),IS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),NS={class:"col-12 col-md-6 mb-3"},ES={class:"form-label",id:"service-title"},qS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),LS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),WS={class:"col-12 mb-3"},HS={class:"form-label",id:"service-images"},zS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),QS=n("div",null," Изображение, которое видит пользователь при выборе услуги ",-1),XS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),KS={class:"col-12 mb-3"},ZS={class:"form-check"},GS=n("label",{class:"form-check-label",for:"need_prepayment"}," Необходима предоплата ",-1),JS={class:"row"},e8={class:"col-12"},t8={type:"submit",class:"btn btn-outline-success w-100 p-3"},n8={key:0},a8={key:1},o8={props:["eventId","bot","service"],data(){return{load:!1,need_reset:!1,categories:[],serviceForm:{id:null,title:null,appointment_event_id:null,description:null,category:null,images:[],need_prepayment:!1,price:0,discount_price:0}}},watch:{serviceForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.loadAppointmentServiceCategories(),console.log("Service form",this.service),this.service&&this.$nextTick(()=>{this.serviceForm={id:this.service.id||null,appointment_event_id:this.service.appointment_event_id||null,title:this.service.title||null,category:this.service.category||null,description:this.service.description||null,images:this.service.images||[],need_prepayment:this.service.need_prepayment||!1,price:this.service.price||0,discount_price:this.service.discount_price||0}})},methods:{loadAppointmentServiceCategories(){this.$store.dispatch("loadAppointmentServiceCategories",{dataObject:{bot_id:this.bot.id||null,event_id:this.eventId||null}}).then(t=>{this.categories=t})},selectPhotos(t){this.serviceForm.images||(this.serviceForm.images=[]);let e=this.serviceForm.images.indexOf(t.file_id);e!==-1?this.serviceForm.images.splice(e,1):this.serviceForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.serviceForm).forEach(e=>{const a=this.serviceForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),t.append("appointment_event_id",this.eventId),this.$store.dispatch(this.serviceForm.id===null?"addAppointmentService":"updateAppointmentService",{appointmentServiceForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Услуги успешно создано")}).catch(e=>{this.$notify("Услуги создания события")})}}},s8=Object.assign(o8,{__name:"AppointmentServiceForm",setup(t){return(e,a)=>{const o=Vt("Popper");return r(),d("form",{onSubmit:a[6]||(a[6]=De((...s)=>e.submitForm&&e.submitForm(...s),["prevent"]))},[n("div",gS,[n("div",yS,[n("label",kS,[le(o,{content:"Название оказываемой услуги"},{default:q(()=>[$S]),_:1}),T(" Название услуги "),wS]),$(n("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":a[0]||(a[0]=s=>e.serviceForm.title=s),maxlength:"255","aria-describedby":"service-title",required:""},null,512),[[X,e.serviceForm.title]])]),n("div",CS,[e.categories?(r(),d("p",FS,[T(" Ранее созданные категории: "),(r(!0),d(E,null,oe(e.categories,s=>(r(),d("span",{onClick:l=>e.serviceForm.category=s,class:"badge bg-primary mr-1 cursor-pointer"},C(s),9,TS))),256))])):c("",!0),n("label",DS,[le(o,null,{content:q(()=>[SS]),default:q(()=>[PS]),_:1}),T(" Категория услуги "),OS]),$(n("input",{type:"text",class:"form-control",placeholder:"Категория услуги","aria-label":"Категория услуги","onUpdate:modelValue":a[1]||(a[1]=s=>e.serviceForm.category=s),maxlength:"255","aria-describedby":"service-category",required:""},null,512),[[X,e.serviceForm.category]])]),n("div",MS,[n("label",AS,[le(o,null,{content:q(()=>[US]),default:q(()=>[jS]),_:1}),T(" Описание услуги "),VS,e.serviceForm.description?(r(),d("small",YS," Длина текста "+C(e.serviceForm.description.length)+" / 255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Описание услуги","aria-label":"Описание услуги",maxlength:"255","onUpdate:modelValue":a[2]||(a[2]=s=>e.serviceForm.description=s),"aria-describedby":"service-description",required:""},`
                    `,512),[[X,e.serviceForm.description]])]),n("div",RS,[n("label",xS,[le(o,{content:"Цена оказываемой услуги"},{default:q(()=>[BS]),_:1}),T(" Цена услуги, руб "),IS]),$(n("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":a[3]||(a[3]=s=>e.serviceForm.price=s),"aria-describedby":"price",required:""},null,512),[[X,e.serviceForm.price]])]),n("div",NS,[n("label",ES,[le(o,{content:"Цена скидки на оказываемую услугу"},{default:q(()=>[qS]),_:1}),T(" Цена скидки на услугу, руб "),LS]),$(n("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":a[4]||(a[4]=s=>e.serviceForm.discount_price=s),"aria-describedby":"price",required:""},null,512),[[X,e.serviceForm.discount_price]])]),n("div",WS,[n("label",HS,[le(o,null,{content:q(()=>[QS]),default:q(()=>[zS]),_:1}),T(" Изображение к услуге "),XS]),le(rn,{"need-photo":!0,selected:e.serviceForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),n("div",KS,[n("div",ZS,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[5]||(a[5]=s=>e.serviceForm.need_prepayment=s),type:"checkbox",id:"need_prepayment"},null,512),[[Oe,e.serviceForm.need_prepayment]]),GS])])]),n("div",JS,[n("div",e8,[n("button",t8,[e.serviceForm.id===null?(r(),d("span",n8,"Создать услугу")):(r(),d("span",a8,"Обновить услугу"))])])])],32)}}}),l8={class:"row py-3"},i8={class:"col-12"},r8={class:"row"},d8={class:"col-12"},u8={key:0},c8={key:1},m8={key:0,class:"col-12 mb-3"},h8={class:"col-12 mb-3"},p8={key:0},_8={key:1},v8={key:1,class:"col-12 mb-3"},f8={class:"row py-3"},b8=n("div",{class:"col-12"},[n("p",{class:"mb-0"},"Выбор статуса")],-1),g8={class:"col-md-3"},y8=["onClick"],k8={class:"row"},$8={class:"col-12 mb-3"},w8={class:"form-label",id:"service-title"},C8=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),F8=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),T8={class:"col-12 mb-3"},D8={class:"form-label",id:"service-title"},P8=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),S8=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),O8={class:"col-12 mb-3"},M8={class:"form-label",id:"appointment-info"},A8=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),j8=n("div",null," Краткая информация от клиента ",-1),U8=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),V8={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Y8={class:"row"},R8={class:"col-12"},x8={type:"submit",class:"btn btn-outline-success w-100 p-3"},B8={key:0},I8={key:1},N8={props:["eventId","bot","appointment"],data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,statuses:[{value:0,title:"Новая запись"},{value:1,title:"Подтверждение записи"},{value:2,title:"Прохождение по записи"},{value:3,title:"Отмена записи"}],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],appointmentForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0,name:null,phone:null,info:null}}},mounted(){this.appointment&&this.$nextTick(()=>{this.appointmentForm={id:this.appointment.id||null,appointment_event_id:this.appointment.appointment_event_id||null,appointment_schedule_id:this.appointment.appointment_schedule_id||null,bot_user_id:this.appointment.bot_user_id||null,status:this.appointment.status||0,name:this.appointment.name||null,phone:this.appointment.phone||null,info:this.appointment.info||null},this.selected_schedule_time=this.appointment.schedule||null,this.selected_bot_user=this.appointment.botUser||null})},methods:{selectScheduleTime(t){if(t.appointment){this.$notify("Данное время уже занято!");return}this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearAppointmentForm(){this.appointmentForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.appointmentForm.bot_user_id=this.selected_bot_user.id,this.appointmentForm.appointment_schedule_id=this.selected_schedule_time.id,this.appointmentForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.appointmentForm).forEach(e=>{const a=this.appointmentForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointment",{dataObject:{appointmentForm:t}}).then(e=>{this.clearAppointmentForm(),this.$emit("callback"),this.$notify("Запись успешно создана")}).catch(e=>{this.$notify("Ошибка создания записи")})}}},E8=Object.assign(N8,{__name:"AppointmentForm",setup(t){return(e,a)=>{const o=Vt("Popper"),s=On("mask");return r(),d(E,null,[n("div",l8,[n("div",i8,[n("button",{onClick:a[0]||(a[0]=(...l)=>e.clearAppointmentForm&&e.clearAppointmentForm(...l)),class:"btn btn-primary"},"Новая заявка ")])]),n("form",{onSubmit:a[6]||(a[6]=De((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[n("div",r8,[n("div",d8,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:a[1]||(a[1]=l=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",u8,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",c8," Пользователь "+C(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",m8,[le(Uo,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),n("div",h8,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:a[2]||(a[2]=l=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",p8,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",_8," Запись на "+C(e.days[e.selected_schedule_time.day-1]||"-")+" с "+C(e.selected_schedule_time.start_time||"-")+" до "+C(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",v8,[le(ws,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0)]),n("div",f8,[b8,(r(!0),d(E,null,oe(e.statuses,l=>(r(),d("div",g8,[n("button",{type:"button",class:I([{"btn-success text-white":e.appointmentForm.status==l.value},"btn btn-outline-success w-100"]),onClick:i=>e.appointmentForm.status=l.value},C(l.title||"не указано"),11,y8)]))),256))]),n("div",k8,[n("div",$8,[n("label",w8,[le(o,{content:"ФИО человека, который посетит запись"},{default:q(()=>[C8]),_:1}),T(" Ф.И.О. посетителя "),F8]),$(n("input",{type:"text",class:"form-control",placeholder:"Иванов Иван Иванович","aria-label":"ФИО","onUpdate:modelValue":a[3]||(a[3]=l=>e.appointmentForm.name=l),maxlength:"255","aria-describedby":"appointment-name",required:""},null,512),[[X,e.appointmentForm.name]])]),n("div",T8,[n("label",D8,[le(o,{content:"Номер телефона человека, который посетит запись"},{default:q(()=>[P8]),_:1}),T(" Телефонный номер "),S8]),$(n("input",{type:"text",class:"form-control",placeholder:"+7(000)000-00-00","aria-label":"номер телефона","onUpdate:modelValue":a[4]||(a[4]=l=>e.appointmentForm.phone=l),maxlength:"255","aria-describedby":"appointment-phone",required:""},null,512),[[s,"+7(###)###-##-##"],[X,e.appointmentForm.phone]])]),n("div",O8,[n("label",M8,[le(o,null,{content:q(()=>[j8]),default:q(()=>[A8]),_:1}),T(" Описание услуги "),U8,e.appointmentForm.info?(r(),d("small",V8," Длина текста "+C(e.appointmentForm.info.length)+" / 255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Информация от клиента","aria-label":"Информация от клиента",maxlength:"255","onUpdate:modelValue":a[5]||(a[5]=l=>e.appointmentForm.info=l),"aria-describedby":"appointment-info",required:""},`
                    `,512),[[X,e.appointmentForm.info]])])]),n("div",Y8,[n("div",R8,[n("button",x8,[e.appointmentForm.id==null?(r(),d("span",B8,"Записаться")):(r(),d("span",I8,"Обновить запись"))])])])],32)],64)}}}),q8={class:"row"},L8={class:"col-12"},W8={key:0,class:"table"},H8=n("th",{scope:"col"},"Действие",-1),z8=["onClick"],Q8={scope:"row"},X8={key:0},K8={key:0,class:"dropdown"},Z8=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),G8={class:"dropdown-menu"},J8={key:0},eO=["onClick"],tO={key:1},nO={class:"col-12"},aO={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,statuses:["Новая запись","Подтверждение записи","Прохождение по записи","Отмена записи"],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],paginate_object:null}},computed:{...Le(["getAppointments","getAppointmentsPaginateObject"])},mounted(){this.loadAppointments()},methods:{nextAppointments(t){this.loadAppointments(t)},selectAppointment(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointments(0)},removeAppointment(t){this.loading=!0,this.$store.dispatch("removeAppointment",{dataObject:{appointmentId:t}}).then(e=>{this.loading=!1,this.loadAppointments(0),this.$notify("Запись успешно удалена")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления записи")})},loadAppointments(t=0){this.loading=!0,this.$store.dispatch("loadAppointments",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointments,this.paginate_object=this.getAppointmentsPaginateObject}).catch(()=>{this.loading=!1})}}},oO=Object.assign(aO,{__name:"AppointmentsTable",setup(t){return(e,a)=>(r(),d("div",q8,[n("div",L8,[e.services.length>0?(r(),d("table",W8,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:a[0]||(a[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[1]||(a[1]=o=>e.loadAndOrder("bot_user_id"))},"Пользователь"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=o=>e.loadAndOrder("appointment_schedule_id"))},"Дата записи "),n("th",{scope:"col",class:"cursor-pointer",onClick:a[3]||(a[3]=o=>e.loadAndOrder("status"))},"Статус"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[4]||(a[4]=o=>e.loadAndOrder("name"))},"Посетитель"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[5]||(a[5]=o=>e.loadAndOrder("phone"))},"Телефон посетителя"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[6]||(a[6]=o=>e.loadAndOrder("info"))},"Доп.инф"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[7]||(a[7]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),H8])]),n("tbody",null,[(r(!0),d(E,null,oe(e.services,(o,s)=>(r(),d("tr",{onClick:l=>e.selectAppointment(o),class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",Q8,C(o.id),1),n("td",null,C(o.botUser.fio_from_telegram||o.botUser.telegram_chat_id||"Не указано"),1),n("td",null,[o.schedule?(r(),d("p",X8," Запись на "+C(e.days[o.schedule.day-1]||"Не указано")+" с "+C(o.schedule.start_time||"Не указано")+" до "+C(o.schedule.end_time||"Не указано"),1)):c("",!0)]),n("td",null,C(e.statuses[o.status]),1),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,C(o.name||"не указано"),1),n("td",null,C(o.phone||"не указано"),1),n("td",null,C(o.info||"не указано"),1),n("td",null,[o.id?(r(),d("div",K8,[Z8,n("ul",G8,[o.deleted_at==null?(r(),d("li",J8,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointment(o.id),href:"javascript:void(0)"},"Удалить",8,eO)])):c("",!0)])])):c("",!0)])],10,z8))),256))])])):(r(),d("p",tO,"На текущий момент нет ни одного созданного сервиса"))]),n("div",nO,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointments,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),sO={class:"row py-2"},lO={class:"col-12"},iO={class:"input-group mb-3"},rO={class:"col-12"},dO={key:0,class:"table"},uO=n("th",{scope:"col"},"Действие",-1),cO={scope:"row"},mO=["onClick"],hO={key:0,class:"fa-solid fa-chevron-down text-success"},pO={key:1,class:"fa-solid fa-xmark text-danger"},_O={key:0,class:"dropdown"},vO=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),fO={class:"dropdown-menu"},bO={key:0},gO=["onClick"],yO={key:1},kO={class:"col-12"},$O={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,events:[],search:null,paginate_object:null}},computed:{...Le(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){this.loadAppointmentEvents()},methods:{duplicate(t){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:t,company_id:this.getCurrentCompany.id}}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно продублирован")})},removeAppointmentEvent(t){this.loading=!0,this.$store.dispatch("removeAppointmentEvent",{dataObject:{appointmentEventId:t}}).then(e=>{this.loading=!1,this.loadAppointmentEvents(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},addToArchive(t){this.$store.dispatch("removeBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(t){this.$store.dispatch("forceDeleteBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(t){this.$store.dispatch("restoreBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно перемещен из архива")})},nextAppointmentEvents(t){this.loadAppointmentEvents(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentEvents(0)},loadAppointmentEvents(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentEvents",{dataObject:{bot_id:this.bot.id||null,search:this.search,is_group:this.is_group,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.events=this.getAppointmentEvents,this.paginate_object=this.getAppointmentEventsPaginateObject}).catch(()=>{this.loading=!1})}}},wO=Object.assign($O,{__name:"AppointmentEventTable",setup(t){return(e,a)=>(r(),d("div",sO,[n("div",lO,[n("div",iO,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск события","aria-label":"Поиск события","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),"aria-describedby":"appointment-search-event"},null,512),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[1]||(a[1]=o=>e.loadAppointmentEvents(0)),type:"button",id:"appointment-search-event"},"Найти ")])]),n("div",rO,[e.events.length>0?(r(),d("table",dO,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[3]||(a[3]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[4]||(a[4]=o=>e.loadAndOrder("subtitle"))},"Подзаголовок"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[5]||(a[5]=o=>e.loadAndOrder("description"))},"Описание"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[6]||(a[6]=o=>e.loadAndOrder("is_group"))},"Групповое"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[7]||(a[7]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),uO])]),n("tbody",null,[(r(!0),d(E,null,oe(e.events,(o,s)=>(r(),d("tr",{class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",cO,C(o.id),1),n("td",{onClick:l=>e.selectEvent(o)},C(o.title||"Не указано"),9,mO),n("td",null,C(o.subtitle||"Не указано"),1),n("td",null,C(o.description||"Не указано"),1),n("td",null,[o.is_group?(r(),d("i",hO)):(r(),d("i",pO))]),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",_O,[vO,n("ul",fO,[o.deleted_at==null?(r(),d("li",bO,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentEvent(o.id),href:"javascript:void(0)"},"Удалить",8,gO)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",yO,"На текущий момент нет событий в вашем списке"))]),n("div",kO,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointmentEvents,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),CO={class:"row"},FO={class:"col-12"},TO={key:0,class:"table"},DO=n("th",{scope:"col"},"Действие",-1),PO={scope:"row"},SO=["onClick"],OO={key:0,class:"fa-solid fa-chevron-down text-success"},MO={key:1,class:"fa-solid fa-xmark text-danger"},AO={key:0,class:"dropdown"},jO=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),UO={class:"dropdown-menu"},VO={key:0},YO=["onClick"],RO={key:1},xO={class:"col-12"},BO={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,paginate_object:null}},computed:{...Le(["getAppointmentServices","getAppointmentServicesPaginateObject"])},mounted(){this.loadAppointmentServices()},methods:{nextAppointmentService(t){this.loadAppointmentServices(t)},selectService(t){this.$emit("select",t)},removeAppointmentService(t){this.loading=!0,this.$store.dispatch("removeAppointmentService",{dataObject:{appointmentServiceId:t}}).then(e=>{this.loading=!1,this.loadAppointmentServices(0),this.$notify("Сервис успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentServices(0)},loadAppointmentServices(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentServices",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointmentServices,this.paginate_object=this.getAppointmentServicesPaginateObject}).catch(()=>{this.loading=!1})}}},IO=Object.assign(BO,{__name:"AppointmentServicesTable",setup(t){return(e,a)=>(r(),d("div",CO,[n("div",FO,[e.services.length>0?(r(),d("table",TO,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:a[0]||(a[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[1]||(a[1]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=o=>e.loadAndOrder("subtitle"))},"Подзаголовок"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[3]||(a[3]=o=>e.loadAndOrder("description"))},"Описание"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[4]||(a[4]=o=>e.loadAndOrder("is_group"))},"Групповое"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[5]||(a[5]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),DO])]),n("tbody",null,[(r(!0),d(E,null,oe(e.services,(o,s)=>(r(),d("tr",{class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",PO,C(o.id),1),n("td",{onClick:l=>e.selectService(o)},C(o.title||"Не указано"),9,SO),n("td",null,C(o.subtitle||"Не указано"),1),n("td",null,C(o.description||"Не указано"),1),n("td",null,[o.is_group?(r(),d("i",OO)):(r(),d("i",MO))]),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",AO,[jO,n("ul",UO,[o.deleted_at==null?(r(),d("li",VO,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentService(o.id),href:"javascript:void(0)"},"Удалить",8,YO)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",RO,"На текущий момент нет ни одного созданого сервиса"))]),n("div",xO,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointmentService,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),NO={class:"row"},EO={class:"col-12 mb-3"},qO={class:"form-label",id:"event-title"},LO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),WO=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),HO={class:"col-12 mb-3"},zO={class:"form-label",id:"event-subtitle"},QO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),XO=n("div",null,"Подзаголовок события или доп. инфа под названием события ",-1),KO=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ZO={class:"col-12 mb-3"},GO={class:"form-label",id:"event-description"},JO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),eM=n("div",null," Краткая информация о происходящем мероприятии ",-1),tM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),nM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},aM={class:"col-12 mb-3"},oM={class:"form-label",id:"event-on_start_appointment"},sM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),lM=n("div",null," Текст, который будет отображен клиенту, когда тот записался ",-1),iM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),rM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},dM={class:"col-12 mb-3"},uM={class:"form-label",id:"event-on_cancel_appointment"},cM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),mM=n("div",null," Текст, который будет отображен клиенту, когда тот отменил запись ",-1),hM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),pM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},_M={class:"col-12 mb-3"},vM={class:"form-label",id:"event-on_after_appointment"},fM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),bM=n("div",null," Текст, который будет отображен клиенту, когда тот прошел событие успешно ",-1),gM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),yM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},kM={class:"col-12 mb-3"},$M={class:"form-label",id:"event-on_repeat_appointment"},wM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),CM=n("div",null," Текст, который будет отображен клиенту, когда тот записывается 2й и более раз ",-1),FM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),TM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},DM={class:"col-12 mb-3"},PM={class:"form-label",id:"event-images"},SM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),OM=n("div",null," Изображение, которое видит пользователь при выборе события ",-1),MM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),AM={class:"col-12 mb-3"},jM={class:"form-check"},UM=n("label",{class:"form-check-label",for:"is-group"}," Является групповым мероприятием ",-1),VM={key:0,class:"col-md-6 col-12 mb-3"},YM={class:"form-label",id:"event-min_people"},RM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),BM={key:1,class:"col-md-6 col-12 mb-3"},IM={class:"form-label",id:"event-max_people"},NM=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),EM=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),qM={class:"row"},LM={class:"col-12"},WM={type:"submit",class:"btn btn-outline-success w-100 p-3"},HM={key:0},zM={key:1},QM={props:["event","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,eventForm:{id:null,title:null,subtitle:null,description:null,images:[],services:[],times:[],is_group:!1,max_people:0,min_people:0,on_start_appointment:null,on_cancel_appointment:null,on_after_appointment:null,on_repeat_appointment:null}}},watch:{eventForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.event&&this.$nextTick(()=>{this.eventForm={id:this.event.id||null,title:this.event.title||null,subtitle:this.event.subtitle||null,description:this.event.description||null,images:this.event.images||[],is_group:this.event.is_group||!1,max_people:this.event.max_people||0,min_people:this.event.min_people||0,on_start_appointment:this.event.on_start_appointment||null,on_cancel_appointment:this.event.on_cancel_appointment||null,on_after_appointment:this.event.on_after_appointment||null,on_repeat_appointment:this.event.on_repeat_appointment||null}})},methods:{selectPhotos(t){this.eventForm.images||(this.eventForm.images=[]);let e=this.eventForm.images.indexOf(t.file_id);e!==-1?this.eventForm.images.splice(e,1):this.eventForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.eventForm).forEach(e=>{const a=this.eventForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),this.$store.dispatch(this.eventForm.id===null?"addAppointmentEvent":"updateAppointmentEvent",{appointmentEventForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},Mo=Object.assign(QM,{__name:"AppointmentEventForm",setup(t){return(e,a)=>{const o=Vt("Popper");return r(),d("form",{onSubmit:a[10]||(a[10]=De((...s)=>e.submitForm&&e.submitForm(...s),["prevent"]))},[n("div",NO,[n("div",EO,[n("label",qO,[le(o,{content:"Название вашего события (или специалиста), на которое планируется осуществить запись"},{default:q(()=>[LO]),_:1}),T(" Название события "),WO]),$(n("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":a[0]||(a[0]=s=>e.eventForm.title=s),maxlength:"255","aria-describedby":"event-title",required:""},null,512),[[X,e.eventForm.title]])]),n("div",HO,[n("label",zO,[le(o,null,{content:q(()=>[XO]),default:q(()=>[QO]),_:1}),T(" Подзаголовок события "),KO]),$(n("input",{type:"text",class:"form-control",placeholder:"Подзаголовок","aria-label":"Подзаголовок","onUpdate:modelValue":a[1]||(a[1]=s=>e.eventForm.subtitle=s),maxlength:"255","aria-describedby":"event-subtitle",required:""},null,512),[[X,e.eventForm.subtitle]])]),n("div",ZO,[n("label",GO,[le(o,null,{content:q(()=>[eM]),default:q(()=>[JO]),_:1}),T(" Описание события "),tM,e.eventForm.description?(r(),d("small",nM," Длина текста "+C(e.eventForm.description.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":a[2]||(a[2]=s=>e.eventForm.description=s),"aria-describedby":"event-description",required:""},`
                    `,512),[[X,e.eventForm.description]])]),n("div",aM,[n("label",oM,[le(o,null,{content:q(()=>[lM]),default:q(()=>[sM]),_:1}),T(" Текст при записи на событие "),iM,e.eventForm.on_start_appointment?(r(),d("small",rM," Длина текста "+C(e.eventForm.on_start_appointment.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст при записи на событие","aria-label":"Текст при записи на событие","onUpdate:modelValue":a[3]||(a[3]=s=>e.eventForm.on_start_appointment=s),maxlength:"255","aria-describedby":"event-on_start_appointment",required:""},`
                    `,512),[[X,e.eventForm.on_start_appointment]])]),n("div",dM,[n("label",uM,[le(o,null,{content:q(()=>[mM]),default:q(()=>[cM]),_:1}),T(" Текст при отмене записи на событие "),hM,e.eventForm.on_cancel_appointment?(r(),d("small",pM," Длина текста "+C(e.eventForm.on_cancel_appointment.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст при отмене записи на событие","aria-label":"Текст при отмене записи на событие","onUpdate:modelValue":a[4]||(a[4]=s=>e.eventForm.on_cancel_appointment=s),maxlength:"255","aria-describedby":"event-on_cancel_appointment",required:""},`
                    `,512),[[X,e.eventForm.on_cancel_appointment]])]),n("div",_M,[n("label",vM,[le(o,null,{content:q(()=>[bM]),default:q(()=>[fM]),_:1}),T(" Текст после прохождения события "),gM,e.eventForm.on_after_appointment?(r(),d("small",yM," Длина текста "+C(e.eventForm.on_after_appointment.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст после прохождения события","aria-label":"Текст после прохождения события","onUpdate:modelValue":a[5]||(a[5]=s=>e.eventForm.on_after_appointment=s),maxlength:"255","aria-describedby":"event-on_after_appointment",required:""},`
                    `,512),[[X,e.eventForm.on_after_appointment]])]),n("div",kM,[n("label",$M,[le(o,null,{content:q(()=>[CM]),default:q(()=>[wM]),_:1}),T(" Текст при повторной записи на событие "),FM,e.eventForm.on_repeat_appointment?(r(),d("small",TM," Длина текста "+C(e.eventForm.on_repeat_appointment.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:" Текст при повторной записи на событие","aria-label":" Текст при повторной записи на событие","onUpdate:modelValue":a[6]||(a[6]=s=>e.eventForm.on_repeat_appointment=s),maxlength:"255","aria-describedby":"event-on_repeat_appointment",required:""},`
                    `,512),[[X,e.eventForm.on_repeat_appointment]])]),n("div",DM,[n("label",PM,[le(o,null,{content:q(()=>[OM]),default:q(()=>[SM]),_:1}),T(" Изображение к событию "),MM]),le(rn,{"need-photo":!0,selected:e.eventForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),n("div",AM,[n("div",jM,[$(n("input",{class:"form-check-input","onUpdate:modelValue":a[7]||(a[7]=s=>e.eventForm.is_group=s),type:"checkbox",id:"is-group"},null,512),[[Oe,e.eventForm.is_group]]),UM])]),e.eventForm.is_group?(r(),d("div",VM,[n("label",YM,[le(o,{content:"Минимально необходимое число людей, для начала 1 мероприятия"},{default:q(()=>[RM]),_:1}),T(" Минимальное число посетителей в группе "),xM]),$(n("input",{type:"number",class:"form-control",placeholder:"Минимальное число посетителей","aria-label":"Название","onUpdate:modelValue":a[8]||(a[8]=s=>e.eventForm.min_people=s),"aria-describedby":"event-min_people",required:""},null,512),[[X,e.eventForm.min_people]])])):c("",!0),e.eventForm.is_group?(r(),d("div",BM,[n("label",IM,[le(o,{content:"Количество людей, которые могут посетить мероприятие за 1 сеанс"},{default:q(()=>[NM]),_:1}),T(" Максимальное число посетителей в группе "),EM]),$(n("input",{type:"number",class:"form-control",placeholder:"Максимальное число посетителей","aria-label":"Название","onUpdate:modelValue":a[9]||(a[9]=s=>e.eventForm.max_people=s),"aria-describedby":"event-max_people",required:""},null,512),[[X,e.eventForm.max_people]])])):c("",!0)]),n("div",qM,[n("div",LM,[n("button",WM,[e.eventForm.id==null?(r(),d("span",HM,"Создать событие")):(r(),d("span",zM,"Обновить событие"))])])])],32)}}}),XM={class:"row pt-3"},KM={class:"col-md-4"},ZM={class:"form-floating mb-3"},GM=n("label",{for:"config-step"},"Шаг, минуты",-1),JM={class:"col-md-4"},e7={class:"form-floating mb-3"},t7=n("label",{for:"config-start-time"},"Начало, часы",-1),n7={class:"col-md-4"},a7={class:"form-floating mb-3"},o7=["min"],s7=n("label",{for:"config-end-time"},"Конец, часы",-1),l7=n("hr",null,null,-1),i7={key:0,class:"row"},r7={class:"col-12 d-flex justify-content-end pb-3"},d7={class:"row"},u7={class:"col-md-4 text-center"},c7={key:0,class:"fa-solid fa-arrow-down-short-wide"},m7={key:1,class:"fa-solid fa-arrow-up-wide-short"},h7={class:"col-md-4 text-center"},p7={key:0,class:"fa-solid fa-arrow-down-short-wide"},_7={key:1,class:"fa-solid fa-arrow-up-wide-short"},v7={class:"col-md-4 text-center"},f7={key:0,class:"fa-solid fa-arrow-down-short-wide"},b7={key:1,class:"fa-solid fa-arrow-up-wide-short"},g7={class:"col-md-4"},y7={class:"form-floating"},k7=["onUpdate:modelValue","id"],$7=["for"],w7={class:"col-md-4"},C7={class:"form-floating"},F7=["onUpdate:modelValue","id"],T7=["for"],D7={class:"col-md-4"},P7={class:"form-floating"},S7=["onUpdate:modelValue","id"],O7=["for"],M7={class:"row mt-3"},A7={class:"col-12"},j7={class:"row"},U7={class:"col-12"},V7={class:"col-12"},Y7={class:"text-center"},R7={class:"row d-flex justify-content-center"},x7={class:"col-md-4"},B7={class:"table"},I7=n("th",{scope:"col"},"#",-1),N7={scope:"col"},E7={scope:"row"},q7=["onClick"],L7={key:0,class:"fa-solid fa-check"},W7={key:1,class:"fa-solid fa-xmark"},H7={components:{VueDatePicker:fn},props:["eventId","bot"],data(){return{date:null,load:!1,step:30,start:8,end:18,order:null,direction:null,paginate_object:null,years:[2024,2025],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],schedule:[],added_schedule:[]}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...Le(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"]),currentWeek(){return new Date().getWeek()},currentMonthWeek(){return new Date().getMonthWeek()},currentMonth(){return new Date().getMonth()},currentYear(){return new Date().getFullYear()},times(){let t=this.step,e=[],a=0,o=0;for(let s=0;a<24*60;s++){let l=Math.floor(a/60);if(l>=this.start&&l<=this.end){let i=a%60;e[o]=("0"+l).slice(-2)+":"+("0"+i).slice(-2),o++}a=a+t}return e}},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{removeAppointmentSchedule(t){this.loading=!0,this.$store.dispatch("removeAppointmentSchedule",{dataObject:{appointmentScheduleId:t}}).then(e=>{this.loading=!1,this.loadAppointmentSchedules(0),this.$notify("Время успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления времени")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})},storeSchedule(){this.$store.dispatch("storeAppointmentSchedule",{dataObject:{schedule:[...this.schedule,...this.added_schedule],bot_id:this.bot.id,appointment_event_id:this.eventId}}).then(()=>{this.$notify("Расписание успешно сохранено"),this.loadAppointmentSchedules(),this.added_schedule=[]}).catch(()=>{this.$notify("Ошибка сохраения расписания")})},inScheduleRow(t){return this.schedule.findIndex(e=>e.start_time==this.times[t])!=-1||this.added_schedule.findIndex(e=>e.start_time==this.times[t])!=-1},inSchedule(t,e){return this.schedule.findIndex(a=>a.day==e&&a.start_time==this.times[t])!=-1||this.added_schedule.findIndex(a=>a.day==e&&a.start_time==this.times[t])!=-1},setScheduleItem(t,e){let a=this.schedule.findIndex(o=>o.day==e&&o.start_time==this.times[t]);if(a!==-1){this.schedule.splice(a,1);return}if(a=this.added_schedule.findIndex(o=>o.day==e&&o.start_time==this.times[t]),a!==-1){this.added_schedule.splice(a,1);return}this.added_schedule.push({day:e,start_time:this.times[t]||null,end_time:this.times[t+1]||null,week:this.date==null?this.currentWeek:new Date(this.date).getWeek(),month:this.date==null?this.currentMonth:new Date(this.date).getMonth(),year:this.date==null?this.currentYear:new Date(this.date).getFullYear()})}}},z7=Object.assign(H7,{__name:"AppointmentScheduleForm",setup(t){return(e,a)=>(r(),d(E,null,[n("div",XM,[n("div",KM,[n("div",ZM,[$(n("input",{type:"number",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>e.step=o),min:"0",id:"config-step",placeholder:"30 минут"},null,512),[[X,e.step]]),GM])]),n("div",JM,[n("div",e7,[$(n("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=o=>e.start=o),min:"0",max:"23",class:"form-control",id:"config-start-time",placeholder:"Часы"},null,512),[[X,e.start]]),t7])]),n("div",n7,[n("div",a7,[$(n("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=o=>e.end=o),min:e.start,max:"23",class:"form-control",id:"config-end-time",placeholder:"Часы"},null,8,o7),[[X,e.end]]),s7])])]),l7,e.schedule.length>0||e.added_schedule.length>0?(r(),d("div",i7,[n("div",r7,[n("button",{onClick:a[3]||(a[3]=(...o)=>e.storeSchedule&&e.storeSchedule(...o)),class:"btn btn-primary"},"Сохранить текущий график ")]),n("div",d7,[n("div",u7,[n("a",{onClick:a[4]||(a[4]=o=>e.loadAndOrder("day")),href:"javascript:void(0)"},[T("День "),e.order==="day"&&e.direction==="asc"?(r(),d("i",c7)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",m7)):c("",!0)])]),n("div",h7,[n("a",{onClick:a[5]||(a[5]=o=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[T("Начало "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",p7)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",_7)):c("",!0)])]),n("div",v7,[n("a",{onClick:a[6]||(a[6]=o=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[T("Конец "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",f7)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",b7)):c("",!0)])])])])):c("",!0),(r(!0),d(E,null,oe([...e.schedule,...e.added_schedule],(o,s)=>(r(),d("div",{class:I(["row py-2",{"bg-warning":o.id==null}])},[n("div",g7,[n("div",y7,[$(n("input",{type:"text","onUpdate:modelValue":l=>e.days[o.day-1]=l,class:"form-control",id:"day-of-week-"+s,placeholder:"День недели"},null,8,k7),[[X,e.days[o.day-1]]]),n("label",{for:"day-of-week-"+s},"День недели",8,$7)])]),n("div",w7,[n("div",C7,[$(n("input",{type:"text","onUpdate:modelValue":l=>o.start_time=l,class:"form-control",id:"day-of-start-at-"+s,placeholder:"Время начало"},null,8,F7),[[X,o.start_time]]),n("label",{for:"day-of-start-at-"+s},"Начало",8,T7)])]),n("div",D7,[n("div",P7,[$(n("input",{type:"text","onUpdate:modelValue":l=>o.end_time=l,class:"form-control",id:"day-of-end-at-"+s,placeholder:"Время окончания"},null,8,S7),[[X,o.end_time]]),n("label",{for:"day-of-end-at-"+s},"Окончание",8,O7)])])],2))),256)),n("div",M7,[n("div",A7,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]),n("div",j7,[n("div",U7,[n("button",{class:"btn btn-primary",onClick:a[7]||(a[7]=o=>e.schedule=[])},"Очистить таблицу")]),n("div",V7,[n("p",Y7,[T(" Год: "),n("strong",null,C(e.currentYear),1),T(" Месяц: "),n("strong",null,C(e.months[e.currentMonth]),1),T(" Неделя: "),n("strong",null,C(e.currentWeek),1)])])]),n("div",R7,[n("div",x7,[le(k(fn),{modelValue:e.date,"onUpdate:modelValue":a[8]||(a[8]=o=>e.date=o)},null,8,["modelValue"])])]),n("table",B7,[n("thead",null,[n("tr",null,[I7,(r(!0),d(E,null,oe(e.days,o=>(r(),d("th",N7,C(o),1))),256))])]),n("tbody",null,[(r(!0),d(E,null,oe(e.times,(o,s)=>(r(),d("tr",{class:I({"table-light":e.inScheduleRow(s)})},[n("th",E7,C(o),1),(r(),d(E,null,oe(7,l=>n("td",null,[n("button",{class:I([{"btn-primary text-white":e.inSchedule(s,l)},"btn btn-outline-primary"]),onClick:i=>e.setScheduleItem(s,l)},[e.inSchedule(s,l)?(r(),d("i",L7)):(r(),d("i",W7))],10,q7)])),64))],2))),256))])])],64))}});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".vue3-star-ratings[data-v-7fab3f62]{width:fit-content;overflow:hidden;position:relative;white-space:nowrap}.vue3-star-ratings *[data-v-7fab3f62]{box-sizing:border-box;margin:0;padding:0;line-height:1}.vue3-star-ratings__inner[data-v-7fab3f62],.vue3-star-ratings__outer[data-v-7fab3f62]{height:inherit}.vue3-star-ratings__outer[data-v-7fab3f62]{position:absolute;top:0;left:0;width:var(--vue3StarRatingOuterWidth);max-width:100%;overflow:hidden;color:var(--vue3StarRatingsOuterColor);transition:width .32s cubic-bezier(.075,.82,.165,1)}.vue3-star-ratings__inner[data-v-7fab3f62]{color:var(--vue3StarRatingsInnerColor)}.vue3-star-ratings__icon[data-v-7fab3f62]{fill:currentColor;width:var(--vue3StarRatingIconSize);aspect-ratio:1;cursor:pointer;display:inline-block}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Cs=(t,e)=>{const a=t.__vccOpts||t;for(const[o,s]of e)a[o]=s;return a},Q7={},X7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},K7=n("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),Z7=[K7];function G7(t,e){return r(),d("svg",X7,Z7)}const Ao=Cs(Q7,[["render",G7]]),J7={class:"vue3-star-ratings__outer"},eA={class:"vue3-star-ratings__inner"},tA=et({__name:"Vue3StarRatings",props:{modelValue:{default:0},numberOfStars:{default:5},starColor:{default:"#ff9800"},inactiveColor:{default:"#333333"},starSize:{default:24},disableClick:{type:Boolean},customSvg:{default:Ao}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,o=J(()=>a.customSvg||Ao),s={rounded(p,y){const _=Math.pow(10,y);return Math.round(p*_)/_}},l=ue(),i=J({get(){return a.modelValue},set(p){const y=s.rounded(p,1);e("update:modelValue",y)}});function u(p){if(a.disableClick)return;const y=this.getBoundingClientRect(),{pageX:_}=p,w=_-y.left,D=y.width,S=a.numberOfStars,B=w/D*S;i.value=B}const h=J(()=>(i.value<0?0:i.value>a.numberOfStars?a.numberOfStars:i.value)/a.numberOfStars*100);return Ms(()=>{var p;const y={"--vue3StarRatingsInnerColor":a.inactiveColor,"--vue3StarRatingsOuterColor":a.starColor,"--vue3StarRatingOuterWidth":`${h.value}%`,"--vue3StarRatingIconSize":`${a.starSize}px`};for(const[_,w]of Object.entries(y))(p=l.value)==null||p.style.setProperty(_,w)}),it(()=>{var p;(p=l.value)==null||p.addEventListener("click",u)}),As(()=>{var p;(p=l.value)==null||p.removeEventListener("click",u)}),(p,y)=>(r(),d("div",{class:"vue3-star-ratings",ref_key:"starsContainer",ref:l,style:vt({pointerEvents:p.disableClick?"none":"auto"})},[n("div",J7,[(r(!0),d(E,null,oe(p.numberOfStars,_=>(r(),me(Fn(o.value),{key:_,class:"vue3-star-ratings__icon"}))),128))]),n("div",eA,[(r(!0),d(E,null,oe(p.numberOfStars,_=>(r(),me(Fn(o.value),{key:_,class:"vue3-star-ratings__icon"}))),128))])],4))}}),na=Cs(tA,[["__scopeId","data-v-7fab3f62"]]),nA={class:"row py-3"},aA={class:"col-12"},oA={class:"row"},sA={class:"col-12"},lA={key:0},iA={key:1},rA={key:0,class:"col-12 mb-3"},dA={class:"col-12 mb-3"},uA={key:0},cA={key:1},mA={key:1,class:"col-12 mb-3"},hA={class:"col-12 mb-3"},pA={class:"col-12 mb-3"},_A={class:"form-label",id:"event-on_after_appointment"},vA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),fA=n("div",null," Текст, который пользователь оставляет после прохождения услуги ",-1),bA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),gA={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},yA={class:"row"},kA={class:"col-12"},$A={type:"submit",class:"btn btn-outline-success w-100 p-3"},wA={key:0},CA={key:1},FA={props:["eventId","bot","review"],components:{vue3starRatings:na},data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],reviewForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null}}},watch:{reviewForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.review&&this.$nextTick(()=>{this.reviewForm={id:this.review.id||null,appointment_event_id:this.review.appointment_event_id||null,appointment_schedule_id:this.review.appointment_schedule_id||null,bot_user_id:this.review.bot_user_id||null,rating:this.review.rating||null,text:this.review.text||null},this.selected_schedule_time=this.review.schedule||null,this.selected_bot_user=this.review.botUser||null})},methods:{selectScheduleTime(t){this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearReviewForm(){this.reviewForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.reviewForm.bot_user_id=this.selected_bot_user.id,this.reviewForm.appointment_schedule_id=this.selected_schedule_time.id,this.reviewForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.reviewForm).forEach(e=>{const a=this.reviewForm[e]||"";typeof a=="object"?t.append(e,JSON.stringify(a)):t.append(e,a)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointmentReview",{dataObject:{appointmentReviewForm:t}}).then(e=>{this.$emit("callback",e.data),this.$notify("Отзыв успешно создан"),this.clearReviewForm()}).catch(e=>{this.$notify("Ошибка создания отзыва")})}}},TA=Object.assign(FA,{__name:"AppointmentReviewForm",setup(t){return(e,a)=>{const o=Vt("Popper");return r(),d(E,null,[n("div",nA,[n("div",aA,[n("button",{onClick:a[0]||(a[0]=(...s)=>e.clearReviewForm&&e.clearReviewForm(...s)),class:"btn btn-primary"},"Новый отзыв")])]),n("form",{onSubmit:a[5]||(a[5]=De((...s)=>e.submitForm&&e.submitForm(...s),["prevent"]))},[n("div",oA,[n("div",sA,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:a[1]||(a[1]=s=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",lA,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",iA," Пользователь "+C(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",rA,[le(Uo,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),n("div",dA,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:a[2]||(a[2]=s=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",uA,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",cA," Запись на "+C(e.days[e.selected_schedule_time.day-1]||"-")+" с "+C(e.selected_schedule_time.start_time||"-")+" до "+C(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",mA,[le(ws,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0),n("div",hA,[n("p",null," Рейтинг: "+C(e.reviewForm.rating||0),1),le(k(na),{modelValue:e.reviewForm.rating,"onUpdate:modelValue":a[3]||(a[3]=s=>e.reviewForm.rating=s)},null,8,["modelValue"])]),n("div",pA,[n("label",_A,[le(o,null,{content:q(()=>[fA]),default:q(()=>[vA]),_:1}),T(" Текст отзыва "),bA,e.reviewForm.text?(r(),d("small",gA," Длина текста "+C(e.reviewForm.text.length)+"/255",1)):c("",!0)]),$(n("textarea",{type:"text",class:"form-control",placeholder:"Текст отзыва","aria-label":"Текст отзыва","onUpdate:modelValue":a[4]||(a[4]=s=>e.reviewForm.text=s),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[X,e.reviewForm.text]])])]),n("div",yA,[n("div",kA,[n("button",$A,[e.reviewForm.id==null?(r(),d("span",wA,"Оставить отзыв")):(r(),d("span",CA,"Обновить отзыв"))])])])],32)],64)}}}),DA={class:"row"},PA={class:"col-12"},SA={key:0,class:"table"},OA=n("th",{scope:"col"},"Действие",-1),MA=["onClick"],AA={scope:"row"},jA={class:"d-flex align-items-center"},UA={class:"ml-2"},VA={key:0,class:"dropdown"},YA=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),RA={class:"dropdown-menu"},xA={key:0},BA=["onClick"],IA={key:1},NA={class:"col-12"},EA={props:["bot","eventId"],components:{vue3starRatings:na},data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,reviews:[],search:null,paginate_object:null}},computed:{...Le(["getAppointmentReviews","getAppointmentReviewsPaginateObject"])},mounted(){this.loadAppointmentReviews()},methods:{nextAppointmentReviews(t){this.loadAppointmentReviews(t)},selectReview(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentReviews(0)},removeAppointmentReview(t){this.loading=!0,this.$store.dispatch("removeAppointmentReview",{dataObject:{appointmentReviewId:t}}).then(e=>{this.loadAppointmentReviews(0),this.$notify("Сервис успешно удален"),this.loading=!1}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAppointmentReviews(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentReviews",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.reviews=this.getAppointmentReviews,this.paginate_object=this.getAppointmentReviewsPaginateObject}).catch(()=>{this.loading=!1})}}},qA=Object.assign(EA,{__name:"AppointmentReviewsTable",setup(t){return(e,a)=>(r(),d("div",DA,[n("div",PA,[e.reviews.length>0?(r(),d("table",SA,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:a[0]||(a[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[1]||(a[1]=o=>e.loadAndOrder("bot_user_id"))},"Пользователь"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=o=>e.loadAndOrder("rating"))},"Рейтинг"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[3]||(a[3]=o=>e.loadAndOrder("text"))},"Текст"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[4]||(a[4]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),OA])]),n("tbody",null,[(r(!0),d(E,null,oe(e.reviews,(o,s)=>(r(),d("tr",{onClick:l=>e.selectReview(o),class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",AA,C(o.id),1),n("td",null,C(o.botUser.fio_from_telegram||o.botUser.telegram_chat_id||"Не указано"),1),n("td",null,[n("p",jA,[le(k(na),{disableClick:!0,modelValue:o.rating,"onUpdate:modelValue":l=>o.rating=l},null,8,["modelValue","onUpdate:modelValue"]),n("span",UA,C(o.rating||0),1)])]),n("td",null,C(o.text||"Не указано"),1),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",VA,[YA,n("ul",RA,[o.deleted_at==null?(r(),d("li",xA,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentReview(o.id),href:"javascript:void(0)"},"Удалить",8,BA)])):c("",!0)])])):c("",!0)])],10,MA))),256))])])):(r(),d("p",IA,"На текущий момент нет ни одного созданного отзыва"))]),n("div",NA,[e.paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextAppointmentReviews,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),LA={key:0,class:"py-2"},WA={class:"row"},HA={class:"col-12"},zA={key:1,class:"py-2"},QA={class:"row"},XA={class:"col-12"},KA={key:2,class:"py-2"},ZA={class:"row"},GA={class:"col-12"},JA={class:"nav nav-tabs justify-content-center"},e9={key:0,class:"row py-3"},t9={class:"col-12"},n9={key:1,class:"row py-3"},a9={class:"col-12"},o9={class:"col-12 py-3"},s9=n("h4",null,"Доступные сервисы в событии",-1),l9={key:2,class:"row"},i9={class:"col-12"},r9={key:3,class:"row"},d9={class:"col-12"},u9={class:"col-12 py-3"},c9=n("h4",null,"Актуальные записи на событие",-1),m9={key:4,class:"row"},h9={class:"col-12"},p9={class:"col-12 py-3"},_9=n("h4",null,"Отзывы к событию",-1),v9={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadService:!1,loadReviewForm:!1,loadAppointments:!1,loadReviews:!1,loadAppointmentForm:!1,loadForm:!1,selectedEvent:null,selectedService:null,selectedAppointment:null,selectedReview:null}},computed:{...Le(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){},methods:{callbackForm(){this.loadTable=!0,this.$nextTick(()=>{this.loadTable=!1})},callbackAppointment(){this.loadAppointments=!0,this.$nextTick(()=>{this.loadAppointments=!1})},callbackReview(){this.loadReviews=!0,this.$nextTick(()=>{this.loadReviews=!1})},createEvent(){this.part=2},selectAppointment(t){this.loadAppointmentForm=!0,this.selectedAppointment=t,this.$nextTick(()=>{this.loadAppointmentForm=!1})},selectService(t){this.loadService=!0,this.selectedService=t,this.$nextTick(()=>{this.loadService=!1})},selectReview(t){this.loadReviewForm=!0,this.selectedReview=t,this.$nextTick(()=>{this.loadReviewForm=!1})},selectEvent(t){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedEvent=t,this.part=1,this.tab=0})}}},pU=Object.assign(v9,{__name:"Appointment",setup(t){return(e,a)=>(r(),d(E,null,[e.part===0?(r(),d("div",LA,[n("div",WA,[n("div",HA,[n("button",{type:"button",onClick:a[0]||(a[0]=(...o)=>e.createEvent&&e.createEvent(...o)),class:"btn btn-primary"}," Создать новое событие ")])]),e.loadTable?c("",!0):(r(),me(wO,{key:0,onSelect:e.selectEvent,bot:t.bot},null,8,["onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",zA,[n("div",QA,[n("div",XA,[n("button",{type:"button",onClick:a[1]||(a[1]=o=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),me(Mo,{key:0,onCallback:e.callbackForm,bot:t.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",KA,[n("div",ZA,[n("div",GA,[n("button",{type:"button",onClick:a[2]||(a[2]=o=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),n("ul",JA,[n("li",{class:"nav-item",onClick:a[3]||(a[3]=o=>e.tab=0)},[n("a",{class:I(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о событии",2)]),n("li",{class:"nav-item",onClick:a[4]||(a[4]=o=>e.tab=1)},[n("a",{class:I(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Сервисы в событии",2)]),n("li",{class:"nav-item",onClick:a[5]||(a[5]=o=>e.tab=2)},[n("a",{class:I(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"График",2)]),n("li",{class:"nav-item",onClick:a[6]||(a[6]=o=>e.tab=3)},[n("a",{class:I(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Записи на событие",2)]),n("li",{class:"nav-item",onClick:a[7]||(a[7]=o=>e.tab=4)},[n("a",{class:I(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Отзывы о событии",2)])]),e.tab===0?(r(),d("div",e9,[n("div",t9,[e.loadForm?c("",!0):(r(),me(Mo,{key:0,onCallback:e.callbackForm,event:e.selectedEvent,bot:t.bot},null,8,["onCallback","event","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",n9,[n("div",a9,[e.loadService?c("",!0):(r(),me(s8,{key:0,service:e.selectedService,"event-id":e.selectedEvent.id,bot:t.bot},null,8,["service","event-id","bot"]))]),n("div",o9,[s9,le(IO,{"event-id":e.selectedEvent.id,onSelect:e.selectService,bot:t.bot},null,8,["event-id","onSelect","bot"])])])):c("",!0),e.tab===2?(r(),d("div",l9,[n("div",i9,[le(z7,{"event-id":e.selectedEvent.id,bot:t.bot},null,8,["event-id","bot"])])])):c("",!0),e.tab===3?(r(),d("div",r9,[n("div",d9,[e.loadAppointmentForm?c("",!0):(r(),me(E8,{key:0,bot:t.bot,onCallback:e.callbackAppointment,"event-id":e.selectedEvent.id,appointment:e.selectedAppointment},null,8,["bot","onCallback","event-id","appointment"]))]),n("div",u9,[c9,e.loadAppointments?c("",!0):(r(),me(oO,{key:0,"event-id":e.selectedEvent.id,onSelect:e.selectAppointment,bot:t.bot},null,8,["event-id","onSelect","bot"]))])])):c("",!0),e.tab===4?(r(),d("div",m9,[n("div",h9,[e.loadReviewForm?c("",!0):(r(),me(TA,{key:0,review:e.selectedReview,bot:t.bot,onCallback:a[8]||(a[8]=o=>e.callbackReview()),"event-id":e.selectedEvent.id},null,8,["review","bot","event-id"]))]),n("div",p9,[_9,e.loadReviews?c("",!0):(r(),me(qA,{key:0,bot:t.bot,onSelect:e.selectReview,"event-id":e.selectedEvent.id},null,8,["bot","onSelect","event-id"]))])])):c("",!0)])):c("",!0)],64))}});const f9={key:0},b9={key:0,class:"row"},g9={class:"col-md-12"},y9=n("h4",null,"Боты в работе",-1),k9={class:"mb-0"},$9={class:"table mb-5"},w9=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Домен"),n("th",{scope:"col"},"Название"),n("th",{scope:"col"},"Шаблон"),n("th",{scope:"col"},"Дата изменения"),n("th",{scope:"col"},"Действие")])],-1),C9={scope:"row"},F9=["onClick"],T9=["onClick"],D9={key:0,class:"badge bg-primary"},P9={key:1},S9={class:"d-flex"},O9=["onClick"],M9=n("i",{class:"fa-regular fa-star"},null,-1),A9=[M9],j9=["onClick"],U9=n("i",{class:"fa-solid fa-chevron-down"},null,-1),V9=[U9],Y9=["onClick"],R9=n("i",{class:"fa-solid fa-chevron-up"},null,-1),x9=[R9],B9=n("hr",null,null,-1),I9={class:"row"},N9={class:"col-md-12 d-flex flex-column"},E9={class:"d-flex"},q9={class:"dropdown mr-2"},L9=n("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),W9={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},H9=["onClick"],z9={class:"input-group mb-3"},Q9={key:0,class:"mt-2"},X9={class:"badge bg-primary mr-1"},K9=["onClick"],Z9=n("i",{class:"fa-solid fa-xmark"},null,-1),G9=[Z9],J9={key:1,class:"row"},ej={class:"col-12"},tj=n("h4",null,"Все боты",-1),nj={class:"mb-0"},aj={class:"mb-0"},oj={key:2,class:"row"},sj={class:"col-12 mb-3"},lj={key:0,class:"col-12 mb-3"},ij={class:"table"},rj=n("th",{scope:"col"},"Действие",-1),dj={scope:"row"},uj=["onClick"],cj=["onClick"],mj={key:0,class:"badge bg-primary"},hj={key:1},pj={class:"d-flex"},_j=["onClick"],vj=n("i",{class:"fa-regular fa-star"},null,-1),fj=[vj],bj=["onClick"],gj=n("i",{class:"fa-regular fa-copy"},null,-1),yj=[gj],kj=["onClick"],$j=n("i",{class:"fa-solid fa-boxes-packing"},null,-1),wj=[$j],Cj=["onClick"],Fj=n("i",{class:"fa-solid fa-box-open"},null,-1),Tj=[Fj],Dj=["onClick"],Pj=n("i",{class:"fa-solid fa-trash-can text-white"},null,-1),Sj=[Pj],Oj={class:"col-lg-4 col-12 mb-3"},Mj={class:"card-body"},Aj=["onClick"],jj={key:0,class:"badge bg-info"},Uj={class:"card-footer d-flex"},Vj=["onClick"],Yj=n("i",{class:"fa-regular fa-copy"},null,-1),Rj=[Yj],xj=["onClick"],Bj=n("i",{class:"fa-solid fa-boxes-packing"},null,-1),Ij=[Bj],Nj=["onClick"],Ej=n("i",{class:"fa-solid fa-box-open"},null,-1),qj=[Ej],Lj=["onClick"],Wj=n("i",{class:"fa-solid fa-trash-can text-white"},null,-1),Hj=[Wj],zj={class:"col-12"},Qj={key:3,class:"row"},Xj=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),Kj=[Xj],Zj={props:["companyId","editor"],data(){return{displayType:1,direction:"desc",order:"updated_at",filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],favorites:[],search:null,bots_paginate_object:null}},watch:{displayType:function(t,e){localStorage.setItem("cashman_set_botlist_display_type",this.displayType)},selectedFilters:{handler:function(t){this.loadBots()},deep:!0}},computed:{...Le(["getBots","getBotsPaginateObject","getCurrentCompany","getBotFavorites","inBotFav"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let t=[];return this.selectedFilters.forEach(e=>{switch(e.slug){case"active":this.bots.filter(a=>a.deleted_at==null).forEach(a=>{t.push(a)});break;case"archive":this.bots.filter(a=>a.deleted_at!=null).forEach(a=>{t.push(a)});break}}),this.search==null?t:t.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.selectFilter("active"),this.displayType=parseInt(localStorage.getItem("cashman_set_botlist_display_type")||0)},methods:{hasRole(t){return window.hasRole(t)||!1},loadBotsByIds(){if(this.getBotFavorites.length==0){this.favorites=[];return}this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:this.getBotFavorites}).then(t=>{this.loading=!1,this.favorites=t}).catch(()=>{this.loading=!1})},prepareFavorites(){this.$store.dispatch("loadBotFavs").then(t=>{this.loadBotsByIds()})},moveOrderFavBot(t,e){this.$store.dispatch("swapBotInFav",{id:t,direction:e}).then(a=>{this.loadBotsByIds()})},addToFavorite(t){if(this.inBotFav(t)){this.$store.dispatch("removeFromBotFavorites",t).then(e=>{this.$notify("Указанный бот успешно удален из избранного"),this.loadBotsByIds()});return}this.$store.dispatch("addBotToFavorites",t).then(e=>{this.$notify("Указанный бот успешно добавлен в избранное"),this.loadBotsByIds()})},duplicate(t){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:t,company_id:this.getCurrentCompany.id}}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно продублирован")})},addToArchive(t){this.$store.dispatch("removeBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(a),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(t){this.$store.dispatch("forceDeleteBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(a),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(t){this.$store.dispatch("restoreBot",{botId:t}).then(e=>{let a=this.bots_paginate_object.meta.current_page||0;this.loadBots(a),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(t){let e=this.filters.find(a=>a.slug===t);e&&this.selectedFilters.filter(a=>a.slug===t).length===0&&this.selectedFilters.push(e)},removeSelectedFilter(t){let e=this.selectedFilters.findIndex(a=>a.slug===t);this.selectedFilters.splice(e,1)},selectBot(t){this.$emit("callback",t),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(t){this.loadBots(t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(t=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(e=>e.slug)},page:t,size:20}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject,this.prepareFavorites()}).catch(()=>{this.loading=!1})}}},_U=Object.assign(Zj,{__name:"BotList",setup(t){return(e,a)=>e.show?(r(),d("div",f9,[e.favorites.length>0?(r(),d("div",b9,[n("div",g9,[y9,n("p",k9,"Количество ботов в работе "+C(e.favorites.length||0),1),n("table",$9,[w9,n("tbody",null,[(r(!0),d(E,null,oe(e.favorites,(o,s)=>(r(),d("tr",{class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",C9,C(o.id),1),n("td",{onClick:l=>e.selectBot(o)},[n("i",{class:I([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),T(" "+C(o.bot_domain||"Не указано"),1)],8,F9),n("td",{onClick:l=>e.selectBot(o)},C(o.title||"Не указано"),9,T9),n("td",null,[o.is_template?(r(),d("span",D9,C(o.template_description||"Не указано"),1)):(r(),d("span",P9,"Не является шаблоном"))]),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,[n("div",S9,[n("button",{class:I(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(o.id)}]),type:"button",onClick:l=>e.addToFavorite(o.id),title:"Добавить в избранное"},A9,10,O9),e.favorites.length>1?(r(),d("button",{key:0,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(o.id,1),title:"Переместить вниз"},V9,8,j9)):c("",!0),e.favorites.length>1?(r(),d("button",{key:1,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(o.id,0),title:"Переместить вверх"},x9,8,Y9)):c("",!0)])])],2))),256))])]),B9])])):c("",!0),n("div",I9,[n("div",N9,[n("div",E9,[n("div",q9,[L9,n("ul",W9,[(r(!0),d(E,null,oe(e.filters,o=>(r(),d("li",null,[n("a",{class:"dropdown-item",onClick:s=>e.selectFilter(o.slug),href:"#filter"},[n("i",{class:I([o.icon,"mr-2"])},null,2),T(" "+C(o.name||"Не указано"),1)],8,H9)]))),256))])]),n("div",z9,[$(n("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),"aria-describedby":"button-addon2"},null,512),[[X,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:a[1]||(a[1]=(...o)=>e.loadBots&&e.loadBots(...o)),type:"button",id:"button-addon2"},"Найти ")])]),e.selectedFilters.length>0?(r(),d("p",Q9,[(r(!0),d(E,null,oe(e.selectedFilters,o=>(r(),d("span",X9,[T(C(o.name||"не указан")+" ",1),n("a",{onClick:s=>e.removeSelectedFilter(o.slug),class:"ml-1 text-white",href:"#filter"},G9,8,K9)]))),256))])):c("",!0)])]),e.bots_paginate_object?(r(),d("div",J9,[n("div",ej,[tj,n("p",nj,"Количество найденных ботов "+C(e.bots_paginate_object.meta.total||0),1),n("p",aj,"Количество результатов на странице "+C(e.bots.length||0),1),n("p",null,[T(" Тип отображения списка: "),n("span",{onClick:a[2]||(a[2]=o=>e.displayType=0),class:I([{"bg-primary":e.displayType===0,"bg-secondary":e.displayType!==0},"badge cursor-pointer mr-2"])},"Карточки",2),n("span",{class:I([{"bg-primary":e.displayType===1,"bg-secondary":e.displayType!==1},"badge cursor-pointer mr-2"]),onClick:a[3]||(a[3]=o=>e.displayType=1)},"Таблица",2)])])])):c("",!0),e.bots.length>0?(r(),d("div",oj,[n("div",sj,[t.editor?c("",!0):(r(),d("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:a[4]||(a[4]=o=>e.selectBot(null))},"Создать нового бота "))]),e.displayType===1?(r(),d("div",lj,[n("table",ij,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:a[5]||(a[5]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[6]||(a[6]=o=>e.loadAndOrder("bot_domain"))},"Домен"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[7]||(a[7]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[8]||(a[8]=o=>e.loadAndOrder("template_description"))},"Шаблон"),n("th",{scope:"col",class:"cursor-pointer",onClick:a[9]||(a[9]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),rj])]),n("tbody",null,[(r(!0),d(E,null,oe(e.bots,(o,s)=>(r(),d("tr",{class:I({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",dj,C(o.id),1),n("td",{onClick:l=>e.selectBot(o)},[n("i",{class:I([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),T(" "+C(o.bot_domain||"Не указано"),1)],8,uj),n("td",{onClick:l=>e.selectBot(o)},C(o.title||"Не указано"),9,cj),n("td",null,[o.is_template?(r(),d("span",mj,C(o.template_description||"Не указано"),1)):(r(),d("span",hj,"Не является шаблоном"))]),n("td",null,C(e.$filters.current(o.updated_at)),1),n("td",null,[n("div",pj,[n("button",{class:I(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(o.id)}]),type:"button",onClick:l=>e.addToFavorite(o.id),title:"Добавить в избранное"},fj,10,_j),n("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(o.id),title:"Дублировать"},yj,8,bj),o.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(o.id),title:"В архив"},wj,8,kj)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(o.id),title:"Из архива"},Tj,8,Cj)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(o.id),title:"Удалить на совсем"},Sj,8,Dj)):c("",!0)])])],2))),256))])])])):c("",!0),e.displayType===0?(r(!0),d(E,{key:1},oe(e.bots,(o,s)=>(r(),d("div",Oj,[n("div",{class:I(["card w-100",{"border-info":o.deleted_at==null,"border-secondary":o.deleted_at!=null}])},[n("div",Mj,[n("p",{class:"d-flex justify-content-between",onClick:l=>e.selectBot(o),style:{"word-wrap":"break-word"}},[n("span",null,[n("i",{class:I([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),T(" "+C(o.bot_domain||"Не указано"),1)]),o.is_template?(r(),d("span",jj,C(o.template_description||"Шаблон без названия"),1)):c("",!0)],8,Aj)]),n("div",Uj,[n("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(o.id),title:"Дублировать"},Rj,8,Vj),o.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(o.id),title:"В архив"},Ij,8,xj)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(o.id),title:"Из архива"},qj,8,Nj)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(o.id),title:"Удалить на совсем"},Hj,8,Lj)):c("",!0)])],2)]))),256)):c("",!0),n("div",zj,[e.bots_paginate_object?(r(),me(lt,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Qj,Kj))])):c("",!0)}});export{uU as A,mU as B,cU as Y,iU as _,_U as a,$a as b,rU as c,Mb as d,pU as e,hU as f,dU as g,lU as h,Uo as i};
