import{G as b,L as p,q as n,t as i,v as t,z as m,D as l,y as r,H as c,J as v,a7 as y,K as _,A as d,F as u,C as f,x as B}from"./index.es-b188fb53.js";import{P as h}from"./Pagination-0b2e35d4.js";const k={class:"container pt-5"},w=t("h6",null,"Ваши доступные слоты",-1),C={class:"row"},j={class:"col-md-6"},S={class:"progress",role:"progressbar","aria-label":"Success striped example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},P={class:"col-md-4 d-flex justify-content-between"},$={class:"col-md-2"},z={class:"row d-flex justify-content-center"},O={class:"col-md-6 col-12"},D={class:"input-group mb-3"},L={key:0,class:"row my-2"},M={class:"col-12"},V={key:0,class:"container pb-5"},x={key:0,href:"/bot-page"},F={class:"row row-cols-1 row-cols-lg-3 row-cols-md-1 g-4"},K={class:"col"},N={class:"card h-100"},A={class:"card-img-top"},G={class:"card-body"},I={class:"card-title text-center"},T={class:"card-text text-center"},q=["onClick"],E={class:"row my-5"},H={class:"col-12"},J={key:1,class:"container"},U=t("div",{class:"alert alert-info",role:"alert"},[t("p",null,"У вас еще нет созданных ботов, попробуйте с чего-то простого;)")],-1),Q={class:"d-flex justify-content-center"},R={data(){return{search:null,bots:[],direction:"desc",order:"updated_at",bots_paginate_object:null}},computed:{...b(["getBots","getBotsPaginateObject"]),getSelf(){return window.profile||null},slotsCount(){return this.getSelf.manager.max_bot_slot_count},slotsPercent(){return this.bots_paginate_object?(this.bots_paginate_object.meta.total||0)/(this.summarySlotCount+this.slotsCount)*100:this.bots.length/(this.summarySlotCount+this.slotsCount)*100},summarySlotCount(){return this.bots_paginate_object?this.bots_paginate_object.meta.total:0}},mounted(){this.loadBots(0)},methods:{nextBots(o){this.loadBots(o)},loadAndOrder(o){this.order=o,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(o=0){this.$store.dispatch("loadBots",{dataObject:{search:this.search,order:this.order,direction:this.direction},page:o,size:20}).then(()=>{this.bots=this.getBots||[],this.bots_paginate_object=this.getBotsPaginateObject||null})},loadCurrentBot(o=null){this.$store.dispatch("updateCurrentBot",{bot:o}).then(()=>{this.bot=this.getCurrentBot})},gotoBot(o){this.loadCurrentBot(o),localStorage.setItem("cashman_set_botform_step_index",0),localStorage.setItem("cashman_set_botpage_step_index",2),window.location.href="/bot-page"},callback(o){this.$emit("callback",o)}}},Z=Object.assign(R,{__name:"ManagerSlotList",setup(o){return(e,a)=>{const g=p("lazy");return n(),i(u,null,[t("div",k,[w,t("div",C,[t("div",j,[t("div",S,[t("div",{class:"progress-bar progress-bar-striped bg-success",style:m({width:e.slotsPercent+"%"})},null,4)])]),t("div",P,[t("p",null,[l("Число слотов "),t("strong",null,r(e.getSelf.manager.max_bot_slot_count),1),l(". Отображается ботов "),t("strong",null,r(e.summarySlotCount),1),l(" шт. под вашим управлением")])]),t("div",$,[t("a",{href:"#",onClick:a[0]||(a[0]=s=>e.callback(12))},"Пополнить слоты")])]),t("div",z,[t("div",O,[t("div",D,[c(t("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":a[1]||(a[1]=s=>e.search=s),onKeydown:a[2]||(a[2]=y(s=>e.loadBots(0),["enter"])),"aria-describedby":"button-addon2"},null,544),[[v,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:a[3]||(a[3]=s=>e.loadBots(0)),type:"button",id:"button-addon2"},"Найти ")])])]),e.bots.length>0?(n(),i("div",L,[t("div",M,[e.bots_paginate_object?(n(),_(h,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])])):d("",!0)]),e.bots.length>0?(n(),i("div",V,[t("h6",null,[l("Ваши созданные боты "),e.getSelf.is_admin?(n(),i("a",x,"перейти в раздел")):d("",!0)]),t("div",F,[(n(!0),i(u,null,f(e.bots,s=>(n(),i("div",K,[t("div",N,[c(t("img",A,null,512),[[g,"/images-by-bot-id/"+s.id+"/"+s.image]]),t("div",G,[t("h5",I,r(s.title||s.id),1),t("p",T,r(s.short_description||"Без описания"),1)]),t("div",{class:B(["card-footer",{"bg-danger":(s.bot_token||"").length<40,"bg-success":(s.bot_token||"").length>=40}])},[t("button",{type:"button",onClick:W=>e.gotoBot(s),class:"btn btn-link text-white w-100"},"Редактировать ",8,q)],2)])]))),256))]),t("div",E,[t("div",H,[e.bots_paginate_object?(n(),_(h,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])])])):(n(),i("div",J,[U,t("div",Q,[t("button",{class:"btn btn-primary",onClick:a[4]||(a[4]=s=>e.callback(0))},"Поехали создавать")])]))],64)}}});export{Z as _};
