import{a as Bs,_ as wn,b as Cn,c as Oa}from"./Mail-44bd8476.js";import{q as r,t as d,v as s,F as B,C as oe,y as v,x as j,D as w,A as c,P as Fe,H as $,X as Jt,K as H,G as xe,J as Z,R as De,B as E,a7 as Pe,L as hs,Y as _t,O,a3 as at,M as Aa,j as Os,o as ce,k as tt,a8 as ss,a9 as xs,a4 as rt,n as Lt,g as te,a5 as zn,w as Ht,aa as mt,N as ye,ab as Ge,ac as ct,u as C,ad as ot,a1 as so,ae as _s,af as Ma,f as ja,ag as no,z as bt,ah as Fs,ai as qa,aj as za,ak as Ra,al as Ua,am as Va}from"./index.es-71d37bd0.js";import{_ as Ro,a as Uo,b as gt,B as Ya}from"./GlobalSlugList-715da6fd.js";import{P as Je}from"./Pagination-c0ff4992.js";import{_ as Ia}from"./BotForm-06ec0fd1.js";import{T as Vo}from"./TelegramChannelHelper-864fe219.js";import{_ as Ut}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */const Ba={props:["param"],data(){return{expressions:[{expression:"{{userName}}",description:"Имя пользователя"},{expression:"{{telegramChatId}}",description:"Идентификатор чата"},{expression:"{{referralLink}}",description:"Реферальная ссылка"},{expression:"{{referralQr}}",description:"Реферальный QR-код"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},xa={class:"dropdown"},Na=s("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-brands fa-hire-a-helper"})],-1),Ea={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Qa=["onClick"];function La(t,e,n,a,o,l){return r(),d("div",xa,[Na,s("div",Ea,[s("li",null,[(r(!0),d(B,null,oe(o.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},v(i.description||"-"),9,Qa))),256))])])])}const Ha=Ut(Ba,[["render",La]]);const Wa={class:"card-header d-flex justify-content-between align-items-center"},Ka={class:"d-flex"},Xa=s("i",{class:"fa-solid fa-arrow-left"},null,-1),Ga=[Xa],Za={class:"dropdown"},Ja=s("i",{class:"fa-solid fa-ellipsis"},null,-1),el=[Ja],tl={class:"dropdown-menu"},sl=["data-bs-target"],nl=s("i",{class:"fa-regular fa-pen-to-square mr-1"},null,-1),ol=s("i",{class:"fa-solid fa-clone mr-1"},null,-1),al=s("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),ll={key:0,class:"fa-solid fa-arrow-up-short-wide"},il={key:1,class:"fa-solid fa-arrow-down-short-wide"},rl={class:"card-body"},dl={class:"row"},ul={class:"col-12"},cl={key:0},ml={key:1,class:"list-group list-group-numbered"},pl={class:"list-group-item d-flex justify-content-between align-items-start"},hl={class:"ms-2 me-auto"},_l=s("div",{class:"fw-bold"},"Идентификатор",-1),fl={class:"list-group-item d-flex justify-content-between align-items-start"},vl={class:"ms-2 me-auto"},bl=s("div",{class:"fw-bold"},"Команда",-1),gl={class:"list-group-item d-flex justify-content-between align-items-start"},yl={class:"ms-2 me-auto"},$l=s("div",{class:"fw-bold"},"Мнемоническое имя",-1),kl={class:"list-group-item d-flex justify-content-between align-items-start"},wl={class:"ms-2 me-auto"},Cl=s("div",{class:"fw-bold"},"Пояснение",-1),Fl={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},Tl={class:"ms-2 me-auto"},Dl=s("div",{class:"fw-bold"},"Набор параметров скрипта",-1),Sl={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},Pl=s("div",{class:"ms-2 me-auto"},[s("div",{class:"fw-bold"},"Привязана страница")],-1),Ol=[Pl],Al={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},Ml=s("div",{class:"ms-2 me-auto"},[s("div",{class:"fw-bold"},"Глобальный скрипт")],-1),jl=[Ml],ql={class:"list-group-item d-flex justify-content-between align-items-start"},zl={class:"ms-2 me-auto w-100"},Rl=s("div",{class:"fw-bold"},"Перенести данные из:",-1),Ul=s("option",{value:null},"Не выбрано",-1),Vl=["value"],Yl=s("p",{class:"my-2"},[s("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),Il=["disabled"],Bl=["id"],xl={class:"modal-dialog modal-fullscreen"},Nl={class:"modal-content"},El={class:"modal-header"},Ql={class:"modal-title",id:"exampleModalLabel"},Ll=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Hl={class:"modal-body"},Wl=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Kl={props:["item","bot","selectMode","isActive"],data(){return{selected_slug_id:null,slugs:[],load:!1,simple:!0}},watch:{simple:function(){this.simple||this.loadAllSlugs()}},mounted(){},methods:{selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.selected_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},loadAllSlugs(){this.$store.dispatch("loadAllSlugs",{botId:this.bot.id}).then(t=>{this.slugs=t.data})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},Xl=Object.assign(Kl,{__name:"Slug",setup(t){return(e,n)=>(r(),d(B,null,[s("div",{class:j(["card",{"deprecated-slug":t.item.deprecated_at!=null,"global-slug":t.item.is_global,"bg-success text-white":t.isActive}])},[s("div",Wa,[s("div",Ka,[s("button",{onClick:n[0]||(n[0]=(...a)=>e.selectSlug&&e.selectSlug(...a)),type:"button",title:"Выбрать команду",class:j(["btn btn-outline-primary mr-2",{"text-white":t.isActive}])},Ga,2),s("div",Za,[s("button",{class:j([{"text-white border-white":t.isActive},"btn btn-outline-secondary"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},el,2),s("ul",tl,[s("li",null,[s("a",{class:"dropdown-item cursor-pointer",onClick:n[1]||(n[1]=(...a)=>e.editSlug&&e.editSlug(...a)),"data-bs-toggle":"modal","data-bs-target":"#edit-slug-"+t.item.id},[nl,w(" Редактировать")],8,sl)]),s("li",null,[s("a",{class:"dropdown-item cursor-pointer",onClick:n[2]||(n[2]=(...a)=>e.duplicateSlug&&e.duplicateSlug(...a))},[ol,w(" Дублировать")])]),s("li",null,[s("a",{class:"dropdown-item cursor-pointer",onClick:n[3]||(n[3]=(...a)=>e.removeSlug&&e.removeSlug(...a))},[al,w(" Удалить")])])])])]),s("span",null,[s("small",null,[s("strong",null,"#"+v(t.item.id),1)])]),s("button",{type:"button",onClick:n[4]||(n[4]=a=>e.simple=!e.simple),class:j([{"text-white border-white":t.isActive},"btn btn-outline-primary ml-2"])},[e.simple?(r(),d("i",ll)):(r(),d("i",il))],2)]),s("div",rl,[s("div",dl,[s("div",ul,[e.simple?(r(),d("p",cl,v(t.item.command||"Нет команды"),1)):(r(),d("ol",ml,[s("li",pl,[s("div",hl,[_l,w(" №"+v(t.item.id||"Нет идентификатора"),1)])]),s("li",fl,[s("div",vl,[bl,w(" "+v(t.item.command||"Нет команды"),1)])]),s("li",gl,[s("div",yl,[$l,w(" "+v(t.item.slug||"Slug"),1)])]),s("li",kl,[s("div",wl,[Cl,w(" "+v(t.item.comment||"Пояснение не указано"),1)])]),t.item.config?(r(),d("li",Fl,[s("div",Tl,[Dl,t.item.config?(r(!0),d(B,{key:0},oe(t.item.config,a=>(r(),d("p",null,[s("strong",null,v(a.key||"Ключ не найден")+":",1),w(v(a.value||"Не указано"),1)]))),256)):c("",!0)])])):c("",!0),t.item.page?(r(),d("li",Sl,Ol)):c("",!0),t.item.is_global?(r(),d("li",Al,jl)):c("",!0),s("li",ql,[s("div",zl,[s("form",{onSubmit:n[6]||(n[6]=Fe((...a)=>e.submitRelocateData&&e.submitRelocateData(...a),["prevent"]))},[Rl,$(s("select",{class:"form-control w-100","onUpdate:modelValue":n[5]||(n[5]=a=>e.selected_slug_id=a),required:""},[Ul,(r(!0),d(B,null,oe(e.slugs,a=>(r(),d("option",{value:a.id},"#"+v(a.id)+" "+v(a.slug||"Не указан"),9,Vl))),256))],512),[[Jt,e.selected_slug_id]]),Yl,s("button",{disabled:e.selected_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,Il)],32)])])]))])])])],2),s("div",{class:"modal fade",id:"edit-slug-"+t.item.id,tabindex:"-1"},[s("div",xl,[s("div",Nl,[s("div",El,[s("h5",Ql,[w("Редактирование команды #"),s("span",null,v(t.item.id),1)]),Ll]),s("div",Hl,[e.load?c("",!0):(r(),H(Ro,{key:0,item:t.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"]))]),Wl])])],8,Bl)],64))}}),Gl={key:0,class:"row"},Zl={class:"col-12 mb-2"},Jl={key:0},ei=s("i",{class:"fa-solid fa-scroll"},null,-1),ti={key:1},si=s("i",{class:"fa-regular fa-square-minus"},null,-1),ni={key:0,class:"col-12"},oi={class:"col-12"},ai={class:"form-floating mb-3"},li=s("label",{for:"floatingInput"},"Быстрый поиск команды",-1),ii={class:"col-12 mb-2"},ri={class:"form-check"},di={class:"form-check-label",for:"need_global"},ui={key:0},ci={key:1},mi={class:"form-check"},pi=s("label",{class:"form-check-label",for:"need_show_deleted"}," Удаленные ",-1),hi={key:1,class:"mb-3 col-12 col-sm-12"},_i={class:"table"},fi=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"#"),s("th",{scope:"col"},"Команда"),s("th",{scope:"col"},"Пояснение"),s("th",{scope:"col"},"Глобальный"),s("th",{scope:"col"},"Действия")])],-1),vi=["onClick"],bi={key:0},gi=s("i",{class:"fa-solid fa-check text-success"},null,-1),yi=[gi],$i={key:1},ki=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),wi=[ki],Ci={class:"dropdown"},Fi=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),Ti={class:"dropdown-menu"},Di={key:0},Si=["onClick"],Pi=s("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),Oi={key:1},Ai=["onClick"],Mi=s("a",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#edit-table-slug"},[s("i",{class:"fa-regular fa-pen-to-square mr-1"}),w(" Редактировать")],-1),ji=[Mi],qi=["onClick"],zi=s("i",{class:"fa-solid fa-clone mr-1"},null,-1),Ri=["href"],Ui=s("i",{class:"fa-regular fa-file-excel mr-1"},null,-1),Vi={key:2},Yi=["onClick"],Ii=s("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Bi={key:3},xi=["onClick"],Ni=s("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Ei={key:3,class:"mb-3 col-md-12"},Qi=s("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),Li=[Qi],Hi={class:"modal fade",id:"edit-table-slug",tabindex:"-1"},Wi={class:"modal-dialog modal-fullscreen"},Ki={key:0,class:"modal-content"},Xi={class:"modal-header"},Gi={class:"modal-title",id:"exampleModalLabel"},Zi=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ji={class:"modal-body"},er={class:"row"},tr={class:"col-8"},sr={class:"col-4"},nr={class:"list-group list-group-numbered"},or={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},ar={class:"ms-2 me-auto"},lr=s("div",{class:"fw-bold"},"Набор параметров скрипта",-1),ir={key:1},rr={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},dr=s("div",{class:"ms-2 me-auto"},[s("div",{class:"fw-bold"},"Привязана страница")],-1),ur=[dr],cr={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},mr=s("div",{class:"ms-2 me-auto"},[s("div",{class:"fw-bold"},"Является глобальным скриптом")],-1),pr=[mr],hr={class:"list-group-item d-flex justify-content-between align-items-start"},_r={class:"ms-2 me-auto w-100"},fr=s("div",{class:"fw-bold"},"Перенести данные из:",-1),vr=s("option",{value:null},"Не выбрано",-1),br=["value"],gr=s("p",{class:"my-2"},[s("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),yr=["disabled"],$r=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),kr={props:["command","canSelect"],data(){return{bot:null,relocated_slug_id:null,need_global:!0,need_show_deleted:!0,show:!1,load:!1,slugs:[],paginate:[],selectedSlug:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{ownSearch:function(t,e){this.loadSlugs()},need_global:function(t,e){this.loadSlugs()},need_show_deleted:function(t,e){this.loadSlugs()}},computed:{...xe(["getCurrentBot","getSlugs","getSlugsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})})},methods:{nextSlugs(t){this.loadSlugs(t)},loadSlugs(t=0){return this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,needGlobal:this.need_global,needDeleted:this.need_show_deleted,search:this.ownSearch},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},callbackSlugs(){this.loadSlugs()},selectSlug(t){this.load=!0,this.$nextTick(()=>{this.selectedSlug=t,this.load=!1}),this.$emit("select",t)},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0;const t=this.selectedSlug;this.loadSlugs().then(()=>{let e=this.slugs.find(n=>n.id===t.id);this.selectSlug(e||null)}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},duplicateSlug(t){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.loadSlugs(),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.relocated_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},restoreSlug(t){this.load=!0,this.$store.dispatch("restoreSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно восстановлена",type:"success"}),this.loadSlugs(),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})},removeSlug(t){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.loadSlugs()}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},wr=Object.assign(kr,{__name:"BotSlugTableList",setup(t){return(e,n)=>(r(),d(B,null,[e.bot?(r(),d("div",Gl,[s("div",Zl,[s("button",{type:"button",onClick:n[0]||(n[0]=a=>e.show=!e.show),class:"btn btn-outline-success p-3 w-100"},[e.show?(r(),d("span",ti,[si,w(" Свернуть форму добавления")])):(r(),d("span",Jl,[ei,w(" Добавить глобальный скрипт")]))])]),e.show?(r(),d("div",ni,[e.bot?(r(),H(Uo,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),s("div",oi,[s("div",ai,[$(s("input",{type:"search","onUpdate:modelValue":n[1]||(n[1]=a=>e.ownSearch=a),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[Z,e.ownSearch]]),li])]),s("div",ii,[s("div",ri,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[2]||(n[2]=a=>e.need_global=a),type:"checkbox",id:"need_global"},null,512),[[De,e.need_global]]),s("label",di,[e.need_global?(r(),d("span",ui,"Глобальные")):(r(),d("span",ci,"Локальные"))])]),s("div",mi,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[3]||(n[3]=a=>e.need_show_deleted=a),type:"checkbox",id:"need_show_deleted"},null,512),[[De,e.need_show_deleted]]),pi])]),e.slugs&&e.bot?(r(),d("div",hi,[s("table",_i,[fi,s("tbody",null,[(r(!0),d(B,null,oe(e.slugs,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",{scope:"row",class:j({"text-danger":a.deleted_at!=null})},v(a.id||"Нет идентификатора"),3),s("td",{onClick:l=>e.selectSlug(a),"data-bs-toggle":"modal","data-bs-target":"#edit-table-slug",class:j({"text-danger":a.deleted_at!=null})},v(a.command||"Нет команды"),11,vi),s("td",{class:j({"text-danger":a.deleted_at!=null})},v(a.comment||"Пояснение не указано"),3),s("td",null,[a.is_global?(r(),d("span",bi,yi)):(r(),d("span",$i,wi))]),s("td",null,[s("div",Ci,[Fi,s("ul",Ti,[t.canSelect?(r(),d("li",Di,[s("a",{onClick:l=>e.selectSlug(a),title:"Выбрать команду",class:"dropdown-item cursor-pointer"},[Pi,w(" Выбрать команду ")],8,Si)])):c("",!0),t.canSelect?(r(),d("hr",Oi)):c("",!0),s("li",{onClick:l=>e.selectSlug(a)},ji,8,Ai),s("li",null,[s("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.duplicateSlug(a)},[zi,w(" Дублировать")],8,qi)]),s("li",null,[s("a",{class:"dropdown-item cursor-pointer",target:"_blank",href:"/admin/slugs/action-data-export/"+a.id},[Ui,w(" Скачать данные участников")],8,Ri)]),a.deleted_at==null?(r(),d("li",Vi,[s("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.removeSlug(a)},[Ii,w(" Удалить")],8,Yi)])):c("",!0),a.deleted_at!=null?(r(),d("li",Bi,[s("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.restoreSlug(a)},[Ni,w(" Восстановить")],8,xi)])):c("",!0)])])])],2))),256))])])])):c("",!0),e.paginate?(r(),H(Je,{key:2,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0),e.slugs.length===0?(r(),d("div",Ei,Li)):c("",!0)])):c("",!0),s("div",Hi,[s("div",Wi,[e.selectedSlug&&!e.load?(r(),d("div",Ki,[s("div",Xi,[s("h5",Gi,[w("Редактирование команды #"),s("span",null,v(e.selectedSlug.id),1)]),Zi]),s("div",Ji,[s("div",er,[s("div",tr,[E(Ro,{item:e.selectedSlug,onCallback:e.slugFormCallback},null,8,["item","onCallback"])]),s("div",sr,[s("ol",nr,[e.selectedSlug.config?(r(),d("li",or,[s("div",ar,[lr,(e.selectedSlug.config||[]).length>0?(r(!0),d(B,{key:0},oe(e.selectedSlug.config,a=>(r(),d("p",null,[s("strong",null,v(a.key||"Ключ не найден")+":",1),w(v(a.value||"Не указано"),1)]))),256)):(r(),d("p",ir,"Отсутствует"))])])):c("",!0),e.selectedSlug.page?(r(),d("li",rr,ur)):c("",!0),e.selectedSlug.is_global?(r(),d("li",cr,pr)):c("",!0),s("li",hr,[s("div",_r,[s("form",{onSubmit:n[5]||(n[5]=Fe((...a)=>e.submitRelocateData&&e.submitRelocateData(...a),["prevent"]))},[fr,$(s("select",{class:"form-control w-100","onUpdate:modelValue":n[4]||(n[4]=a=>e.relocated_slug_id=a),required:""},[vr,(r(!0),d(B,null,oe(e.slugs,a=>(r(),d("option",{value:a.id},"#"+v(a.id)+" "+v(a.slug||"Не указан"),9,br))),256))],512),[[Jt,e.relocated_slug_id]]),gr,s("button",{disabled:e.relocated_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,yr)],32)])])])])])]),$r])):c("",!0)])])],64))}}),Cr={class:"row mt-2"},Fr={class:"input-group mb-3"},Tr={key:0,class:"row"},Dr={class:"col-12 col-md-12 mb-3"},Sr={class:"table"},Pr=s("th",{scope:"col"},"#",-1),Or=s("th",{scope:"col"},"Ф.И.О. из телеграмма",-1),Ar=s("th",{scope:"col"},"Имя пользователя",-1),Mr=s("th",{scope:"col"},"Домен",-1),jr=s("th",{scope:"col"},"Телефон",-1),qr=s("th",{scope:"col"},"TG id",-1),zr={key:0,scope:"col"},Rr={key:1,scope:"col"},Ur={key:2,scope:"col"},Vr={key:3,scope:"col"},Yr={key:4,scope:"col"},Ir=["onClick"],Br={scope:"row"},xr=["href"],Nr={key:1},Er={key:0},Qr=["onClick"],Lr=s("i",{class:"fa-solid fa-check text-success"},null,-1),Hr=[Lr],Wr=["onClick"],Kr=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Xr=[Kr],Gr={key:1},Zr=["onClick"],Jr=s("i",{class:"fa-solid fa-check text-success"},null,-1),ed=[Jr],td=["onClick"],sd=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),nd=[sd],od={key:2},ad=["onClick"],ld=s("i",{class:"fa-solid fa-check text-success"},null,-1),id=[ld],rd=["onClick"],dd=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),ud=[dd],cd={key:3},md=["onClick"],pd=s("i",{class:"fa-solid fa-check text-success"},null,-1),hd=[pd],_d=["onClick"],fd=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),vd=[fd],bd={key:4},gd=["onClick"],yd=s("i",{class:"fa-solid fa-check text-success"},null,-1),$d=[yd],kd=["onClick"],wd=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Cd=[wd],Fd={class:"col-12"},Td={key:1,class:"row"},Dd=s("div",{class:"col-12"},[s("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет пользователей ")],-1),Sd=[Dd],Pd={props:["simple"],data(){return{bot:null,loading:!0,bot_users:[],search:null,bot_users_paginate_object:null}},computed:{...xe(["getBotUsers","getBotUsersPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadUsers()})},methods:{selectUser(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},changeUserStatus(t,e,n="is_admin"){this.bot_users[t][n]=e===1,this.$store.dispatch("changeUserStatus",{dataObject:{bot_user_id:this.bot_users[t].id,status:e,type:n}}).then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус пользователя успешно изменен! Пользователь оповещен об изменении статуса!",type:"success"})}).catch(()=>{this.$notify({title:"Конструктор ботов",text:"Ошибка изменения статуса",type:"error"})})},nextUsers(t){this.loadUsers(t)},loadUsers(t=0){this.loading=!0,this.$store.dispatch("loadBotUsers",{dataObject:{botId:this.bot.id||null,search:this.search},size:100,page:t}).then(e=>{this.loading=!1,this.bot_users=this.getBotUsers,this.bot_users_paginate_object=this.getBotUsersPaginateObject}).catch(()=>{this.loading=!1})}}},Ks=Object.assign(Pd,{__name:"BotUserList",setup(t){return(e,n)=>(r(),d(B,null,[s("div",Cr,[s("div",Fr,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск пользователя","aria-label":"Поиск пользователя",onKeydown:n[0]||(n[0]=Pe(a=>e.loadUsers(0),["enter"])),"onUpdate:modelValue":n[1]||(n[1]=a=>e.search=a)},null,544),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[2]||(n[2]=a=>e.loadUsers(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.bot_users.length>0?(r(),d("div",Tr,[s("div",Dr,[s("table",Sr,[s("thead",null,[s("tr",null,[Pr,Or,Ar,Mr,jr,qr,t.simple?c("",!0):(r(),d("th",zr,"Админ")),t.simple?c("",!0):(r(),d("th",Rr,"VIP")),t.simple?c("",!0):(r(),d("th",Ur,"Доставщик")),t.simple?c("",!0):(r(),d("th",Vr,"Менеджер")),t.simple?c("",!0):(r(),d("th",Yr,"За работой"))])]),s("tbody",null,[(r(!0),d(B,null,oe(e.bot_users,(a,o)=>(r(),d("tr",{onClick:l=>e.selectUser(a)},[s("th",Br,v(a.id),1),s("td",null,v(a.fio_from_telegram||"Не указано"),1),s("td",null,v(a.name||"Не указано"),1),s("td",null,[a.username?(r(),d("a",{key:0,href:"https://t.me/"+a.username,target:"_blank"},"@"+v(a.username),9,xr)):(r(),d("span",Nr,"Не указано"))]),s("td",null,v(a.phone||"Не указано"),1),s("td",null,v(a.telegram_chat_id||"Не указано"),1),t.simple?c("",!0):(r(),d("td",Er,[a.is_admin?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(o,0,"is_admin")},Hr,8,Qr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(o,1,"is_admin")},Xr,8,Wr))])),t.simple?c("",!0):(r(),d("td",Gr,[a.is_vip?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(o,0,"is_vip")},ed,8,Zr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(o,1,"is_vip")},nd,8,td))])),t.simple?c("",!0):(r(),d("td",od,[a.is_deliveryman?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(o,0,"is_deliveryman")},id,8,ad)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(o,1,"is_deliveryman")},ud,8,rd))])),t.simple?c("",!0):(r(),d("td",cd,[a.is_manager?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(o,0,"is_manager")},hd,8,md)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(o,1,"is_manager")},vd,8,_d))])),t.simple?c("",!0):(r(),d("td",bd,[a.is_work?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(o,0,"is_work")},$d,8,gd)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(o,1,"is_work")},Cd,8,kd))]))],8,Ir))),256))])])]),s("div",Fd,[e.bot_users_paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextUsers,pagination:e.bot_users_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Td,Sd))],64))}}),Od={class:"row"},Ad={class:"col-12"},Md=s("h6",null,"Добавление нового скрипта в бота",-1),jd={key:0,class:"row"},qd={class:"col-md-6 col-lg-4 col-sm-6 col-12 mb-2"},zd={key:1,class:"row"},Rd=s("div",{class:"col-12"},[s("div",{class:"alert alert-danger",role:"alert"},' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')],-1),Ud=[Rd],Vd={props:["bot","global","selected"],data(){return{load:!1,search:null,slugs:[],paginate:[]}},computed:{...xe(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(t=>{let e=t.slug||"",n=t.command||"",a=t.comment||"";return n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||a.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(t){this.loadSlugs(t)},selectSlug(t){this.$emit("callback",{id:t.id||null,slug:t.slug,comment:t.comment,command:t.command}),this.$notify("Вы выбрали скрипт из списка!")},loadSlugs(t=0){this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,search:this.search,needGlobal:this.global},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){}}},Yd=Object.assign(Vd,{__name:"BotSlugListSimple",setup(t){return(e,n)=>(r(),d("div",Od,[s("div",Ad,[Md,s("div",null,[$(s("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":n[0]||(n[0]=a=>e.search=a),onKeyup:n[1]||(n[1]=(...a)=>e.loadSlugs&&e.loadSlugs(...a)),placeholder:"Поиск нужного скрипта по описанию"},null,544),[[Z,e.search]])]),e.slugs.length>0?(r(),d("div",jd,[(r(!0),d(B,null,oe(e.slugs,(a,o)=>(r(),d("div",qd,[E(Xl,{"is-active":(t.selected||[]).indexOf(a.id)!=-1,item:a,bot:t.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["is-active","item","bot","onCallback","onSelect"])]))),256)),e.paginate?(r(),H(Je,{key:0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",zd,Ud))])]))}});const Id={props:["param"],data(){return{expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона: +7(982)000-00-00"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату DD.MM.YYYY"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},Bd={class:"dropdown"},xd=s("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-regular fa-registered"})],-1),Nd={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Ed=["onClick"];function Qd(t,e,n,a,o,l){return r(),d("div",Bd,[xd,s("div",Nd,[s("li",null,[(r(!0),d(B,null,oe(o.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},v(i.description||"-"),9,Ed))),256))])])])}const Ld=Ut(Id,[["render",Qd]]),Hd={key:0,class:"mb-2 d-flex justify-content-start flex-wrap"},Wd=s("p",null,"Связь цепочек: ",-1),Kd=["onClick"],Xd={key:0,class:"fa-solid fa-arrow-right font-12"},Gd={class:"form-floating mb-2"},Zd=["id"],Jd=["for"],eu={class:"form-check mb-2"},tu=s("label",{class:"form-check-label",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),su={key:1,class:"form-floating mb-2"},nu=["id"],ou=["for"],au={key:2,class:"form-floating mb-2"},lu=["id"],iu=["for"],ru={key:3,class:"mb-2"},du={class:"d-flex justify-content-between"},uu=["for"],cu=["id"],mu={class:"mb-2"},pu={class:"d-flex justify-content-between"},hu=["for"],_u=["id"],fu={class:"mb-2"},vu={class:"form-check"},bu=s("label",{class:"form-check-label",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),gu={class:"form-check"},yu=s("label",{class:"form-check-label",for:"need-dialog-menu-inline"}," В диалоге нужно меню тексту ",-1),$u={class:"form-check"},ku=s("label",{class:"form-check-label",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),wu={key:4,class:"card mb-2"},Cu={class:"card-body"},Fu=s("h6",null,"Фотографии к диалогу",-1),Tu={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},Du={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Su=s("span",null,"+",-1),Pu={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Ou={class:"remove"},Au=["onClick"],Mu={class:"mb-2 img-preview",style:{"margin-right":"10px"}},ju={class:"remove"},qu=["onClick"],zu={key:5,class:"card mb-2"},Ru=s("div",{class:"card-header"},[s("h6",null,"Кнопки к тексту вопроса")],-1),Uu={class:"card-body"},Vu={key:6,class:"card mb-2"},Yu=s("div",{class:"card-header"},[s("h6",null,"Кнопки в виде нижнего меню")],-1),Iu={class:"card-body"},Bu={class:"mb-2"},xu=s("label",{class:"form-check-label",for:"need-empty-dialog"}," Сохранить в переменную ",-1),Nu=s("option",{selected:""},"Не выбрано",-1),Eu=["value"],Qu={class:"form-check mb-2"},Lu=s("label",{class:"form-check-label",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),Hu={key:7,class:"mb-2"},Wu=s("p",null,"Выбрать флаги",-1),Ku=["onClick"],Xu={key:8,class:"mb-2"},Gu={key:0,class:"row"},Zu=s("div",{class:"col-12"},[s("p",null,"Доступные для связывания диалоги:")],-1),Ju={class:"col-md-12 mb-1"},ec={type:"button",class:"btn btn-outline-primary w-100 d-flex justify-content-between align-items-center",style:{"text-align":"left"}},tc=["onClick"],sc={key:0,class:"fa-solid fa-link mr-2 text-success"},nc={key:1,class:"row"},oc=s("div",{class:"col-12"},[s("div",{class:"alert alert-danger",role:"alert"}," Диалогов для связывания нет ")],-1),ac=[oc],lc=s("hr",null,null,-1),ic={class:"mb-2"},rc={type:"submit",class:"btn btn-outline-success p-3 w-100"},dc={key:0},uc={key:1},cc={props:["item","bot"],data(){return{loading:!0,dialog_commands:[],dialog_commands_paginate_object:null,need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,is_empty:!1,result_flags:[],store_to:null,result_channel:null,inline_keyboard:null,reply_keyboard:null},photos:[]}},watch:{need_inline_keyboard:function(t,e){this.need_inline_keyboard||(this.commandForm.inline_keyboard_id=null,this.commandForm.inline_keyboard=null)},need_reply_keyboard:function(t,e){this.need_reply_keyboard||(this.commandForm.reply_keyboard_id=null,this.commandForm.reply_keyboard=null)},need_set_flags:function(t,e){this.need_set_flags||(this.commandForm.result_flags=[])},need_images:function(t,e){this.need_images||(this.commandForm.images=null)}},computed:{...xe(["getDialogCommands","getDialogCommandsPaginateObject"]),filteredCommands(){return this.dialog_commands?this.dialog_commands.filter(t=>t.id!=this.commandForm.id):[]}},mounted(){this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.item&&(this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject)},methods:{nextDialogs(t){this.loadDialogs(t)},loadDialogs(t=0){this.loading=!0,this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{this.loading=!1,this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject}).catch(()=>{this.loading=!1})},doCommandLink(t){this.loading=!0,this.commandForm.next_bot_dialog_command_id=t},submit(){this.loading=!0;let t=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const n=this.commandForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),this.photos){for(let e=0;e<this.photos.length;e++)t.append("files[]",this.photos[e]);t.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:t}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Успешная обработка диалоговой команды",type:"success"}),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,is_empty:!1,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t,e){this[t].splice(e,1)},onChangePhotos(t){const e=t.target.files;for(let n=0;n<e.length;n++)this.photos.push(e[n])},saveInlineKeyboard(t){this.commandForm.inline_keyboard=t},saveReplyKeyboard(t){this.commandForm.reply_keyboard=t},addTextTo(t={param:null,text:null}){this.commandForm[t.param]=t.text},selectElementById(t){this.$emit("select-element",t)},selectFlag(t){(!this.commandForm.result_flags||!Array.isArray(this.commandForm.result_flags))&&(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(t.key);e===-1?this.commandForm.result_flags.push(t.key):this.commandForm.result_flags.splice(e,1)}}},mc=Object.assign(cc,{__name:"BotDialogCommandForm",setup(t){return(e,n)=>{const a=hs("lazy");return r(),d("form",{onSubmit:n[13]||(n[13]=Fe((...o)=>e.submit&&e.submit(...o),["prevent"]))},[e.commandForm.next_bot_dialog_command_id?(r(),d("div",Hd,[Wd,(r(!0),d(B,null,oe(t.item.chain,(o,l)=>(r(),d("div",null,[s("span",{class:j(["badge cursor-pointer",{"bg-success":e.commandForm.id==o,"bg-primary":e.commandForm.id!=o}]),onClick:i=>e.selectElementById(o)},v(o),11,Kd),l<t.item.chain.length-1?(r(),d("i",Xd)):c("",!0)]))),256))])):c("",!0),s("div",Gd,[$(s("input",{type:"text",class:"form-control",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":n[0]||(n[0]=o=>e.commandForm.pre_text=o),required:""},null,8,Zd),[[Z,e.commandForm.pre_text]]),s("label",{for:"commandForm-pre-text-"+e.commandForm.id},"Текст диалога",8,Jd)]),s("div",eu,[$(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=o=>e.commandForm.is_empty=o),id:"need-empty-dialog",checked:""},null,512),[[De,e.commandForm.is_empty]]),tu]),e.commandForm.is_empty?c("",!0):(r(),d("div",su,[$(s("input",{type:"text",class:"form-control",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":n[2]||(n[2]=o=>e.commandForm.post_text=o),required:""},null,8,nu),[[Z,e.commandForm.post_text]]),s("label",{for:"commandForm-post-text-"+e.commandForm.id},"Текст после успешного завершения диалога",8,ou)])),e.commandForm.is_empty?c("",!0):(r(),d("div",au,[$(s("input",{type:"text",class:"form-control",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":n[3]||(n[3]=o=>e.commandForm.error_text=o),required:""},null,8,lu),[[Z,e.commandForm.error_text]]),s("label",{for:"commandForm-error-text-"+e.commandForm.id},"Текст на случай ошибки корректности данных",8,iu)])),e.commandForm.is_empty?c("",!0):(r(),d("div",ru,[s("div",du,[s("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для валидации данных ",8,uu),E(Ld,{param:"input_pattern",onCallback:e.addTextTo},null,8,["onCallback"])]),$(s("input",{type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":n[4]||(n[4]=o=>e.commandForm.input_pattern=o),maxlength:"255",id:"commandForm-input-pattern-"+e.commandForm.id,"aria-describedby":"commandForm-input-pattern"},null,8,cu),[[Z,e.commandForm.input_pattern]])])),s("div",mu,[s("div",pu,[s("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,hu),t.bot?(r(),H(Vo,{key:0,token:t.bot.bot_token,param:"result_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])):c("",!0)]),$(s("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":n[5]||(n[5]=o=>e.commandForm.result_channel=o),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,_u),[[Z,e.commandForm.result_channel]])]),s("div",fu,[s("div",vu,[$(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=o=>e.need_images=o),id:"need-dialog-image",checked:""},null,512),[[De,e.need_images]]),bu]),s("div",gu,[$(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":n[7]||(n[7]=o=>e.need_inline_keyboard=o),id:"need-dialog-menu-inline",checked:""},null,512),[[De,e.need_inline_keyboard]]),yu]),s("div",$u,[$(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":n[8]||(n[8]=o=>e.need_reply_keyboard=o),id:"need-dialog-menu-reply",checked:""},null,512),[[De,e.need_reply_keyboard]]),ku])]),e.need_images?(r(),d("div",wu,[s("div",Cu,[Fu,s("div",Tu,[s("label",Du,[Su,s("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:n[9]||(n[9]=(...o)=>e.onChangePhotos&&e.onChangePhotos(...o)),style:{display:"none"}},null,32)]),e.photos.length>0?(r(!0),d(B,{key:0},oe(e.photos,(o,l)=>(r(),d("div",Pu,[$(s("img",null,null,512),[[a,e.getPhoto(o).imageUrl]]),s("div",Ou,[s("a",{onClick:i=>e.removePhoto("photos",l)},"Удалить",8,Au)])]))),256)):c("",!0),e.commandForm.images&&t.bot?(r(!0),d(B,{key:1},oe(e.commandForm.images,(o,l)=>(r(),d("div",Mu,[$(s("img",null,null,512),[[a,"/images-by-bot-id/"+t.bot.id+"/"+o]]),s("div",ju,[s("a",{onClick:i=>e.removePhoto("images",l)},"Удалить",8,qu)])]))),256)):c("",!0)])])])):c("",!0),e.need_inline_keyboard?(r(),d("div",zu,[Ru,s("div",Uu,[E(Bs,{type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.commandForm.inline_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),e.need_reply_keyboard?(r(),d("div",Vu,[Yu,s("div",Iu,[E(Bs,{type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.commandForm.reply_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),s("div",Bu,[xu,$(s("select",{class:"form-control","onUpdate:modelValue":n[10]||(n[10]=o=>e.commandForm.store_to=o)},[Nu,(r(!0),d(B,null,oe(e.store_variants,o=>(r(),d("option",{value:o.key},v(o.title||"Не указано"),9,Eu))),256))],512),[[Jt,e.commandForm.store_to]])]),s("div",Qu,[$(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":n[11]||(n[11]=o=>e.need_set_flags=o),id:"need-set-flags",checked:""},null,512),[[De,e.need_set_flags]]),Lu]),e.need_set_flags?(r(),d("div",Hu,[Wu,(r(!0),d(B,null,oe(e.flags_variants,o=>(r(),d("span",{class:j(["badge text-info mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(o.key)!=-1}]),onClick:l=>e.selectFlag(o)},v(o.title),11,Ku))),256))])):c("",!0),e.commandForm.id?(r(),d("div",Xu,[e.filteredCommands.length>0?(r(),d("div",Gu,[Zu,(r(!0),d(B,null,oe(e.filteredCommands,(o,l)=>(r(),d("div",Ju,[s("button",ec,[s("span",{onClick:i=>e.doCommandLink(o.id)},[e.commandForm.next_bot_dialog_command_id==o.id?(r(),d("i",sc)):c("",!0),w(" #"+v(o.id)+" "+v(o.pre_text||"Без текста"),1)],8,tc),e.commandForm.next_bot_dialog_command_id==o.id?(r(),d("i",{key:0,class:"fa-solid fa-unlink text-danger",onClick:n[12]||(n[12]=i=>e.doCommandLink(null))})):c("",!0)])]))),256)),e.dialog_commands_paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",nc,ac))])):c("",!0),lc,s("div",ic,[s("button",rc,[e.commandForm.id?(r(),d("span",dc,"Обновить диалог")):(r(),d("span",uc,"Добавить диалог"))])])],32)}}});const pc={class:"row"},hc={class:"col-md-2 col-12"},_c=s("i",{class:"fa-regular fa-comment-dots",style:{"margin-right":"10px"}},null,-1),fc={class:"col-md-10 col-12"},vc={class:"input-group mb-3"},bc={key:0,class:"row"},gc={class:"col-md-12"},yc={class:"table"},$c=s("thead",null,[s("tr",null,[s("th",{class:"text-center",scope:"col"},"#"),s("th",{class:"text-center",scope:"col"},"Текст диалога"),s("th",{class:"text-center",scope:"col"},"Цепочки"),s("th",{class:"text-center",scope:"col"},"Текст успеха"),s("th",{class:"text-center",scope:"col"},"Текст ошибки"),s("th",{class:"text-center",scope:"col"},"Канал результата"),s("th",{class:"text-center",scope:"col"},"Флаги"),s("th",{class:"text-center",scope:"col"},"Сохранить в"),s("th",{class:"text-center",scope:"col"},"Есть изображения"),s("th",{class:"text-center",scope:"col"},"Есть паттерны"),s("th",{class:"text-center",scope:"col"},"Пустой"),s("th",{class:"text-center",scope:"col"},"Есть кнопки"),s("th",{class:"text-center",scope:"col"},"Есть меню"),s("th",{class:"text-center",scope:"col"},"Команды")])],-1),kc={scope:"row"},wc={class:"text-center"},Cc=["onClick"],Fc={class:"text-center"},Tc={key:0,class:"badge bg-primary"},Dc={key:1},Sc=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Pc=[Sc],Oc={class:"text-center"},Ac={key:0},Mc={key:1},jc=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),qc=[jc],zc={class:"text-center"},Rc={key:0},Uc={key:1},Vc=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Yc=[Vc],Ic={class:"text-center"},Bc={key:0},xc={key:1},Nc=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Ec=[Nc],Qc={class:"text-center"},Lc={key:0},Hc={class:"badge bg-primary"},Wc={key:1},Kc=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Xc=[Kc],Gc={class:"text-center"},Zc={key:0},Jc={key:1},em=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),tm=[em],sm={class:"text-center"},nm={key:0,class:"fa-solid fa-check text-success"},om={key:1,class:"fa-solid fa-xmark text-danger"},am={class:"text-center"},lm={key:0},im={key:1},rm=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),dm=[rm],um={class:"text-center"},cm={key:0,class:"fa-solid fa-check text-success"},mm={key:1,class:"fa-solid fa-xmark text-danger"},pm={class:"text-center"},hm={key:0,class:"fa-solid fa-check text-success"},_m={key:1,class:"fa-solid fa-xmark text-danger"},fm={class:"text-center"},vm={key:0,class:"fa-solid fa-check text-success"},bm={key:1,class:"fa-solid fa-xmark text-danger"},gm={class:"text-center"},ym={class:"dropdown"},$m=["disabled"],km=s("i",{class:"fa-solid fa-ellipsis"},null,-1),wm=[km],Cm={class:"dropdown-menu"},Fm=["onClick"],Tm=s("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),Dm=s("hr",null,null,-1),Sm=["onClick"],Pm=s("i",{class:"fa-solid fa-clone mr-1"},null,-1),Om=["onClick"],Am=s("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),Mm={key:1,class:"row"},jm=s("div",{class:"col-12"},[s("div",{class:"alert alert-danger",role:"alert"}," Не найдено ни одного диалога! ")],-1),qm=[jm],zm={class:"modal fade",id:"dialog-command-modal-editor",tabindex:"-1"},Rm={class:"modal-dialog modal-fullscreen"},Um={class:"modal-content"},Vm=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Создание диалогового сообщения "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ym={class:"modal-body"},Im=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Bm={data(){return{bot:null,selected:null,loading:!0,dialog_commands:[],search:null,dialog_commands_paginate_object:null}},computed:{...xe(["getDialogCommands","getCurrentBot","getDialogCommandsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadDialogs()})},methods:{openEditor(t){this.loading=!0,this.$nextTick(()=>{this.selected=t,this.loading=!1})},removeCommand(t){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно удалена!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},duplicate(t){this.loading=!0,this.$store.dispatch("duplicateDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно продублирована!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},selectDialog(t){this.$emit("select-dialog",t),this.$notify("Вы выбрали диалог из списка!")},nextDialogs(t){this.loadDialogs(t)},selectElement(t){this.loading=!0,this.$nextTick(()=>{this.selected=this.dialog_commands.find(e=>e.id===t)||null,this.loading=!1})},loadDialogs(t=0){this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{const n=this.selected;this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject,this.loading=!0,this.$nextTick(()=>{n&&(this.selected=this.dialog_commands.find(a=>a.id===n.id)||null),this.loading=!1})}).catch(()=>{this.loading=!1})}}},Yo=Object.assign(Bm,{__name:"BotDialogGroupList",setup(t){return(e,n)=>(r(),d(B,null,[s("div",pc,[s("div",hc,[s("button",{type:"button",onClick:n[0]||(n[0]=a=>e.openEditor(null)),"data-bs-toggle":"modal","data-bs-target":"#dialog-command-modal-editor",class:"btn btn-outline-success mb-2 w-100"},[_c,w("Новый диалог ")])]),s("div",fc,[s("div",vc,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск диалога","aria-label":"Поиск диалога","onUpdate:modelValue":n[1]||(n[1]=a=>e.search=a),"aria-describedby":"button-addon2"},null,512),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[2]||(n[2]=a=>e.loadDialogs(0)),type:"button",id:"button-addon2"},"Найти ")])])]),e.dialog_commands.length>0?(r(),d("div",bc,[s("div",gc,[s("table",yc,[$c,s("tbody",null,[(r(!0),d(B,null,oe(e.dialog_commands,(a,o)=>(r(),d("tr",null,[s("th",kc,v(a.id),1),s("td",wc,[s("a",{"data-bs-toggle":"modal",onClick:l=>e.openEditor(a),"data-bs-target":"#dialog-command-modal-editor",href:"javascript:void(0)"},v(a.pre_text||"-"),9,Cc)]),s("td",Fc,[a.next_bot_dialog_command_id?(r(),d("span",Tc,"#"+v(a.next_bot_dialog_command_id||"-")+" ("+v(a.chain.length||0)+")",1)):(r(),d("span",Dc,Pc))]),s("td",Oc,[a.post_text?(r(),d("p",Ac,v(a.post_text),1)):(r(),d("p",Mc,qc))]),s("td",zc,[a.error_text?(r(),d("p",Rc,v(a.error_text),1)):(r(),d("p",Uc,Yc))]),s("td",Ic,[a.result_channel?(r(),d("p",Bc,v(a.result_channel),1)):(r(),d("p",xc,Ec))]),s("td",Qc,[a.result_flags.length>0?(r(),d("p",Lc,[(r(!0),d(B,null,oe(a.result_flags,l=>(r(),d("span",Hc,v(l||"-"),1))),256))])):(r(),d("p",Wc,Xc))]),s("td",Gc,[a.store_to?(r(),d("p",Zc,v(a.store_to),1)):(r(),d("p",Jc,tm))]),s("td",sm,[a.images.length>0?(r(),d("i",nm)):(r(),d("i",om))]),s("td",am,[a.input_pattern?(r(),d("p",lm,v(a.input_pattern),1)):(r(),d("p",im,dm))]),s("td",um,[a.is_empty?(r(),d("i",cm)):(r(),d("i",mm))]),s("td",pm,[a.inline_keyboard_id!=null?(r(),d("i",hm)):(r(),d("i",_m))]),s("td",fm,[a.reply_keyboard_id!=null?(r(),d("i",vm)):(r(),d("i",bm))]),s("td",gm,[s("div",ym,[s("button",{disabled:e.loading,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},wm,8,$m),s("ul",Cm,[s("li",null,[s("a",{onClick:l=>e.selectDialog(a),title:"Выбрать диалог",class:"dropdown-item cursor-pointer"},[Tm,w(" Выбрать диалог ")],8,Fm)]),Dm,s("li",null,[s("a",{title:"Дублирование команды",onClick:l=>e.duplicate(a.id),class:"dropdown-item cursor-pointer"},[Pm,w(" Дублирование диалога ")],8,Sm)]),s("li",null,[s("a",{onClick:l=>e.removeCommand(a.id),title:"Удаление команды",class:"dropdown-item cursor-pointer"},[Am,w(" Удаление диалога ")],8,Om)])])])])]))),256))])]),e.dialog_commands_paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Mm,qm)),s("div",zm,[s("div",Rm,[s("div",Um,[Vm,s("div",Ym,[e.bot&&!e.loading?(r(),H(mc,{key:0,item:e.selected,onCallback:e.loadDialogs,onSelectElement:e.selectElement,bot:e.bot},null,8,["item","onCallback","onSelectElement","bot"])):c("",!0)]),Im])])])],64))}}),xm=s("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),Nm=s("h6",null,"Блок условий",-1),Em={key:0,class:"py-2"},Qm={class:"form-label",id:"bot-domain"},Lm=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hm=s("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),Wm={class:"dropdown mb-2"},Km=s("button",{class:"btn btn-outline-info dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить условие ",-1),Xm={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Gm=["onClick"],Zm={key:1},Jm={key:2,class:"list-group"},ep={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},tp={class:"form-check"},sp={class:"form-check-label",for:"bot-user-is-vip"},np={key:0},op={key:1},ap=s("i",{class:"fa-solid fa-trash-can"},null,-1),lp=[ap],ip={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},rp={class:"form-check"},dp={class:"form-check-label",for:"bot-user-is-admin"},up={key:0},cp={key:1},mp=s("i",{class:"fa-solid fa-trash-can"},null,-1),pp=[mp],hp={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},_p={class:"form-check"},fp={class:"form-check-label",for:"bot-user-is-deliveryman"},vp={key:0},bp={key:1},gp=s("i",{class:"fa-solid fa-trash-can"},null,-1),yp=[gp],$p={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},kp={class:"form-check"},wp={class:"form-check-label",for:"bot-user-is-work"},Cp={key:0},Fp={key:1},Tp=s("i",{class:"fa-solid fa-trash-can"},null,-1),Dp=[Tp],Sp={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},Pp={class:"form-check"},Op={class:"form-check-label",for:"bot-user-in-location"},Ap={key:0},Mp={key:1},jp=s("i",{class:"fa-solid fa-trash-can"},null,-1),qp=[jp],zp={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},Rp=s("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),Up=s("i",{class:"fa-solid fa-trash-can"},null,-1),Vp=[Up],Yp={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},Ip=s("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),Bp=s("i",{class:"fa-solid fa-trash-can"},null,-1),xp=[Bp],Np={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},Ep={class:"form-check"},Qp={class:"form-check-label",for:"bot-user-sex"},Lp={key:0},Hp={key:1},Wp=s("i",{class:"fa-solid fa-trash-can"},null,-1),Kp=[Wp],Xp={key:8,class:"list-group-item"},Gp={class:"mb-3"},Zp={class:"d-flex justify-content-between align-items-center"},Jp={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},eh=["onClick"],th=s("i",{class:"fa-solid fa-trash-can"},null,-1),sh=[th],nh=["onUpdate:modelValue"],oh={key:3,class:"mt-5"},ah={key:4,class:"d-flex justify-content-between"},lh={key:6,class:"py-2"},ih={class:"form-label",id:"bot-domain"},rh=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dh=s("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),uh={props:["bot","rulesForm"],data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},computed:{rulesForCustomFields(){let t=this.rules.filter(e=>e.key!=null);return console.log("filtered rules",t),t}},mounted(){},methods:{hasRuleKey(t){return this.rulesForm.rules_if==null?!1:(console.log("key=>",t||"-"),Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===t)!=null)},modifyChannel(t){this.rulesForm.rules_if.channels[t.param]=t.text},removeChannelFromRule(t){this.rulesForm.rules_if.channels.splice(t,1)},removeRule(t){delete this.rulesForm.rules_if.bot_user[t]},addRules(t){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),t.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...t.rule}),t.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(t.rule.channel)},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{(t.data||[]).forEach(n=>{n.is_active&&(this.rules.push({id:this.rules.length+1,title:n.label,key:n.key,type:n.type,rules_block:"bot_user",rule:{}}),n.type===0&&(this.rules[this.rules.length-1].rule[n.key]=""),n.type===1&&(this.rules[this.rules.length-1].rule[n.key]=0),n.type===2&&(this.rules[this.rules.length-1].rule[n.key]=!0))}),console.log("new rules=>",this.rules)})},attachPageToRule(t){t.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=t.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})}}},ch=Object.assign(uh,{__name:"PageRules",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d(B,null,[xm,Nm,t.rulesForm.rules_if?(r(),d("div",Em,[s("label",Qm,[E(a,null,{content:O(()=>[Hm]),default:O(()=>[Lm]),_:1}),w(" Сообщение при успешном прохождении условий (не обязательно) ")]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":n[0]||(n[0]=o=>t.rulesForm.rules_if_message=o),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[Z,t.rulesForm.rules_if_message]])])):c("",!0),s("div",Wm,[Km,s("ul",Xm,[(r(!0),d(B,null,oe(e.rules,o=>(r(),d("li",null,[s("a",{onClick:l=>e.addRules(o),class:"dropdown-item",href:"javascript:void(0)"},v(o.title||"Не указан"),9,Gm)]))),256))])]),t.rulesForm.rules_if?(r(),d("h6",Zm,"Выбранные условия")):c("",!0),t.rulesForm.rules_if?(r(),d("ul",Jm,[e.hasRuleKey("is_vip")?(r(),d("li",ep,[s("div",tp,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[1]||(n[1]=o=>t.rulesForm.rules_if.bot_user.is_vip=o),type:"checkbox",id:"bot-user-is-vip"},null,512),[[De,t.rulesForm.rules_if.bot_user.is_vip]]),s("label",sp,[t.rulesForm.rules_if.bot_user.is_vip?(r(),d("span",np,"Является VIP-пользователем")):(r(),d("span",op,"Не является VIP-пользователем"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[2]||(n[2]=o=>e.removeRule("is_vip"))},lp)])):c("",!0),e.hasRuleKey("is_admin")?(r(),d("li",ip,[s("div",rp,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[3]||(n[3]=o=>t.rulesForm.rules_if.bot_user.is_admin=o),type:"checkbox",id:"bot-user-is-admin"},null,512),[[De,t.rulesForm.rules_if.bot_user.is_admin]]),s("label",dp,[t.rulesForm.rules_if.bot_user.is_admin?(r(),d("span",up,"Является администратором")):(r(),d("span",cp,"Не является администратором"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[4]||(n[4]=o=>e.removeRule("is_admin"))},pp)])):c("",!0),e.hasRuleKey("is_deliveryman")?(r(),d("li",hp,[s("div",_p,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[5]||(n[5]=o=>t.rulesForm.rules_if.bot_user.is_deliveryman=o),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[De,t.rulesForm.rules_if.bot_user.is_deliveryman]]),s("label",fp,[t.rulesForm.rules_if.bot_user.is_deliveryman?(r(),d("span",vp,"Является доставщиком")):(r(),d("span",bp,"Не является доставщиком"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[6]||(n[6]=o=>e.removeRule("is_deliveryman"))},yp)])):c("",!0),e.hasRuleKey("is_work")?(r(),d("li",$p,[s("div",kp,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[7]||(n[7]=o=>t.rulesForm.rules_if.bot_user.is_work=o),type:"checkbox",id:"bot-user-is-work"},null,512),[[De,t.rulesForm.rules_if.bot_user.is_work]]),s("label",wp,[t.rulesForm.rules_if.bot_user.is_work?(r(),d("span",Cp,"За работой")):(r(),d("span",Fp,"Не работает"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[8]||(n[8]=o=>e.removeRule("is_work"))},Dp)])):c("",!0),e.hasRuleKey("user_in_location")?(r(),d("li",Sp,[s("div",Pp,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[9]||(n[9]=o=>t.rulesForm.rules_if.bot_user.user_in_location=o),type:"checkbox",id:"bot-user-in-location"},null,512),[[De,t.rulesForm.rules_if.bot_user.user_in_location]]),s("label",Op,[t.rulesForm.rules_if.bot_user.user_in_location?(r(),d("span",Ap,"Находится в заведении")):(r(),d("span",Mp,"Не находится в заведении"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[10]||(n[10]=o=>e.removeRule("user_in_location"))},qp)])):c("",!0),e.hasRuleKey("age")?(r(),d("li",zp,[s("div",null,[Rp,$(s("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":n[11]||(n[11]=o=>t.rulesForm.rules_if.bot_user.age=o),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[Z,t.rulesForm.rules_if.bot_user.age]])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[12]||(n[12]=o=>e.removeRule("age"))},Vp)])):c("",!0),e.hasRuleKey("city")?(r(),d("li",Yp,[s("div",null,[Ip,$(s("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":n[13]||(n[13]=o=>t.rulesForm.rules_if.bot_user.city=o),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[Z,t.rulesForm.rules_if.bot_user.city]])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[14]||(n[14]=o=>e.removeRule("city"))},xp)])):c("",!0),e.hasRuleKey("sex")?(r(),d("li",Np,[s("div",Ep,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[15]||(n[15]=o=>t.rulesForm.rules_if.bot_user.sex=o),type:"checkbox",id:"bot-user-sex"},null,512),[[De,t.rulesForm.rules_if.bot_user.sex]]),s("label",Qp,[t.rulesForm.rules_if.bot_user.sex?(r(),d("span",Lp,"Только для мужчин")):(r(),d("span",Hp,"Только для женщин"))])]),s("button",{type:"button",class:"btn btn-outline-info",onClick:n[16]||(n[16]=o=>e.removeRule("sex"))},Kp)])):c("",!0),t.rulesForm.rules_if.channels.length>0?(r(),d("li",Xp,[w("Проверка нахождения в канале \\ группе: "),(r(!0),d(B,null,oe(t.rulesForm.rules_if.channels,(o,l)=>(r(),d("div",Gp,[s("div",Zp,[s("label",Jp,[E(Vo,{token:t.bot.bot_token,param:`${l}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),w(" Канал для проверки ")]),s("button",{type:"button",class:"btn btn-link text-danger",onClick:i=>e.removeChannelFromRule(l)},sh,8,eh)]),$(s("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":i=>t.rulesForm.rules_if.channels[l]=i,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,nh),[[Z,t.rulesForm.rules_if.channels[l]]])]))),256))])):c("",!0)])):c("",!0),t.rulesForm.rules_if?(r(),d("h6",oh,"Иначе")):c("",!0),t.rulesForm.rules_else_page_id?(r(),d("p",ah,[w("Вы выбрали страницу #"+v(t.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),s("a",{href:"javascript:void(0)",onClick:n[17]||(n[17]=o=>t.rulesForm.rules_else_page_id=null)},"Очистить")])):c("",!0),t.rulesForm.rules_if?(r(),H(wn,{key:5,current:t.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):c("",!0),t.rulesForm.rules_if?(r(),d("div",lh,[s("label",ih,[E(a,null,{content:O(()=>[dh]),default:O(()=>[rh]),_:1}),w(" Сообщение в случае невыполнения условий (не обязательно) ")]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":n[18]||(n[18]=o=>t.rulesForm.rules_else_message=o),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[Z,t.rulesForm.rules_else_message]])])):c("",!0)],64)}}});const mh={key:0,class:"row pt-3"},ph={class:"col-12"},hh={class:"alert alert-info",role:"alert"},_h=s("strong",null,"Внимание!",-1),fh={style:{"font-size":"16px"}},vh={key:0,class:"row"},bh={class:"col-12 mb-2"},gh=s("h6",null,"На странице выбраны следующие разделы",-1),yh={class:"mini-pics justify-content-start d-inline-flex text-primary"},$h=s("i",{class:"fa-regular fa-images"},null,-1),kh=[$h],wh=s("i",{class:"fa-regular fa-note-sticky"},null,-1),Ch=[wh],Fh=s("i",{class:"fa-solid fa-photo-film"},null,-1),Th=[Fh],Dh=s("i",{class:"fa-regular fa-file-audio"},null,-1),Sh=[Dh],Ph=s("i",{class:"fa-regular fa-file-word"},null,-1),Oh=[Ph],Ah=s("i",{class:"fa-solid fa-link"},null,-1),Mh=[Ah],jh=s("i",{class:"fa-solid fa-scroll"},null,-1),qh=[jh],zh=s("i",{class:"fa-regular fa-comment-dots"},null,-1),Rh=[zh],Uh=s("i",{class:"fa-solid fa-scale-balanced"},null,-1),Vh=[Uh],Yh=s("i",{class:"fa-regular fa-keyboard"},null,-1),Ih=[Yh],Bh=s("i",{class:"fa-solid fa-ellipsis"},null,-1),xh=[Bh],Nh={class:"row"},Eh={class:"col-md-8 col-12 mb-2"},Qh={class:"form-label",id:"bot-domain"},Lh=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hh=s("div",null,[w(" Команда должна начинаться с символа . и *"),s("br"),w(" Например: .*Меню"),s("br")],-1),Wh=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Kh={class:"col-md-4 col-12 mb-2 d-flex justify-content-end align-items-end"},Xh={class:"btn-group",style:{background:"white"},role:"group","aria-label":"Basic example"},Gh={key:0,type:"submit",title:"Сохранить страницу",id:"save-page-btn",class:"btn btn-primary min-menu-btn"},Zh=s("i",{class:"fa-regular fa-floppy-disk"},null,-1),Jh=[Zh],e_=s("i",{class:"fa-solid fa-xmark text-danger"},null,-1),t_=[e_],s_=s("button",{type:"button",title:"Список страниц","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvas",class:"btn btn-outline-primary text-primary min-menu-btn"},[s("i",{class:"fa-solid fa-list-ol"})],-1),n_={class:"row"},o_={class:"col-12 mb-2"},a_={class:"form-label d-flex justify-content-between align-items-center mb-0",id:"bot-domain"},l_=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),i_=s("div",null,[w(" Текстовый редактор. Данный текст будет в таком"),s("br"),w(" же виде отображен в посте в телеграм. ")],-1),r_=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),d_={class:"form-floating"},u_={for:"floatingTextarea2"},c_={key:0},m_={class:"col-12 mb-2"},p_={class:"nav nav-tabs justify-content-center"},h_=s("i",{class:"fa-regular fa-keyboard"},null,-1),__=s("span",null,"Нижнее меню",-1),f_=[h_,__],v_=s("i",{class:"fa-solid fa-ellipsis"},null,-1),b_=s("span",null,"Меню под текстом",-1),g_=[v_,b_],y_=s("i",{class:"fa-regular fa-images"},null,-1),$_=s("span",null,"Изображения",-1),k_=[y_,$_],w_=s("i",{class:"fa-solid fa-photo-film"},null,-1),C_=s("span",null,"Видео",-1),F_=[w_,C_],T_=s("i",{class:"fa-regular fa-note-sticky"},null,-1),D_=s("span",null,"Стикеры",-1),S_=[T_,D_],P_=s("i",{class:"fa-regular fa-file-audio"},null,-1),O_=s("span",null,"Аудио",-1),A_=[P_,O_],M_=s("i",{class:"fa-regular fa-file-word"},null,-1),j_=s("span",null,"Документы",-1),q_=[M_,j_],z_=s("i",{class:"fa-solid fa-link"},null,-1),R_=s("span",null,"Другая страница",-1),U_=[z_,R_],V_=s("i",{class:"fa-solid fa-scroll"},null,-1),Y_=s("span",null,"Скрипт",-1),I_=[V_,Y_],B_=s("i",{class:"fa-regular fa-comment-dots"},null,-1),x_=s("span",null,"Начало диалога",-1),N_=[B_,x_],E_=s("i",{class:"fa-solid fa-scale-balanced"},null,-1),Q_=s("span",null,"Правила",-1),L_=[E_,Q_],H_={key:0,class:"col-12 mb-2"},W_={class:"form-check"},K_=s("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),X_={key:1,class:"col-12 mb-2"},G_={class:"card"},Z_={class:"card-header d-flex justify-between align-items-center"},J_=s("h6",null,"Конструктор нижнего меню",-1),ef={key:0},tf={key:1},sf={class:"card-body"},nf={class:"row"},of={class:"col-12 mb-2"},af={class:"form-label",id:"bot-domain"},lf=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),rf=s("div",null," Заголовок для нижнего меню ",-1),df={key:2,class:"col-12 mb-2"},uf={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},cf={class:"d-flex justify-content-center mb-3"},mf={alt:"",width:"100",height:"100"},pf=s("h1",{class:"text-body-emphasis"},"Нижнее меню",-1),hf=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Создание и настройка нижнего меню страницы бота. Добавление и редактирование функций кнопок бота на странице. Данное меню отображается пользователю всегда. ",-1),_f={class:"d-inline-flex gap-2 mb-5"},ff=["disabled"],vf=s("a",{href:"https://telegra.ph/Nizhnee-menyu-bota-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),bf={key:0,class:"col-12 mb-2"},gf={class:"form-check"},yf=s("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),$f={key:1,class:"col-12 mb-2"},kf={class:"card"},wf={class:"card-header d-flex justify-between align-items-center"},Cf=s("h6",null,"Конструктор меню в сообщении",-1),Ff={key:0},Tf={key:1},Df={class:"card-body"},Sf={key:2,class:"col-12 mb-2"},Pf={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Of={class:"d-flex justify-content-center mb-3"},Af={alt:"",width:"100",height:"100"},Mf=s("h1",{class:"text-body-emphasis"},"Меню под текстом",-1),jf=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," В отличии от нижнего меню, которое отображается всегда, меню под текстом показывается под контентом только в момент отображения этого контента. ",-1),qf={class:"d-inline-flex gap-2 mb-5"},zf=["disabled"],Rf=s("a",{href:"https://telegra.ph/Menyu-k-tekstu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Uf={key:0,class:"col-12 mb-2"},Vf={class:"form-check"},Yf=s("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),If={key:1,class:"col-12 mb-2"},Bf={class:"card mb-3"},xf=s("div",{class:"card-header"},[s("h6",null,"Загрузите изображения с файловой системы")],-1),Nf={class:"card-body d-flex justify-content-start"},Ef={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Qf={class:"row"},Lf={key:0,class:"col-12 d-flex flex-wrap"},Hf={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Wf={class:"remove"},Kf=["onClick"],Xf={key:1},Gf={key:2,class:"col-12 d-flex flex-wrap"},Zf={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Jf={class:"remove"},ev=["onClick"],tv={key:2,class:"col-12 mb-2"},sv={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},nv={class:"d-flex justify-content-center mb-3"},ov={alt:"",width:"100",height:"100"},av=s("h1",{class:"text-body-emphasis"},"Изображения",-1),lv=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[w(" Вы можете добавить к одной странице от "),s("b",null,"1"),w(" до "),s("b",null,"10"),w(" изображений. Изображения (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. Если изображение одно, то текст будет отображен под ним. ")],-1),iv={class:"d-inline-flex gap-2 mb-5"},rv=["disabled"],dv=s("a",{href:"https://telegra.ph/Dobavlenie-izobrazhenij-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),uv={key:0,class:"col-12 mb-2"},cv={class:"form-check"},mv=s("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),pv={key:1,class:"col-12 mb-2"},hv={key:2,class:"col-12 mb-2"},_v={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},fv={class:"d-flex justify-content-center mb-3"},vv={alt:"",width:"100",height:"100"},bv=s("h1",{class:"text-body-emphasis"},"Видео",-1),gv=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[w(" Вы можете добавить к одной странице от "),s("b",null,"1"),w(" до "),s("b",null,"10"),w(" видео. Ролики (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. ")],-1),yv={class:"d-inline-flex gap-2 mb-5"},$v=["disabled"],kv=s("a",{href:"https://telegra.ph/Dobavlenie-video-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),wv={key:0,class:"col-12 mb-2"},Cv={class:"form-check"},Fv=s("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),Tv={key:1,class:"col-12 mb-2"},Dv={key:2,class:"col-12 mb-2"},Sv={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Pv={class:"d-flex justify-content-center mb-3"},Ov={alt:"",width:"100",height:"100"},Av=s("h1",{class:"text-body-emphasis"},"Стикеры",-1),Mv=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете переслать любой стикер в бота (от лица администратора) и затем этот стикер использовать для взаимодействия с пользователем. ",-1),jv={class:"d-inline-flex gap-2 mb-5"},qv=["disabled"],zv=s("a",{href:"https://telegra.ph/Dobavlenie-stikera-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Rv={key:0,class:"col-12 mb-2"},Uv={class:"form-check"},Vv=s("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),Yv={key:1,class:"col-12 mb-2"},Iv={key:2,class:"col-12 mb-2"},Bv={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},xv={class:"d-flex justify-content-center mb-3"},Nv={alt:"",width:"100",height:"100"},Ev=s("h1",{class:"text-body-emphasis"},"Аудио",-1),Qv=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[w(" Вы можете добавить к одной странице от "),s("b",null,"1"),w(" до "),s("b",null,"10"),w(" аудио. Музыка (от 2х) будет собрана в группу и показана под текстовым содержимым страницы. Если вы хотите использовать "),s("b",{class:"text-danger"},"голосовое"),w(", то можно использовать максимум "),s("b",{class:"text-danger"},"одну запись"),w(". Или же, вы можете конвертировать её в mp3 и залить как музыкальный файл в бота. ")],-1),Lv={class:"d-inline-flex gap-2 mb-5"},Hv=["disabled"],Wv=s("a",{href:"https://telegra.ph/Dobavlenie-audio-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Kv={key:0,class:"col-12 mb-2"},Xv={class:"form-check"},Gv=s("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),Zv={key:1,class:"col-12 mb-2"},Jv={key:2,class:"col-12 mb-2"},eb={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},tb={class:"d-flex justify-content-center mb-3"},sb={alt:"",width:"100",height:"100"},nb=s("h1",{class:"text-body-emphasis"},"Документы",-1),ob=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[w(" Вы можете добавить к одной странице от "),s("b",null,"1"),w(" до "),s("b",null,"10"),w(" документов. Документы (от 2х) будут собраны в группу и показана под текстовым содержимым страницы. В качестве файлов вы можете использовать текстовые документы, презентации, файлы-pdf, изображения в оригинальном размере. ")],-1),ab={class:"d-inline-flex gap-2 mb-5"},lb=["disabled"],ib=s("a",{href:"https://telegra.ph/Dobavlenie-dokumenta-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),rb={class:"col-12 mb-2"},db={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},ub={class:"d-flex justify-content-center mb-3"},cb={alt:"",width:"100",height:"100"},mb=s("h1",{class:"text-body-emphasis"},"Связь со страницей",-1),pb=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете привязать вызов другой страницы непосредственно после вызова текущей. Это позволит выводить контент по цепочке для пользователя. ",-1),hb={key:0,class:"my-3 text-success font-bold"},_b={class:"d-inline-flex gap-2 mb-5"},fb={key:1,"data-bs-toggle":"modal","data-bs-target":"#page-list-modal",class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"},vb=s("a",{href:"https://telegra.ph/Svyazyvanie-so-stranicej-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),bb=s("h6",{class:"mb-3"},"Конструктор цепочек",-1),gb={class:"d-flex justify-content-center align-items-center flex-wrap"},yb=s("span",{class:"px-2"},"Текущая страница",-1),$b=s("i",{class:"fa-solid fa-arrow-right"},null,-1),kb={class:"d-flex justify-content-center align-items-center px-3 py-2"},wb=["onClick"],Cb={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},Fb={key:0,class:"fa-solid fa-arrow-right ml-2"},Tb={key:0,class:"fa-solid fa-arrow-right"},Db=s("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#page-list-modal",class:"btn btn-outline-secondary position-relative rounded-5 ml-5"},[s("i",{class:"fa-solid fa-plus"})],-1),Sb={key:0,class:"col-12 mb-2"},Pb=s("div",{class:"alert alert-info",role:"alert"}," Если в вашем боте нет каких-то предустановленных скриптов вы можете найти их в глобальном магазине скриптов ",-1),Ob={class:"form-check"},Ab=s("label",{class:"form-check-label",for:"need-show-global-slug-list"}," Добавить скрипты из глобального магазина? ",-1),Mb={key:1,class:"col-12 mb-2"},jb={class:"form-check"},qb=s("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),zb={key:2,class:"col-12 mb-2"},Rb={key:0,class:"alert alert-success d-flex justify-content-between align-items-center",role:"alert"},Ub={key:3,class:"col-12 mb-2"},Vb={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Yb={class:"d-flex justify-content-center mb-3"},Ib={alt:"",width:"100",height:"100"},Bb=s("h1",{class:"text-body-emphasis"},"Скрипты",-1),xb=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Скрипты содержат основной функционал системы. Вы можете к каждой странице привязать один скрипт, который будет вызван после вывода основного содержимого страницы. ",-1),Nb={class:"d-inline-flex gap-2 mb-5"},Eb=["disabled"],Qb=s("a",{href:"https://telegra.ph/Svyazyvanie-so-skriptom-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Lb={key:0,class:"col-12 mb-2"},Hb={class:"form-check"},Wb=s("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),Kb={key:1,class:"col-12 mb-2"},Xb={key:0},Gb={key:2,class:"col-12 mb-2"},Zb={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Jb={class:"d-flex justify-content-center mb-3"},eg={alt:"",width:"100",height:"100"},tg=s("h1",{class:"text-body-emphasis"},"Диалоги",-1),sg=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Диалоги страницы - это инструмент запроса данных от пользователя. Вы можете привязать начало диалога к странице, а сам диалог будет вызван по цепочке. ",-1),ng={class:"d-inline-flex gap-2 mb-5"},og=["disabled"],ag=s("a",{href:"https://telegra.ph/Dobavlenie-dialoga-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),lg={key:0,class:"col-12 mb-2"},ig={class:"form-check"},rg=s("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),dg={key:1,class:"col-12 mb-2"},ug={key:2,class:"col-12 mb-2"},cg={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},mg={class:"d-flex justify-content-center mb-3"},pg={alt:"",width:"100",height:"100"},hg=s("h1",{class:"text-body-emphasis"},"Правила отображения страницы",-1),_g=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете создать правила, согласно которым будет отображена та или иная страница. Вы можете перенаправить пользователя с одной страницы на другую, в случае если ваше условие не выполнено. ",-1),fg={class:"d-inline-flex gap-2 mb-5"},vg=["disabled"],bg=s("a",{href:"https://telegra.ph/Pravila-na-stranice-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),gg=s("div",{class:"row"},[s("div",{class:"col-12"},[s("div",{class:"alert alert-info",role:"alert"},[s("h6",null,"Страница поддерживает комбинации клавиш:"),s("ul",{class:"mb-0 mr-0 p-0"},[s("li",null,[s("strong",null,"Ctrl+S"),w(" - открыть\\закрыть окно сохранения")]),s("li",null,[s("strong",null,"Ctrl+пробел"),w(" - открыть\\закрыть список страниц")]),s("li",null,[s("strong",null,"Ctrl+backspace"),w(" - очистить страницу\\новая страница")]),s("li",null,[s("strong",null,"Ctrl+стрелка вправо"),w(" - переключение между вкладка вперед")]),s("li",null,[s("strong",null,"Ctrl+стрелка влево"),w(" - переключение между вкладка назад")])])])])],-1),yg={class:"modal fade",id:"save-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$g={class:"modal-dialog"},kg={class:"modal-content"},wg=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"exampleModalLabel"},"Сохранение страницы"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Cg={class:"modal-body"},Fg={key:0,class:"row"},Tg={class:"col-12 mb-2"},Dg={class:"d-flex justify-between"},Sg=["href"],Pg={class:"col-12 mb-2"},Og=s("h6",null,"На странице выбраны следующие разделы",-1),Ag={class:"mini-pics text-primary"},Mg=s("i",{class:"fa-regular fa-images"},null,-1),jg=[Mg],qg=s("i",{class:"fa-regular fa-note-sticky"},null,-1),zg=[qg],Rg=s("i",{class:"fa-solid fa-photo-film"},null,-1),Ug=[Rg],Vg=s("i",{class:"fa-regular fa-file-audio"},null,-1),Yg=[Vg],Ig=s("i",{class:"fa-regular fa-file-word"},null,-1),Bg=[Ig],xg=s("i",{class:"fa-solid fa-link"},null,-1),Ng=[xg],Eg=s("i",{class:"fa-solid fa-scroll"},null,-1),Qg=[Eg],Lg=s("i",{class:"fa-regular fa-comment-dots"},null,-1),Hg=[Lg],Wg=s("i",{class:"fa-solid fa-scale-balanced"},null,-1),Kg=[Wg],Xg=s("i",{class:"fa-regular fa-keyboard"},null,-1),Gg=[Xg],Zg=s("i",{class:"fa-solid fa-ellipsis"},null,-1),Jg=[Zg],e1={key:0,class:"col-12 mb-2"},t1={class:"form-check"},s1=s("label",{class:"form-check-label",for:"need-show-qr-and-link"}," Показать ссылку на страницу и QR-код ",-1),n1={key:1,class:"col-12 mb-2"},o1={class:"d-flex justify-content-center"},a1={style:{width:"200px",height:"200px"}},l1={class:"col-12 mb-2"},i1={class:"form-label",id:"bot-domain"},r1=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),d1=s("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять Вас. ",-1),u1=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),c1={class:"col-12"},m1={class:"form-check"},p1=s("label",{class:"form-check-label",for:"is-external"}," Внешнее управление страницей ",-1),h1={key:0,class:"alert alert-danger",role:"alert"},_1={key:0,class:"mb-0"},f1=s("strong",null,'"Информация о боте"',-1),v1=s("strong",null,"Другие настройки",-1),b1=s("strong",null,'"Ссылка на внешний сервис обработки данных"',-1),g1={class:"col-12"},y1={class:"form-check"},$1=s("label",{class:"form-check-label",for:"need-stay-after-save"}," Остаться на текущей странице после сохранения ",-1),k1=s("div",{class:"col-12"},[s("button",{type:"submit",id:"submit-page",class:"btn btn-success w-100 p-3"},"Сохранить ")],-1),w1=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Не сохранять")],-1),C1={class:"modal fade",id:"page-list-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},F1={class:"modal-dialog"},T1={class:"modal-content"},D1={class:"modal-body"},S1={class:"offcanvas offcanvas-end w-25",tabindex:"-1",id:"offcanvas","data-bs-keyboard":"true","data-bs-scroll":"true","data-bs-backdrop":"true"},P1=s("div",{class:"offcanvas-header"},[s("h6",{class:"offcanvas-title d-none d-sm-block",id:"offcanvas"},"Ваши страницы (кнопки)"),s("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),O1={class:"offcanvas-body"},A1={class:"row"},M1={class:"col-12"},j1={data(){return{tab:0,links:[],saveModal:null,pageModal:null,page:null,need_show_qr_and_link:!1,need_stay_after_save:!0,need_show_global_slug_list:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,loaded_page_list:!0,load_slug_simple_list:!0,showMenu:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,need_rules:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,videos:[],images:[],audios:[],documents:[],sticker:null,reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_page_images:function(t,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_audios:function(t,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(t,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(t,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_video:function(t,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(t,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_rules:function(t,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_reply_menu:function(t,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(t,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(t,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(t,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(t){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{...xe(["getCurrentBot"]),qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},selectedLinkIds(){let t=this.links.map(e=>e.id);return this.page==null?t:this.page.id!=null?[this.page.id,...t]:t},hasParts(){return this.need_page_sticker||this.need_page_audios||this.need_page_documents||this.need_page_video||this.need_page_images||this.need_inline_menu||this.need_reply_menu||this.need_attach_page||this.need_attach_dialog||this.need_attach_slug||this.need_rules},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let t="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)t+="0";return t+=this.pageForm.id,"https://t.me/"+this.getCurrentBot.bot_domain+"?start="+btoa("004"+t)}},mounted(){this.page?this.preparePageForm(this.page):this.clearForm(),this.loadCurrentBot().then(()=>{this.saveModal=new bootstrap.Modal(document.getElementById("save-modal"),{})}),this.pageModal=new bootstrap.Offcanvas(document.getElementById("offcanvas"),{scroll:!0}),window.addEventListener("keydown",t=>{if(t.ctrlKey&&t.keyCode==8&&(t.preventDefault(),this.clearForm()),t.ctrlKey&&t.keyCode==32&&(t.preventDefault(),this.pageModal.toggle()),t.ctrlKey&&t.code=="KeyS"){t.preventDefault();const e=document.querySelector("#save-page-btn");e?e.click():this.$notify({title:"Конструктор страниц",text:"Вы еще не начали создавать страницу!",type:"warning"})}t.ctrlKey&&t.keyCode==39&&(t.preventDefault(),this.tab===10?this.tab=0:this.tab++),t.ctrlKey&&t.keyCode==37&&(t.preventDefault(),this.tab===0?this.tab=10:this.tab--)})},methods:{chainCollapseTest(t){return this.page==null?this.links.filter(e=>e.id==t.id).length>1:[this.page,...this.links].filter(e=>e.id==t.id).length>1},loadPageChains(){return this.$store.dispatch("loadPageChains",{dataObject:{start_page_id:this.page.id}}).then(t=>{this.links=t.data})},removeLink(t){this.links.splice(t,1)},loadSlugs(){this.load_slug_simple_list=!1,this.need_show_global_slug_list=!1,this.$nextTick(()=>{this.load_slug_simple_list=!0})},preparePageForm(t){this.links=[],this.page=t,this.photos=[],this.$nextTick(()=>{this.pageForm={id:t.id,slug_id:t.slug?t.slug.id:null,content:t.content,command:t.slug?t.slug.command:null,slug:t.slug?t.slug.slug:null,comment:t.slug?t.slug.comment:null,images:t.images||[],sticker:t.sticker||null,reply_keyboard_title:t.reply_keyboard_title||null,reply_keyboard_id:t.reply_keyboard_id||null,inline_keyboard_id:t.inline_keyboard_id||null,reply_keyboard:t.replyKeyboard||null,inline_keyboard:t.inlineKeyboard||null,next_page_id:t.next_page_id||null,next_bot_dialog_command_id:t.next_bot_dialog_command_id||null,next_bot_menu_slug_id:t.next_bot_menu_slug_id||null,is_external:t.is_external||!1,rules_if:t.rules_if||null,rules_else_page_id:t.rules_else_page_id||null,audios:t.audios||[],documents:t.documents||[],videos:t.videos||[],rules_if_message:t.rules_if_message||null,rules_else_message:t.rules_else_message||null},this.pageForm.id!=null&&this.pageForm.next_page_id!=null&&this.loadPageChains()})},copyToClipBoard(t){navigator.clipboard.writeText(t).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},associateDialog(t){this.pageForm.next_bot_dialog_command_id=t.id},associateSlug(t){this.pageForm.next_bot_menu_slug_id=t.id},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},clearLinks(){this.links=[],this.pageForm.next_page_id=null},attachPage(t){this.links.length==0&&(t.id!=this.pageForm.id?(this.$notify({title:"Конструктор страниц",text:"Вы успешно связали страницы!",type:"success"}),this.pageForm.next_page_id=t.id):this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})),(this.page==null?this.links.findIndex(n=>n.id===t.id)!=-1:this.links.findIndex(n=>n.id===t.id)!=-1||t.id===this.page.id)||this.links.push(t)},injectContent(t){this.pageForm.content?this.pageForm.content+=t.text:this.pageForm.content=t.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard:null,inline_keyboard:null,is_external:!1,videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,next_menu_slug:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_images=!1,this.need_page_video=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.need_page_sticker=!1,this.links=[],this.$nextTick(()=>{this.need_clean=!1})},openSaveModal(){(this.pageForm.comment||"").length===0&&(this.pageForm.comment=this.pageForm.command),this.saveModal.show()},submitPage(){let t=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const n=this.pageForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:t}).then(e=>{this.pageForm.id==null&&this.preparePageForm(e.data),this.links.length>0&&this.$store.dispatch("storePageChains",{dataObject:{start_page_id:e.data.id,links:this.links.map(n=>n.id)}}),this.need_stay_after_save||(this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()})),this.loaded_page_list=!1,this.$nextTick(()=>{this.loaded_page_list=!0}),this.saveModal.hide(),this.$emit("callback",e.data),this.$notify({title:"Конструктор ботов",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"}),this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id,needNewFirst:!0},page:localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0})}).catch(e=>{})},saveInlineKeyboard(t){this.pageForm.inline_keyboard=t},selectReplyKeyboard(t){this.pageForm.reply_keyboard=t,this.showReplyTemplateSelector=!1},selectInlineKeyboard(t){this.pageForm.inline_keyboard=t,this.showInlineTemplateSelector=!1},saveReplyKeyboard(t){this.pageForm.reply_keyboard=t},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t){this.photos.splice(t,1)},removeImage(t){this.pageForm.images.splice(t,1)},onChangePhotos(t){const e=t.target.files;for(let n=0;n<e.length;n++)this.photos.push(e[n])},onChange(t){this.pageForm.content=t},selectPhoto(t){this.pageForm.images||(this.pageForm.images=[]);let e=this.pageForm.images.indexOf(t.file_id);e!==-1?this.pageForm.images.splice(e,1):this.pageForm.images.push(t.file_id)},selectSticker(t){this.pageForm.sticker=t.file_id},selectVideo(t){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(t.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(t.file_id)},selectAudio(t){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(t.file_id);if(t.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[t.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(t.file_id)},selectDocument(t){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(t.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(t.file_id)},pageListCallback(t){this.$notify("Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы"),this.load=!0,this.preparePageForm(t),this.$nextTick(()=>{this.load=!1})}}},q1=Object.assign(j1,{__name:"Page",setup(t){return(e,n)=>{const a=_t("Popper"),o=hs("lazy");return r(),d(B,null,[e.pageForm.id?(r(),d("div",mh,[s("div",ph,[s("div",hh,[_h,w(" Вы в режиме редактирования страницы (кнопки) "),s("strong",fh,v(e.page.slug?e.page.slug.command:"Без названия"),1),w(", если хотите создать новую нажмите "),s("a",{href:"javascript:void(0)",class:"btn btn-primary ml-2",onClick:n[0]||(n[0]=(...l)=>e.clearForm&&e.clearForm(...l))},"Создать новую страницу")])])])):c("",!0),e.bot?(r(),d("form",{key:1,id:"page-construct",class:"py-3",onSubmit:n[43]||(n[43]=Fe((...l)=>e.openSaveModal&&e.openSaveModal(...l),["prevent"]))},[e.hasParts?(r(),d("div",vh,[s("div",bh,[gh,s("ul",yh,[s("li",{class:j(["mr-1",{active:e.need_page_images}]),title:"Изображения"},kh,2),s("li",{class:j(["mr-1",{active:e.need_page_sticker}]),title:"Стикеры"},Ch,2),s("li",{class:j(["mr-1",{active:e.need_page_video}]),title:"Видео"},Th,2),s("li",{class:j(["mr-1",{active:e.need_page_audios}]),title:"Аудио"},Sh,2),s("li",{class:j(["mr-1",{active:e.need_page_documents}]),title:"Документы"},Oh,2),s("li",{class:j(["mr-1",{active:e.need_attach_page}]),title:"Страницы"},Mh,2),s("li",{class:j(["mr-1",{active:e.need_attach_slug}]),title:"Скрипты"},qh,2),s("li",{class:j(["mr-1",{active:e.need_attach_dialog}]),title:"Диалоги"},Rh,2),s("li",{class:j(["mr-1",{active:e.need_rules}]),title:"Правила"},Vh,2),s("li",{class:j(["mr-1",{active:e.need_reply_menu}]),title:"Нижнее меню"},Ih,2),s("li",{title:"Текстовое меню",class:j({active:e.need_inline_menu})},xh,2)])])])):c("",!0),s("div",Nh,[s("div",Eh,[s("label",Qh,[E(a,null,{content:O(()=>[Hh]),default:O(()=>[Lh]),_:1}),w(" Команда "),Wh]),$(s("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":n[1]||(n[1]=l=>e.pageForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[Z,e.pageForm.command]])]),s("div",Kh,[s("div",Xh,[e.pageForm.id||e.need_clean?(r(),d("button",Gh,Jh)):c("",!0),e.pageForm.id||e.need_clean?(r(),d("button",{key:1,type:"button",onClick:n[2]||(n[2]=(...l)=>e.clearForm&&e.clearForm(...l)),title:"Очистить \\ Новая страница",class:"btn btn-outline-primary min-menu-btn"},t_)):c("",!0),s_])])]),$(s("div",n_,[s("div",o_,[s("label",a_,[s("div",null,[E(a,null,{content:O(()=>[i_]),default:O(()=>[l_]),_:1}),w(" Текстовое содержимое страницы "),r_]),E(Ha,{param:"content",onCallback:e.injectContent},null,8,["onCallback"])]),s("div",d_,[$(s("textarea",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=l=>e.pageForm.content=l),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"150px"}},null,512),[[Z,e.pageForm.content]]),s("label",u_,[w("Содержимое страницы "),e.pageForm.content?(r(),d("span",c_,v(e.pageForm.content.length)+"/4096 ",1)):c("",!0)])])]),s("div",m_,[s("ul",p_,[s("li",{class:"nav-item",onClick:n[4]||(n[4]=l=>e.tab=0)},[s("a",{class:j([{active:e.tab===0},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},f_,2)]),s("li",{class:"nav-item",onClick:n[5]||(n[5]=l=>e.tab=1)},[s("a",{class:j([{active:e.tab===1},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},g_,2)]),s("li",{class:"nav-item",onClick:n[6]||(n[6]=l=>e.tab=2)},[s("a",{class:j([{active:e.tab===2},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},k_,2)]),s("li",{class:"nav-item",onClick:n[7]||(n[7]=l=>e.tab=3)},[s("a",{class:j([{active:e.tab===3},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},F_,2)]),s("li",{class:"nav-item",onClick:n[8]||(n[8]=l=>e.tab=4)},[s("a",{class:j([{active:e.tab===4},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},S_,2)]),s("li",{class:"nav-item",onClick:n[9]||(n[9]=l=>e.tab=5)},[s("a",{class:j([{active:e.tab===5},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},A_,2)]),s("li",{class:"nav-item",onClick:n[10]||(n[10]=l=>e.tab=6)},[s("a",{class:j([{active:e.tab===6},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},q_,2)]),s("li",{class:"nav-item",onClick:n[11]||(n[11]=l=>e.tab=7)},[s("a",{class:j([{active:e.tab===7},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},U_,2)]),s("li",{class:"nav-item",onClick:n[12]||(n[12]=l=>e.tab=8)},[s("a",{class:j([{active:e.tab===8},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},I_,2)]),s("li",{class:"nav-item",onClick:n[13]||(n[13]=l=>e.tab=9)},[s("a",{class:j([{active:e.tab===9},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},N_,2)]),s("li",{class:"nav-item",onClick:n[14]||(n[14]=l=>e.tab=10)},[s("a",{class:j([{active:e.tab===10},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},L_,2)])])]),$(s("div",null,[e.need_reply_menu?(r(),d("div",H_,[s("div",W_,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[15]||(n[15]=l=>e.need_reply_menu=l),type:"checkbox",id:"need-reply-menu"},null,512),[[De,e.need_reply_menu]]),K_])])):c("",!0),e.need_reply_menu?(r(),d("div",X_,[s("div",G_,[s("div",Z_,[J_,s("button",{class:j(["btn",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:n[16]||(n[16]=l=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(r(),d("span",tf," Скрыть шаблоны меню")):(r(),d("span",ef," Открыть шаблоны меню"))],2)]),s("div",sf,[s("div",nf,[s("div",of,[s("label",af,[E(a,null,{content:O(()=>[rf]),default:O(()=>[lf]),_:1}),w(" Заголовок ")]),$(s("input",{type:"text",class:"form-control",placeholder:"Заголовок меню","aria-label":"Заголовок меню","onUpdate:modelValue":n[17]||(n[17]=l=>e.pageForm.reply_keyboard_title=l),maxlength:"255","aria-describedby":"bot-domain"},null,512),[[Z,e.pageForm.reply_keyboard_title]])])]),e.showReplyTemplateSelector?(r(),H(Cn,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),H(Bs,{key:1,type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",df,[s("div",uf,[s("div",cf,[$(s("img",mf,null,512),[[o,"../images/icon.png"]])]),pf,hf,s("div",_f,[s("button",{disabled:e.need_reply_menu,onClick:n[18]||(n[18]=l=>e.need_reply_menu=!0),class:j([{"btn-primary":!e.need_reply_menu,"btn-outline-secondary":e.need_reply_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,ff),vf])])]))],512),[[at,e.tab===0]]),$(s("div",null,[e.need_inline_menu?(r(),d("div",bf,[s("div",gf,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[19]||(n[19]=l=>e.need_inline_menu=l),type:"checkbox",id:"need-inline-menu"},null,512),[[De,e.need_inline_menu]]),yf])])):c("",!0),e.need_inline_menu?(r(),d("div",$f,[s("div",kf,[s("div",wf,[Cf,s("button",{class:j(["btn",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:n[20]||(n[20]=l=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(r(),d("span",Tf," Скрыть шаблоны меню")):(r(),d("span",Ff," Открыть шаблоны меню"))],2)]),s("div",Df,[e.showInlineTemplateSelector?(r(),H(Cn,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),H(Bs,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",Sf,[s("div",Pf,[s("div",Of,[$(s("img",Af,null,512),[[o,"../images/icon.png"]])]),Mf,jf,s("div",qf,[s("button",{disabled:e.need_inline_menu,onClick:n[21]||(n[21]=l=>e.need_inline_menu=!0),class:j([{"btn-primary":!e.need_inline_menu,"btn-outline-secondary":e.need_inline_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,zf),Rf])])]))],512),[[at,e.tab===1]]),$(s("div",null,[e.need_page_images?(r(),d("div",Uf,[s("div",Vf,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[22]||(n[22]=l=>e.need_page_images=l),type:"checkbox",id:"need-page-images"},null,512),[[De,e.need_page_images]]),Yf])])):c("",!0),e.need_page_images?(r(),d("div",If,[s("div",Bf,[xf,s("div",Nf,[s("label",Ef,[w(" + "),s("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:n[23]||(n[23]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)]),s("div",Qf,[e.photos.length>0?(r(),d("div",Lf,[(r(!0),d(B,null,oe(e.photos,(l,i)=>(r(),d("div",Hf,[$(s("img",null,null,512),[[o,e.getPhoto(l).imageUrl]]),s("div",Wf,[s("a",{onClick:u=>e.removePhoto(i)},"Удалить",8,Kf)])]))),256))])):c("",!0),e.pageForm.images.length>0?(r(),d("h6",Xf,"Ранее загруженные фотографии")):c("",!0),e.pageForm.images.length>0?(r(),d("div",Gf,[(r(!0),d(B,null,oe(e.pageForm.images,(l,i)=>(r(),d("div",Zf,[$(s("img",null,null,512),[[o,"/images-by-bot-id/"+e.bot.id+"/"+l]]),s("div",Jf,[s("a",{onClick:u=>e.removeImage(i)},"Удалить",8,ev)])]))),256))])):c("",!0)])])])])):(r(),d("div",tv,[s("div",sv,[s("div",nv,[$(s("img",ov,null,512),[[o,"../images/icon.png"]])]),av,lv,s("div",iv,[s("button",{disabled:e.need_page_images,onClick:n[24]||(n[24]=l=>e.need_page_images=!0),class:j([{"btn-primary":!e.need_page_images,"btn-outline-secondary":e.need_page_images},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,rv),dv])])]))],512),[[at,e.tab===2]]),$(s("div",null,[e.need_page_video?(r(),d("div",uv,[s("div",cv,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[25]||(n[25]=l=>e.need_page_video=l),type:"checkbox",id:"need-page-video"},null,512),[[De,e.need_page_video]]),mv])])):c("",!0),e.need_page_video?(r(),d("div",pv,[E(gt,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):(r(),d("div",hv,[s("div",_v,[s("div",fv,[$(s("img",vv,null,512),[[o,"../images/icon.png"]])]),bv,gv,s("div",yv,[s("button",{disabled:e.need_page_video,onClick:n[26]||(n[26]=l=>e.need_page_video=!0),class:j([{"btn-primary":!e.need_page_video,"btn-outline-secondary":e.need_page_video},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,$v),kv])])]))],512),[[at,e.tab===3]]),$(s("div",null,[e.need_page_sticker?(r(),d("div",wv,[s("div",Cv,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[27]||(n[27]=l=>e.need_page_sticker=l),type:"checkbox",id:"need-page-sticker"},null,512),[[De,e.need_page_sticker]]),Fv])])):c("",!0),e.need_page_sticker?(r(),d("div",Tv,[E(gt,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):(r(),d("div",Dv,[s("div",Sv,[s("div",Pv,[$(s("img",Ov,null,512),[[o,"../images/icon.png"]])]),Av,Mv,s("div",jv,[s("button",{disabled:e.need_page_sticker,onClick:n[28]||(n[28]=l=>e.need_page_sticker=!0),class:j([{"btn-primary":!e.need_page_sticker,"btn-outline-secondary":e.need_page_sticker},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,qv),zv])])]))],512),[[at,e.tab===4]]),$(s("div",null,[e.need_page_audios?(r(),d("div",Rv,[s("div",Uv,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[29]||(n[29]=l=>e.need_page_audios=l),type:"checkbox",id:"need-page-audio"},null,512),[[De,e.need_page_audios]]),Vv])])):c("",!0),e.need_page_audios?(r(),d("div",Yv,[E(gt,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):(r(),d("div",Iv,[s("div",Bv,[s("div",xv,[$(s("img",Nv,null,512),[[o,"../images/icon.png"]])]),Ev,Qv,s("div",Lv,[s("button",{disabled:e.need_page_audios,onClick:n[30]||(n[30]=l=>e.need_page_audios=!0),class:j([{"btn-primary":!e.need_page_audios,"btn-outline-secondary":e.need_page_audios},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Hv),Wv])])]))],512),[[at,e.tab===5]]),$(s("div",null,[e.need_page_documents?(r(),d("div",Kv,[s("div",Xv,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[31]||(n[31]=l=>e.need_page_documents=l),type:"checkbox",id:"need-page-document"},null,512),[[De,e.need_page_documents]]),Gv])])):c("",!0),e.need_page_documents?(r(),d("div",Zv,[E(gt,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):(r(),d("div",Jv,[s("div",eb,[s("div",tb,[$(s("img",sb,null,512),[[o,"../images/icon.png"]])]),nb,ob,s("div",ab,[s("button",{disabled:e.need_page_documents,onClick:n[32]||(n[32]=l=>e.need_page_documents=!0),class:j([{"btn-primary":!e.need_page_documents,"btn-outline-secondary":e.need_page_documents},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,lb),ib])])]))],512),[[at,e.tab===6]]),$(s("div",null,[s("div",rb,[s("div",db,[s("div",ub,[$(s("img",cb,null,512),[[o,"../images/icon.png"]])]),mb,pb,e.pageForm.next_page_id?(r(),d("p",hb,"Связано со страницей #"+v(e.pageForm.next_page_id),1)):c("",!0),s("div",_b,[e.pageForm.next_page_id?(r(),d("button",{key:0,class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-danger",type:"button",onClick:n[33]||(n[33]=(...l)=>e.clearLinks&&e.clearLinks(...l))},"Очистить ")):(r(),d("button",fb," Связать ")),vb]),bb,s("div",gb,[yb,$b,(r(!0),d(B,null,oe(e.links,(l,i)=>(r(),d("div",kb,[s("button",{type:"button",onClick:u=>e.removeLink(i),class:j([{"btn-danger":e.chainCollapseTest(l)},"btn btn-primary position-relative rounded-5"])},[w(v(l.slug.command||"-")+" ",1),s("span",Cb," #"+v(l.id),1)],10,wb),i<e.links.length-1?(r(),d("i",Fb)):c("",!0)]))),256)),e.links.length>0?(r(),d("i",Tb)):c("",!0),Db])])])],512),[[at,e.tab===7]]),$(s("div",null,[e.need_attach_slug?(r(),d("div",Sb,[Pb,s("div",Ob,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[34]||(n[34]=l=>e.need_show_global_slug_list=l),type:"checkbox",id:"need-show-global-slug-list"},null,512),[[De,e.need_show_global_slug_list]]),Ab]),e.bot&&e.need_show_global_slug_list?(r(),H(Uo,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),e.need_attach_slug?(r(),d("div",Mb,[s("div",jb,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[35]||(n[35]=l=>e.need_attach_slug=l),type:"checkbox",id:"need-slug-attach"},null,512),[[De,e.need_attach_slug]]),qb])])):c("",!0),e.need_attach_slug?(r(),d("div",zb,[e.pageForm.next_bot_menu_slug_id?(r(),d("div",Rb,[w(" Связано со скриптом #"+v(e.pageForm.next_bot_menu_slug_id)+" ",1),s("a",{class:"btn btn-link text-danger",onClick:n[36]||(n[36]=l=>e.pageForm.next_bot_menu_slug_id=null)},"Очистить")])):c("",!0),e.bot&&e.load_slug_simple_list?(r(),H(Yd,{key:1,global:!0,selected:[e.pageForm.next_bot_menu_slug_id],onCallback:e.associateSlug,bot:e.bot},null,8,["selected","onCallback","bot"])):c("",!0)])):(r(),d("div",Ub,[s("div",Vb,[s("div",Yb,[$(s("img",Ib,null,512),[[o,"../images/icon.png"]])]),Bb,xb,s("div",Nb,[s("button",{disabled:e.need_attach_slug,onClick:n[37]||(n[37]=l=>e.need_attach_slug=!0),class:j([{"btn-primary":!e.need_attach_slug,"btn-outline-secondary":e.need_attach_slug},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Eb),Qb])])]))],512),[[at,e.tab===8]]),$(s("div",null,[e.need_attach_dialog?(r(),d("div",Lb,[s("div",Hb,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[38]||(n[38]=l=>e.need_attach_dialog=l),type:"checkbox",id:"need-dialog-attach"},null,512),[[De,e.need_attach_dialog]]),Wb])])):c("",!0),e.need_attach_dialog?(r(),d("div",Kb,[e.pageForm.next_bot_dialog_command_id?(r(),d("p",Xb,[w("Связано с диалогом #"+v(e.pageForm.next_bot_dialog_command_id)+" ",1),s("a",{class:"btn btn-link",onClick:n[39]||(n[39]=l=>e.pageForm.next_bot_dialog_command_id=null)},"Очистить")])):c("",!0),e.bot?(r(),H(Yo,{key:1,onSelectDialog:e.associateDialog,bot:e.bot},null,8,["onSelectDialog","bot"])):c("",!0)])):(r(),d("div",Gb,[s("div",Zb,[s("div",Jb,[$(s("img",eg,null,512),[[o,"../images/icon.png"]])]),tg,sg,s("div",ng,[s("button",{disabled:e.need_attach_dialog,onClick:n[40]||(n[40]=l=>e.need_attach_dialog=!0),class:j([{"btn-primary":!e.need_attach_dialog,"btn-outline-secondary":e.need_attach_dialog},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,og),ag])])]))],512),[[at,e.tab===9]]),$(s("div",null,[e.need_rules?(r(),d("div",lg,[s("div",ig,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[41]||(n[41]=l=>e.need_rules=l),type:"checkbox",id:"need-rules"},null,512),[[De,e.need_rules]]),rg])])):c("",!0),e.need_rules?(r(),d("div",dg,[E(ch,{bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])])):(r(),d("div",ug,[s("div",cg,[s("div",mg,[$(s("img",pg,null,512),[[o,"../images/icon.png"]])]),hg,_g,s("div",fg,[s("button",{disabled:e.need_rules,onClick:n[42]||(n[42]=l=>e.need_rules=!0),class:j([{"btn-primary":!e.need_rules,"btn-outline-secondary":e.need_rules},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,vg),bg])])]))],512),[[at,e.tab===10]])],512),[[at,!e.pageForm.is_external]])],32)):c("",!0),gg,s("div",yg,[s("div",$g,[s("div",kg,[wg,s("div",Cg,[e.bot?(r(),d("div",Fg,[s("div",Tg,[s("h6",Dg,[s("span",null,[w("Вы создаете страницу для "),s("a",{href:"https://t.me/"+e.bot.bot_domain,target:"_blank"},v(e.bot.bot_domain),9,Sg)])])])])):c("",!0),s("form",{onSubmit:n[49]||(n[49]=Fe((...l)=>e.submitPage&&e.submitPage(...l),["prevent"])),class:"row"},[s("div",Pg,[Og,s("ul",Ag,[s("li",{class:j({active:e.need_page_images})},jg,2),s("li",{class:j({active:e.need_page_sticker})},zg,2),s("li",{class:j({active:e.need_page_video})},Ug,2),s("li",{class:j({active:e.need_page_audios})},Yg,2),s("li",{class:j({active:e.need_page_documents})},Bg,2),s("li",{class:j({active:e.need_attach_page})},Ng,2),s("li",{class:j({active:e.need_attach_slug})},Qg,2),s("li",{class:j({active:e.need_attach_dialog})},Hg,2),s("li",{class:j({active:e.need_rules})},Kg,2),s("li",{class:j({active:e.need_reply_menu})},Gg,2),s("li",{class:j({active:e.need_inline_menu})},Jg,2)])]),e.pageForm.id?(r(),d("div",e1,[s("div",t1,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[44]||(n[44]=l=>e.need_show_qr_and_link=l),type:"checkbox",id:"need-show-qr-and-link"},null,512),[[De,e.need_show_qr_and_link]]),s1])])):c("",!0),e.pageForm.id&&e.need_show_qr_and_link?(r(),d("div",n1,[s("p",null,[w("Ссылка на текущую страницу: "),s("span",{class:"bg-secondary font-bold cursor-pointer",onClick:n[45]||(n[45]=l=>e.copyToClipBoard(e.pageLink))},v(e.pageLink),1)]),s("div",o1,[$(s("img",a1,null,512),[[o,e.qr]])])])):c("",!0),s("div",l1,[s("label",i1,[E(a,null,{content:O(()=>[d1]),default:O(()=>[r1]),_:1}),w(" Описание страницы "),u1]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":n[46]||(n[46]=l=>e.pageForm.comment=l),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[Z,e.pageForm.comment]])]),s("div",c1,[s("div",m1,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[47]||(n[47]=l=>e.pageForm.is_external=l),type:"checkbox",id:"is-external"},null,512),[[De,e.pageForm.is_external]]),p1]),e.pageForm.is_external?(r(),d("div",h1,[w(" Обработка ссылок передана на внешний адрес, указанный в настройках бота! Все запросы по данной кнопке будут отправлены на указанный URL-адрес: "),s("strong",null,v(e.bot.callback_link||"не указано")+".",1),e.bot.callback_link?c("",!0):(r(),d("p",_1,[w("Внешня ссылка не установлена! Перейдите в раздел "),f1,w(", затем "),v1,w(" и установите ссылку для внешнего управления в поле "),b1,w("!")]))])):c("",!0)]),s("div",g1,[s("div",y1,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[48]||(n[48]=l=>e.need_stay_after_save=l),type:"checkbox",id:"need-stay-after-save"},null,512),[[De,e.need_stay_after_save]]),$1])]),k1],32)]),w1])])]),s("div",C1,[s("div",F1,[s("div",T1,[s("div",D1,[E(wn,{current:e.pageForm.id,selected:e.selectedLinkIds,onCallback:e.attachPage,editor:!1},null,8,["current","selected","onCallback"])])])])]),s("div",S1,[P1,s("div",O1,[s("div",A1,[s("div",M1,[e.loaded_page_list?(r(),H(wn,{key:0,editor:!0,current:e.page,onCallback:e.pageListCallback},null,8,["current","onCallback"])):c("",!0)])])])])],64)}}}),z1={props:["bot","item"],data(){return{sectionForm:{section:null},categoryForm:{label:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]}}},computed:{...xe(["getProductCategories"]),filteredCategories(){return this.productCategories.length===0?this.categories:this.categories.filter(t=>this.productCategories.indexOf(t.value)===-1)}},mounted(){this.loadProductCategories(),this.item&&this.$nextTick(()=>{this.productForm={id:this.item.id||null,article:this.item.article||null,vk_product_id:this.item.vk_product_id||null,title:this.item.title||null,description:this.item.description||null,images:this.item.images||null,type:this.item.type||1,old_price:this.item.old_price||null,current_price:this.item.current_price||null,variants:this.item.variants||null,in_stop_list_at:this.item.in_stop_list_at||null,bot_id:this.item.bot_id||null,options:this.item.options||null,reviews:this.item.reviews||null},this.options=[],this.item.categories.forEach(t=>{this.productCategories.push(t.id)})})},methods:{prepareCategoryName(t){let e=this.categories.find(n=>n.value===t);return console.log(e),e?e.label:t},addCategory(){const t=this.categoryForm.label;this.productCategories.push(t),this.categoryForm.label=null},selectCategory(t){this.productCategories.push(t.value)},submit(){let t=new FormData;if(Object.keys(this.productForm).forEach(e=>{const n=this.productForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.removed_options.length>0&&t.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&t.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:t}).then(e=>{this.load=!0,this.$notify({title:"Конструктор ботов",text:"Продукт успешно сохранен!",type:"success"}),this.clearForm(),this.$emit("refresh")}).catch(e=>{})},onChangePhotos(t){const e=t.target.files;for(let n=0;n<e.length;n++)this.photos.push(e[n])},loadProductCategories(){this.$store.dispatch("loadProductCategories",{dataObject:{bot_id:this.bot.id}}).then(()=>{this.getProductCategories.forEach(e=>{this.categories.push({value:e.id,label:e.title})})})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removeSection(t){this.sections.splice(t,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeProductCategory(t){this.productCategories.splice(t,1)},removeVariant(t){this.productForm.variants.splice(t,1)},removeOption(t){this.productForm.options[t].id&&this.removed_options.push(this.productForm.options[t].id),this.productForm.options.splice(t,1)},removeImage(t){this.productForm.images.splice(t,1)},removePhoto(t){this.photos.splice(t,1)},clearForm(){const t={article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=t}}},R1={class:"nav nav-tabs"},U1={class:"nav-item"},V1={class:"nav-item"},Y1={class:"nav-item"},I1={key:0},B1={class:"col-md-8 d-flex align-items-center"},x1={class:"form-check"},N1=s("label",{class:"form-check-label",for:"in-stop-list"}," Товар находится в стоп-листе ",-1),E1={class:"col-md-4 d-flex justify-content-end"},Q1={class:"col-md-12 mb-3"},L1=["onClick"],H1={class:"dropdown"},W1=s("button",{type:"button",class:"btn btn-outline-info w-100","data-bs-toggle":"dropdown","data-bs-display":"static","aria-expanded":"false"},[s("p",{class:"mb-0"},"Выберите категорию")],-1),K1={class:"dropdown-menu w-100",style:{"overflow-y":"scroll",height:"300px"}},X1={class:"p-3"},G1=s("label",{for:"exampleDropdownFormEmail1",class:"form-label"},"Новая категория",-1),Z1={class:"p-3"},J1=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),ey=["onClick"],ty={class:"col-md-6"},sy={class:"form-floating mb-3"},ny=s("label",{for:"article"},"Артикул товара",-1),oy={class:"col-md-6"},ay={class:"form-floating mb-3"},ly=s("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),iy={class:"col-md-6"},ry={class:"form-floating mb-3"},dy=s("label",{for:"title"},"Названи товара",-1),uy={class:"col-md-6"},cy={class:"form-floating mb-3"},my=["value"],py=s("label",{for:"type"},"Тип товара",-1),hy={class:"col-md-12"},_y={class:"form-floating mb-3"},fy=s("label",{for:"description"},"Описание товара",-1),vy={class:"col-md-6"},by={class:"form-floating mb-3"},gy=s("label",{for:"current-price"},"Актуальная цена",-1),yy={class:"col-md-6"},$y={class:"form-floating mb-3"},ky=s("label",{for:"old-price"},"Старая цена",-1),wy={class:"col-md-12 mb-3"},Cy={class:"card"},Fy={class:"card-header"},Ty={key:0},Dy={class:"card-body"},Sy={class:"row"},Py={class:"col-12 mb-3"},Oy={class:"col-md-6 mb-3"},Ay={class:"card w-100"},My={class:"card-body"},jy={class:"form-floating mb-3"},qy=["onUpdate:modelValue","id"],zy=["for"],Ry={class:"form-floating mb-3"},Uy=["onUpdate:modelValue","id"],Vy=["for"],Yy={class:"card-footer"},Iy=["onClick"],By=s("i",{class:"fa-solid fa-trash-can"},null,-1),xy=[By],Ny={class:"col-md-12 mb-3"},Ey={class:"card"},Qy=s("div",{class:"card-header"},[s("h6",null,"Характеристики товара")],-1),Ly={class:"card-body"},Hy={class:"row mb-3"},Wy={class:"col-12"},Ky=s("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"},"Добавить секцию ",-1),Xy={class:"badge bg-info mr-1"},Gy=["onClick"],Zy=s("i",{class:"fa-solid fa-xmark"},null,-1),Jy=[Zy],e0={class:"row"},t0={class:"col-md-4 mb-3"},s0={class:"card w-100"},n0={class:"card-body"},o0={class:"form-floating mb-3"},a0=["onUpdate:modelValue","id"],l0=["for"],i0={class:"form-floating mb-3"},r0=["onUpdate:modelValue","id"],d0=["for"],u0={class:"form-floating mb-3"},c0=["onUpdate:modelValue","id"],m0=s("option",{value:null},"Без секции",-1),p0=["value"],h0=["for"],_0={class:"card-footer"},f0=["onClick"],v0=s("i",{class:"fa-solid fa-trash-can"},null,-1),b0=[v0],g0={class:"row"},y0={class:"col-12"},$0={class:"col-md-12 mb-3"},k0=s("h6",null,"Фотографии товара",-1),w0={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},C0={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},F0=s("span",null,"+",-1),T0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},D0={class:"remove"},S0=["onClick"],P0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},O0={class:"remove"},A0=["onClick"],M0=s("div",{class:"col-12"},[s("button",{type:"submit",class:"btn btn-outline-primary w-100 p-3"},"Сохранить ")],-1),j0={key:1};function q0(t,e,n,a,o,l){const i=hs("lazy");return r(),d(B,null,[s("ul",R1,[s("li",U1,[s("a",{class:j(["nav-link",{active:o.tab===0}]),onClick:e[0]||(e[0]=u=>o.tab=0),"aria-current":"page",href:"#product-form-info"},"Информация о товаре",2)]),s("li",V1,[s("a",{class:j(["nav-link",{active:o.tab===1}]),onClick:e[1]||(e[1]=u=>o.tab=1),href:"#product-reviews"},"Комментарии",2)]),s("li",Y1,[s("a",{class:j(["nav-link",{active:o.tab===2}]),onClick:e[2]||(e[2]=u=>o.tab=2),href:"#product-reviews"},"Заказы",2)])]),o.tab===0?(r(),d("div",I1,[s("form",{onSubmit:e[19]||(e[19]=Fe((...u)=>l.submit&&l.submit(...u),["prevent"])),class:"row"},[s("div",B1,[s("div",x1,[$(s("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=u=>o.productForm.in_stop_list_at=u),type:"checkbox",value:"false",id:"in-stop-list"},null,512),[[De,o.productForm.in_stop_list_at]]),N1])]),s("div",E1,[s("a",{href:"#",class:"btn btn-link",onClick:e[4]||(e[4]=(...u)=>l.clearForm&&l.clearForm(...u))},"Новый товар")]),s("div",Q1,[(r(!0),d(B,null,oe(o.productCategories,(u,p)=>(r(),d("span",{class:"badge bg-info mr-1 mb-1 cursor-pointer",onClick:h=>l.removeProductCategory(p)},v(l.prepareCategoryName(u)),9,L1))),256)),s("div",H1,[W1,s("ul",K1,[s("div",X1,[G1,$(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=u=>o.categoryForm.label=u),id:"exampleDropdownFormEmail1",placeholder:"Название категории"},null,512),[[Z,o.categoryForm.label]])]),s("div",Z1,[s("button",{class:"btn btn-primary w-100",type:"button",onClick:e[6]||(e[6]=(...u)=>l.addCategory&&l.addCategory(...u))},"Добавить категорию ")]),J1,(r(!0),d(B,null,oe(l.filteredCategories,u=>(r(),d("li",null,[s("button",{class:"dropdown-item",type:"button",onClick:p=>l.selectCategory(u)},v(u.label),9,ey)]))),256))])])]),s("div",ty,[s("div",sy,[$(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=u=>o.productForm.article=u),class:"form-control",id:"article",placeholder:"name@example.com"},null,512),[[Z,o.productForm.article]]),ny])]),s("div",oy,[s("div",ay,[$(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=u=>o.productForm.vk_product_id=u),disabled:!0,class:"form-control",id:"vk-product-id",placeholder:"name@example.com"},null,512),[[Z,o.productForm.vk_product_id]]),ly])]),s("div",iy,[s("div",ry,[$(s("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>o.productForm.title=u),class:"form-control",id:"title",placeholder:"name@example.com"},null,512),[[Z,o.productForm.title]]),dy])]),s("div",uy,[s("div",cy,[$(s("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=u=>o.productForm.type=u),id:"type","aria-label":"Floating label select example"},[(r(!0),d(B,null,oe(o.types,(u,p)=>(r(),d("option",{value:u.value},v(u.title),9,my))),256))],512),[[Jt,o.productForm.type]]),py])]),s("div",hy,[s("div",_y,[$(s("textarea",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=u=>o.productForm.description=u),placeholder:"Leave a comment here",id:"description"},null,512),[[Z,o.productForm.description]]),fy])]),s("div",vy,[s("div",by,[$(s("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=u=>o.productForm.current_price=u),class:"form-control",id:"current-price",placeholder:"name@example.com"},null,512),[[Z,o.productForm.current_price]]),gy])]),s("div",yy,[s("div",$y,[$(s("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=u=>o.productForm.old_price=u),class:"form-control",id:"old-price",placeholder:"name@example.com"},null,512),[[Z,o.productForm.old_price]]),ky])]),s("div",wy,[s("div",Cy,[s("div",Fy,[s("h6",null,[w("Варианты товара "),o.productForm.variants?(r(),d("span",Ty,"("+v(o.productForm.variants.length)+")",1)):c("",!0)])]),s("div",Dy,[s("div",Sy,[s("div",Py,[s("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[14]||(e[14]=(...u)=>l.addVariant&&l.addVariant(...u))},"Добавить вариант ")]),(r(!0),d(B,null,oe(o.productForm.variants,(u,p)=>(r(),d("div",Oy,[s("div",Ay,[s("div",My,[s("div",jy,[$(s("input",{type:"text","onUpdate:modelValue":h=>o.productForm.variants[p].key=h,class:"form-control",id:"variant-key-"+p,placeholder:"name@example.com",required:""},null,8,qy),[[Z,o.productForm.variants[p].key]]),s("label",{for:"variant-key-"+p},"Ключ",8,zy)]),s("div",Ry,[$(s("input",{type:"text","onUpdate:modelValue":h=>o.productForm.variants[p].value=h,class:"form-control",id:"variant-value-"+p,placeholder:"name@example.com",required:""},null,8,Uy),[[Z,o.productForm.variants[p].value]]),s("label",{for:"variant-value-"+p},"Значение",8,Vy)])]),s("div",Yy,[s("button",{type:"button",class:"btn btn-outline-danger",onClick:h=>l.removeVariant(p)},xy,8,Iy)])])]))),256))])])])]),s("div",Ny,[s("div",Ey,[Qy,s("div",Ly,[s("div",Hy,[s("div",Wy,[s("form",{onSubmit:e[16]||(e[16]=Fe((...u)=>l.addSection&&l.addSection(...u),["prevent"])),class:"input-group mb-3"},[$(s("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=u=>o.sectionForm.section=u),class:"form-control border-info",placeholder:"Название секции","aria-label":"Recipient's username","aria-describedby":"button-addon2",required:""},null,512),[[Z,o.sectionForm.section]]),Ky],32),(r(!0),d(B,null,oe(o.sections,(u,p)=>(r(),d("span",Xy,[w(v(u)+" ",1),s("strong",{onClick:h=>l.removeSection(p)},Jy,8,Gy)]))),256))])]),s("div",e0,[(r(!0),d(B,null,oe(o.productForm.options,(u,p)=>(r(),d("div",t0,[s("div",s0,[s("div",n0,[s("div",o0,[$(s("input",{type:"text","onUpdate:modelValue":h=>o.productForm.options[p].title=h,class:"form-control",id:"option-title-"+p,placeholder:"name@example.com"},null,8,a0),[[Z,o.productForm.options[p].title]]),s("label",{for:"option-title-"+p},"Название характеристики",8,l0)]),s("div",i0,[$(s("input",{type:"text","onUpdate:modelValue":h=>o.productForm.options[p].value=h,class:"form-control",id:"option-value-"+p,placeholder:"name@example.com"},null,8,r0),[[Z,o.productForm.options[p].value]]),s("label",{for:"option-value-"+p},"Значение характеристики",8,d0)]),s("div",u0,[$(s("select",{class:"form-select","onUpdate:modelValue":h=>o.productForm.options[p].section=h,id:"option-section-"+p,"aria-label":"Floating label select example"},[m0,(r(!0),d(B,null,oe(o.sections,h=>(r(),d("option",{value:h},v(h),9,p0))),256))],8,c0),[[Jt,o.productForm.options[p].section]]),s("label",{for:"option-section-"+p},"Секция товара",8,h0)])]),s("div",_0,[s("button",{type:"button",class:"btn btn-outline-danger",onClick:h=>l.removeOption(p)},b0,8,f0)])])]))),256))]),s("div",g0,[s("div",y0,[s("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[17]||(e[17]=(...u)=>l.addOption&&l.addOption(...u))},"Добавить характеристику ")])])])])]),s("div",$0,[k0,s("div",w0,[s("label",C0,[F0,s("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[18]||(e[18]=(...u)=>l.onChangePhotos&&l.onChangePhotos(...u)),style:{display:"none"}},null,32)]),o.productForm.images?(r(!0),d(B,{key:0},oe(o.productForm.images,(u,p)=>(r(),d("div",T0,[$(s("img",null,null,512),[[i,u]]),s("div",D0,[s("a",{onClick:h=>l.removeImage(p)},"Удалить",8,S0)])]))),256)):c("",!0),o.photos.length>0?(r(!0),d(B,{key:1},oe(o.photos,(u,p)=>(r(),d("div",P0,[$(s("img",null,null,512),[[i,l.getPhoto(u).imageUrl]]),s("div",O0,[s("a",{onClick:h=>l.removePhoto(p)},"Удалить",8,A0)])]))),256)):c("",!0)])]),M0],32)])):c("",!0),o.tab===1?(r(),d("div",j0," Отзывы ")):c("",!0)],64)}const z0=Ut(z1,[["render",q0]]),R0={props:["item"],data(){return{bot:null}},methods:{preparedImgUrl(t){return t.toLocaleLowerCase().startsWith("https://")||t.toLocaleLowerCase().startsWith("http://")?t:"/images-by-bot-id/"+this.bot.id+"/"+t},removeProduct(){this.$store.dispatch("removeProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"})}).catch(t=>{})},duplicateProduct(){this.$store.dispatch("duplicateProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно продублирован!",type:"success"})}).catch(t=>{})}},mounted(){this.bot=this.getCurrentBot},computed:{...xe(["getCurrentBot"])}},U0={key:0,class:"card"},V0={class:"card-header"},Y0={class:"card-body"},I0=["id"],B0={class:"carousel-inner"},x0=["src"],N0=["data-bs-target"],E0=s("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),Q0=s("span",{class:"visually-hidden"},"Previous",-1),L0=[E0,Q0],H0=["data-bs-target"],W0=s("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),K0=s("span",{class:"visually-hidden"},"Next",-1),X0=[W0,K0],G0={class:"card-footer d-flex justify-content-between"},Z0=s("i",{class:"fa-regular fa-copy"},null,-1),J0=[Z0],e$=s("i",{class:"fa-solid fa-trash-can"},null,-1),t$=[e$];function s$(t,e,n,a,o,l){return o.bot?(r(),d("div",U0,[s("div",V0,[s("p",null,"#"+v(n.item.id),1)]),s("div",Y0,[s("p",null,v(n.item.title),1),s("div",{id:"image-slider-"+n.item.id,class:"carousel slide","data-bs-ride":"carousel"},[s("div",B0,[(r(!0),d(B,null,oe(n.item.images,(i,u)=>(r(),d("div",{class:j(["carousel-item",{active:u===0}]),style:{height:"300px"}},[s("img",{src:l.preparedImgUrl(i),class:"d-block w-100 object-fit-cover",alt:"..."},null,8,x0)],2))),256))]),s("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#image-slider-"+n.item.id,"data-bs-slide":"prev"},L0,8,N0),s("button",{class:"carousel-control-next",type:"button","data-bs-target":"#image-slider-"+n.item.id,"data-bs-slide":"next"},X0,8,H0)],8,I0)]),s("div",G0,[s("button",{title:"Дублировать товар",onClick:e[0]||(e[0]=(...i)=>l.duplicateProduct&&l.duplicateProduct(...i)),class:"btn btn-outline-info mr-1"},J0),s("button",{title:"Удалить товар",onClick:e[1]||(e[1]=(...i)=>l.removeProduct&&l.removeProduct(...i)),class:"btn btn-outline-danger"},t$)])])):c("",!0)}const n$=Ut(R0,[["render",s$]]),o$=s("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"}," Найти ",-1),a$={key:0},l$={class:"row"},i$={class:"col-4 mb-2"},r$={props:["bot"],data(){return{search:null,products:[],paginate:null}},computed:{...xe(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(t=>t.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadProducts()},methods:{selectProduct(t){this.$emit("select",t)},nextProducts(t){this.loadProducts(t)},loadProducts(t=0){return this.$store.dispatch("loadProducts",{dataObject:{bot_id:this.bot.id,search:this.search},page:t}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})}}},d$=Object.assign(r$,{__name:"ProductList",setup(t){return(e,n)=>(r(),d(B,null,[s("form",{class:"input-group mb-3",onSubmit:n[1]||(n[1]=Fe(a=>e.loadProducts(0),["prevent"]))},[$(s("input",{type:"text",class:"form-control border-info",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":n[0]||(n[0]=a=>e.search=a),"aria-describedby":"button-addon2",required:""},null,512),[[Z,e.search]]),o$],32),s("p",null,[w("Всего товаров: "),e.paginate?(r(),d("span",a$,v(e.paginate.meta.total||0),1)):c("",!0)]),s("div",l$,[(r(!0),d(B,null,oe(e.filteredProducts,(a,o)=>(r(),d("div",i$,[E(n$,{onClick:l=>e.selectProduct(a),item:a},null,8,["onClick","item"])]))),256))]),e.paginate?(r(),H(Je,{key:0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)],64))}}),u$={class:"card mb-2"},c$=s("div",{class:"card-header"},[s("h6",null,"Управление магазином")],-1),m$={class:"card-body"},p$={class:"row"},h$={class:"col-12"},_$={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},f$=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),v$=s("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),b$=s("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),g$=["disabled"],y$=s("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),$$={class:"row mb-3"},k$={class:"col-md-3"},w$=["href"],C$=Aa('<div class="col-md-3"><button class="btn btn-outline-info w-100">Экспорт в XLS</button></div><div class="col-md-3"><button class="btn btn-outline-info w-100">Импорт из XLS</button></div><div class="col-md-3"><button class="btn btn-outline-danger w-100">Удалить товары</button></div>',3),F$=s("div",{class:"row"},[s("div",{class:"col-md-3"},[s("button",{class:"btn btn-outline-info w-100"},"Экспортировать заказы")])],-1),T$={class:"card"},D$=s("div",{class:"card-header"},[s("h6",null,"Работа с товаром")],-1),S$={class:"card-body"},P$={class:"card mt-2"},O$={class:"card-body"},A$={data(){return{load:!1,tab:0,url:null,link:null,bot:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{...xe(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.botForm.vk_shop_link=this.bot.vk_shop_link||null,this.updateProducts()},methods:{updateShopLink(){this.load=!0,this.botForm.bot_id=this.bot.id,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(t=>{this.load=!1,this.updateProducts(),this.$notify({title:"Менеджер магазина",text:"Ссылка на источник в ВК обновлена"})}).catch(()=>{this.load=!1})},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},selectProduct(t){this.load=!0,this.$nextTick(()=>{this.selectedProduct=t,this.load=!1})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk",{dataObject:{bot_domain:this.getCurrentBot.bot_domain}}).then(t=>{this.link=t.data.url,this.load=!1,this.url=null}).catch(()=>{this.load=!1})}}},M$=Object.assign(A$,{__name:"Shop",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d(B,null,[s("div",u$,[c$,s("div",m$,[s("div",p$,[s("div",h$,[s("form",{onSubmit:n[1]||(n[1]=Fe((...o)=>e.updateShopLink&&e.updateShopLink(...o),["prevent"])),class:"mb-2"},[s("label",_$,[s("div",null,[E(a,null,{content:O(()=>[v$]),default:O(()=>[f$]),_:1}),w(" ВК-группа ")]),b$]),$(s("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":n[0]||(n[0]=o=>e.botForm.vk_shop_link=o),"aria-describedby":"vk_shop_link"},null,512),[[Z,e.botForm.vk_shop_link]]),s("button",{disabled:e.load,class:"btn btn-outline-primary mt-2 mb-2 w-100"},[y$,w(" Сохранить ")],8,g$)],32)])]),s("div",$$,[s("div",k$,[s("a",{target:"_blank",href:e.link,class:"btn btn-primary w-100"}," Обновить товар ",8,w$)]),C$]),F$])]),s("div",T$,[D$,s("div",S$,[e.bot&&!e.load?(r(),H(z0,{key:0,bot:e.bot,item:e.selectedProduct,onRefresh:e.refresh},null,8,["bot","item","onRefresh"])):c("",!0)])]),s("div",P$,[s("div",O$,[e.bot&&!e.load?(r(),H(d$,{key:0,bot:e.bot,onSelect:e.selectProduct},null,8,["bot","onSelect"])):c("",!0)])])],64)}}}),j$={props:["data"],data(){return{hasConnect:!1,bot:null,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null}}},computed:{...xe(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data?this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null}):this.amoForm.bot_id=this.bot.id||null},methods:{submitAmo(){let t=new FormData;Object.keys(this.amoForm).forEach(e=>{const n=this.amoForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),this.$store.dispatch("saveAmoCRM",{amoForm:t}).then(e=>{this.$notify("Данные CRM успешно сохранены")}).catch(e=>{})}}},q$=s("div",{class:"col-12"},[s("p",null,[s("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),w(" по шагам")])],-1),z$={class:"col-md-6 col-12 mb-2"},R$={class:"form-label",id:"client_id"},U$=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),V$=s("div",null,"ID интеграции",-1),Y$=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),I$={class:"col-md-6 col-12 mb-2"},B$={class:"form-label",id:"client_secret"},x$=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),N$=s("div",null,"Секрет интеграции",-1),E$=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Q$={class:"col-md-6 mb-2"},L$={class:"form-label",id:"auth_code"},H$=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),W$=s("div",null,"Полученный код авторизации",-1),K$=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),X$={class:"col-md-6 col-12 mb-2"},G$={class:"form-label",id:"subdomain2"},Z$=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),J$=s("div",null,"Ваш поддомен в системе AMO CRM",-1),ek=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),tk=s("div",{class:"col-md-12 col-12"},[s("button",{type:"submit",class:"btn btn-outline-primary p-3 w-100"},[s("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),w(" Сохранить настройку AMO ")])],-1);function sk(t,e,n,a,o,l){const i=_t("Popper");return r(),d("form",{onSubmit:e[4]||(e[4]=Fe((...u)=>l.submitAmo&&l.submitAmo(...u),["prevent"])),class:"row"},[q$,s("div",z$,[s("label",R$,[E(i,null,{content:O(()=>[V$]),default:O(()=>[U$]),_:1}),w(" client_id "),Y$]),$(s("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=u=>o.amoForm.client_id=u),"aria-describedby":"client_id"},null,512),[[Z,o.amoForm.client_id]])]),s("div",I$,[s("label",B$,[E(i,null,{content:O(()=>[N$]),default:O(()=>[x$]),_:1}),w(" client_secret "),E$]),$(s("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=u=>o.amoForm.client_secret=u),"aria-describedby":"client_secret"},null,512),[[Z,o.amoForm.client_secret]])]),s("div",Q$,[s("label",L$,[E(i,null,{content:O(()=>[W$]),default:O(()=>[H$]),_:1}),w(" auth_code "),K$]),$(s("textarea",{class:"form-control",placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=u=>o.amoForm.auth_code=u),"aria-describedby":"auth_code"},`
                                    `,512),[[Z,o.amoForm.auth_code]])]),s("div",X$,[s("label",G$,[E(i,null,{content:O(()=>[J$]),default:O(()=>[Z$]),_:1}),w(" subdomain "),ek]),$(s("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=u=>o.amoForm.subdomain=u),"aria-describedby":"subdomain"},null,512),[[Z,o.amoForm.subdomain]])]),tk],32)}const nk=Ut(j$,[["render",sk]]),ok={props:["data"],data(){return{load:!1,bot:null,yClientsForm:{login:null,password:null,partner_token:null,company:null}}},computed:{...xe(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data&&this.$nextTick(()=>{this.yClientsForm.login=this.data.login||null,this.yClientsForm.password=this.data.password||null,this.yClientsForm.partner_token=this.data.partner_token||null,this.yClientsForm.company=this.data.company||null})},methods:{submitYClients(){let t=new FormData;Object.keys(this.yClientsForm).forEach(e=>{const n=this.yClientsForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("saveYClients",{yClientsForm:t}).then(e=>{this.$notify({title:"Работа с YClients",text:"Данные YClients успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с YClients",text:"Ошибка сохранения данных",type:"error"})})}}},ak=s("h6",null,"Настройка YClients",-1),lk={class:"row"},ik={class:"col-md-12"},rk={class:"mb-2"},dk=s("label",{class:"form-label d-flex justify-content-between mt-2",for:"login"},[w(" Логин "),s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),uk={class:"mb-2"},ck=s("label",{class:"form-label d-flex justify-content-between mt-2",for:"password"},[w(" Пароль "),s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),mk={class:"mb-2"},pk=s("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[w(" Партнерский тоукен "),s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),hk={class:"mb-2"},_k=s("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[w(" ID компании, в которую записывать клиентов "),s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),fk=s("button",{class:"btn btn-success w-100 r mb-3 text-uppercase font-900"}," Сохранить ",-1);function vk(t,e,n,a,o,l){return r(),d(B,null,[ak,s("form",{onSubmit:e[4]||(e[4]=Fe((...i)=>l.submitYClients&&l.submitYClients(...i),["prevent"]))},[s("div",lk,[s("div",ik,[s("div",rk,[dk,$(s("input",{type:"text",id:"login",class:"form-control",placeholder:"Ваш логин","aria-label":"Ваш логин","onUpdate:modelValue":e[0]||(e[0]=i=>o.yClientsForm.login=i),"aria-describedby":"Ваш логин",required:""},null,512),[[Z,o.yClientsForm.login]])]),s("div",uk,[ck,$(s("input",{type:"text",id:"password",class:"form-control",placeholder:"Ваш пароль","aria-label":"Ваш пароль","onUpdate:modelValue":e[1]||(e[1]=i=>o.yClientsForm.password=i),"aria-describedby":"Ваш пароль",required:""},null,512),[[Z,o.yClientsForm.password]])]),s("div",mk,[pk,$(s("input",{type:"text",id:"partner_token",class:"form-control",placeholder:"Ваш партнерский тоукен","aria-label":"Ваш партнерский тоукен","onUpdate:modelValue":e[2]||(e[2]=i=>o.yClientsForm.partner_token=i),"aria-describedby":"Ваш партнерский тоукен",required:""},null,512),[[Z,o.yClientsForm.partner_token]])]),s("div",hk,[_k,$(s("input",{type:"number",id:"throttle",class:"form-control",placeholder:"ID компании","aria-label":"ID компании","onUpdate:modelValue":e[3]||(e[3]=i=>o.yClientsForm.company=i),"aria-describedby":"ID компании",required:""},null,512),[[Z,o.yClientsForm.company]])])])]),fk],32)],64)}const bk=Ut(ok,[["render",vk]]),gk={data(){return{load:!1,bot:null,fieldTypes:[{title:"Текст",value:0},{title:"Число",value:1},{title:"Логический",value:2},{title:"Дата и время",value:3}],fieldForm:{fields:[]}}},computed:{...xe(["getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.bot=this.getCurrentBot,this.$nextTick(()=>{this.fieldForm.fields=this.bot.field_settings||[]}),this.loadCurrentBotFields()})},methods:{loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{this.fieldForm.fields=t.data||[]})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},removeField(t){this.fieldForm.fields.splice(t,1)},submit(){let t=new FormData;Object.keys(this.fieldForm).forEach(e=>{const n=this.fieldForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeBotFields",{dataObject:t}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Поля успешно обновлены",type:"success"}),this.fieldForm.fields=[],this.fieldForm.fields=e.data}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка обновления полей",type:"error"})})},addField(){if(this.fieldForm.fields||(this.fieldForm.fields=[]),this.fieldForm.fields.length>0&&this.fieldForm.fields.findIndex(e=>e.key==null)!==-1){this.$notify({title:"Настраиваемые поля",text:"У вас есть пустые ключевые поля!",type:"error"});return}this.fieldForm.fields.push({key:null,type:0,label:null,description:null,required:!1,validate_pattern:null})}}},yk={class:"mb-2"},$k={class:"d-flex justify-content-between"},kk=s("h6",null,"Настройка полей пользователя бота",-1),wk=s("i",{class:"fa-solid fa-plus mr-2"},null,-1),Ck=s("p",null,[s("em",null,"Данные поля будут добавлены пользователю бота и будут автоматически учитываться в условиях страниц, скриптах (в формах заполнения данных), диалогах. Ключи должны быть уникальные для каждого бота. Если ключ дублируется, то будет использовано более позднее его значение. Если поле добавлено и сохранено, то удалить его уже нельзя, только скрыть. "),w(". "),s("br"),s("span",{class:"text-danger"},"*"),w(" - обязательное поле ")],-1),Fk={class:"table"},Tk=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"#"),s("th",{scope:"col"},[w("Ключ"),s("span",{class:"text-danger"},"*")]),s("th",{scope:"col"},[w("Подпись поля"),s("span",{class:"text-danger"},"*")]),s("th",{scope:"col"},[w("Тип поля"),s("span",{class:"text-danger"},"*")]),s("th",{scope:"col"},"Паттерн"),s("th",{scope:"col"},"Обязательный"),s("th",{scope:"col"},[w("Вопрос для анкеты"),s("span",{class:"text-danger"},"*")]),s("th",{scope:"col"})])],-1),Dk={scope:"row"},Sk={scope:"col"},Pk=["onUpdate:modelValue"],Ok={scope:"col"},Ak=["onUpdate:modelValue"],Mk={scope:"col"},jk=["onUpdate:modelValue"],qk=["value"],zk={scope:"col"},Rk=["disabled","onUpdate:modelValue"],Uk={scope:"col"},Vk={class:"form-check"},Yk=["onUpdate:modelValue","id"],Ik=["for"],Bk={key:0},xk={key:1},Nk={scope:"col"},Ek=["onUpdate:modelValue"],Qk={scope:"col"},Lk=["onClick"],Hk=s("i",{class:"fa-regular fa-trash-can"},null,-1),Wk=[Hk],Kk={key:1,class:"form-check mt-2"},Xk=["onUpdate:modelValue","id"],Gk=["for"],Zk={key:0},Jk=s("i",{class:"fa-solid fa-eye text-success"},null,-1),e2=[Jk],t2={key:1},s2=s("i",{class:"fa-solid fa-eye-slash text-danger"},null,-1),n2=[s2],o2=s("button",{type:"submit",class:"btn btn-success w-100 p-3"}," Сохранить поля ",-1);function a2(t,e,n,a,o,l){return r(),d("div",yk,[s("div",$k,[kk,s("button",{type:"button",onClick:e[0]||(e[0]=i=>l.addField()),class:"btn mb-2 rounded-sm btn-outline-info"},[wk,w(" Добавить параметр ")])]),Ck,s("form",{onSubmit:e[1]||(e[1]=Fe((...i)=>l.submit&&l.submit(...i),["prevent"]))},[s("table",Fk,[Tk,s("tbody",null,[(r(!0),d(B,null,oe(o.fieldForm.fields,(i,u)=>(r(),d("tr",null,[s("th",Dk,v(u+1),1),s("th",Sk,[$(s("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Ключ","aria-label":"Ключ",maxlength:"255","onUpdate:modelValue":p=>o.fieldForm.fields[u].key=p,required:""},null,8,Pk),[[Z,o.fieldForm.fields[u].key]])]),s("th",Ok,[$(s("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Подпись поля","aria-label":"Название поля",maxlength:"255","onUpdate:modelValue":p=>o.fieldForm.fields[u].label=p,required:""},null,8,Ak),[[Z,o.fieldForm.fields[u].label]])]),s("th",Mk,[$(s("select",{class:"form-select","onUpdate:modelValue":p=>o.fieldForm.fields[u].type=p},[(r(!0),d(B,null,oe(o.fieldTypes,p=>(r(),d("option",{value:p.value},v(p.title||"Не указан"),9,qk))),256))],8,jk),[[Jt,o.fieldForm.fields[u].type]])]),s("th",zk,[$(s("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Паттерн","aria-label":"Паттерн",maxlength:"255",disabled:o.fieldForm.fields[u].type===2,"onUpdate:modelValue":p=>o.fieldForm.fields[u].validate_pattern=p},null,8,Rk),[[Z,o.fieldForm.fields[u].validate_pattern]])]),s("th",Uk,[s("div",Vk,[$(s("input",{class:"form-check-input","onUpdate:modelValue":p=>o.fieldForm.fields[u].required=p,type:"checkbox",value:"",id:"field-required"+u},null,8,Yk),[[De,o.fieldForm.fields[u].required]]),s("label",{class:"form-check-label",for:"field-required"+u},[o.fieldForm.fields[u].required?(r(),d("span",Bk,"Да")):c("",!0),o.fieldForm.fields[u].required?c("",!0):(r(),d("span",xk,"Нет"))],8,Ik)])]),s("th",Nk,[$(s("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Описание вопроса","aria-label":"Описание вопроса",maxlength:"255","onUpdate:modelValue":p=>o.fieldForm.fields[u].description=p,required:""},null,8,Ek),[[Z,o.fieldForm.fields[u].description]])]),s("th",Qk,[o.fieldForm.fields[u].id?(r(),d("div",Kk,[$(s("input",{class:"form-check-input d-none","onUpdate:modelValue":p=>o.fieldForm.fields[u].is_active=p,type:"checkbox",value:"",id:"field-is_active-"+u},null,8,Xk),[[De,o.fieldForm.fields[u].is_active]]),s("label",{class:"form-check-label",for:"field-is_active-"+u},[o.fieldForm.fields[u].is_active?(r(),d("span",Zk,e2)):c("",!0),o.fieldForm.fields[u].is_active?c("",!0):(r(),d("span",t2,n2))],8,Gk)])):(r(),d("button",{key:0,type:"button",onClick:p=>l.removeField(u),class:"btn btn-link text-danger"},Wk,8,Lk))])]))),256))])]),o2],32)])}const l2=Ut(gk,[["render",a2]]),i2={class:"row"},r2={class:"input-group mb-3"},d2={key:0,class:"row"},u2={class:"col-12 col-md-12 mb-3"},c2={class:"table"},m2=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"#"),s("th",{scope:"col"},"Тип"),s("th",{scope:"col"},"Подпись"),s("th",{scope:"col"},"File Id"),s("th",{scope:"col"},"Действия")])],-1),p2={scope:"row"},h2={class:"badge bg-info rounded-pill"},_2={style:{"word-break":"break-all"}},f2={style:{"word-break":"break-all"}},v2={style:{"min-width":"200px"}},b2=["onClick"],g2=s("i",{class:"fa-solid fa-eye"},null,-1),y2=[g2],$2=["onClick"],k2=s("i",{class:"fa-brands fa-telegram"},null,-1),w2=[k2],C2=["onClick"],F2=s("i",{class:"fa-solid fa-trash"},null,-1),T2=[F2],D2={class:"col-12"},S2={key:1,class:"row"},P2=s("div",{class:"col-12"},[s("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ")],-1),O2=[P2],A2={class:"modal fade",id:"preview-modal",tabindex:"-1","aria-labelledby":"preview-modal-label","aria-hidden":"true"},M2={class:"modal-dialog"},j2={class:"modal-content"},q2={class:"modal-body"},z2={key:0,class:"d-flex justify-content-center align-items-center"},R2=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),U2={data(){return{bot:null,previewContent:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...xe(["getMedia","getMediaPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMedia()})},methods:{selectMedia(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},nextMedia(t){this.loadMedia(t)},remove(t){this.$store.dispatch("removeMedia",{dataObject:{mediaId:t}}).then(e=>{this.loadMedia(),this.$notify({title:"Удаление медиа-контента",text:"Медиа контент удален"})}).catch(()=>{})},showPreview(t){this.previewContent=null,this.$nextTick(()=>{this.previewContent=t,new bootstrap.Modal("#preview-modal",{}).show()})},showPreviewInTg(t){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:t}}).then(e=>{this.$notify({title:"Превью медиа-контента",text:"Отправлено в бота"})}).catch(()=>{})},loadMedia(t=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{bot_id:this.bot.id||null,search:this.search,needVideo:!0,needVideoNote:!0,needPhoto:!0,needAudio:!0,needDocument:!0,needSticker:!0},page:t}).then(e=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},V2=Object.assign(U2,{__name:"BotMediaTable",setup(t){return(e,n)=>(r(),d(B,null,[s("div",i2,[s("div",r2,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск файла","aria-label":"Поиск файла","onUpdate:modelValue":n[0]||(n[0]=a=>e.search=a)},null,512),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[1]||(n[1]=a=>e.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.media.length>0?(r(),d("div",d2,[s("div",u2,[s("table",c2,[m2,s("tbody",null,[(r(!0),d(B,null,oe(e.media,(a,o)=>(r(),d("tr",null,[s("th",p2,v(a.id),1),s("td",null,[s("span",h2,v(a.type),1)]),s("td",null,[s("p",_2,v(a.caption??"Без подписи"),1)]),s("td",null,[s("p",f2,v(a.file_id),1)]),s("td",null,[s("div",v2,[s("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:l=>e.showPreview(a)},y2,8,b2),s("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:l=>e.showPreviewInTg(a.id)},w2,8,$2),s("a",{href:"javascript:void(0)",class:"btn btn-outline-danger text-danger",onClick:l=>e.remove(a.id)},T2,8,C2)])])]))),256))])])]),s("div",D2,[e.media_paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextMedia,pagination:e.media_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",S2,O2)),s("div",A2,[s("div",M2,[s("div",j2,[s("div",q2,[e.previewContent!=null?(r(),d("div",z2,[E(Ya,{type:e.previewContent.type,content:e.previewContent.file_id},null,8,["type","content"])])):c("",!0)]),R2])])])],64))}});function yt(t){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(t)}function ke(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function fe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function $e(t){fe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||yt(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function zt(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return isNaN(a)?new Date(NaN):(a&&n.setDate(n.getDate()+a),n)}function wt(t,e){fe(2,arguments);var n=$e(t),a=ke(e);if(isNaN(a))return new Date(NaN);if(!a)return n;var o=n.getDate(),l=new Date(n.getTime());l.setMonth(n.getMonth()+a+1,0);var i=l.getDate();return o>=i?l:(n.setFullYear(l.getFullYear(),l.getMonth(),o),n)}function Io(t,e){if(fe(2,arguments),!e||yt(e)!=="object")return new Date(NaN);var n=e.years?ke(e.years):0,a=e.months?ke(e.months):0,o=e.weeks?ke(e.weeks):0,l=e.days?ke(e.days):0,i=e.hours?ke(e.hours):0,u=e.minutes?ke(e.minutes):0,p=e.seconds?ke(e.seconds):0,h=$e(t),k=a||n?wt(h,a+n*12):h,_=l||o?zt(k,l+o*7):k,F=u+i*60,D=p+F*60,P=D*1e3,x=new Date(_.getTime()+P);return x}function Y2(t,e){fe(2,arguments);var n=$e(t).getTime(),a=ke(e);return new Date(n+a)}var I2={};function jt(){return I2}function es(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=jt(),_=ke((n=(a=(o=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:k.weekStartsOn)!==null&&a!==void 0?a:(p=k.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(t),D=F.getDay(),P=(D<_?7:0)+D-_;return F.setDate(F.getDate()-P),F.setHours(0,0,0,0),F}function Ns(t){return fe(1,arguments),es(t,{weekStartsOn:1})}function B2(t){fe(1,arguments);var e=$e(t),n=e.getFullYear(),a=new Date(0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);var o=Ns(a),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var i=Ns(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function x2(t){fe(1,arguments);var e=B2(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var a=Ns(n);return a}function Es(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function oo(t){fe(1,arguments);var e=$e(t);return e.setHours(0,0,0,0),e}var N2=864e5;function E2(t,e){fe(2,arguments);var n=oo(t),a=oo(e),o=n.getTime()-Es(n),l=a.getTime()-Es(a);return Math.round((o-l)/N2)}function Q2(t,e){fe(2,arguments);var n=ke(e),a=n*3;return wt(t,a)}function Rn(t,e){fe(2,arguments);var n=ke(e);return wt(t,n*12)}var Un=6e4,Vn=36e5,L2=1e3;function Bo(t){return fe(1,arguments),t instanceof Date||yt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ws(t){if(fe(1,arguments),!Bo(t)&&typeof t!="number")return!1;var e=$e(t);return!isNaN(Number(e))}function ao(t){fe(1,arguments);var e=$e(t),n=Math.floor(e.getMonth()/3)+1;return n}function xo(t,e){var n;fe(1,arguments);var a=t||{},o=$e(a.start),l=$e(a.end),i=l.getTime();if(!(o.getTime()<=i))throw new RangeError("Invalid interval");var u=[],p=o;p.setHours(0,0,0,0);var h=Number((n=e==null?void 0:e.step)!==null&&n!==void 0?n:1);if(h<1||isNaN(h))throw new RangeError("`options.step` must be a number greater than 1");for(;p.getTime()<=i;)u.push($e(p)),p.setDate(p.getDate()+h),p.setHours(0,0,0,0);return u}function Ts(t){fe(1,arguments);var e=$e(t),n=e.getMonth(),a=n-n%3;return e.setMonth(a,1),e.setHours(0,0,0,0),e}function H2(t){fe(1,arguments);var e=t||{},n=$e(e.start),a=$e(e.end),o=a.getTime();if(!(n.getTime()<=o))throw new RangeError("Invalid interval");var l=Ts(n),i=Ts(a);o=i.getTime();for(var u=[],p=l;p.getTime()<=o;)u.push($e(p)),p=Q2(p,1);return u}function W2(t){fe(1,arguments);var e=$e(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function K2(t){fe(1,arguments);var e=$e(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function X2(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=jt(),_=ke((n=(a=(o=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:k.weekStartsOn)!==null&&a!==void 0?a:(p=k.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(t),D=F.getDay(),P=(D<_?-7:0)+6-(D-_);return F.setDate(F.getDate()+P),F.setHours(23,59,59,999),F}function lo(t){fe(1,arguments);var e=$e(t),n=e.getMonth(),a=n-n%3+3;return e.setMonth(a,0),e.setHours(23,59,59,999),e}function No(t,e){fe(2,arguments);var n=ke(e);return Y2(t,-n)}var G2=864e5;function Z2(t){fe(1,arguments);var e=$e(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var a=e.getTime(),o=n-a;return Math.floor(o/G2)+1}function ds(t){fe(1,arguments);var e=1,n=$e(t),a=n.getUTCDay(),o=(a<e?7:0)+a-e;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function Eo(t){fe(1,arguments);var e=$e(t),n=e.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var o=ds(a),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var i=ds(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function J2(t){fe(1,arguments);var e=Eo(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var a=ds(n);return a}var ew=6048e5;function Qo(t){fe(1,arguments);var e=$e(t),n=ds(e).getTime()-J2(e).getTime();return Math.round(n/ew)+1}function ts(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=jt(),_=ke((n=(a=(o=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:k.weekStartsOn)!==null&&a!==void 0?a:(p=k.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(t),D=F.getUTCDay(),P=(D<_?7:0)+D-_;return F.setUTCDate(F.getUTCDate()-P),F.setUTCHours(0,0,0,0),F}function Yn(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=$e(t),_=k.getUTCFullYear(),F=jt(),D=ke((n=(a=(o=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:F.firstWeekContainsDate)!==null&&a!==void 0?a:(p=F.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=new Date(0);P.setUTCFullYear(_+1,0,D),P.setUTCHours(0,0,0,0);var x=ts(P,e),ee=new Date(0);ee.setUTCFullYear(_,0,D),ee.setUTCHours(0,0,0,0);var U=ts(ee,e);return k.getTime()>=x.getTime()?_+1:k.getTime()>=U.getTime()?_:_-1}function tw(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=jt(),_=ke((n=(a=(o=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:k.firstWeekContainsDate)!==null&&a!==void 0?a:(p=k.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1),F=Yn(t,e),D=new Date(0);D.setUTCFullYear(F,0,_),D.setUTCHours(0,0,0,0);var P=ts(D,e);return P}var sw=6048e5;function Lo(t,e){fe(1,arguments);var n=$e(t),a=ts(n,e).getTime()-tw(n,e).getTime();return Math.round(a/sw)+1}function Ie(t,e){for(var n=t<0?"-":"",a=Math.abs(t).toString();a.length<e;)a="0"+a;return n+a}var nw={y:function(e,n){var a=e.getUTCFullYear(),o=a>0?a:1-a;return Ie(n==="yy"?o%100:o,n.length)},M:function(e,n){var a=e.getUTCMonth();return n==="M"?String(a+1):Ie(a+1,2)},d:function(e,n){return Ie(e.getUTCDate(),n.length)},a:function(e,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(e,n){return Ie(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ie(e.getUTCHours(),n.length)},m:function(e,n){return Ie(e.getUTCMinutes(),n.length)},s:function(e,n){return Ie(e.getUTCSeconds(),n.length)},S:function(e,n){var a=n.length,o=e.getUTCMilliseconds(),l=Math.floor(o*Math.pow(10,a-3));return Ie(l,n.length)}};const It=nw;var as={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ow={G:function(e,n,a){var o=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(o,{width:"abbreviated"});case"GGGGG":return a.era(o,{width:"narrow"});case"GGGG":default:return a.era(o,{width:"wide"})}},y:function(e,n,a){if(n==="yo"){var o=e.getUTCFullYear(),l=o>0?o:1-o;return a.ordinalNumber(l,{unit:"year"})}return It.y(e,n)},Y:function(e,n,a,o){var l=Yn(e,o),i=l>0?l:1-l;if(n==="YY"){var u=i%100;return Ie(u,2)}return n==="Yo"?a.ordinalNumber(i,{unit:"year"}):Ie(i,n.length)},R:function(e,n){var a=Eo(e);return Ie(a,n.length)},u:function(e,n){var a=e.getUTCFullYear();return Ie(a,n.length)},Q:function(e,n,a){var o=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(o);case"QQ":return Ie(o,2);case"Qo":return a.ordinalNumber(o,{unit:"quarter"});case"QQQ":return a.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(o,{width:"wide",context:"formatting"})}},q:function(e,n,a){var o=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(o);case"qq":return Ie(o,2);case"qo":return a.ordinalNumber(o,{unit:"quarter"});case"qqq":return a.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(o,{width:"wide",context:"standalone"})}},M:function(e,n,a){var o=e.getUTCMonth();switch(n){case"M":case"MM":return It.M(e,n);case"Mo":return a.ordinalNumber(o+1,{unit:"month"});case"MMM":return a.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(o,{width:"wide",context:"formatting"})}},L:function(e,n,a){var o=e.getUTCMonth();switch(n){case"L":return String(o+1);case"LL":return Ie(o+1,2);case"Lo":return a.ordinalNumber(o+1,{unit:"month"});case"LLL":return a.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(o,{width:"wide",context:"standalone"})}},w:function(e,n,a,o){var l=Lo(e,o);return n==="wo"?a.ordinalNumber(l,{unit:"week"}):Ie(l,n.length)},I:function(e,n,a){var o=Qo(e);return n==="Io"?a.ordinalNumber(o,{unit:"week"}):Ie(o,n.length)},d:function(e,n,a){return n==="do"?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):It.d(e,n)},D:function(e,n,a){var o=Z2(e);return n==="Do"?a.ordinalNumber(o,{unit:"dayOfYear"}):Ie(o,n.length)},E:function(e,n,a){var o=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(o,{width:"short",context:"formatting"});case"EEEE":default:return a.day(o,{width:"wide",context:"formatting"})}},e:function(e,n,a,o){var l=e.getUTCDay(),i=(l-o.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Ie(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(l,{width:"short",context:"formatting"});case"eeee":default:return a.day(l,{width:"wide",context:"formatting"})}},c:function(e,n,a,o){var l=e.getUTCDay(),i=(l-o.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Ie(i,n.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(l,{width:"narrow",context:"standalone"});case"cccccc":return a.day(l,{width:"short",context:"standalone"});case"cccc":default:return a.day(l,{width:"wide",context:"standalone"})}},i:function(e,n,a){var o=e.getUTCDay(),l=o===0?7:o;switch(n){case"i":return String(l);case"ii":return Ie(l,n.length);case"io":return a.ordinalNumber(l,{unit:"day"});case"iii":return a.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(o,{width:"short",context:"formatting"});case"iiii":default:return a.day(o,{width:"wide",context:"formatting"})}},a:function(e,n,a){var o=e.getUTCHours(),l=o/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,n,a){var o=e.getUTCHours(),l;switch(o===12?l=as.noon:o===0?l=as.midnight:l=o/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,n,a){var o=e.getUTCHours(),l;switch(o>=17?l=as.evening:o>=12?l=as.afternoon:o>=4?l=as.morning:l=as.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,n,a){if(n==="ho"){var o=e.getUTCHours()%12;return o===0&&(o=12),a.ordinalNumber(o,{unit:"hour"})}return It.h(e,n)},H:function(e,n,a){return n==="Ho"?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):It.H(e,n)},K:function(e,n,a){var o=e.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(o,{unit:"hour"}):Ie(o,n.length)},k:function(e,n,a){var o=e.getUTCHours();return o===0&&(o=24),n==="ko"?a.ordinalNumber(o,{unit:"hour"}):Ie(o,n.length)},m:function(e,n,a){return n==="mo"?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):It.m(e,n)},s:function(e,n,a){return n==="so"?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):It.s(e,n)},S:function(e,n){return It.S(e,n)},X:function(e,n,a,o){var l=o._originalDate||e,i=l.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return ro(i);case"XXXX":case"XX":return Kt(i);case"XXXXX":case"XXX":default:return Kt(i,":")}},x:function(e,n,a,o){var l=o._originalDate||e,i=l.getTimezoneOffset();switch(n){case"x":return ro(i);case"xxxx":case"xx":return Kt(i);case"xxxxx":case"xxx":default:return Kt(i,":")}},O:function(e,n,a,o){var l=o._originalDate||e,i=l.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+io(i,":");case"OOOO":default:return"GMT"+Kt(i,":")}},z:function(e,n,a,o){var l=o._originalDate||e,i=l.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+io(i,":");case"zzzz":default:return"GMT"+Kt(i,":")}},t:function(e,n,a,o){var l=o._originalDate||e,i=Math.floor(l.getTime()/1e3);return Ie(i,n.length)},T:function(e,n,a,o){var l=o._originalDate||e,i=l.getTime();return Ie(i,n.length)}};function io(t,e){var n=t>0?"-":"+",a=Math.abs(t),o=Math.floor(a/60),l=a%60;if(l===0)return n+String(o);var i=e||"";return n+String(o)+i+Ie(l,2)}function ro(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ie(Math.abs(t)/60,2)}return Kt(t,e)}function Kt(t,e){var n=e||"",a=t>0?"-":"+",o=Math.abs(t),l=Ie(Math.floor(o/60),2),i=Ie(o%60,2);return a+l+n+i}const aw=ow;var uo=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Ho=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},lw=function(e,n){var a=e.match(/(P+)(p+)?/)||[],o=a[1],l=a[2];if(!l)return uo(e,n);var i;switch(o){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",uo(o,n)).replace("{{time}}",Ho(l,n))},iw={p:Ho,P:lw};const Fn=iw;var rw=["D","DD"],dw=["YY","YYYY"];function Wo(t){return rw.indexOf(t)!==-1}function Ko(t){return dw.indexOf(t)!==-1}function Qs(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var uw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cw=function(e,n,a){var o,l=uw[e];return typeof l=="string"?o=l:n===1?o=l.one:o=l.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+o:o+" ago":o};const mw=cw;function ln(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,a=t.formats[n]||t.formats[t.defaultWidth];return a}}var pw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_w={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fw={date:ln({formats:pw,defaultWidth:"full"}),time:ln({formats:hw,defaultWidth:"full"}),dateTime:ln({formats:_w,defaultWidth:"full"})};const vw=fw;var bw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gw=function(e,n,a,o){return bw[e]};const yw=gw;function gs(t){return function(e,n){var a=n!=null&&n.context?String(n.context):"standalone",o;if(a==="formatting"&&t.formattingValues){var l=t.defaultFormattingWidth||t.defaultWidth,i=n!=null&&n.width?String(n.width):l;o=t.formattingValues[i]||t.formattingValues[l]}else{var u=t.defaultWidth,p=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[p]||t.values[u]}var h=t.argumentCallback?t.argumentCallback(e):e;return o[h]}}var $w={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ww={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dw=function(e,n){var a=Number(e),o=a%100;if(o>20||o<10)switch(o%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Sw={ordinalNumber:Dw,era:gs({values:$w,defaultWidth:"wide"}),quarter:gs({values:kw,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:gs({values:ww,defaultWidth:"wide"}),day:gs({values:Cw,defaultWidth:"wide"}),dayPeriod:gs({values:Fw,defaultWidth:"wide",formattingValues:Tw,defaultFormattingWidth:"wide"})};const Pw=Sw;function ys(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],l=e.match(o);if(!l)return null;var i=l[0],u=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(u)?Aw(u,function(_){return _.test(i)}):Ow(u,function(_){return _.test(i)}),h;h=t.valueCallback?t.valueCallback(p):p,h=n.valueCallback?n.valueCallback(h):h;var k=e.slice(i.length);return{value:h,rest:k}}}function Ow(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function Aw(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function Mw(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.match(t.matchPattern);if(!a)return null;var o=a[0],l=e.match(t.parsePattern);if(!l)return null;var i=t.valueCallback?t.valueCallback(l[0]):l[0];i=n.valueCallback?n.valueCallback(i):i;var u=e.slice(o.length);return{value:i,rest:u}}}var jw=/^(\d+)(th|st|nd|rd)?/i,qw=/\d+/i,zw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rw={any:[/^b/i,/^(a|c)/i]},Uw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vw={any:[/1/i,/2/i,/3/i,/4/i]},Yw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Iw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ew={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qw={ordinalNumber:Mw({matchPattern:jw,parsePattern:qw,valueCallback:function(e){return parseInt(e,10)}}),era:ys({matchPatterns:zw,defaultMatchWidth:"wide",parsePatterns:Rw,defaultParseWidth:"any"}),quarter:ys({matchPatterns:Uw,defaultMatchWidth:"wide",parsePatterns:Vw,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ys({matchPatterns:Yw,defaultMatchWidth:"wide",parsePatterns:Iw,defaultParseWidth:"any"}),day:ys({matchPatterns:Bw,defaultMatchWidth:"wide",parsePatterns:xw,defaultParseWidth:"any"}),dayPeriod:ys({matchPatterns:Nw,defaultMatchWidth:"any",parsePatterns:Ew,defaultParseWidth:"any"})};const Lw=Qw;var Hw={code:"en-US",formatDistance:mw,formatLong:vw,formatRelative:yw,localize:Pw,match:Lw,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Xo=Hw;var Ww=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xw=/^'([^]*?)'?$/,Gw=/''/g,Zw=/[a-zA-Z]/;function Nt(t,e,n){var a,o,l,i,u,p,h,k,_,F,D,P,x,ee,U,V,se,S;fe(2,arguments);var L=String(e),W=jt(),Q=(a=(o=n==null?void 0:n.locale)!==null&&o!==void 0?o:W.locale)!==null&&a!==void 0?a:Xo,he=ke((l=(i=(u=(p=n==null?void 0:n.firstWeekContainsDate)!==null&&p!==void 0?p:n==null||(h=n.locale)===null||h===void 0||(k=h.options)===null||k===void 0?void 0:k.firstWeekContainsDate)!==null&&u!==void 0?u:W.firstWeekContainsDate)!==null&&i!==void 0?i:(_=W.locale)===null||_===void 0||(F=_.options)===null||F===void 0?void 0:F.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(he>=1&&he<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ne=ke((D=(P=(x=(ee=n==null?void 0:n.weekStartsOn)!==null&&ee!==void 0?ee:n==null||(U=n.locale)===null||U===void 0||(V=U.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&x!==void 0?x:W.weekStartsOn)!==null&&P!==void 0?P:(se=W.locale)===null||se===void 0||(S=se.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&D!==void 0?D:0);if(!(ne>=0&&ne<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Q.localize)throw new RangeError("locale must contain localize property");if(!Q.formatLong)throw new RangeError("locale must contain formatLong property");var y=$e(t);if(!ws(y))throw new RangeError("Invalid time value");var M=Es(y),X=No(y,M),re={firstWeekContainsDate:he,weekStartsOn:ne,locale:Q,_originalDate:y},Y=L.match(Kw).map(function(g){var q=g[0];if(q==="p"||q==="P"){var z=Fn[q];return z(g,Q.formatLong)}return g}).join("").match(Ww).map(function(g){if(g==="''")return"'";var q=g[0];if(q==="'")return Jw(g);var z=aw[q];if(z)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Ko(g)&&Qs(g,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Wo(g)&&Qs(g,e,String(t)),z(X,g,Q.localize,re);if(q.match(Zw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return g}).join("");return Y}function Jw(t){var e=t.match(Xw);return e?e[1].replace(Gw,"'"):t}function e3(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function t3(t){fe(1,arguments);var e=$e(t),n=e.getDay();return n}function s3(t){fe(1,arguments);var e=$e(t),n=e.getFullYear(),a=e.getMonth(),o=new Date(0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}function Ct(t){fe(1,arguments);var e=$e(t),n=e.getHours();return n}var n3=6048e5;function o3(t){fe(1,arguments);var e=$e(t),n=Ns(e).getTime()-x2(e).getTime();return Math.round(n/n3)+1}function Mt(t){fe(1,arguments);var e=$e(t),n=e.getMinutes();return n}function ze(t){fe(1,arguments);var e=$e(t),n=e.getMonth();return n}function us(t){fe(1,arguments);var e=$e(t),n=e.getSeconds();return n}function a3(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=$e(t),_=k.getFullYear(),F=jt(),D=ke((n=(a=(o=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:F.firstWeekContainsDate)!==null&&a!==void 0?a:(p=F.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=new Date(0);P.setFullYear(_+1,0,D),P.setHours(0,0,0,0);var x=es(P,e),ee=new Date(0);ee.setFullYear(_,0,D),ee.setHours(0,0,0,0);var U=es(ee,e);return k.getTime()>=x.getTime()?_+1:k.getTime()>=U.getTime()?_:_-1}function l3(t,e){var n,a,o,l,i,u,p,h;fe(1,arguments);var k=jt(),_=ke((n=(a=(o=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:k.firstWeekContainsDate)!==null&&a!==void 0?a:(p=k.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1),F=a3(t,e),D=new Date(0);D.setFullYear(F,0,_),D.setHours(0,0,0,0);var P=es(D,e);return P}var i3=6048e5;function r3(t,e){fe(1,arguments);var n=$e(t),a=es(n,e).getTime()-l3(n,e).getTime();return Math.round(a/i3)+1}function Ae(t){return fe(1,arguments),$e(t).getFullYear()}function Ds(t,e){fe(2,arguments);var n=$e(t),a=$e(e);return n.getTime()>a.getTime()}function Ss(t,e){fe(2,arguments);var n=$e(t),a=$e(e);return n.getTime()<a.getTime()}function rs(t,e){fe(2,arguments);var n=$e(t),a=$e(e);return n.getTime()===a.getTime()}function co(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function d3(t,e){if(t){if(typeof t=="string")return co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(t,e)}}function mo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=d3(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(h){throw h},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,i=!1,u;return{s:function(){n=n.call(t)},n:function(){var h=n.next();return l=h.done,h},e:function(h){i=!0,u=h},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(i)throw u}}}}function _e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tn(t,e){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,o){return a.__proto__=o,a},Tn(t,e)}function Re(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}function Ls(t){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ls(t)}function Go(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Go=function(){return!!t})()}function u3(t,e){if(e&&(yt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _e(t)}function Ue(t){var e=Go();return function(){var a=Ls(t),o;if(e){var l=Ls(this).constructor;o=Reflect.construct(a,arguments,l)}else o=a.apply(this,arguments);return u3(this,o)}}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c3(t,e){if(yt(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e||"default");if(yt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zo(t){var e=c3(t,"string");return yt(e)=="symbol"?e:String(e)}function po(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Zo(a.key),a)}}function qe(t,e,n){return e&&po(t.prototype,e),n&&po(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pe(t,e,n){return e=Zo(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m3=10,Jo=function(){function t(){je(this,t),pe(this,"priority",void 0),pe(this,"subPriority",0)}return qe(t,[{key:"validate",value:function(n,a){return!0}}]),t}(),p3=function(t){Re(n,t);var e=Ue(n);function n(a,o,l,i,u){var p;return je(this,n),p=e.call(this),p.value=a,p.validateValue=o,p.setValue=l,p.priority=i,u&&(p.subPriority=u),p}return qe(n,[{key:"validate",value:function(o,l){return this.validateValue(o,this.value,l)}},{key:"set",value:function(o,l,i){return this.setValue(o,l,this.value,i)}}]),n}(Jo),h3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",m3),pe(_e(a),"subPriority",-1),a}return qe(n,[{key:"set",value:function(o,l){if(l.timestampIsSet)return o;var i=new Date(0);return i.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),i.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),i}}]),n}(Jo),Ye=function(){function t(){je(this,t),pe(this,"incompatibleTokens",void 0),pe(this,"priority",void 0),pe(this,"subPriority",void 0)}return qe(t,[{key:"run",value:function(n,a,o,l){var i=this.parse(n,a,o,l);return i?{setter:new p3(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(n,a,o){return!0}}]),t}(),_3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",140),pe(_e(a),"incompatibleTokens",["R","u","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"G":case"GG":case"GGG":return i.era(o,{width:"abbreviated"})||i.era(o,{width:"narrow"});case"GGGGG":return i.era(o,{width:"narrow"});case"GGGG":default:return i.era(o,{width:"wide"})||i.era(o,{width:"abbreviated"})||i.era(o,{width:"narrow"})}}},{key:"set",value:function(o,l,i){return l.era=i,o.setUTCFullYear(i,0,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Pt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ke(t,e){return t&&{value:e(t.value),rest:t.rest}}function Le(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ot(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var a=n[1]==="+"?1:-1,o=n[2]?parseInt(n[2],10):0,l=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:a*(o*Vn+l*Un+i*L2),rest:e.slice(n[0].length)}}function ea(t){return Le(We.anyDigitsSigned,t)}function He(t,e){switch(t){case 1:return Le(We.singleDigit,e);case 2:return Le(We.twoDigits,e);case 3:return Le(We.threeDigits,e);case 4:return Le(We.fourDigits,e);default:return Le(new RegExp("^\\d{1,"+t+"}"),e)}}function Hs(t,e){switch(t){case 1:return Le(We.singleDigitSigned,e);case 2:return Le(We.twoDigitsSigned,e);case 3:return Le(We.threeDigitsSigned,e);case 4:return Le(We.fourDigitsSigned,e);default:return Le(new RegExp("^-?\\d{1,"+t+"}"),e)}}function In(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ta(t,e){var n=e>0,a=n?e:1-e,o;if(a<=50)o=t||100;else{var l=a+50,i=Math.floor(l/100)*100,u=t>=l%100;o=t+i-(u?100:0)}return n?o:1-o}function sa(t){return t%400===0||t%4===0&&t%100!==0}var f3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",130),pe(_e(a),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){var u=function(h){return{year:h,isTwoDigitYear:l==="yy"}};switch(l){case"y":return Ke(He(4,o),u);case"yo":return Ke(i.ordinalNumber(o,{unit:"year"}),u);default:return Ke(He(l.length,o),u)}}},{key:"validate",value:function(o,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(o,l,i){var u=o.getUTCFullYear();if(i.isTwoDigitYear){var p=ta(i.year,u);return o.setUTCFullYear(p,0,1),o.setUTCHours(0,0,0,0),o}var h=!("era"in l)||l.era===1?i.year:1-i.year;return o.setUTCFullYear(h,0,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),v3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",130),pe(_e(a),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){var u=function(h){return{year:h,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return Ke(He(4,o),u);case"Yo":return Ke(i.ordinalNumber(o,{unit:"year"}),u);default:return Ke(He(l.length,o),u)}}},{key:"validate",value:function(o,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(o,l,i,u){var p=Yn(o,u);if(i.isTwoDigitYear){var h=ta(i.year,p);return o.setUTCFullYear(h,0,u.firstWeekContainsDate),o.setUTCHours(0,0,0,0),ts(o,u)}var k=!("era"in l)||l.era===1?i.year:1-i.year;return o.setUTCFullYear(k,0,u.firstWeekContainsDate),o.setUTCHours(0,0,0,0),ts(o,u)}}]),n}(Ye),b3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",130),pe(_e(a),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l){return Hs(l==="R"?4:l.length,o)}},{key:"set",value:function(o,l,i){var u=new Date(0);return u.setUTCFullYear(i,0,4),u.setUTCHours(0,0,0,0),ds(u)}}]),n}(Ye),g3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",130),pe(_e(a),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l){return Hs(l==="u"?4:l.length,o)}},{key:"set",value:function(o,l,i){return o.setUTCFullYear(i,0,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),y3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",120),pe(_e(a),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"Q":case"QQ":return He(l.length,o);case"Qo":return i.ordinalNumber(o,{unit:"quarter"});case"QQQ":return i.quarter(o,{width:"abbreviated",context:"formatting"})||i.quarter(o,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(o,{width:"wide",context:"formatting"})||i.quarter(o,{width:"abbreviated",context:"formatting"})||i.quarter(o,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(o,l){return l>=1&&l<=4}},{key:"set",value:function(o,l,i){return o.setUTCMonth((i-1)*3,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),$3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",120),pe(_e(a),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"q":case"qq":return He(l.length,o);case"qo":return i.ordinalNumber(o,{unit:"quarter"});case"qqq":return i.quarter(o,{width:"abbreviated",context:"standalone"})||i.quarter(o,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(o,{width:"wide",context:"standalone"})||i.quarter(o,{width:"abbreviated",context:"standalone"})||i.quarter(o,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(o,l){return l>=1&&l<=4}},{key:"set",value:function(o,l,i){return o.setUTCMonth((i-1)*3,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),k3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),pe(_e(a),"priority",110),a}return qe(n,[{key:"parse",value:function(o,l,i){var u=function(h){return h-1};switch(l){case"M":return Ke(Le(We.month,o),u);case"MM":return Ke(He(2,o),u);case"Mo":return Ke(i.ordinalNumber(o,{unit:"month"}),u);case"MMM":return i.month(o,{width:"abbreviated",context:"formatting"})||i.month(o,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(o,{width:"wide",context:"formatting"})||i.month(o,{width:"abbreviated",context:"formatting"})||i.month(o,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(o,l){return l>=0&&l<=11}},{key:"set",value:function(o,l,i){return o.setUTCMonth(i,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),w3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",110),pe(_e(a),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){var u=function(h){return h-1};switch(l){case"L":return Ke(Le(We.month,o),u);case"LL":return Ke(He(2,o),u);case"Lo":return Ke(i.ordinalNumber(o,{unit:"month"}),u);case"LLL":return i.month(o,{width:"abbreviated",context:"standalone"})||i.month(o,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(o,{width:"wide",context:"standalone"})||i.month(o,{width:"abbreviated",context:"standalone"})||i.month(o,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(o,l){return l>=0&&l<=11}},{key:"set",value:function(o,l,i){return o.setUTCMonth(i,1),o.setUTCHours(0,0,0,0),o}}]),n}(Ye);function C3(t,e,n){fe(2,arguments);var a=$e(t),o=ke(e),l=Lo(a,n)-o;return a.setUTCDate(a.getUTCDate()-l*7),a}var F3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",100),pe(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"w":return Le(We.week,o);case"wo":return i.ordinalNumber(o,{unit:"week"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=1&&l<=53}},{key:"set",value:function(o,l,i,u){return ts(C3(o,i,u),u)}}]),n}(Ye);function T3(t,e){fe(2,arguments);var n=$e(t),a=ke(e),o=Qo(n)-a;return n.setUTCDate(n.getUTCDate()-o*7),n}var D3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",100),pe(_e(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"I":return Le(We.week,o);case"Io":return i.ordinalNumber(o,{unit:"week"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=1&&l<=53}},{key:"set",value:function(o,l,i){return ds(T3(o,i))}}]),n}(Ye),S3=[31,28,31,30,31,30,31,31,30,31,30,31],P3=[31,29,31,30,31,30,31,31,30,31,30,31],O3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"subPriority",1),pe(_e(a),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"d":return Le(We.date,o);case"do":return i.ordinalNumber(o,{unit:"date"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){var i=o.getUTCFullYear(),u=sa(i),p=o.getUTCMonth();return u?l>=1&&l<=P3[p]:l>=1&&l<=S3[p]}},{key:"set",value:function(o,l,i){return o.setUTCDate(i),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),A3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"subpriority",1),pe(_e(a),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"D":case"DD":return Le(We.dayOfYear,o);case"Do":return i.ordinalNumber(o,{unit:"date"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){var i=o.getUTCFullYear(),u=sa(i);return u?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(o,l,i){return o.setUTCMonth(0,i),o.setUTCHours(0,0,0,0),o}}]),n}(Ye);function Bn(t,e,n){var a,o,l,i,u,p,h,k;fe(2,arguments);var _=jt(),F=ke((a=(o=(l=(i=n==null?void 0:n.weekStartsOn)!==null&&i!==void 0?i:n==null||(u=n.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&o!==void 0?o:(h=_.locale)===null||h===void 0||(k=h.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&a!==void 0?a:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=$e(t),P=ke(e),x=D.getUTCDay(),ee=P%7,U=(ee+7)%7,V=(U<F?7:0)+P-x;return D.setUTCDate(D.getUTCDate()+V),D}var M3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"incompatibleTokens",["D","i","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"E":case"EE":case"EEE":return i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(o,{width:"wide",context:"formatting"})||i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(o,l){return l>=0&&l<=6}},{key:"set",value:function(o,l,i,u){return o=Bn(o,i,u),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),j3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i,u){var p=function(k){var _=Math.floor((k-1)/7)*7;return(k+u.weekStartsOn+6)%7+_};switch(l){case"e":case"ee":return Ke(He(l.length,o),p);case"eo":return Ke(i.ordinalNumber(o,{unit:"day"}),p);case"eee":return i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(o,{width:"wide",context:"formatting"})||i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(o,l){return l>=0&&l<=6}},{key:"set",value:function(o,l,i,u){return o=Bn(o,i,u),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),q3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i,u){var p=function(k){var _=Math.floor((k-1)/7)*7;return(k+u.weekStartsOn+6)%7+_};switch(l){case"c":case"cc":return Ke(He(l.length,o),p);case"co":return Ke(i.ordinalNumber(o,{unit:"day"}),p);case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"})||i.day(o,{width:"short",context:"standalone"})||i.day(o,{width:"narrow",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"})||i.day(o,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(o,{width:"wide",context:"standalone"})||i.day(o,{width:"abbreviated",context:"standalone"})||i.day(o,{width:"short",context:"standalone"})||i.day(o,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(o,l){return l>=0&&l<=6}},{key:"set",value:function(o,l,i,u){return o=Bn(o,i,u),o.setUTCHours(0,0,0,0),o}}]),n}(Ye);function z3(t,e){fe(2,arguments);var n=ke(e);n%7===0&&(n=n-7);var a=1,o=$e(t),l=o.getUTCDay(),i=n%7,u=(i+7)%7,p=(u<a?7:0)+n-l;return o.setUTCDate(o.getUTCDate()+p),o}var R3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",90),pe(_e(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){var u=function(h){return h===0?7:h};switch(l){case"i":case"ii":return He(l.length,o);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return Ke(i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"}),u);case"iiiii":return Ke(i.day(o,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Ke(i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"}),u);case"iiii":default:return Ke(i.day(o,{width:"wide",context:"formatting"})||i.day(o,{width:"abbreviated",context:"formatting"})||i.day(o,{width:"short",context:"formatting"})||i.day(o,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(o,l){return l>=1&&l<=7}},{key:"set",value:function(o,l,i){return o=z3(o,i),o.setUTCHours(0,0,0,0),o}}]),n}(Ye),U3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",80),pe(_e(a),"incompatibleTokens",["b","B","H","k","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"a":case"aa":case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})||i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(o,l,i){return o.setUTCHours(In(i),0,0,0),o}}]),n}(Ye),V3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",80),pe(_e(a),"incompatibleTokens",["a","B","H","k","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"b":case"bb":case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})||i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(o,l,i){return o.setUTCHours(In(i),0,0,0),o}}]),n}(Ye),Y3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",80),pe(_e(a),"incompatibleTokens",["a","b","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})||i.dayPeriod(o,{width:"abbreviated",context:"formatting"})||i.dayPeriod(o,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(o,l,i){return o.setUTCHours(In(i),0,0,0),o}}]),n}(Ye),I3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",70),pe(_e(a),"incompatibleTokens",["H","K","k","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"h":return Le(We.hour12h,o);case"ho":return i.ordinalNumber(o,{unit:"hour"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=1&&l<=12}},{key:"set",value:function(o,l,i){var u=o.getUTCHours()>=12;return u&&i<12?o.setUTCHours(i+12,0,0,0):!u&&i===12?o.setUTCHours(0,0,0,0):o.setUTCHours(i,0,0,0),o}}]),n}(Ye),B3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",70),pe(_e(a),"incompatibleTokens",["a","b","h","K","k","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"H":return Le(We.hour23h,o);case"Ho":return i.ordinalNumber(o,{unit:"hour"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=0&&l<=23}},{key:"set",value:function(o,l,i){return o.setUTCHours(i,0,0,0),o}}]),n}(Ye),x3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",70),pe(_e(a),"incompatibleTokens",["h","H","k","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"K":return Le(We.hour11h,o);case"Ko":return i.ordinalNumber(o,{unit:"hour"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=0&&l<=11}},{key:"set",value:function(o,l,i){var u=o.getUTCHours()>=12;return u&&i<12?o.setUTCHours(i+12,0,0,0):o.setUTCHours(i,0,0,0),o}}]),n}(Ye),N3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",70),pe(_e(a),"incompatibleTokens",["a","b","h","H","K","t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"k":return Le(We.hour24h,o);case"ko":return i.ordinalNumber(o,{unit:"hour"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=1&&l<=24}},{key:"set",value:function(o,l,i){var u=i<=24?i%24:i;return o.setUTCHours(u,0,0,0),o}}]),n}(Ye),E3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",60),pe(_e(a),"incompatibleTokens",["t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"m":return Le(We.minute,o);case"mo":return i.ordinalNumber(o,{unit:"minute"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=0&&l<=59}},{key:"set",value:function(o,l,i){return o.setUTCMinutes(i,0,0),o}}]),n}(Ye),Q3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",50),pe(_e(a),"incompatibleTokens",["t","T"]),a}return qe(n,[{key:"parse",value:function(o,l,i){switch(l){case"s":return Le(We.second,o);case"so":return i.ordinalNumber(o,{unit:"second"});default:return He(l.length,o)}}},{key:"validate",value:function(o,l){return l>=0&&l<=59}},{key:"set",value:function(o,l,i){return o.setUTCSeconds(i,0),o}}]),n}(Ye),L3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",30),pe(_e(a),"incompatibleTokens",["t","T"]),a}return qe(n,[{key:"parse",value:function(o,l){var i=function(p){return Math.floor(p*Math.pow(10,-l.length+3))};return Ke(He(l.length,o),i)}},{key:"set",value:function(o,l,i){return o.setUTCMilliseconds(i),o}}]),n}(Ye),H3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",10),pe(_e(a),"incompatibleTokens",["t","T","x"]),a}return qe(n,[{key:"parse",value:function(o,l){switch(l){case"X":return Ot(Pt.basicOptionalMinutes,o);case"XX":return Ot(Pt.basic,o);case"XXXX":return Ot(Pt.basicOptionalSeconds,o);case"XXXXX":return Ot(Pt.extendedOptionalSeconds,o);case"XXX":default:return Ot(Pt.extended,o)}}},{key:"set",value:function(o,l,i){return l.timestampIsSet?o:new Date(o.getTime()-i)}}]),n}(Ye),W3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",10),pe(_e(a),"incompatibleTokens",["t","T","X"]),a}return qe(n,[{key:"parse",value:function(o,l){switch(l){case"x":return Ot(Pt.basicOptionalMinutes,o);case"xx":return Ot(Pt.basic,o);case"xxxx":return Ot(Pt.basicOptionalSeconds,o);case"xxxxx":return Ot(Pt.extendedOptionalSeconds,o);case"xxx":default:return Ot(Pt.extended,o)}}},{key:"set",value:function(o,l,i){return l.timestampIsSet?o:new Date(o.getTime()-i)}}]),n}(Ye),K3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",40),pe(_e(a),"incompatibleTokens","*"),a}return qe(n,[{key:"parse",value:function(o){return ea(o)}},{key:"set",value:function(o,l,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),n}(Ye),X3=function(t){Re(n,t);var e=Ue(n);function n(){var a;je(this,n);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),pe(_e(a),"priority",20),pe(_e(a),"incompatibleTokens","*"),a}return qe(n,[{key:"parse",value:function(o){return ea(o)}},{key:"set",value:function(o,l,i){return[new Date(i),{timestampIsSet:!0}]}}]),n}(Ye),G3={G:new _3,y:new f3,Y:new v3,R:new b3,u:new g3,Q:new y3,q:new $3,M:new k3,L:new w3,w:new F3,I:new D3,d:new O3,D:new A3,E:new M3,e:new j3,c:new q3,i:new R3,a:new U3,b:new V3,B:new Y3,h:new I3,H:new B3,K:new x3,k:new N3,m:new E3,s:new Q3,S:new L3,X:new H3,x:new W3,t:new K3,T:new X3},Z3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,J3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eC=/^'([^]*?)'?$/,tC=/''/g,sC=/\S/,nC=/[a-zA-Z]/;function Dn(t,e,n,a){var o,l,i,u,p,h,k,_,F,D,P,x,ee,U,V,se,S,L;fe(3,arguments);var W=String(t),Q=String(e),he=jt(),ne=(o=(l=a==null?void 0:a.locale)!==null&&l!==void 0?l:he.locale)!==null&&o!==void 0?o:Xo;if(!ne.match)throw new RangeError("locale must contain match property");var y=ke((i=(u=(p=(h=a==null?void 0:a.firstWeekContainsDate)!==null&&h!==void 0?h:a==null||(k=a.locale)===null||k===void 0||(_=k.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&p!==void 0?p:he.firstWeekContainsDate)!==null&&u!==void 0?u:(F=he.locale)===null||F===void 0||(D=F.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=ke((P=(x=(ee=(U=a==null?void 0:a.weekStartsOn)!==null&&U!==void 0?U:a==null||(V=a.locale)===null||V===void 0||(se=V.options)===null||se===void 0?void 0:se.weekStartsOn)!==null&&ee!==void 0?ee:he.weekStartsOn)!==null&&x!==void 0?x:(S=he.locale)===null||S===void 0||(L=S.options)===null||L===void 0?void 0:L.weekStartsOn)!==null&&P!==void 0?P:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(Q==="")return W===""?$e(n):new Date(NaN);var X={firstWeekContainsDate:y,weekStartsOn:M,locale:ne},re=[new h3],Y=Q.match(J3).map(function(be){var J=be[0];if(J in Fn){var Ce=Fn[J];return Ce(be,ne.formatLong)}return be}).join("").match(Z3),g=[],q=mo(Y),z;try{var K=function(){var J=z.value;!(a!=null&&a.useAdditionalWeekYearTokens)&&Ko(J)&&Qs(J,Q,t),!(a!=null&&a.useAdditionalDayOfYearTokens)&&Wo(J)&&Qs(J,Q,t);var Ce=J[0],ge=G3[Ce];if(ge){var N=ge.incompatibleTokens;if(Array.isArray(N)){var ie=g.find(function(ue){return N.includes(ue.token)||ue.token===Ce});if(ie)throw new RangeError("The format string mustn't contain `".concat(ie.fullToken,"` and `").concat(J,"` at the same time"))}else if(ge.incompatibleTokens==="*"&&g.length>0)throw new RangeError("The format string mustn't contain `".concat(J,"` and any other token at the same time"));g.push({token:Ce,fullToken:J});var Se=ge.run(W,J,ne.match,X);if(!Se)return{v:new Date(NaN)};re.push(Se.setter),W=Se.rest}else{if(Ce.match(nC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ce+"`");if(J==="''"?J="'":Ce==="'"&&(J=oC(J)),W.indexOf(J)===0)W=W.slice(J.length);else return{v:new Date(NaN)}}};for(q.s();!(z=q.n()).done;){var f=K();if(yt(f)==="object")return f.v}}catch(be){q.e(be)}finally{q.f()}if(W.length>0&&sC.test(W))return new Date(NaN);var m=re.map(function(be){return be.priority}).sort(function(be,J){return J-be}).filter(function(be,J,Ce){return Ce.indexOf(be)===J}).map(function(be){return re.filter(function(J){return J.priority===be}).sort(function(J,Ce){return Ce.subPriority-J.subPriority})}).map(function(be){return be[0]}),A=$e(n);if(isNaN(A.getTime()))return new Date(NaN);var I=No(A,Es(A)),le={},de=mo(m),R;try{for(de.s();!(R=de.n()).done;){var b=R.value;if(!b.validate(I,X))return new Date(NaN);var ve=b.set(I,le,X);Array.isArray(ve)?(I=ve[0],e3(le,ve[1])):I=ve}}catch(be){de.e(be)}finally{de.f()}return I}function oC(t){return t.match(eC)[1].replace(tC,"'")}function ho(t,e){fe(2,arguments);var n=Ts(t),a=Ts(e);return n.getTime()===a.getTime()}function aC(t,e){fe(2,arguments);var n=ke(e);return zt(t,-n)}function lC(t,e){var n;fe(1,arguments);var a=ke((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var o=uC(t),l;if(o.date){var i=cC(o.date,a);l=mC(i.restDateString,i.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var u=l.getTime(),p=0,h;if(o.time&&(p=pC(o.time),isNaN(p)))return new Date(NaN);if(o.timezone){if(h=hC(o.timezone),isNaN(h))return new Date(NaN)}else{var k=new Date(u+p),_=new Date(0);return _.setFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()),_.setHours(k.getUTCHours(),k.getUTCMinutes(),k.getUTCSeconds(),k.getUTCMilliseconds()),_}return new Date(u+p+h)}var Us={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},iC=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rC=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dC=/^([+-])(\d{2})(?::?(\d{2}))?$/;function uC(t){var e={},n=t.split(Us.dateTimeDelimiter),a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Us.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Us.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){var o=Us.timezone.exec(a);o?(e.time=a.replace(o[1],""),e.timezone=o[1]):e.time=a}return e}function cC(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};var o=a[1]?parseInt(a[1]):null,l=a[2]?parseInt(a[2]):null;return{year:l===null?o:l*100,restDateString:t.slice((a[1]||a[2]).length)}}function mC(t,e){if(e===null)return new Date(NaN);var n=t.match(iC);if(!n)return new Date(NaN);var a=!!n[4],o=$s(n[1]),l=$s(n[2])-1,i=$s(n[3]),u=$s(n[4]),p=$s(n[5])-1;if(a)return gC(e,u,p)?_C(e,u,p):new Date(NaN);var h=new Date(0);return!vC(e,l,i)||!bC(e,o)?new Date(NaN):(h.setUTCFullYear(e,l,Math.max(o,i)),h)}function $s(t){return t?parseInt(t):1}function pC(t){var e=t.match(rC);if(!e)return NaN;var n=rn(e[1]),a=rn(e[2]),o=rn(e[3]);return yC(n,a,o)?n*Vn+a*Un+o*1e3:NaN}function rn(t){return t&&parseFloat(t.replace(",","."))||0}function hC(t){if(t==="Z")return 0;var e=t.match(dC);if(!e)return 0;var n=e[1]==="+"?-1:1,a=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return $C(a,o)?n*(a*Vn+o*Un):NaN}function _C(t,e,n){var a=new Date(0);a.setUTCFullYear(t,0,4);var o=a.getUTCDay()||7,l=(e-1)*7+n+1-o;return a.setUTCDate(a.getUTCDate()+l),a}var fC=[31,null,31,30,31,30,31,31,30,31,30,31];function na(t){return t%400===0||t%4===0&&t%100!==0}function vC(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(fC[e]||(na(t)?29:28))}function bC(t,e){return e>=1&&e<=(na(t)?366:365)}function gC(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function yC(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function $C(t,e){return e>=0&&e<=59}function oa(t,e){fe(2,arguments);var n=$e(t),a=ke(e),o=n.getFullYear(),l=n.getDate(),i=new Date(0);i.setFullYear(o,a,15),i.setHours(0,0,0,0);var u=s3(i);return n.setMonth(a,Math.min(l,u)),n}function Ee(t,e){if(fe(2,arguments),yt(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=$e(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=oa(n,e.month)),e.date!=null&&n.setDate(ke(e.date)),e.hours!=null&&n.setHours(ke(e.hours)),e.minutes!=null&&n.setMinutes(ke(e.minutes)),e.seconds!=null&&n.setSeconds(ke(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(ke(e.milliseconds)),n)}function aa(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return n.setHours(a),n}function xn(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return n.setMilliseconds(a),n}function la(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return n.setMinutes(a),n}function Nn(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return n.setSeconds(a),n}function At(t,e){fe(2,arguments);var n=$e(t),a=ke(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(a),n)}function cs(t,e){fe(2,arguments);var n=ke(e);return wt(t,-n)}function kC(t,e){if(fe(2,arguments),!e||yt(e)!=="object")return new Date(NaN);var n=e.years?ke(e.years):0,a=e.months?ke(e.months):0,o=e.weeks?ke(e.weeks):0,l=e.days?ke(e.days):0,i=e.hours?ke(e.hours):0,u=e.minutes?ke(e.minutes):0,p=e.seconds?ke(e.seconds):0,h=cs(t,a+n*12),k=aC(h,l+o*7),_=u+i*60,F=p+_*60,D=F*1e3,P=new Date(k.getTime()-D);return P}function ia(t,e){fe(2,arguments);var n=ke(e);return Rn(t,-n)}function fs(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),s("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),s("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),s("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}fs.compatConfig={MODE:3};function ra(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),s("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}ra.compatConfig={MODE:3};function En(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}En.compatConfig={MODE:3};function Qn(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}Qn.compatConfig={MODE:3};function Ln(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),s("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}Ln.compatConfig={MODE:3};function Hn(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Hn.compatConfig={MODE:3};function Wn(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[s("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}Wn.compatConfig={MODE:3};function Kn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var da={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(da);var wC=da.exports,Sn={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(a){if(a===null||a===!0||a===!1)return NaN;var o=Number(a);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}t.exports=e.default})(Sn,Sn.exports);var CC=Sn.exports;const FC=Kn(CC);var Pn={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(a){var o=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return o.setUTCFullYear(a.getFullYear()),a.getTime()-o.getTime()}t.exports=e.default})(Pn,Pn.exports);var TC=Pn.exports;const _o=Kn(TC);function DC(t,e){var n=AC(e);return n.formatToParts?PC(n,t):OC(n,t)}var SC={year:0,month:1,day:2,hour:3,minute:4,second:5};function PC(t,e){try{for(var n=t.formatToParts(e),a=[],o=0;o<n.length;o++){var l=SC[n[o].type];l>=0&&(a[l]=parseInt(n[o].value,10))}return a}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function OC(t,e){var n=t.format(e).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[a[3],a[1],a[2],a[4],a[5],a[6]]}var dn={};function AC(t){if(!dn[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";dn[t]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dn[t]}function Xn(t,e,n,a,o,l,i){var u=new Date(0);return u.setUTCFullYear(t,e,n),u.setUTCHours(a,o,l,i),u}var fo=36e5,MC=6e4,un={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Gn(t,e,n){var a,o;if(t===""||(a=un.timezoneZ.exec(t),a))return 0;var l;if(a=un.timezoneHH.exec(t),a)return l=parseInt(a[1],10),vo(l)?-(l*fo):NaN;if(a=un.timezoneHHMM.exec(t),a){l=parseInt(a[1],10);var i=parseInt(a[2],10);return vo(l,i)?(o=Math.abs(l)*fo+i*MC,l>0?-o:o):NaN}if(zC(t)){e=new Date(e||Date.now());var u=n?e:jC(e),p=On(u,t),h=n?p:qC(e,p,t);return-h}return NaN}function jC(t){return Xn(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function On(t,e){var n=DC(t,e),a=Xn(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),o=t.getTime(),l=o%1e3;return o-=l>=0?l:1e3+l,a-o}function qC(t,e,n){var a=t.getTime(),o=a-e,l=On(new Date(o),n);if(e===l)return e;o-=l-e;var i=On(new Date(o),n);return l===i?l:Math.max(l,i)}function vo(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var bo={};function zC(t){if(bo[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),bo[t]=!0,!0}catch{return!1}}var ua=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,cn=36e5,go=6e4,RC=2,ut={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ua};function An(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},a=n.additionalDigits==null?RC:FC(n.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var o=UC(t),l=VC(o.date,a),i=l.year,u=l.restDateString,p=YC(u,i);if(isNaN(p))return new Date(NaN);if(p){var h=p.getTime(),k=0,_;if(o.time&&(k=IC(o.time),isNaN(k)))return new Date(NaN);if(o.timeZone||n.timeZone){if(_=Gn(o.timeZone||n.timeZone,new Date(h+k)),isNaN(_))return new Date(NaN)}else _=_o(new Date(h+k)),_=_o(new Date(h+k+_));return new Date(h+k+_)}else return new Date(NaN)}function UC(t){var e={},n=ut.dateTimePattern.exec(t),a;if(n?(e.date=n[1],a=n[3]):(n=ut.datePattern.exec(t),n?(e.date=n[1],a=n[2]):(e.date=null,a=t)),a){var o=ut.timeZone.exec(a);o?(e.time=a.replace(o[1],""),e.timeZone=o[1].trim()):e.time=a}return e}function VC(t,e){var n=ut.YYY[e],a=ut.YYYYY[e],o;if(o=ut.YYYY.exec(t)||a.exec(t),o){var l=o[1];return{year:parseInt(l,10),restDateString:t.slice(l.length)}}if(o=ut.YY.exec(t)||n.exec(t),o){var i=o[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}return{year:null}}function YC(t,e){if(e===null)return null;var n,a,o,l;if(t.length===0)return a=new Date(0),a.setUTCFullYear(e),a;if(n=ut.MM.exec(t),n)return a=new Date(0),o=parseInt(n[1],10)-1,$o(e,o)?(a.setUTCFullYear(e,o),a):new Date(NaN);if(n=ut.DDD.exec(t),n){a=new Date(0);var i=parseInt(n[1],10);return NC(e,i)?(a.setUTCFullYear(e,0,i),a):new Date(NaN)}if(n=ut.MMDD.exec(t),n){a=new Date(0),o=parseInt(n[1],10)-1;var u=parseInt(n[2],10);return $o(e,o,u)?(a.setUTCFullYear(e,o,u),a):new Date(NaN)}if(n=ut.Www.exec(t),n)return l=parseInt(n[1],10)-1,ko(e,l)?yo(e,l):new Date(NaN);if(n=ut.WwwD.exec(t),n){l=parseInt(n[1],10)-1;var p=parseInt(n[2],10)-1;return ko(e,l,p)?yo(e,l,p):new Date(NaN)}return null}function IC(t){var e,n,a;if(e=ut.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),mn(n)?n%24*cn:NaN;if(e=ut.HHMM.exec(t),e)return n=parseInt(e[1],10),a=parseFloat(e[2].replace(",",".")),mn(n,a)?n%24*cn+a*go:NaN;if(e=ut.HHMMSS.exec(t),e){n=parseInt(e[1],10),a=parseInt(e[2],10);var o=parseFloat(e[3].replace(",","."));return mn(n,a,o)?n%24*cn+a*go+o*1e3:NaN}return null}function yo(t,e,n){e=e||0,n=n||0;var a=new Date(0);a.setUTCFullYear(t,0,4);var o=a.getUTCDay()||7,l=e*7+n+1-o;return a.setUTCDate(a.getUTCDate()+l),a}var BC=[31,28,31,30,31,30,31,31,30,31,30,31],xC=[31,29,31,30,31,30,31,31,30,31,30,31];function ca(t){return t%400===0||t%4===0&&t%100!==0}function $o(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var a=ca(t);if(a&&n>xC[e]||!a&&n>BC[e])return!1}return!0}function NC(t,e){if(e<1)return!1;var n=ca(t);return!(n&&e>366||!n&&e>365)}function ko(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function mn(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}var Mn={exports:{}},jn={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(a,o){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}t.exports=e.default})(jn,jn.exports);var EC=jn.exports;(function(t,e){var n=wC.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(EC);function o(l){return(0,a.default)({},l)}t.exports=e.default})(Mn,Mn.exports);var QC=Mn.exports;const LC=Kn(QC);function HC(t,e,n){var a=An(t,n),o=Gn(e,a,!0),l=new Date(a.getTime()-o),i=new Date(0);return i.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),i.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),i}function WC(t,e,n){if(typeof t=="string"&&!t.match(ua)){var a=LC(n);return a.timeZone=e,An(t,a)}var o=An(t,n),l=Xn(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()).getTime(),i=Gn(e,new Date(l));return new Date(l+i)}function wo(t){return e=>new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function KC(t){return e=>Nt(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:t})}const XC=(t,e,n)=>{const a=[1,2,3,4,5,6,7];let o;if(t!==null)try{o=a.map(KC(t))}catch{o=a.map(wo(e))}else o=a.map(wo(e));const l=o.slice(0,n),i=o.slice(n+1,o.length);return[o[n]].concat(...i).concat(...l)},Zn=(t,e)=>{const n=[];for(let a=+t[0];a<=+t[1];a++)n.push({value:+a,text:`${a}`});return e?n.reverse():n},ma=(t,e,n)=>{const a=[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>{const i=l<10?`0${l}`:l;return new Date(`2017-${i}-01T00:00:00+00:00`)});if(t!==null)try{const l=n==="long"?"MMMM":"MMM";return a.map((i,u)=>{const p=Nt(i,l,{locale:t});return{text:p.charAt(0).toUpperCase()+p.substring(1),value:u}})}catch{}const o=new Intl.DateTimeFormat(e,{month:n,timeZone:"UTC"});return a.map((l,i)=>{const u=o.format(l);return{text:u.charAt(0).toUpperCase()+u.substring(1),value:i}})},GC=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],Ze=t=>{const e=C(t);return e!=null&&e.$el?e==null?void 0:e.$el:e},ZC=t=>Object.assign({type:"dot"},t),pa=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,Ws={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},et=t=>t,Co=t=>t===0?t:!t||isNaN(+t)?null:+t,Fo=t=>t===null,JC=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},e5=t=>{const e=[],n=a=>a.filter(o=>o);for(let a=0;a<t.length;a+=3){const o=[t[a],t[a+1],t[a+2]];e.push(n(o))}return e},Ps=(t,e,n)=>{const a=n!=null,o=e!=null;if(!a&&!o)return!1;const l=+n,i=+e;return a&&o?+t>l||+t<i:a?+t>l:o?+t<i:!1},ms=(t,e)=>e5(t).map(n=>n.map(a=>{const{active:o,disabled:l,isBetween:i,highlighted:u}=e(a);return{...a,active:o,disabled:l,className:{dp__overlay_cell_active:o,dp__overlay_cell:!o,dp__overlay_cell_disabled:l,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:l&&o,dp__cell_in_between:i,"dp--highlighted":u}}})),Et=(t,e,n=!1)=>{t&&e.allowStopPropagation&&(n&&t.stopImmediatePropagation(),t.stopPropagation())},t5=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function s5(t,e){let n=[...document.querySelectorAll(t5())];n=n.filter(o=>!t.contains(o)||o.hasAttribute("data-datepicker-instance"));const a=n.indexOf(t);if(a>=0&&(e?a-1>=0:a+1<=n.length))return n[a+(e?-1:1)]}const n5=(t,e)=>{let n;return function(...a){clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}},To=(t,e,n,a,o)=>{const l=Dn(t,e.slice(0,t.length),new Date);return ws(l)&&Bo(l)?a||o?l:Ee(l,{hours:+n.hours,minutes:+(n==null?void 0:n.minutes),seconds:+(n==null?void 0:n.seconds),milliseconds:0}):null},o5=(t,e,n,a,o)=>{const l=Array.isArray(n)?n[0]:n;if(typeof e=="string")return To(t,e,l,a,o);if(Array.isArray(e)){let i=null;for(const u of e)if(i=To(t,u,l,a,o),i)break;return i}return typeof e=="function"?e(t):null},G=t=>t?new Date(t):new Date,a5=(t,e,n)=>{if(e){const o=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),u=t.getMinutes().toString().padStart(2,"0"),p=n?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${o}-${l}T${i}:${u}:${p}.000Z`}const a=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(a).toISOString()},it=t=>{let e=G(JSON.parse(JSON.stringify(t)));return e=aa(e,0),e=la(e,0),e=Nn(e,0),e=xn(e,0),e},Qt=(t,e,n,a)=>{let o=t?G(t):G();return(e||e===0)&&(o=aa(o,+e)),(n||n===0)&&(o=la(o,+n)),(a||a===0)&&(o=Nn(o,+a)),xn(o,0)},nt=(t,e)=>!t||!e?!1:Ss(it(t),it(e)),Ve=(t,e)=>!t||!e?!1:rs(it(t),it(e)),lt=(t,e)=>!t||!e?!1:Ds(it(t),it(e)),Xs=(t,e,n)=>t!=null&&t[0]&&t!=null&&t[1]?lt(n,t[0])&&nt(n,t[1]):t!=null&&t[0]&&e?lt(n,t[0])&&nt(n,e)||nt(n,t[0])&&lt(n,e):!1,kt=t=>{const e=Ee(new Date(t),{date:1});return it(e)},pn=(t,e,n)=>e&&(n||n===0)?Object.fromEntries(["hours","minutes","seconds"].map(a=>a===e?[a,n]:[a,isNaN(+t[a])?void 0:+t[a]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},Gt=t=>({hours:Ct(t),minutes:Mt(t),seconds:us(t)}),ha=(t,e)=>{if(e){const n=Ae(G(e));if(n>t)return 12;if(n===t)return ze(G(e))}},_a=(t,e)=>{if(e){const n=Ae(G(e));return n<t?-1:n===t?ze(G(e)):void 0}},ps=t=>{if(t)return Ae(G(t))},Ft=(t,e)=>e?HC(t,e):t,fa=(t,e)=>e?WC(t,e):t,l5=t=>t instanceof Date?t:lC(t),va=(t,e)=>{const n=lt(t,e)?e:t,a=lt(e,t)?e:t;return xo({start:n,end:a})},i5=t=>{const e=wt(t,1);return{month:ze(e),year:Ae(e)}},Is=(t,e,n)=>{const a=es(Ft(t,e),{weekStartsOn:+n}),o=X2(Ft(t,e),{weekStartsOn:+n});return[a,o]},ba=(t,e)=>{const n={hours:Ct(G()),minutes:Mt(G()),seconds:e?us(G()):0};return Object.assign(n,t)},xt=(t,e,n)=>[Ee(G(t),{date:1}),Ee(G(),{month:e,year:n,date:1})],Rt=(t,e,n)=>{let a=t?G(t):G();return(e||e===0)&&(a=oa(a,e)),n&&(a=At(a,n)),a},ga=(t,e,n,a,o)=>{if(!a||o&&!e||!o&&!n)return!1;const l=o?wt(t,1):cs(t,1),i=[ze(l),Ae(l)];return o?!d5(...i,e):!r5(...i,n)},r5=(t,e,n)=>nt(...xt(n,t,e))||Ve(...xt(n,t,e)),d5=(t,e,n)=>lt(...xt(n,t,e))||Ve(...xt(n,t,e)),ya=(t,e,n,a,o,l,i)=>{if(typeof e=="function"&&!i)return e(t);const u=n?{locale:n}:void 0;return Array.isArray(t)?`${Nt(t[0],l,u)}${o&&!t[1]?"":a}${t[1]?Nt(t[1],l,u):""}`:Nt(t,l,u)},ls=t=>{if(t)return null;throw new Error(Ws.prop("partial-range"))},Vs=(t,e)=>{if(e)return t();throw new Error(Ws.prop("range"))},qn=t=>Array.isArray(t)?ws(t[0])&&(t[1]?ws(t[1]):!0):t?ws(t):!1,u5=(t,e)=>Ee(e??G(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),hn=(t,e,n,a)=>{if(!t)return!0;if(a){const o=n==="max"?Ss(t,e):Ds(t,e),l={seconds:0,milliseconds:0};return o||rs(Ee(t,l),Ee(e,l))}return n==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},_n=(t,e,n)=>t?u5(t,e):G(n??e),Do=(t,e,n,a,o)=>{if(Array.isArray(a)){const i=_n(t,a[0],e),u=_n(t,a[1],e);return hn(a[0],i,n,!!e)&&hn(a[1],u,n,!!e)&&o}const l=_n(t,a,e);return hn(a,l,n,!!e)&&o},fn=t=>Ee(G(),Gt(t)),c5=(t,e)=>Array.isArray(t)?t.map(n=>G(n)).filter(n=>Ae(G(n))===e).map(n=>ze(n)):[],$a=(t,e,n)=>typeof t=="function"?t({month:e,year:n}):!!t.months.find(a=>a.month===e&&a.year===n),Jn=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),ks=Os({menuFocused:!1,shiftKeyInMenu:!1}),ka=()=>{const t=n=>{ks.menuFocused=n},e=n=>{ks.shiftKeyInMenu!==n&&(ks.shiftKeyInMenu=n)};return{control:te(()=>({shiftKeyInMenu:ks.shiftKeyInMenu,menuFocused:ks.menuFocused})),setMenuFocused:t,setShiftKey:e}},Ne=Os({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),vn=ce(null),Ys=ce(!1),bn=ce(!1),gn=ce(!1),yn=ce(!1),dt=ce(0),st=ce(0),Wt=()=>{const t=te(()=>Ys.value?[...Ne.selectionGrid,Ne.actionRow].filter(_=>_.length):bn.value?[...Ne.timePicker[0],...Ne.timePicker[1],yn.value?[]:[vn.value],Ne.actionRow].filter(_=>_.length):gn.value?[...Ne.monthPicker,Ne.actionRow]:[Ne.monthYear,...Ne.calendar,Ne.time,Ne.actionRow].filter(_=>_.length)),e=_=>{dt.value=_?dt.value+1:dt.value-1;let F=null;t.value[st.value]&&(F=t.value[st.value][dt.value]),F||(dt.value=_?dt.value-1:dt.value+1)},n=_=>{st.value===0&&!_||st.value===t.value.length&&_||(st.value=_?st.value+1:st.value-1,t.value[st.value]?t.value[st.value]&&!t.value[st.value][dt.value]&&dt.value!==0&&(dt.value=t.value[st.value].length-1):st.value=_?st.value-1:st.value+1)},a=_=>{let F=null;t.value[st.value]&&(F=t.value[st.value][dt.value]),F?F.focus({preventScroll:!Ys.value}):dt.value=_?dt.value-1:dt.value+1},o=()=>{e(!0),a(!0)},l=()=>{e(!1),a(!1)},i=()=>{n(!1),a(!0)},u=()=>{n(!0),a(!0)},p=(_,F)=>{Ne[F]=_},h=(_,F)=>{Ne[F]=_},k=()=>{dt.value=0,st.value=0};return{buildMatrix:p,buildMultiLevelMatrix:h,setTimePickerBackRef:_=>{vn.value=_},setSelectionGrid:_=>{Ys.value=_,k(),_||(Ne.selectionGrid=[])},setTimePicker:(_,F=!1)=>{bn.value=_,yn.value=F,k(),_||(Ne.timePicker[0]=[],Ne.timePicker[1]=[])},setTimePickerElements:(_,F=0)=>{Ne.timePicker[F]=_},arrowRight:o,arrowLeft:l,arrowUp:i,arrowDown:u,clearArrowNav:()=>{Ne.monthYear=[],Ne.calendar=[],Ne.time=[],Ne.actionRow=[],Ne.selectionGrid=[],Ne.timePicker[0]=[],Ne.timePicker[1]=[],Ys.value=!1,bn.value=!1,yn.value=!1,gn.value=!1,k(),vn.value=null},setMonthPicker:_=>{gn.value=_,k()},refSets:Ne}},So=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),m5=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...t??{}}),Po=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,p5=t=>{const e=typeof t=="object"&&t,n={static:!0,solo:!1};if(!t)return{...n,count:Po(!1)};const a=e?t:{},o=e?a.count??!0:t,l=Po(o);return Object.assign(n,a,{count:l})},h5=(t,e,n)=>t||(typeof n=="string"?n:e),_5=t=>typeof t=="boolean"?t?So({}):!1:So(t),f5=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},v5=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),b5=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),g5=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},y5=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...t??{}}),$5=(t,e,n)=>{const a={dates:Array.isArray(t)?t.map(o=>G(o)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:n}};return typeof t=="function"?t:{...a,...t??{}}},k5=t=>typeof t=="object"?{type:t.type,hideOnOffsetDates:t.hideOnOffsetDates??!1}:{type:t,hideOnOffsetDates:!1},Xe=t=>{const e=()=>{const U=t.enableSeconds?":ss":"";return t.is24?`HH:mm${U}`:`hh:mm${U} aa`},n=()=>t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?"MM/dd/yyyy":t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",a=U=>ba(U,t.enableSeconds),o=()=>t.range?t.startTime&&Array.isArray(t.startTime)?[a(t.startTime[0]),a(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?a(t.startTime):null,l=te(()=>p5(t.multiCalendars)),i=te(()=>o()),u=te(()=>m5(t.ariaLabels)),p=te(()=>v5(t.filters)),h=te(()=>_5(t.transitions)),k=te(()=>b5(t.actionRow)),_=te(()=>h5(t.previewFormat,t.format,n())),F=te(()=>f5(t.textInput)),D=te(()=>g5(t.inline)),P=te(()=>y5(t.config)),x=te(()=>$5(t.highlight,t.highlightWeekDays,t.highlightDisabledDays)),ee=te(()=>k5(t.weekNumbers));return{defaultedTransitions:h,defaultedMultiCalendars:l,defaultedStartTime:i,defaultedAriaLabels:u,defaultedFilters:p,defaultedActionRow:k,defaultedPreviewFormat:_,defaultedTextInput:F,defaultedInline:D,defaultedConfig:P,defaultedHighlight:x,defaultedWeekNumbers:ee,getDefaultPattern:n,getDefaultStartTime:o}},w5=(t,e,n)=>{const a=ce(),{defaultedTextInput:o,getDefaultPattern:l}=Xe(e),i=ce(""),u=xs(e,"format");Ht(a,()=>{t("internal-model-change",a.value)}),Ht(u,()=>{Y()});const p=m=>fa(m,e.timezone),h=m=>Ft(m,e.timezone),k=(m,A,I=!1)=>ya(m,e.format,e.formatLocale,o.value.rangeSeparator,e.modelAuto,A??l(),I),_=m=>m?e.modelType?q(m):{hours:Ct(m),minutes:Mt(m),seconds:e.enableSeconds?us(m):0}:null,F=m=>e.modelType?q(m):{month:ze(m),year:Ae(m)},D=m=>Array.isArray(m)?e.multiDates?m.map(A=>P(A,At(G(),A))):Vs(()=>[At(G(),m[0]),m[1]?At(G(),m[1]):ls(e.partialRange)],e.range):At(G(),+m),P=(m,A)=>(typeof m=="string"||typeof m=="number")&&e.modelType?g(m):A,x=m=>Array.isArray(m)?[P(m[0],Qt(null,+m[0].hours,+m[0].minutes,m[0].seconds)),P(m[1],Qt(null,+m[1].hours,+m[1].minutes,m[1].seconds))]:P(m,Qt(null,m.hours,m.minutes,m.seconds)),ee=m=>Array.isArray(m)?e.multiDates?m.map(A=>P(A,Rt(null,+A.month,+A.year))):Vs(()=>[P(m[0],Rt(null,+m[0].month,+m[0].year)),P(m[1],m[1]?Rt(null,+m[1].month,+m[1].year):ls(e.partialRange))],e.range):P(m,Rt(null,+m.month,+m.year)),U=m=>{if(Array.isArray(m))return m.map(A=>g(A));throw new Error(Ws.dateArr("multi-dates"))},V=m=>{if(Array.isArray(m))return[G(m[0]),G(m[1])];throw new Error(Ws.dateArr("week-picker"))},se=m=>e.modelAuto?Array.isArray(m)?[g(m[0]),g(m[1])]:e.autoApply?[g(m)]:[g(m),null]:Array.isArray(m)?Vs(()=>[g(m[0]),m[1]?g(m[1]):ls(e.partialRange)],e.range):g(m),S=()=>{Array.isArray(a.value)&&e.range&&a.value.length===1&&a.value.push(ls(e.partialRange))},L=()=>{const m=a.value;return[q(m[0]),m[1]?q(m[1]):ls(e.partialRange)]},W=()=>a.value[1]?L():q(et(a.value[0])),Q=()=>(a.value||[]).map(m=>q(m)),he=()=>(S(),e.modelAuto?W():e.multiDates?Q():Array.isArray(a.value)?Vs(()=>L(),e.range):q(et(a.value))),ne=m=>!m||Array.isArray(m)&&!m.length?null:e.timePicker?x(et(m)):e.monthPicker?ee(et(m)):e.yearPicker?D(et(m)):e.multiDates?U(et(m)):e.weekPicker?V(et(m)):se(et(m)),y=m=>{const A=ne(m);qn(et(A))?(a.value=et(A),Y()):(a.value=null,i.value="")},M=()=>{const m=A=>Nt(A,o.value.format);return`${m(a.value[0])} ${o.value.rangeSeparator} ${a.value[1]?m(a.value[1]):""}`},X=()=>n.value&&a.value?Array.isArray(a.value)?M():Nt(a.value,o.value.format):k(a.value),re=()=>a.value?e.multiDates?a.value.map(m=>k(m)).join("; "):o.value.enabled&&typeof o.value.format=="string"?X():k(a.value):"",Y=()=>{!e.format||typeof e.format=="string"||o.value.enabled&&typeof o.value.format=="string"?i.value=re():i.value=e.format(a.value)},g=m=>{if(e.utc){const A=new Date(m);return e.utc==="preserve"?new Date(A.getTime()+A.getTimezoneOffset()*6e4):A}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?h(new Date(m)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?Dn(m,l(),new Date):h(Dn(m,e.modelType,new Date)):h(new Date(m))},q=m=>m?e.utc?a5(m,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+p(m):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?k(p(m)):k(p(m),e.modelType,!0):p(m):"",z=(m,A=!1)=>{if(t("update:model-value",m),e.emitTimezone&&A){const I=Array.isArray(m)?m.map(le=>Ft(et(le)),e.emitTimezone):Ft(et(m),e.emitTimezone);t("update:model-timezone-value",I)}},K=m=>Array.isArray(a.value)?e.multiDates?a.value.map(A=>m(A)):[m(a.value[0]),a.value[1]?m(a.value[1]):ls(e.partialRange)]:m(et(a.value)),f=m=>z(et(K(m)));return{inputValue:i,internalModelValue:a,checkBeforeEmit:()=>a.value?e.range?e.partialRange?a.value.length>=1:a.value.length===2:!!a.value:!1,parseExternalModelValue:y,formatInputValue:Y,emitModelValue:()=>(Y(),e.monthPicker?f(F):e.timePicker?f(_):e.yearPicker?f(Ae):e.weekPicker?z(a.value.map(m=>q(m)),!0):z(he(),!0))}},C5=(t,e)=>{const{defaultedFilters:n}=Xe(t),{validateMonthYearInRange:a}=ns(t),o=(h,k)=>{let _=h;return n.value.months.includes(ze(_))?(_=k?wt(h,1):cs(h,1),o(_,k)):_},l=(h,k)=>{let _=h;return n.value.years.includes(Ae(_))?(_=k?Rn(h,1):ia(h,1),l(_,k)):_},i=(h,k=!1)=>{const _=Ee(new Date,{month:t.month,year:t.year});let F=h?wt(_,1):cs(_,1);t.disableYearSelect&&(F=At(F,t.year));let D=ze(F),P=Ae(F);n.value.months.includes(D)&&(F=o(F,h),D=ze(F),P=Ae(F)),n.value.years.includes(P)&&(F=l(F,h),P=Ae(F)),a(D,P,h,t.preventMinMaxNavigation)&&u(D,P,k)},u=(h,k,_)=>{e("update-month-year",{month:h,year:k,fromNav:_})},p=te(()=>h=>ga(Ee(new Date,{month:t.month,year:t.year}),t.maxDate,t.minDate,t.preventMinMaxNavigation,h));return{handleMonthYearChange:i,isDisabled:p,updateMonthYear:u}};var is=(t=>(t.center="center",t.left="left",t.right="right",t))(is||{}),$t=(t=>(t.month="month",t.year="year",t))($t||{}),Xt=(t=>(t.top="top",t.bottom="bottom",t))(Xt||{}),Zt=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(Zt||{}),St=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(St||{});const F5=({menuRef:t,menuRefInner:e,inputRef:n,pickerWrapperRef:a,inline:o,emit:l,props:i,slots:u})=>{const p=ce({}),h=ce(!1),k=ce({top:"0",left:"0"}),_=ce(!1),F=xs(i,"teleportCenter");Ht(F,()=>{k.value=JSON.parse(JSON.stringify({})),S()});const D=g=>{if(i.teleport){const q=g.getBoundingClientRect();return{left:q.left+window.scrollX,top:q.top+window.scrollY}}return{top:0,left:0}},P=(g,q)=>{k.value.left=`${g+q-p.value.width}px`},x=g=>{k.value.left=`${g}px`},ee=(g,q)=>{i.position===is.left&&x(g),i.position===is.right&&P(g,q),i.position===is.center&&(k.value.left=`${g+q/2-p.value.width/2}px`)},U=g=>{const{width:q,height:z}=g.getBoundingClientRect(),{top:K,left:f}=i.altPosition?i.altPosition(g):D(g);return{top:+K,left:+f,width:q,height:z}},V=()=>{k.value.left="50%",k.value.top="50%",k.value.transform="translate(-50%, -50%)",k.value.position="fixed",delete k.value.opacity},se=()=>{const g=Ze(n),{top:q,left:z,transform:K}=i.altPosition(g);k.value={top:`${q}px`,left:`${z}px`,transform:K??""}},S=(g=!0)=>{var q;if(!o.value.enabled){if(F.value)return V();if(i.altPosition!==null)return se();if(g){const z=i.teleport?(q=e.value)==null?void 0:q.$el:t.value;z&&(p.value=z.getBoundingClientRect()),l("recalculate-position")}return M()}},L=({inputEl:g,left:q,width:z})=>{window.screen.width>768&&!h.value&&ee(q,z),he(g)},W=g=>{const{top:q,left:z,height:K,width:f}=U(g);k.value.top=`${K+q+ +i.offset}px`,_.value=!1,h.value||(k.value.left=`${z+f/2-p.value.width/2}px`),L({inputEl:g,left:z,width:f})},Q=g=>{const{top:q,left:z,width:K}=U(g);k.value.top=`${q-+i.offset-p.value.height}px`,_.value=!0,L({inputEl:g,left:z,width:K})},he=g=>{if(i.autoPosition){const{left:q,width:z}=U(g),{left:K,right:f}=p.value;if(!h.value){if(Math.abs(K)!==Math.abs(f)){if(K<=0)return h.value=!0,x(q);if(f>=document.documentElement.clientWidth)return h.value=!0,P(q,z)}return ee(q,z)}}},ne=()=>{const g=Ze(n);if(g){const{height:q}=p.value,{top:z,height:K}=g.getBoundingClientRect(),f=window.innerHeight-z-K,m=z;return q<=f?Xt.bottom:q>f&&q<=m?Xt.top:f>=m?Xt.bottom:Xt.top}return Xt.bottom},y=g=>ne()===Xt.bottom?W(g):Q(g),M=()=>{const g=Ze(n);if(g)return i.autoPosition?y(g):W(g)},X=function(g){if(g){const q=g.scrollHeight>g.clientHeight,z=window.getComputedStyle(g).overflowY.indexOf("hidden")!==-1;return q&&!z}return!0},re=function(g){return!g||g===document.body||g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:X(g)?g:re(g.parentNode)},Y=g=>{if(g)switch(i.position){case is.left:return{left:0,transform:"translateX(0)"};case is.right:return{left:`${g.width}px`,transform:"translateX(-100%)"};default:return{left:`${g.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:_,menuStyle:k,xCorrect:h,setMenuPosition:S,getScrollableParent:re,shadowRender:(g,q)=>{var z,K,f;const m=document.createElement("div"),A=(z=Ze(n))==null?void 0:z.getBoundingClientRect();m.setAttribute("id","dp--temp-container");const I=(K=a.value)!=null&&K.clientWidth?a.value:document.body;I.append(m);const le=Y(A),de=ja(g,{...q,shadow:!0,style:{opacity:0,position:"absolute",...le}},Object.fromEntries(Object.keys(u).filter(R=>["right-sidebar","left-sidebar"].includes(R)).map(R=>[R,u[R]])));no(de,m),p.value=(f=de.el)==null?void 0:f.getBoundingClientRect(),no(null,m),I.removeChild(m)}}},Bt=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],T5=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],D5={all:()=>Bt,monthYear:()=>Bt.filter(t=>t.use.includes("month-year")),input:()=>T5,timePicker:()=>Bt.filter(t=>t.use.includes("time")),action:()=>Bt.filter(t=>t.use.includes("action")),calendar:()=>Bt.filter(t=>t.use.includes("calendar")),menu:()=>Bt.filter(t=>t.use.includes("menu")),shared:()=>Bt.filter(t=>t.use.includes("shared")),yearMode:()=>Bt.filter(t=>t.use.includes("year-mode"))},ht=(t,e,n)=>{const a=[];return D5[e]().forEach(o=>{t[o.name]&&a.push(o.name)}),n!=null&&n.length&&n.forEach(o=>{o.slot&&a.push(o.slot)}),a},As=t=>{const e=te(()=>a=>t.value?a?t.value.open:t.value.close:""),n=te(()=>a=>t.value?a?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:n}},Ms=(t,e)=>{const n=G(Ft(new Date,t.timezone)),a=ce([{month:ze(n),year:Ae(n)}]),o=Os({hours:t.range?[Ct(n),Ct(n)]:Ct(n),minutes:t.range?[Mt(n),Mt(n)]:Mt(n),seconds:t.range?[0,0]:0}),l=te({get:()=>t.internalModelValue,set:p=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",p)}}),i=te(()=>p=>a.value[p]?a.value[p].month:0),u=te(()=>p=>a.value[p]?a.value[p].year:0);return{calendars:a,time:o,modelValue:l,month:i,year:u}},S5=(t,e)=>{const{defaultedMultiCalendars:n,defaultedHighlight:a}=Xe(e),{isDisabled:o,matchDate:l}=ns(e),i=ce(null),u=ce(G(Ft(new Date,e.timezone))),p=f=>{!f.current&&e.hideOffsetDates||(i.value=f.value)},h=()=>{i.value=null},k=f=>Array.isArray(t.value)&&e.range&&t.value[0]&&i.value?f?lt(i.value,t.value[0]):nt(i.value,t.value[0]):!0,_=(f,m)=>{const A=()=>t.value?m?t.value[0]||null:t.value[1]:null,I=t.value&&Array.isArray(t.value)?A():null;return Ve(G(f.value),I)},F=f=>{const m=Array.isArray(t.value)?t.value[0]:null;return f?!nt(i.value??null,m):!0},D=(f,m=!0)=>(e.range||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!f.current?!1:Ve(G(f.value),t.value[m?0:1]):e.range?_(f,m)&&F(m)||Ve(f.value,Array.isArray(t.value)?t.value[0]:null)&&k(m):!1,P=(f,m,A)=>Array.isArray(t.value)&&t.value[0]&&t.value.length===1?f?!1:A?lt(t.value[0],m.value):nt(t.value[0],m.value):!1,x=f=>!t.value||e.hideOffsetDates&&!f.current?!1:e.range?e.modelAuto&&Array.isArray(t.value)?Ve(f.value,t.value[0]?t.value[0]:u.value):!1:e.multiDates&&Array.isArray(t.value)?t.value.some(m=>Ve(m,f.value)):Ve(f.value,t.value?t.value:u.value),ee=f=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!f.current)return!1;const m=zt(i.value,+e.autoRange),A=Is(G(i.value),e.timezone,e.weekStart);return e.weekPicker?Ve(A[1],G(f.value)):Ve(m,G(f.value))}return!1}return!1},U=f=>{if(e.autoRange||e.weekPicker){if(i.value){const m=zt(i.value,+e.autoRange);if(e.hideOffsetDates&&!f.current)return!1;const A=Is(G(i.value),e.timezone,e.weekStart);return e.weekPicker?lt(f.value,A[0])&&nt(f.value,A[1]):lt(f.value,i.value)&&nt(f.value,m)}return!1}return!1},V=f=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!f.current)return!1;const m=Is(G(i.value),e.timezone,e.weekStart);return e.weekPicker?Ve(m[0],f.value):Ve(i.value,f.value)}return!1}return!1},se=f=>Xs(t.value,i.value,f.value),S=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,L=()=>e.modelAuto?pa(e.internalModelValue):!0,W=f=>{if(Array.isArray(t.value)&&t.value.length||e.weekPicker)return!1;const m=e.range?!D(f)&&!D(f,!1):!0;return!o(f.value)&&!x(f)&&!(!f.current&&e.hideOffsetDates)&&m},Q=f=>e.range?e.modelAuto?S()&&x(f):!1:x(f),he=f=>{var m;return a.value?typeof a.value=="function"?a.value(f.value):l(f.value,(m=e.arrMapValues)!=null&&m.highlightedDates?e.arrMapValues.highlightedDates:a.value.dates):!1},ne=f=>{const m=o(f.value);return m&&(typeof a.value=="function"?!a.value(f.value,m):!a.value.options.highlightDisabled)},y=f=>{var m;return typeof a.value=="function"?a.value(f.value):(m=a.value.weekdays)==null?void 0:m.includes(f.value.getDay())},M=f=>(e.range||e.weekPicker)&&(!(n.value.count>0)||f.current)&&L()&&!(!f.current&&e.hideOffsetDates)&&!x(f)?se(f):!1,X=f=>{const{isRangeStart:m,isRangeEnd:A}=g(f),I=e.range?m||A:!1;return{dp__cell_offset:!f.current,dp__pointer:!e.disabled&&!(!f.current&&e.hideOffsetDates)&&!o(f.value),dp__cell_disabled:o(f.value),dp__cell_highlight:!ne(f)&&(he(f)||y(f))&&!Q(f)&&!I&&!V(f)&&!(M(f)&&e.weekPicker)&&!A,dp__cell_highlight_active:!ne(f)&&(he(f)||y(f))&&Q(f),dp__today:!e.noToday&&Ve(f.value,u.value)&&f.current}},re=f=>({dp__active_date:Q(f),dp__date_hover:W(f)}),Y=f=>({...q(f),...z(f),dp__range_between_week:M(f)&&e.weekPicker}),g=f=>{const m=n.value.count>0?f.current&&D(f)&&L():D(f)&&L(),A=n.value.count>0?f.current&&D(f,!1)&&L():D(f,!1)&&L();return{isRangeStart:m,isRangeEnd:A}},q=f=>{const{isRangeStart:m,isRangeEnd:A}=g(f);return{dp__range_start:m,dp__range_end:A,dp__range_between:M(f)&&!e.weekPicker,dp__date_hover_start:P(W(f),f,!0),dp__date_hover_end:P(W(f),f,!1)}},z=f=>({...q(f),dp__cell_auto_range:U(f),dp__cell_auto_range_start:V(f),dp__cell_auto_range_end:ee(f)}),K=f=>e.range?e.autoRange?z(f):e.modelAuto?{...re(f),...q(f)}:q(f):e.weekPicker?Y(f):re(f);return{setHoverDate:p,clearHoverDate:h,getDayClassData:f=>e.hideOffsetDates&&!f.current?{}:{...X(f),...K(f),[e.dayClass?e.dayClass(f.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},ns=t=>{const{defaultedFilters:e,defaultedHighlight:n}=Xe(t),a=()=>{if(t.timezone)return t.timezone;if(t.utc)return"UTC"},o=y=>{const M=it(l(G(y))).toISOString(),[X]=M.split("T");return X},l=y=>t.utc==="preserve"?fa(y,a()):Ft(y,a()),i=y=>{var M;const X=t.maxDate?lt(y,l(G(t.maxDate))):!1,re=t.minDate?nt(y,l(G(t.minDate))):!1,Y=k(l(y),(M=t.arrMapValues)!=null&&M.disabledDates?t.arrMapValues.disabledDates:t.disabledDates),g=e.value.months.map(m=>+m).includes(ze(y)),q=t.disabledWeekDays.length?t.disabledWeekDays.some(m=>+m===t3(y)):!1,z=F(y),K=Ae(y),f=K<+t.yearRange[0]||K>+t.yearRange[1];return!(X||re||Y||g||f||q||z)},u=(y,M)=>nt(...xt(t.minDate,y,M))||Ve(...xt(t.minDate,y,M)),p=(y,M)=>lt(...xt(t.maxDate,y,M))||Ve(...xt(t.maxDate,y,M)),h=(y,M,X)=>{let re=!1;return t.maxDate&&X&&p(y,M)&&(re=!0),t.minDate&&!X&&u(y,M)&&(re=!0),re},k=(y,M)=>y?M instanceof Map?!!M.get(o(y)):Array.isArray(M)?M.some(X=>Ve(l(G(X)),y)):M?M(G(JSON.parse(JSON.stringify(y)))):!1:!0,_=(y,M,X,re)=>{let Y=!1;return re?t.minDate&&t.maxDate?Y=h(y,M,X):(t.minDate&&u(y,M)||t.maxDate&&p(y,M))&&(Y=!0):Y=!0,Y},F=y=>{var M,X,re,Y,g;return Array.isArray(t.allowedDates)&&!((M=t.allowedDates)!=null&&M.length)?!0:(X=t.arrMapValues)!=null&&X.allowedDates?!k(y,(re=t.arrMapValues)==null?void 0:re.allowedDates):(Y=t.allowedDates)!=null&&Y.length?!((g=t.allowedDates)!=null&&g.some(q=>Ve(it(q),l(it(y))))):!1},D=y=>!i(y),P=y=>t.noDisabledRange?!xo({start:y[0],end:y[1]}).some(M=>D(M)):!0,x=(y,M,X=0)=>{if(Array.isArray(M)&&M[X]){const re=E2(y,M[X]),Y=va(M[X],y),g=Y.length===1?0:Y.filter(z=>D(z)).length,q=Math.abs(re)-g;if(t.minRange&&t.maxRange)return q>=+t.minRange&&q<=+t.maxRange;if(t.minRange)return q>=+t.minRange;if(t.maxRange)return q<=+t.maxRange}return!0},ee=y=>new Map(y.map(M=>[o(M),!0])),U=y=>Array.isArray(y)&&y.length>0,V=()=>{const y={disabledDates:null,allowedDates:null,highlightedDates:null};return U(t.allowedDates)&&(y.allowedDates=ee(t.allowedDates)),typeof n.value!="function"&&U(n.value.dates)&&(y.highlightedDates=ee(n.value.dates)),U(t.disabledDates)&&(y.disabledDates=ee(t.disabledDates)),y},se=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,S=y=>Array.isArray(y)?[y[0]?fn(y[0]):null,y[1]?fn(y[1]):null]:fn(y),L=(y,M,X)=>y.find(re=>+re.hours===Ct(M)&&re.minutes==="*"?!0:+re.minutes===Mt(M)&&+re.hours===Ct(M))&&X,W=(y,M,X)=>{const[re,Y]=y,[g,q]=M;return!L(re,g,X)&&!L(Y,q,X)&&X},Q=(y,M)=>{const X=Array.isArray(M)?M:[M];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?W(t.disabledTimes,X,y):!X.some(re=>L(t.disabledTimes,re,y)):y},he=(y,M)=>{const X=Array.isArray(M)?[Gt(M[0]),M[1]?Gt(M[1]):void 0]:Gt(M),re=!t.disabledTimes(X);return y&&re},ne=(y,M)=>t.disabledTimes?Array.isArray(t.disabledTimes)?Q(M,y):he(M,y):M;return{isDisabled:D,validateDate:i,validateMonthYearInRange:_,isDateRangeAllowed:P,checkMinMaxRange:x,matchDate:k,mapDatesArrToMap:V,isValidTime:y=>{let M=!0;if(!y||se())return!0;const X=!t.minDate&&!t.maxDate?S(y):y;return(t.maxTime||t.maxDate)&&(M=Do(t.maxTime,t.maxDate,"max",et(X),M)),(t.minTime||t.minDate)&&(M=Do(t.minTime,t.minDate,"min",et(X),M)),ne(y,M)}}},Gs=()=>{const t=te(()=>(a,o)=>a==null?void 0:a.includes(o)),e=te(()=>(a,o)=>a.count?a.solo?!0:o===0:!0),n=te(()=>(a,o)=>a.count?a.solo?!0:o===a.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:n}},P5=(t,e,n)=>{const a=ce(0),o=Os({[Zt.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[Zt.calendar]:!1,[Zt.header]:!1}),l=te(()=>t.monthPicker),i=_=>{var F;if((F=t.flow)!=null&&F.length){if(!_&&l.value)return k();o[_]=!0,Object.keys(o).filter(D=>!o[D]).length||k()}},u=()=>{var _;(_=t.flow)!=null&&_.length&&a.value!==-1&&(a.value+=1,e("flow-step",a.value),k())},p=()=>{a.value=-1},h=(_,F,...D)=>{t.flow[a.value]===_&&n.value&&n.value[F](...D)},k=()=>{h(St.month,"toggleMonthPicker",!0),h(St.year,"toggleYearPicker",!0),h(St.calendar,"toggleTimePicker",!1,!0),h(St.time,"toggleTimePicker",!0,!0);const _=t.flow[a.value];(_===St.hours||_===St.minutes||_===St.seconds)&&h(_,"toggleTimePicker",!0,!0,_)};return{childMount:i,updateFlowStep:u,resetFlow:p,flowStep:a}},Zs={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},Tt={...Zs,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},O5={key:1,class:"dp__input_wrap"},A5=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],M5={key:2,class:"dp__clear_icon"},j5=tt({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Zs},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(t,{expose:e,emit:n}){const a=n,o=t,{defaultedTextInput:l,defaultedAriaLabels:i,defaultedInline:u,defaultedConfig:p,getDefaultPattern:h,getDefaultStartTime:k}=Xe(o),{checkMinMaxRange:_}=ns(o),F=ce(),D=ce(null),P=ce(!1),x=ce(!1),ee=te(()=>({dp__pointer:!o.disabled&&!o.readonly&&!l.value.enabled,dp__disabled:o.disabled,dp__input_readonly:!l.value.enabled,dp__input:!0,dp__input_icon_pad:!o.hideInputIcon,dp__input_valid:!!o.state,dp__input_invalid:o.state===!1,dp__input_focus:P.value||o.isMenuOpen,dp__input_reg:!l.value.enabled,[o.inputClassName]:!!o.inputClassName})),U=()=>{a("set-input-date",null),o.autoApply&&(a("set-empty-date"),F.value=null)},V=Y=>{const g=k();return o5(Y,l.value.format??h(),g??ba({},o.enableSeconds),o.inputValue,x.value)},se=Y=>{const{rangeSeparator:g}=l.value,[q,z]=Y.split(`${g}`);if(q){const K=V(q.trim()),f=z?V(z.trim()):null,m=K&&f?[K,f]:[K];_(f,m,0)&&(F.value=K?m:null)}},S=()=>{x.value=!0},L=Y=>{if(o.range)se(Y);else if(o.multiDates){const g=Y.split(";");F.value=g.map(q=>V(q.trim())).filter(q=>q)}else F.value=V(Y)},W=Y=>{var g;const q=typeof Y=="string"?Y:(g=Y.target)==null?void 0:g.value;q!==""?(l.value.openMenu&&!o.isMenuOpen&&a("open"),L(q),a("set-input-date",F.value)):U(),x.value=!1,a("update:input-value",q)},Q=Y=>{l.value.enabled?(L(Y.target.value),l.value.enterSubmit&&qn(F.value)&&o.inputValue!==""?(a("set-input-date",F.value,!0),F.value=null):l.value.enterSubmit&&o.inputValue===""&&(F.value=null,a("clear"))):y(Y)},he=Y=>{l.value.enabled&&l.value.tabSubmit&&L(Y.target.value),l.value.tabSubmit&&qn(F.value)&&o.inputValue!==""?(a("set-input-date",F.value,!0,!0),F.value=null):l.value.tabSubmit&&o.inputValue===""&&(F.value=null,a("clear",!0))},ne=()=>{var Y;P.value=!0,a("focus"),l.value.enabled&&l.value.selectOnFocus&&((Y=D.value)==null||Y.select())},y=Y=>{Y.preventDefault(),Et(Y,p.value,!0),l.value.enabled&&l.value.openMenu&&!u.value.input&&!o.isMenuOpen?a("open"):l.value.enabled||a("toggle")},M=()=>{a("real-blur"),P.value=!1,(!o.isMenuOpen||u.value.enabled&&u.value.input)&&a("blur"),o.autoApply&&l.value.enabled&&F.value&&!o.isMenuOpen&&(a("set-input-date",F.value),a("select-date"),F.value=null)},X=Y=>{Et(Y,p.value,!0),a("clear")},re=Y=>{if(!l.value.enabled){if(Y.code==="Tab")return;Y.preventDefault()}};return e({focusInput:()=>{var Y;(Y=D.value)==null||Y.focus({preventScroll:!0})},setParsedDate:Y=>{F.value=Y}}),(Y,g)=>{var q;return r(),d("div",{onClick:y},[Y.$slots.trigger&&!Y.$slots["dp-input"]&&!C(u).enabled?ye(Y.$slots,"trigger",{key:0}):c("",!0),!Y.$slots.trigger&&(!C(u).enabled||C(u).input)?(r(),d("div",O5,[Y.$slots["dp-input"]&&!Y.$slots.trigger&&!C(u).enabled?ye(Y.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:W,onEnter:Q,onTab:he,onClear:X,onBlur:M,onKeypress:re,onPaste:S,openMenu:()=>Y.$emit("open"),closeMenu:()=>Y.$emit("close"),toggleMenu:()=>Y.$emit("toggle")}):c("",!0),Y.$slots["dp-input"]?c("",!0):(r(),d("input",{key:1,id:Y.uid?`dp-input-${Y.uid}`:void 0,ref_key:"inputRef",ref:D,name:Y.name,class:j(ee.value),inputmode:C(l).enabled?"text":"none",placeholder:Y.placeholder,disabled:Y.disabled,readonly:Y.readonly,required:Y.required,value:t.inputValue,autocomplete:Y.autocomplete,"aria-label":(q=C(i))==null?void 0:q.input,"aria-disabled":Y.disabled||void 0,"aria-invalid":Y.state===!1?!0:void 0,onInput:W,onKeydown:[Pe(Q,["enter"]),Pe(he,["tab"]),re],onBlur:M,onFocus:ne,onKeypress:re,onPaste:S},null,42,A5)),s("div",{onClick:g[2]||(g[2]=z=>a("toggle"))},[Y.$slots["input-icon"]&&!Y.hideInputIcon?(r(),d("span",{key:0,class:"dp__input_icon",onClick:g[0]||(g[0]=z=>a("toggle"))},[ye(Y.$slots,"input-icon")])):c("",!0),!Y.$slots["input-icon"]&&!Y.hideInputIcon&&!Y.$slots["dp-input"]?(r(),H(C(fs),{key:1,class:"dp__input_icon dp__input_icons",onClick:g[1]||(g[1]=z=>a("toggle"))})):c("",!0)]),Y.$slots["clear-icon"]&&t.inputValue&&Y.clearable&&!Y.disabled&&!Y.readonly?(r(),d("span",M5,[ye(Y.$slots,"clear-icon",{clear:X})])):c("",!0),Y.clearable&&!Y.$slots["clear-icon"]&&t.inputValue&&!Y.disabled&&!Y.readonly?(r(),H(C(ra),{key:3,class:"dp__clear_icon dp__input_icons",onClick:g[3]||(g[3]=Fe(z=>X(z),["prevent"]))})):c("",!0)])):c("",!0)])}}}),q5=["title"],z5={class:"dp__action_buttons"},R5=["disabled"],U5=tt({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Tt},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const n=e,a=t,{defaultedActionRow:o,defaultedPreviewFormat:l,defaultedMultiCalendars:i,defaultedTextInput:u,defaultedInline:p,getDefaultPattern:h}=Xe(a),{isValidTime:k}=ns(a),{buildMatrix:_}=Wt(),F=ce(null),D=ce(null);rt(()=>{a.arrowNavigation&&_([Ze(F),Ze(D)],"actionRow")});const P=te(()=>a.range&&!a.partialRange&&a.internalModelValue?a.internalModelValue.length===2:!0),x=te(()=>!ee.value||!U.value||!P.value),ee=te(()=>!a.enableTimePicker||a.ignoreTimeValidation?!0:k(a.internalModelValue)),U=te(()=>a.monthPicker?a.range&&Array.isArray(a.internalModelValue)?!a.internalModelValue.filter(y=>!he(y)).length:he(a.internalModelValue):!0),V=()=>{const y=l.value;return a.timePicker||a.monthPicker,y(et(a.internalModelValue))},se=()=>{const y=a.internalModelValue;return i.value.count>0?`${S(y[0])} - ${S(y[1])}`:[S(y[0]),S(y[1])]},S=y=>ya(y,l.value,a.formatLocale,u.value.rangeSeparator,a.modelAuto,h()),L=te(()=>!a.internalModelValue||!a.menuMount?"":typeof l.value=="string"?Array.isArray(a.internalModelValue)?a.internalModelValue.length===2&&a.internalModelValue[1]?se():a.multiDates?a.internalModelValue.map(y=>`${S(y)}`):a.modelAuto?`${S(a.internalModelValue[0])}`:`${S(a.internalModelValue[0])} -`:S(a.internalModelValue):V()),W=()=>a.multiDates?"; ":" - ",Q=te(()=>Array.isArray(L.value)?L.value.join(W()):L.value),he=y=>{if(!a.monthPicker)return!0;let M=!0;const X=G(kt(y));if(a.minDate&&a.maxDate){const re=G(kt(a.minDate)),Y=G(kt(a.maxDate));return lt(X,re)&&nt(X,Y)||Ve(X,re)||Ve(X,Y)}if(a.minDate){const re=G(kt(a.minDate));M=lt(X,re)||Ve(X,re)}if(a.maxDate){const re=G(kt(a.maxDate));M=nt(X,re)||Ve(X,re)}return M},ne=()=>{ee.value&&U.value&&P.value?n("select-date"):n("invalid-select")};return(y,M)=>(r(),d("div",{class:"dp__action_row",style:bt(t.calendarWidth?{width:`${t.calendarWidth}px`}:{})},[y.$slots["action-row"]?ye(y.$slots,"action-row",Ge(ot({key:0},{internalModelValue:y.internalModelValue,disabled:x.value,selectDate:()=>y.$emit("select-date"),closePicker:()=>y.$emit("close-picker")}))):(r(),d(B,{key:1},[C(o).showPreview?(r(),d("div",{key:0,class:"dp__selection_preview",title:Q.value},[y.$slots["action-preview"]?ye(y.$slots,"action-preview",{key:0,value:y.internalModelValue}):c("",!0),y.$slots["action-preview"]?c("",!0):(r(),d(B,{key:1},[w(v(Q.value),1)],64))],8,q5)):c("",!0),s("div",z5,[y.$slots["action-buttons"]?ye(y.$slots,"action-buttons",{key:0,value:y.internalModelValue}):c("",!0),y.$slots["action-buttons"]?c("",!0):(r(),d(B,{key:1},[!C(p).enabled&&C(o).showCancel?(r(),d("button",{key:0,ref_key:"cancelButtonRef",ref:F,type:"button",class:"dp__action_button dp__action_cancel",onClick:M[0]||(M[0]=X=>y.$emit("close-picker")),onKeydown:[M[1]||(M[1]=Pe(X=>y.$emit("close-picker"),["enter"])),M[2]||(M[2]=Pe(X=>y.$emit("close-picker"),["space"]))]},v(y.cancelText),545)):c("",!0),C(o).showNow?(r(),d("button",{key:1,ref_key:"cancelButtonRef",ref:F,type:"button",class:"dp__action_button dp__action_cancel",onClick:M[3]||(M[3]=X=>y.$emit("select-now")),onKeydown:[M[4]||(M[4]=Pe(X=>y.$emit("select-now"),["enter"])),M[5]||(M[5]=Pe(X=>y.$emit("select-now"),["space"]))]},v(y.nowButtonLabel),545)):c("",!0),C(o).showSelect?(r(),d("button",{key:2,ref_key:"selectButtonRef",ref:D,type:"button",class:"dp__action_button dp__action_select",disabled:x.value,onKeydown:[Pe(ne,["enter"]),Pe(ne,["space"])],onClick:ne},v(y.selectText),41,R5)):c("",!0)],64))])],64))],4))}}),V5=["onKeydown"],Y5={class:"dp__selection_grid_header"},I5=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],B5=["aria-label"],js=tt({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:n}){const{setSelectionGrid:a,buildMultiLevelMatrix:o,setMonthPicker:l}=Wt(),i=n,u=t,{defaultedAriaLabels:p,defaultedTextInput:h,defaultedConfig:k}=Xe(u),{hideNavigationButtons:_}=Gs(),F=ce(!1),D=ce(null),P=ce(null),x=ce([]),ee=ce(),U=ce(null),V=ce(0),se=ce(null);qa(()=>{D.value=null}),rt(()=>{Lt().then(()=>M()),u.noOverlayFocus||L(),S(!0)}),zn(()=>S(!1));const S=f=>{var m;u.arrowNavigation&&((m=u.headerRefs)!=null&&m.length?l(f):a(f))},L=()=>{var f;const m=Ze(P);m&&(h.value.enabled||(D.value?(f=D.value)==null||f.focus({preventScroll:!0}):m.focus({preventScroll:!0})),F.value=m.clientHeight<m.scrollHeight)},W=te(()=>({dp__overlay:!0,"dp--overlay-absolute":!u.useRelative,"dp--overlay-relative":u.useRelative})),Q=te(()=>u.useRelative?{height:`${u.height}px`,width:"260px"}:void 0),he=te(()=>({dp__overlay_col:!0})),ne=te(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:F.value,dp__button_bottom:u.isLast})),y=te(()=>{var f,m;return{dp__overlay_container:!0,dp__container_flex:((f=u.items)==null?void 0:f.length)<=6,dp__container_block:((m=u.items)==null?void 0:m.length)>6}});Ht(()=>u.items,()=>M(),{deep:!0});const M=()=>{Lt().then(()=>{const f=Ze(D),m=Ze(P),A=Ze(U),I=Ze(se),le=A?A.getBoundingClientRect().height:0;m&&(m.getBoundingClientRect().height?V.value=m.getBoundingClientRect().height-le:V.value=k.value.modeHeight-le),f&&I&&(I.scrollTop=f.offsetTop-I.offsetTop-(V.value/2-f.getBoundingClientRect().height)-le)})},X=f=>{f.disabled||i("selected",f.value)},re=()=>{i("toggle"),i("reset-flow")},Y=()=>{u.escClose&&re()},g=(f,m,A,I)=>{f&&((m.active||m.value===u.focusValue)&&(D.value=f),u.arrowNavigation&&(Array.isArray(x.value[A])?x.value[A][I]=f:x.value[A]=[f],q()))},q=()=>{var f,m;const A=(f=u.headerRefs)!=null&&f.length?[u.headerRefs].concat(x.value):x.value.concat([u.skipButtonRef?[]:[U.value]]);o(et(A),(m=u.headerRefs)!=null&&m.length?"monthPicker":"selectionGrid")},z=f=>{u.arrowNavigation||Et(f,k.value,!0)},K=f=>{ee.value=f,i("hover-value",f)};return e({focusGrid:L}),(f,m)=>{var A;return r(),d("div",{ref_key:"gridWrapRef",ref:P,class:j(W.value),style:bt(Q.value),role:"dialog",tabindex:"0",onKeydown:[Pe(Fe(Y,["prevent"]),["esc"]),m[0]||(m[0]=Pe(Fe(I=>z(I),["prevent"]),["left"])),m[1]||(m[1]=Pe(Fe(I=>z(I),["prevent"]),["up"])),m[2]||(m[2]=Pe(Fe(I=>z(I),["prevent"]),["down"])),m[3]||(m[3]=Pe(Fe(I=>z(I),["prevent"]),["right"]))]},[s("div",{ref_key:"containerRef",ref:se,class:j(y.value),role:"grid",style:bt({height:`${V.value}px`})},[s("div",Y5,[ye(f.$slots,"header")]),f.$slots.overlay?ye(f.$slots,"overlay",{key:0}):(r(!0),d(B,{key:1},oe(f.items,(I,le)=>(r(),d("div",{key:le,class:j(["dp__overlay_row",{dp__flex_row:f.items.length>=3}]),role:"row"},[(r(!0),d(B,null,oe(I,(de,R)=>(r(),d("div",{key:de.value,ref_for:!0,ref:b=>g(b,de,le,R),role:"gridcell",class:j(he.value),"aria-selected":de.active,"aria-disabled":de.disabled||void 0,tabindex:"0",onClick:b=>X(de),onKeydown:[Pe(Fe(b=>X(de),["prevent"]),["enter"]),Pe(Fe(b=>X(de),["prevent"]),["space"])],onMouseover:b=>K(de.value)},[s("div",{class:j(de.className)},[f.$slots.item?ye(f.$slots,"item",{key:0,item:de}):c("",!0),f.$slots.item?c("",!0):(r(),d(B,{key:1},[w(v(de.text),1)],64))],2)],42,I5))),128))],2))),128))],6),f.$slots["button-icon"]?$((r(),d("button",{key:0,ref_key:"toggleButton",ref:U,type:"button","aria-label":(A=C(p))==null?void 0:A.toggleOverlay,class:j(ne.value),tabindex:"0",onClick:re,onKeydown:[Pe(re,["enter"]),Pe(re,["tab"])]},[ye(f.$slots,"button-icon")],42,B5)),[[at,!C(_)(f.hideNavigation,f.type)]]):c("",!0)],46,V5)}}}),Js=tt({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(t){const e=t,n=te(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),a=te(()=>({dp__instance_calendar:e.multiCalendars>0}));return(o,l)=>(r(),d("div",{class:j({dp__menu_inner:!o.stretch,"dp--menu--inner-stretched":o.stretch,dp__flex_display:o.multiCalendars>0})},[(r(!0),d(B,null,oe(n.value,(i,u)=>(r(),d("div",{key:i,class:j(a.value)},[ye(o.$slots,"default",{instance:i,index:u})],2))),128))],2))}}),x5=["aria-label","aria-disabled"],Cs=tt({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const n=e,a=ce(null);return rt(()=>n("set-ref",a)),(o,l)=>(r(),d("button",{ref_key:"elRef",ref:a,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":o.ariaLabel,"aria-disabled":o.disabled||void 0,onClick:l[0]||(l[0]=i=>o.$emit("activate")),onKeydown:[l[1]||(l[1]=Pe(Fe(i=>o.$emit("activate"),["prevent"]),["enter"])),l[2]||(l[2]=Pe(Fe(i=>o.$emit("activate"),["prevent"]),["space"]))]},[s("span",{class:j(["dp__inner_nav",{dp__inner_nav_disabled:o.disabled}])},[ye(o.$slots,"default")],2)],40,x5))}}),N5={class:"dp--year-mode-picker"},E5=["aria-label"],wa=tt({__name:"YearModePicker",props:{...Tt,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const n=e,a=t,{showRightIcon:o,showLeftIcon:l}=Gs(),{defaultedConfig:i,defaultedMultiCalendars:u,defaultedAriaLabels:p,defaultedTransitions:h}=Xe(a),{showTransition:k,transitionName:_}=As(h),F=(x=!1,ee)=>{n("toggle-year-picker",{flow:x,show:ee})},D=x=>{n("year-select",x)},P=(x=!1)=>{n("handle-year",x)};return(x,ee)=>{var U,V,se;return r(),d("div",N5,[C(l)(C(u),t.instance)?(r(),H(Cs,{key:0,ref:"mpPrevIconRef","aria-label":(U=C(p))==null?void 0:U.prevYear,disabled:t.isDisabled(!1),onActivate:ee[0]||(ee[0]=S=>P(!1))},{default:O(()=>[x.$slots["arrow-left"]?ye(x.$slots,"arrow-left",{key:0}):c("",!0),x.$slots["arrow-left"]?c("",!0):(r(),H(C(En),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),s("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(V=C(p))==null?void 0:V.openYearsOverlay,onClick:ee[1]||(ee[1]=()=>F(!1)),onKeydown:ee[2]||(ee[2]=Pe(()=>F(!1),["enter"]))},[x.$slots.year?ye(x.$slots,"year",{key:0,year:t.year}):c("",!0),x.$slots.year?c("",!0):(r(),d(B,{key:1},[w(v(t.year),1)],64))],40,E5),C(o)(C(u),t.instance)?(r(),H(Cs,{key:1,ref:"mpNextIconRef","aria-label":(se=C(p))==null?void 0:se.nextYear,disabled:t.isDisabled(!0),onActivate:ee[3]||(ee[3]=S=>P(!0))},{default:O(()=>[x.$slots["arrow-right"]?ye(x.$slots,"arrow-right",{key:0}):c("",!0),x.$slots["arrow-right"]?c("",!0):(r(),H(C(Qn),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),E(_s,{name:C(_)(t.showYearPicker),css:C(k)},{default:O(()=>[t.showYearPicker?(r(),H(js,{key:0,items:t.items,"text-input":x.textInput,"esc-close":x.escClose,config:x.config,"is-last":x.autoApply&&!C(i).keepActionRow,"hide-navigation":x.hideNavigation,type:"year",onToggle:F,onSelected:ee[4]||(ee[4]=S=>D(S))},mt({"button-icon":O(()=>[x.$slots["calendar-icon"]?ye(x.$slots,"calendar-icon",{key:0}):c("",!0),x.$slots["calendar-icon"]?c("",!0):(r(),H(C(fs),{key:1}))]),_:2},[x.$slots["year-overlay-value"]?{name:"item",fn:O(({item:S})=>[ye(x.$slots,"year-overlay-value",{text:S.text,value:S.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):c("",!0)]),_:3},8,["name","css"])])}}}),eo=(t,e,n)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(a=>Ve(t,a))){const a=e.value.filter(o=>!Ve(o,t));e.value=a.length?a:null}else(n&&+n>e.value.length||!n)&&e.value.push(t);else e.value=[t]},to=(t,e,n)=>{let a=t.value?t.value.slice():[];return a.length===2&&a[1]!==null&&(a=[]),a.length?nt(e,a[0])?(a.unshift(e),n("range-start",a[0]),n("range-start",a[1])):(a[1]=e,n("range-end",e)):(a=[e],n("range-start",e)),t.value=a,a},en=(t,e,n,a)=>{t[0]&&t[1]&&n&&e("auto-apply"),t[0]&&!t[1]&&a&&n&&e("auto-apply")},Ca=t=>{Array.isArray(t.value)&&t.value.length<=2&&t.range?t.modelValue.value=t.value.map(e=>Ft(G(e),t.timezone)):Array.isArray(t.value)||(t.modelValue.value=Ft(G(t.value),t.timezone))},Fa=({multiCalendars:t,highlight:e,calendars:n,modelValue:a,props:o,year:l,month:i,emit:u})=>{const p=te(()=>Zn(o.yearRange,o.reverseYears)),h=ce([!1]),k=te(()=>(S,L)=>{const W=Ee(kt(new Date),{month:i.value(S),year:l.value(S)});return ga(W,o.maxDate,o.minDate,o.preventMinMaxNavigation,L)}),_=()=>{for(let S=0;S<t.value.count;S++)if(S===0)n.value[S]=n.value[0];else{const L=Ee(G(),n.value[S-1]);n.value[S]={month:ze(L),year:Ae(Rn(L,1))}}},F=S=>{if(!S)return _();const L=Ee(G(),n.value[S]);return n.value[0].year=Ae(ia(L,t.value.count-1)),_()},D=S=>o.focusStartDate?S[0]:S[1]?S[1]:S[0],P=()=>{if(a.value){const S=Array.isArray(a.value)?D(a.value):a.value;n.value[0]={month:ze(S),year:Ae(S)}}};rt(()=>{P(),t.value.count&&_()});const x=(S,L)=>{n.value[L].year=S,t.value.count&&!t.value.solo&&F(L)},ee=te(()=>S=>ms(p.value,L=>{const W=l.value(S)===L.value,Q=Ps(L.value,ps(o.minDate),ps(o.maxDate)),he=Jn(e.value,L.value);return{active:W,disabled:Q,highlighted:he}})),U=(S,L)=>{x(S,L),se(L)},V=(S,L=!1)=>{if(!k.value(S,L)){const W=L?l.value(S)+1:l.value(S)-1;x(W,S)}},se=(S,L=!1,W)=>{L||u("reset-flow"),W!==void 0?h.value[S]=W:h.value[S]=!h.value[S],h.value||u("overlay-closed")};return{isDisabled:k,groupedYears:ee,showYearPicker:h,selectYear:x,toggleYearPicker:se,handleYearSelect:U,handleYear:V}},Q5=(t,e)=>{const{defaultedMultiCalendars:n,defaultedAriaLabels:a,defaultedTransitions:o,defaultedConfig:l,defaultedHighlight:i}=Xe(t),{modelValue:u,year:p,month:h,calendars:k}=Ms(t,e),_=te(()=>ma(t.formatLocale,t.locale,t.monthNameFormat)),F=ce(null),{selectYear:D,groupedYears:P,showYearPicker:x,toggleYearPicker:ee,handleYearSelect:U,handleYear:V,isDisabled:se}=Fa({modelValue:u,multiCalendars:n,highlight:i,calendars:k,year:p,month:h,props:t,emit:e});rt(()=>{t.startDate&&(u.value&&t.focusStartDate||!u.value)&&D(Ae(G(t.startDate)),0)});const S=z=>z?{month:ze(z),year:Ae(z)}:{month:null,year:null},L=()=>u.value?Array.isArray(u.value)?u.value.map(z=>S(z)):S(u.value):S(),W=(z,K)=>{const f=k.value[z],m=L();return Array.isArray(m)?m.some(A=>A.year===(f==null?void 0:f.year)&&A.month===K):(f==null?void 0:f.year)===m.year&&K===m.month},Q=(z,K,f)=>{var m,A;const I=L();return Array.isArray(I)?p.value(K)===((m=I[f])==null?void 0:m.year)&&z===((A=I[f])==null?void 0:A.month):!1},he=(z,K)=>{if(t.range){const f=L();if(Array.isArray(u.value)&&Array.isArray(f)){const m=Q(z,K,0)||Q(z,K,1),A=Rt(kt(G()),z,p.value(K));return Xs(u.value,F.value,A)&&!m}return!1}return!1},ne=te(()=>z=>ms(_.value,K=>{const f=W(z,K.value),m=Ps(K.value,ha(p.value(z),t.minDate),_a(p.value(z),t.maxDate))||c5(t.disabledDates,p.value(z)).includes(K.value),A=he(K.value,z),I=$a(i.value,K.value,p.value(z));return{active:f,disabled:m,isBetween:A,highlighted:I}})),y=(z,K)=>Rt(kt(G()),z,p.value(K)),M=(z,K)=>{const f=u.value?u.value:kt(new Date);u.value=Rt(f,z,p.value(K)),e("auto-apply")},X=(z,K)=>{const f=to(u,y(z,K),e);en(f,e,t.autoApply,t.modelAuto)},re=(z,K)=>{eo(y(z,K),u,t.multiDatesLimit),e("auto-apply",!0)},Y=(z,K)=>(k.value[K].month=z,q(K,k.value[K].year,z),t.multiDates?re(z,K):t.range?X(z,K):M(z,K)),g=(z,K)=>{D(z,K),q(K,z,null)},q=(z,K,f)=>{let m=f;if(!m&&m!==0){const A=L();m=Array.isArray(A)?A[z].month:A.month}e("update-month-year",{instance:z,year:K,month:m})};return{groupedMonths:ne,groupedYears:P,year:p,isDisabled:se,defaultedMultiCalendars:n,defaultedAriaLabels:a,defaultedTransitions:o,defaultedConfig:l,showYearPicker:x,modelValue:u,presetDate:(z,K)=>{Ca({value:z,modelValue:u,range:t.range,timezone:K?void 0:t.timezone}),e("auto-apply")},setHoverDate:(z,K)=>{F.value=y(z,K)},selectMonth:Y,selectYear:g,toggleYearPicker:ee,handleYearSelect:U,handleYear:V,getModelMonthYear:L}},L5=tt({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Tt},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(t,{expose:e,emit:n}){const a=n,o=ss(),l=ht(o,"yearMode"),i=t;rt(()=>{i.shadow||a("mount",null)});const{groupedMonths:u,groupedYears:p,year:h,isDisabled:k,defaultedMultiCalendars:_,defaultedConfig:F,showYearPicker:D,modelValue:P,presetDate:x,setHoverDate:ee,selectMonth:U,selectYear:V,toggleYearPicker:se,handleYearSelect:S,handleYear:L,getModelMonthYear:W}=Q5(i,a);return e({getSidebarProps:()=>({modelValue:P,year:h,getModelMonthYear:W,selectMonth:U,selectYear:V,handleYear:L}),presetDate:x,toggleYearPicker:Q=>se(0,Q)}),(Q,he)=>(r(),H(Js,{"multi-calendars":C(_).count,stretch:""},{default:O(({instance:ne})=>[Q.$slots["month-year"]?ye(Q.$slots,"month-year",Ge(ot({key:0},{year:C(h),months:C(u)(ne),years:C(p)(ne),selectMonth:C(U),selectYear:C(V),instance:ne}))):(r(),H(js,{key:1,items:C(u)(ne),"arrow-navigation":Q.arrowNavigation,"is-last":Q.autoApply&&!C(F).keepActionRow,"esc-close":Q.escClose,height:C(F).modeHeight,config:Q.config,"no-overlay-focus":!!(Q.noOverlayFocus||Q.textInput),"use-relative":"",type:"month",onSelected:y=>C(U)(y,ne),onHoverValue:y=>C(ee)(y,ne)},{header:O(()=>[E(wa,ot(Q.$props,{items:C(p)(ne),instance:ne,"show-year-picker":C(D)[ne],year:C(h)(ne),"is-disabled":y=>C(k)(ne,y),onHandleYear:y=>C(L)(ne,y),onYearSelect:y=>C(S)(y,ne),onToggleYearPicker:y=>C(se)(ne,y==null?void 0:y.flow,y==null?void 0:y.show)}),mt({_:2},[oe(C(l),(y,M)=>({name:y,fn:O(X=>[ye(Q.$slots,y,Ge(ct(X)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),H5=(t,e)=>{const{modelValue:n}=Ms(t,e),a=ce(null),{defaultedHighlight:o,defaultedFilters:l}=Xe(t),i=ce();rt(()=>{t.startDate&&(n.value&&t.focusStartDate||!n.value)&&(i.value=Ae(G(t.startDate)))});const u=_=>Array.isArray(n.value)?n.value.some(F=>Ae(F)===_):n.value?Ae(n.value)===_:!1,p=_=>t.range&&Array.isArray(n.value)?Xs(n.value,a.value,k(_)):!1,h=te(()=>ms(Zn(t.yearRange,t.reverseYears),_=>{const F=u(_.value),D=Ps(_.value,ps(t.minDate),ps(t.maxDate))||l.value.years.includes(_.value),P=p(_.value)&&!F,x=Jn(o.value,_.value);return{active:F,disabled:D,isBetween:P,highlighted:x}})),k=_=>At(kt(new Date),_);return{groupedYears:h,modelValue:n,focusYear:i,setHoverValue:_=>{a.value=At(kt(new Date),_)},selectYear:_=>{var F;if(t.multiDates)return n.value?Array.isArray(n.value)&&(((F=n.value)==null?void 0:F.map(D=>Ae(D))).includes(_)?n.value=n.value.filter(D=>Ae(D)!==_):n.value.push(At(it(G()),_))):n.value=[At(it(G()),_)],e("auto-apply",!0);if(t.range){const D=to(n,k(_),e);return en(D,e,t.autoApply,t.modelAuto)}n.value=k(_),e("auto-apply")}}},W5=tt({compatConfig:{MODE:3},__name:"YearPicker",props:{...Tt},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(t,{expose:e,emit:n}){const a=n,o=t,{groupedYears:l,modelValue:i,focusYear:u,selectYear:p,setHoverValue:h}=H5(o,a),{defaultedConfig:k}=Xe(o);return e({getSidebarProps:()=>({modelValue:i,selectYear:p})}),(_,F)=>(r(),d("div",null,[_.$slots["month-year"]?ye(_.$slots,"month-year",Ge(ot({key:0},{years:C(l),selectYear:C(p)}))):(r(),H(js,{key:1,items:C(l),"is-last":_.autoApply&&!C(k).keepActionRow,height:C(k).modeHeight,config:_.config,"no-overlay-focus":!!(_.noOverlayFocus||_.textInput),"focus-value":C(u),type:"year","use-relative":"",onSelected:C(p),onHoverValue:C(h)},mt({_:2},[_.$slots["year-overlay-value"]?{name:"item",fn:O(({item:D})=>[ye(_.$slots,"year-overlay-value",{text:D.text,value:D.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),K5={key:0,class:"dp__time_input"},X5=["aria-label","onKeydown","onClick"],G5=s("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),Z5=s("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),J5=["aria-label","disabled","onKeydown","onClick"],eF=["aria-label","onKeydown","onClick"],tF=s("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),sF=s("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),nF={key:0},oF=["aria-label","onKeydown"],aF=tt({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Tt},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const a=n,o=t,{setTimePickerElements:l,setTimePickerBackRef:i}=Wt(),{defaultedAriaLabels:u,defaultedTransitions:p,defaultedFilters:h,defaultedConfig:k}=Xe(o),{transitionName:_,showTransition:F}=As(p),D=Os({hours:!1,minutes:!1,seconds:!1}),P=ce("AM"),x=ce(null),ee=ce([]);rt(()=>{a("mounted")});const U=b=>Ee(new Date,{hours:b.hours,minutes:b.minutes,seconds:o.enableSeconds?b.seconds:0,milliseconds:0}),V=te(()=>b=>Y(b,o[b])||S(b,o[b])),se=te(()=>({hours:o.hours,minutes:o.minutes,seconds:o.seconds})),S=(b,ve)=>o.range&&!o.disableTimeRangeValidation?!o.validateTime(b,ve):!1,L=(b,ve)=>{if(o.range&&!o.disableTimeRangeValidation){const be=ve?+o[`${b}Increment`]:-+o[`${b}Increment`],J=o[b]+be;return!o.validateTime(b,J)}return!1},W=te(()=>b=>!q(+o[b]+ +o[`${b}Increment`],b)||L(b,!0)),Q=te(()=>b=>!q(+o[b]-+o[`${b}Increment`],b)||L(b,!1)),he=(b,ve)=>Io(Ee(G(),b),ve),ne=(b,ve)=>kC(Ee(G(),b),ve),y=te(()=>({dp__time_col:!0,dp__time_col_block:!o.timePickerInline,dp__time_col_reg_block:!o.enableSeconds&&o.is24&&!o.timePickerInline,dp__time_col_reg_inline:!o.enableSeconds&&o.is24&&o.timePickerInline,dp__time_col_reg_with_button:!o.enableSeconds&&!o.is24,dp__time_col_sec:o.enableSeconds&&o.is24,dp__time_col_sec_with_button:o.enableSeconds&&!o.is24})),M=te(()=>{const b=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return o.enableSeconds?b.concat([{type:"",separator:!0},{type:"seconds"}]):b}),X=te(()=>M.value.filter(b=>!b.separator)),re=te(()=>b=>{if(b==="hours"){const ve=A(+o.hours);return{text:ve<10?`0${ve}`:`${ve}`,value:ve}}return{text:o[b]<10?`0${o[b]}`:`${o[b]}`,value:o[b]}}),Y=(b,ve)=>{var be;if(!o.disabledTimesConfig)return!1;const J=o.disabledTimesConfig(o.order,b==="hours"?ve:void 0);return J[b]?!!((be=J[b])!=null&&be.includes(ve)):!0},g=b=>{const ve=o.is24?24:12,be=b==="hours"?ve:60,J=+o[`${b}GridIncrement`],Ce=b==="hours"&&!o.is24?J:0,ge=[];for(let N=Ce;N<be;N+=J)ge.push({value:N,text:N<10?`0${N}`:`${N}`});return b==="hours"&&!o.is24&&ge.push({value:0,text:"12"}),ms(ge,N=>({active:!1,disabled:h.value.times[b].includes(N.value)||!q(N.value,b)||Y(b,N.value)||S(b,N.value)}))},q=(b,ve)=>{const be=o.minTime?U(pn(o.minTime)):null,J=o.maxTime?U(pn(o.maxTime)):null,Ce=U(pn(se.value,ve,b));return be&&J?(Ss(Ce,J)||rs(Ce,J))&&(Ds(Ce,be)||rs(Ce,be)):be?Ds(Ce,be)||rs(Ce,be):J?Ss(Ce,J)||rs(Ce,J):!0},z=b=>o[`no${b[0].toUpperCase()+b.slice(1)}Overlay`],K=b=>{z(b)||(D[b]=!D[b],D[b]||a("overlay-closed"))},f=b=>b==="hours"?Ct:b==="minutes"?Mt:us,m=(b,ve=!0)=>{const be=ve?he:ne,J=ve?+o[`${b}Increment`]:-+o[`${b}Increment`];q(+o[b]+J,b)&&a(`update:${b}`,f(b)(be({[b]:+o[b]},{[b]:+o[`${b}Increment`]})))},A=b=>o.is24?b:(b>=12?P.value="PM":P.value="AM",GC(b)),I=()=>{P.value==="PM"?(P.value="AM",a("update:hours",o.hours-12)):(P.value="PM",a("update:hours",o.hours+12)),a("am-pm-change",P.value)},le=b=>{D[b]=!0},de=(b,ve,be)=>{if(b&&o.arrowNavigation){Array.isArray(ee.value[ve])?ee.value[ve][be]=b:ee.value[ve]=[b];const J=ee.value.reduce((Ce,ge)=>ge.map((N,ie)=>[...Ce[ie]||[],ge[ie]]),[]);i(o.closeTimePickerBtn),x.value&&(J[1]=J[1].concat(x.value)),l(J,o.order)}},R=(b,ve)=>(K(b),b==="hours"&&!o.is24?a(`update:${b}`,P.value==="PM"?ve+12:ve):a(`update:${b}`,ve));return e({openChildCmp:le}),(b,ve)=>{var be;return b.disabled?c("",!0):(r(),d("div",K5,[(r(!0),d(B,null,oe(M.value,(J,Ce)=>{var ge,N,ie;return r(),d("div",{key:Ce,class:j(y.value)},[J.separator?(r(),d(B,{key:0},[w(" : ")],64)):(r(),d(B,{key:1},[s("button",{ref_for:!0,ref:Se=>de(Se,Ce,0),type:"button",class:j({dp__btn:!0,dp__inc_dec_button:!b.timePickerInline,dp__inc_dec_button_inline:b.timePickerInline,dp__tp_inline_btn_top:b.timePickerInline,dp__inc_dec_button_disabled:W.value(J.type)}),"aria-label":(ge=C(u))==null?void 0:ge.incrementValue(J.type),tabindex:"0",onKeydown:[Pe(Fe(Se=>m(J.type),["prevent"]),["enter"]),Pe(Fe(Se=>m(J.type),["prevent"]),["space"])],onClick:Se=>m(J.type)},[o.timePickerInline?(r(),d(B,{key:1},[G5,Z5],64)):(r(),d(B,{key:0},[b.$slots["arrow-up"]?ye(b.$slots,"arrow-up",{key:0}):c("",!0),b.$slots["arrow-up"]?c("",!0):(r(),H(C(Hn),{key:1}))],64))],42,X5),s("button",{ref_for:!0,ref:Se=>de(Se,Ce,1),type:"button","aria-label":(N=C(u))==null?void 0:N.openTpOverlay(J.type),class:j({dp__time_display:!0,dp__time_display_block:!b.timePickerInline,dp__time_display_inline:b.timePickerInline,"dp--time-invalid":V.value(J.type),"dp--time-overlay-btn":!V.value(J.type)}),disabled:z(J.type),tabindex:"0",onKeydown:[Pe(Fe(Se=>K(J.type),["prevent"]),["enter"]),Pe(Fe(Se=>K(J.type),["prevent"]),["space"])],onClick:Se=>K(J.type)},[b.$slots[J.type]?ye(b.$slots,J.type,{key:0,text:re.value(J.type).text,value:re.value(J.type).value}):c("",!0),b.$slots[J.type]?c("",!0):(r(),d(B,{key:1},[w(v(re.value(J.type).text),1)],64))],42,J5),s("button",{ref_for:!0,ref:Se=>de(Se,Ce,2),type:"button",class:j({dp__btn:!0,dp__inc_dec_button:!b.timePickerInline,dp__inc_dec_button_inline:b.timePickerInline,dp__tp_inline_btn_bottom:b.timePickerInline,dp__inc_dec_button_disabled:Q.value(J.type)}),"aria-label":(ie=C(u))==null?void 0:ie.decrementValue(J.type),tabindex:"0",onKeydown:[Pe(Fe(Se=>m(J.type,!1),["prevent"]),["enter"]),Pe(Fe(Se=>m(J.type,!1),["prevent"]),["space"])],onClick:Se=>m(J.type,!1)},[o.timePickerInline?(r(),d(B,{key:1},[tF,sF],64)):(r(),d(B,{key:0},[b.$slots["arrow-down"]?ye(b.$slots,"arrow-down",{key:0}):c("",!0),b.$slots["arrow-down"]?c("",!0):(r(),H(C(Wn),{key:1}))],64))],42,eF)],64))],2)}),128)),b.is24?c("",!0):(r(),d("div",nF,[b.$slots["am-pm-button"]?ye(b.$slots,"am-pm-button",{key:0,toggle:I,value:P.value}):c("",!0),b.$slots["am-pm-button"]?c("",!0):(r(),d("button",{key:1,ref_key:"amPmButton",ref:x,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(be=C(u))==null?void 0:be.amPmButton,tabindex:"0",onClick:I,onKeydown:[Pe(Fe(I,["prevent"]),["enter"]),Pe(Fe(I,["prevent"]),["space"])]},v(P.value),41,oF))])),(r(!0),d(B,null,oe(X.value,(J,Ce)=>(r(),H(_s,{key:Ce,name:C(_)(D[J.type]),css:C(F)},{default:O(()=>[D[J.type]?(r(),H(js,{key:0,items:g(J.type),"is-last":b.autoApply&&!C(k).keepActionRow,"esc-close":b.escClose,type:J.type,"text-input":b.textInput,config:b.config,"arrow-navigation":b.arrowNavigation,onSelected:ge=>R(J.type,ge),onToggle:ge=>K(J.type),onResetFlow:ve[0]||(ve[0]=ge=>b.$emit("reset-flow"))},mt({"button-icon":O(()=>[b.$slots["clock-icon"]?ye(b.$slots,"clock-icon",{key:0}):c("",!0),b.$slots["clock-icon"]?c("",!0):(r(),H(Fs(b.timePickerInline?C(fs):C(Ln)),{key:1}))]),_:2},[b.$slots[`${J.type}-overlay-value`]?{name:"item",fn:O(({item:ge})=>[ye(b.$slots,`${J.type}-overlay-value`,{text:ge.text,value:ge.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),lF={class:"dp--tp-wrap"},iF=["aria-label","tabindex"],rF=["tabindex"],dF=["aria-label"],Ta=tt({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Tt},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const a=n,o=t,{buildMatrix:l,setTimePicker:i}=Wt(),u=ss(),{defaultedTransitions:p,defaultedAriaLabels:h,defaultedTextInput:k,defaultedConfig:_}=Xe(o),{transitionName:F,showTransition:D}=As(p),{hideNavigationButtons:P}=Gs(),x=ce(null),ee=ce(null),U=ce([]),V=ce(null);rt(()=>{a("mount"),!o.timePicker&&o.arrowNavigation?l([Ze(x.value)],"time"):i(!0,o.timePicker)});const se=te(()=>o.range&&o.modelAuto?pa(o.internalModelValue):!0),S=ce(!1),L=g=>({hours:Array.isArray(o.hours)?o.hours[g]:o.hours,minutes:Array.isArray(o.minutes)?o.minutes[g]:o.minutes,seconds:Array.isArray(o.seconds)?o.seconds[g]:o.seconds}),W=te(()=>{const g=[];if(o.range)for(let q=0;q<2;q++)g.push(L(q));else g.push(L(0));return g}),Q=(g,q=!1,z="")=>{q||a("reset-flow"),S.value=g,a(g?"overlay-opened":"overlay-closed"),o.arrowNavigation&&i(g),Lt(()=>{z!==""&&U.value[0]&&U.value[0].openChildCmp(z)})},he=te(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:o.autoApply&&!_.value.keepActionRow})),ne=ht(u,"timePicker"),y=(g,q,z)=>o.range?q===0?[g,W.value[1][z]]:[W.value[0][z],g]:g,M=g=>{a("update:hours",g)},X=g=>{a("update:minutes",g)},re=g=>{a("update:seconds",g)},Y=()=>{if(V.value&&!k.value.enabled&&!o.noOverlayFocus){const g=JC(V.value);g&&g.focus({preventScroll:!0})}};return e({toggleTimePicker:Q}),(g,q)=>{var z;return r(),d("div",lF,[!g.timePicker&&!g.timePickerInline?$((r(),d("button",{key:0,ref_key:"openTimePickerBtn",ref:x,type:"button",class:j(he.value),"aria-label":(z=C(h))==null?void 0:z.openTimePicker,tabindex:g.noOverlayFocus?void 0:0,onKeydown:[q[0]||(q[0]=Pe(K=>Q(!0),["enter"])),q[1]||(q[1]=Pe(K=>Q(!0),["space"]))],onClick:q[2]||(q[2]=K=>Q(!0))},[g.$slots["clock-icon"]?ye(g.$slots,"clock-icon",{key:0}):c("",!0),g.$slots["clock-icon"]?c("",!0):(r(),H(C(Ln),{key:1}))],42,iF)),[[at,!C(P)(g.hideNavigation,"time")]]):c("",!0),E(_s,{name:C(F)(S.value),css:C(D)&&!g.timePickerInline},{default:O(()=>{var K;return[S.value||g.timePicker||g.timePickerInline?(r(),d("div",{key:0,ref_key:"overlayRef",ref:V,class:j({dp__overlay:!g.timePickerInline,"dp--overlay-absolute":!o.timePicker&&!g.timePickerInline,"dp--overlay-relative":o.timePicker}),style:bt(g.timePicker?{height:`${C(_).modeHeight}px`}:void 0),tabindex:g.timePickerInline?void 0:0},[s("div",{class:j(g.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[g.$slots["time-picker-overlay"]?ye(g.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:M,setMinutes:X,setSeconds:re}):c("",!0),g.$slots["time-picker-overlay"]?c("",!0):(r(),d("div",{key:1,class:j(g.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(r(!0),d(B,null,oe(W.value,(f,m)=>$((r(),H(aF,ot({key:m},{...g.$props,order:m,hours:f.hours,minutes:f.minutes,seconds:f.seconds,closeTimePickerBtn:ee.value,disabledTimesConfig:t.disabledTimesConfig,disabled:m===0?g.fixedStart:g.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:U,"validate-time":(A,I)=>t.validateTime(A,y(I,m,A)),"onUpdate:hours":A=>M(y(A,m,"hours")),"onUpdate:minutes":A=>X(y(A,m,"minutes")),"onUpdate:seconds":A=>re(y(A,m,"seconds")),onMounted:Y,onOverlayClosed:Y,onAmPmChange:q[3]||(q[3]=A=>g.$emit("am-pm-change",A))}),mt({_:2},[oe(C(ne),(A,I)=>({name:A,fn:O(le=>[ye(g.$slots,A,Ge(ct(le)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[at,m===0?!0:se.value]])),128))],2)),!g.timePicker&&!g.timePickerInline?$((r(),d("button",{key:2,ref_key:"closeTimePickerBtn",ref:ee,type:"button",class:j(he.value),"aria-label":(K=C(h))==null?void 0:K.closeTimePicker,tabindex:"0",onKeydown:[q[4]||(q[4]=Pe(f=>Q(!1),["enter"])),q[5]||(q[5]=Pe(f=>Q(!1),["space"]))],onClick:q[6]||(q[6]=f=>Q(!1))},[g.$slots["calendar-icon"]?ye(g.$slots,"calendar-icon",{key:0}):c("",!0),g.$slots["calendar-icon"]?c("",!0):(r(),H(C(fs),{key:1}))],42,dF)),[[at,!C(P)(g.hideNavigation,"time")]]):c("",!0)],2)],14,rF)):c("",!0)]}),_:3},8,["name","css"])])}}}),Da=(t,e,n,a)=>{const o=(U,V)=>Array.isArray(e[U])?e[U][V]:e[U],l=U=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[U]:e.seconds:0,i=(U,V)=>U?V!==void 0?Qt(U,o("hours",V),o("minutes",V),l(V)):Qt(U,e.hours,e.minutes,l()):Nn(G(),l(V)),u=(U,V)=>{e[U]=V},p=(U,V)=>{const se=Object.fromEntries(Object.keys(e).map(S=>S===U?[S,V]:[S,e[S]].slice()));if(t.range&&!t.disableTimeRangeValidation){const S=W=>n.value?Qt(n.value[W],se.hours[W],se.minutes[W],se.seconds[W]):null,L=W=>xn(n.value[W],0);return!(Ve(S(0),S(1))&&(Ds(S(0),L(1))||Ss(S(1),L(0))))}return!0},h=(U,V)=>{p(U,V)&&(u(U,V),a&&a())},k=U=>{h("hours",U)},_=U=>{h("minutes",U)},F=U=>{h("seconds",U)},D=(U,V,se,S)=>{V&&k(U),!V&&!se&&_(U),se&&F(U),n.value&&S(n.value)},P=U=>{if(U){const V=Array.isArray(U),se=V?[+U[0].hours,+U[1].hours]:+U.hours,S=V?[+U[0].minutes,+U[1].minutes]:+U.minutes,L=V?[+U[0].seconds,+U[1].seconds]:+U.seconds;u("hours",se),u("minutes",S),t.enableSeconds&&u("seconds",L)}},x=(U,V)=>{const se={hours:Array.isArray(e.hours)?e.hours[U]:e.hours,disabledArr:[]};return(V||V===0)&&(se.hours=V),Array.isArray(t.disabledTimes)&&(se.disabledArr=t.range&&Array.isArray(t.disabledTimes[U])?t.disabledTimes[U]:t.disabledTimes),se},ee=te(()=>(U,V)=>{var se;if(Array.isArray(t.disabledTimes)){const{disabledArr:S,hours:L}=x(U,V),W=S.filter(Q=>+Q.hours===L);return((se=W[0])==null?void 0:se.minutes)==="*"?{hours:[L],minutes:void 0,seconds:void 0}:{hours:[],minutes:(W==null?void 0:W.map(Q=>+Q.minutes))??[],seconds:(W==null?void 0:W.map(Q=>Q.seconds?+Q.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:k,updateMinutes:_,updateSeconds:F,getSetDateTime:i,updateTimeValues:D,getSecondsValue:l,assignStartTime:P,validateTime:p,disabledTimesConfig:ee}},uF=(t,e)=>{const{modelValue:n,time:a}=Ms(t,e),{defaultedStartTime:o}=Xe(t),{updateTimeValues:l,getSetDateTime:i,setTime:u,assignStartTime:p,disabledTimesConfig:h,validateTime:k}=Da(t,a,n),_=V=>{const{hours:se,minutes:S,seconds:L}=V;return{hours:+se,minutes:+S,seconds:L?+L:0}},F=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const se=_(t.startTime[0]),S=_(t.startTime[1]);return[Ee(G(),se),Ee(G(),S)]}const V=_(t.startTime);return Ee(G(),V)}return t.range?[null,null]:null},D=()=>{if(t.range){const[V,se]=F();n.value=[i(V,0),i(se,1)]}else n.value=i(F())},P=V=>Array.isArray(V)?[Gt(G(V[0])),Gt(G(V[1]))]:[Gt(V??G())],x=(V,se,S)=>{u("hours",V),u("minutes",se),u("seconds",t.enableSeconds?S:0)},ee=()=>{const[V,se]=P(n.value);return t.range?x([V.hours,se.hours],[V.minutes,se.minutes],[V.seconds,se.minutes]):x(V.hours,V.minutes,V.seconds)};rt(()=>{if(!t.shadow)return p(o.value),n.value?ee():D()});const U=()=>{Array.isArray(n.value)?n.value=n.value.map((V,se)=>V&&i(V,se)):n.value=i(n.value),e("time-update")};return{modelValue:n,time:a,disabledTimesConfig:h,updateTime:(V,se=!0,S=!1)=>{l(V,se,S,U)},validateTime:k}},cF=tt({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Tt},emits:["update:internal-model-value","time-update","am-pm-change"],setup(t,{expose:e,emit:n}){const a=n,o=t,l=ss(),i=ht(l,"timePicker"),{time:u,modelValue:p,disabledTimesConfig:h,updateTime:k,validateTime:_}=uF(o,a);return e({getSidebarProps:()=>({modelValue:p,time:u,updateTime:k})}),(F,D)=>(r(),H(Js,{"multi-calendars":0,stretch:""},{default:O(()=>[E(Ta,ot(F.$props,{hours:C(u).hours,minutes:C(u).minutes,seconds:C(u).seconds,"internal-model-value":F.internalModelValue,"disabled-times-config":C(h),"validate-time":C(_),"onUpdate:hours":D[0]||(D[0]=P=>C(k)(P)),"onUpdate:minutes":D[1]||(D[1]=P=>C(k)(P,!1)),"onUpdate:seconds":D[2]||(D[2]=P=>C(k)(P,!1,!0)),onAmPmChange:D[3]||(D[3]=P=>F.$emit("am-pm-change",P))}),mt({_:2},[oe(C(i),(P,x)=>({name:P,fn:O(ee=>[ye(F.$slots,P,Ge(ct(ee)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),mF={class:"dp__month_year_row"},pF=["aria-label","onClick","onKeydown"],hF=tt({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Tt},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(t,{expose:e,emit:n}){const a=n,o=t,{defaultedTransitions:l,defaultedAriaLabels:i,defaultedMultiCalendars:u,defaultedFilters:p,defaultedConfig:h,defaultedHighlight:k}=Xe(o),{transitionName:_,showTransition:F}=As(l),{buildMatrix:D}=Wt(),{handleMonthYearChange:P,isDisabled:x,updateMonthYear:ee}=C5(o,a),{showLeftIcon:U,showRightIcon:V}=Gs(),se=ce(!1),S=ce(!1),L=ce([null,null,null,null]);rt(()=>{a("mount")});const W=m=>({get:()=>o[m],set:A=>{const I=m===$t.month?$t.year:$t.month;a("update-month-year",{[m]:A,[I]:o[I]}),m===$t.month?Y(!0):g(!0)}}),Q=te(W($t.month)),he=te(W($t.year)),ne=te(()=>m=>({month:o.month,year:o.year,items:m===$t.month?o.months:o.years,instance:o.instance,updateMonthYear:ee,toggle:m===$t.month?Y:g})),y=te(()=>o.months.find(A=>A.value===o.month)||{text:"",value:0}),M=te(()=>ms(o.months,m=>{const A=o.month===m.value,I=Ps(m.value,ha(o.year,o.minDate),_a(o.year,o.maxDate))||p.value.months.includes(m.value),le=$a(k.value,m.value,o.year);return{active:A,disabled:I,highlighted:le}})),X=te(()=>ms(o.years,m=>{const A=o.year===m.value,I=Ps(m.value,ps(o.minDate),ps(o.maxDate))||p.value.years.includes(m.value),le=Jn(k.value,m.value);return{active:A,disabled:I,highlighted:le}})),re=(m,A)=>{A!==void 0?m.value=A:m.value=!m.value,m.value||a("overlay-closed")},Y=(m=!1,A)=>{q(m),re(se,A)},g=(m=!1,A)=>{q(m),re(S,A)},q=m=>{m||a("reset-flow")},z=(m,A)=>{o.arrowNavigation&&(L.value[A]=Ze(m),D(L.value,"monthYear"))},K=te(()=>{var m,A;return[{type:$t.month,index:1,toggle:Y,modelValue:Q.value,updateModelValue:I=>Q.value=I,text:y.value.text,showSelectionGrid:se.value,items:M.value,ariaLabel:(m=i.value)==null?void 0:m.openMonthsOverlay},{type:$t.year,index:2,toggle:g,modelValue:he.value,updateModelValue:I=>he.value=I,text:o.year,showSelectionGrid:S.value,items:X.value,ariaLabel:(A=i.value)==null?void 0:A.openYearsOverlay}]}),f=te(()=>o.disableYearSelect?[K.value[0]]:o.yearFirst?[...K.value].reverse():K.value);return e({toggleMonthPicker:Y,toggleYearPicker:g,handleMonthYearChange:P}),(m,A)=>{var I,le,de;return r(),d("div",mF,[m.$slots["month-year"]?ye(m.$slots,"month-year",Ge(ot({key:0},{month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:C(ee),handleMonthYearChange:C(P),instance:t.instance}))):(r(),d(B,{key:1},[C(U)(C(u),t.instance)&&!m.vertical?(r(),H(Cs,{key:0,"aria-label":(I=C(i))==null?void 0:I.prevMonth,disabled:C(x)(!1),onActivate:A[0]||(A[0]=R=>C(P)(!1,!0)),onSetRef:A[1]||(A[1]=R=>z(R,0))},{default:O(()=>[m.$slots["arrow-left"]?ye(m.$slots,"arrow-left",{key:0}):c("",!0),m.$slots["arrow-left"]?c("",!0):(r(),H(C(En),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),s("div",{class:j(["dp__month_year_wrap",{dp__year_disable_select:m.disableYearSelect}])},[(r(!0),d(B,null,oe(f.value,(R,b)=>(r(),d(B,{key:R.type},[s("button",{ref_for:!0,ref:ve=>z(ve,b+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":R.ariaLabel,onClick:R.toggle,onKeydown:[Pe(Fe(R.toggle,["prevent"]),["enter"]),Pe(Fe(R.toggle,["prevent"]),["space"])]},[m.$slots[R.type]?ye(m.$slots,R.type,{key:0,text:R.text,value:o[R.type]}):c("",!0),m.$slots[R.type]?c("",!0):(r(),d(B,{key:1},[w(v(R.text),1)],64))],40,pF),E(_s,{name:C(_)(R.showSelectionGrid),css:C(F)},{default:O(()=>[R.showSelectionGrid?(r(),H(js,{key:0,items:R.items,"arrow-navigation":m.arrowNavigation,"hide-navigation":m.hideNavigation,"is-last":m.autoApply&&!C(h).keepActionRow,"skip-button-ref":!1,config:m.config,type:R.type,"header-refs":[],"esc-close":m.escClose,"text-input":m.textInput,onSelected:R.updateModelValue,onToggle:R.toggle},mt({"button-icon":O(()=>[m.$slots["calendar-icon"]?ye(m.$slots,"calendar-icon",{key:0}):c("",!0),m.$slots["calendar-icon"]?c("",!0):(r(),H(C(fs),{key:1}))]),_:2},[m.$slots[`${R.type}-overlay-value`]?{name:"item",fn:O(({item:ve})=>[ye(m.$slots,`${R.type}-overlay-value`,{text:ve.text,value:ve.value})]),key:"0"}:void 0,m.$slots[`${R.type}-overlay`]?{name:"overlay",fn:O(()=>[ye(m.$slots,`${R.type}-overlay`,Ge(ct(ne.value(R.type))))]),key:"1"}:void 0,m.$slots[`${R.type}-overlay-header`]?{name:"header",fn:O(()=>[ye(m.$slots,`${R.type}-overlay-header`,{toggle:R.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"])],64))),128))],2),C(U)(C(u),t.instance)&&m.vertical?(r(),H(Cs,{key:1,"aria-label":(le=C(i))==null?void 0:le.prevMonth,disabled:C(x)(!1),onActivate:A[2]||(A[2]=R=>C(P)(!1,!0))},{default:O(()=>[m.$slots["arrow-up"]?ye(m.$slots,"arrow-up",{key:0}):c("",!0),m.$slots["arrow-up"]?c("",!0):(r(),H(C(Hn),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),C(V)(C(u),t.instance)?(r(),H(Cs,{key:2,ref:"rightIcon",disabled:C(x)(!0),"aria-label":(de=C(i))==null?void 0:de.nextMonth,onActivate:A[3]||(A[3]=R=>C(P)(!0,!0)),onSetRef:A[4]||(A[4]=R=>z(R,m.disableYearSelect?2:3))},{default:O(()=>[m.$slots[m.vertical?"arrow-down":"arrow-right"]?ye(m.$slots,m.vertical?"arrow-down":"arrow-right",{key:0}):c("",!0),m.$slots[m.vertical?"arrow-down":"arrow-right"]?c("",!0):(r(),H(Fs(m.vertical?C(Wn):C(Qn)),{key:1}))]),_:3},8,["disabled","aria-label"])):c("",!0)],64))])}}}),_F=["aria-label"],fF={class:"dp__calendar_header",role:"row"},vF={key:0,class:"dp__calendar_header_item",role:"gridcell"},bF=s("div",{class:"dp__calendar_header_separator"},null,-1),gF=["aria-label"],yF={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},$F={class:"dp__cell_inner"},kF=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],wF=tt({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Tt},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:n}){const a=n,o=t,{buildMultiLevelMatrix:l}=Wt(),{defaultedTransitions:i,defaultedConfig:u,defaultedAriaLabels:p,defaultedMultiCalendars:h,defaultedWeekNumbers:k}=Xe(o),_=ce(null),F=ce({bottom:"",left:"",transform:""}),D=ce([]),P=ce(null),x=ce(!0),ee=ce(""),U=ce({startX:0,endX:0,startY:0,endY:0}),V=ce([]),se=ce({left:"50%"}),S=te(()=>o.calendar?o.calendar(o.mappedDates):o.mappedDates),L=te(()=>o.dayNames?Array.isArray(o.dayNames)?o.dayNames:o.dayNames(o.locale,+o.weekStart):XC(o.formatLocale,o.locale,+o.weekStart));rt(()=>{a("mount",{cmp:"calendar",refs:D}),u.value.noSwipe||P.value&&(P.value.addEventListener("touchstart",g,{passive:!1}),P.value.addEventListener("touchend",q,{passive:!1}),P.value.addEventListener("touchmove",z,{passive:!1})),o.monthChangeOnScroll&&P.value&&P.value.addEventListener("wheel",m,{passive:!1})});const W=R=>R?o.vertical?"vNext":"next":o.vertical?"vPrevious":"previous",Q=(R,b)=>{if(o.transitions){const ve=it(Rt(G(),o.month,o.year));ee.value=lt(it(Rt(G(),R,b)),ve)?i.value[W(!0)]:i.value[W(!1)],x.value=!1,Lt(()=>{x.value=!0})}},he=te(()=>({[o.calendarClassName]:!!o.calendarClassName})),ne=te(()=>R=>{const b=ZC(R);return{dp__marker_dot:b.type==="dot",dp__marker_line:b.type==="line"}}),y=te(()=>R=>Ve(R,_.value)),M=te(()=>({dp__calendar:!0,dp__calendar_next:h.value.count>0&&o.instance!==0})),X=te(()=>R=>o.hideOffsetDates?R.current:!0),re=async(R,b,ve)=>{var be,J;if(a("set-hover-date",R),(J=(be=R.marker)==null?void 0:be.tooltip)!=null&&J.length){const Ce=Ze(D.value[b][ve]);if(Ce){const{width:ge,height:N}=Ce.getBoundingClientRect();_.value=R.value;let ie={left:`${ge/2}px`},Se=-50;if(await Lt(),V.value[0]){const{left:ue,width:Be}=V.value[0].getBoundingClientRect();ue<0&&(ie={left:"0"},Se=0,se.value.left=`${ge/2}px`),window.innerWidth<ue+Be&&(ie={right:"0"},Se=0,se.value.left=`${Be-ge/2}px`)}F.value={bottom:`${N}px`,...ie,transform:`translateX(${Se}%)`},a("tooltip-open",R.marker)}}},Y=R=>{_.value&&(_.value=null,F.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),a("tooltip-close",R.marker))},g=R=>{U.value.startX=R.changedTouches[0].screenX,U.value.startY=R.changedTouches[0].screenY},q=R=>{U.value.endX=R.changedTouches[0].screenX,U.value.endY=R.changedTouches[0].screenY,K()},z=R=>{o.vertical&&!o.inline&&R.preventDefault()},K=()=>{const R=o.vertical?"Y":"X";Math.abs(U.value[`start${R}`]-U.value[`end${R}`])>10&&a("handle-swipe",U.value[`start${R}`]>U.value[`end${R}`]?"right":"left")},f=(R,b,ve)=>{R&&(Array.isArray(D.value[b])?D.value[b][ve]=R:D.value[b]=[R]),o.arrowNavigation&&l(D.value,"calendar")},m=R=>{o.monthChangeOnScroll&&(R.preventDefault(),a("handle-scroll",R))},A=R=>k.value.type==="local"?r3(R.value,{weekStartsOn:+o.weekStart}):k.value.type==="iso"?o3(R.value):typeof k.value.type=="function"?k.value.type(R.value):"",I=R=>{const b=R[0];return k.value.hideOnOffsetDates?R.some(ve=>ve.current)?A(b):"":A(b)},le=(R,b)=>{Et(R,u.value),a("select-date",b)},de=R=>{Et(R,u.value)};return e({triggerTransition:Q}),(R,b)=>{var ve;return r(),d("div",{class:j(M.value)},[s("div",{ref_key:"calendarWrapRef",ref:P,role:"grid",class:j(he.value),"aria-label":(ve=C(p))==null?void 0:ve.calendarWrap},[(r(),d(B,{key:0},[s("div",fF,[R.weekNumbers?(r(),d("div",vF,v(R.weekNumName),1)):c("",!0),(r(!0),d(B,null,oe(L.value,(be,J)=>(r(),d("div",{key:J,class:"dp__calendar_header_item",role:"gridcell"},[R.$slots["calendar-header"]?ye(R.$slots,"calendar-header",{key:0,day:be,index:J}):c("",!0),R.$slots["calendar-header"]?c("",!0):(r(),d(B,{key:1},[w(v(be),1)],64))]))),128))]),bF,E(_s,{name:ee.value,css:!!R.transitions},{default:O(()=>{var be;return[x.value?(r(),d("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((be=C(p))==null?void 0:be.calendarDays)||void 0},[(r(!0),d(B,null,oe(S.value,(J,Ce)=>(r(),d("div",{key:Ce,class:"dp__calendar_row",role:"row"},[R.weekNumbers?(r(),d("div",yF,[s("div",$F,v(I(J.days)),1)])):c("",!0),(r(!0),d(B,null,oe(J.days,(ge,N)=>{var ie,Se,ue;return r(),d("div",{id:ge.value.toISOString().split("T")[0],ref_for:!0,ref:Be=>f(Be,Ce,N),key:N+Ce,role:"gridcell",class:"dp__calendar_item","aria-selected":ge.classData.dp__active_date||ge.classData.dp__range_start||ge.classData.dp__range_start,"aria-disabled":ge.classData.dp__cell_disabled||void 0,"aria-label":(Se=(ie=C(p))==null?void 0:ie.day)==null?void 0:Se.call(ie,ge),tabindex:"0",onClick:Fe(Be=>le(Be,ge),["prevent"]),onKeydown:[Pe(Be=>R.$emit("select-date",ge),["enter"]),Pe(Be=>R.$emit("handle-space",ge),["space"])],onMouseenter:Be=>re(ge,Ce,N),onMouseleave:Be=>Y(ge)},[s("div",{class:j(["dp__cell_inner",ge.classData])},[R.$slots.day&&X.value(ge)?ye(R.$slots,"day",{key:0,day:+ge.text,date:ge.value}):c("",!0),R.$slots.day?c("",!0):(r(),d(B,{key:1},[w(v(ge.text),1)],64)),ge.marker&&X.value(ge)?(r(),d(B,{key:2},[R.$slots.marker?ye(R.$slots,"marker",{key:0,marker:ge.marker,day:+ge.text,date:ge.value}):(r(),d("div",{key:1,class:j(ne.value(ge.marker)),style:bt(ge.marker.color?{backgroundColor:ge.marker.color}:{})},null,6))],64)):c("",!0),y.value(ge.value)?(r(),d("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:V,class:"dp__marker_tooltip",style:bt(F.value)},[(ue=ge.marker)!=null&&ue.tooltip?(r(),d("div",{key:0,class:"dp__tooltip_content",onClick:de},[(r(!0),d(B,null,oe(ge.marker.tooltip,(Be,pt)=>(r(),d("div",{key:pt,class:"dp__tooltip_text"},[R.$slots["marker-tooltip"]?ye(R.$slots,"marker-tooltip",{key:0,tooltip:Be,day:ge.value}):c("",!0),R.$slots["marker-tooltip"]?c("",!0):(r(),d(B,{key:1},[s("div",{class:"dp__tooltip_mark",style:bt(Be.color?{backgroundColor:Be.color}:{})},null,4),s("div",null,v(Be.text),1)],64))]))),128)),s("div",{class:"dp__arrow_bottom_tp",style:bt(se.value)},null,4)])):c("",!0)],4)):c("",!0)],2)],40,kF)}),128))]))),128))],8,gF)):c("",!0)]}),_:3},8,["name","css"])],64))],10,_F)],2)}}}),Oo=t=>Array.isArray(t),CF=(t,e,n,a)=>{const o=ce([]),{modelValue:l,calendars:i,time:u}=Ms(t,e),{defaultedMultiCalendars:p,defaultedStartTime:h}=Xe(t),{validateMonthYearInRange:k,isDisabled:_,isDateRangeAllowed:F,checkMinMaxRange:D}=ns(t),{updateTimeValues:P,getSetDateTime:x,setTime:ee,assignStartTime:U,validateTime:V,disabledTimesConfig:se}=Da(t,u,l,a),S=te(()=>T=>i.value[T]?i.value[T].month:0),L=te(()=>T=>i.value[T]?i.value[T].year:0),W=(T,ae,we)=>{var Me,Qe;i.value[T]||(i.value[T]={month:0,year:0}),i.value[T].month=Fo(ae)?(Me=i.value[T])==null?void 0:Me.month:ae,i.value[T].year=Fo(we)?(Qe=i.value[T])==null?void 0:Qe.year:we},Q=()=>{t.autoApply&&e("select-date")};Ht(l,(T,ae)=>{JSON.stringify(T)!==JSON.stringify(ae)&&y()}),rt(()=>{t.shadow||(l.value||(m(),h.value&&U(h.value)),y(!0),t.focusStartDate&&t.startDate&&m())});const he=te(()=>{var T;return(T=t.flow)!=null&&T.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),ne=()=>{t.autoApply&&he.value&&e("auto-apply",t.partialFlow)},y=(T=!1)=>{if(l.value)return Array.isArray(l.value)?(o.value=l.value,q(T)):X(l.value,T);if(p.value.count&&T&&!t.startDate)return M(G(),T)},M=(T,ae=!1)=>{if((!p.value.count||!p.value.static||ae)&&W(0,ze(T),Ae(T)),p.value.count&&(!p.value.solo||!l.value))for(let we=1;we<p.value.count;we++){const Me=Ee(G(),{month:S.value(we-1),year:L.value(we-1)}),Qe=Io(Me,{months:1});i.value[we]={month:ze(Qe),year:Ae(Qe)}}},X=(T,ae)=>{M(T),ee("hours",Ct(T)),ee("minutes",Mt(T)),ee("seconds",us(T)),p.value.count&&ae&&f()},re=T=>{if(p.value.count){if(p.value.solo)return 0;const ae=ze(T[0]),we=ze(T[1]);return Math.abs(we-ae)<p.value.count?0:1}return 1},Y=(T,ae)=>{T[1]&&t.showLastInRange?M(T[re(T)],ae):M(T[0],ae);const we=(Me,Qe)=>[Me(T[0]),T[1]?Me(T[1]):u[Qe][1]];ee("hours",we(Ct,"hours")),ee("minutes",we(Mt,"minutes")),ee("seconds",we(us,"seconds"))},g=(T,ae)=>{if((t.range||t.weekPicker)&&!t.multiDates)return Y(T,ae);if(t.multiDates&&ae){const we=T[T.length-1];return X(we,ae)}},q=T=>{const ae=l.value;g(ae,T),p.value.count&&p.value.solo&&f()},z=(T,ae)=>{const we=Ee(G(),{month:S.value(ae),year:L.value(ae)}),Me=T<0?wt(we,1):cs(we,1);k(ze(Me),Ae(Me),T<0,t.preventMinMaxNavigation)&&(W(ae,ze(Me),Ae(Me)),e("update-month-year",{instance:ae,month:ze(Me),year:Ae(Me)}),p.value.count&&!p.value.solo&&K(ae),n())},K=T=>{for(let ae=T-1;ae>=0;ae--){const we=cs(Ee(G(),{month:S.value(ae+1),year:L.value(ae+1)}),1);W(ae,ze(we),Ae(we))}for(let ae=T+1;ae<=p.value.count-1;ae++){const we=wt(Ee(G(),{month:S.value(ae-1),year:L.value(ae-1)}),1);W(ae,ze(we),Ae(we))}},f=()=>{if(Array.isArray(l.value)&&l.value.length===2){const T=G(G(l.value[1]?l.value[1]:wt(l.value[0],1))),[ae,we]=[ze(l.value[0]),Ae(l.value[0])],[Me,Qe]=[ze(l.value[1]),Ae(l.value[1])];(ae!==Me||ae===Me&&we!==Qe)&&p.value.solo&&W(1,ze(T),Ae(T))}else l.value&&!Array.isArray(l.value)&&(W(0,ze(l.value),Ae(l.value)),M(G()))},m=()=>{t.startDate&&(W(0,ze(G(t.startDate)),Ae(G(t.startDate))),p.value.count&&K(0))},A=n5((T,ae)=>{t.monthChangeOnScroll&&z(t.monthChangeOnScroll!=="inverse"?-T.deltaY:T.deltaY,ae)},50),I=(T,ae,we=!1)=>{t.monthChangeOnArrows&&t.vertical===we&&le(T,ae)},le=(T,ae)=>{z(T==="right"?-1:1,ae)},de=T=>t.markers.find(ae=>Ve(l5(T.value),Ft(G(ae.date),t.timezone))),R=(T,ae)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[T==0,!0];case"fair":return[T==0||ae>T,!0];case"append":return[!1,!1];default:return[!1,!1]}},b=(T,ae,we,Me)=>{if(t.sixWeeks&&T.length<6){const Qe=6-T.length,Dt=(ae.getDay()+7-Me)%7,Yt=6-(we.getDay()+7-Me)%7,[me,Oe]=R(Dt,Yt);for(let Te=1;Te<=Qe;Te++)if(Oe?!!(Te%2)==me:me){const vt=T[0].days[0],qt=ve(zt(vt.value,-7),ze(ae));T.unshift({days:qt})}else{const vt=T[T.length-1],qt=vt.days[vt.days.length-1],an=ve(zt(qt.value,1),ze(ae));T.push({days:an})}}return T},ve=(T,ae)=>{const we=G(T),Me=[];for(let Qe=0;Qe<7;Qe++){const Dt=zt(we,Qe),Yt=ze(Dt)!==ae;Me.push({text:t.hideOffsetDates&&Yt?"":Dt.getDate(),value:Dt,current:!Yt,classData:{}})}return Me},be=(T,ae)=>{const we=[],Me=new Date(ae,T),Qe=new Date(ae,T+1,0),Dt=t.weekStart,Yt=es(Me,{weekStartsOn:Dt}),me=Oe=>{const Te=ve(Oe,T);if(we.push({days:Te}),!we[we.length-1].days.some(vt=>Ve(it(vt.value),it(Qe)))){const vt=zt(Oe,7);me(vt)}};return me(Yt),b(we,Me,Qe,Dt)},J=T=>(l.value=Is(G(T.value),t.timezone,t.weekStart),e("date-update",T.value),ne()),Ce=T=>{const ae=Qt(G(T.value),u.hours,u.minutes,os());e("date-update",ae),t.multiDates?eo(ae,l,t.multiDatesLimit):l.value=ae,a(),Lt().then(()=>{ne()})},ge=T=>t.noDisabledRange?va(o.value[0],T).some(ae=>_(ae)):!1,N=()=>{o.value=l.value?l.value.slice():[],o.value.length===2&&!(t.fixedStart||t.fixedEnd)&&(o.value=[])},ie=(T,ae)=>{const we=[G(T.value),zt(G(T.value),+t.autoRange)];F(we)?(ae&&Se(T.value),o.value=we):e("invalid-date",T.value)},Se=T=>{const ae=ze(G(T)),we=Ae(G(T));if(W(0,ae,we),p.value.count>0)for(let Me=1;Me<p.value.count;Me++){const Qe=i5(Ee(G(T),{year:S.value(Me-1),month:L.value(Me-1)}));W(Me,Qe.month,Qe.year)}},ue=T=>Array.isArray(l.value)&&l.value.length===2?t.fixedStart&&(lt(T,l.value[0])||Ve(T,l.value[0]))?[l.value[0],T]:t.fixedEnd&&(nt(T,l.value[1])||Ve(T,l.value[1]))?[T,l.value[1]]:(e("invalid-fixed-range",T),l.value):[],Be=T=>{if(ge(T.value)||!D(T.value,l.value,t.fixedStart?0:1))return e("invalid-date",T.value);o.value=ue(G(T.value))},pt=(T,ae)=>{if(N(),t.autoRange)return ie(T,ae);if(t.fixedStart||t.fixedEnd)return Be(T);o.value[0]?D(G(T.value),l.value)&&!ge(T.value)?nt(G(T.value),G(o.value[0]))?(o.value.unshift(G(T.value)),e("range-end",o.value[0])):(o.value[1]=G(T.value),e("range-end",o.value[1])):(t.autoApply&&e("auto-apply-invalid",T.value),e("invalid-date",T.value)):(o.value[0]=G(T.value),e("range-start",o.value[0]))},os=(T=!0)=>t.enableSeconds?Array.isArray(u.seconds)?T?u.seconds[0]:u.seconds[1]:u.seconds:0,Vt=T=>{o.value[T]=Qt(o.value[T],u.hours[T],u.minutes[T],os(T!==1))},qs=()=>{var T,ae;o.value[0]&&o.value[1]&&+((T=o.value)==null?void 0:T[0])>+((ae=o.value)==null?void 0:ae[1])&&(o.value.reverse(),e("range-start",o.value[0]),e("range-end",o.value[1]))},zs=()=>{o.value.length&&(o.value[0]&&!o.value[1]?Vt(0):(Vt(0),Vt(1),a()),qs(),l.value=o.value.slice(),en(o.value,e,t.autoApply,t.modelAuto))},sn=(T,ae=!1)=>{if(_(T.value)||!T.current&&t.hideOffsetDates)return e("invalid-date",T.value);if(t.weekPicker)return J(T);if(!t.range)return Ce(T);Oo(u.hours)&&Oo(u.minutes)&&!t.multiDates&&(pt(T,ae),zs())},bs=(T,ae)=>{var we;W(T,ae.month,ae.year),p.value.count&&!p.value.solo&&K(T),e("update-month-year",{instance:T,month:ae.month,year:ae.year}),n(p.value.solo?T:void 0);const Me=(we=t.flow)!=null&&we.length?t.flow[t.flowStep]:void 0;!ae.fromNav&&(Me===St.month||Me===St.year)&&a()},ft=(T,ae)=>{Ca({value:T,modelValue:l,range:t.range,timezone:ae?void 0:t.timezone}),Q(),t.multiCalendars&&Lt().then(()=>y(!0))},nn=()=>{t.range?l.value&&Array.isArray(l.value)&&l.value[0]?l.value=nt(G(),l.value[0])?[G(),l.value[0]]:[l.value[0],G()]:l.value=[G()]:l.value=G(),Q()},on=()=>{if(Array.isArray(l.value))if(t.multiDates){const T=Rs();l.value[l.value.length-1]=x(T)}else l.value=l.value.map((T,ae)=>T&&x(T,ae));else l.value=x(l.value);e("time-update")},Rs=()=>Array.isArray(l.value)&&l.value.length?l.value[l.value.length-1]:null;return{calendars:i,modelValue:l,month:S,year:L,time:u,disabledTimesConfig:se,validateTime:V,getCalendarDays:be,getMarker:de,handleScroll:A,handleSwipe:le,handleArrow:I,selectDate:sn,updateMonthYear:bs,presetDate:ft,selectCurrentDate:nn,updateTime:(T,ae=!0,we=!1)=>{P(T,ae,we,on)}}},FF={key:0},TF=tt({__name:"DatePicker",props:{...Tt},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const a=n,o=t,{calendars:l,month:i,year:u,modelValue:p,time:h,disabledTimesConfig:k,validateTime:_,getCalendarDays:F,getMarker:D,handleArrow:P,handleScroll:x,handleSwipe:ee,selectDate:U,updateMonthYear:V,presetDate:se,selectCurrentDate:S,updateTime:L}=CF(o,a,f,m),W=ss(),{setHoverDate:Q,getDayClassData:he,clearHoverDate:ne}=S5(p,o),{defaultedMultiCalendars:y}=Xe(o),M=ce([]),X=ce([]),re=ce(null),Y=ht(W,"calendar"),g=ht(W,"monthYear"),q=ht(W,"timePicker"),z=I=>{o.shadow||a("mount",I)};Ht(l,()=>{o.shadow||setTimeout(()=>{a("recalculate-position")},0)},{deep:!0});const K=te(()=>I=>F(i.value(I),u.value(I)).map(le=>({...le,days:le.days.map(de=>(de.marker=D(de),de.classData=he(de),de))})));function f(I){var le;I||I===0?(le=X.value[I])==null||le.triggerTransition(i.value(I),u.value(I)):X.value.forEach((de,R)=>de.triggerTransition(i.value(R),u.value(R)))}function m(){a("update-flow-step")}const A=(I,le=!1)=>{U(I,le),o.spaceConfirm&&a("select-date")};return e({clearHoverDate:ne,presetDate:se,selectCurrentDate:S,toggleMonthPicker:(I,le,de=0)=>{var R;(R=M.value[de])==null||R.toggleMonthPicker(I,le)},toggleYearPicker:(I,le,de=0)=>{var R;(R=M.value[de])==null||R.toggleYearPicker(I,le)},toggleTimePicker:(I,le,de)=>{var R;(R=re.value)==null||R.toggleTimePicker(I,le,de)},handleArrow:P,updateMonthYear:V,getSidebarProps:()=>({modelValue:p,month:i,year:u,time:h,updateTime:L,updateMonthYear:V,selectDate:U,presetDate:se})}),(I,le)=>(r(),d(B,null,[E(Js,{"multi-calendars":C(y).count},{default:O(({instance:de,index:R})=>[I.disableMonthYearSelect?c("",!0):(r(),H(hF,ot({key:0,ref:b=>{b&&(M.value[R]=b)},months:C(ma)(I.formatLocale,I.locale,I.monthNameFormat),years:C(Zn)(I.yearRange,I.reverseYears),month:C(i)(de),year:C(u)(de),instance:de},I.$props,{onMount:le[0]||(le[0]=b=>z(C(Zt).header)),onResetFlow:le[1]||(le[1]=b=>I.$emit("reset-flow")),onUpdateMonthYear:b=>C(V)(de,b),onOverlayClosed:le[2]||(le[2]=b=>I.$emit("focus-menu"))}),mt({_:2},[oe(C(g),(b,ve)=>({name:b,fn:O(be=>[ye(I.$slots,b,Ge(ct(be)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),E(wF,ot({ref:b=>{b&&(X.value[R]=b)},"mapped-dates":K.value(de),month:C(i)(de),year:C(u)(de),instance:de},I.$props,{onSelectDate:b=>C(U)(b,de!==1),onHandleSpace:b=>A(b,de!==1),onSetHoverDate:le[3]||(le[3]=b=>C(Q)(b)),onHandleScroll:b=>C(x)(b,de),onHandleSwipe:b=>C(ee)(b,de),onMount:le[4]||(le[4]=b=>z(C(Zt).calendar)),onResetFlow:le[5]||(le[5]=b=>I.$emit("reset-flow")),onTooltipOpen:le[6]||(le[6]=b=>I.$emit("tooltip-open",b)),onTooltipClose:le[7]||(le[7]=b=>I.$emit("tooltip-close",b))}),mt({_:2},[oe(C(Y),(b,ve)=>({name:b,fn:O(be=>[ye(I.$slots,b,Ge(ct({...be})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),I.enableTimePicker?(r(),d("div",FF,[I.$slots["time-picker"]?ye(I.$slots,"time-picker",Ge(ot({key:0},{time:C(h),updateTime:C(L)}))):(r(),H(Ta,ot({key:1,ref_key:"timePickerRef",ref:re},I.$props,{hours:C(h).hours,minutes:C(h).minutes,seconds:C(h).seconds,"internal-model-value":I.internalModelValue,"disabled-times-config":C(k),"validate-time":C(_),onMount:le[8]||(le[8]=de=>z(C(Zt).timePicker)),"onUpdate:hours":le[9]||(le[9]=de=>C(L)(de)),"onUpdate:minutes":le[10]||(le[10]=de=>C(L)(de,!1)),"onUpdate:seconds":le[11]||(le[11]=de=>C(L)(de,!1,!0)),onResetFlow:le[12]||(le[12]=de=>I.$emit("reset-flow")),onOverlayClosed:le[13]||(le[13]=de=>I.$emit("time-picker-close")),onOverlayOpened:le[14]||(le[14]=de=>I.$emit("time-picker-open",de)),onAmPmChange:le[15]||(le[15]=de=>I.$emit("am-pm-change",de))}),mt({_:2},[oe(C(q),(de,R)=>({name:de,fn:O(b=>[ye(I.$slots,de,Ge(ct(b)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):c("",!0)],64))}}),DF=(t,e)=>{const n=ce(),{defaultedMultiCalendars:a,defaultedConfig:o,defaultedHighlight:l}=Xe(t),{modelValue:i,year:u,month:p,calendars:h}=Ms(t,e),{isDisabled:k}=ns(t),{selectYear:_,groupedYears:F,showYearPicker:D,isDisabled:P,toggleYearPicker:x,handleYearSelect:ee,handleYear:U}=Fa({modelValue:i,multiCalendars:a,highlight:l,calendars:h,month:p,year:u,props:t,emit:e}),V=(ne,y)=>[ne,y].map(M=>Nt(M,"MMMM",{locale:t.formatLocale})).join("-"),se=te(()=>ne=>i.value?Array.isArray(i.value)?i.value.some(y=>ho(ne,y)):ho(i.value,ne):!1),S=ne=>{if(t.range){if(Array.isArray(i.value)){const y=Ve(ne,i.value[0])||Ve(ne,i.value[1]);return Xs(i.value,n.value,ne)&&!y}return!1}return!1},L=te(()=>ne=>{const y=Ee(new Date,{year:u.value(ne)});return H2({start:K2(y),end:W2(y)}).map(M=>{const X=Ts(M),re=lo(M),Y=k(M),g=S(X),q=typeof l.value=="function"?l.value({quarter:ao(X),year:Ae(X)}):!!l.value.quarters.find(z=>z.quarter===ao(X)&&z.year===Ae(X));return{text:V(X,re),value:X,active:se.value(X),highlighted:q,disabled:Y,isBetween:g}})}),W=ne=>{eo(ne,i,t.multiDatesLimit),e("auto-apply",!0)},Q=ne=>{const y=to(i,ne,e);en(y,e,t.autoApply,t.modelAuto)},he=ne=>{i.value=ne,e("auto-apply")};return{defaultedConfig:o,defaultedMultiCalendars:a,groupedYears:F,year:u,isDisabled:P,quarters:L,showYearPicker:D,modelValue:i,setHoverDate:ne=>{n.value=ne},selectYear:_,selectQuarter:(ne,y,M)=>{if(!M)return h.value[y].month=ze(lo(ne)),t.multiDates?W(ne):t.range?Q(ne):he(ne)},toggleYearPicker:x,handleYearSelect:ee,handleYear:U}},SF={class:"dp--quarter-items"},PF=["disabled","onClick","onMouseover"],OF=tt({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Tt},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(t,{expose:e,emit:n}){const a=n,o=t,l=ss(),i=ht(l,"yearMode"),{defaultedMultiCalendars:u,defaultedConfig:p,groupedYears:h,year:k,isDisabled:_,quarters:F,modelValue:D,showYearPicker:P,setHoverDate:x,selectQuarter:ee,toggleYearPicker:U,handleYearSelect:V,handleYear:se}=DF(o,a);return e({getSidebarProps:()=>({modelValue:D,year:k,selectQuarter:ee,handleYearSelect:V,handleYear:se})}),(S,L)=>(r(),H(Js,{"multi-calendars":C(u).count,stretch:""},{default:O(({instance:W})=>[s("div",{class:"dp-quarter-picker-wrap",style:bt({minHeight:`${C(p).modeHeight}px`})},[s("div",null,[E(wa,ot(S.$props,{items:C(h)(W),instance:W,"show-year-picker":C(P)[W],year:C(k)(W),"is-disabled":Q=>C(_)(W,Q),onHandleYear:Q=>C(se)(W,Q),onYearSelect:Q=>C(V)(Q,W),onToggleYearPicker:Q=>C(U)(W,Q==null?void 0:Q.flow,Q==null?void 0:Q.show)}),mt({_:2},[oe(C(i),(Q,he)=>({name:Q,fn:O(ne=>[ye(S.$slots,Q,Ge(ct(ne)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),s("div",SF,[(r(!0),d(B,null,oe(C(F)(W),(Q,he)=>(r(),d("div",{key:he},[s("button",{type:"button",class:j(["dp--qr-btn",{"dp--qr-btn-active":Q.active,"dp--qr-btn-between":Q.isBetween,"dp--qr-btn-disabled":Q.disabled,"dp--highlighted":Q.highlighted}]),disabled:Q.disabled,onClick:ne=>C(ee)(Q.value,W,Q.disabled),onMouseover:ne=>C(x)(Q.value)},[S.$slots.quarter?ye(S.$slots,"quarter",{key:0,value:Q.value,text:Q.text}):(r(),d(B,{key:1},[w(v(Q.text),1)],64))],42,PF)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),AF=["id"],MF={key:0,class:"dp__sidebar_left"},jF={key:1,class:"dp--preset-dates"},qF=["onClick","onKeydown"],zF={key:2,class:"dp__sidebar_right"},RF={key:3,class:"dp__action_extra"},Ao=tt({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Zs,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const a=n,o=t,l=te(()=>{const{openOnTop:N,...ie}=o;return{...ie,flowStep:he.value,noOverlayFocus:o.noOverlayFocus}}),{setMenuFocused:i,setShiftKey:u,control:p}=ka(),h=ss(),{defaultedTextInput:k,defaultedInline:_,defaultedConfig:F}=Xe(o),D=ce(null),P=ce(0),x=ce(null),ee=ce(null),U=ce(!1),V=ce(null);rt(()=>{if(!o.shadow){U.value=!0,se(),window.addEventListener("resize",se);const N=Ze(x);if(N&&!k.value.enabled&&!_.value.enabled&&(i(!0),re()),N){const ie=Se=>{F.value.allowPreventDefault&&Se.preventDefault(),Et(Se,F.value,!0)};N.addEventListener("pointerdown",ie),N.addEventListener("mousedown",ie)}}}),zn(()=>{window.removeEventListener("resize",se)});const se=()=>{const N=Ze(ee);N&&(P.value=N.getBoundingClientRect().width)},{arrowRight:S,arrowLeft:L,arrowDown:W,arrowUp:Q}=Wt(),{flowStep:he,updateFlowStep:ne,childMount:y,resetFlow:M}=P5(o,a,V),X=te(()=>o.monthPicker?L5:o.yearPicker?W5:o.timePicker?cF:o.quarterPicker?OF:TF),re=()=>{const N=Ze(x);N&&N.focus({preventScroll:!0})},Y=te(()=>{var N;return((N=V.value)==null?void 0:N.getSidebarProps())||{}}),g=()=>{o.openOnTop&&a("recalculate-position")},q=ht(h,"action"),z=te(()=>o.monthPicker||o.yearPicker?ht(h,"monthYear"):o.timePicker?ht(h,"timePicker"):ht(h,"shared")),K=te(()=>o.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),f=te(()=>({dp__menu_disabled:o.disabled,dp__menu_readonly:o.readonly})),m=te(()=>({dp__menu:!0,dp__menu_index:!_.value.enabled,dp__relative:_.value.enabled,[o.menuClassName]:!!o.menuClassName})),A=N=>{Et(N,F.value,!0)},I=()=>{o.escClose&&a("close-picker")},le=N=>{if(o.arrowNavigation){if(N==="up")return Q();if(N==="down")return W();if(N==="left")return L();if(N==="right")return S()}else N==="left"||N==="up"?be("handleArrow","left",0,N==="up"):be("handleArrow","right",0,N==="down")},de=N=>{u(N.shiftKey),!o.disableMonthYearSelect&&N.code==="Tab"&&N.target.classList.contains("dp__menu")&&p.value.shiftKeyInMenu&&(N.preventDefault(),Et(N,F.value,!0),a("close-picker"))},R=()=>{re(),a("time-picker-close")},b=N=>{var ie,Se,ue;(ie=V.value)==null||ie.toggleTimePicker(!1,!1),(Se=V.value)==null||Se.toggleMonthPicker(!1,!1,N),(ue=V.value)==null||ue.toggleYearPicker(!1,!1,N)},ve=(N,ie=0)=>{var Se,ue,Be;return N==="month"?(Se=V.value)==null?void 0:Se.toggleMonthPicker(!1,!0,ie):N==="year"?(ue=V.value)==null?void 0:ue.toggleYearPicker(!1,!0,ie):N==="time"?(Be=V.value)==null?void 0:Be.toggleTimePicker(!0,!1):b(ie)},be=(N,...ie)=>{var Se,ue;(Se=V.value)!=null&&Se[N]&&((ue=V.value)==null||ue[N](...ie))},J=()=>{be("selectCurrentDate")},Ce=(N,ie)=>{be("presetDate",N,ie)},ge=()=>{be("clearHoverDate")};return e({updateMonthYear:(N,ie)=>{be("updateMonthYear",N,ie)},switchView:ve}),(N,ie)=>{var Se;return r(),d("div",{id:N.uid?`dp-menu-${N.uid}`:void 0,ref_key:"dpMenuRef",ref:x,tabindex:"0",role:"dialog",class:j(m.value),onMouseleave:ge,onClick:A,onKeydown:[Pe(I,["esc"]),ie[18]||(ie[18]=Pe(Fe(ue=>le("left"),["prevent"]),["left"])),ie[19]||(ie[19]=Pe(Fe(ue=>le("up"),["prevent"]),["up"])),ie[20]||(ie[20]=Pe(Fe(ue=>le("down"),["prevent"]),["down"])),ie[21]||(ie[21]=Pe(Fe(ue=>le("right"),["prevent"]),["right"])),de]},[(N.disabled||N.readonly)&&C(_).enabled?(r(),d("div",{key:0,class:j(f.value)},null,2)):c("",!0),!C(_).enabled&&!N.teleportCenter?(r(),d("div",{key:1,class:j(K.value)},null,2)):c("",!0),s("div",{ref_key:"innerMenuRef",ref:ee,class:j({dp__menu_content_wrapper:((Se=N.presetDates)==null?void 0:Se.length)||!!N.$slots["left-sidebar"]||!!N.$slots["right-sidebar"]}),style:bt({"--dp-menu-width":`${P.value}px`})},[N.$slots["left-sidebar"]?(r(),d("div",MF,[ye(N.$slots,"left-sidebar",Ge(ct(Y.value)))])):c("",!0),N.presetDates.length?(r(),d("div",jF,[(r(!0),d(B,null,oe(N.presetDates,(ue,Be)=>(r(),d(B,{key:Be},[ue.slot?ye(N.$slots,ue.slot,{key:0,presetDate:Ce,label:ue.label,value:ue.value}):(r(),d("button",{key:1,type:"button",style:bt(ue.style||{}),class:"dp__btn dp--preset-range",onClick:Fe(pt=>Ce(ue.value,ue.noTz),["prevent"]),onKeydown:[Pe(Fe(pt=>Ce(ue.value,ue.noTz),["prevent"]),["enter"]),Pe(Fe(pt=>Ce(ue.value,ue.noTz),["prevent"]),["space"])]},v(ue.label),45,qF))],64))),128))])):c("",!0),s("div",{ref_key:"calendarWrapperRef",ref:D,class:"dp__instance_calendar",role:"document"},[(r(),H(Fs(X.value),ot({ref_key:"dynCmpRef",ref:V},l.value,{"flow-step":C(he),onMount:C(y),onUpdateFlowStep:C(ne),onResetFlow:C(M),onFocusMenu:re,onSelectDate:ie[0]||(ie[0]=ue=>N.$emit("select-date")),onDateUpdate:ie[1]||(ie[1]=ue=>N.$emit("date-update",ue)),onTooltipOpen:ie[2]||(ie[2]=ue=>N.$emit("tooltip-open",ue)),onTooltipClose:ie[3]||(ie[3]=ue=>N.$emit("tooltip-close",ue)),onAutoApply:ie[4]||(ie[4]=ue=>N.$emit("auto-apply",ue)),onRangeStart:ie[5]||(ie[5]=ue=>N.$emit("range-start",ue)),onRangeEnd:ie[6]||(ie[6]=ue=>N.$emit("range-end",ue)),onInvalidFixedRange:ie[7]||(ie[7]=ue=>N.$emit("invalid-fixed-range",ue)),onTimeUpdate:ie[8]||(ie[8]=ue=>N.$emit("time-update")),onAmPmChange:ie[9]||(ie[9]=ue=>N.$emit("am-pm-change",ue)),onTimePickerOpen:ie[10]||(ie[10]=ue=>N.$emit("time-picker-open",ue)),onTimePickerClose:R,onRecalculatePosition:g,onUpdateMonthYear:ie[11]||(ie[11]=ue=>N.$emit("update-month-year",ue)),onAutoApplyInvalid:ie[12]||(ie[12]=ue=>N.$emit("auto-apply-invalid",ue)),onInvalidDate:ie[13]||(ie[13]=ue=>N.$emit("invalid-date",ue)),"onUpdate:internalModelValue":ie[14]||(ie[14]=ue=>N.$emit("update:internal-model-value",ue))}),mt({_:2},[oe(z.value,(ue,Be)=>({name:ue,fn:O(pt=>[ye(N.$slots,ue,Ge(ct({...pt})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),N.$slots["right-sidebar"]?(r(),d("div",zF,[ye(N.$slots,"right-sidebar",Ge(ct(Y.value)))])):c("",!0),N.$slots["action-extra"]?(r(),d("div",RF,[N.$slots["action-extra"]?ye(N.$slots,"action-extra",{key:0,selectCurrentDate:J}):c("",!0)])):c("",!0)],6),!N.autoApply||C(F).keepActionRow?(r(),H(U5,ot({key:2,"menu-mount":U.value},l.value,{"calendar-width":P.value,onClosePicker:ie[15]||(ie[15]=ue=>N.$emit("close-picker")),onSelectDate:ie[16]||(ie[16]=ue=>N.$emit("select-date")),onInvalidSelect:ie[17]||(ie[17]=ue=>N.$emit("invalid-select")),onSelectNow:J}),mt({_:2},[oe(C(q),(ue,Be)=>({name:ue,fn:O(pt=>[ye(N.$slots,ue,Ge(ct({...pt})))])}))]),1040,["menu-mount","calendar-width"])):c("",!0)],42,AF)}}}),UF=typeof window<"u"?window:void 0,$n=()=>{},VF=t=>za()?(Ra(t),!0):!1,YF=(t,e,n,a)=>{if(!t)return $n;let o=$n;const l=Ht(()=>C(t),u=>{o(),u&&(u.addEventListener(e,n,a),o=()=>{u.removeEventListener(e,n,a),o=$n})},{immediate:!0,flush:"post"}),i=()=>{l(),o()};return VF(i),i},IF=(t,e,n,a={})=>{const{window:o=UF,event:l="pointerdown"}=a;return o?YF(o,l,i=>{const u=Ze(t),p=Ze(e);!u||!p||u===i.target||i.composedPath().includes(u)||i.composedPath().includes(p)||n(i)},{passive:!0}):void 0},BF=tt({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Zs},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(t,{expose:e,emit:n}){const a=n,o=t,l=ss(),i=ce(!1),u=xs(o,"modelValue"),p=xs(o,"timezone"),h=ce(null),k=ce(null),_=ce(null),F=ce(!1),D=ce(null),P=ce(!1),x=ce(!1),{setMenuFocused:ee,setShiftKey:U}=ka(),{clearArrowNav:V}=Wt(),{mapDatesArrToMap:se,validateDate:S,isValidTime:L}=ns(o),{defaultedTransitions:W,defaultedTextInput:Q,defaultedInline:he,defaultedConfig:ne}=Xe(o),{menuTransition:y,showTransition:M}=As(W);rt(()=>{le(o.modelValue),Lt().then(()=>{if(!he.value.enabled){const me=f(D.value);me==null||me.addEventListener("scroll",N),window==null||window.addEventListener("resize",ie)}}),he.value.enabled&&(i.value=!0),window==null||window.addEventListener("keyup",Se),window==null||window.addEventListener("keydown",ue)});const X=te(()=>se());zn(()=>{if(!he.value.enabled){const me=f(D.value);me==null||me.removeEventListener("scroll",N),window==null||window.removeEventListener("resize",ie)}window==null||window.removeEventListener("keyup",Se),window==null||window.removeEventListener("keydown",ue)});const re=ht(l,"all",o.presetDates),Y=ht(l,"input");Ht([u,p],()=>{le(u.value)},{deep:!0});const{openOnTop:g,menuStyle:q,xCorrect:z,setMenuPosition:K,getScrollableParent:f,shadowRender:m}=F5({menuRef:h,menuRefInner:k,inputRef:_,pickerWrapperRef:D,inline:he,emit:a,props:o,slots:l}),{inputValue:A,internalModelValue:I,parseExternalModelValue:le,emitModelValue:de,formatInputValue:R,checkBeforeEmit:b}=w5(a,o,F),ve=te(()=>({dp__main:!0,dp__theme_dark:o.dark,dp__theme_light:!o.dark,dp__flex_display:he.value.enabled,dp__flex_display_with_input:he.value.input})),be=te(()=>o.dark?"dp__theme_dark":"dp__theme_light"),J=te(()=>({to:typeof o.teleport=="boolean"?"body":o.teleport,disabled:!o.teleport||he.value.enabled})),Ce=te(()=>({class:"dp__outer_menu_wrap"})),ge=te(()=>he.value.enabled&&(o.timePicker||o.monthPicker||o.yearPicker||o.quarterPicker)),N=()=>{i.value&&(ne.value.closeOnScroll?ft():K())},ie=()=>{i.value&&K()},Se=me=>{me.key==="Tab"&&!he.value.enabled&&!o.teleport&&ne.value.tabOutClosesMenu&&(D.value.contains(document.activeElement)||ft()),x.value=me.shiftKey},ue=me=>{x.value=me.shiftKey},Be=()=>{!o.disabled&&!o.readonly&&(m(Ao,o),K(!1),i.value=!0,i.value&&a("open"),i.value||bs(),le(o.modelValue))},pt=()=>{var me;A.value="",bs(),(me=_.value)==null||me.setParsedDate(null),a("update:model-value",null),a("update:model-timezone-value",null),a("cleared"),ne.value.closeOnClearValue&&ft()},os=()=>{const me=I.value;return!me||!Array.isArray(me)&&S(me)?!0:Array.isArray(me)?o.multiDates||me.length===2&&S(me[0])&&S(me[1])?!0:o.partialRange&&!o.timePicker?S(me[0]):!1:!1},Vt=()=>{b()&&os()?(de(),ft()):a("invalid-select",I.value)},qs=me=>{zs(),de(),ne.value.closeOnAutoApply&&!me&&ft()},zs=()=>{_.value&&Q.value.enabled&&_.value.setParsedDate(I.value)},sn=(me=!1)=>{o.autoApply&&L(I.value)&&os()&&(o.range&&Array.isArray(I.value)?(o.partialRange||I.value.length===2)&&qs(me):qs(me))},bs=()=>{Q.value.enabled||(I.value=null)},ft=()=>{he.value.enabled||(i.value&&(i.value=!1,z.value=!1,ee(!1),U(!1),V(),a("closed"),A.value&&le(u.value)),bs(),a("blur"))},nn=(me,Oe,Te=!1)=>{if(!me){I.value=null;return}const vt=Array.isArray(me)?!me.some(an=>!S(an)):S(me),qt=L(me);vt&&qt&&(I.value=me,Oe&&(P.value=Te,Vt(),a("text-submit")))},on=()=>{o.autoApply&&L(I.value)&&de(),zs()},Rs=()=>i.value?ft():Be(),T=me=>{I.value=me},ae=()=>{Q.value.enabled&&(F.value=!0,R()),a("focus")},we=()=>{if(Q.value.enabled&&(F.value=!1,le(o.modelValue),P.value)){const me=s5(D.value,x.value);me==null||me.focus()}a("blur")},Me=me=>{k.value&&k.value.updateMonthYear(0,{month:Co(me.month),year:Co(me.year)})},Qe=me=>{le(me??o.modelValue)},Dt=(me,Oe)=>{var Te;(Te=k.value)==null||Te.switchView(me,Oe)},Yt=me=>ne.value.onClickOutside?ne.value.onClickOutside(me):ft();return IF(h,_,()=>Yt(os)),e({closeMenu:ft,selectDate:Vt,clearValue:pt,openMenu:Be,onScroll:N,formatInputValue:R,updateInternalModelValue:T,setMonthYear:Me,parseModel:Qe,switchView:Dt,toggleMenu:Rs}),(me,Oe)=>(r(),d("div",{ref_key:"pickerWrapperRef",ref:D,class:j(ve.value),"data-datepicker-instance":""},[E(j5,ot({ref_key:"inputRef",ref:_,"input-value":C(A),"onUpdate:inputValue":Oe[0]||(Oe[0]=Te=>so(A)?A.value=Te:null),"is-menu-open":i.value},me.$props,{onClear:pt,onOpen:Be,onSetInputDate:nn,onSetEmptyDate:C(de),onSelectDate:Vt,onToggle:Rs,onClose:ft,onFocus:ae,onBlur:we,onRealBlur:Oe[1]||(Oe[1]=Te=>F.value=!1)}),mt({_:2},[oe(C(Y),(Te,vt)=>({name:Te,fn:O(qt=>[ye(me.$slots,Te,Ge(ct(qt)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),E(Ma,Ge(ct(J.value)),{default:O(()=>[E(_s,{name:C(y)(C(g)),css:C(M)&&!C(he).enabled},{default:O(()=>[i.value?(r(),d("div",ot({key:0,ref_key:"dpWrapMenuRef",ref:h},Ce.value,{class:{"dp--menu-wrapper":!C(he).enabled},style:C(he).enabled?void 0:C(q)}),[E(Ao,ot({ref_key:"dpMenuRef",ref:k},me.$props,{"internal-model-value":C(I),"onUpdate:internalModelValue":Oe[2]||(Oe[2]=Te=>so(I)?I.value=Te:null),class:{[be.value]:!0,"dp--menu-wrapper":me.teleport},"open-on-top":C(g),"arr-map-values":X.value,"no-overlay-focus":ge.value,onClosePicker:ft,onSelectDate:Vt,onAutoApply:sn,onTimeUpdate:on,onFlowStep:Oe[3]||(Oe[3]=Te=>me.$emit("flow-step",Te)),onUpdateMonthYear:Oe[4]||(Oe[4]=Te=>me.$emit("update-month-year",Te)),onInvalidSelect:Oe[5]||(Oe[5]=Te=>me.$emit("invalid-select",C(I))),onAutoApplyInvalid:Oe[6]||(Oe[6]=Te=>me.$emit("invalid-select",Te)),onInvalidFixedRange:Oe[7]||(Oe[7]=Te=>me.$emit("invalid-fixed-range",Te)),onRecalculatePosition:C(K),onTooltipOpen:Oe[8]||(Oe[8]=Te=>me.$emit("tooltip-open",Te)),onTooltipClose:Oe[9]||(Oe[9]=Te=>me.$emit("tooltip-close",Te)),onTimePickerOpen:Oe[10]||(Oe[10]=Te=>me.$emit("time-picker-open",Te)),onTimePickerClose:Oe[11]||(Oe[11]=Te=>me.$emit("time-picker-close",Te)),onAmPmChange:Oe[12]||(Oe[12]=Te=>me.$emit("am-pm-change",Te)),onRangeStart:Oe[13]||(Oe[13]=Te=>me.$emit("range-start",Te)),onRangeEnd:Oe[14]||(Oe[14]=Te=>me.$emit("range-end",Te)),onDateUpdate:Oe[15]||(Oe[15]=Te=>me.$emit("date-update",Te)),onInvalidDate:Oe[16]||(Oe[16]=Te=>me.$emit("invalid-date",Te))}),mt({_:2},[oe(C(re),(Te,vt)=>({name:Te,fn:O(qt=>[ye(me.$slots,Te,Ge(ct({...qt})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):c("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),vs=(()=>{const t=BF;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),xF=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"}));Object.entries(xF).forEach(([t,e])=>{t!=="default"&&(vs[t]=e)});const NF={class:"row"},EF={class:"col-md-4"},QF={class:"col-12"},LF={key:0,class:"fa-solid fa-arrow-down-short-wide"},HF={key:1,class:"fa-solid fa-arrow-up-wide-short"},WF={key:0,class:"fa-solid fa-arrow-down-short-wide"},KF={key:1,class:"fa-solid fa-arrow-up-wide-short"},XF={key:0,class:"fa-solid fa-arrow-down-short-wide"},GF={key:1,class:"fa-solid fa-arrow-up-wide-short"},ZF={class:"col-md-4 mb-2"},JF=["onClick"],e4={class:"card-body text-center"},t4={class:"row"},s4={class:"col-md-6"},n4={class:"mb-0"},o4=s("p",{class:"mb-0"},"Начало сеанса",-1),a4={class:"mb-0"},l4=s("p",{class:"mb-0"},"Окончание сеанса",-1),i4={class:"mb-0"},r4={class:"col-md-6"},d4={class:"mb-0"},u4={class:"mb-0"},c4={class:"mb-0"},m4=s("p",{class:"mb-0"},[s("strong",null,"Период")],-1),p4={class:"mb-0"},h4={class:"row"},_4={class:"col-12"},f4={props:["bot","eventId"],components:{VueDatePicker:vs},data(){return{date:null,loading:!0,schedule:[],order:null,direction:null,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginate_object:null}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...xe(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"])},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{selectTime(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})}}},Sa=Object.assign(f4,{__name:"AppointmentScheduleList",setup(t){return(e,n)=>(r(),d(B,null,[s("div",NF,[s("div",EF,[E(C(vs),{modelValue:e.date,"onUpdate:modelValue":n[0]||(n[0]=a=>e.date=a)},null,8,["modelValue"])]),s("div",QF,[s("p",null,[w(" Тип сортировки: "),s("a",{class:"mx-2",onClick:n[1]||(n[1]=a=>e.loadAndOrder("day")),href:"javascript:void(0)"},[w("По дню недели "),e.order==="day"&&e.direction==="asc"?(r(),d("i",LF)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",HF)):c("",!0)]),s("a",{class:"mx-2",onClick:n[2]||(n[2]=a=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[w("По времени начала "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",WF)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",KF)):c("",!0)]),s("a",{class:"mx-2",onClick:n[3]||(n[3]=a=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[w("По времени окончания "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",XF)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",GF)):c("",!0)])])]),(r(!0),d(B,null,oe(e.schedule,a=>(r(),d("div",ZF,[s("div",{class:j(["card btn",{"btn-outline-secondary bg-secondary":a.appointment!=null,"btn-outline-success":a.appointment==null}]),onClick:o=>e.selectTime(a)},[s("div",e4,[s("div",t4,[s("div",s4,[s("p",n4,[s("strong",null,v(e.days[a.day-1]),1)]),o4,s("p",a4,[s("strong",null,v(a.start_time||"-"),1)]),l4,s("p",i4,[s("strong",null,v(a.end_time||"-"),1)])]),s("div",r4,[s("p",d4,[s("strong",null,v(a.year||"-"),1)]),s("p",u4,[s("strong",null,v(e.months[a.month||0]),1)]),s("p",c4,[s("strong",null,v(a.day_number),1)]),m4,s("p",p4,[s("strong",null,"c "+v(a.week_start||"-"),1),w(" по "),s("strong",null,v(a.week_end||"-"),1)])])])])],10,JF)]))),256))]),s("div",h4,[s("div",_4,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])],64))}}),v4={class:"row"},b4={class:"col-12 mb-3"},g4={class:"form-label",id:"service-title"},y4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),k4={class:"col-12 mb-3"},w4={key:0},C4=["onClick"],F4={class:"form-label",id:"service-category"},T4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),D4=s("div",null,"Категория услуги (используется для группировки) ",-1),S4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),P4={class:"col-12 mb-3"},O4={class:"form-label",id:"service-description"},A4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),M4=s("div",null," Краткая информация об оказываемой услуге ",-1),j4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),q4={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},z4={class:"col-12 col-md-6 mb-3"},R4={class:"form-label",id:"service-title"},U4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),V4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Y4={class:"col-12 col-md-6 mb-3"},I4={class:"form-label",id:"service-title"},B4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),x4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),N4={class:"col-12 mb-3"},E4={class:"form-label",id:"service-images"},Q4=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),L4=s("div",null," Изображение, которое видит пользователь при выборе услуги ",-1),H4=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),W4={class:"col-12 mb-3"},K4={class:"form-check"},X4=s("label",{class:"form-check-label",for:"need_prepayment"}," Необходима предоплата ",-1),G4={class:"row"},Z4={class:"col-12"},J4={type:"submit",class:"btn btn-outline-success w-100 p-3"},eT={key:0},tT={key:1},sT={props:["eventId","bot","service"],data(){return{load:!1,need_reset:!1,categories:[],serviceForm:{id:null,title:null,appointment_event_id:null,description:null,category:null,images:[],need_prepayment:!1,price:0,discount_price:0}}},watch:{serviceForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.loadAppointmentServiceCategories(),console.log("Service form",this.service),this.service&&this.$nextTick(()=>{this.serviceForm={id:this.service.id||null,appointment_event_id:this.service.appointment_event_id||null,title:this.service.title||null,category:this.service.category||null,description:this.service.description||null,images:this.service.images||[],need_prepayment:this.service.need_prepayment||!1,price:this.service.price||0,discount_price:this.service.discount_price||0}})},methods:{loadAppointmentServiceCategories(){this.$store.dispatch("loadAppointmentServiceCategories",{dataObject:{bot_id:this.bot.id||null,event_id:this.eventId||null}}).then(t=>{this.categories=t})},selectPhotos(t){this.serviceForm.images||(this.serviceForm.images=[]);let e=this.serviceForm.images.indexOf(t.file_id);e!==-1?this.serviceForm.images.splice(e,1):this.serviceForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.serviceForm).forEach(e=>{const n=this.serviceForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),t.append("appointment_event_id",this.eventId),this.$store.dispatch(this.serviceForm.id===null?"addAppointmentService":"updateAppointmentService",{appointmentServiceForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Услуги успешно создано")}).catch(e=>{this.$notify("Услуги создания события")})}}},nT=Object.assign(sT,{__name:"AppointmentServiceForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d("form",{onSubmit:n[6]||(n[6]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",v4,[s("div",b4,[s("label",g4,[E(a,{content:"Название оказываемой услуги"},{default:O(()=>[y4]),_:1}),w(" Название услуги "),$4]),$(s("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":n[0]||(n[0]=o=>e.serviceForm.title=o),maxlength:"255","aria-describedby":"service-title",required:""},null,512),[[Z,e.serviceForm.title]])]),s("div",k4,[e.categories?(r(),d("p",w4,[w(" Ранее созданные категории: "),(r(!0),d(B,null,oe(e.categories,o=>(r(),d("span",{onClick:l=>e.serviceForm.category=o,class:"badge bg-primary mr-1 cursor-pointer"},v(o),9,C4))),256))])):c("",!0),s("label",F4,[E(a,null,{content:O(()=>[D4]),default:O(()=>[T4]),_:1}),w(" Категория услуги "),S4]),$(s("input",{type:"text",class:"form-control",placeholder:"Категория услуги","aria-label":"Категория услуги","onUpdate:modelValue":n[1]||(n[1]=o=>e.serviceForm.category=o),maxlength:"255","aria-describedby":"service-category",required:""},null,512),[[Z,e.serviceForm.category]])]),s("div",P4,[s("label",O4,[E(a,null,{content:O(()=>[M4]),default:O(()=>[A4]),_:1}),w(" Описание услуги "),j4,e.serviceForm.description?(r(),d("small",q4," Длина текста "+v(e.serviceForm.description.length)+" / 255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Описание услуги","aria-label":"Описание услуги",maxlength:"255","onUpdate:modelValue":n[2]||(n[2]=o=>e.serviceForm.description=o),"aria-describedby":"service-description",required:""},`
                    `,512),[[Z,e.serviceForm.description]])]),s("div",z4,[s("label",R4,[E(a,{content:"Цена оказываемой услуги"},{default:O(()=>[U4]),_:1}),w(" Цена услуги, руб "),V4]),$(s("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":n[3]||(n[3]=o=>e.serviceForm.price=o),"aria-describedby":"price",required:""},null,512),[[Z,e.serviceForm.price]])]),s("div",Y4,[s("label",I4,[E(a,{content:"Цена скидки на оказываемую услугу"},{default:O(()=>[B4]),_:1}),w(" Цена скидки на услугу, руб "),x4]),$(s("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":n[4]||(n[4]=o=>e.serviceForm.discount_price=o),"aria-describedby":"price",required:""},null,512),[[Z,e.serviceForm.discount_price]])]),s("div",N4,[s("label",E4,[E(a,null,{content:O(()=>[L4]),default:O(()=>[Q4]),_:1}),w(" Изображение к услуге "),H4]),E(gt,{"need-photo":!0,selected:e.serviceForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),s("div",W4,[s("div",K4,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[5]||(n[5]=o=>e.serviceForm.need_prepayment=o),type:"checkbox",id:"need_prepayment"},null,512),[[De,e.serviceForm.need_prepayment]]),X4])])]),s("div",G4,[s("div",Z4,[s("button",J4,[e.serviceForm.id===null?(r(),d("span",eT,"Создать услугу")):(r(),d("span",tT,"Обновить услугу"))])])])],32)}}}),oT={class:"row py-3"},aT={class:"col-12"},lT={class:"row"},iT={class:"col-12"},rT={key:0},dT={key:1},uT={key:0,class:"col-12 mb-3"},cT={class:"col-12 mb-3"},mT={key:0},pT={key:1},hT={key:1,class:"col-12 mb-3"},_T={class:"row py-3"},fT=s("div",{class:"col-12"},[s("p",{class:"mb-0"},"Выбор статуса")],-1),vT={class:"col-md-3"},bT=["onClick"],gT={class:"row"},yT={class:"col-12 mb-3"},$T={class:"form-label",id:"service-title"},kT=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),wT=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),CT={class:"col-12 mb-3"},FT={class:"form-label",id:"service-title"},TT=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),DT=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ST={class:"col-12 mb-3"},PT={class:"form-label",id:"appointment-info"},OT=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),AT=s("div",null," Краткая информация от клиента ",-1),MT=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),jT={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},qT={class:"row"},zT={class:"col-12"},RT={type:"submit",class:"btn btn-outline-success w-100 p-3"},UT={key:0},VT={key:1},YT={props:["eventId","bot","appointment"],data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,statuses:[{value:0,title:"Новая запись"},{value:1,title:"Подтверждение записи"},{value:2,title:"Прохождение по записи"},{value:3,title:"Отмена записи"}],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],appointmentForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0,name:null,phone:null,info:null}}},mounted(){this.appointment&&this.$nextTick(()=>{this.appointmentForm={id:this.appointment.id||null,appointment_event_id:this.appointment.appointment_event_id||null,appointment_schedule_id:this.appointment.appointment_schedule_id||null,bot_user_id:this.appointment.bot_user_id||null,status:this.appointment.status||0,name:this.appointment.name||null,phone:this.appointment.phone||null,info:this.appointment.info||null},this.selected_schedule_time=this.appointment.schedule||null,this.selected_bot_user=this.appointment.botUser||null})},methods:{selectScheduleTime(t){if(t.appointment){this.$notify("Данное время уже занято!");return}this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearAppointmentForm(){this.appointmentForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.appointmentForm.bot_user_id=this.selected_bot_user.id,this.appointmentForm.appointment_schedule_id=this.selected_schedule_time.id,this.appointmentForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.appointmentForm).forEach(e=>{const n=this.appointmentForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointment",{dataObject:{appointmentForm:t}}).then(e=>{this.clearAppointmentForm(),this.$emit("callback"),this.$notify("Запись успешно создана")}).catch(e=>{this.$notify("Ошибка создания записи")})}}},IT=Object.assign(YT,{__name:"AppointmentForm",setup(t){return(e,n)=>{const a=_t("Popper"),o=hs("mask");return r(),d(B,null,[s("div",oT,[s("div",aT,[s("button",{onClick:n[0]||(n[0]=(...l)=>e.clearAppointmentForm&&e.clearAppointmentForm(...l)),class:"btn btn-primary"},"Новая заявка ")])]),s("form",{onSubmit:n[6]||(n[6]=Fe((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[s("div",lT,[s("div",iT,[s("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:n[1]||(n[1]=l=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",rT,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",dT," Пользователь "+v(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",uT,[E(Ks,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),s("div",cT,[s("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:n[2]||(n[2]=l=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",mT,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",pT," Запись на "+v(e.days[e.selected_schedule_time.day-1]||"-")+" с "+v(e.selected_schedule_time.start_time||"-")+" до "+v(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",hT,[E(Sa,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0)]),s("div",_T,[fT,(r(!0),d(B,null,oe(e.statuses,l=>(r(),d("div",vT,[s("button",{type:"button",class:j([{"btn-success text-white":e.appointmentForm.status==l.value},"btn btn-outline-success w-100"]),onClick:i=>e.appointmentForm.status=l.value},v(l.title||"не указано"),11,bT)]))),256))]),s("div",gT,[s("div",yT,[s("label",$T,[E(a,{content:"ФИО человека, который посетит запись"},{default:O(()=>[kT]),_:1}),w(" Ф.И.О. посетителя "),wT]),$(s("input",{type:"text",class:"form-control",placeholder:"Иванов Иван Иванович","aria-label":"ФИО","onUpdate:modelValue":n[3]||(n[3]=l=>e.appointmentForm.name=l),maxlength:"255","aria-describedby":"appointment-name",required:""},null,512),[[Z,e.appointmentForm.name]])]),s("div",CT,[s("label",FT,[E(a,{content:"Номер телефона человека, который посетит запись"},{default:O(()=>[TT]),_:1}),w(" Телефонный номер "),DT]),$(s("input",{type:"text",class:"form-control",placeholder:"+7(000)000-00-00","aria-label":"номер телефона","onUpdate:modelValue":n[4]||(n[4]=l=>e.appointmentForm.phone=l),maxlength:"255","aria-describedby":"appointment-phone",required:""},null,512),[[o,"+7(###)###-##-##"],[Z,e.appointmentForm.phone]])]),s("div",ST,[s("label",PT,[E(a,null,{content:O(()=>[AT]),default:O(()=>[OT]),_:1}),w(" Описание услуги "),MT,e.appointmentForm.info?(r(),d("small",jT," Длина текста "+v(e.appointmentForm.info.length)+" / 255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Информация от клиента","aria-label":"Информация от клиента",maxlength:"255","onUpdate:modelValue":n[5]||(n[5]=l=>e.appointmentForm.info=l),"aria-describedby":"appointment-info",required:""},`
                    `,512),[[Z,e.appointmentForm.info]])])]),s("div",qT,[s("div",zT,[s("button",RT,[e.appointmentForm.id==null?(r(),d("span",UT,"Записаться")):(r(),d("span",VT,"Обновить запись"))])])])],32)],64)}}}),BT={class:"row"},xT={class:"col-12"},NT={key:0,class:"table"},ET=s("th",{scope:"col"},"Действие",-1),QT=["onClick"],LT={scope:"row"},HT={key:0},WT={key:0,class:"dropdown"},KT=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),XT={class:"dropdown-menu"},GT={key:0},ZT=["onClick"],JT={key:1},e6={class:"col-12"},t6={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,statuses:["Новая запись","Подтверждение записи","Прохождение по записи","Отмена записи"],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],paginate_object:null}},computed:{...xe(["getAppointments","getAppointmentsPaginateObject"])},mounted(){this.loadAppointments()},methods:{nextAppointments(t){this.loadAppointments(t)},selectAppointment(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointments(0)},removeAppointment(t){this.loading=!0,this.$store.dispatch("removeAppointment",{dataObject:{appointmentId:t}}).then(e=>{this.loading=!1,this.loadAppointments(0),this.$notify("Запись успешно удалена")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления записи")})},loadAppointments(t=0){this.loading=!0,this.$store.dispatch("loadAppointments",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointments,this.paginate_object=this.getAppointmentsPaginateObject}).catch(()=>{this.loading=!1})}}},s6=Object.assign(t6,{__name:"AppointmentsTable",setup(t){return(e,n)=>(r(),d("div",BT,[s("div",xT,[e.services.length>0?(r(),d("table",NT,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("bot_user_id"))},"Пользователь"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("appointment_schedule_id"))},"Дата записи "),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=a=>e.loadAndOrder("status"))},"Статус"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=a=>e.loadAndOrder("name"))},"Посетитель"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=a=>e.loadAndOrder("phone"))},"Телефон посетителя"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=a=>e.loadAndOrder("info"))},"Доп.инф"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),ET])]),s("tbody",null,[(r(!0),d(B,null,oe(e.services,(a,o)=>(r(),d("tr",{onClick:l=>e.selectAppointment(a),class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",LT,v(a.id),1),s("td",null,v(a.botUser.fio_from_telegram||a.botUser.telegram_chat_id||"Не указано"),1),s("td",null,[a.schedule?(r(),d("p",HT," Запись на "+v(e.days[a.schedule.day-1]||"Не указано")+" с "+v(a.schedule.start_time||"Не указано")+" до "+v(a.schedule.end_time||"Не указано"),1)):c("",!0)]),s("td",null,v(e.statuses[a.status]),1),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,v(a.name||"не указано"),1),s("td",null,v(a.phone||"не указано"),1),s("td",null,v(a.info||"не указано"),1),s("td",null,[a.id?(r(),d("div",WT,[KT,s("ul",XT,[a.deleted_at==null?(r(),d("li",GT,[s("a",{class:"dropdown-item",onClick:l=>e.removeAppointment(a.id),href:"javascript:void(0)"},"Удалить",8,ZT)])):c("",!0)])])):c("",!0)])],10,QT))),256))])])):(r(),d("p",JT,"На текущий момент нет ни одного созданного сервиса"))]),s("div",e6,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointments,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),n6={class:"row py-2"},o6={class:"col-12"},a6={class:"input-group mb-3"},l6={class:"col-12"},i6={key:0,class:"table"},r6=s("th",{scope:"col"},"Действие",-1),d6={scope:"row"},u6=["onClick"],c6={key:0,class:"fa-solid fa-chevron-down text-success"},m6={key:1,class:"fa-solid fa-xmark text-danger"},p6={key:0,class:"dropdown"},h6=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),_6={class:"dropdown-menu"},f6={key:0},v6=["onClick"],b6={key:1},g6={class:"col-12"},y6={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,events:[],search:null,paginate_object:null}},computed:{...xe(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){this.loadAppointmentEvents()},methods:{removeAppointmentEvent(t){this.loading=!0,this.$store.dispatch("removeAppointmentEvent",{dataObject:{appointmentEventId:t}}).then(e=>{this.loading=!1,this.loadAppointmentEvents(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},nextAppointmentEvents(t){this.loadAppointmentEvents(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentEvents(0)},loadAppointmentEvents(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentEvents",{dataObject:{bot_id:this.bot.id||null,search:this.search,is_group:this.is_group,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.events=this.getAppointmentEvents,this.paginate_object=this.getAppointmentEventsPaginateObject}).catch(()=>{this.loading=!1})}}},$6=Object.assign(y6,{__name:"AppointmentEventTable",setup(t){return(e,n)=>(r(),d("div",n6,[s("div",o6,[s("div",a6,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск события","aria-label":"Поиск события","onUpdate:modelValue":n[0]||(n[0]=a=>e.search=a),"aria-describedby":"appointment-search-event"},null,512),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[1]||(n[1]=a=>e.loadAppointmentEvents(0)),type:"button",id:"appointment-search-event"},"Найти ")])]),s("div",l6,[e.events.length>0?(r(),d("table",i6,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=a=>e.loadAndOrder("title"))},"Название"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=a=>e.loadAndOrder("subtitle"))},"Подзаголовок"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=a=>e.loadAndOrder("description"))},"Описание"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=a=>e.loadAndOrder("is_group"))},"Групповое"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),r6])]),s("tbody",null,[(r(!0),d(B,null,oe(e.events,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",d6,v(a.id),1),s("td",{onClick:l=>e.selectEvent(a)},v(a.title||"Не указано"),9,u6),s("td",null,v(a.subtitle||"Не указано"),1),s("td",null,v(a.description||"Не указано"),1),s("td",null,[a.is_group?(r(),d("i",c6)):(r(),d("i",m6))]),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[a.id?(r(),d("div",p6,[h6,s("ul",_6,[a.deleted_at==null?(r(),d("li",f6,[s("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentEvent(a.id),href:"javascript:void(0)"},"Удалить",8,v6)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",b6,"На текущий момент нет событий в вашем списке"))]),s("div",g6,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointmentEvents,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),k6={class:"row"},w6={class:"col-12"},C6={key:0,class:"table"},F6=s("th",{scope:"col"},"Действие",-1),T6={scope:"row"},D6=["onClick"],S6={key:0,class:"fa-solid fa-chevron-down text-success"},P6={key:1,class:"fa-solid fa-xmark text-danger"},O6={key:0,class:"dropdown"},A6=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),M6={class:"dropdown-menu"},j6={key:0},q6=["onClick"],z6={key:1},R6={class:"col-12"},U6={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,paginate_object:null}},computed:{...xe(["getAppointmentServices","getAppointmentServicesPaginateObject"])},mounted(){this.loadAppointmentServices()},methods:{nextAppointmentService(t){this.loadAppointmentServices(t)},selectService(t){this.$emit("select",t)},removeAppointmentService(t){this.loading=!0,this.$store.dispatch("removeAppointmentService",{dataObject:{appointmentServiceId:t}}).then(e=>{this.loading=!1,this.loadAppointmentServices(0),this.$notify("Сервис успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentServices(0)},loadAppointmentServices(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentServices",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointmentServices,this.paginate_object=this.getAppointmentServicesPaginateObject}).catch(()=>{this.loading=!1})}}},V6=Object.assign(U6,{__name:"AppointmentServicesTable",setup(t){return(e,n)=>(r(),d("div",k6,[s("div",w6,[e.services.length>0?(r(),d("table",C6,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("title"))},"Название"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("subtitle"))},"Подзаголовок"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=a=>e.loadAndOrder("description"))},"Описание"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=a=>e.loadAndOrder("is_group"))},"Групповое"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),F6])]),s("tbody",null,[(r(!0),d(B,null,oe(e.services,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",T6,v(a.id),1),s("td",{onClick:l=>e.selectService(a)},v(a.title||"Не указано"),9,D6),s("td",null,v(a.subtitle||"Не указано"),1),s("td",null,v(a.description||"Не указано"),1),s("td",null,[a.is_group?(r(),d("i",S6)):(r(),d("i",P6))]),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[a.id?(r(),d("div",O6,[A6,s("ul",M6,[a.deleted_at==null?(r(),d("li",j6,[s("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentService(a.id),href:"javascript:void(0)"},"Удалить",8,q6)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",z6,"На текущий момент нет ни одного созданого сервиса"))]),s("div",R6,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointmentService,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),Y6={class:"row"},I6={class:"col-12 mb-3"},B6={class:"form-label",id:"event-title"},x6=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),N6=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),E6={class:"col-12 mb-3"},Q6={class:"form-label",id:"event-subtitle"},L6=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),H6=s("div",null,"Подзаголовок события или доп. инфа под названием события ",-1),W6=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),K6={class:"col-12 mb-3"},X6={class:"form-label",id:"event-description"},G6=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Z6=s("div",null," Краткая информация о происходящем мероприятии ",-1),J6=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),eD={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},tD={class:"col-12 mb-3"},sD={class:"form-label",id:"event-on_start_appointment"},nD=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),oD=s("div",null," Текст, который будет отображен клиенту, когда тот записался ",-1),aD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),lD={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},iD={class:"col-12 mb-3"},rD={class:"form-label",id:"event-on_cancel_appointment"},dD=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),uD=s("div",null," Текст, который будет отображен клиенту, когда тот отменил запись ",-1),cD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),mD={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},pD={class:"col-12 mb-3"},hD={class:"form-label",id:"event-on_after_appointment"},_D=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),fD=s("div",null," Текст, который будет отображен клиенту, когда тот прошел событие успешно ",-1),vD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),bD={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},gD={class:"col-12 mb-3"},yD={class:"form-label",id:"event-on_repeat_appointment"},$D=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),kD=s("div",null," Текст, который будет отображен клиенту, когда тот записывается 2й и более раз ",-1),wD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),CD={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},FD={class:"col-12 mb-3"},TD={class:"form-check"},DD=s("label",{class:"form-check-label",for:"need_media"}," Нужно изображение к событию ",-1),SD={key:0,class:"col-12 mb-3"},PD={class:"form-label",id:"event-images"},OD=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),AD=s("div",null," Изображение, которое видит пользователь при выборе события ",-1),MD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),jD={class:"col-12 mb-3"},qD={class:"form-check"},zD=s("label",{class:"form-check-label",for:"is-group"}," Является групповым мероприятием ",-1),RD={key:1,class:"col-md-6 col-12 mb-3"},UD={class:"form-label",id:"event-min_people"},VD=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),YD=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ID={key:2,class:"col-md-6 col-12 mb-3"},BD={class:"form-label",id:"event-max_people"},xD=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ND=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ED={class:"row"},QD={class:"col-12"},LD={type:"submit",class:"btn btn-outline-success w-100 p-3"},HD={key:0},WD={key:1},KD={props:["event","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,eventForm:{id:null,title:null,subtitle:null,description:null,images:[],services:[],times:[],is_group:!1,max_people:0,min_people:0,on_start_appointment:null,on_cancel_appointment:null,on_after_appointment:null,on_repeat_appointment:null}}},watch:{eventForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.event&&this.$nextTick(()=>{this.eventForm={id:this.event.id||null,title:this.event.title||null,subtitle:this.event.subtitle||null,description:this.event.description||null,images:this.event.images||[],is_group:this.event.is_group||!1,max_people:this.event.max_people||0,min_people:this.event.min_people||0,on_start_appointment:this.event.on_start_appointment||null,on_cancel_appointment:this.event.on_cancel_appointment||null,on_after_appointment:this.event.on_after_appointment||null,on_repeat_appointment:this.event.on_repeat_appointment||null}})},methods:{selectPhotos(t){this.eventForm.images||(this.eventForm.images=[]);let e=this.eventForm.images.indexOf(t.file_id);e!==-1?this.eventForm.images.splice(e,1):this.eventForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.eventForm).forEach(e=>{const n=this.eventForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch(this.eventForm.id===null?"addAppointmentEvent":"updateAppointmentEvent",{appointmentEventForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},Mo=Object.assign(KD,{__name:"AppointmentEventForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d("form",{onSubmit:n[11]||(n[11]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",Y6,[s("div",I6,[s("label",B6,[E(a,{content:"Название вашего события (или специалиста), на которое планируется осуществить запись"},{default:O(()=>[x6]),_:1}),w(" Название события "),N6]),$(s("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":n[0]||(n[0]=o=>e.eventForm.title=o),maxlength:"255","aria-describedby":"event-title",required:""},null,512),[[Z,e.eventForm.title]])]),s("div",E6,[s("label",Q6,[E(a,null,{content:O(()=>[H6]),default:O(()=>[L6]),_:1}),w(" Подзаголовок события "),W6]),$(s("input",{type:"text",class:"form-control",placeholder:"Подзаголовок","aria-label":"Подзаголовок","onUpdate:modelValue":n[1]||(n[1]=o=>e.eventForm.subtitle=o),maxlength:"255","aria-describedby":"event-subtitle",required:""},null,512),[[Z,e.eventForm.subtitle]])]),s("div",K6,[s("label",X6,[E(a,null,{content:O(()=>[Z6]),default:O(()=>[G6]),_:1}),w(" Описание события "),J6,e.eventForm.description?(r(),d("small",eD," Длина текста "+v(e.eventForm.description.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":n[2]||(n[2]=o=>e.eventForm.description=o),"aria-describedby":"event-description",required:""},`
                    `,512),[[Z,e.eventForm.description]])]),s("div",tD,[s("label",sD,[E(a,null,{content:O(()=>[oD]),default:O(()=>[nD]),_:1}),w(" Текст при записи на событие "),aD,e.eventForm.on_start_appointment?(r(),d("small",lD," Длина текста "+v(e.eventForm.on_start_appointment.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст при записи на событие","aria-label":"Текст при записи на событие","onUpdate:modelValue":n[3]||(n[3]=o=>e.eventForm.on_start_appointment=o),maxlength:"255","aria-describedby":"event-on_start_appointment",required:""},`
                    `,512),[[Z,e.eventForm.on_start_appointment]])]),s("div",iD,[s("label",rD,[E(a,null,{content:O(()=>[uD]),default:O(()=>[dD]),_:1}),w(" Текст при отмене записи на событие "),cD,e.eventForm.on_cancel_appointment?(r(),d("small",mD," Длина текста "+v(e.eventForm.on_cancel_appointment.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст при отмене записи на событие","aria-label":"Текст при отмене записи на событие","onUpdate:modelValue":n[4]||(n[4]=o=>e.eventForm.on_cancel_appointment=o),maxlength:"255","aria-describedby":"event-on_cancel_appointment",required:""},`
                    `,512),[[Z,e.eventForm.on_cancel_appointment]])]),s("div",pD,[s("label",hD,[E(a,null,{content:O(()=>[fD]),default:O(()=>[_D]),_:1}),w(" Текст после прохождения события "),vD,e.eventForm.on_after_appointment?(r(),d("small",bD," Длина текста "+v(e.eventForm.on_after_appointment.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст после прохождения события","aria-label":"Текст после прохождения события","onUpdate:modelValue":n[5]||(n[5]=o=>e.eventForm.on_after_appointment=o),maxlength:"255","aria-describedby":"event-on_after_appointment",required:""},`
                    `,512),[[Z,e.eventForm.on_after_appointment]])]),s("div",gD,[s("label",yD,[E(a,null,{content:O(()=>[kD]),default:O(()=>[$D]),_:1}),w(" Текст при повторной записи на событие "),wD,e.eventForm.on_repeat_appointment?(r(),d("small",CD," Длина текста "+v(e.eventForm.on_repeat_appointment.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:" Текст при повторной записи на событие","aria-label":" Текст при повторной записи на событие","onUpdate:modelValue":n[6]||(n[6]=o=>e.eventForm.on_repeat_appointment=o),maxlength:"255","aria-describedby":"event-on_repeat_appointment",required:""},`
                    `,512),[[Z,e.eventForm.on_repeat_appointment]])]),s("div",FD,[s("div",TD,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[7]||(n[7]=o=>e.need_media=o),type:"checkbox",id:"need_media"},null,512),[[De,e.need_media]]),DD])]),e.need_media?(r(),d("div",SD,[s("label",PD,[E(a,null,{content:O(()=>[AD]),default:O(()=>[OD]),_:1}),w(" Изображение к событию "),MD]),E(gt,{"need-photo":!0,selected:e.eventForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])])):c("",!0),s("div",jD,[s("div",qD,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[8]||(n[8]=o=>e.eventForm.is_group=o),type:"checkbox",id:"is-group"},null,512),[[De,e.eventForm.is_group]]),zD])]),e.eventForm.is_group?(r(),d("div",RD,[s("label",UD,[E(a,{content:"Минимально необходимое число людей, для начала 1 мероприятия"},{default:O(()=>[VD]),_:1}),w(" Минимальное число посетителей в группе "),YD]),$(s("input",{type:"number",class:"form-control",placeholder:"Минимальное число посетителей","aria-label":"Название","onUpdate:modelValue":n[9]||(n[9]=o=>e.eventForm.min_people=o),"aria-describedby":"event-min_people",required:""},null,512),[[Z,e.eventForm.min_people]])])):c("",!0),e.eventForm.is_group?(r(),d("div",ID,[s("label",BD,[E(a,{content:"Количество людей, которые могут посетить мероприятие за 1 сеанс"},{default:O(()=>[xD]),_:1}),w(" Максимальное число посетителей в группе "),ND]),$(s("input",{type:"number",class:"form-control",placeholder:"Максимальное число посетителей","aria-label":"Название","onUpdate:modelValue":n[10]||(n[10]=o=>e.eventForm.max_people=o),"aria-describedby":"event-max_people",required:""},null,512),[[Z,e.eventForm.max_people]])])):c("",!0)]),s("div",ED,[s("div",QD,[s("button",LD,[e.eventForm.id==null?(r(),d("span",HD,"Создать событие")):(r(),d("span",WD,"Обновить событие"))])])])],32)}}}),XD={class:"row pt-3"},GD={class:"col-md-4"},ZD={class:"form-floating mb-3"},JD=s("label",{for:"config-step"},"Шаг, минуты",-1),eS={class:"col-md-4"},tS={class:"form-floating mb-3"},sS=s("label",{for:"config-start-time"},"Начало, часы",-1),nS={class:"col-md-4"},oS={class:"form-floating mb-3"},aS=["min"],lS=s("label",{for:"config-end-time"},"Конец, часы",-1),iS=s("hr",null,null,-1),rS={key:0,class:"row"},dS={class:"col-12 d-flex justify-content-end pb-3"},uS={class:"row"},cS={class:"col-md-4 text-center"},mS={key:0,class:"fa-solid fa-arrow-down-short-wide"},pS={key:1,class:"fa-solid fa-arrow-up-wide-short"},hS={class:"col-md-4 text-center"},_S={key:0,class:"fa-solid fa-arrow-down-short-wide"},fS={key:1,class:"fa-solid fa-arrow-up-wide-short"},vS={class:"col-md-4 text-center"},bS={key:0,class:"fa-solid fa-arrow-down-short-wide"},gS={key:1,class:"fa-solid fa-arrow-up-wide-short"},yS={class:"col-md-4"},$S={class:"form-floating"},kS=["onUpdate:modelValue","id"],wS=["for"],CS={class:"col-md-4"},FS={class:"form-floating"},TS=["onUpdate:modelValue","id"],DS=["for"],SS={class:"col-md-4"},PS={class:"form-floating"},OS=["onUpdate:modelValue","id"],AS=["for"],MS={class:"row mt-3"},jS={class:"col-12"},qS={class:"row"},zS={class:"col-12"},RS={class:"col-12"},US={class:"text-center"},VS={class:"row d-flex justify-content-center"},YS={class:"col-md-4"},IS={class:"table"},BS=s("th",{scope:"col"},"#",-1),xS={scope:"col"},NS={scope:"row"},ES=["onClick"],QS={key:0,class:"fa-solid fa-check"},LS={key:1,class:"fa-solid fa-xmark"},HS={components:{VueDatePicker:vs},props:["eventId","bot"],data(){return{date:null,load:!1,step:30,start:8,end:18,order:null,direction:null,paginate_object:null,years:[2024,2025],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],schedule:[],added_schedule:[]}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...xe(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"]),currentWeek(){return new Date().getWeek()},currentMonthWeek(){return new Date().getMonthWeek()},currentMonth(){return new Date().getMonth()},currentYear(){return new Date().getFullYear()},times(){let t=this.step,e=[],n=0,a=0;for(let o=0;n<24*60;o++){let l=Math.floor(n/60);if(l>=this.start&&l<=this.end){let i=n%60;e[a]=("0"+l).slice(-2)+":"+("0"+i).slice(-2),a++}n=n+t}return e}},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{removeAppointmentSchedule(t){this.loading=!0,this.$store.dispatch("removeAppointmentSchedule",{dataObject:{appointmentScheduleId:t}}).then(e=>{this.loading=!1,this.loadAppointmentSchedules(0),this.$notify("Время успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления времени")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})},storeSchedule(){this.$store.dispatch("storeAppointmentSchedule",{dataObject:{schedule:[...this.schedule,...this.added_schedule],bot_id:this.bot.id,appointment_event_id:this.eventId}}).then(()=>{this.$notify("Расписание успешно сохранено"),this.loadAppointmentSchedules(),this.added_schedule=[]}).catch(()=>{this.$notify("Ошибка сохраения расписания")})},inScheduleRow(t){return this.schedule.findIndex(e=>e.start_time==this.times[t])!=-1||this.added_schedule.findIndex(e=>e.start_time==this.times[t])!=-1},inSchedule(t,e){return this.schedule.findIndex(n=>n.day==e&&n.start_time==this.times[t])!=-1||this.added_schedule.findIndex(n=>n.day==e&&n.start_time==this.times[t])!=-1},setScheduleItem(t,e){let n=this.schedule.findIndex(a=>a.day==e&&a.start_time==this.times[t]);if(n!==-1){this.schedule.splice(n,1);return}if(n=this.added_schedule.findIndex(a=>a.day==e&&a.start_time==this.times[t]),n!==-1){this.added_schedule.splice(n,1);return}this.added_schedule.push({day:e,start_time:this.times[t]||null,end_time:this.times[t+1]||null,week:this.date==null?this.currentWeek:new Date(this.date).getWeek(),month:this.date==null?this.currentMonth:new Date(this.date).getMonth(),year:this.date==null?this.currentYear:new Date(this.date).getFullYear()})}}},WS=Object.assign(HS,{__name:"AppointmentScheduleForm",setup(t){return(e,n)=>(r(),d(B,null,[s("div",XD,[s("div",GD,[s("div",ZD,[$(s("input",{type:"number",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=a=>e.step=a),min:"0",id:"config-step",placeholder:"30 минут"},null,512),[[Z,e.step]]),JD])]),s("div",eS,[s("div",tS,[$(s("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=a=>e.start=a),min:"0",max:"23",class:"form-control",id:"config-start-time",placeholder:"Часы"},null,512),[[Z,e.start]]),sS])]),s("div",nS,[s("div",oS,[$(s("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=a=>e.end=a),min:e.start,max:"23",class:"form-control",id:"config-end-time",placeholder:"Часы"},null,8,aS),[[Z,e.end]]),lS])])]),iS,e.schedule.length>0||e.added_schedule.length>0?(r(),d("div",rS,[s("div",dS,[s("button",{onClick:n[3]||(n[3]=(...a)=>e.storeSchedule&&e.storeSchedule(...a)),class:"btn btn-primary"},"Сохранить текущий график ")]),s("div",uS,[s("div",cS,[s("a",{onClick:n[4]||(n[4]=a=>e.loadAndOrder("day")),href:"javascript:void(0)"},[w("День "),e.order==="day"&&e.direction==="asc"?(r(),d("i",mS)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",pS)):c("",!0)])]),s("div",hS,[s("a",{onClick:n[5]||(n[5]=a=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[w("Начало "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",_S)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",fS)):c("",!0)])]),s("div",vS,[s("a",{onClick:n[6]||(n[6]=a=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[w("Конец "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",bS)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",gS)):c("",!0)])])])])):c("",!0),(r(!0),d(B,null,oe([...e.schedule,...e.added_schedule],(a,o)=>(r(),d("div",{class:j(["row py-2",{"bg-warning":a.id==null}])},[s("div",yS,[s("div",$S,[$(s("input",{type:"text","onUpdate:modelValue":l=>e.days[a.day-1]=l,class:"form-control",id:"day-of-week-"+o,placeholder:"День недели"},null,8,kS),[[Z,e.days[a.day-1]]]),s("label",{for:"day-of-week-"+o},"День недели",8,wS)])]),s("div",CS,[s("div",FS,[$(s("input",{type:"text","onUpdate:modelValue":l=>a.start_time=l,class:"form-control",id:"day-of-start-at-"+o,placeholder:"Время начало"},null,8,TS),[[Z,a.start_time]]),s("label",{for:"day-of-start-at-"+o},"Начало",8,DS)])]),s("div",SS,[s("div",PS,[$(s("input",{type:"text","onUpdate:modelValue":l=>a.end_time=l,class:"form-control",id:"day-of-end-at-"+o,placeholder:"Время окончания"},null,8,OS),[[Z,a.end_time]]),s("label",{for:"day-of-end-at-"+o},"Окончание",8,AS)])])],2))),256)),s("div",MS,[s("div",jS,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]),s("div",qS,[s("div",zS,[s("button",{class:"btn btn-primary",onClick:n[7]||(n[7]=a=>e.schedule=[])},"Очистить таблицу")]),s("div",RS,[s("p",US,[w(" Год: "),s("strong",null,v(e.currentYear),1),w(" Месяц: "),s("strong",null,v(e.months[e.currentMonth]),1),w(" Неделя: "),s("strong",null,v(e.currentWeek),1)])])]),s("div",VS,[s("div",YS,[E(C(vs),{modelValue:e.date,"onUpdate:modelValue":n[8]||(n[8]=a=>e.date=a)},null,8,["modelValue"])])]),s("table",IS,[s("thead",null,[s("tr",null,[BS,(r(!0),d(B,null,oe(e.days,a=>(r(),d("th",xS,v(a),1))),256))])]),s("tbody",null,[(r(!0),d(B,null,oe(e.times,(a,o)=>(r(),d("tr",{class:j({"table-light":e.inScheduleRow(o)})},[s("th",NS,v(a),1),(r(),d(B,null,oe(7,l=>s("td",null,[s("button",{class:j([{"btn-primary text-white":e.inSchedule(o,l)},"btn btn-outline-primary"]),onClick:i=>e.setScheduleItem(o,l)},[e.inSchedule(o,l)?(r(),d("i",QS)):(r(),d("i",LS))],10,ES)])),64))],2))),256))])])],64))}});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".vue3-star-ratings[data-v-7fab3f62]{width:fit-content;overflow:hidden;position:relative;white-space:nowrap}.vue3-star-ratings *[data-v-7fab3f62]{box-sizing:border-box;margin:0;padding:0;line-height:1}.vue3-star-ratings__inner[data-v-7fab3f62],.vue3-star-ratings__outer[data-v-7fab3f62]{height:inherit}.vue3-star-ratings__outer[data-v-7fab3f62]{position:absolute;top:0;left:0;width:var(--vue3StarRatingOuterWidth);max-width:100%;overflow:hidden;color:var(--vue3StarRatingsOuterColor);transition:width .32s cubic-bezier(.075,.82,.165,1)}.vue3-star-ratings__inner[data-v-7fab3f62]{color:var(--vue3StarRatingsInnerColor)}.vue3-star-ratings__icon[data-v-7fab3f62]{fill:currentColor;width:var(--vue3StarRatingIconSize);aspect-ratio:1;cursor:pointer;display:inline-block}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Pa=(t,e)=>{const n=t.__vccOpts||t;for(const[a,o]of e)n[a]=o;return n},KS={},XS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},GS=s("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),ZS=[GS];function JS(t,e){return r(),d("svg",XS,ZS)}const jo=Pa(KS,[["render",JS]]),e8={class:"vue3-star-ratings__outer"},t8={class:"vue3-star-ratings__inner"},s8=tt({__name:"Vue3StarRatings",props:{modelValue:{default:0},numberOfStars:{default:5},starColor:{default:"#ff9800"},inactiveColor:{default:"#333333"},starSize:{default:24},disableClick:{type:Boolean},customSvg:{default:jo}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,a=te(()=>n.customSvg||jo),o={rounded(h,k){const _=Math.pow(10,k);return Math.round(h*_)/_}},l=ce(),i=te({get(){return n.modelValue},set(h){const k=o.rounded(h,1);e("update:modelValue",k)}});function u(h){if(n.disableClick)return;const k=this.getBoundingClientRect(),{pageX:_}=h,F=_-k.left,D=k.width,P=n.numberOfStars,x=F/D*P;i.value=x}const p=te(()=>(i.value<0?0:i.value>n.numberOfStars?n.numberOfStars:i.value)/n.numberOfStars*100);return Ua(()=>{var h;const k={"--vue3StarRatingsInnerColor":n.inactiveColor,"--vue3StarRatingsOuterColor":n.starColor,"--vue3StarRatingOuterWidth":`${p.value}%`,"--vue3StarRatingIconSize":`${n.starSize}px`};for(const[_,F]of Object.entries(k))(h=l.value)==null||h.style.setProperty(_,F)}),rt(()=>{var h;(h=l.value)==null||h.addEventListener("click",u)}),Va(()=>{var h;(h=l.value)==null||h.removeEventListener("click",u)}),(h,k)=>(r(),d("div",{class:"vue3-star-ratings",ref_key:"starsContainer",ref:l,style:bt({pointerEvents:h.disableClick?"none":"auto"})},[s("div",e8,[(r(!0),d(B,null,oe(h.numberOfStars,_=>(r(),H(Fs(a.value),{key:_,class:"vue3-star-ratings__icon"}))),128))]),s("div",t8,[(r(!0),d(B,null,oe(h.numberOfStars,_=>(r(),H(Fs(a.value),{key:_,class:"vue3-star-ratings__icon"}))),128))])],4))}}),tn=Pa(s8,[["__scopeId","data-v-7fab3f62"]]),n8={class:"row py-3"},o8={class:"col-12"},a8={class:"row"},l8={class:"col-12"},i8={key:0},r8={key:1},d8={key:0,class:"col-12 mb-3"},u8={class:"col-12 mb-3"},c8={key:0},m8={key:1},p8={key:1,class:"col-12 mb-3"},h8={class:"col-12 mb-3"},_8={class:"col-12 mb-3"},f8={class:"form-label",id:"event-on_after_appointment"},v8=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),b8=s("div",null," Текст, который пользователь оставляет после прохождения услуги ",-1),g8=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),y8={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},$8={class:"row"},k8={class:"col-12"},w8={type:"submit",class:"btn btn-outline-success w-100 p-3"},C8={key:0},F8={key:1},T8={props:["eventId","bot","review"],components:{vue3starRatings:tn},data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],reviewForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null}}},watch:{reviewForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.review&&this.$nextTick(()=>{this.reviewForm={id:this.review.id||null,appointment_event_id:this.review.appointment_event_id||null,appointment_schedule_id:this.review.appointment_schedule_id||null,bot_user_id:this.review.bot_user_id||null,rating:this.review.rating||null,text:this.review.text||null},this.selected_schedule_time=this.review.schedule||null,this.selected_bot_user=this.review.botUser||null})},methods:{selectScheduleTime(t){this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearReviewForm(){this.reviewForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.reviewForm.bot_user_id=this.selected_bot_user.id,this.reviewForm.appointment_schedule_id=this.selected_schedule_time.id,this.reviewForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.reviewForm).forEach(e=>{const n=this.reviewForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointmentReview",{dataObject:{appointmentReviewForm:t}}).then(e=>{this.$emit("callback",e.data),this.$notify("Отзыв успешно создан"),this.clearReviewForm()}).catch(e=>{this.$notify("Ошибка создания отзыва")})}}},D8=Object.assign(T8,{__name:"AppointmentReviewForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d(B,null,[s("div",n8,[s("div",o8,[s("button",{onClick:n[0]||(n[0]=(...o)=>e.clearReviewForm&&e.clearReviewForm(...o)),class:"btn btn-primary"},"Новый отзыв")])]),s("form",{onSubmit:n[5]||(n[5]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",a8,[s("div",l8,[s("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:n[1]||(n[1]=o=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",i8,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",r8," Пользователь "+v(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",d8,[E(Ks,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),s("div",u8,[s("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:n[2]||(n[2]=o=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",c8,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",m8," Запись на "+v(e.days[e.selected_schedule_time.day-1]||"-")+" с "+v(e.selected_schedule_time.start_time||"-")+" до "+v(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",p8,[E(Sa,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0),s("div",h8,[s("p",null," Рейтинг: "+v(e.reviewForm.rating||0),1),E(C(tn),{modelValue:e.reviewForm.rating,"onUpdate:modelValue":n[3]||(n[3]=o=>e.reviewForm.rating=o)},null,8,["modelValue"])]),s("div",_8,[s("label",f8,[E(a,null,{content:O(()=>[b8]),default:O(()=>[v8]),_:1}),w(" Текст отзыва "),g8,e.reviewForm.text?(r(),d("small",y8," Длина текста "+v(e.reviewForm.text.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст отзыва","aria-label":"Текст отзыва","onUpdate:modelValue":n[4]||(n[4]=o=>e.reviewForm.text=o),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[Z,e.reviewForm.text]])])]),s("div",$8,[s("div",k8,[s("button",w8,[e.reviewForm.id==null?(r(),d("span",C8,"Оставить отзыв")):(r(),d("span",F8,"Обновить отзыв"))])])])],32)],64)}}}),S8={class:"row"},P8={class:"col-12"},O8={key:0,class:"table"},A8=s("th",{scope:"col"},"Действие",-1),M8=["onClick"],j8={scope:"row"},q8={class:"d-flex align-items-center"},z8={class:"ml-2"},R8={key:0,class:"dropdown"},U8=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),V8={class:"dropdown-menu"},Y8={key:0},I8=["onClick"],B8={key:1},x8={class:"col-12"},N8={props:["bot","eventId"],components:{vue3starRatings:tn},data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,reviews:[],search:null,paginate_object:null}},computed:{...xe(["getAppointmentReviews","getAppointmentReviewsPaginateObject"])},mounted(){this.loadAppointmentReviews()},methods:{nextAppointmentReviews(t){this.loadAppointmentReviews(t)},selectReview(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentReviews(0)},removeAppointmentReview(t){this.loading=!0,this.$store.dispatch("removeAppointmentReview",{dataObject:{appointmentReviewId:t}}).then(e=>{this.loadAppointmentReviews(0),this.$notify("Сервис успешно удален"),this.loading=!1}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAppointmentReviews(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentReviews",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.reviews=this.getAppointmentReviews,this.paginate_object=this.getAppointmentReviewsPaginateObject}).catch(()=>{this.loading=!1})}}},E8=Object.assign(N8,{__name:"AppointmentReviewsTable",setup(t){return(e,n)=>(r(),d("div",S8,[s("div",P8,[e.reviews.length>0?(r(),d("table",O8,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("bot_user_id"))},"Пользователь"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("rating"))},"Рейтинг"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=a=>e.loadAndOrder("text"))},"Текст"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),A8])]),s("tbody",null,[(r(!0),d(B,null,oe(e.reviews,(a,o)=>(r(),d("tr",{onClick:l=>e.selectReview(a),class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",j8,v(a.id),1),s("td",null,v(a.botUser.fio_from_telegram||a.botUser.telegram_chat_id||"Не указано"),1),s("td",null,[s("p",q8,[E(C(tn),{disableClick:!0,modelValue:a.rating,"onUpdate:modelValue":l=>a.rating=l},null,8,["modelValue","onUpdate:modelValue"]),s("span",z8,v(a.rating||0),1)])]),s("td",null,v(a.text||"Не указано"),1),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[a.id?(r(),d("div",R8,[U8,s("ul",V8,[a.deleted_at==null?(r(),d("li",Y8,[s("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentReview(a.id),href:"javascript:void(0)"},"Удалить",8,I8)])):c("",!0)])])):c("",!0)])],10,M8))),256))])])):(r(),d("p",B8,"На текущий момент нет ни одного созданного отзыва"))]),s("div",x8,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextAppointmentReviews,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),Q8={key:0,class:"py-2"},L8={class:"row"},H8={class:"col-12"},W8={key:1,class:"py-2"},K8={class:"row"},X8={class:"col-12"},G8={key:2,class:"py-2"},Z8={class:"row"},J8={class:"col-12"},eP={class:"nav nav-tabs justify-content-center"},tP={key:0,class:"row py-3"},sP={class:"col-12"},nP={key:1,class:"row py-3"},oP={class:"col-12"},aP={class:"col-12 py-3"},lP=s("h4",null,"Доступные сервисы в событии",-1),iP={key:2,class:"row"},rP={class:"col-12"},dP={key:3,class:"row"},uP={class:"col-12"},cP={class:"col-12 py-3"},mP=s("h4",null,"Актуальные записи на событие",-1),pP={key:4,class:"row"},hP={class:"col-12"},_P={class:"col-12 py-3"},fP=s("h4",null,"Отзывы к событию",-1),vP={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadService:!1,loadReviewForm:!1,loadAppointments:!1,loadReviews:!1,loadAppointmentForm:!1,loadForm:!1,selectedEvent:null,selectedService:null,selectedAppointment:null,selectedReview:null}},computed:{...xe(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){},methods:{callbackForm(){this.loadTable=!0,this.$nextTick(()=>{this.loadTable=!1})},callbackAppointment(){this.loadAppointments=!0,this.$nextTick(()=>{this.loadAppointments=!1})},callbackReview(){this.loadReviews=!0,this.$nextTick(()=>{this.loadReviews=!1})},createEvent(){this.part=2},selectAppointment(t){this.loadAppointmentForm=!0,this.selectedAppointment=t,this.$nextTick(()=>{this.loadAppointmentForm=!1})},selectService(t){this.loadService=!0,this.selectedService=t,this.$nextTick(()=>{this.loadService=!1})},selectReview(t){this.loadReviewForm=!0,this.selectedReview=t,this.$nextTick(()=>{this.loadReviewForm=!1})},selectEvent(t){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedEvent=t,this.part=1,this.tab=0})}}},bP=Object.assign(vP,{__name:"Appointment",setup(t){return(e,n)=>(r(),d(B,null,[e.part===0?(r(),d("div",Q8,[s("div",L8,[s("div",H8,[s("button",{type:"button",onClick:n[0]||(n[0]=(...a)=>e.createEvent&&e.createEvent(...a)),class:"btn btn-primary"}," Создать новое событие ")])]),e.loadTable?c("",!0):(r(),H($6,{key:0,onSelect:e.selectEvent,bot:t.bot},null,8,["onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",W8,[s("div",K8,[s("div",X8,[s("button",{type:"button",onClick:n[1]||(n[1]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),H(Mo,{key:0,onCallback:e.callbackForm,bot:t.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",G8,[s("div",Z8,[s("div",J8,[s("button",{type:"button",onClick:n[2]||(n[2]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),s("ul",eP,[s("li",{class:"nav-item",onClick:n[3]||(n[3]=a=>e.tab=0)},[s("a",{class:j(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о событии",2)]),s("li",{class:"nav-item",onClick:n[4]||(n[4]=a=>e.tab=1)},[s("a",{class:j(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Сервисы в событии",2)]),s("li",{class:"nav-item",onClick:n[5]||(n[5]=a=>e.tab=2)},[s("a",{class:j(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"График",2)]),s("li",{class:"nav-item",onClick:n[6]||(n[6]=a=>e.tab=3)},[s("a",{class:j(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Записи на событие",2)]),s("li",{class:"nav-item",onClick:n[7]||(n[7]=a=>e.tab=4)},[s("a",{class:j(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Отзывы о событии",2)])]),e.tab===0?(r(),d("div",tP,[s("div",sP,[e.loadForm?c("",!0):(r(),H(Mo,{key:0,onCallback:e.callbackForm,event:e.selectedEvent,bot:t.bot},null,8,["onCallback","event","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",nP,[s("div",oP,[e.loadService?c("",!0):(r(),H(nT,{key:0,service:e.selectedService,"event-id":e.selectedEvent.id,bot:t.bot},null,8,["service","event-id","bot"]))]),s("div",aP,[lP,E(V6,{"event-id":e.selectedEvent.id,onSelect:e.selectService,bot:t.bot},null,8,["event-id","onSelect","bot"])])])):c("",!0),e.tab===2?(r(),d("div",iP,[s("div",rP,[E(WS,{"event-id":e.selectedEvent.id,bot:t.bot},null,8,["event-id","bot"])])])):c("",!0),e.tab===3?(r(),d("div",dP,[s("div",uP,[e.loadAppointmentForm?c("",!0):(r(),H(IT,{key:0,bot:t.bot,onCallback:e.callbackAppointment,"event-id":e.selectedEvent.id,appointment:e.selectedAppointment},null,8,["bot","onCallback","event-id","appointment"]))]),s("div",cP,[mP,e.loadAppointments?c("",!0):(r(),H(s6,{key:0,"event-id":e.selectedEvent.id,onSelect:e.selectAppointment,bot:t.bot},null,8,["event-id","onSelect","bot"]))])])):c("",!0),e.tab===4?(r(),d("div",pP,[s("div",hP,[e.loadReviewForm?c("",!0):(r(),H(D8,{key:0,review:e.selectedReview,bot:t.bot,onCallback:n[8]||(n[8]=a=>e.callbackReview()),"event-id":e.selectedEvent.id},null,8,["review","bot","event-id"]))]),s("div",_P,[fP,e.loadReviews?c("",!0):(r(),H(E8,{key:0,bot:t.bot,onSelect:e.selectReview,"event-id":e.selectedEvent.id},null,8,["bot","onSelect","event-id"]))])])):c("",!0)])):c("",!0)],64))}}),gP={class:"row"},yP={class:"col-12 mb-3"},$P={class:"form-label",id:"quiz-title"},kP=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),wP=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),CP={class:"col-12 mb-3"},FP={class:"form-check"},TP=s("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),DP={key:0,class:"col-12 mb-3"},SP={class:"form-label",id:"quiz-images"},PP=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),OP=s("div",null," Изображение, которое видит пользователь при выборе квиза ",-1),AP=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),MP={class:"col-12 mb-3"},jP={class:"form-label",id:"quiz-description"},qP=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),zP=s("div",null," Краткая информация о квизе ",-1),RP=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),UP={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},VP={class:"col-12 mb-3"},YP={class:"form-check"},IP=s("label",{class:"form-check-label",for:"polling_mode"}," Квиз в режиме опроса (без команд и таймеров) ",-1),BP={key:1,class:"col-12 mb-3"},xP={class:"form-label",id:"quiz-time_limit"},NP=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),EP=s("div",null," Время на ответ ",-1),QP=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),LP={class:"col-12 mb-3"},HP={class:"form-check"},WP=s("label",{class:"form-check-label",for:"is-group"}," Показывать ответы по окончанию раунда ",-1),KP={class:"col-12 mb-3"},XP={class:"form-check"},GP=s("label",{class:"form-check-label",for:"is_active"}," Квиз виден пользователям ",-1),ZP={key:2,class:"col-12 mb-3"},JP={class:"form-check"},eO=s("label",{class:"form-check-label",for:"round_mode"}," Использовать систему раундов ",-1),tO={class:"col-12 mb-3"},sO={class:"form-label",id:"quiz-time_limit"},nO=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),oO=s("div",null," Число попыток прохождения квиза ",-1),aO=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),lO={class:"col-12 mb-3"},iO={class:"form-label",id:"quiz-time_limit"},rO=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dO=s("div",null," Сколько % нужно ответить чтоб пройти ",-1),uO=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),cO={class:"row"},mO={class:"col-12 py-2"},pO={class:"col-12 mb-3"},hO={class:"row"},_O={class:"col-10"},fO={class:"form-label",id:"quiz-success_message"},vO=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),bO=s("div",null," Текст в случае успешного прохождения квиза ",-1),gO=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),yO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},$O=["onUpdate:modelValue"],kO={class:"col-2 d-flex align-items-center justify-content-center"},wO=["disabled","onClick"],CO={class:"row"},FO={class:"col-12 py-2"},TO={class:"col-12 mb-3"},DO={class:"row"},SO={class:"col-10"},PO=["id"],OO=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),AO=s("div",null," Текст в случае неудачного прохождения квиза ",-1),MO=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),jO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},qO=["onUpdate:modelValue"],zO={class:"col-2 d-flex align-items-center justify-content-center"},RO=["disabled","onClick"],UO={class:"row"},VO={class:"col-12 mb-3"},YO={class:"form-floating"},IO=["value","selected"],BO=s("label",{for:"quiz-display-type"},"Тип вывода вопросов",-1),xO={class:"row"},NO={class:"col-12"},EO={type:"submit",class:"btn btn-outline-success w-100 p-3"},QO={key:0},LO={key:1},HO={props:["quiz","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"],quizForm:{id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!0,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]}}},watch:{quizForm:{handler(t){this.need_reset=!0},deep:!0},"quizForm.polling_mode":{handler(t){this.quizForm.round_mode=!1},deep:!0}},mounted(){this.quiz&&this.$nextTick(()=>{this.quizForm={id:this.quiz.id||null,title:this.quiz.title||null,image:this.quiz.image||null,description:this.quiz.description||null,completed_at:this.quiz.completed_at?this.$filters.currentFull(this.quiz.completed_at):null,start_at:this.quiz.start_at?this.$filters.currentFull(this.quiz.start_at):null,end_at:this.quiz.end_at?this.$filters.currentFull(this.quiz.end_at):null,display_type:this.quiz.display_type||0,time_limit:this.quiz.time_limit||30,show_answers:this.quiz.show_answers||!1,polling_mode:this.quiz.polling_mode||!1,round_mode:this.quiz.round_mode||!1,is_active:this.quiz.is_active||!1,try_count:this.quiz.try_count||1,success_percent:this.quiz.success_percent||50,success_message:this.quiz.success_message||["Задание успешно пройдено!"],failure_message:this.quiz.failure_message||["К сожалению вы не прошли задание!"]}})},methods:{selectPhoto(t){this.quizForm.image=t.file_id},removeMessage(t,e){this.quizForm[t||"success_message"].splice(e,1)},addMessage(t,e){this.quizForm[t||"success_message"].push(e)},submitForm(){let t=new FormData;Object.keys(this.quizForm).forEach(e=>{const n=this.quizForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeQuiz",{quizForm:t}).then(e=>{this.quizForm={id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]},this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},qo=Object.assign(HO,{__name:"QuizForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d("form",{onSubmit:n[13]||(n[13]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"])),class:"py-3"},[s("div",gP,[s("div",yP,[s("label",$P,[E(a,{content:"Название вашего квиза"},{default:O(()=>[kP]),_:1}),w(" Название квиза "),wP]),$(s("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":n[0]||(n[0]=o=>e.quizForm.title=o),maxlength:"255","aria-describedby":"quiz-title",required:""},null,512),[[Z,e.quizForm.title]])]),s("div",CP,[s("div",FP,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[1]||(n[1]=o=>e.need_media=o),type:"checkbox",id:"need_media"},null,512),[[De,e.need_media]]),TP])]),e.need_media?(r(),d("div",DP,[s("label",SP,[E(a,null,{content:O(()=>[OP]),default:O(()=>[PP]),_:1}),w(" Изображение к квизу "),AP]),E(gt,{"need-photo":!0,selected:e.quizForm.image,onSelect:e.selectPhoto},null,8,["selected","onSelect"])])):c("",!0),s("div",MP,[s("label",jP,[E(a,null,{content:O(()=>[zP]),default:O(()=>[qP]),_:1}),w(" Описание события "),RP,e.quizForm.description?(r(),d("small",UP," Длина текста "+v(e.quizForm.description.length)+"/255",1)):c("",!0)]),$(s("textarea",{class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":n[2]||(n[2]=o=>e.quizForm.description=o),"aria-describedby":"quiz-description",required:""},`
                    `,512),[[Z,e.quizForm.description]])]),s("div",VP,[s("div",YP,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[3]||(n[3]=o=>e.quizForm.polling_mode=o),type:"checkbox",id:"polling_mode"},null,512),[[De,e.quizForm.polling_mode]]),IP])]),e.quizForm.polling_mode?c("",!0):(r(),d("div",BP,[s("label",xP,[E(a,null,{content:O(()=>[EP]),default:O(()=>[NP]),_:1}),w(" Лимит времени на ответ в секундах "),QP]),$(s("input",{type:"number",class:"form-control",placeholder:"Лимит времени на ответ","aria-label":"Лимит времени на ответ",step:"0.1",min:"0","onUpdate:modelValue":n[4]||(n[4]=o=>e.quizForm.time_limit=o),"aria-describedby":"quiz-time_limit",required:""},null,512),[[Z,e.quizForm.time_limit]])])),s("div",LP,[s("div",HP,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[5]||(n[5]=o=>e.quizForm.show_answers=o),type:"checkbox",id:"is-group"},null,512),[[De,e.quizForm.show_answers]]),WP])]),s("div",KP,[s("div",XP,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[6]||(n[6]=o=>e.quizForm.is_active=o),type:"checkbox",id:"is_active"},null,512),[[De,e.quizForm.is_active]]),GP])]),e.quizForm.polling_mode?c("",!0):(r(),d("div",ZP,[s("div",JP,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[7]||(n[7]=o=>e.quizForm.round_mode=o),type:"checkbox",id:"round_mode"},null,512),[[De,e.quizForm.round_mode]]),eO])])),s("div",tO,[s("label",sO,[E(a,null,{content:O(()=>[oO]),default:O(()=>[nO]),_:1}),w(" Количество попыток "),aO]),$(s("input",{type:"number",class:"form-control",placeholder:"Число попыток","aria-label":"Число попыток",step:"1",min:"1","onUpdate:modelValue":n[8]||(n[8]=o=>e.quizForm.try_count=o),"aria-describedby":"quiz-try_count",required:""},null,512),[[Z,e.quizForm.try_count]])]),s("div",lO,[s("label",iO,[E(a,null,{content:O(()=>[dO]),default:O(()=>[rO]),_:1}),w(" % для прохождения "),uO]),$(s("input",{type:"number",class:"form-control",placeholder:"Процент для победы","aria-label":"Процент для победы",step:"1",min:"0","onUpdate:modelValue":n[9]||(n[9]=o=>e.quizForm.success_percent=o),"aria-describedby":"quiz-success_percent",required:""},null,512),[[Z,e.quizForm.success_percent]])])]),s("div",cO,[s("div",mO,[s("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:n[10]||(n[10]=o=>e.addMessage("success_message",null))},"Добавить еще вариант текста ")]),(r(!0),d(B,null,oe(e.quizForm.success_message,(o,l)=>(r(),d("div",pO,[s("div",hO,[s("div",_O,[s("label",fO,[E(a,null,{content:O(()=>[bO]),default:O(()=>[vO]),_:1}),w(" Текст при победе "),gO,e.quizForm.success_message[l]?(r(),d("small",yO," Длина текста "+v(e.quizForm.success_message[l].length)+"/255",1)):c("",!0)]),$(s("textarea",{class:"form-control",placeholder:"Текст при победе","aria-label":"Текст при победе",maxlength:"255","onUpdate:modelValue":i=>e.quizForm.success_message[l]=i,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,$O),[[Z,e.quizForm.success_message[l]]])]),s("div",kO,[s("button",{class:"btn btn-outline-danger",disabled:e.quizForm.success_message.length<=1,onClick:i=>e.removeMessage("success_message",l)},"Удалить ",8,wO)])])]))),256))]),s("div",CO,[s("div",FO,[s("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:n[11]||(n[11]=o=>e.addMessage("failure_message",null))},"Добавить еще вариант текста ")]),(r(!0),d(B,null,oe(e.quizForm.failure_message,(o,l)=>(r(),d("div",TO,[s("div",DO,[s("div",SO,[s("label",{class:"form-label",id:"quiz-failure_message"+l},[E(a,null,{content:O(()=>[AO]),default:O(()=>[OO]),_:1}),w(" Текст при проигрыше "),MO,e.quizForm.failure_message[l]?(r(),d("small",jO," Длина текста "+v(e.quizForm.failure_message[l].length)+"/255",1)):c("",!0)],8,PO),$(s("textarea",{class:"form-control",placeholder:"Текст при проигрыше","aria-label":"Текст при проигрыше",maxlength:"255","onUpdate:modelValue":i=>e.quizForm.failure_message[l]=i,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,qO),[[Z,e.quizForm.failure_message[l]]])]),s("div",zO,[s("button",{class:"btn btn-outline-danger",disabled:e.quizForm.failure_message.length<=1,onClick:i=>e.removeMessage("failure_message",l)},"Удалить ",8,RO)])])]))),256))]),s("div",UO,[s("div",VO,[s("div",YO,[$(s("select",{class:"form-select","onUpdate:modelValue":n[12]||(n[12]=o=>e.quizForm.display_type=o),id:"quiz-display-type","aria-label":"quiz-display-type"},[(r(!0),d(B,null,oe(e.types,(o,l)=>(r(),d("option",{value:l,selected:l==e.quizForm.display_type},v(o),9,IO))),256))],512),[[Jt,e.quizForm.display_type]]),BO])])]),s("div",xO,[s("div",NO,[s("button",EO,[e.quizForm.id==null?(r(),d("span",QO,"Создать квиз")):(r(),d("span",LO,"Обновить квиз"))])])])],32)}}}),WO={class:"row py-2"},KO={class:"col-12"},XO={class:"input-group mb-3"},GO={class:"col-12"},ZO={key:0,class:"table"},JO=s("th",{scope:"col"},"Число вопросов",-1),eA=s("th",{scope:"col"},"Число команд",-1),tA=s("th",{scope:"col"},"Действие",-1),sA={scope:"row"},nA=["onClick"],oA={key:0,style:{width:"50px",height:"50px"},alt:""},aA={key:1},lA={key:0,class:"mb-0"},iA={key:1},rA={key:0,class:"mb-0"},dA={key:1},uA={key:0,class:"mb-0"},cA={key:1},mA={key:0,class:"fa-solid fa-chevron-down text-success"},pA={key:1,class:"fa-solid fa-xmark text-danger"},hA={key:0,class:"fa-solid fa-chevron-down text-success"},_A={key:1,class:"fa-solid fa-xmark text-danger"},fA={key:0,class:"dropdown"},vA=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),bA={class:"dropdown-menu"},gA={key:0},yA=["onClick"],$A={key:1},kA=s("div",{class:"alert alert-warning alert-dismissible fade show",role:"alert"},[s("strong",null,"Внимание!"),w(" Вы еще не добавили ни одного квиза! "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})],-1),wA={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},CA={class:"d-flex justify-content-center mb-3"},FA={alt:"",width:"100",height:"100"},TA=s("h1",{class:"text-body-emphasis"},"Создание Квиза",-1),DA=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Квиз - это игра. Создавайте игры и делитесь с клиентами ссылкой на игру. Формируйте команды, начисляйте баллы, меняйте баллы на вкусные призы. Всё в ваших руках. ",-1),SA={class:"d-inline-flex gap-2 mb-5"},PA=s("a",{href:"https://telegra.ph/Sozdanie-Kviza-01-13",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),OA={key:0,class:"col-12"},AA={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,quizzes:[],search:null,paginate_object:null}},computed:{...xe(["getQuizzes","getQuizzesPaginateObject"])},mounted(){this.loadQuizzes()},methods:{removeQuiz(t){this.loading=!0,this.$store.dispatch("removeQuiz",{quizId:t}).then(e=>{this.loading=!1,this.loadQuizzes(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},createQuiz(){this.$emit("create")},nextQuizzes(t){this.loadQuizzes(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizzes(0)},loadQuizzes(t=0){this.loading=!0,this.$store.dispatch("loadQuizzes",{dataObject:{bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.quizzes=this.getQuizzes,this.paginate_object=this.getQuizzesPaginateObject}).catch(()=>{this.loading=!1})}}},MA=Object.assign(AA,{__name:"QuizTable",setup(t){return(e,n)=>{const a=hs("lazy");return r(),d("div",WO,[s("div",KO,[s("div",XO,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск квиза","aria-label":"Поиск квиза","onUpdate:modelValue":n[0]||(n[0]=o=>e.search=o),"aria-describedby":"quiz-search-quiz"},null,512),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[1]||(n[1]=o=>e.loadQuizzes(0)),type:"button",id:"quiz-search-quiz"},"Найти ")])]),s("div",GO,[e.quizzes.length>0?(r(),d("table",ZO,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=o=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=o=>e.loadAndOrder("title"))},"Название"),JO,eA,s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=o=>e.loadAndOrder("image"))},"Изображение к квизу"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=o=>e.loadAndOrder("description"))},"Описание"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=o=>e.loadAndOrder("completed_at"))},"Квиз пройден"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=o=>e.loadAndOrder("start_at"))},"Дата и время начала"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[8]||(n[8]=o=>e.loadAndOrder("end_at"))},"Дата и время завершения"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[9]||(n[9]=o=>e.loadAndOrder("display_type"))},"Тип отображения"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[10]||(n[10]=o=>e.loadAndOrder("show_answers"))},"Показывать ответы по окончанию раунда "),s("th",{scope:"col",class:"cursor-pointer",onClick:n[11]||(n[11]=o=>e.loadAndOrder("is_active"))},"Активный "),s("th",{scope:"col",class:"cursor-pointer",onClick:n[12]||(n[12]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),tA])]),s("tbody",null,[(r(!0),d(B,null,oe(e.quizzes,(o,l)=>(r(),d("tr",{class:j({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[s("th",sA,v(o.id),1),s("td",{onClick:i=>e.selectEvent(o)},v(o.title||"Не указано"),9,nA),s("td",null,v((o.questions||[]).length),1),s("td",null,v((o.commands||[]).length),1),s("td",null,[o.image!=null?$((r(),d("img",oA,null,512)),[[a,"/file-by-file-id/"+o.image]]):(r(),d("p",aA,"не указано"))]),s("td",null,v(o.description||"Не указано"),1),s("td",null,[o.completed_at?(r(),d("p",lA,v(e.$filters.currentFull(o.completed_at)),1)):(r(),d("p",iA,"Не задано"))]),s("td",null,[o.start_at?(r(),d("p",rA,v(e.$filters.currentFull(o.start_at)),1)):(r(),d("p",dA,"Не задано"))]),s("td",null,[o.end_at?(r(),d("p",uA,v(e.$filters.currentFull(o.end_at)),1)):(r(),d("p",cA,"Не задано"))]),s("td",null,v(o.display_type),1),s("td",null,v(o.time_limit),1),s("td",null,[o.show_answers?(r(),d("i",mA)):(r(),d("i",pA))]),s("td",null,[o.is_multiply?(r(),d("i",hA)):(r(),d("i",_A))]),s("td",null,v(e.$filters.current(o.updated_at)),1),s("td",null,[o.id?(r(),d("div",fA,[vA,s("ul",bA,[o.deleted_at==null?(r(),d("li",gA,[s("a",{class:"dropdown-item",onClick:i=>e.removeQuiz(o.id),href:"javascript:void(0)"},"Удалить",8,yA)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("div",$A,[kA,s("div",wA,[s("div",CA,[$(s("img",FA,null,512),[[a,"../images/icon.png"]])]),TA,DA,s("div",SA,[s("button",{onClick:n[13]||(n[13]=(...o)=>e.createQuiz&&e.createQuiz(...o)),class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"}," Добавить "),PA])])]))]),e.quizzes.length>0?(r(),d("div",OA,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextQuizzes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0)])}}}),jA={props:{type:String,value:String}},qA={class:"d-flex mb-2"},zA={class:"form-floating mb-3"},RA=["value"],UA=s("label",{for:"custom-url-link-for-success"},"Ссылка на файл",-1);function VA(t,e,n,a,o,l){return r(),d(B,null,[s("div",qA,[s("span",{class:j(["badge bg-secondary cursor-pointer mr-1",{"bg-success":n.type=="video"}]),onClick:e[0]||(e[0]=i=>t.$emit("update:type","video"))},"Видео",2),s("span",{class:j(["badge bg-secondary cursor-pointer mr-1",{"bg-success":n.type=="video_note"}]),onClick:e[1]||(e[1]=i=>t.$emit("update:type","video_note"))},"Кружок",2),s("span",{class:j(["badge bg-secondary cursor-pointer mr-1",{"bg-success":n.type=="photo"}]),onClick:e[2]||(e[2]=i=>t.$emit("update:type","photo"))},"Изображение",2),s("span",{class:j(["badge bg-secondary cursor-pointer mr-1",{"bg-success":n.type=="audio"}]),onClick:e[3]||(e[3]=i=>t.$emit("update:type","audio"))},"Звук",2)]),s("div",zA,[s("input",{type:"text",class:"form-control",value:n.value,onInput:e[4]||(e[4]=i=>t.$emit("update:value",n.value)),id:"custom-url-link-for-success",placeholder:"https://...."},null,40,RA),UA])],64)}const kn=Ut(jA,[["render",VA]]),YA={class:"row py-3"},IA={class:"col-12"},BA={class:"row"},xA={class:"col-12 mb-3"},NA={key:0},EA=["onClick"],QA={class:"form-label",id:"quiz-round"},LA=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),HA=s("div",null," Раунд, в котором будет отображен вопрос ",-1),WA=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),KA={class:"col-12 mb-3"},XA={class:"form-label",id:"event-on_after_appointment"},GA=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ZA=s("div",null," Текст вопроса ",-1),JA=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),eM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},tM={class:"col-12 mb-3"},sM={class:"form-check"},nM=s("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),oM={key:0,class:"col-12 mb-3"},aM={class:"form-label",id:"quiz-images"},lM=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),iM=s("div",null," Изображение, видео, аудио сопровождение вопроса ",-1),rM={key:0,class:"badge rounded-pill text-bg-info m-0"},dM=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),uM=s("h6",null,"Вставьте ссылку на контент...",-1),cM=s("h6",null,"...или выберите из доступных",-1),mM={class:"col-12 mb-3"},pM={class:"form-check"},hM=s("label",{class:"form-check-label",for:"is_multiply"}," Множественные ответы ",-1),_M={class:"col-12 mb-3"},fM={class:"form-check"},vM=s("label",{class:"form-check-label",for:"is_open"}," Открытый вопрос ",-1),bM={class:"col-12 mb-3"},gM={class:"d-flex justify-content-between"},yM={class:"form-label",id:"quiz-description"},$M=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),kM=s("div",null," Текст при выборе правильного ответа ",-1),wM=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),CM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},FM={class:"dropdown"},TM=s("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Кнопки ",-1),DM={class:"dropdown-menu"},SM=["onClick"],PM={class:"dropdown-item",href:"javascript:void(0)"},OM={class:"col-12 mb-3"},AM={class:"form-check"},MM=s("label",{class:"form-check-label",for:"need_media_for_success"}," Нужен медиа-контент при правильном ответе ",-1),jM={key:1,class:"col-12 mb-3"},qM=s("h6",null,"Вставьте ссылку на контент...",-1),zM=s("h6",null,"...или выберите из доступных",-1),RM={class:"col-12 mb-3"},UM={class:"d-flex justify-content-between"},VM={class:"form-label",id:"quiz-description"},YM=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),IM=s("div",null," Текст в выбора неправильного ответа ",-1),BM=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),xM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},NM={class:"dropdown"},EM=s("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Кнопки ",-1),QM={class:"dropdown-menu"},LM=["onClick"],HM={class:"dropdown-item",href:"javascript:void(0)"},WM={class:"col-12 mb-3"},KM={class:"form-check"},XM=s("label",{class:"form-check-label",for:"need_media_for_failed"}," Нужен медиа-контент при неправильном ответе ",-1),GM={key:2,class:"col-12 mb-3"},ZM=s("h6",null,"Вставьте ссылку на контент...",-1),JM=s("h6",null,"...или выберите из доступных",-1),e7={class:"row"},t7={class:"col-12"},s7={class:"col-12"},n7={key:0,class:"table"},o7=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"#"),s("th",{scope:"col"},"Текст вопроса"),s("th",{scope:"col"},"Баллы"),s("th",{scope:"col"},"Контент"),s("th",{scope:"col"},"Тип контента"),s("th",{scope:"col"},"Является верным"),s("th",{scope:"col"},"Действие")])],-1),a7={scope:"row"},l7={class:"form-floating mb-3"},i7=["onUpdate:modelValue","id"],r7=["for"],d7={class:"form-floating mb-3"},u7=["onUpdate:modelValue","id"],c7=["for"],m7=["onClick"],p7={class:"form-check"},h7=["onUpdate:modelValue","id"],_7=["for"],f7={class:"dropdown"},v7=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),b7={class:"dropdown-menu"},g7={key:0},y7=["onClick"],$7={key:1},k7=["onClick"],w7={key:1},C7={class:"row"},F7={class:"col-12"},T7={type:"submit",class:"btn btn-outline-success w-100 p-3"},D7={key:0},S7={key:1},P7={class:"modal fade",id:"chooseMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},O7={class:"modal-dialog"},A7={class:"modal-content"},M7={key:0,class:"modal-body"},j7=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),q7={class:"modal fade",id:"chooseSuccessMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},z7={class:"modal-dialog"},R7={class:"modal-content"},U7={class:"modal-body"},V7=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Y7={class:"modal fade",id:"chooseFailureMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},I7={class:"modal-dialog"},B7={class:"modal-content"},x7={class:"modal-body"},N7=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),E7={class:"modal fade",id:"chooseBaseMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Q7={class:"modal-dialog"},L7={class:"modal-content"},H7={class:"modal-body"},W7=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),K7={props:["quizId","bot","question"],data(){return{step:0,load:!1,selectedQuestionIndex:null,need_media:!1,need_media_for_success:!1,need_media_for_failed:!1,rounds:[],htmlInjections:[{title:"Кнопка синяя",value:"<a href='http://test.com/test' class='w-100 btn btn-primary'>Текст кнопки</a>"},{title:"Кнопка без цвета",value:"<a href='http://test.com/test' class='w-100 btn btn-link'>Текст кнопки</a>"},{title:"Кнопка с синей обводкой",value:"<a href='http://test.com/test' class='w-100 btn btn-outline-primary'>Текст кнопки</a>"}],questionForm:{id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}}},watch:{questionForm:{handler(t){this.need_reset=!0},deep:!0},need_media:function(t,e){this.need_page_images||(this.questionForm.media_content=null,this.questionForm.content_type=null)},need_media_for_success:function(t,e){this.need_page_images||(this.questionForm.success_media_content=null,this.questionForm.success_media_content_type=null)},need_media_for_failed:function(t,e){this.need_page_images||(this.questionForm.failure_media_content=null,this.questionForm.failure_media_content_type=null)}},mounted(){this.loadQuizRounds(),this.question&&(this.question.media_content!=null&&(this.need_media=!0),this.question.success_media_content!=null&&(this.need_media_for_success=!0),this.question.failure_media_content!=null&&(this.need_media_for_failed=!0),this.$nextTick(()=>{this.questionForm={id:this.question.id||null,text:this.question.text||null,round:this.question.round||null,media_content:this.question.media_content||null,content_type:this.question.content_type||null,is_multiply:this.question.is_multiply||!1,is_open:this.question.is_open||!1,answers:this.question.answers||[],success_message:this.question.success_message||null,failure_message:this.question.failure_message||null,success_media_content:this.question.success_media_content||null,failure_media_content:this.question.failure_media_content||null,success_media_content_type:this.question.success_media_content_type||null,failure_media_content_type:this.question.failure_media_content_type||null}}))},methods:{attachTo(t,e){this.questionForm[t]==null?this.questionForm[t]=e:this.questionForm[t]+=e},loadQuizRounds(){this.$store.dispatch("loadQuizRounds",{dataObject:{bot_id:this.bot.id||null,quiz_id:this.quizId||null}}).then(t=>{this.rounds=t})},chooseBaseMediaContent(t){new bootstrap.Modal(document.getElementById("chooseBaseMediaContent"),{}).show()},chooseSuccessMediaContent(t){new bootstrap.Modal(document.getElementById("chooseSuccessMediaContent"),{}).show()},chooseFailureMediaContent(t){new bootstrap.Modal(document.getElementById("chooseFailureMediaContent"),{}).show()},chooseMediaContent(t){this.selectedQuestionIndex=null,this.$nextTick(()=>{this.selectedQuestionIndex=t}),new bootstrap.Modal(document.getElementById("chooseMediaContent"),{}).show()},selectMediaForFailure(t){this.questionForm.failure_media_content=t.file_id,this.questionForm.failure_media_content_type=t.type},selectMediaForSuccess(t){this.questionForm.success_media_content=t.file_id,this.questionForm.success_media_content_type=t.type},selectMediaForAnswer(t){this.questionForm.answers[this.selectedQuestionIndex].media_content=t.file_id,this.questionForm.answers[this.selectedQuestionIndex].content_type=t.type},selectMedia(t){this.questionForm.media_content=t.file_id,this.questionForm.content_type=t.type},clearQuestionForm(){this.questionForm={id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}},addNewAnswer(){this.questionForm.answers.push({text:null,media_content:null,content_type:null,is_right_answer:!1,points:0})},removeAnswerFromArray(t){this.questionForm.answers.splice(t,1)},removeAnswer(t){this.$store.dispatch("removeQuizAnswer",{quizAnswerId:t}).then(e=>{this.$notify("Вопрос успешно удален");let n=this.questionForm.answers.findIndex(a=>a.id==t);this.questionForm.answers.splice(n,1)}).catch(e=>{this.$notify("Ошибка удаления вопроса")})},submitForm(){let t=new FormData;Object.keys(this.questionForm).forEach(e=>{const n=this.questionForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),t.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizQuestion",{quizQuestionForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Вопрос успешно создан"),this.clearQuestionForm(),this.loadQuizRounds()}).catch(e=>{this.$notify("Ошибка создания вопроса")})}}},X7=Object.assign(K7,{__name:"QuizQuestionForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d(B,null,[s("div",YA,[s("div",IA,[s("button",{onClick:n[0]||(n[0]=(...o)=>e.clearQuestionForm&&e.clearQuestionForm(...o)),class:"btn btn-primary"},"Новый вопрос ")])]),s("form",{onSubmit:n[20]||(n[20]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",BA,[s("div",xA,[e.rounds.length>0?(r(),d("p",NA,[w(" Ранее созданные раунды: "),(r(!0),d(B,null,oe(e.rounds,o=>(r(),d("span",{onClick:l=>e.questionForm.round=o,class:"badge bg-primary mr-1 cursor-pointer"},v(o),9,EA))),256))])):c("",!0),s("label",QA,[E(a,null,{content:O(()=>[HA]),default:O(()=>[LA]),_:1}),w(" Раунд "),WA]),$(s("input",{type:"number",class:"form-control",placeholder:"Раунд","aria-label":"Раундт",step:"1",min:"1","onUpdate:modelValue":n[1]||(n[1]=o=>e.questionForm.round=o),"aria-describedby":"quiz-round",required:""},null,512),[[Z,e.questionForm.round]])]),s("div",KA,[s("label",XA,[E(a,null,{content:O(()=>[ZA]),default:O(()=>[GA]),_:1}),w(" Текст вопроса "),JA,e.questionForm.text?(r(),d("small",eM," Длина текста "+v(e.questionForm.text.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст вопроса","aria-label":"Текст вопроса","onUpdate:modelValue":n[2]||(n[2]=o=>e.questionForm.text=o),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[Z,e.questionForm.text]])]),s("div",tM,[s("div",sM,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[3]||(n[3]=o=>e.need_media=o),type:"checkbox",id:"need_media"},null,512),[[De,e.need_media]]),nM])]),e.need_media?(r(),d("div",oM,[s("label",aM,[E(a,null,{content:O(()=>[iM]),default:O(()=>[lM]),_:1}),w(" Медиа контент к вопросу "),e.questionForm.content_type?(r(),d("span",rM,v(e.questionForm.content_type),1)):c("",!0),dM]),uM,E(kn,{type:e.questionForm.content_type,"onUpdate:type":n[4]||(n[4]=o=>e.questionForm.content_type=o),value:e.questionForm.media_content,"onUpdate:value":n[5]||(n[5]=o=>e.questionForm.media_content=o)},null,8,["type","value"]),cM,s("button",{type:"button",onClick:n[6]||(n[6]=(...o)=>e.chooseBaseMediaContent&&e.chooseBaseMediaContent(...o)),class:"btn btn-outline-info rounded-lg"},"Выбрать медиа-файл ")])):c("",!0),s("div",mM,[s("div",pM,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[7]||(n[7]=o=>e.questionForm.is_multiply=o),type:"checkbox",id:"is_multiply"},null,512),[[De,e.questionForm.is_multiply]]),hM])]),s("div",_M,[s("div",fM,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[8]||(n[8]=o=>e.questionForm.is_open=o),type:"checkbox",id:"is_open"},null,512),[[De,e.questionForm.is_open]]),vM])]),s("div",bM,[s("div",gM,[s("label",yM,[E(a,null,{content:O(()=>[kM]),default:O(()=>[$M]),_:1}),w(" Текст при выборе правильного ответа "),wM,e.questionForm.success_message?(r(),d("small",CM," Длина текста "+v(e.questionForm.success_message.length)+"/255",1)):c("",!0)]),s("div",FM,[TM,s("ul",DM,[(r(!0),d(B,null,oe(e.htmlInjections,o=>(r(),d("li",{onClick:l=>e.attachTo("success_message",o.value)},[s("a",PM,v(o.title||"Не указано"),1)],8,SM))),256))])])]),$(s("textarea",{class:"form-control",placeholder:"Текст при правильном ответе","aria-label":"Текст при правильном ответе",maxlength:"255","onUpdate:modelValue":n[9]||(n[9]=o=>e.questionForm.success_message=o),"aria-describedby":"quiz-question-success_message"},`
                    `,512),[[Z,e.questionForm.success_message]])]),s("div",OM,[s("div",AM,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[10]||(n[10]=o=>e.need_media_for_success=o),type:"checkbox",id:"need_media_for_success"},null,512),[[De,e.need_media_for_success]]),MM])]),e.need_media_for_success?(r(),d("div",jM,[qM,E(kn,{type:e.questionForm.success_media_content_type,"onUpdate:type":n[11]||(n[11]=o=>e.questionForm.success_media_content_type=o),value:e.questionForm.success_media_content,"onUpdate:value":n[12]||(n[12]=o=>e.questionForm.success_media_content=o)},null,8,["type","value"]),zM,s("button",{type:"button",onClick:n[13]||(n[13]=(...o)=>e.chooseSuccessMediaContent&&e.chooseSuccessMediaContent(...o)),class:"btn btn-outline-info rounded-lg"},"Выбрать медиа-файл ")])):c("",!0),s("div",RM,[s("div",UM,[s("label",VM,[E(a,null,{content:O(()=>[IM]),default:O(()=>[YM]),_:1}),w(" Текст при выборе неправильного ответа "),BM,e.questionForm.failure_message?(r(),d("small",xM," Длина текста "+v(e.questionForm.failure_message.length)+"/255",1)):c("",!0)]),s("div",NM,[EM,s("ul",QM,[(r(!0),d(B,null,oe(e.htmlInjections,o=>(r(),d("li",{onClick:l=>e.attachTo("failure_message",o.value)},[s("a",HM,v(o.title||"Не указано"),1)],8,LM))),256))])])]),$(s("textarea",{class:"form-control",placeholder:"Текст при неправильном ответе","aria-label":"Текст при неправильном ответе",maxlength:"255","onUpdate:modelValue":n[14]||(n[14]=o=>e.questionForm.failure_message=o),"aria-describedby":"quiz-question-failure-message"},`
                    `,512),[[Z,e.questionForm.failure_message]])]),s("div",WM,[s("div",KM,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[15]||(n[15]=o=>e.need_media_for_failed=o),type:"checkbox",id:"need_media_for_failed"},null,512),[[De,e.need_media_for_failed]]),XM])]),e.need_media_for_failed?(r(),d("div",GM,[ZM,E(kn,{type:e.questionForm.failure_media_content_type,"onUpdate:type":n[16]||(n[16]=o=>e.questionForm.failure_media_content_type=o),value:e.questionForm.failure_media_content,"onUpdate:value":n[17]||(n[17]=o=>e.questionForm.failure_media_content=o)},null,8,["type","value"]),JM,s("button",{type:"button",onClick:n[18]||(n[18]=(...o)=>e.chooseFailureMediaContent&&e.chooseFailureMediaContent(...o)),class:"btn btn-outline-info rounded-lg"},"Выбрать медиа-файл ")])):c("",!0)]),s("div",e7,[s("div",t7,[s("button",{onClick:n[19]||(n[19]=(...o)=>e.addNewAnswer&&e.addNewAnswer(...o)),type:"button",class:"btn btn-outline-success rounded-5"}," Добавить ответы ")]),s("div",s7,[e.questionForm.answers.length>0?(r(),d("table",n7,[o7,s("tbody",null,[(r(!0),d(B,null,oe(e.questionForm.answers,(o,l)=>(r(),d("tr",{class:j({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[s("th",a7,v(o.id||"Новый"),1),s("td",null,[s("div",l7,[$(s("input",{type:"text","onUpdate:modelValue":i=>e.questionForm.answers[l].text=i,class:"form-control",id:"answer-text-"+l,placeholder:"Текст ответа"},null,8,i7),[[Z,e.questionForm.answers[l].text]]),s("label",{for:"answer-text-"+l},"Текст ответа",8,r7)])]),s("td",null,[s("div",d7,[$(s("input",{type:"text","onUpdate:modelValue":i=>e.questionForm.answers[l].points=i,class:"form-control",id:"answer-points-"+l,placeholder:"Текст ответа"},null,8,u7),[[Z,e.questionForm.answers[l].points]]),s("label",{for:"answer-points-"+l},"Баллы",8,c7)])]),s("td",null,[s("p",{class:"cursor-pointer",onClick:i=>e.chooseMediaContent(l)},v(o.media_content||"Не указано"),9,m7)]),s("td",null,v(o.content_type||"Не указано"),1),s("td",null,[s("div",p7,[$(s("input",{class:"form-check-input","onUpdate:modelValue":i=>e.questionForm.answers[l].is_right_answer=i,type:"checkbox",id:"answer-is_right_answer-"+l},null,8,h7),[[De,e.questionForm.answers[l].is_right_answer]]),s("label",{class:"form-check-label",for:"answer-is_right_answer-"+l}," Правильный ответ ",8,_7)])]),s("td",null,[s("div",f7,[v7,s("ul",b7,[o.id==null?(r(),d("li",g7,[s("a",{class:"dropdown-item",onClick:i=>e.removeAnswerFromArray(l),href:"javascript:void(0)"},"Удалить",8,y7)])):c("",!0),o.deleted_at==null&&o.id!=null?(r(),d("li",$7,[s("a",{class:"dropdown-item",onClick:i=>e.removeAnswer(o.id),href:"javascript:void(0)"},"Удалить",8,k7)])):c("",!0)])])])],2))),256))])])):(r(),d("p",w7,"На текущий момент нет ни одного созданного ответа"))])]),s("div",C7,[s("div",F7,[s("button",T7,[e.questionForm.id==null?(r(),d("span",D7,"Сохранить вопрос")):(r(),d("span",S7,"Обновить вопрос"))])])])],32),s("div",P7,[s("div",O7,[s("div",A7,[e.selectedQuestionIndex!=null?(r(),d("div",M7,[E(gt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.answers[e.selectedQuestionIndex||0].media_content||""],onSelect:e.selectMediaForAnswer},null,8,["selected","onSelect"])])):c("",!0),j7])])]),s("div",q7,[s("div",z7,[s("div",R7,[s("div",U7,[E(gt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.success_media_content],onSelect:e.selectMediaForSuccess},null,8,["selected","onSelect"])]),V7])])]),s("div",Y7,[s("div",I7,[s("div",B7,[s("div",x7,[E(gt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.failure_media_content],onSelect:e.selectMediaForFailure},null,8,["selected","onSelect"])]),N7])])]),s("div",E7,[s("div",Q7,[s("div",L7,[s("div",H7,[E(gt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.media_content],onSelect:e.selectMedia},null,8,["selected","onSelect"])]),W7])])])],64)}}}),G7={class:"row"},Z7={class:"col-12"},J7={key:0,class:"table"},ej=s("th",{scope:"col"},"Число ответов",-1),tj=s("th",{scope:"col"},"Действие",-1),sj={scope:"row"},nj=["onClick"],oj={key:0,class:"fa-solid fa-chevron-down text-success"},aj={key:1,class:"fa-solid fa-xmark text-danger"},lj={key:0,class:"fa-solid fa-chevron-down text-success"},ij={key:1,class:"fa-solid fa-xmark text-danger"},rj={key:0,class:"dropdown"},dj=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),uj={class:"dropdown-menu"},cj={key:0},mj=["onClick"],pj={key:1},hj={class:"col-12"},_j={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,questions:[],search:null,paginate_object:null}},computed:{...xe(["getQuizQuestions","getQuizQuestionsPaginateObject"])},mounted(){this.loadQuizQuestions()},methods:{nextQuizQuestion(t){this.loadQuizQuestions(t)},selectQuizQuestion(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizQuestion(t){this.loading=!0,this.$store.dispatch("removeQuizQuestion",{quizQuestionId:t}).then(e=>{this.loading=!1,this.loadQuizQuestions(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizQuestions(0)},loadQuizQuestions(t=0){this.loading=!0,this.$store.dispatch("loadQuizQuestions",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.questions=this.getQuizQuestions,this.paginate_object=this.getQuizQuestionsPaginateObject}).catch(()=>{this.loading=!1})}}},fj=Object.assign(_j,{__name:"QuizQuestionTable",setup(t){return(e,n)=>(r(),d("div",G7,[s("div",Z7,[e.questions.length>0?(r(),d("table",J7,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("text"))},"Текст вопроса"),ej,s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("round"))},"Раунд"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=a=>e.loadAndOrder("media_content"))},"Контент"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=a=>e.loadAndOrder("content_type"))},"Тип контента"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=a=>e.loadAndOrder("is_multiply"))},"Множественный"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=a=>e.loadAndOrder("is_open"))},"Открытый"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),tj])]),s("tbody",null,[(r(!0),d(B,null,oe(e.questions,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",sj,v(a.id),1),s("td",{onClick:l=>e.selectQuizQuestion(a)},v(a.text||"Не указано"),9,nj),s("td",null,v((a.answers||[]).length),1),s("td",null,v(a.round||"Не указано"),1),s("td",null,v(a.media_content||"Не указано"),1),s("td",null,v(a.content_type||"Не указано"),1),s("td",null,[a.is_multiply?(r(),d("i",oj)):(r(),d("i",aj))]),s("td",null,[a.is_open?(r(),d("i",lj)):(r(),d("i",ij))]),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[a.id?(r(),d("div",rj,[dj,s("ul",uj,[a.deleted_at==null?(r(),d("li",cj,[s("a",{class:"dropdown-item",onClick:l=>e.removeQuizQuestion(a.id),href:"javascript:void(0)"},"Удалить",8,mj)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",pj,"На текущий момент нет ни одного созданного вопроса"))]),s("div",hj,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextQuizQuestion,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),vj={class:"row py-3"},bj={class:"col-12"},gj={class:"row"},yj={class:"col-12 mb-3"},$j={class:"form-label",id:"command-title"},kj=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),wj=s("div",null," Название команды ",-1),Cj=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Fj={class:"col-12 mb-3"},Tj={class:"form-label",id:"event-on_after_appointment"},Dj=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Sj=s("div",null," Текст описания команды ",-1),Pj=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Oj={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Aj=s("div",{class:"col-12 mb-3"},[s("button",{type:"button",class:"btn btn-outline-info rounded-5","data-bs-toggle":"modal","data-bs-target":"#select-players"}," Подобрать участников команды ")],-1),Mj={key:0,class:"col-12 mb-3"},jj=s("h4",null,"Пользователи в команде",-1),qj={class:"list-group list-group-numbered"},zj={class:"list-group-item d-flex justify-content-between align-items-start"},Rj={class:"ms-2 me-auto"},Uj={class:"fw-bold"},Vj={class:"dropdown"},Yj=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),Ij={class:"dropdown-menu"},Bj=["onClick"],xj={class:"row"},Nj={class:"col-12"},Ej={type:"submit",class:"btn btn-outline-success w-100 p-3"},Qj={key:0},Lj={key:1},Hj={class:"modal fade",id:"select-players",tabindex:"-1","aria-labelledby":"select-players-label","aria-hidden":"true"},Wj={class:"modal-dialog modal-fullscreen"},Kj={class:"modal-content"},Xj=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"select-players-label"},"Подбор участников команды"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Gj={class:"modal-body"},Zj=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Jj={props:["quizId","bot","command"],data(){return{step:0,load:!1,commandForm:{id:null,title:null,description:null,players:[]}}},watch:{commandForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.command&&this.$nextTick(()=>{this.commandForm={id:this.command.id||null,title:this.command.title||null,description:this.command.description||null,players:this.command.players||[]}})},methods:{removePlayerFromCommand(t){},selectBotUser(t){if(this.commandForm.players.findIndex(n=>n.id==t.id)>=0){this.$notify("Такой пользователь уже есть в списке");return}this.$notify("Пользователь успешно добавлен"),this.commandForm.players.push(t)},clearCommandForm(){this.commandForm={id:null,title:null,description:null,players:[]}},submitForm(){let t=new FormData;Object.keys(this.commandForm).forEach(e=>{const n=this.commandForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),t.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizCommand",{quizCommandForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Команда успешно создана"),this.clearCommandForm()}).catch(e=>{this.$notify("Ошибка создания команды")})}}},eq=Object.assign(Jj,{__name:"QuizCommandForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d(B,null,[s("div",vj,[s("div",bj,[s("button",{onClick:n[0]||(n[0]=(...o)=>e.clearCommandForm&&e.clearCommandForm(...o)),class:"btn btn-primary"},"Новая команда")])]),s("form",{onSubmit:n[3]||(n[3]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",gj,[s("div",yj,[s("label",$j,[E(a,null,{content:O(()=>[wj]),default:O(()=>[kj]),_:1}),w(" Название команды "),Cj]),$(s("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":n[1]||(n[1]=o=>e.commandForm.title=o),"aria-describedby":"command-title",required:""},null,512),[[Z,e.commandForm.title]])]),s("div",Fj,[s("label",Tj,[E(a,null,{content:O(()=>[Sj]),default:O(()=>[Dj]),_:1}),w(" Описание команды "),Pj,e.commandForm.description?(r(),d("small",Oj," Длина текста "+v(e.commandForm.description.length)+"/255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Текст описания","aria-label":"Текст описания","onUpdate:modelValue":n[2]||(n[2]=o=>e.commandForm.description=o),maxlength:"255","aria-describedby":"command-text",required:""},`
                    `,512),[[Z,e.commandForm.description]])]),Aj,e.commandForm.players.length>0?(r(),d("div",Mj,[jj,s("ol",qj,[(r(!0),d(B,null,oe(e.commandForm.players,o=>(r(),d("li",zj,[s("div",Rj,[s("div",Uj,"#"+v(o.id),1),w(" "+v(o.fio_from_telegram||o.telegram_chat_id),1)]),s("div",Vj,[Yj,s("ul",Ij,[s("li",null,[s("a",{class:"dropdown-item",onClick:l=>e.removePlayerFromCommand(o.id),href:"javascript:void(0)"},"Удалить",8,Bj)])])])]))),256))])])):c("",!0)]),s("div",xj,[s("div",Nj,[s("button",Ej,[e.commandForm.id==null?(r(),d("span",Qj,"Сохранить команду")):(r(),d("span",Lj,"Обновить команду"))])])])],32),s("div",Hj,[s("div",Wj,[s("div",Kj,[Xj,s("div",Gj,[E(Ks,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])]),Zj])])])],64)}}}),tq={class:"row"},sq={class:"col-12"},nq={key:0,class:"table"},oq=s("th",{scope:"col"},"Число участников",-1),aq=s("th",{scope:"col"},"Действие",-1),lq={scope:"row"},iq=["onClick"],rq={key:0,class:"dropdown"},dq=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),uq={class:"dropdown-menu"},cq={key:0},mq=["onClick"],pq={key:1},hq={class:"col-12"},_q={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,commands:[],search:null,paginate_object:null}},computed:{...xe(["getQuizCommands","getQuizCommandsPaginateObject"])},mounted(){this.loadQuizCommands()},methods:{nextQuizCommand(t){this.loadQuizCommands(t)},selectQuizCommand(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizCommand(t){this.loading=!0,this.$store.dispatch("removeQuizCommand",{quizCommandId:t}).then(e=>{this.loading=!1,this.loadQuizCommands(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizCommands(0)},loadQuizCommands(t=0){this.loading=!0,this.$store.dispatch("loadQuizCommands",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.commands=this.getQuizCommands,this.paginate_object=this.getQuizCommandsPaginateObject}).catch(()=>{this.loading=!1})}}},fq=Object.assign(_q,{__name:"QuizCommandTable",setup(t){return(e,n)=>(r(),d("div",tq,[s("div",sq,[e.commands.length>0?(r(),d("table",nq,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("title"))},"Название"),oq,s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("description"))},"Описание"),aq])]),s("tbody",null,[(r(!0),d(B,null,oe(e.commands,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",lq,v(a.id),1),s("td",{onClick:l=>e.selectQuizCommand(a)},v(a.title||"Не указано"),9,iq),s("td",null,v((a.players||[]).length),1),s("td",null,v(a.description||"Не указано"),1),s("td",null,[a.id?(r(),d("div",rq,[dq,s("ul",uq,[a.deleted_at==null?(r(),d("li",cq,[s("a",{class:"dropdown-item",onClick:l=>e.removeQuizCommand(a.id),href:"javascript:void(0)"},"Удалить",8,mq)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",pq,"На текущий момент нет ни одной созданной команды"))]),s("div",hq,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextQuizCommand,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),vq={class:"row"},bq={class:"col-12"},gq={key:0,class:"table"},yq=s("th",{scope:"col"},"Название квиза",-1),$q=s("th",{scope:"col"},"Название команды",-1),kq=s("th",{scope:"col"},"Число участников",-1),wq=s("th",{scope:"col"},"Результат",-1),Cq=s("th",{scope:"col"},"Действие",-1),Fq={scope:"row"},Tq=["onClick"],Dq={key:0},Sq=s("td",null,"-",-1),Pq={key:0,class:"dropdown"},Oq=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),Aq={class:"dropdown-menu"},Mq={key:0},jq=["onClick"],qq={key:1},zq={class:"col-12"},Rq={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,results:[],search:null,paginate_object:null}},computed:{...xe(["getQuizResults","getQuizResultsPaginateObject"])},mounted(){this.loadQuizResults()},methods:{nextQuizResult(t){this.loadQuizResults(t)},selectQuizResult(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizResult(t){this.loading=!0,this.$store.dispatch("removeQuizResult",{quizResultId:t}).then(e=>{this.loading=!1,this.loadQuizResults(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizResults(0)},loadQuizResults(t=0){this.loading=!0,this.$store.dispatch("loadQuizResults",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.results=this.getQuizResults,this.paginate_object=this.getQuizResultsPaginateObject}).catch(()=>{this.loading=!1})}}},Uq=Object.assign(Rq,{__name:"QuizResultTable",setup(t){return(e,n)=>(r(),d("div",vq,[s("div",bq,[e.results.length>0?(r(),d("table",gq,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[0]||(n[0]=a=>e.loadAndOrder("id"))},"#"),yq,$q,kq,s("th",{scope:"col",class:"cursor-pointer",onClick:n[1]||(n[1]=a=>e.loadAndOrder("points"))},"Баллы"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>e.loadAndOrder("times"))},"Время"),wq,Cq])]),s("tbody",null,[(r(!0),d(B,null,oe(e.results,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",Fq,v(a.id),1),s("td",{onClick:l=>e.selectQuizResult(a)},v(a.quiz.title||"Не указано"),9,Tq),s("td",null,[a.command?(r(),d("span",Dq,v(a.command.title||"Не указано"),1)):c("",!0)]),s("td",null,v((a.command.players||[]).length),1),s("td",null,v(a.points||"Не указано"),1),s("td",null,v(a.times||"Не указано"),1),Sq,s("td",null,[a.id?(r(),d("div",Pq,[Oq,s("ul",Aq,[a.deleted_at==null?(r(),d("li",Mq,[s("a",{class:"dropdown-item",onClick:l=>e.removeQuizResult(a.id),href:"javascript:void(0)"},"Удалить",8,jq)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",qq,"На текущий момент нет ни одного созданного вопроса"))]),s("div",zq,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextQuizResult,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),Vq={key:0,class:"py-2"},Yq={class:"row"},Iq={class:"col-12"},Bq={key:1,class:"py-2"},xq={class:"row"},Nq={class:"col-12"},Eq={key:2,class:"py-2"},Qq={class:"row"},Lq={class:"col-12"},Hq={class:"nav nav-tabs justify-content-center"},Wq={key:0,class:"row py-3"},Kq={class:"col-12"},Xq={key:1,class:"row py-3"},Gq={class:"col-12"},Zq={class:"col-12 py-3"},Jq=s("h4",null,"Доступные вопросы",-1),e9={key:2,class:"row"},t9={class:"col-12"},s9={class:"col-12 py-3"},n9=s("h4",null,"Команды участники квиза",-1),o9={key:3,class:"row"},a9={class:"col-12 py-3"},l9=s("h4",null,"Статистика",-1),i9={key:4,class:"row"},r9=s("div",{class:"col-12"},null,-1),d9=s("div",{class:"col-12 py-3"},[s("h4",null,"Отзывы к событию")],-1),u9=[r9,d9],c9={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadQuizCommand:!1,loadQuizQuestion:!1,loadQuizQuestionTable:!1,loadQuizCommandTable:!1,loadQuizResult:!1,loadForm:!1,selectedQuiz:null,selectedQuizQuestion:null,selectedQuizCommand:null,selectedQuizResult:null}},mounted(){},methods:{callbackCommandForm(){this.loadQuizCommandTable=!0,this.$nextTick(()=>{this.loadQuizCommandTable=!1})},callbackQuestionForm(){this.loadQuizQuestionTable=!0,this.$nextTick(()=>{this.loadQuizQuestionTable=!1})},callbackForm(){this.loadTable=!0,this.part=0,this.$nextTick(()=>{this.loadTable=!1})},createQuiz(){this.part=2},selectQuizResult(t){this.loadQuizResult=!0,this.$nextTick(()=>{this.loadQuizResult=!1,this.selectedQuizResult=t})},selectQuizCommand(t){this.loadQuizCommand=!0,this.$nextTick(()=>{this.loadQuizCommand=!1,this.selectedQuizCommand=t})},selectQuizQuestion(t){this.loadQuizQuestion=!0,this.$nextTick(()=>{this.loadQuizQuestion=!1,this.selectedQuizQuestion=t})},selectQuiz(t){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedQuiz=t,this.part=1,this.tab=0})}}},m9=Object.assign(c9,{__name:"Quizzes",setup(t){return(e,n)=>(r(),d(B,null,[e.part===0?(r(),d("div",Vq,[s("div",Yq,[s("div",Iq,[s("button",{type:"button",onClick:n[0]||(n[0]=(...a)=>e.createQuiz&&e.createQuiz(...a)),class:"btn btn-primary"}," Создать новый квиз ")])]),e.loadTable?c("",!0):(r(),H(MA,{key:0,onCreate:e.createQuiz,onSelect:e.selectQuiz,bot:t.bot},null,8,["onCreate","onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",Bq,[s("div",xq,[s("div",Nq,[s("button",{type:"button",onClick:n[1]||(n[1]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),H(qo,{key:0,onCallback:e.callbackForm,bot:t.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",Eq,[s("div",Qq,[s("div",Lq,[s("button",{type:"button",onClick:n[2]||(n[2]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),s("ul",Hq,[s("li",{class:"nav-item",onClick:n[3]||(n[3]=a=>e.tab=0)},[s("a",{class:j(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о квизе",2)]),s("li",{class:"nav-item",onClick:n[4]||(n[4]=a=>e.tab=1)},[s("a",{class:j(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Вопросы квиза",2)]),s("li",{class:"nav-item",onClick:n[5]||(n[5]=a=>e.tab=2)},[s("a",{class:j(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Команды на квизе",2)]),s("li",{class:"nav-item",onClick:n[6]||(n[6]=a=>e.tab=3)},[s("a",{class:j(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Командная статистика",2)])]),e.tab===0?(r(),d("div",Wq,[s("div",Kq,[e.loadForm?c("",!0):(r(),H(qo,{key:0,onCallback:e.callbackForm,quiz:e.selectedQuiz,bot:t.bot},null,8,["onCallback","quiz","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",Xq,[s("div",Gq,[e.loadQuizQuestion?c("",!0):(r(),H(X7,{key:0,question:e.selectedQuizQuestion,"quiz-id":e.selectedQuiz.id,onCallback:e.callbackQuestionForm,bot:t.bot},null,8,["question","quiz-id","onCallback","bot"]))]),s("div",Zq,[Jq,e.loadQuizQuestionTable?c("",!0):(r(),H(fj,{key:0,"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizQuestion,bot:t.bot},null,8,["quiz-id","onSelect","bot"]))])])):c("",!0),e.tab===2?(r(),d("div",e9,[s("div",t9,[e.loadQuizCommand?c("",!0):(r(),H(eq,{key:0,command:e.selectedQuizCommand,"quiz-id":e.selectedQuiz.id,onCallback:e.callbackCommandForm,bot:t.bot},null,8,["command","quiz-id","onCallback","bot"]))]),s("div",s9,[n9,e.loadQuizCommandTable?c("",!0):(r(),H(fq,{key:0,"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizCommand,bot:t.bot},null,8,["quiz-id","onSelect","bot"]))])])):c("",!0),e.tab===3?(r(),d("div",o9,[s("div",a9,[l9,E(Uq,{"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizResult,bot:t.bot},null,8,["quiz-id","onSelect","bot"])])])):c("",!0),e.tab===4?(r(),d("div",i9,u9)):c("",!0)])):c("",!0)],64))}}),p9={class:"row"},h9={class:"col-12 mb-3"},_9={class:"form-label",id:"service-title"},f9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),v9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),b9={class:"col-12 mb-3"},g9={key:0},y9=["onClick"],$9={class:"form-label",id:"service-category"},k9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),w9=s("div",null,"Категория услуги (используется для группировки) ",-1),C9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),F9={class:"col-12 mb-3"},T9={class:"form-label",id:"service-description"},D9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),S9=s("div",null," Краткая информация об оказываемой услуге ",-1),P9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),O9={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},A9={class:"col-12 col-md-6 mb-3"},M9={class:"form-label",id:"service-title"},j9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),q9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),z9={class:"col-12 col-md-6 mb-3"},R9={class:"form-label",id:"service-title"},U9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),V9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Y9={class:"col-12 mb-3"},I9={class:"form-label",id:"service-images"},B9=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),x9=s("div",null," Изображение, которое видит пользователь при выборе услуги ",-1),N9=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),E9={class:"col-12 mb-3"},Q9={class:"form-check"},L9=s("label",{class:"form-check-label",for:"need_prepayment"}," Необходима предоплата ",-1),H9={class:"row"},W9={class:"col-12"},K9={type:"submit",class:"btn btn-outline-success w-100 p-3"},X9={key:0},G9={key:1},Z9={props:["bot","inlineQuery"],data(){return{load:!1,need_reset:!1,categories:[],inlineQueryForm:{id:null,command:null,description:null,items:[]}}},watch:{inlineQueryForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.inlineQuery&&this.$nextTick(()=>{this.inlineQueryForm={id:this.inlineQuery.id||null,command:this.inlineQuery.command||null,description:this.inlineQuery.description||null,items:this.inlineQuery.items||[]}})},methods:{selectPhotos(t){this.inlineQueryForm.images||(this.inlineQueryForm.images=[]);let e=this.inlineQueryForm.images.indexOf(t.file_id);e!==-1?this.inlineQueryForm.images.splice(e,1):this.inlineQueryForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.inlineQueryForm).forEach(e=>{const n=this.inlineQueryForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),t.append("appointment_event_id",this.eventId),this.$store.dispatch(this.inlineQueryForm.id===null?"addAppointmentService":"updateAppointmentService",{appointmentServiceForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Услуги успешно создано")}).catch(e=>{this.$notify("Услуги создания события")})}}},J9=Object.assign(Z9,{__name:"InlineQueryForm",setup(t){return(e,n)=>{const a=_t("Popper");return r(),d("form",{onSubmit:n[6]||(n[6]=Fe((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[s("div",p9,[s("div",h9,[s("label",_9,[E(a,{content:"Название оказываемой услуги"},{default:O(()=>[f9]),_:1}),w(" Название услуги "),v9]),$(s("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":n[0]||(n[0]=o=>e.inlineQueryForm.title=o),maxlength:"255","aria-describedby":"service-title",required:""},null,512),[[Z,e.inlineQueryForm.title]])]),s("div",b9,[e.categories?(r(),d("p",g9,[w(" Ранее созданные категории: "),(r(!0),d(B,null,oe(e.categories,o=>(r(),d("span",{onClick:l=>e.inlineQueryForm.category=o,class:"badge bg-primary mr-1 cursor-pointer"},v(o),9,y9))),256))])):c("",!0),s("label",$9,[E(a,null,{content:O(()=>[w9]),default:O(()=>[k9]),_:1}),w(" Категория услуги "),C9]),$(s("input",{type:"text",class:"form-control",placeholder:"Категория услуги","aria-label":"Категория услуги","onUpdate:modelValue":n[1]||(n[1]=o=>e.inlineQueryForm.category=o),maxlength:"255","aria-describedby":"service-category",required:""},null,512),[[Z,e.inlineQueryForm.category]])]),s("div",F9,[s("label",T9,[E(a,null,{content:O(()=>[S9]),default:O(()=>[D9]),_:1}),w(" Описание услуги "),P9,e.inlineQueryForm.description?(r(),d("small",O9," Длина текста "+v(e.inlineQueryForm.description.length)+" / 255",1)):c("",!0)]),$(s("textarea",{type:"text",class:"form-control",placeholder:"Описание услуги","aria-label":"Описание услуги",maxlength:"255","onUpdate:modelValue":n[2]||(n[2]=o=>e.inlineQueryForm.description=o),"aria-describedby":"service-description",required:""},`
                    `,512),[[Z,e.inlineQueryForm.description]])]),s("div",A9,[s("label",M9,[E(a,{content:"Цена оказываемой услуги"},{default:O(()=>[j9]),_:1}),w(" Цена услуги, руб "),q9]),$(s("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":n[3]||(n[3]=o=>e.inlineQueryForm.price=o),"aria-describedby":"price",required:""},null,512),[[Z,e.inlineQueryForm.price]])]),s("div",z9,[s("label",R9,[E(a,{content:"Цена скидки на оказываемую услугу"},{default:O(()=>[U9]),_:1}),w(" Цена скидки на услугу, руб "),V9]),$(s("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":n[4]||(n[4]=o=>e.inlineQueryForm.discount_price=o),"aria-describedby":"price",required:""},null,512),[[Z,e.inlineQueryForm.discount_price]])]),s("div",Y9,[s("label",I9,[E(a,null,{content:O(()=>[x9]),default:O(()=>[B9]),_:1}),w(" Изображение к услуге "),N9]),E(gt,{"need-photo":!0,selected:e.inlineQueryForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),s("div",E9,[s("div",Q9,[$(s("input",{class:"form-check-input","onUpdate:modelValue":n[5]||(n[5]=o=>e.inlineQueryForm.need_prepayment=o),type:"checkbox",id:"need_prepayment"},null,512),[[De,e.inlineQueryForm.need_prepayment]]),L9])])]),s("div",H9,[s("div",W9,[s("button",K9,[e.inlineQueryForm.id===null?(r(),d("span",X9,"Создать услугу")):(r(),d("span",G9,"Обновить услугу"))])])])],32)}}}),ez=s("h1",null,"Inline Query",-1),tz={props:["bot"],data(){return{selectedInlineQuery:null}},mounted(){this.loadInlineQueries()},methods:{selectInlineQuery(t){this.selectedInlineQuery=t},loadInlineQueries(){this.$store.dispatch("loadInlineQueries",{dataObject:{bot_id:this.bot.id||null}}).then(t=>{this.categories=t})}}},sz=Object.assign(tz,{__name:"InlineQuery",setup(t){return(e,n)=>(r(),d(B,null,[ez,e.selectedInlineQuery?(r(),H(J9,{key:0,bot:t.bot,"inline-query":e.selectedInlineQuery},null,8,["bot","inline-query"])):c("",!0)],64))}}),nz={props:["code","bot"],data(){return{step:0,load:!1,need_reset:!1,need_cashback:!1,need_slots:!1,promoCodeForm:{id:null,code:null,description:null,slot_amount:0,cashback_amount:0,max_activation_count:1,is_active:!1}}},computed:{getSelf(){return window.profile}},watch:{promoCodeForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.code&&this.$nextTick(()=>{this.promoCodeForm={id:this.code.id||null,description:this.code.description||null,code:this.code.code||null,slot_amount:this.code.slot_amount||0,cashback_amount:this.code.cashback_amount||0,max_activation_count:this.code.max_activation_count||1,is_active:this.code.is_active||!1},this.promoCodeForm.slot_amount>0&&(this.need_slots=!0),this.promoCodeForm.cashback_amount>0&&(this.need_slots=!0)})},methods:{submitForm(){let t=new FormData;Object.keys(this.promoCodeForm).forEach(e=>{const n=this.promoCodeForm[e]||"";typeof n=="object"?t.append(e,JSON.stringify(n)):t.append(e,n)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storePromoCodes",{promoCodeForm:t}).then(e=>{this.promoCodeForm={id:null,code:null,description:null,slot_amount:0,cashback_amount:0,max_activation_count:1,is_active:!1},this.$emit("callback",e.data),this.$notify("Промокод успешно создан")}).catch(e=>{this.$notify("Ошибка создания промокода")})}}},oz={class:"row"},az={class:"col-12 mb-3"},lz={class:"form-label",id:"quiz-title"},iz=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),rz=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),dz={class:"col-12 mb-3"},uz={class:"form-label",id:"quiz-description"},cz=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),mz=s("div",null," Краткая информация о назначении промокода ",-1),pz=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),hz={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},_z={class:"col-12 mb-3"},fz={class:"form-check"},vz=s("label",{class:"form-check-label",for:"is_active"}," Доступен для активации ",-1),bz={class:"col-12 mb-3"},gz={class:"form-label",id:"promoCodeForm-max_activation_count"},yz=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$z=s("div",null," Максимальное число активация кода ",-1),kz=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wz={class:"col-12 mb-3"},Cz={class:"form-check"},Fz=s("label",{class:"form-check-label",for:"promoCodeForm-cashback_amount"}," Нужно начислить CashBack по промокоду ",-1),Tz={key:0,class:"col-12 mb-3"},Dz={class:"form-label",id:"quiz-time_limit"},Sz=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Pz=s("div",null," Сколько % нужно ответить чтоб пройти ",-1),Oz=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Az={key:1,class:"col-12 mb-3"},Mz={class:"form-check"},jz=s("label",{class:"form-check-label",for:"promoCodeForm-need_slots"}," Нужны слоты для активации ",-1),qz={key:2,class:"col-12 mb-3"},zz={class:"form-label",id:"promoCodeForm-slot_amount"},Rz=s("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Uz=s("div",null," Укажите количество слотов, которые получит пользователь при активации (внимание, доступно только для администраторов) ",-1),Vz=s("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Yz={class:"row"},Iz={class:"col-12"},Bz={type:"submit",class:"btn btn-outline-success w-100 p-3"},xz={key:0},Nz={key:1};function Ez(t,e,n,a,o,l){const i=_t("Popper");return r(),d("form",{onSubmit:e[8]||(e[8]=Fe((...u)=>l.submitForm&&l.submitForm(...u),["prevent"])),class:"py-3"},[s("div",oz,[s("div",az,[s("label",lz,[E(i,{content:"Название вашего квиза"},{default:O(()=>[iz]),_:1}),w(" Промокод (вписать или сгенерировать) "),rz]),$(s("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":e[0]||(e[0]=u=>o.promoCodeForm.code=u),maxlength:"255","aria-describedby":"quiz-title",required:""},null,512),[[Z,o.promoCodeForm.code]])]),s("div",dz,[s("label",uz,[E(i,null,{content:O(()=>[mz]),default:O(()=>[cz]),_:1}),w(" Назначение промокода "),pz,o.promoCodeForm.description?(r(),d("small",hz," Длина текста "+v(o.promoCodeForm.description.length)+"/255",1)):c("",!0)]),$(s("textarea",{class:"form-control",placeholder:"Описание промокода","aria-label":"Описание промокода",maxlength:"255","onUpdate:modelValue":e[1]||(e[1]=u=>o.promoCodeForm.description=u),"aria-describedby":"quiz-description",required:""},`
                    `,512),[[Z,o.promoCodeForm.description]])]),s("div",_z,[s("div",fz,[$(s("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=u=>o.promoCodeForm.is_active=u),type:"checkbox",id:"is_active"},null,512),[[De,o.promoCodeForm.is_active]]),vz])]),s("div",bz,[s("label",gz,[E(i,null,{content:O(()=>[$z]),default:O(()=>[yz]),_:1}),w(" Количество активация кода "),kz]),$(s("input",{type:"number",class:"form-control",placeholder:"Число попыток","aria-label":"Число попыток",step:"1",min:"1","onUpdate:modelValue":e[3]||(e[3]=u=>o.promoCodeForm.max_activation_count=u),"aria-describedby":"promoCodeForm-max_activation_count",required:""},null,512),[[Z,o.promoCodeForm.max_activation_count]])]),s("div",wz,[s("div",Cz,[$(s("input",{class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=u=>o.need_cashback=u),type:"checkbox",id:"promoCodeForm-cashback_amount"},null,512),[[De,o.need_cashback]]),Fz])]),o.need_cashback?(r(),d("div",Tz,[s("label",Dz,[E(i,null,{content:O(()=>[Pz]),default:O(()=>[Sz]),_:1}),w(" Сколько CashBack начислить по промокоду? "),Oz]),$(s("input",{type:"number",class:"form-control",placeholder:"Процент для победы","aria-label":"Процент для победы",step:"1",min:"0","onUpdate:modelValue":e[5]||(e[5]=u=>o.promoCodeForm.cashback_amount=u),"aria-describedby":"promoCodeForm-cashback_amount",required:""},null,512),[[Z,o.promoCodeForm.cashback_amount]])])):c("",!0),l.getSelf.is_admin?(r(),d("div",Az,[s("div",Mz,[$(s("input",{class:"form-check-input","onUpdate:modelValue":e[6]||(e[6]=u=>o.need_slots=u),type:"checkbox",id:"promoCodeForm-need_slots"},null,512),[[De,o.need_slots]]),jz])])):c("",!0),o.need_slots?(r(),d("div",qz,[s("label",zz,[E(i,null,{content:O(()=>[Uz]),default:O(()=>[Rz]),_:1}),w(" Сколько нужно добавить слотов? "),Vz]),$(s("input",{type:"number",class:"form-control",placeholder:"Количество слотов","aria-label":"Количество слотов",step:"1",min:"0","onUpdate:modelValue":e[7]||(e[7]=u=>o.promoCodeForm.slot_amount=u),"aria-describedby":"promoCodeForm-slot_amount",required:""},null,512),[[Z,o.promoCodeForm.slot_amount]])])):c("",!0)]),s("div",Yz,[s("div",Iz,[s("button",Bz,[o.promoCodeForm.id==null?(r(),d("span",xz,"Создать промокод")):(r(),d("span",Nz,"Обновить промокод"))])])])],32)}const zo=Ut(nz,[["render",Ez]]),Qz={class:"row py-2"},Lz={class:"col-12"},Hz={class:"input-group mb-3"},Wz={class:"col-12"},Kz={key:0,class:"table"},Xz=s("th",{scope:"col",class:"cursor-pointer"},"Число активаций",-1),Gz=s("th",{scope:"col"},"Действие",-1),Zz={scope:"row"},Jz=["onClick"],eR={key:0},tR={key:0,class:"fa-solid fa-chevron-down text-success"},sR={key:1,class:"fa-solid fa-xmark text-danger"},nR={key:0,class:"dropdown"},oR=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-ellipsis"})],-1),aR={class:"dropdown-menu"},lR={key:0},iR=["onClick"],rR={key:1},dR=s("div",{class:"alert alert-warning alert-dismissible fade show",role:"alert"},[s("strong",null,"Внимание!"),w(" Вы еще не добавили ни одного промокода! "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})],-1),uR={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},cR={class:"d-flex justify-content-center mb-3"},mR={alt:"",width:"100",height:"100"},pR=s("h1",{class:"text-body-emphasis"},"Создание промокода",-1),hR=s("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Промокод - это инструмент мотивации пользователей пользоваться вашим сервисом. Он позволяет клиентам получать некоторые бонусы за активацию кода, а вы в свою очередь будете видеть статистику активация прмокода. ",-1),_R={class:"d-inline-flex gap-2 mb-5"},fR=s("a",{href:"#",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),vR={key:0,class:"col-12"},bR={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,codes:[],search:null,paginate_object:null}},computed:{...xe(["getPromoCodes","getPromoCodesPaginateObject"]),getSelf(){return window.profile}},mounted(){this.loadPromoCodes()},methods:{removeQuiz(t){this.loading=!0,this.$store.dispatch("removePromoCodes",{promoCodeId:t}).then(e=>{this.loading=!1,this.loadPromoCodes(0),this.$notify("Промокод успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления промокода")})},createPromoCode(){this.$emit("create")},nextPromoCodes(t){this.loadPromoCodes(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadPromoCodes(0)},loadPromoCodes(t=0){this.loading=!0,this.$store.dispatch("loadPromoCodes",{dataObject:{bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.codes=this.getPromoCodes,this.paginate_object=this.getPromoCodesPaginateObject}).catch(()=>{this.loading=!1})}}},gR=Object.assign(bR,{__name:"PromoCodesTable",setup(t){return(e,n)=>{const a=hs("lazy");return r(),d("div",Qz,[s("div",Lz,[s("div",Hz,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск кода","aria-label":"Поиск кода","onUpdate:modelValue":n[0]||(n[0]=o=>e.search=o),"aria-describedby":"promocode-search-and-filter"},null,512),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[1]||(n[1]=o=>e.loadPromoCodes(0)),type:"button",id:"promocode-search-and-filter"},"Найти ")])]),s("div",Wz,[e.codes.length>0?(r(),d("table",Kz,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=o=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[3]||(n[3]=o=>e.loadAndOrder("code"))},"Код"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[4]||(n[4]=o=>e.loadAndOrder("description"))},"Описание"),e.getSelf.is_admin?(r(),d("th",{key:0,scope:"col",class:"cursor-pointer",onClick:n[5]||(n[5]=o=>e.loadAndOrder("slot_amount"))},"Число слотов ")):c("",!0),s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=o=>e.loadAndOrder("cashback_amount"))},"Величина CashBack-а, руб "),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=o=>e.loadAndOrder("max_activation_count"))},"Максимальное число активаций "),Xz,s("th",{scope:"col",class:"cursor-pointer",onClick:n[8]||(n[8]=o=>e.loadAndOrder("is_active"))},"Активный"),Gz])]),s("tbody",null,[(r(!0),d(B,null,oe(e.codes,(o,l)=>(r(),d("tr",{class:j({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[s("th",Zz,v(o.id),1),s("td",{onClick:i=>e.selectEvent(o)},v(o.code||"Не указано"),9,Jz),s("td",null,v(o.description||"Не указано"),1),e.getSelf.is_admin?(r(),d("td",eR,v(o.slot_amount),1)):c("",!0),s("td",null,v(o.cashback_amount),1),s("td",null,v(o.max_activation_count),1),s("td",null,v(o.current_activation_count||0),1),s("td",null,[o.is_active?(r(),d("i",tR)):(r(),d("i",sR))]),s("td",null,[o.id?(r(),d("div",nR,[oR,s("ul",aR,[o.deleted_at==null?(r(),d("li",lR,[s("a",{class:"dropdown-item",onClick:i=>e.removeQuiz(o.id),href:"javascript:void(0)"},"Удалить",8,iR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("div",rR,[dR,s("div",uR,[s("div",cR,[$(s("img",mR,null,512),[[a,"../images/icon.png"]])]),pR,hR,s("div",_R,[s("button",{onClick:n[9]||(n[9]=(...o)=>e.createPromoCode&&e.createPromoCode(...o)),class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"}," Добавить "),fR])])]))]),e.codes.length>0?(r(),d("div",vR,[e.paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextPromoCodes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0)])}}}),yR={key:0,class:"py-2"},$R={class:"row"},kR={class:"col-12"},wR={key:1,class:"py-2"},CR={class:"row"},FR={class:"col-12"},TR={key:2,class:"py-2"},DR={class:"row"},SR={class:"col-12"},PR={class:"nav nav-tabs justify-content-center"},OR={key:0,class:"row py-3"},AR={class:"col-12"},MR={key:1,class:"row py-3"},jR=s("div",{class:"col-12 py-3"},[s("h4",null,"Статистика")],-1),qR=[jR],zR={props:["bot"],data(){return{part:0,tab:0,selectedPromoCode:null,loadForm:!1,loadTable:!1}},methods:{callbackForm(){this.loadTable=!0,this.selectedPromoCode=null,this.part=0,this.$nextTick(()=>{this.loadTable=!1})},createPromoCode(){this.part=2},selectPromoCode(t){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedPromoCode=t,this.part=1,this.tab=0})}}},RR=Object.assign(zR,{__name:"PromoCodes",setup(t){return(e,n)=>(r(),d(B,null,[e.part===0?(r(),d("div",yR,[s("div",$R,[s("div",kR,[s("button",{type:"button",onClick:n[0]||(n[0]=(...a)=>e.createPromoCode&&e.createPromoCode(...a)),class:"btn btn-primary"}," Создать новый промокод ")])]),e.loadTable?c("",!0):(r(),H(gR,{key:0,onCreate:e.createPromoCode,onSelect:e.selectPromoCode,bot:t.bot},null,8,["onCreate","onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",wR,[s("div",CR,[s("div",FR,[s("button",{type:"button",onClick:n[1]||(n[1]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),H(zo,{key:0,onCallback:e.callbackForm,bot:t.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",TR,[s("div",DR,[s("div",SR,[s("button",{type:"button",onClick:n[2]||(n[2]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),s("ul",PR,[s("li",{class:"nav-item",onClick:n[3]||(n[3]=a=>e.tab=0)},[s("a",{class:j(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о Промокоде",2)]),s("li",{class:"nav-item",onClick:n[4]||(n[4]=a=>e.tab=1)},[s("a",{class:j(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Статистика использования",2)])]),e.tab===0?(r(),d("div",OR,[s("div",AR,[e.loadForm?c("",!0):(r(),H(zo,{key:0,onCallback:e.callbackForm,code:e.selectedPromoCode,bot:t.bot},null,8,["onCallback","code","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",MR,qR)):c("",!0)])):c("",!0)],64))}});const UR={class:"d-flex custom-dropdown justify-content-between align-items-center"},VR={class:"btn-group"},YR=s("i",{class:"fa-solid fa-info mr-2"},null,-1),IR=s("i",{class:"fa-solid fa-file mr-2"},null,-1),BR={key:0,class:"dropdown"},xR=s("button",{type:"button",class:"btn btn-primary dropdown-toggle text-primary p-2",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-screwdriver-wrench mr-2"})],-1),NR={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},ER=s("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1),QR=s("i",{class:"fa-solid fa-q mr-2"},null,-1),LR=s("i",{class:"fa-solid fa-q mr-2"},null,-1),HR=s("i",{class:"fa-solid fa-clipboard-list mr-2"},null,-1),WR=s("i",{class:"fa-solid fa-code mr-2"},null,-1),KR=s("i",{class:"fa-solid fa-keyboard mr-2"},null,-1),XR=s("i",{class:"fa-solid fa-scroll mr-2"},null,-1),GR=s("i",{class:"fa-solid fa-comment-dots mr-2"},null,-1),ZR=s("i",{class:"fa-solid fa-users mr-2"},null,-1),JR=s("i",{class:"fa-regular fa-newspaper mr-2"},null,-1),eU=s("i",{class:"fa-solid fa-list-check mr-2"},null,-1),tU=s("i",{class:"fa-solid fa-list-check mr-2"},null,-1),sU=s("i",{class:"fa-brands fa-shopify mr-2"},null,-1),nU=s("i",{class:"fa-brands fa-shopify mr-2"},null,-1),oU={key:0,class:"pb-5 mb-5"},aU={key:1,class:"pb-5 mb-5"},lU={key:2,class:"pb-5 mb-5"},iU={key:3,class:"pb-5 mb-5"},rU={key:4,class:"pb-5 mb-5"},dU={key:5,class:"pb-5 mb-5"},uU={key:6,class:"pb-5 mb-5"},cU={key:7,class:"pb-5 pt-2 mb-5"},mU={key:8,class:"pb-5 mb-5"},pU={key:9,class:"pb-5 mb-5 pt-2"},hU={key:10,class:"pb-5 mb-5"},_U={key:11,class:"pb-5 mb-5 pt-2"},fU={key:12,class:"pb-5 mb-5 pt-2"},vU={key:13,class:"pb-5 mb-5 pt-2"},bU={key:14,class:"row pb-5 mb-5"},gU={key:0,class:"col-12 col-md-12"},yU={key:15,class:"pb-5 mb-5"},$U={props:["bot"],data(){return{page:null,step:0,load:!1,loadPage:!1}},mounted(){this.setStep(localStorage.getItem("cashman_set_botform_step_index")||0)},methods:{hasRole(t){return window.hasRole(t)||!1},setStep(t){this.step=parseInt(t),localStorage.setItem("cashman_set_botform_step_index",t)},pageListCallback(t){this.loadPage=!0,this.page=t,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(t){this.page=t,this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})},loadCurrentCompany(t=null){this.$store.dispatch("updateCurrentCompany",{company:t}).then(()=>{this.company=this.getCurrentCompany})},companyListCallback(t){this.load=!0,this.loadCurrentCompany(t),this.$nextTick(()=>{this.load=!1})}}},hY=Object.assign($U,{__name:"BotSection",setup(t){return(e,n)=>(r(),d(B,null,[s("div",UR,[s("div",VR,[s("button",{type:"button",class:j(["btn btn-primary text-primary",{"bg-primary text-white":e.step==0}]),onClick:n[0]||(n[0]=a=>e.setStep(0))},[YR,w("Информация о боте")],2),s("button",{type:"button",class:j(["btn btn-primary text-primary",{"bg-primary text-white":e.step==4}]),onClick:n[1]||(n[1]=a=>e.setStep(4))},[IR,w("Страницы (кнопки бота)")],2)]),e.hasRole("admin")?(r(),d("div",BR,[xR,s("ul",NR,[s("li",null,[s("a",{class:"dropdown-item",href:"#bot-appointments",onClick:n[2]||(n[2]=a=>e.setStep(13))},[ER,w("Запись на событие (прием)")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-quizzes",onClick:n[3]||(n[3]=a=>e.setStep(14))},[QR,w("Квизы")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-promo-codes",onClick:n[4]||(n[4]=a=>e.setStep(16))},[LR,w("Промокоды")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-inline-queries",onClick:n[5]||(n[5]=a=>e.setStep(15))},[HR,w("Встраиваемые запросы")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-custom-fields",onClick:n[6]||(n[6]=a=>e.setStep(10))},[WR,w("Настраиваемые поля")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-menu-template",onClick:n[7]||(n[7]=a=>e.setStep(1))},[KR,w("Все клавиатуры в боте")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-slugs",onClick:n[8]||(n[8]=a=>e.setStep(2))},[XR,w("Все скрипты в боте")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-dialogs",onClick:n[9]||(n[9]=a=>e.setStep(6))},[GR,w("Все диалоги в боте")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-users",onClick:n[10]||(n[10]=a=>e.setStep(3))},[ZR,w("Все пользователи в боте")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-news",onClick:n[11]||(n[11]=a=>e.setStep(9))},[JR,w(" Новостной канал")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-amo",onClick:n[12]||(n[12]=a=>e.setStep(7))},[eU,w(" AMO CRM")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-y-clients",onClick:n[13]||(n[13]=a=>e.setStep(12))},[tU,w(" YClients")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-shop",onClick:n[14]||(n[14]=a=>e.setStep(8))},[sU,w(" Магазин")])]),s("li",null,[s("a",{class:"dropdown-item",href:"#bot-media",onClick:n[15]||(n[15]=a=>e.setStep(11))},[nU,w(" Медиа файлы бота")])])])])):c("",!0)]),e.step===14?(r(),d("div",oU,[e.load?c("",!0):(r(),H(m9,{key:0,bot:t.bot},null,8,["bot"]))])):c("",!0),e.step===16?(r(),d("div",aU,[e.load?c("",!0):(r(),H(RR,{key:0,bot:t.bot},null,8,["bot"]))])):c("",!0),e.step===13?(r(),d("div",lU,[e.load?c("",!0):(r(),H(bP,{key:0,bot:t.bot},null,8,["bot"]))])):c("",!0),e.step===0?(r(),d("div",iU,[e.load?c("",!0):(r(),H(Ia,{key:0,bot:t.bot},null,8,["bot"]))])):c("",!0),e.step===15?(r(),d("div",rU,[e.load?c("",!0):(r(),H(sz,{key:0,bot:t.bot},null,8,["bot"]))])):c("",!0),e.step===7?(r(),d("div",dU,[e.load?c("",!0):(r(),H(nk,{key:0,data:t.bot.amo},null,8,["data"]))])):c("",!0),e.step===12?(r(),d("div",uU,[e.load?c("",!0):(r(),H(bk,{key:0,data:t.bot.y_clients},null,8,["data"]))])):c("",!0),e.step===11?(r(),d("div",cU,[e.load?c("",!0):(r(),H(V2,{key:0}))])):c("",!0),e.step===8?(r(),d("div",mU,[e.load?c("",!0):(r(),H(M$,{key:0}))])):c("",!0),e.step===10?(r(),d("div",pU,[e.load?c("",!0):(r(),H(l2,{key:0}))])):c("",!0),e.step===1?(r(),d("div",hU,[e.load?c("",!0):(r(),H(Cn,{key:0,"select-mode":!1}))])):c("",!0),e.step===6?(r(),d("div",_U,[e.load?c("",!0):(r(),H(Yo,{key:0}))])):c("",!0),e.step===2?(r(),d("div",fU,[e.load?c("",!0):(r(),H(wr,{key:0}))])):c("",!0),e.step===3?(r(),d("div",vU,[e.load?c("",!0):(r(),H(Ks,{key:0}))])):c("",!0),e.step===4?(r(),d("div",bU,[e.load?c("",!0):(r(),d("div",gU,[e.loadPage?c("",!0):(r(),H(q1,{key:0,page:e.page,onCallback:e.pageCallback},null,8,["page","onCallback"]))]))])):c("",!0),e.step===9?(r(),d("div",yU,[E(Oa)])):c("",!0)],64))}}),kU={key:0},wU={key:0,class:"row"},CU={class:"col-md-12"},FU=s("h4",null,"Боты в работе",-1),TU={class:"mb-0"},DU={class:"table mb-5"},SU=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"#"),s("th",{scope:"col"},"Домен"),s("th",{scope:"col"},"Название"),s("th",{scope:"col"},"Шаблон"),s("th",{scope:"col"},"Дата изменения"),s("th",{scope:"col"},"Действие")])],-1),PU={scope:"row"},OU=["onClick"],AU=["onClick"],MU={key:0,class:"badge bg-primary"},jU={key:1},qU={class:"d-flex"},zU=["onClick"],RU=s("i",{class:"fa-regular fa-star"},null,-1),UU=[RU],VU=["onClick"],YU=s("i",{class:"fa-solid fa-chevron-down"},null,-1),IU=[YU],BU=["onClick"],xU=s("i",{class:"fa-solid fa-chevron-up"},null,-1),NU=[xU],EU=s("hr",null,null,-1),QU={class:"row"},LU={class:"col-md-12 d-flex flex-column"},HU={class:"d-flex"},WU={class:"dropdown mr-2"},KU=s("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),XU={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},GU=["onClick"],ZU={class:"input-group mb-3"},JU={key:0,class:"mt-2"},eV={class:"badge bg-primary mr-1"},tV=["onClick"],sV=s("i",{class:"fa-solid fa-xmark"},null,-1),nV=[sV],oV={key:1,class:"row"},aV={class:"col-12"},lV=s("h4",null,"Все боты",-1),iV={class:"mb-0"},rV={class:"mb-0"},dV={key:2,class:"row"},uV={class:"col-12 mb-3"},cV={key:0,class:"col-12 mb-3"},mV={class:"table"},pV=s("th",{scope:"col"},"Действие",-1),hV={scope:"row"},_V=["onClick"],fV=["onClick"],vV={key:0,class:"badge bg-primary"},bV={key:1},gV={class:"d-flex"},yV=["onClick"],$V=s("i",{class:"fa-regular fa-star"},null,-1),kV=[$V],wV=["onClick"],CV=s("i",{class:"fa-regular fa-copy"},null,-1),FV=[CV],TV=["onClick"],DV=s("i",{class:"fa-solid fa-boxes-packing"},null,-1),SV=[DV],PV=["onClick"],OV=s("i",{class:"fa-solid fa-box-open"},null,-1),AV=[OV],MV=["onClick"],jV=s("i",{class:"fa-solid fa-trash-can text-white"},null,-1),qV=[jV],zV={class:"col-lg-4 col-12 mb-3"},RV={class:"card-body"},UV=["onClick"],VV={key:0,class:"badge bg-info"},YV={class:"card-footer d-flex"},IV=["onClick"],BV=s("i",{class:"fa-regular fa-star"},null,-1),xV=[BV],NV=["onClick"],EV=s("i",{class:"fa-regular fa-copy"},null,-1),QV=[EV],LV=["onClick"],HV=s("i",{class:"fa-solid fa-boxes-packing"},null,-1),WV=[HV],KV=["onClick"],XV=s("i",{class:"fa-solid fa-box-open"},null,-1),GV=[XV],ZV=["onClick"],JV=s("i",{class:"fa-solid fa-trash-can text-white"},null,-1),eY=[JV],tY={class:"col-12"},sY={key:3,class:"row"},nY=s("div",{class:"col-12"},[s("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),oY=[nY],aY={props:["companyId","editor"],data(){return{displayType:1,direction:"desc",order:"updated_at",filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],favorites:[],search:null,bots_paginate_object:null}},watch:{displayType:function(t,e){localStorage.setItem("cashman_set_botlist_display_type",this.displayType)},selectedFilters:{handler:function(t){this.loadBots()},deep:!0}},computed:{...xe(["getBots","getBotsPaginateObject","getCurrentCompany","getBotFavorites","inBotFav"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let t=[];return this.selectedFilters.forEach(e=>{switch(e.slug){case"active":this.bots.filter(n=>n.deleted_at==null).forEach(n=>{t.push(n)});break;case"archive":this.bots.filter(n=>n.deleted_at!=null).forEach(n=>{t.push(n)});break}}),this.search==null?t:t.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.selectFilter("active"),this.displayType=parseInt(localStorage.getItem("cashman_set_botlist_display_type")||0)},methods:{hasRole(t){return window.hasRole(t)||!1},loadBotsByIds(){if(this.getBotFavorites.length==0){this.favorites=[];return}this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:this.getBotFavorites}).then(t=>{this.loading=!1,this.favorites=t}).catch(()=>{this.loading=!1})},prepareFavorites(){this.$store.dispatch("loadBotFavs").then(t=>{this.loadBotsByIds()})},moveOrderFavBot(t,e){this.$store.dispatch("swapBotInFav",{id:t,direction:e}).then(n=>{this.loadBotsByIds()})},addToFavorite(t){if(this.inBotFav(t)){this.$store.dispatch("removeFromBotFavorites",t).then(e=>{this.$notify("Указанный бот успешно удален из избранного"),this.loadBotsByIds()});return}this.$store.dispatch("addBotToFavorites",t).then(e=>{this.$notify("Указанный бот успешно добавлен в избранное"),this.loadBotsByIds()})},duplicate(t){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:t,company_id:this.getCurrentCompany.id}}).then(e=>{let n=this.bots_paginate_object.meta.current_page||0;this.loadBots(n),this.$notify("Указанный бот успешно продублирован")})},addToArchive(t){this.$store.dispatch("removeBot",{botId:t}).then(e=>{let n=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(n),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(t){this.$store.dispatch("forceDeleteBot",{botId:t}).then(e=>{let n=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(n),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(t){this.$store.dispatch("restoreBot",{botId:t}).then(e=>{let n=this.bots_paginate_object.meta.current_page||0;this.loadBots(n),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(t){let e=this.filters.find(n=>n.slug===t);e&&this.selectedFilters.filter(n=>n.slug===t).length===0&&this.selectedFilters.push(e)},removeSelectedFilter(t){let e=this.selectedFilters.findIndex(n=>n.slug===t);this.selectedFilters.splice(e,1)},selectBot(t){this.$emit("callback",t),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(t){this.loadBots(t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(t=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(e=>e.slug)},page:t,size:20}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject,this.prepareFavorites()}).catch(()=>{this.loading=!1})}}},_Y=Object.assign(aY,{__name:"BotList",setup(t){return(e,n)=>e.show?(r(),d("div",kU,[e.favorites.length>0?(r(),d("div",wU,[s("div",CU,[FU,s("p",TU,"Количество ботов в работе "+v(e.favorites.length||0),1),s("table",DU,[SU,s("tbody",null,[(r(!0),d(B,null,oe(e.favorites,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",PU,v(a.id),1),s("td",{onClick:l=>e.selectBot(a)},[s("i",{class:j([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),w(" "+v(a.bot_domain||"Не указано"),1)],8,OU),s("td",{onClick:l=>e.selectBot(a)},v(a.title||"Не указано"),9,AU),s("td",null,[a.is_template?(r(),d("span",MU,v(a.template_description||"Не указано"),1)):(r(),d("span",jU,"Не является шаблоном"))]),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[s("div",qU,[s("button",{class:j(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},UU,10,zU),e.favorites.length>1?(r(),d("button",{key:0,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(a.id,1),title:"Переместить вниз"},IU,8,VU)):c("",!0),e.favorites.length>1?(r(),d("button",{key:1,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(a.id,0),title:"Переместить вверх"},NU,8,BU)):c("",!0)])])],2))),256))])]),EU])])):c("",!0),s("div",QU,[s("div",LU,[s("div",HU,[s("div",WU,[KU,s("ul",XU,[(r(!0),d(B,null,oe(e.filters,a=>(r(),d("li",null,[s("a",{class:"dropdown-item",onClick:o=>e.selectFilter(a.slug),href:"#filter"},[s("i",{class:j([a.icon,"mr-2"])},null,2),w(" "+v(a.name||"Не указано"),1)],8,GU)]))),256))])]),s("div",ZU,[$(s("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":n[0]||(n[0]=a=>e.search=a),onKeydown:n[1]||(n[1]=Pe((...a)=>e.loadBots&&e.loadBots(...a),["enter"])),"aria-describedby":"button-addon2"},null,544),[[Z,e.search]]),s("button",{class:"btn btn-outline-secondary",onClick:n[2]||(n[2]=(...a)=>e.loadBots&&e.loadBots(...a)),type:"button",id:"button-addon2"},"Найти ")])]),e.selectedFilters.length>0?(r(),d("p",JU,[(r(!0),d(B,null,oe(e.selectedFilters,a=>(r(),d("span",eV,[w(v(a.name||"не указан")+" ",1),s("a",{onClick:o=>e.removeSelectedFilter(a.slug),class:"ml-1 text-white",href:"#filter"},nV,8,tV)]))),256))])):c("",!0)])]),e.bots_paginate_object?(r(),d("div",oV,[s("div",aV,[lV,s("p",iV,"Количество найденных ботов "+v(e.bots_paginate_object.meta.total||0),1),s("p",rV,"Количество результатов на странице "+v(e.bots.length||0),1),s("p",null,[w(" Тип отображения списка: "),s("span",{onClick:n[3]||(n[3]=a=>e.displayType=0),class:j([{"bg-primary":e.displayType===0,"bg-secondary":e.displayType!==0},"badge cursor-pointer mr-2"])},"Карточки",2),s("span",{class:j([{"bg-primary":e.displayType===1,"bg-secondary":e.displayType!==1},"badge cursor-pointer mr-2"]),onClick:n[4]||(n[4]=a=>e.displayType=1)},"Таблица",2)])])])):c("",!0),e.bots.length>0?(r(),d("div",dV,[s("div",uV,[t.editor?c("",!0):(r(),d("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:n[5]||(n[5]=a=>e.selectBot(null))},"Создать нового бота "))]),e.displayType===1?(r(),d("div",cV,[s("table",mV,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:n[6]||(n[6]=a=>e.loadAndOrder("id"))},"#"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[7]||(n[7]=a=>e.loadAndOrder("bot_domain"))},"Домен"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[8]||(n[8]=a=>e.loadAndOrder("title"))},"Название"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[9]||(n[9]=a=>e.loadAndOrder("template_description"))},"Шаблон"),s("th",{scope:"col",class:"cursor-pointer",onClick:n[10]||(n[10]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),pV])]),s("tbody",null,[(r(!0),d(B,null,oe(e.bots,(a,o)=>(r(),d("tr",{class:j({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[s("th",hV,v(a.id),1),s("td",{onClick:l=>e.selectBot(a)},[s("i",{class:j([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),w(" "+v(a.bot_domain||"Не указано"),1)],8,_V),s("td",{onClick:l=>e.selectBot(a)},v(a.title||"Не указано"),9,fV),s("td",null,[a.is_template?(r(),d("span",vV,v(a.template_description||"Не указано"),1)):(r(),d("span",bV,"Не является шаблоном"))]),s("td",null,v(e.$filters.current(a.updated_at)),1),s("td",null,[s("div",gV,[s("button",{class:j(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},kV,10,yV),s("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(a.id),title:"Дублировать"},FV,8,wV),a.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(a.id),title:"В архив"},SV,8,TV)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(a.id),title:"Из архива"},AV,8,PV)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(a.id),title:"Удалить на совсем"},qV,8,MV)):c("",!0)])])],2))),256))])])])):c("",!0),e.displayType===0?(r(!0),d(B,{key:1},oe(e.bots,(a,o)=>(r(),d("div",zV,[s("div",{class:j(["card w-100",{"border-info":a.deleted_at==null,"border-secondary":a.deleted_at!=null}])},[s("div",RV,[s("p",{class:"d-flex justify-content-between",onClick:l=>e.selectBot(a),style:{"word-wrap":"break-word"}},[s("span",null,[s("i",{class:j([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),w(" "+v(a.bot_domain||"Не указано"),1)]),a.is_template?(r(),d("span",VV,v(a.template_description||"Шаблон без названия"),1)):c("",!0)],8,UV)]),s("div",YV,[s("button",{class:j(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},xV,10,IV),s("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(a.id),title:"Дублировать"},QV,8,NV),a.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(a.id),title:"В архив"},WV,8,LV)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(a.id),title:"Из архива"},GV,8,KV)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(a.id),title:"Удалить на совсем"},eY,8,ZV)):c("",!0)])],2)]))),256)):c("",!0),s("div",tY,[e.bots_paginate_object?(r(),H(Je,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",sY,oY))])):c("",!0)}});export{_Y as _,hY as a,q1 as b,Yo as c};
