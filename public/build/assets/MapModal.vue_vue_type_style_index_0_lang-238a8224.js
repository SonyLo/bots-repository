var Z=Object.defineProperty;var H=(o,a,s)=>a in o?Z(o,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[a]=s;var O=(o,a,s)=>(H(o,typeof a!="symbol"?a+"":a,s),s);import{bD as T,aF as b,A as v,D as t,b4 as x,O as M,z as I,aS as S,aT as E,P as u,bw as h,by as R,N as B}from"./index.es-cc022547.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{r as J}from"./app-b9bc131f.js";const W={data(){return{product:null}},computed:{...T(["inCart","cartTotalCount","inFav"]),currentBot(){return window.currentBot},self(){return window.self},currentPrice(){return this.product.current_price},checkInCart(){return this.inCart(this.product.id)}},mounted(){window.addEventListener("add-to-cart",o=>{this.product=o.detail.product||null,this.product.in_favorite=this.inFav(this.product.id),this.$nextTick(()=>{$("#menu-product-info").showMenu()})})},methods:{removeFromFavorites(){this.product.in_favorite=!1,this.$store.dispatch("removeFromFavorites",this.product.id).then(()=>{this.$botNotification.notification("Избранное","Успешно удалено из избранного!")})},addToFavorite(){this.product.in_favorite=!0,this.$store.dispatch("addToFavorites",this.product).then(()=>{this.$botNotification.notification("Избранное","Успешно добавлено в избранное!")})},goToProduct(){this.$router.push({name:"product",params:{productId:this.product.id}}),$("#menu-product-info").hideMenu()},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.product):this.$store.dispatch("incQuantity",this.product.id),this.$botNotification.notification("Добавление товара","Успешно добавлено в корзину!")},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.product.id):this.$store.dispatch("decQuantity",this.product.id),this.$botNotification.notification("Добавление товара","Товар удален!")}}},X={id:"menu-product-info",class:"menu menu-box-bottom menu-box-detached rounded-m d-block",style:{height:"220px",display:"block"},"data-menu-effect":"menu-over"},tt={key:0,class:"w-100"},et={class:"text-center font-700 mt-3 pt-1 px-4"},ot={key:0,class:"row text-center mr-2 ml-2 mb-3"},at={class:"col-4 mb-n2"},st=t("i",{class:"fa-solid fa-minus font-22"},null,-1),nt=[st],it={class:"col-4 mb-n2 d-flex justify-content-center align-items-center"},ct={class:"font-22"},lt={class:"col-4 mb-n2"},rt=t("i",{class:"fa-solid fa-plus font-22"},null,-1),dt=[rt],ut={key:1,class:"row text-center mr-2 ml-2 mb-3"},ht={class:"col-12 mb-n2"},ft=t("i",{class:"fa-solid fa-cart-plus font-12"},null,-1),pt={class:"row text-center mr-2 ml-2 mb-3"},_t={class:"col-12 mb-n2"},mt=t("i",{class:"fa-regular fa-heart font-12"},null,-1),gt=t("i",{class:"fa-solid fa-heart font-12"},null,-1);function bt(o,a,s,r,n,i){return b(),v("div",X,[n.product?(b(),v("div",tt,[t("h4",et,x(n.product.title||"Нет заголовка"),1),i.checkInCart>0?(b(),v("div",ot,[t("div",at,[t("button",{onClick:a[0]||(a[0]=(...e)=>i.decProductCart&&i.decProductCart(...e)),type:"button",class:"btn p-3 w-100 bg-red1-dark rounded-s shadow-l"},nt)]),t("div",it,[t("strong",ct,x(i.checkInCart),1)]),t("div",lt,[t("button",{type:"button",onClick:a[1]||(a[1]=(...e)=>i.incProductCart&&i.incProductCart(...e)),class:"btn p-3 w-100 bg-highlight rounded-s shadow-l"},dt)])])):(b(),v("div",ut,[t("div",ht,[t("button",{type:"button",onClick:a[2]||(a[2]=(...e)=>i.incProductCart&&i.incProductCart(...e)),class:"btn p-3 bg-highlight rounded-s shadow-l w-100"},[ft,M(" В корзину "),t("strong",null,x(i.currentPrice)+"₽",1)])])])),t("div",pt,[t("div",_t,[n.product.in_favorite?(b(),v("button",{key:1,type:"button",onClick:a[4]||(a[4]=(...e)=>i.removeFromFavorites&&i.removeFromFavorites(...e)),class:"btn p-3 bg-highlight rounded-s shadow-l w-100"},[gt,M(" Убрать из избранного ")])):(b(),v("button",{key:0,type:"button",onClick:a[3]||(a[3]=(...e)=>i.addToFavorite&&i.addToFavorite(...e)),class:"btn p-3 bg-red2-dark rounded-s shadow-l w-100"},[mt,M(" В избранное ")]))])])])):I("",!0)])}const qo=Y(W,[["render",bt]]),vt={data(){return{isActive:!1}},computed:{...T(["cartTotalCount","favoritesCount"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},currentBot(){return window.currentBot}},mounted(){}},yt={id:"menu-main",class:"menu menu-box-right menu-box-detached rounded-m",style:{width:"260px",display:"block",height:"100vh","overflow-y":"scroll"}},$t={class:"menu-header"},kt=B('<a href="#" data-toggle-theme="" class="border-right-0"><i class="fa font-12 color-yellow1-dark fa-lightbulb"></i></a><a href="#" data-menu="menu-highlights" class="border-right-0"><i class="fa font-12 color-green1-dark fa-brush"></i></a><a href="#" data-menu="menu-share" class="border-right-0"><i class="fa font-12 color-red2-dark fa-share-alt"></i></a>',3),xt=t("i",{class:"fa color-blue2-dark fa-cog font-12"},null,-1),wt=t("a",{class:"border-right-0 close-menu"},[t("i",{class:"fa font-12 color-red2-dark fa-times"})],-1),Ct={class:"menu-logo text-center"},jt={href:"#"},Ot={class:"rounded-circle bg-highlight",width:"80"},Gt={class:"p-3 font-800 font-24 text-uppercase"},Mt={class:"font-11 mt-n2"},Bt=t("i",{class:"fa-solid fa-location-dot mr-2 text-danger"},null,-1),At={class:"menu-items"},It=t("h5",{class:"text-uppercase opacity-20 font-12 pl-3"},"Главное меню",-1),Tt=t("i",{class:"fa-solid fa-house-chimney",style:{color:"lightblue"}},null,-1),Yt=t("span",null,"Главная",-1),Nt=t("i",{class:"fa fa-circle"},null,-1),Pt=t("i",{class:"fa-solid fa-basket-shopping"},null,-1),Ft=t("span",null,"Корзина",-1),zt={key:0,class:"badge bg-highlight color-white"},St=t("i",{class:"fa fa-circle"},null,-1),Et=t("i",{class:"fa-solid fa-pizza-slice",style:{color:"orangered"}},null,-1),Rt=t("span",null,"Продукция",-1),Lt=t("i",{class:"fa fa-circle"},null,-1),qt=t("i",{class:"fa-solid fa-star",style:{color:"orange"}},null,-1),Dt=t("span",null,"Избранное",-1),Ut={key:0,class:"badge bg-highlight color-white"},Vt=t("i",{class:"fa fa-circle"},null,-1),Qt=t("i",{class:"fa-regular fa-clock",style:{color:"#842029"}},null,-1),Kt=t("span",null,"История заказов",-1),Zt=t("strong",{class:"badge bg-highlight color-white"},"3",-1),Ht=t("i",{class:"fa fa-circle"},null,-1),Jt=t("i",{class:"fa-solid fa-people-group",style:{color:"#6f42c1"}},null,-1),Wt=t("span",null,"Наша команда",-1),Xt=t("i",{class:"fa fa-circle"},null,-1),te=t("i",{class:"fa-solid fa-star",style:{color:"orange"}},null,-1),ee=t("span",null,"О нас",-1),oe=t("i",{class:"fa fa-circle"},null,-1),ae=t("i",{class:"fa-regular fa-circle-question",style:{color:"green"}},null,-1),se=t("span",null,"Правила сервиса",-1),ne=t("i",{class:"fa fa-circle"},null,-1),ie={href:"#",class:"close-menu"},ce={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x","data-feather-line":"3","data-feather-size":"16","data-feather-color":"red2-dark","data-feather-bg":"red2-fade-dark",style:{width:"16px",height:"16px"}},le=t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),re=t("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),de=[le,re],ue=t("span",null,"Закрыть",-1),he=t("i",{class:"fa fa-circle"},null,-1),fe=B('<div class="text-center pt-2"><a href="#" class="icon icon-xs mr-1 rounded-s bg-facebook"><i class="fab fa-facebook"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-twitter"><i class="fab fa-twitter"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-instagram"><i class="fab fa-instagram"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-linkedin"><i class="fab fa-linkedin-in"></i></a><a href="#" class="icon icon-xs rounded-s bg-whatsapp"><i class="fab fa-whatsapp"></i></a><p class="mb-0 pt-3 font-10 opacity-30">Copyright <span class="copyright-year"></span> Enabled. All rights reserved</p></div>',1);function pe(o,a,s,r,n,i){const e=S("router-link"),f=E("lazy");return b(),v("div",yt,[t("div",$t,[kt,u(e,{class:"close-menu",tag:"a",to:"/settings"},{default:h(()=>[xt]),_:1}),wt]),t("div",Ct,[t("a",jt,[R(t("img",Ot,null,512),[[f,i.logo]])]),t("h1",Gt,x(i.currentBot.company.title||i.currentBot.bot_domain||"CashMan:Shopify"),1),t("p",Mt,[Bt,M(x(i.currentBot.company.address||"Без описания"),1)])]),t("div",At,[It,u(e,{id:"nav-home","active-class":"nav-item-active",tag:"a",to:"/home"},{default:h(()=>[Tt,Yt,Nt]),_:1}),u(e,{id:"nav-basket","active-class":"nav-item-active",tag:"a",to:"/basket"},{default:h(()=>[Pt,Ft,o.cartTotalCount>0?(b(),v("strong",zt,x(o.cartTotalCount),1)):I("",!0),St]),_:1}),u(e,{id:"nav-products","active-class":"nav-item-active",tag:"a",to:"/products"},{default:h(()=>[Et,Rt,Lt]),_:1}),u(e,{id:"nav-favorites","active-class":"nav-item-active",tag:"a",to:"/favorites"},{default:h(()=>[qt,Dt,o.favoritesCount>0?(b(),v("strong",Ut,x(o.favoritesCount),1)):I("",!0),Vt]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/history"},{default:h(()=>[Qt,Kt,Zt,Ht]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/our-team"},{default:h(()=>[Jt,Wt,Xt]),_:1}),u(e,{id:"nav-contact-us","active-class":"nav-item-active",tag:"a",to:"/contact-us"},{default:h(()=>[te,ee,oe]),_:1}),u(e,{id:"nav-terms","active-class":"nav-item-active",tag:"a",to:"/terms"},{default:h(()=>[ae,se,ne]),_:1}),t("a",ie,[(b(),v("svg",ce,de)),ue,he])]),fe])}const Do=Y(vt,[["render",pe]]),_e={data(){return{isActive:!1}},computed:{...T(["cartTotalCount","favoritesCount"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},currentBot(){return window.currentBot}},mounted(){}},me={id:"menu-admin-main",class:"menu menu-box-right menu-box-detached rounded-m",style:{width:"260px",display:"block",height:"100vh","overflow-y":"scroll"}},ge={class:"menu-header"},be=B('<a href="#" data-toggle-theme="" class="border-right-0"><i class="fa font-12 color-yellow1-dark fa-lightbulb"></i></a><a href="#" data-menu="menu-highlights" class="border-right-0"><i class="fa font-12 color-green1-dark fa-brush"></i></a><a href="#" data-menu="menu-share" class="border-right-0"><i class="fa font-12 color-red2-dark fa-share-alt"></i></a>',3),ve=t("i",{class:"fa color-blue2-dark fa-cog font-12"},null,-1),ye=t("a",{class:"border-right-0 close-menu"},[t("i",{class:"fa font-12 color-red2-dark fa-times"})],-1),$e={class:"menu-logo text-center"},ke={href:"#"},xe={class:"rounded-circle bg-highlight",width:"80"},we=t("h1",{class:"p-3 font-800 font-24 text-uppercase"},"Админ.панель",-1),Ce={class:"font-11 mt-n2"},je={class:"menu-items"},Oe=t("h5",{class:"text-uppercase opacity-20 font-12 pl-3"},"Главное меню",-1),Ge=t("i",{class:"fa-solid fa-house-chimney",style:{color:"lightblue"}},null,-1),Me=t("span",null,"Главная",-1),Be=t("i",{class:"fa fa-circle"},null,-1),Ae=t("i",{class:"fa-solid fa-briefcase",style:{color:"saddlebrown"}},null,-1),Ie=t("span",null,"Рабочий день",-1),Te=t("i",{class:"fa fa-circle"},null,-1),Ye=t("i",{class:"fa-solid fa-ranking-star",style:{color:"orangered"}},null,-1),Ne=t("span",null,"Статистика",-1),Pe=t("i",{class:"fa fa-circle"},null,-1),Fe=t("i",{class:"fa-brands fa-adversal",style:{color:"orange"}},null,-1),ze=t("span",null,"Реклама",-1),Se=t("i",{class:"fa fa-circle"},null,-1),Ee=t("i",{class:"fa-regular fa-clock",style:{color:"#842029"}},null,-1),Re=t("span",null,"История заказов",-1),Le=t("strong",{class:"badge bg-highlight color-white"},"3",-1),qe=t("i",{class:"fa fa-circle"},null,-1),De=t("i",{class:"fa-solid fa-bolt",style:{color:"#6f42c1"}},null,-1),Ue=t("span",null,"События",-1),Ve=t("i",{class:"fa fa-circle"},null,-1),Qe=t("i",{class:"fa-regular fa-building",style:{color:"#ff5454"}},null,-1),Ke=t("span",null,"Настройка компании",-1),Ze=t("i",{class:"fa fa-circle"},null,-1),He=t("i",{class:"fa-solid fa-robot",style:{color:"#00ff38"}},null,-1),Je=t("span",null,"Настройка бота",-1),We=t("i",{class:"fa fa-circle"},null,-1),Xe=t("i",{class:"fa-solid fa-file-lines",style:{color:"#3f0909"}},null,-1),to=t("span",null,"Страницы бота",-1),eo=t("i",{class:"fa fa-circle"},null,-1),oo=t("i",{class:"fa-solid fa-scroll",style:{color:"#2963fa"}},null,-1),ao=t("span",null,"Скрипты бота",-1),so=t("i",{class:"fa fa-circle"},null,-1),no=t("i",{class:"fa-regular fa-comment-dots",style:{color:"#d2ab65"}},null,-1),io=t("span",null,"Диалоги бота",-1),co=t("i",{class:"fa fa-circle"},null,-1),lo=t("i",{class:"fa-regular fa-keyboard",style:{color:"#1e5c67"}},null,-1),ro=t("span",null,"Клавиатуры бота",-1),uo=t("i",{class:"fa fa-circle"},null,-1),ho=t("i",{class:"fa-solid fa-people-roof",style:{color:"#00b47a"}},null,-1),fo=t("span",null,"AMO CRM",-1),po=t("i",{class:"fa fa-circle"},null,-1),_o=t("i",{class:"fa-solid fa-people-roof",style:{color:"#9603ff"}},null,-1),mo=t("span",null,"YClients",-1),go=t("i",{class:"fa fa-circle"},null,-1),bo=t("i",{class:"fa-solid fa-basket-shopping"},null,-1),vo=t("span",null,"Настройка магазина",-1),yo=t("i",{class:"fa fa-circle"},null,-1),$o={href:"#",class:"close-menu"},ko={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x","data-feather-line":"3","data-feather-size":"16","data-feather-color":"red2-dark","data-feather-bg":"red2-fade-dark",style:{width:"16px",height:"16px"}},xo=t("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),wo=t("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),Co=[xo,wo],jo=t("span",null,"Закрыть",-1),Oo=t("i",{class:"fa fa-circle"},null,-1),Go=B('<div class="text-center pt-2"><a href="#" class="icon icon-xs mr-1 rounded-s bg-facebook"><i class="fab fa-facebook"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-twitter"><i class="fab fa-twitter"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-instagram"><i class="fab fa-instagram"></i></a><a href="#" class="icon icon-xs mr-1 rounded-s bg-linkedin"><i class="fab fa-linkedin-in"></i></a><a href="#" class="icon icon-xs rounded-s bg-whatsapp"><i class="fab fa-whatsapp"></i></a><p class="mb-0 pt-3 font-10 opacity-30">Copyright <span class="copyright-year"></span> Enabled. All rights reserved</p></div>',1);function Mo(o,a,s,r,n,i){const e=S("router-link"),f=E("lazy");return b(),v("div",me,[t("div",ge,[be,u(e,{class:"close-menu",tag:"a",to:"/settings"},{default:h(()=>[ve]),_:1}),ye]),t("div",$e,[t("a",ke,[R(t("img",xe,null,512),[[f,i.logo]])]),we,t("p",Ce,x(i.currentBot.company.title||i.currentBot.bot_domain||"CashMan:Shopify"),1)]),t("div",je,[Oe,u(e,{id:"nav-home","active-class":"nav-item-active",tag:"a",to:"/admin-main"},{default:h(()=>[Ge,Me,Be]),_:1}),u(e,{id:"nav-home","active-class":"nav-item-active",tag:"a",to:"/admin-work-status"},{default:h(()=>[Ae,Ie,Te]),_:1}),u(e,{id:"nav-products","active-class":"nav-item-active",tag:"a",to:"/admin-statistic"},{default:h(()=>[Ye,Ne,Pe]),_:1}),u(e,{id:"nav-favorites","active-class":"nav-item-active",tag:"a",to:"/admin-promotion"},{default:h(()=>[Fe,ze,Se]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/history"},{default:h(()=>[Ee,Re,Le,qe]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-actions"},{default:h(()=>[De,Ue,Ve]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-company-manager"},{default:h(()=>[Qe,Ke,Ze]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-manager"},{default:h(()=>[He,Je,We]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-page"},{default:h(()=>[Xe,to,eo]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-slug"},{default:h(()=>[oo,ao,so]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-dialog"},{default:h(()=>[no,io,co]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-keyboard"},{default:h(()=>[lo,ro,uo]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-amo"},{default:h(()=>[ho,fo,po]),_:1}),u(e,{id:"nav-out-team","active-class":"nav-item-active",tag:"a",to:"/admin-bot-y-clients"},{default:h(()=>[_o,mo,go]),_:1}),u(e,{id:"nav-basket","active-class":"nav-item-active",tag:"a",to:"/admin-shop-manager"},{default:h(()=>[bo,vo,yo]),_:1}),t("a",$o,[(b(),v("svg",ko,Co)),jo,Oo])]),Go])}const Uo=Y(_e,[["render",Mo]]);var k={},Bo,Ao;Object.defineProperty(k,"__esModule",{value:!0});var c=J;const w=Symbol(),g=new class{constructor(){O(this,"events");O(this,"ymapReady");O(this,"scriptIsNotAttached");O(this,"pluginInstalledGlobal");this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0,this.pluginInstalledGlobal=!1}$on(o,a){return this.events[o]||(this.events[o]=[]),this.events[o].push(a),()=>{this.events[o]=this.events[o].filter(s=>a!==s)}}$emit(o){const a=this.events[o];a&&a.forEach(s=>s())}};function L(o){return new Promise((a,s)=>{if(window.ymaps)return g.ymapReady||(g.ymapReady=!0,g.$emit("scriptIsLoaded")),a(!0);if(document.getElementById("vue-yandex-maps-script"))return void g.$on("scriptIsLoaded",a);const r=document.createElement("SCRIPT"),{apiKey:n="",lang:i="ru_RU",version:e="2.1",coordorder:f="latlong",debug:m=!1,enterprise:d=!1}=o,_=`https://${d?"enterprise.":""}api-maps.yandex.ru/${e}/?${`lang=${i}${n&&`&apikey=${n}`}&mode=${m?"debug":"release"}&coordorder=${f}`}`;r.setAttribute("src",_),r.setAttribute("async",""),r.setAttribute("defer",""),r.setAttribute("id","vue-yandex-maps-script"),document.head.appendChild(r),g.scriptIsNotAttached=!1,r.onload=(l=>()=>{ymaps.ready(()=>{g.ymapReady=!0,g.$emit("scriptIsLoaded"),l(!0)})})(a),r.onerror=s})}const q=o=>Array.isArray(o)?o.map(q):+o,P=["actionbegin","actionbreak","actionend","actiontick","actiontickcomplete","balloonclose","balloonopen","boundschange","click","contextmenu","dblclick","destroy","hintclose","hintopen","marginchange","mousedown","mouseenter","mouseleave","mousemove","mouseup","multitouchend","multitouchmove","multitouchstart","optionschange","sizechange","typechange","wheel"],F=["balloonclose","balloonopen","beforedrag","beforedragstart","click","contextmenu","dblclick","drag","dragend","dragstart","editorstatechange","geometrychange","hintclose","hintopen","mapchange","mousedown","mouseenter","mouseleave","mousemove","mouseup","multitouchend","multitouchmove","multitouchstart","optionschange","overlaychange","parentchange","propertieschange","wheel"];function A(o,a=!1){let s,r,n=[],i=[];return{addGeoObject:(e,f)=>{n.push(a?f:e),clearTimeout(s),s=window.setTimeout(()=>{o(n,"add"),n=[]})},deleteGeoObject:(e,f)=>{i.push(a?f:e),clearTimeout(r),r=window.setTimeout(()=>{o(i,"remove"),i=[]})}}}var D=c.defineComponent({name:"YandexMap",props:{coordinates:{type:Array,required:!0},zoom:{type:Number,default:10},bounds:{type:Array,default:null},behaviors:{type:Array,default:null},controls:{type:Array,default:null},detailedControls:{type:Object,default:null},events:{type:Array,default:()=>["click"],validator:o=>o.every(a=>P.includes(a))},mapType:{type:String,default:"map"},settings:{type:Object,default:()=>({})},panOptions:{type:Object,default:void 0},options:{type:Object,default:()=>({})}},emits:[...P,"geo-objects-updated","created"],setup(o,{emit:a,slots:s,expose:r}){const n=c.ref(!1),i=g.pluginInstalledGlobal&&c.inject("pluginOptions")||{};let e;const f=`yandexMap${Math.round(1e5*Math.random())}`,{addGeoObject:m,deleteGeoObject:d}=A((l,p)=>{e&&l.length&&(l.forEach(j=>e==null?void 0:e.geoObjects[p](j)),a("geo-objects-updated",e.geoObjects))});c.provide(w,{addGeoObject:m,deleteGeoObject:d});const _=()=>{n.value=!0,e=new ymaps.Map(f,{center:o.coordinates,zoom:o.zoom,bounds:o.bounds,behaviors:o.behaviors,controls:o.controls,type:`yandex#${o.mapType}`},o.options),o.events.forEach(l=>{var p;return(p=e==null?void 0:e.events)==null?void 0:p.add(l,j=>a(l,j))}),o.detailedControls&&Object.keys(o.detailedControls).forEach(l=>{var p;e==null||e.controls.remove(l),e==null||e.controls.add(l,(p=o.detailedControls)==null?void 0:p[l])}),a("created",e)};return g.scriptIsNotAttached&&L({...i,...o.settings}),g.ymapReady?ymaps.ready(_):g.$on("scriptIsLoaded",_),r(e),c.watch(()=>o.coordinates,l=>e==null?void 0:e.panTo(l,o.panOptions)),c.watch(()=>o.zoom,l=>e==null?void 0:e.setZoom(l)),c.watch(()=>o.bounds,l=>e==null?void 0:e.setBounds(l)),c.watch(()=>o.mapType,l=>e==null?void 0:e.setType(l)),()=>{var l;return c.h("section",{class:"yandex-container","data-test":"map"},[c.h("div",{id:f,style:"min-height: 100%;"}),n.value&&c.h("div",{style:"display: none;"},[(l=s.default)==null?void 0:l.call(s)])])}}}),U=c.defineComponent({name:"YandexMarker",props:{coordinates:{type:Array,required:!0},markerId:{type:[String,Number],required:!0},properties:{type:Object,default:()=>({})},options:{type:Object,default:null},type:{type:String,default:"Point"},radius:{type:Number,default:null},events:{type:Array,default:()=>["click"],validator:o=>o.every(a=>F.includes(a))}},emits:[...F],setup(o,{emit:a,slots:s,expose:r}){var j,N;const{addGeoObject:n,deleteGeoObject:i}=c.inject(w)||{},e=c.computed(()=>o.coordinates.map(q)),f=c.ref(!1),m={geometry:{type:o.type,coordinates:e.value,radius:o.radius},properties:{...o.properties,markerId:o.markerId}},d=(j=s.component)!=null&&j.call(s).length?ymaps.templateLayoutFactory.createClass(`<div id="balloon-${o.markerId}" class="yandex-balloon"><div>`,{build(){d.superclass.build.call(this),f.value=!0},clear(){f.value=!1,d.superclass.clear.call(this)}}):null,_={balloonContentLayout:d,...o.options},l=new ymaps.GeoObject(m,_);o.events.forEach(y=>{var C;return(C=l.events)==null?void 0:C.add(y,G=>a(y,G))}),c.provide("marker",l);const p={...m,options:_};return c.onMounted(()=>{n(l,p)}),c.onBeforeUnmount(()=>{i(l,p)}),c.watch(()=>o.coordinates,y=>{var C,G;(G=(C=l.geometry)==null?void 0:C.setCoordinates)==null||G.call(C,y)}),r(l),(N=s.component)!=null&&N.call(s).length?()=>{var y;return f.value&&c.h(c.Teleport,{to:`#balloon-${o.markerId}`},[(y=s.component)==null?void 0:y.call(s)])}:()=>{var y;return(y=s.default)==null?void 0:y.call(s)}}}),V=c.defineComponent({name:"YandexGeoObjectCollection",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(o,{emit:a,expose:s,slots:r}){const n=new ymaps.GeoObjectCollection({},o.options),{addGeoObject:i,deleteGeoObject:e}=c.inject(w)||{},{addGeoObject:f,deleteGeoObject:m}=A((d,_)=>{n&&d.length&&(d.forEach(l=>n[_](l)),a("geo-objects-updated",n))});return c.provide(w,{addGeoObject:f,deleteGeoObject:m}),c.onMounted(()=>{i(n)}),c.onBeforeUnmount(()=>{e(n)}),s(n),()=>{var d;return(d=r.default)==null?void 0:d.call(r)}}}),Q=c.defineComponent({name:"YandexClusterer",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(o,{emit:a,expose:s,slots:r}){const n=new ymaps.Clusterer(o.options),{addGeoObject:i,deleteGeoObject:e}=c.inject(w)||{},{addGeoObject:f,deleteGeoObject:m}=A((d,_)=>{n&&d.length&&(n[_](d),a("geo-objects-updated",n))});return c.provide(w,{addGeoObject:f,deleteGeoObject:m}),c.onMounted(()=>{i(n)}),c.onBeforeUnmount(()=>{e(n)}),s(n),()=>{var d;return(d=r.default)==null?void 0:d.call(r)}}}),K=c.defineComponent({name:"YandexObjectManager",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(o,{emit:a,expose:s,slots:r}){const n=new ymaps.ObjectManager(o.options),{addGeoObject:i,deleteGeoObject:e}=c.inject(w)||{},{addGeoObject:f,deleteGeoObject:m}=A((d,_)=>{if(!n||!d.length)return;const l=d.map(p=>({type:"Feature",id:p.properties.markerId,geometry:p.geometry,properties:p.properties,options:p.options}));n[_](l),a("geo-objects-updated",n)},!0);return c.provide(w,{addGeoObject:f,deleteGeoObject:m}),c.onMounted(()=>{i(n)}),c.onBeforeUnmount(()=>{e(n)}),s(n),()=>{var d;return(d=r.default)==null?void 0:d.call(r)}}});let z;const Io=L,To=D,Yo=U,No=V,Po=Q,Fo=K;var zo={install:(o,a)=>{z||(z=!0,g.pluginInstalledGlobal=!0,o.provide("pluginOptions",a),o.component("YandexMap",D),o.component("YandexMarker",U),o.component("YandexCollection",V),o.component("YandexClusterer",Q),o.component("YandexObjectManager",K))}};k.YandexClusterer=Po,k.YandexCollection=No,Ao=k.YandexMap=To,Bo=k.YandexMarker=Yo,k.YandexObjectManager=Fo,k.default=zo,k.loadYmap=Io;export{qo as A,Do as S,Ao as Y,Bo as a,Uo as b};
