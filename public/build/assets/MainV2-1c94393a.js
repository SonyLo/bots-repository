import{L as I,q as a,t as i,v as t,x as b,P as C,H as m,J as h,D as f,y as u,A as c,F as y,C as v,T as w,Z as T,G as V,B as F,O as B,u as $,a2 as S,N as U,R as x,K as j}from"./index.es-bac3219e.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const M={data(){return{tab:0,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],selected_warning:null,botForm:{warnings:[],payment_provider_token:null,auto_cashback_on_payments:!1,level_1:0,level_2:0,level_3:0,max_cashback_use_percent:0,cashback_config:[]},companyForm:{id:null,title:null,description:null,address:null,phones:[],links:{vk:null,inst:null,map_link:null,site:null},email:null,schedule:[{day:"Понедельник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Вторник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Среда",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Четверг",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Пятница",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Суббота",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Воскресенье",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"}]}}},computed:{currentBot(){return window.currentBot},filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(s=>!(this.botForm.warnings.findIndex(e=>e.rule_key===s.key)>=0))}},mounted(){const s=this.currentBot.company;this.companyForm.id=s.id||null,this.companyForm.title=s.title||null,this.companyForm.description=s.description||null,this.companyForm.email=s.email||null,this.companyForm.address=s.address||null,this.companyForm.phones=s.phones||["+7"],this.botForm.payment_provider_token=this.currentBot.payment_provider_token||null,this.botForm.auto_cashback_on_payments=this.currentBot.auto_cashback_on_payments||!1,this.botForm.max_cashback_use_percent=this.currentBot.max_cashback_use_percent||0,this.botForm.level_1=this.currentBot.level_1||0,this.botForm.level_2=this.currentBot.level_2||0,this.botForm.level_3=this.currentBot.level_3||0,this.botForm.cashback_config=this.currentBot.cashback_config||[],this.botForm.warnings=this.currentBot.warnings||[];let e=(d=[])=>{let o=["inst","vk","map_link","site"],p=!1,g=0;return Object.keys(d).forEach(n=>{o.indexOf(n)!==-1&&(p=!0,g++)}),p&&g===o.length};this.companyForm.links=e(s.links||[])?s.links:this.companyForm.links;let l=d=>{if((d||[]).length<7)return!1;let o=!0;return d.forEach(p=>{o=o&&typeof p=="object"}),o};this.companyForm.schedule=l(s.schedule)?s.schedule:this.companyForm.schedule},methods:{submitBotForm(){let s=new FormData;Object.keys(this.botForm).forEach(e=>{const l=this.botForm[e]||"";typeof l=="object"?s.append(e,JSON.stringify(l)):s.append(e,l)}),this.$store.dispatch("updateBotParams",{botForm:s}).then(e=>{this.$notify({title:"Информация о боте",text:"Информация о боте успешно обновлена!",type:"success"}),this.$emit("callback",e.data),window.location.reload()}).catch(e=>{this.$notify({title:"Информация о боте",text:"Ошибка обновления информации о боте",type:"error"})})},submitCompanyForm(){let s=new FormData;Object.keys(this.companyForm).forEach(e=>{const l=this.companyForm[e]||"";typeof l=="object"?s.append(e,JSON.stringify(l)):s.append(e,l)}),this.$store.dispatch("updateCompany",{companyForm:s}).then(e=>{this.$notify({title:"Информация о компании",text:"Информация о компании успешно обновлена!",type:"success"}),this.$emit("callback",e.data),window.location.reload()}).catch(e=>{this.$notify({title:"Информация о компании",text:"Ошибка обновления информации о компании",type:"error"})})},addWarning(){const s=this.selected_warning;this.botForm.warnings.push({rule_key:s.key,rule_value:0,is_active:!0}),this.selected_warning=null},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(s){let e=this.warnings.find(l=>l.key===s);return e||{title:"Не найдено"}},removeWarning(s){this.botForm.warnings.splice(s,1)},removeCashBackConfig(s){this.botForm.cashback_config.splice(s,1)}}},z={class:"nav nav-tabs mb-2"},q={class:"nav-item"},E={class:"nav-item"},O={class:"form-floating mb-2"},D={for:"floatingInput"},W={key:0,class:"ml-1",style:{"font-size":"10px"}},P={class:"form-floating"},H={for:"floatingTextarea2"},N={key:0,class:"ml-1",style:{"font-size":"10px"}},A=t("h6",{class:"opacity-75 my-2"},"Контактная информация",-1),J={class:"form-floating mb-2"},R=t("label",{for:"floatingInput"},"Телефон",-1),G={class:"form-floating mb-2"},K=t("label",{for:"floatingInput"},"Инста",-1),X={class:"form-floating mb-2"},Y=t("label",{for:"floatingInput"},"Вконтакте",-1),Z={class:"form-floating mb-2"},Q=t("label",{for:"floatingInput"},"Почта",-1),tt={class:"form-floating mb-2"},et=t("label",{for:"floatingInput"},"Сайт",-1),ot=t("h6",{class:"opacity-75 my-2"},"Расположение заведения",-1),st={class:"form-floating mb-2"},nt={for:"floatingInput"},lt={key:0,class:"ml-1",style:{"font-size":"10px"}},at={class:"form-floating mb-2"},it=t("label",{for:"floatingInput"},"Виджет с Яндекс.Картой",-1),rt=t("h6",{class:"opacity-75 my-3"},"График работы",-1),ct=t("div",{class:"alert alert-light p-2",style:{"font-size":"12px"},role:"alert"},[f(" Укажите график работы вашего заведения. Если в какой-то день ваше заведение "),t("span",{class:"fw-bold"},"закрыто"),f(" - поставьте галочку сбоку от времени и укажите причину. ")],-1),mt={class:"mb-0",style:{"font-size":"12px"}},dt={class:"input-group mb-2"},pt={class:"input-group-text"},ut=["onUpdate:modelValue"],ht={key:0,class:"form-floating"},_t=["onUpdate:modelValue"],ft=t("label",{for:"floatingInput"},"Начало",-1),bt={key:1,class:"form-floating"},yt=["onUpdate:modelValue"],gt=t("label",{for:"floatingInput"},"Окончание",-1),kt={key:2,class:"form-floating"},vt=["onUpdate:modelValue"],wt=t("label",{for:"floatingInput"},"Причина закрытия",-1),Ft=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),Ct=t("div",{class:"alert alert-light mb-2"}," Максимальное значение CashBack, которое пользователь может списать во время покупки в магазине, в % от цены заказа. ",-1),xt={class:"form-floating mb-2"},Vt=t("label",{for:"floatingInput"},"CashBack",-1),Bt=t("div",{class:"alert alert-light mb-2"}," Уровни автоматического начисления CashBack по реферальной программе, в %. ",-1),It={class:"form-floating mb-2"},Tt=t("label",{for:"floatingInput"},"Уровень 1, %",-1),$t={class:"form-floating mb-2"},St=t("label",{for:"floatingInput"},"Уровень 2, %",-1),Ut={class:"form-floating mb-2"},jt=t("label",{for:"floatingInput"},"Уровень 3, %",-1),Lt={class:"mb-2"},Mt={class:"form-check"},zt=t("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),qt={key:0,class:"mb-2"},Et=t("h6",{class:"opacity-75 my-2"},"Настройка категорий CashBack-а",-1),Ot=t("div",{class:"alert alert-light",role:"alert"}," Категории CashBack - это возможность разделить накопления и траты CashBack пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),Dt={class:"input-group mb-2"},Wt={class:"form-floating"},Pt=["onUpdate:modelValue"],Ht=t("label",{for:"floatingInput"},"Название категории",-1),Nt=["onClick"],At=t("i",{class:"fa-regular fa-trash-can"},null,-1),Jt=[At],Rt={class:"mb-2"},Gt={class:"form-check"},Kt=t("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),Xt={key:1,class:"col-md-12 col-12 mb-2"},Yt={class:"form-floating mb-2"},Zt=t("option",{value:null},"Не выбрано",-1),Qt=["value"],te=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),f(" Правила критических оповещений ")],-1),ee={class:"m-0 fst-italic"},oe={class:"input-group mb-2"},se={class:"input-group-text"},ne={class:"form-check d-flex justify-content-center align-items-center"},le=["onUpdate:modelValue","id"],ae={class:"form-floating"},ie=["onUpdate:modelValue"],re=t("label",{for:"floatingInput"},"Значение",-1),ce=["onClick"],me=t("i",{class:"fa-regular fa-trash-can"},null,-1),de=[me],pe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1);function ue(s,e,l,d,o,p){const g=I("mask");return a(),i(y,null,[t("ul",z,[t("li",q,[t("a",{class:b(["nav-link",{"active fw-bold":o.tab===0}]),onClick:e[0]||(e[0]=n=>o.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Основное",2)]),t("li",E,[t("a",{class:b(["nav-link",{"active fw-bold":o.tab===1}]),onClick:e[1]||(e[1]=n=>o.tab=1),href:"javascript:void(0)"},"CashBack",2)])]),o.tab===0?(a(),i("form",{key:0,onSubmit:e[11]||(e[11]=C((...n)=>p.submitCompanyForm&&p.submitCompanyForm(...n),["prevent"]))},[t("div",O,[m(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>o.companyForm.title=n),maxlength:"255",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,o.companyForm.title]]),t("label",D,[f("Название "),(o.companyForm.title||"").length>0?(a(),i("span",W,"("+u(o.companyForm.title.length)+"/255)",1)):c("",!0)])]),t("div",P,[m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=n=>o.companyForm.description=n),maxlength:"512",required:"",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[h,o.companyForm.description]]),t("label",H,[f("Описание "),(o.companyForm.description||"").length>0?(a(),i("span",N,"("+u(o.companyForm.description.length)+"/512)",1)):c("",!0)])]),A,t("div",J,[m(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>o.companyForm.phones[0]=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[g,["+7(###)###-##-##"]],[h,o.companyForm.phones[0]]]),R]),t("div",G,[m(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=n=>o.companyForm.links.inst=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,o.companyForm.links.inst]]),K]),t("div",X,[m(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=n=>o.companyForm.links.vk=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,o.companyForm.links.vk]]),Y]),t("div",Z,[m(t("input",{type:"email","onUpdate:modelValue":e[7]||(e[7]=n=>o.companyForm.email=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,o.companyForm.email]]),Q]),t("div",tt,[m(t("input",{type:"url","onUpdate:modelValue":e[8]||(e[8]=n=>o.companyForm.links.site=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,o.companyForm.links.site]]),et]),ot,t("div",st,[m(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=n=>o.companyForm.address=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,o.companyForm.address]]),t("label",nt,[f("Адрес расположения "),(o.companyForm.address||"").length>0?(a(),i("span",lt,"("+u(o.companyForm.address.length)+"/255)",1)):c("",!0)])]),t("div",at,[m(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=n=>o.companyForm.links.map_link=n),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[h,o.companyForm.links.map_link]]),it]),rt,ct,(a(!0),i(y,null,v(o.companyForm.schedule,(n,r)=>(a(),i(y,null,[t("p",mt,u(o.companyForm.schedule[r].day),1),t("div",dt,[t("div",pt,[m(t("input",{class:"form-check-input mt-0","onUpdate:modelValue":_=>o.companyForm.schedule[r].closed=_,type:"checkbox",value:"","aria-label":"Checkbox for following text input"},null,8,ut),[[w,o.companyForm.schedule[r].closed]])]),o.companyForm.schedule[r].closed?c("",!0):(a(),i("div",ht,[m(t("input",{type:"time","onUpdate:modelValue":_=>o.companyForm.schedule[r].start_at=_,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,_t),[[h,o.companyForm.schedule[r].start_at]]),ft])),o.companyForm.schedule[r].closed?c("",!0):(a(),i("div",bt,[m(t("input",{type:"time","onUpdate:modelValue":_=>o.companyForm.schedule[r].end_at=_,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,yt),[[h,o.companyForm.schedule[r].end_at]]),gt])),o.companyForm.schedule[r].closed?(a(),i("div",kt,[m(t("input",{type:"text","onUpdate:modelValue":_=>o.companyForm.schedule[r].closed_comment=_,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,vt),[[h,o.companyForm.schedule[r].closed_comment]]),wt])):c("",!0)])],64))),256)),Ft],32)):c("",!0),o.tab===1?(a(),i("form",{key:1,onSubmit:e[21]||(e[21]=C((...n)=>p.submitBotForm&&p.submitBotForm(...n),["prevent"]))},[Ct,t("div",xt,[m(t("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=n=>o.botForm.max_cashback_use_percent=n),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,o.botForm.max_cashback_use_percent]]),Vt]),Bt,t("div",It,[m(t("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=n=>o.botForm.level_1=n),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,o.botForm.level_1]]),Tt]),t("div",$t,[m(t("input",{type:"number","onUpdate:modelValue":e[14]||(e[14]=n=>o.botForm.level_2=n),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,o.botForm.level_2]]),St]),t("div",Ut,[m(t("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=n=>o.botForm.level_3=n),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,o.botForm.level_3]]),jt]),t("div",Lt,[t("div",Mt,[m(t("input",{class:"form-check-input","onUpdate:modelValue":e[16]||(e[16]=n=>o.need_cashback_config=n),type:"checkbox",id:"need-cashback-config"},null,512),[[w,o.need_cashback_config]]),zt])]),o.need_cashback_config?(a(),i("div",qt,[Et,Ot,(a(!0),i(y,null,v(o.botForm.cashback_config,(n,r)=>(a(),i("div",{class:"d-flex justify-content-between flex-wrap",key:"social-link"+r},[t("div",Dt,[t("div",Wt,[m(t("input",{type:"text",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":_=>o.botForm.cashback_config[r].title=_,class:"form-control",id:"floatingInput"},null,8,Pt),[[h,o.botForm.cashback_config[r].title]]),Ht]),t("button",{type:"button",onClick:_=>p.removeCashBackConfig(r),class:"btn btn-outline-light text-danger"},Jt,8,Nt)])]))),128)),t("button",{type:"button",onClick:e[17]||(e[17]=n=>p.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-primary p-3 w-100"}," Добавить категорию ")])):c("",!0),t("div",Rt,[t("div",Gt,[m(t("input",{class:"form-check-input","onUpdate:modelValue":e[18]||(e[18]=n=>o.need_cashback_rules=n),type:"checkbox",id:"need-cashback-rules"},null,512),[[w,o.need_cashback_rules]]),Kt])]),o.need_cashback_rules?(a(),i("div",Xt,[t("div",Yt,[m(t("select",{class:"form-select","onUpdate:modelValue":e[19]||(e[19]=n=>o.selected_warning=n),onChange:e[20]||(e[20]=(...n)=>p.addWarning&&p.addWarning(...n)),id:"floatingSelect","aria-label":"Floating label select example"},[Zt,(a(!0),i(y,null,v(p.filteredWarnings,n=>(a(),i("option",{value:n},u(n.title),9,Qt))),256))],544),[[T,o.selected_warning]]),te]),(a(!0),i(y,null,v(o.botForm.warnings,(n,r)=>(a(),i(y,null,[t("p",ee,u(p.getWarning(n.rule_key).title||"Не найдено"),1),t("div",oe,[t("div",se,[t("div",ne,[m(t("input",{class:"form-check-input","onUpdate:modelValue":_=>o.botForm.warnings[r].is_active=_,type:"checkbox",id:"warning-is-active-"+r},null,8,le),[[w,o.botForm.warnings[r].is_active]])])]),t("div",ae,[m(t("input",{type:"number",placeholder:"Значение","aria-label":"Значение","onUpdate:modelValue":_=>o.botForm.warnings[r].rule_value=_,min:"0",class:"form-control",id:"floatingInput"},null,8,ie),[[h,o.botForm.warnings[r].rule_value]]),re]),t("button",{type:"button",onClick:_=>p.removeWarning(r),class:"btn btn-outline-light text-danger"},de,8,ce)])],64))),256))])):c("",!0),pe],32)):c("",!0)],64)}const he=L(M,[["render",ue]]);const _e=t("title",null,"CashMan - система твоего бизнеса внутри",-1),fe=t("meta",{name:"description",content:"CashMan - система твоего бизнеса внутри"},null,-1),be={key:0,"data-bs-theme":"dark"},ye={class:"navbar shadow shadow-sm"},ge={class:"container flex-row-reverse p-2"},ke={key:0,class:"mb-0 fw-bold d-flex flex-column",style:{"font-size":"12px"}},ve={key:0,class:"text-primary"},we=t("i",{class:"fa-solid fa-location-dot mr-1"},null,-1),Fe={key:1,class:"text-primary"},Ce={key:2,class:"small d-flex justify-content-end"},xe={href:"javascript:void(0)",class:"text-secondary fw-bold"},Ve={key:1,class:"mb-0 text-primary",style:{"font-size":"12px"}},Be=t("button",{class:"btn btn-link rounded-0 border-0 p-1",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebar-menu","aria-controls":"sidebar-menu"},[t("span",{class:"navbar-toggler-icon"})],-1),Ie={class:"text-body-secondary",style:{padding:"0px 0px 90px 0px"}},Te={class:"container d-flex justify-content-center flex-column align-items-center"},$e={class:"text-center mb-3"},Se=["innerHTML"],Ue=t("br",null,null,-1),je={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2",style:{"font-size":"12px"}},Le=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),Me={key:1,class:"mb-3 text-center"},ze=t("i",{class:"fa-solid fa-map-location-dot mr-2"},null,-1),qe={class:"mb-0"},Ee={class:"d-flex justify-content-center my-3"},Oe=t("i",{class:"fa-solid fa-arrow-up mr-2"},null,-1),De={class:"offcanvas offcanvas-start custom-offcanvas",style:{width:"70%","border-radius":"0px 10px 10px 0px"},tabindex:"-1",id:"sidebar-menu","aria-labelledby":"offcanvasExampleLabel"},We={class:"offcanvas-header"},Pe={class:"offcanvas-title",id:"offcanvasExampleLabel"},He=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),Ne={class:"offcanvas-body"},Ae={class:"list-unstyled"},Je={class:"p-1"},Re={class:"p-1"},Ge={class:"p-1"},Ke={class:"p-1"},Xe={key:0,class:"fw-bold"},Ye={class:"p-1"},Ze={class:"p-1"},Qe={class:"p-1"},to=t("div",{class:"border-top my-3"},null,-1),eo={key:0,class:"p-2"},oo={class:"list-unstyled"},so={key:0},no=t("p",{class:"mb-0"},"Телефон",-1),lo=[no],ao={key:1,class:"mb-2"},io=["href"],ro={key:2},co=t("p",{class:"mb-0"},"Ссылки",-1),mo=[co],po={key:3},uo=["href"],ho=t("i",{class:"fa-brands fa-instagram mr-1"},null,-1),_o={key:4},fo=["href"],bo=t("i",{class:"fa-brands fa-vk mr-1"},null,-1),yo={key:5},go=t("p",{class:"mb-0"},"Почта",-1),ko=[go],vo=["href"],wo={key:6},Fo=t("p",{class:"mb-0"},"Сайт",-1),Co=[Fo],xo=["href"],Vo={class:"modal fade",id:"edit-shop-footer-description-modal",tabindex:"-1","aria-labelledby":"edit-shop-footer-description","aria-hidden":"true"},Bo={class:"modal-dialog modal-fullscreen"},Io={class:"modal-content"},To=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$o={class:"modal-body"},So={data(){return{currentTheme:"",themes:[{title:"Тема 3",href:"/theme5.bootstrap.min.css"},{title:"Тема 4",href:"/theme6.bootstrap.min.css"},{title:"Тема 5",href:"/theme8.bootstrap.min.css"},{title:"Тема 6",href:"/theme9.bootstrap.min.css"},{title:"Тема 7",href:"/theme10.bootstrap.min.css"},{title:"Тема 8",href:"/theme11.bootstrap.min.css"},{title:"Тема 9",href:"/theme12.bootstrap.min.css"},{title:"Тема 10",href:"/theme13.bootstrap.min.css"},{title:"Тема 11",href:"/theme14.bootstrap.min.css"},{title:"Тема 12",href:"/theme15.bootstrap.min.css"},{title:"Тема 13",href:"/theme16.bootstrap.min.css"}]}},watch:{$route(s){let e=localStorage.getItem("cashman_global_client_theme")||null;e&&this.$nextTick(()=>{this.currentTheme=e}),this.$preloader.show(),this.$nextTick(()=>{document.body.scrollTop=document.documentElement.scrollTop=0})}},computed:{...V(["getSelf","cartTotalCount"]),tg(){return window.Telegram.WebApp},bot(){return window.currentBot},needHideMenu(){return new URLSearchParams(window.location.search).has("hide_menu")||this.$route.meta.hide_menu},links(){return{inst:(this.bot.company.links||{inst:null}).inst||null,vk:(this.bot.company.links||{vk:null}).vk||null,map_link:(this.bot.company.links||{map_link:null}).map_link||null,site:(this.bot.company.links||{site:null}).site||null}}},mounted(){let s=localStorage.getItem("cashman_global_client_theme")||null;s&&this.$nextTick(()=>{this.currentTheme=s}),this.changeTheme(this.tg.colorScheme),this.tg.expand(),this.tg.BackButton.hide()},methods:{switchTheme(s){let e=document.querySelector("#theme");e.href=this.themes[s].href,localStorage.setItem("cashman_global_client_theme",e.href),this.$nextTick(()=>{this.currentTheme=e.href})},goTo(s){this.$router.push({name:s})},changeTheme(s){document.querySelectorAll("[data-bs-theme]").forEach(l=>{l.setAttribute("data-bs-theme",s)})},scrollTop(){window.scrollTo(0,80)},openLink(s){this.tg.openLink(s,{try_instant_view:!0})},closeShop(){this.tg.close()}}},Uo=Object.assign(So,{__name:"V2Layout",setup(s){return(e,l)=>(a(),i(y,null,[F($(S),null,{default:B(()=>[_e,fe]),_:1}),e.needHideMenu?c("",!0):(a(),i("header",be,[t("div",ye,[t("div",ge,[e.bot.company?(a(),i("p",ke,[e.bot.company.address?(a(),i("span",ve,[we,f(" "+u(e.bot.company.address),1)])):(a(),i("span",Fe,u(e.bot.title||"Магазин"),1)),(e.bot.company.phones||[]).length>0?(a(),i("span",Ce,[t("a",xe,u(e.bot.company.phones[0]),1)])):c("",!0)])):(a(),i("p",Ve,u(e.bot.title||"Бот"),1)),Be])])])),U(e.$slots,"default"),t("footer",Ie,[t("div",Te,[e.$route.name!="FeedBackV2"?(a(),i("button",{key:0,onClick:l[0]||(l[0]=d=>e.goTo("FeedBackV2")),class:"btn btn-link mb-2 w-100 p-3 text-primary"},"Обратная связь ")):c("",!0),t("p",$e,[t("span",{innerHTML:e.bot.company.description},null,8,Se),Ue,(e.getSelf||{is_admin:!1}).is_admin?(a(),i("a",je,[Le,f(" редактировать")])):c("",!0)]),e.bot.company.address?(a(),i("p",Me,[ze,f(u(e.bot.company.address),1)])):c("",!0),t("p",qe,u(e.bot.company.title)+"©"+u(new Date().getFullYear()),1),t("p",Ee,[t("a",{href:"javascript:void(0)",onClick:l[1]||(l[1]=(...d)=>e.scrollTop&&e.scrollTop(...d))},[Oe,f("Вернуться наверх")])])])]),t("div",De,[t("div",We,[t("h6",Pe,u(e.bot.title||"Магазин"),1),He]),t("div",Ne,[t("ul",Ae,[t("li",Je,[t("a",{class:b([{"fw-bold":e.$route.name==="MenuV2"},"text-decoration-none fw-normal"]),onClick:l[2]||(l[2]=d=>e.goTo("MenuV2")),href:"javascript:void(0)"}," Главное меню",2)]),t("li",Re,[t("a",{class:b([{"fw-bold":e.$route.name==="ProfileV2"},"text-decoration-none fw-normal"]),onClick:l[3]||(l[3]=d=>e.goTo("ProfileV2")),href:"javascript:void(0)"}," Профиль",2)]),t("li",Ge,[t("a",{class:b([{"fw-bold":e.$route.name==="CatalogV2"},"text-decoration-none fw-normal"]),onClick:l[4]||(l[4]=d=>e.goTo("CatalogV2")),href:"javascript:void(0)"}," Каталог товаров",2)]),t("li",Ke,[t("a",{class:b([{"fw-bold":e.$route.name==="ShopCartV2"},"text-decoration-none fw-normal"]),onClick:l[5]||(l[5]=d=>e.goTo("ShopCartV2")),href:"javascript:void(0)"},[f(" Корзина "),e.cartTotalCount>0?(a(),i("span",Xe,"("+u(e.cartTotalCount)+")",1)):c("",!0)],2)]),t("li",Ye,[t("a",{class:b([{"fw-bold":e.$route.name==="OrdersV2"},"text-decoration-none fw-normal"]),onClick:l[6]||(l[6]=d=>e.goTo("OrdersV2")),href:"javascript:void(0)"}," История заказов",2)]),t("li",Ze,[t("a",{class:b([{"fw-bold":e.$route.name==="CashBackV2"},"text-decoration-none fw-normal"]),onClick:l[7]||(l[7]=d=>e.goTo("CashBackV2")),href:"javascript:void(0)"}," CashBack",2)]),t("li",Qe,[t("a",{class:b([{"fw-bold":e.$route.name==="FeedBackV2"},"text-decoration-none fw-normal"]),onClick:l[8]||(l[8]=d=>e.goTo("FeedBackV2")),href:"javascript:void(0)"}," Оставить отзыв",2)])]),to,e.bot.company?(a(),i("div",eo,[t("ul",oo,[(e.bot.company.phones||[]).length>0?(a(),i("li",so,lo)):c("",!0),(e.bot.company.phones||[]).length>0?(a(),i("li",ao,[t("a",{target:"_blank",href:"tel:"+e.bot.company.phones[0],class:"text-decoration-none fw-bold"},u(e.bot.company.phones[0]||"-"),9,io)])):c("",!0),e.links.inst||e.links.vk?(a(),i("li",ro,mo)):c("",!0),e.links.inst?(a(),i("li",po,[t("a",{target:"_blank",href:"http://instagram.com/"+e.links.inst,style:{"font-size":"12px"},class:"text-primary"},[ho,f(" "+u(e.links.inst||"ссылка"),1)],8,uo)])):c("",!0),e.links.vk?(a(),i("li",_o,[t("a",{target:"_blank",href:"https://vk.com/"+e.links.vk,style:{"font-size":"12px"},class:"text-primary"},[bo,f(" "+u(e.links.vk||"ссылка"),1)],8,fo)])):c("",!0),e.bot.company.email?(a(),i("li",yo,ko)):c("",!0),t("li",null,[e.bot.company.email?(a(),i("a",{key:0,href:"mailto:"+e.bot.company.email,target:"_blank",class:"text-decoration-none fw-bold"},u(e.bot.company.email),9,vo)):c("",!0)]),e.links.site?(a(),i("li",wo,Co)):c("",!0),t("li",null,[e.links.site?(a(),i("a",{key:0,href:e.links.site,target:"_blank",class:"text-decoration-none fw-bold"},u(e.links.site),9,xo)):c("",!0)])])])):c("",!0)])]),t("div",Vo,[t("div",Bo,[t("div",Io,[To,t("div",$o,[F(he)])])])])],64))}}),jo={computed:{...V(["getSelf"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},self(){return window.self||null},tg(){return window.Telegram.WebApp},tgUser(){const s=new URLSearchParams(this.tg.initData);return JSON.parse(s.get("user"))},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},created(){window.currentBot=this.bot.data;const s=window.currentBot.company.schedule||[];if(window.isCorrectSchedule=e=>{if((e||[]).length<7)return!1;let l=!0;return e.forEach(d=>{l=l&&typeof d=="object"}),l},window.isCorrectSchedule(s)&&((!s||(s||[]).length===0)&&(window.currentBot.company.is_work=!0),s&&(s||[]).length>0)){const e=new Date().getUTCDay(),l=new Date().getHours(),d=new Date().getMinutes();let o=s[e].start_at||"08:00",p=parseInt(o.split(":")[0]),g=parseInt(o.split(":")[1]),n=s[e].end_at||"20:00",r=parseInt(n.split(":")[0]),_=parseInt(n.split(":")[1]),k=!1;p===l&&(k=d>=g),r===l&&(k=d<_),l>p&&l<r&&p<=r&&(k=!0),(l>p||l<=r)&&p>=r&&(k=!0),window.currentBot.company.is_work=!s[e].closed&&k}window.currentScript=this.slug_id||null,this.$store.dispatch("loadSelf").then(()=>{window.self=this.getSelf}),this.$notify({title:"Главная",text:"Успешно!",type:"success"})},methods:{open(s){this.tg.openLink(s)}}},zo=Object.assign(jo,{__name:"MainV2",props:{bot:{type:Object},slug_id:{type:String}},setup(s){return(e,l)=>{const d=x("notifications"),o=x("router-view");return a(),j(Uo,null,{default:B(()=>[F(d,{position:"top right",width:"100%",speed:"100"}),F(o,{bot:s.bot},null,8,["bot"])]),_:1})}}});export{zo as default};
