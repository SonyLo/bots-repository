import{Y as L,a as B,A as P,S as T,b as j}from"./MapModal.vue_vue_type_style_index_0_lang-96d20b06.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import{q as r,t as c,v as e,y as d,F as g,A as u,L as C,H as _,P as k,B as h,D as p,C as w,J as b,M as N,Y as v,O as y,K as M,G as S}from"./index.es-71d37bd0.js";import{_ as E}from"./ShopLayout-328e2a24.js";import"./app-e24dfec8.js";import"./TelegramChannelHelper-d5723a62.js";import"./v4-a960c1f4.js";/* empty css                                                               */import"./vue3-perfect-scrollbar-d962e4d5.js";import"./index-4a291d06.js";const F={data(){return{title:null,text:null}},mounted(){window.addEventListener("notification",o=>{this.title=o.detail.title||null,this.text=o.detail.text||null,$("#notification-1").toast("show")}),window.addEventListener("success",o=>{this.title=o.detail.title||null,this.text=o.detail.text||null,$("#menu-success-1").showMenu()}),window.addEventListener("warning",o=>{this.title=o.detail.title||null,this.text=o.detail.text||null,$("#menu-warning-1").showMenu()})}},R={id:"notification-1","data-dismiss":"notification-1","data-delay":"3000","data-autohide":"true",class:"notification notification-ios bg-dark1-dark"},O=e("span",{class:"notification-icon"},[e("i",{class:"fa fa-bell"}),e("em",null,"Оповещение"),e("i",{"data-dismiss":"notification-1",class:"fa fa-times-circle"})],-1),U={class:"font-15 color-white mb-n3"},V={class:"pt-2"},A={id:"menu-success-1",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"305","data-menu-effect":"menu-over",style:{display:"block",height:"305px"}},z=e("h1",{class:"text-center mt-4"},[e("i",{class:"fa fa-3x fa-check-circle color-green1-dark"})],-1),I={class:"text-center mt-3 text-uppercase font-700"},Y=["innerHTML"],D=e("a",{"data-dismiss":"menu-success-1",class:"close-menu btn btn-m btn-center-m button-s shadow-l rounded-s text-uppercase font-900 bg-green1-light"},"Хорошо",-1),H={id:"menu-warning-1",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"305","data-menu-effect":"menu-over",style:{display:"block",height:"305px"}},G=e("h1",{class:"text-center mt-4"},[e("i",{class:"fa fa-3x fa-times color-red2-dark"})],-1),K={class:"text-center mt-3 text-uppercase font-700"},W=["innerHTML"],Q=e("a",{"data-dismiss":"menu-warning-1",class:"close-menu btn btn-m btn-center-m button-s shadow-l rounded-s text-uppercase font-900 bg-red1-light"},"Хорошо",-1);function J(o,s,l,a,t,i){return r(),c(g,null,[e("div",R,[O,e("h1",U,d(t.title||"Системное"),1),e("p",V,d(t.text||"Ошибка отображения текста"),1)]),e("div",A,[z,e("h1",I,d(t.title||"Системное"),1),e("p",{class:"boxed-text-l",innerHTML:t.text},null,8,Y),D]),e("div",H,[G,e("h1",K,d(t.title||"Системное"),1),e("p",{class:"boxed-text-l",innerHTML:t.text},null,8,W),Q])],64)}const X=m(F,[["render",J]]),Z={data(){return{item:null}},mounted(){window.addEventListener("show-chashback-info",o=>{this.item=o.detail.item||null,this.$nextTick(()=>{$("#cashback-item-info").showMenu()})})},methods:{}},ee={id:"cashback-item-info",class:"menu menu-box-bottom menu-box-detached rounded-m d-block",style:{height:"50vh",display:"block"},"data-menu-effect":"menu-over"},te={key:0,class:"w-100"},se={class:"table table-borderless rounded-sm shadow-l m-0",style:{overflow:"hidden"}},oe=e("thead",null,[e("tr",{class:"bg-gray1-dark"},[e("th",{scope:"col",class:"color-theme"},"Параметр"),e("th",{scope:"col",class:"color-theme"},"Значение")])],-1),ne=e("th",{scope:"row"},"Тип операции",-1),le={class:"font-weight-bold"},ie=e("th",{scope:"row"},"Сумма CashBack, руб",-1),re={class:"font-weight-bold"},ce={key:0},ae=e("th",{scope:"row"},"Уровень начисления",-1),de={class:"font-weight-bold"},he={key:1},ue=e("th",{scope:"row"},"Сумма в чеке, руб",-1),me={class:"font-weight-bold"},pe=e("th",{scope:"row"},"Дата операции",-1),_e={class:"font-weight-bold"},fe=e("th",{scope:"row"},"Описание операции",-1),be={class:"font-weight-bold"},ge=e("th",{scope:"row"},"TG id сотрудника",-1),we={class:"font-weight-bold"},ke=e("th",{scope:"row"},"Имя сотрудника",-1),ve={class:"font-weight-bold"},ye=e("th",{scope:"row"},"Телефон сотрудника",-1),xe={class:"font-weight-bold"};function $e(o,s,l,a,t,i){return r(),c("div",ee,[t.item?(r(),c("div",te,[e("table",se,[oe,e("tbody",null,[e("tr",null,[ne,e("td",le,d(t.item.operation_type?"Начисление":"Списание"),1)]),e("tr",null,[ie,e("td",re,d(t.item.amount||0),1)]),t.item.operation_type?(r(),c("tr",ce,[ae,e("td",de,d(t.item.level||0),1)])):u("",!0),t.item.operation_type?(r(),c("tr",he,[ue,e("td",me,d(t.item.money_in_check||0),1)])):u("",!0),e("tr",null,[pe,e("td",_e,d(o.$filters.current(t.item.created_at)),1)]),e("tr",null,[fe,e("td",be,d(t.item.description||"Нет описания"),1)]),e("tr",null,[ge,e("td",we,d(t.item.employee.telegram_chat_id||"Не указано"),1)]),e("tr",null,[ke,e("td",ve,d(t.item.employee.fio_from_telegram||"Не указано"),1)]),e("tr",null,[ye,e("td",xe,d(t.item.employee.phone||"Не указано"),1)])])])])):u("",!0)])}const Ce=m(Z,[["render",$e]]),Me={props:{code:{type:String,default:"001"}},computed:{self(){return window.self},script(){return window.currentScript},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){switch(this.code){case"001":return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa((this.code||"001")+this.self.telegram_chat_id);case"002":return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("002"+this.self.telegram_chat_id+"S"+this.script);default:return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa(this.code)}}},methods:{copy(){var o=$("<input>");$("body").append(o),o.val(this.link).select(),document.execCommand("copy"),o.remove()}}},qe={class:"w-100 p-3 object-fit-cover my-0",alt:""};function Le(o,s,l,a,t,i){const n=C("lazy");return r(),c(g,null,[_(e("img",qe,null,512),[[n,i.qr]]),e("a",{href:"javascript:void(0)",onClick:s[0]||(s[0]=k((...f)=>i.copy&&i.copy(...f),["prevent"])),class:"btn btn-link w-100 text-center"},"Скопировать ссылку")],64)}const q=m(Me,[["render",Le]]),Be={id:"qr-code",class:"menu menu-box-bottom menu-box-detached rounded-m d-block",style:{height:"70vh",display:"block"},"data-menu-effect":"menu-over"},Pe={key:0,class:"w-100 p-3"},Te=e("p",{class:"mb-0 text-center"},"Дайте отсканировать этот QR-код",-1),je={data(){return{code:null}},mounted(){window.addEventListener("show-qr-code",o=>{this.code=null,this.$nextTick(()=>{this.code=o.detail.code||null,$("#qr-code").showMenu()})})},methods:{}},Ne=Object.assign(je,{__name:"QrCodeModal",setup(o){return(s,l)=>(r(),c("div",Be,[s.code?(r(),c("div",Pe,[Te,h(q,{code:s.code},null,8,["code"])])):u("",!0)]))}}),Se={data(){return{params:{win:"Номер выигрыша",name:"Ф.И.О.",phone:"Телефон",answered_by:"Кто проверил",answered_at:"Дата ответа"},item:null,eventCallbackForm:{info:null},loading:!1}},mounted(){window.addEventListener("show-event-info",o=>{this.item=o.detail.item||null,this.$nextTick(()=>{$("#event-item-info").showMenu()})})},methods:{sendApproveToUser(){this.loading=!0,this.$store.dispatch("sendApproveToUser",{dataObject:{user_telegram_chat_id:this.item.bot_user.telegram_chat_id,action_id:this.item.id,...this.eventCallbackForm}}).then(o=>{this.loading=!1,this.eventCallbackForm.info=null,$("#event-item-info").hideMenu(),this.$botNotification.success("Отлично!","Оповещение успешно отправлено")}).catch(()=>{this.loading=!1,$("#event-item-info").hideMenu(),this.$botNotification.warning("Упс!","Что-то пошло не так")})}}},Ee={id:"event-item-info",class:"menu menu-box-bottom menu-box-detached rounded-m d-block",style:{height:"50vh",display:"block"},"data-menu-effect":"menu-over"},Fe={key:0,class:"w-100 p-3"},Re=e("h4",null,"Информирование пользователя",-1),Oe={key:0},Ue={key:1},Ve={class:"mb-0"},Ae={class:"mb-3"},ze=e("label",{for:"bill-info",class:"form-label"},"Сообщение для пользователя",-1),Ie={class:"mb-3"},Ye=["disabled"];function De(o,s,l,a,t,i){return r(),c("div",Ee,[t.item?(r(),c("div",Fe,[Re,e("ul",null,[e("li",null," № события: "+d(t.item.slug.id),1),e("li",null," Название события: "+d(t.item.slug.command),1),e("li",null," Использовано попыток: "+d(t.item.current_attempts),1),e("li",null,[p(" Дата прохождения: "),t.item.completed_at?(r(),c("span",Oe,d(o.$filters.current(t.item.completed_at)),1)):(r(),c("span",Ue,"Не установлена"))]),(r(!0),c(g,null,w(t.item.data,n=>(r(),c("li",null,[(r(!0),c(g,null,w(Object.keys(n),f=>(r(),c("p",Ve,d(t.params[f])+":"+d(n[f]||"Не установлено"),1))),256))]))),256))]),e("form",{onSubmit:s[1]||(s[1]=k((...n)=>i.sendApproveToUser&&i.sendApproveToUser(...n),["prevent"]))},[e("div",Ae,[ze,_(e("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":s[0]||(s[0]=n=>t.eventCallbackForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[b,t.eventCallbackForm.info]])]),e("div",Ie,[e("button",{disabled:t.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить ",8,Ye)])],32)])):u("",!0)])}const He=m(Se,[["render",De]]),Ge={id:"menu-share",class:"menu menu-box-bottom menu-box-detached rounded-m d-block",style:{height:"420px"}},Ke=e("h1",{class:"text-center font-700 font-26 mt-3 pt-2"},"Поделиться контактами",-1),We=e("p",{class:"boxed-text-xl under-heading m-0 p-0"}," Делитесь ссылкой с друзьями ",-1),Qe=e("div",{class:"divider divider-margins"},null,-1),Je={class:"row text-center mr-4 ml-4 mb-0"},Xe={class:"col-3 mb-n2"},Ze=e("i",{class:"fab fa-facebook-f font-22"},null,-1),et=e("br",null,null,-1),tt=[Ze,et],st=e("p",{class:"font-11 opacity-70"},"Facebook",-1),ot={class:"col-3 mb-n2"},nt=e("i",{class:"fab fa-twitter font-22"},null,-1),lt=e("br",null,null,-1),it=[nt,lt],rt=e("p",{class:"font-11 opacity-70"},"Twitter",-1),ct={class:"col-3 mb-n2"},at=e("i",{class:"fa-brands fa-vk font-22"},null,-1),dt=e("br",null,null,-1),ht=[at,dt],ut=e("p",{class:"font-11 opacity-70"},"VK",-1),mt={class:"col-3 mb-n2"},pt=e("i",{class:"fa fa-envelope font-22"},null,-1),_t=e("br",null,null,-1),ft=[pt,_t],bt=e("p",{class:"font-11 opacity-70"},"Email",-1),gt={class:"col-3 mb-n2"},wt=e("i",{class:"fab fa-whatsapp font-22"},null,-1),kt=e("br",null,null,-1),vt=[wt,kt],yt=e("p",{class:"font-11 opacity-70"},"WhatsApp",-1),xt={class:"col-3 mb-n2"},$t=e("i",{class:"fa fa-link font-22"},null,-1),Ct=e("br",null,null,-1),Mt=[$t,Ct],qt=e("p",{class:"font-11 opacity-70"},"Копировать",-1),Lt={class:"col-3 mb-n2"},Bt=e("i",{class:"fab fa-pinterest-p font-22"},null,-1),Pt=e("br",null,null,-1),Tt=[Bt,Pt],jt=e("p",{class:"font-11 opacity-70"},"Pinterest",-1),Nt=e("div",{class:"col-3 mb-n2"},[e("a",{href:"#",class:"close-menu icon icon-l bg-red2-dark rounded-s shadow-l text-white"},[e("i",{class:"fa fa-times font-22"}),e("br")]),e("p",{class:"font-11 opacity-70"},"Закрыть")],-1),St=e("div",{class:"divider divider-margins mt-n1 mb-3"},null,-1),Et=e("div",{class:"divider divider-margins mt-n1 mb-3"},null,-1),Ft=e("p",{class:"footer-copyright font-10 text-center pb-3 mb-1"},[p("© CashMan "),e("span",{id:"copyright-year"},"2023"),p(". Все Права защищены.")],-1),Rt={computed:{self(){return window.self},tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},methods:{open(o){this.tg.openLink(o)},copy(){var o=$("<input>");$("body").append(o),o.val(this.link).select(),document.execCommand("copy"),o.remove()}}},Ot=Object.assign(Rt,{__name:"ShareMenuBar",setup(o){return(s,l)=>(r(),c("div",Ge,[Ke,We,Qe,e("div",Je,[e("div",Xe,[e("a",{href:"#",onClick:l[0]||(l[0]=a=>s.open("https://www.facebook.com/sharer/sharer.php?u="+s.link)),class:"icon icon-l bg-facebook rounded-s shadow-l text-white"},tt),st]),e("div",ot,[e("a",{href:"#",onClick:l[1]||(l[1]=a=>s.open("https://twitter.com/home?status="+s.link)),class:"icon icon-l bg-twitter rounded-s shadow-l text-white"},it),rt]),e("div",ct,[e("a",{href:"#",onClick:l[2]||(l[2]=a=>s.open("https://vk.com/share.php?url="+s.link)),class:"icon icon-l bg-linkedin rounded-s shadow-l text-white"},ht),ut]),e("div",mt,[e("a",{href:"#",onClick:l[3]||(l[3]=a=>s.open("mailto:?body="+s.link)),class:"icon icon-l bg-mail rounded-s shadow-l text-white"},ft),bt]),e("div",gt,[e("a",{href:"#",onClick:l[4]||(l[4]=a=>s.open("whatsapp://send?text="+s.link)),class:"icon icon-l bg-whatsapp rounded-s shadow-l text-white"},vt),yt]),e("div",xt,[e("a",{href:"#",onClick:l[5]||(l[5]=(...a)=>s.copy&&s.copy(...a)),class:"shareToCopyLink icon icon-l bg-blue2-dark rounded-s shadow-l text-white"},Mt),qt]),e("div",Lt,[e("a",{href:"#",onClick:l[6]||(l[6]=a=>s.open("https://pinterest.com/pin/create/button/?url="+s.link)),class:"icon icon-l bg-pinterest rounded-s shadow-l text-white"},Tt),jt]),Nt]),St,h(q,{code:"001"}),Et,Ft]))}}),Ut={},Vt={id:"menu-highlights",class:"menu menu-box-bottom menu-box-detached rounded-m",style:{display:"block",height:"510px"}},At=N('<div class="card header-card shape-rounded h-40"><div class="card-overlay bg-highlight opacity-95"></div><div class="card-bg preload-img" data-src="images/pictures/20s.jpg"></div></div><h1 class="text-center mt-4 font-35 font-800">CashMan</h1><p class="text-center font-12 mt-n1 pb-2 mb-3">Добавь красок в свою жизнь</p><div class="card card-style"><div class="highlight-changer pt-3 pb-2"><p class="text-center px-3"> Доступные цветовые схемы для использования в приложении. Нажми на кружочек и цветовая схема автоматически будет применена. </p><a href="#" data-change-highlight="blue2"><i class="fa fa-circle color-blue2-dark"></i><span class="color-blue2-light">Default</span></a><a href="#" data-change-highlight="red2"><i class="fa fa-circle color-red1-dark"></i><span class="color-red2-light">Red</span></a><a href="#" data-change-highlight="orange"><i class="fa fa-circle color-orange-dark"></i><span class="color-orange-light">Orange</span></a><a href="#" data-change-highlight="pink2"><i class="fa fa-circle color-pink2-dark"></i><span class="color-pink2-light">Pink</span></a><a href="#" data-change-highlight="magenta2"><i class="fa fa-circle color-magenta2-dark"></i><span class="color-magenta2-light">Purple</span></a><a href="#" data-change-highlight="aqua"><i class="fa fa-circle color-aqua-dark"></i><span class="color-aqua-light">Aqua</span></a><a href="#" data-change-highlight="teal"><i class="fa fa-circle color-teal-dark"></i><span class="color-teal-light">Teal</span></a><a href="#" data-change-highlight="mint"><i class="fa fa-circle color-mint-dark"></i><span class="color-mint-light">Mint</span></a><a href="#" data-change-highlight="green2"><i class="fa fa-circle color-green2-dark"></i><span class="color-green2-light">Green</span></a><a href="#" data-change-highlight="green1"><i class="fa fa-circle color-green1-dark"></i><span class="color-green1-light">Grass</span></a><a href="#" data-change-highlight="yellow2"><i class="fa fa-circle color-yellow2-dark"></i><span class="color-yellow2-light">Sunny</span></a><a href="#" data-change-highlight="yellow1"><i class="fa fa-circle color-yellow1-dark"></i><span class="color-yellow1-light">Goldish</span></a><a href="#" data-change-highlight="brown1"><i class="fa fa-circle color-brown1-dark"></i><span class="color-brown1-light">Wood</span></a><a href="#" data-change-highlight="dark1"><i class="fa fa-circle color-dark1-dark"></i><span class="color-dark1-light">Night</span></a><a href="#" data-change-highlight="dark2"><i class="fa fa-circle color-dark2-dark"></i><span class="color-dark2-light">Dark</span></a><div class="clearfix"></div></div></div><a href="#" class="close-menu btn btn-full btn-margins rounded-sm shadow-l bg-highlight btn-m font-900 text-uppercase mb-0">Закрыть смену цвета</a>',5),zt=[At];function It(o,s,l,a,t,i){return r(),c("div",Vt,zt)}const Yt=m(Ut,[["render",It]]),Dt={data(){return{load:!1}},mounted(){window.addEventListener("preloader-toggle",o=>{this.load=!this.load}),window.addEventListener("preloader-hide",o=>{this.load=!1}),window.addEventListener("preloader-show",o=>{this.load=!0,setTimeout(()=>{this.load=!1},1e3)})}},Ht={key:0,id:"preloader"},Gt=e("div",{class:"spinner-border color-highlight",role:"status"},null,-1),Kt=[Gt];function Wt(o,s,l,a,t,i){return t.load?(r(),c("div",Ht,Kt)):u("",!0)}const Qt=m(Dt,[["render",Wt]]),Jt={data(){return{id:null}},mounted(){window.addEventListener("open-page-menu-modal",o=>{this.id=o.detail.id||null,$("#menu-page-editor").showMenu()})},methods:{duplicatePage(){this.loading=!0,this.$store.dispatch("duplicatePage",{dataObject:{pageId:this.id}}).then(o=>{this.loading=!1,$("#menu-page-editor").hideMenu(),this.$botPages.reloadPageList()}).catch(()=>{this.loading=!1})},removePage(){this.loading=!0,this.$store.dispatch("removePage",{dataObject:{pageId:this.id}}).then(o=>{this.loading=!1,$("#menu-page-editor").hideMenu(),this.$botPages.reloadPageList()}).catch(()=>{this.loading=!1})}}},Xt={id:"menu-page-editor",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"305","data-menu-effect":"menu-over",style:{height:"275px",display:"block"}},Zt=e("h1",{class:"text-center mt-4"},[e("i",{class:"fa fa-3x fa-check-circle color-green1-dark"})],-1),es=e("h1",{class:"text-center mt-3 text-uppercase font-700"},"Меню страницы",-1),ts=e("i",{class:"fa-solid fa-copy mr-1"},null,-1),ss=e("i",{class:"fa-solid fa-trash mr-1"},null,-1);function os(o,s,l,a,t,i){return r(),c("div",Xt,[Zt,es,e("a",{href:"javascript:void(0)",onClick:s[0]||(s[0]=(...n)=>i.duplicatePage&&i.duplicatePage(...n)),"data-dismiss":"menu-page-editor",class:"bg-highlight btn btn-m font-900 text-uppercase btn-center-xl mb-2"},[ts,p(" Дублировать страницу ")]),e("a",{href:"javascript:void(0)",onClick:s[1]||(s[1]=(...n)=>i.removePage&&i.removePage(...n)),"data-dismiss":"menu-page-editor",class:"bg-red2-dark btn btn-m font-900 text-uppercase btn-center-xl mb-2"},[ss,p(" Удалить страницу ")])])}const ns=m(Jt,[["render",os]]),ls={data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},mounted(){window.addEventListener("open-rules-modal",o=>{$("#rules-selector").showMenu()})},methods:{duplicatePage(){this.loading=!0,this.$store.dispatch("duplicatePage",{dataObject:{pageId:this.id}}).then(o=>{this.loading=!1,$("#menu-page-editor").hideMenu(),this.$botPages.reloadPageList()}).catch(()=>{this.loading=!1})},removePage(){this.loading=!0,this.$store.dispatch("removePage",{dataObject:{pageId:this.id}}).then(o=>{this.loading=!1,$("#menu-page-editor").hideMenu(),this.$botPages.reloadPageList()}).catch(()=>{this.loading=!1})},addRules(o){this.$botPages.selectRule(o),$("#rules-selector").hideMenu()}}},is={id:"rules-selector",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"400","data-menu-effect":"menu-over",style:{height:"400px",display:"block"}},rs=e("h1",{class:"text-center mt-3 text-uppercase font-700"},"Выбор правила",-1),cs={class:"list-group list-custom-small px-2"},as=["onClick"],ds=e("i",{class:"fa font-13 fa-check color-green1-dark"},null,-1);function hs(o,s,l,a,t,i){return r(),c("div",is,[rs,e("div",cs,[(r(!0),c(g,null,w(t.rules,n=>(r(),c("a",{onClick:f=>i.addRules(n),href:"javascript:void(0)"},[ds,e("span",null,d(n.title||"Не указан"),1)],8,as))),256))])])}const us=m(ls,[["render",hs]]),ms={data(){return{load:!1,keyboard:null,select:{uuid:null,row:0,col:0,type:null}}},mounted(){window.addEventListener("open-keyboard-editor",o=>{const s=o.detail.select,l=o.detail.keyboard||null;this.select=s,this.keyboard=l,$("#keyboard-editor").showMenu()})},methods:{needRemoveField(o,s,l){Object.keys(this.keyboard[s][l]).forEach(a=>{a!=="text"&&a!==o&&delete this.keyboard[s][l][a]})}}},ps={id:"keyboard-editor",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"405","data-menu-effect":"menu-over",style:{height:"405px",display:"block"}},_s={class:"mb-3"},fs=["for"],bs=["id"],gs=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),ws=e("div",{class:"alert alert-danger",role:"alert"}," Возможно выбрать только 1 тип действия ",-1),ks={class:"mb-3"},vs=["for"],ys=["id"],xs={class:"mb-3"},$s=["for"],Cs=["id"],Ms={class:"mb-3"},qs=["for"],Ls=["id"],Bs={class:"mb-3"},Ps=["for"],Ts=["id"],js={class:"form-check"},Ns=["id"],Ss=["for"],Es={key:0,class:"form-check"},Fs=["id"],Rs=["for"],Os={class:"form-check"},Us=["id"],Vs=["for"],As={class:"form-check"},zs=["id"],Is=["for"];function Ys(o,s,l,a,t,i){return r(),c("div",ps,[t.keyboard?(r(),c("form",{key:0,class:"px-3 py-3",onSubmit:s[16]||(s[16]=k((...n)=>o.submitKeyboard&&o.submitKeyboard(...n),["prevent"]))},[e("div",_s,[e("label",{for:"title-row-"+t.select.row+"-col-"+t.select.col,class:"form-label"},"Название поля",8,fs),_(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>t.keyboard[t.select.row][t.select.col].text=n),class:"form-control",id:"title-row-"+t.select.row+"-col-"+t.select.col,placeholder:"Название"},null,8,bs),[[b,t.keyboard[t.select.row][t.select.col].text]])]),gs,ws,e("div",ks,[e("label",{for:"command-row-"+t.select.row+"-col-"+t.select.col,class:"form-label"},"Команда (для меню в сообщении)",8,vs),_(e("input",{type:"text",onChange:s[1]||(s[1]=n=>i.needRemoveField("callback_data",t.select.row,t.select.col)),"onUpdate:modelValue":s[2]||(s[2]=n=>t.keyboard[t.select.row][t.select.col].callback_data=n),class:"form-control",id:"command-row-"+t.select.row+"-col-"+t.select.col,placeholder:"/start"},null,40,ys),[[b,t.keyboard[t.select.row][t.select.col].callback_data]])]),e("div",xs,[e("label",{for:"switch-inline-query-row-"+t.select.row+"-col-"+t.select.col,class:"form-label"},"Ссылка на аккаунт в ТЕЛЕГРАММ",8,$s),_(e("input",{type:"text",class:"form-control",onChange:s[3]||(s[3]=n=>i.needRemoveField("switch_inline_query",t.select.row,t.select.col)),"onUpdate:modelValue":s[4]||(s[4]=n=>t.keyboard[t.select.row][t.select.col].switch_inline_query=n),id:"switch-inline-query-row-"+t.select.row+"-col-"+t.select.col,placeholder:"@YourAccountLink"},null,40,Cs),[[b,t.keyboard[t.select.row][t.select.col].switch_inline_query]])]),e("div",Ms,[e("label",{for:"url-row-"+t.select.row+"-col-"+t.select.col,class:"form-label"},"Внешняя URL-ссылка",8,qs),_(e("input",{type:"text",class:"form-control",onChange:s[5]||(s[5]=n=>i.needRemoveField("url",t.select.row,t.select.col)),"onUpdate:modelValue":s[6]||(s[6]=n=>t.keyboard[t.select.row][t.select.col].url=n),id:"url-row-"+t.select.row+"-col-"+t.select.col,placeholder:"https://t.me/example"},null,40,Ls),[[b,t.keyboard[t.select.row][t.select.col].url]])]),e("div",Bs,[e("label",{for:"switch-inline-query-current-chat-row-"+t.select.row+"-col-"+t.select.col,class:"form-label"},"Команда всплывающего меню бота",8,Ps),_(e("input",{type:"text",class:"form-control",onChange:s[7]||(s[7]=n=>i.needRemoveField("switch_inline_query_current_chat",t.select.row,t.select.col)),"onUpdate:modelValue":s[8]||(s[8]=n=>t.keyboard[t.select.row][t.select.col].switch_inline_query_current_chat=n),id:"witch-inline-query-current-chat-row-"+t.select.row+"-col-"+t.select.col,placeholder:"команда"},null,40,Ts),[[b,t.keyboard[t.select.row][t.select.col].switch_inline_query_current_chat]])]),e("div",js,[e("input",{type:"radio",onChange:s[9]||(s[9]=n=>i.needRemoveField(null,t.select.row,t.select.col)),name:"request-radio",class:"form-check-input",id:"no-action-row-"+t.select.row+"-col-"+t.select.col},null,40,Ns),e("label",{class:"form-check-label",for:"no-action-row-"+t.select.row+"-col-"+t.select.col}," Без действий ",8,Ss)]),t.select.row===0?(r(),c("div",Es,[e("input",{type:"radio",onChange:s[10]||(s[10]=n=>i.needRemoveField("pay",t.select.row,t.select.col)),onClick:s[11]||(s[11]=n=>t.keyboard[t.select.row][t.select.col].pay=!0),name:"request-radio",class:"form-check-input",id:"pay-action-row-"+t.select.row+"-col-"+t.select.col},null,40,Fs),e("label",{class:"form-check-label",for:"pay-action-row-"+t.select.row+"-col-"+t.select.col}," Кнопка оплаты ",8,Rs)])):u("",!0),e("div",Os,[e("input",{type:"radio",onChange:s[12]||(s[12]=n=>i.needRemoveField("request_contact",t.select.row,t.select.col)),onClick:s[13]||(s[13]=n=>t.keyboard[t.select.row][t.select.col].request_contact=!0),name:"request-radio",class:"form-check-input",id:"phone-row-"+t.select.row+"-col-"+t.select.col},null,40,Us),e("label",{class:"form-check-label",for:"phone-row-"+t.select.row+"-col-"+t.select.col}," Запросить телефон (для нижнего меню) ",8,Vs)]),e("div",As,[e("input",{type:"radio",name:"request-radio",onChange:s[14]||(s[14]=n=>i.needRemoveField("request_location",t.select.row,t.select.col)),onClick:s[15]||(s[15]=n=>t.keyboard[t.select.row][t.select.col].request_location=!0),class:"form-check-input",id:"location-row-"+t.select.row+"-col-"+t.select.col},null,40,zs),e("label",{class:"form-check-label",for:"location-row-"+t.select.row+"-col-"+t.select.col}," Запросить локацию (для нижнего меню) ",8,Is)])],32)):u("",!0)])}const Ds=m(ms,[["render",Ys]]),Hs={data(){return{param:null,channelLink:null}},mounted(){window.addEventListener("open-tg-helper-modal",o=>{this.param=o.detail.param,$("#tg-helper-modal").showMenu()})},methods:{checkLink(){this.channelLink.indexOf("https://t.me/")!==-1&&(this.channelLink="@"+(this.channelLink.split("https://t.me/")[1]||this.channelLink))},requestTelegramChannelId(){this.$store.dispatch("requestTelegramChannelId",{dataObject:{channel:this.channelLink}}).then(o=>{o.ok&&this.$botPages.telegramChannelCallback(this.param,o.result.chat.id),$("#tg-helper-modal").hideMenu(),o.ok&&this.$botNotification.success("Отлично","Канал успешно найден!"),o.ok||(this.$botNotification.warning("Ошибочка!","Неверно указанный канал"),this.$botPages.telegramChannelCallback(this.param,null))}).catch(()=>{})}}},Gs={id:"tg-helper-modal",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"210","data-menu-effect":"menu-over",style:{height:"210px",display:"block"}},Ks=e("p",{class:"mb-1 p-2"},"Укажите в полне ниже ссылку на ПУБЛИЧНЫЙ канал, в котором уже состоит БОТ в качестве администратора канала",-1),Ws=e("button",{class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"},"Узнать id канала ",-1);function Qs(o,s,l,a,t,i){return r(),c("div",Gs,[Ks,e("form",{onSubmit:s[2]||(s[2]=k((...n)=>i.requestTelegramChannelId&&i.requestTelegramChannelId(...n),["prevent"])),class:"p-2"},[_(e("input",{type:"text",class:"form-control mb-2",id:"search-description-text","onUpdate:modelValue":s[0]||(s[0]=n=>t.channelLink=n),onChange:s[1]||(s[1]=(...n)=>i.checkLink&&i.checkLink(...n)),placeholder:"@telegram_channel",required:""},null,544),[[b,t.channelLink]]),Ws],32)])}const Js=m(Hs,[["render",Qs]]),Xs={components:{YandexMap:L,YandexMarker:B},setup(){return{center:[45.03547,38.975313]}},data(){return{load:!0,coords:{lat:45.03547,lon:38.975313}}},mounted(){window.addEventListener("open-map-modal",o=>{$("#map-selector").showMenu()})},methods:{onClick(o){let s=o.get("coords");this.load=!1,this.coords.lat=s[0],this.coords.lon=s[1],this.$nextTick(()=>{this.load=!0}),this.$botNotification.notification("Координаты","Вы выбрали координаты"),this.$botPages.mapCallback(this.coords)}}},Zs={id:"map-selector",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"500","data-menu-effect":"menu-over",style:{height:"500px",display:"block"}},eo=e("h1",{class:"text-center mt-3 text-uppercase font-700"},"Выбор координаты",-1);function to(o,s,l,a,t,i){const n=v("YandexMarker"),f=v("YandexMap");return r(),c("div",Zs,[eo,h(f,{coordinates:[t.coords.lat,t.coords.lon],onClick:i.onClick},{default:y(()=>[t.load?(r(),M(n,{key:0,coordinates:[t.coords.lat,t.coords.lon],"marker-id":123},null,8,["coordinates"])):u("",!0)]),_:1},8,["coordinates","onClick"])])}const x=m(Xs,[["render",to]]),so={data(){return{notes:[],param:null}},mounted(){this.loadNotes(),window.addEventListener("open-notes-modal",o=>{this.param=o.detail.param,$("#notes-selector").showMenu()})},methods:{loadNotes(){this.loading=!0,this.$store.dispatch("loadNotes").then(o=>{this.loading=!1}).catch(()=>{this.loading=!1})},selectNote(o){this.$botPages.selectNote(o,this.param),$("#notes-selector").hideMenu()}}},oo={id:"notes-selector",class:"menu menu-box-bottom menu-box-detached rounded-m","data-menu-height":"400","data-menu-effect":"menu-over",style:{height:"400px",display:"block"}},no=e("h1",{class:"text-center mt-3 text-uppercase font-700"},"Выбор заметок",-1),lo={key:0,class:"list-group list-custom-small px-2"},io=["onClick"],ro=e("i",{class:"fa font-13 fa-check color-green1-dark"},null,-1);function co(o,s,l,a,t,i){return r(),c("div",oo,[no,t.notes.length>0?(r(),c("div",lo,[(r(!0),c(g,null,w(t.notes,n=>(r(),c("a",{onClick:f=>i.selectNote(n),href:"javascript:void(0)"},[ro,e("span",null,d(n.text||"Не указан"),1)],8,io))),256))])):u("",!0)])}const ao=m(so,[["render",co]]);const ho={key:0,class:"page-content",style:{"min-height":"667px"}},uo={class:"page-title page-title-small"},mo=e("i",{class:"fa fa-arrow-left"},null,-1),po={href:"javascript:void(0)",class:"bg-fade-gray1-dark shadow-xl d-flex justify-content-center align-items-center font-18 bot-avatar"},_o={style:{width:"50px","object-fit":"cover","border-radius":"50%"},alt:""},fo=e("div",{class:"card header-card shape-rounded",style:{height:"115px"}},[e("div",{class:"card-overlay bg-highlight opacity-95"}),e("div",{class:"card-overlay dark-mode-tint"}),e("div",{class:"card-bg preload-img","data-src":"/shop/images/pictures/20s.jpg"})],-1),bo={key:0,class:"footer"},go={class:"card card-style mb-0"},wo={href:"#",class:"footer-title p-4"},ko=e("p",{class:"text-center font-12 mt-n1 mb-3 opacity-70"},[p(" Добавь "),e("span",{class:"color-highlight"},"красок"),p(" в свою жизнь ")],-1),vo={class:"boxed-text-l"},yo={class:"text-center mb-3"},xo=e("i",{class:"fa-solid fa-at"},null,-1),$o=[xo],Co=e("i",{class:"fa-brands fa-vk"},null,-1),Mo=[Co],qo=e("i",{class:"fa fa-phone"},null,-1),Lo=[qo],Bo=e("a",{href:"#","data-menu":"menu-share",class:"icon icon-xs rounded-sm mr-1 shadow-l bg-red2-dark text-white"},[e("i",{class:"fa fa-share-alt"})],-1),Po=e("a",{href:"#",class:"back-to-top icon icon-xs rounded-sm shadow-l bg-highlight text-white"},[e("i",{class:"fa fa-arrow-up"})],-1),To=e("p",{class:"footer-copyright pb-3 mb-1"},[p("© CashMan "),e("span",{id:"copyright-year"},"2023"),p(". Все Права защищены.")],-1),jo=e("div",{class:"footer-card card shape-rounded","data-card-height":"230",style:{height:"230px"}},[e("div",{class:"card-overlay bg-highlight opacity-95"}),e("div",{class:"card-bg preload-img","data-src":"/shop/images/pictures/20s.jpg"})],-1),No={computed:{...S(["getSelf"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},self(){return window.self||null},tg(){return window.Telegram.WebApp},tgUser(){const o=new URLSearchParams(this.tg.initData);return JSON.parse(o.get("user"))},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},created(){window.currentScript=this.slug_id||null,window.currentBot=this.bot.data,this.$store.dispatch("loadSelf").then(()=>{window.self=this.getSelf}),this.$botNotification.success("Главная","Успешно!")},methods:{open(o){this.tg.openLink(o)}}},Yo=Object.assign(No,{__name:"Main",props:{bot:{type:Object},slug_id:{type:String}},setup(o){return(s,l)=>{const a=v("router-view"),t=C("lazy");return r(),M(E,null,{default:y(()=>[s.self?(r(),c("div",ho,[e("div",uo,[e("h2",null,[e("a",{href:"javascript:void(0)",onClick:l[0]||(l[0]=i=>s.$router.back())},[mo,p(" "+d(s.$route.meta.title||"Меню"),1)])]),e("a",po,[_(e("img",_o,null,512),[[t,s.logo]])])]),fo,h(a,{bot:o.bot},null,8,["bot"]),s.currentBot?(r(),c("div",bo,[e("div",go,[e("a",wo,d(s.currentBot.company.title||"CashMan:Shopify"),1),ko,e("p",vo,d(s.currentBot.company.description||"Описание вашего магазина"),1),e("div",yo,[s.currentBot.company.email?(r(),c("a",{key:0,href:"#",onClick:l[1]||(l[1]=i=>s.open("mailTo:"+s.currentBot.company.email)),class:"icon icon-xs rounded-sm shadow-l mr-1 bg-facebook text-white"},$o)):u("",!0),s.currentBot.company.links?(r(),c("a",{key:1,href:"#",onClick:l[2]||(l[2]=i=>s.open(s.currentBot.company.links[0])),class:"icon icon-xs rounded-sm shadow-l mr-1 bg-vk text-white"},Mo)):u("",!0),s.currentBot.company.phones?(r(),c("a",{key:2,href:"#",onClick:l[3]||(l[3]=i=>s.open("tel:"+s.currentBot.company.phones[0])),class:"icon icon-xs rounded-sm shadow-l mr-1 bg-phone text-white"},Lo)):u("",!0),Bo,Po]),To]),jo])):u("",!0)])):u("",!0)]),modals:y(()=>[h(Qt),h(P),h(Ce),h(Ne),h(He),h(X),h(Ot),h(Yt),h(T),h(j),h(ns),h(Ds),h(us),h(Js),h(x),h(x),h(ao)]),_:1})}}});export{Yo as default};
