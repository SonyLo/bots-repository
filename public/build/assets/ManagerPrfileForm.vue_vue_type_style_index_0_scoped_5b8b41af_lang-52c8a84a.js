import{bD as b,aT as g,aF as n,A as i,D as t,ar as m,O as r,b4 as d,by as c,bn as f,bz as y,z as l,y as _,F as u,aQ as v,ap as k}from"./index.es-0c1040a4.js";import{P as h}from"./Pagination-36c231ef.js";const w={class:"container pt-5"},B=t("h6",null,"Ваши доступные слоты",-1),C={class:"row"},j={class:"col-md-6"},S={class:"progress",role:"progressbar","aria-label":"Success striped example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},$={class:"col-md-4 d-flex justify-content-between"},P={class:"col-md-2"},O={class:"row d-flex justify-content-center"},z={class:"col-md-6 col-12"},A={class:"input-group mb-3"},D={class:"w-100 d-flex justify-content-center flex-wrap"},F=t("p",{class:"mb-0 text-primary font-bold"},[t("small",null,"Тип сортировки")],-1),M={class:"list-group d-flex flex-row w-100 justify-content-center"},V={key:0},I=t("i",{class:"fa-solid fa-caret-down"},null,-1),L=[I],N={key:1},T=t("i",{class:"fa-solid fa-caret-up"},null,-1),K=[T],E={key:0},G=t("i",{class:"fa-solid fa-caret-down"},null,-1),Q=[G],U={key:1},q=t("i",{class:"fa-solid fa-caret-up"},null,-1),H=[q],J={key:0},R=t("i",{class:"fa-solid fa-caret-down"},null,-1),W=[R],X={key:1},Y=t("i",{class:"fa-solid fa-caret-up"},null,-1),Z=[Y],x={key:0},tt=t("i",{class:"fa-solid fa-caret-down"},null,-1),st=[tt],et={key:1},ot=t("i",{class:"fa-solid fa-caret-up"},null,-1),nt=[ot],it={key:0,class:"row my-2"},at={class:"col-12"},lt={key:0,class:"container pb-5"},rt={key:0,href:"/bot-page"},dt={class:"row row-cols-1 row-cols-lg-3 row-cols-md-1 g-4"},ct={class:"col"},_t={class:"card h-100"},ut={class:"card-img-top"},ht={class:"card-body"},pt={class:"card-title text-center"},bt={class:"card-title text-center"},gt={class:"card-text text-center"},mt={class:"text-center"},ft=["onClick"],yt={class:"row my-5"},vt={class:"col-12"},kt={key:1,class:"container"},wt=t("div",{class:"alert alert-info",role:"alert"},[t("p",null,"У вас еще нет созданных ботов, попробуйте с чего-то простого;)")],-1),Bt={class:"d-flex justify-content-center"},Ct={data(){return{search:null,bots:[],direction:"desc",order:"updated_at",bots_paginate_object:null}},computed:{...b(["getBots","getBotsPaginateObject"]),getSelf(){return window.profile||null},slotsCount(){return this.getSelf.manager.max_bot_slot_count},slotsPercent(){return this.bots_paginate_object?(this.bots_paginate_object.meta.total||0)/(this.summarySlotCount+this.slotsCount)*100:this.bots.length/(this.summarySlotCount+this.slotsCount)*100},summarySlotCount(){return this.bots_paginate_object?this.bots_paginate_object.meta.total:0}},mounted(){this.loadBots(0)},methods:{nextBots(a){this.loadBots(a)},loadAndOrder(a){this.order=a,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(a=0){this.$store.dispatch("loadBots",{dataObject:{search:this.search,order:this.order,direction:this.direction},page:a,size:20}).then(()=>{this.bots=this.getBots||[],this.bots_paginate_object=this.getBotsPaginateObject||null})},loadCurrentBot(a=null){this.$store.dispatch("updateCurrentBot",{bot:a}).then(()=>{this.bot=this.getCurrentBot})},gotoBot(a){this.loadCurrentBot(a),localStorage.setItem("cashman_set_botform_step_index",0),localStorage.setItem("cashman_set_botpage_step_index",2),window.location.href="/bot-page"},callback(a){this.$emit("callback",a)}}},Pt=Object.assign(Ct,{__name:"ManagerSlotList",setup(a){return(s,o)=>{const p=g("lazy");return n(),i(u,null,[t("div",w,[B,t("div",C,[t("div",j,[t("div",S,[t("div",{class:"progress-bar progress-bar-striped bg-success",style:m({width:s.slotsPercent+"%"})},null,4)])]),t("div",$,[t("p",null,[r("Число слотов "),t("strong",null,d(s.getSelf.manager.max_bot_slot_count),1),r(". Отображается ботов "),t("strong",null,d(s.summarySlotCount),1),r(" шт. под вашим управлением")])]),t("div",P,[t("a",{href:"#",onClick:o[0]||(o[0]=e=>s.callback(12))},"Пополнить слоты")])]),t("div",O,[t("div",z,[t("div",A,[c(t("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":o[1]||(o[1]=e=>s.search=e),onKeydown:o[2]||(o[2]=y(e=>s.loadBots(0),["enter"])),"aria-describedby":"button-addon2"},null,544),[[f,s.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[3]||(o[3]=e=>s.loadBots(0)),type:"button",id:"button-addon2"},"Найти ")]),t("div",D,[F,t("ul",M,[t("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:o[4]||(o[4]=e=>s.loadAndOrder("id"))},[s.direction==="desc"&&s.order==="id"?(n(),i("span",V,L)):l("",!0),s.direction==="asc"&&s.order==="id"?(n(),i("span",N,K)):l("",!0),r(" Id ")]),t("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:o[5]||(o[5]=e=>s.loadAndOrder("title"))},[s.direction==="desc"&&s.order==="title"?(n(),i("span",E,Q)):l("",!0),s.direction==="asc"&&s.order==="title"?(n(),i("span",U,H)):l("",!0),r(" Название бота ")]),t("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:o[6]||(o[6]=e=>s.loadAndOrder("bot_domain"))},[s.direction==="desc"&&s.order==="bot_domain"?(n(),i("span",J,W)):l("",!0),s.direction==="asc"&&s.order==="bot_domain"?(n(),i("span",X,Z)):l("",!0),r(" Домен бота ")]),t("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:o[7]||(o[7]=e=>s.loadAndOrder("updated_at"))},[s.direction==="desc"&&s.order==="updated_at"?(n(),i("span",x,st)):l("",!0),s.direction==="asc"&&s.order==="updated_at"?(n(),i("span",et,nt)):l("",!0),r(" Дата обновления ")])])])])]),s.bots.length>0?(n(),i("div",it,[t("div",at,[s.bots_paginate_object?(n(),_(h,{key:0,onPagination_page:s.nextBots,pagination:s.bots_paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0)]),s.bots.length>0?(n(),i("div",lt,[t("h6",null,[r("Ваши созданные боты "),s.getSelf.is_admin?(n(),i("a",rt,"перейти в раздел")):l("",!0)]),t("div",dt,[(n(!0),i(u,null,v(s.bots,e=>(n(),i("div",ct,[t("div",_t,[c(t("img",ut,null,512),[[p,"/images-by-bot-id/"+e.id+"/"+e.image]]),t("div",ht,[t("h6",pt,"#"+d(e.id),1),t("h5",bt,d(e.title||e.id),1),t("p",gt,d(e.short_description||"Без описания"),1),t("p",mt,[t("small",null,d(s.$filters.currentFull(e.updated_at)),1)])]),t("div",{class:k(["card-footer",{"bg-danger":(e.bot_token||"").length<40,"bg-success":(e.bot_token||"").length>=40}])},[t("button",{type:"button",onClick:jt=>s.gotoBot(e),class:"btn btn-link text-white w-100"},"Редактировать ",8,ft)],2)])]))),256))]),t("div",yt,[t("div",vt,[s.bots_paginate_object?(n(),_(h,{key:0,onPagination_page:s.nextBots,pagination:s.bots_paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])])):(n(),i("div",kt,[wt,t("div",Bt,[t("button",{class:"btn btn-primary",onClick:o[8]||(o[8]=e=>s.callback(0))},"Поехали создавать")])]))],64)}}});export{Pt as _};
