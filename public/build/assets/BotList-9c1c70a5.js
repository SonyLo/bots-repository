import{a as Bs,_ as Co,b as Fo,c as Oa}from"./Mail-b4931459.js";import{q as r,t as d,v as t,F as Y,C as ee,y as b,x as M,D as g,A as c,P as De,H as f,X as Vt,K as J,G as Ne,J as E,R as ke,B as L,a7 as Pe,Y as gt,L as ss,O as S,a3 as We,M as zn,j as Os,o as ce,k as tt,a8 as os,a9 as Ns,a4 as rt,n as xt,g as se,a5 as zo,w as Wt,aa as mt,N as ye,ab as Ge,ac as ct,u as C,ad as at,a1 as on,ae as _s,af as Aa,f as Ma,ag as nn,z as ft,ah as Fs,ai as ja,aj as qa,ak as Ua,al as za,am as Va}from"./index.es-71d37bd0.js";import{_ as Vn,a as Rn,b as kt}from"./GlobalSlugList-f6ab7c35.js";import{P as st}from"./Pagination-c0ff4992.js";import{a as Ra}from"./CompanyList-66581a10.js";import{T as Es}from"./TelegramChannelHelper-d5723a62.js";import{_ as Ht}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */const Ya={props:["param"],data(){return{expressions:[{expression:"{{userName}}",description:"Имя пользователя"},{expression:"{{telegramChatId}}",description:"Идентификатор чата"},{expression:"{{referralLink}}",description:"Реферальная ссылка"},{expression:"{{referralQr}}",description:"Реферальный QR-код"}]}},methods:{expressionsSelect(s){this.$emit("callback",{param:this.param,text:s.expression})}}},Ia={class:"dropdown"},Ba=t("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-brands fa-hire-a-helper"})],-1),Na={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Ea=["onClick"];function Qa(s,e,o,a,n,l){return r(),d("div",Ia,[Ba,t("div",Na,[t("li",null,[(r(!0),d(Y,null,ee(n.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},b(i.description||"-"),9,Ea))),256))])])])}const La=Ht(Ya,[["render",Qa]]);const xa={class:"card-header d-flex justify-content-between align-items-center"},Wa={class:"d-flex"},Ha=t("i",{class:"fa-solid fa-arrow-left"},null,-1),Ka=[Ha],Xa={class:"dropdown"},Za=t("i",{class:"fa-solid fa-ellipsis"},null,-1),Ga=[Za],Ja={class:"dropdown-menu"},el=["data-bs-target"],tl=t("i",{class:"fa-regular fa-pen-to-square mr-1"},null,-1),sl=t("i",{class:"fa-solid fa-clone mr-1"},null,-1),ol=t("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),nl={key:0,class:"fa-solid fa-arrow-up-short-wide"},al={key:1,class:"fa-solid fa-arrow-down-short-wide"},ll={class:"card-body"},il={class:"row"},rl={class:"col-12"},dl={key:0},ul={key:1,class:"list-group list-group-numbered"},cl={class:"list-group-item d-flex justify-content-between align-items-start"},ml={class:"ms-2 me-auto"},hl=t("div",{class:"fw-bold"},"Идентификатор",-1),pl={class:"list-group-item d-flex justify-content-between align-items-start"},_l={class:"ms-2 me-auto"},vl=t("div",{class:"fw-bold"},"Команда",-1),fl={class:"list-group-item d-flex justify-content-between align-items-start"},bl={class:"ms-2 me-auto"},gl=t("div",{class:"fw-bold"},"Мнемоническое имя",-1),yl={class:"list-group-item d-flex justify-content-between align-items-start"},$l={class:"ms-2 me-auto"},kl=t("div",{class:"fw-bold"},"Пояснение",-1),wl={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},Cl={class:"ms-2 me-auto"},Fl=t("div",{class:"fw-bold"},"Набор параметров скрипта",-1),Tl={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},Dl=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Привязана страница")],-1),Sl=[Dl],Pl={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},Ol=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Глобальный скрипт")],-1),Al=[Ol],Ml={class:"list-group-item d-flex justify-content-between align-items-start"},jl={class:"ms-2 me-auto w-100"},ql=t("div",{class:"fw-bold"},"Перенести данные из:",-1),Ul=t("option",{value:null},"Не выбрано",-1),zl=["value"],Vl=t("p",{class:"my-2"},[t("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),Rl=["disabled"],Yl=["id"],Il={class:"modal-dialog modal-fullscreen"},Bl={class:"modal-content"},Nl={class:"modal-header"},El={class:"modal-title",id:"exampleModalLabel"},Ql=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ll={class:"modal-body"},xl=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Wl={props:["item","bot","selectMode","isActive"],data(){return{selected_slug_id:null,slugs:[],load:!1,simple:!0}},watch:{simple:function(){this.simple||this.loadAllSlugs()}},mounted(){},methods:{selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.selected_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(s=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(s=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},loadAllSlugs(){this.$store.dispatch("loadAllSlugs",{botId:this.bot.id}).then(s=>{this.slugs=s.data})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},Hl=Object.assign(Wl,{__name:"Slug",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",{class:M(["card",{"deprecated-slug":s.item.deprecated_at!=null,"global-slug":s.item.is_global,"bg-success text-white":s.isActive}])},[t("div",xa,[t("div",Wa,[t("button",{onClick:o[0]||(o[0]=(...a)=>e.selectSlug&&e.selectSlug(...a)),type:"button",title:"Выбрать команду",class:M(["btn btn-outline-primary mr-2",{"text-white":s.isActive}])},Ka,2),t("div",Xa,[t("button",{class:M([{"text-white border-white":s.isActive},"btn btn-outline-secondary"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ga,2),t("ul",Ja,[t("li",null,[t("a",{class:"dropdown-item cursor-pointer",onClick:o[1]||(o[1]=(...a)=>e.editSlug&&e.editSlug(...a)),"data-bs-toggle":"modal","data-bs-target":"#edit-slug-"+s.item.id},[tl,g(" Редактировать")],8,el)]),t("li",null,[t("a",{class:"dropdown-item cursor-pointer",onClick:o[2]||(o[2]=(...a)=>e.duplicateSlug&&e.duplicateSlug(...a))},[sl,g(" Дублировать")])]),t("li",null,[t("a",{class:"dropdown-item cursor-pointer",onClick:o[3]||(o[3]=(...a)=>e.removeSlug&&e.removeSlug(...a))},[ol,g(" Удалить")])])])])]),t("span",null,[t("small",null,[t("strong",null,"#"+b(s.item.id),1)])]),t("button",{type:"button",onClick:o[4]||(o[4]=a=>e.simple=!e.simple),class:M([{"text-white border-white":s.isActive},"btn btn-outline-primary ml-2"])},[e.simple?(r(),d("i",nl)):(r(),d("i",al))],2)]),t("div",ll,[t("div",il,[t("div",rl,[e.simple?(r(),d("p",dl,b(s.item.command||"Нет команды"),1)):(r(),d("ol",ul,[t("li",cl,[t("div",ml,[hl,g(" №"+b(s.item.id||"Нет идентификатора"),1)])]),t("li",pl,[t("div",_l,[vl,g(" "+b(s.item.command||"Нет команды"),1)])]),t("li",fl,[t("div",bl,[gl,g(" "+b(s.item.slug||"Slug"),1)])]),t("li",yl,[t("div",$l,[kl,g(" "+b(s.item.comment||"Пояснение не указано"),1)])]),s.item.config?(r(),d("li",wl,[t("div",Cl,[Fl,s.item.config?(r(!0),d(Y,{key:0},ee(s.item.config,a=>(r(),d("p",null,[t("strong",null,b(a.key||"Ключ не найден")+":",1),g(b(a.value||"Не указано"),1)]))),256)):c("",!0)])])):c("",!0),s.item.page?(r(),d("li",Tl,Sl)):c("",!0),s.item.is_global?(r(),d("li",Pl,Al)):c("",!0),t("li",Ml,[t("div",jl,[t("form",{onSubmit:o[6]||(o[6]=De((...a)=>e.submitRelocateData&&e.submitRelocateData(...a),["prevent"]))},[ql,f(t("select",{class:"form-control w-100","onUpdate:modelValue":o[5]||(o[5]=a=>e.selected_slug_id=a),required:""},[Ul,(r(!0),d(Y,null,ee(e.slugs,a=>(r(),d("option",{value:a.id},"#"+b(a.id)+" "+b(a.slug||"Не указан"),9,zl))),256))],512),[[Vt,e.selected_slug_id]]),Vl,t("button",{disabled:e.selected_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,Rl)],32)])])]))])])])],2),t("div",{class:"modal fade",id:"edit-slug-"+s.item.id,tabindex:"-1"},[t("div",Il,[t("div",Bl,[t("div",Nl,[t("h5",El,[g("Редактирование команды #"),t("span",null,b(s.item.id),1)]),Ql]),t("div",Ll,[e.load?c("",!0):(r(),J(Vn,{key:0,item:s.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"]))]),xl])])],8,Yl)],64))}}),Kl={key:0,class:"row"},Xl={class:"col-12 mb-2"},Zl={key:0},Gl=t("i",{class:"fa-solid fa-scroll"},null,-1),Jl={key:1},ei=t("i",{class:"fa-regular fa-square-minus"},null,-1),ti={key:0,class:"col-12"},si={class:"col-12"},oi={class:"form-floating mb-3"},ni=t("label",{for:"floatingInput"},"Быстрый поиск команды",-1),ai={class:"col-12 mb-2"},li={class:"form-check"},ii={class:"form-check-label",for:"need_global"},ri={key:0},di={key:1},ui={class:"form-check"},ci=t("label",{class:"form-check-label",for:"need_show_deleted"}," Удаленные ",-1),mi={key:1,class:"mb-3 col-12 col-sm-12"},hi={class:"table"},pi=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Команда"),t("th",{scope:"col"},"Пояснение"),t("th",{scope:"col"},"Глобальный"),t("th",{scope:"col"},"Действия")])],-1),_i=["onClick"],vi={key:0},fi=t("i",{class:"fa-solid fa-check text-success"},null,-1),bi=[fi],gi={key:1},yi=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),$i=[yi],ki={class:"dropdown"},wi=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),Ci={class:"dropdown-menu"},Fi={key:0},Ti=["onClick"],Di=t("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),Si={key:1},Pi=["onClick"],Oi=t("a",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#edit-table-slug"},[t("i",{class:"fa-regular fa-pen-to-square mr-1"}),g(" Редактировать")],-1),Ai=[Oi],Mi=["onClick"],ji=t("i",{class:"fa-solid fa-clone mr-1"},null,-1),qi=["href"],Ui=t("i",{class:"fa-regular fa-file-excel mr-1"},null,-1),zi={key:2},Vi=["onClick"],Ri=t("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Yi={key:3},Ii=["onClick"],Bi=t("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Ni={key:3,class:"mb-3 col-md-12"},Ei=t("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),Qi=[Ei],Li={class:"modal fade",id:"edit-table-slug",tabindex:"-1"},xi={class:"modal-dialog modal-fullscreen"},Wi={key:0,class:"modal-content"},Hi={class:"modal-header"},Ki={class:"modal-title",id:"exampleModalLabel"},Xi=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Zi={class:"modal-body"},Gi={class:"row"},Ji={class:"col-8"},er={class:"col-4"},tr={class:"list-group list-group-numbered"},sr={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},or={class:"ms-2 me-auto"},nr=t("div",{class:"fw-bold"},"Набор параметров скрипта",-1),ar={key:1},lr={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},ir=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Привязана страница")],-1),rr=[ir],dr={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},ur=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Является глобальным скриптом")],-1),cr=[ur],mr={class:"list-group-item d-flex justify-content-between align-items-start"},hr={class:"ms-2 me-auto w-100"},pr=t("div",{class:"fw-bold"},"Перенести данные из:",-1),_r=t("option",{value:null},"Не выбрано",-1),vr=["value"],fr=t("p",{class:"my-2"},[t("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),br=["disabled"],gr=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),yr={props:["command","canSelect"],data(){return{bot:null,relocated_slug_id:null,need_global:!0,need_show_deleted:!0,show:!1,load:!1,slugs:[],paginate:[],selectedSlug:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{ownSearch:function(s,e){this.loadSlugs()},need_global:function(s,e){this.loadSlugs()},need_show_deleted:function(s,e){this.loadSlugs()}},computed:{...Ne(["getCurrentBot","getSlugs","getSlugsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})})},methods:{nextSlugs(s){this.loadSlugs(s)},loadSlugs(s=0){return this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,needGlobal:this.need_global,needDeleted:this.need_show_deleted,search:this.ownSearch},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},callbackSlugs(){this.loadSlugs()},selectSlug(s){this.load=!0,this.$nextTick(()=>{this.selectedSlug=s,this.load=!1}),this.$emit("select",s)},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0;const s=this.selectedSlug;this.loadSlugs().then(()=>{let e=this.slugs.find(o=>o.id===s.id);this.selectSlug(e||null)}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},duplicateSlug(s){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:s.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.loadSlugs(),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.relocated_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(s=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(s=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},restoreSlug(s){this.load=!0,this.$store.dispatch("restoreSlug",{dataObject:{slugId:s.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно восстановлена",type:"success"}),this.loadSlugs(),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})},removeSlug(s){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:s.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.loadSlugs()}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},$r=Object.assign(yr,{__name:"BotSlugTableList",setup(s){return(e,o)=>(r(),d(Y,null,[e.bot?(r(),d("div",Kl,[t("div",Xl,[t("button",{type:"button",onClick:o[0]||(o[0]=a=>e.show=!e.show),class:"btn btn-outline-success p-3 w-100"},[e.show?(r(),d("span",Jl,[ei,g(" Свернуть форму добавления")])):(r(),d("span",Zl,[Gl,g(" Добавить глобальный скрипт")]))])]),e.show?(r(),d("div",ti,[e.bot?(r(),J(Rn,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),t("div",si,[t("div",oi,[f(t("input",{type:"search","onUpdate:modelValue":o[1]||(o[1]=a=>e.ownSearch=a),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[E,e.ownSearch]]),ni])]),t("div",ai,[t("div",li,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=a=>e.need_global=a),type:"checkbox",id:"need_global"},null,512),[[ke,e.need_global]]),t("label",ii,[e.need_global?(r(),d("span",ri,"Глобальные")):(r(),d("span",di,"Локальные"))])]),t("div",ui,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=a=>e.need_show_deleted=a),type:"checkbox",id:"need_show_deleted"},null,512),[[ke,e.need_show_deleted]]),ci])]),e.slugs&&e.bot?(r(),d("div",mi,[t("table",hi,[pi,t("tbody",null,[(r(!0),d(Y,null,ee(e.slugs,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",{scope:"row",class:M({"text-danger":a.deleted_at!=null})},b(a.id||"Нет идентификатора"),3),t("td",{onClick:l=>e.selectSlug(a),"data-bs-toggle":"modal","data-bs-target":"#edit-table-slug",class:M({"text-danger":a.deleted_at!=null})},b(a.command||"Нет команды"),11,_i),t("td",{class:M({"text-danger":a.deleted_at!=null})},b(a.comment||"Пояснение не указано"),3),t("td",null,[a.is_global?(r(),d("span",vi,bi)):(r(),d("span",gi,$i))]),t("td",null,[t("div",ki,[wi,t("ul",Ci,[s.canSelect?(r(),d("li",Fi,[t("a",{onClick:l=>e.selectSlug(a),title:"Выбрать команду",class:"dropdown-item cursor-pointer"},[Di,g(" Выбрать команду ")],8,Ti)])):c("",!0),s.canSelect?(r(),d("hr",Si)):c("",!0),t("li",{onClick:l=>e.selectSlug(a)},Ai,8,Pi),t("li",null,[t("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.duplicateSlug(a)},[ji,g(" Дублировать")],8,Mi)]),t("li",null,[t("a",{class:"dropdown-item cursor-pointer",target:"_blank",href:"/admin/slugs/action-data-export/"+a.id},[Ui,g(" Скачать данные участников")],8,qi)]),a.deleted_at==null?(r(),d("li",zi,[t("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.removeSlug(a)},[Ri,g(" Удалить")],8,Vi)])):c("",!0),a.deleted_at!=null?(r(),d("li",Yi,[t("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.restoreSlug(a)},[Bi,g(" Восстановить")],8,Ii)])):c("",!0)])])])],2))),256))])])])):c("",!0),e.paginate?(r(),J(st,{key:2,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0),e.slugs.length===0?(r(),d("div",Ni,Qi)):c("",!0)])):c("",!0),t("div",Li,[t("div",xi,[e.selectedSlug&&!e.load?(r(),d("div",Wi,[t("div",Hi,[t("h5",Ki,[g("Редактирование команды #"),t("span",null,b(e.selectedSlug.id),1)]),Xi]),t("div",Zi,[t("div",Gi,[t("div",Ji,[L(Vn,{item:e.selectedSlug,onCallback:e.slugFormCallback},null,8,["item","onCallback"])]),t("div",er,[t("ol",tr,[e.selectedSlug.config?(r(),d("li",sr,[t("div",or,[nr,(e.selectedSlug.config||[]).length>0?(r(!0),d(Y,{key:0},ee(e.selectedSlug.config,a=>(r(),d("p",null,[t("strong",null,b(a.key||"Ключ не найден")+":",1),g(b(a.value||"Не указано"),1)]))),256)):(r(),d("p",ar,"Отсутствует"))])])):c("",!0),e.selectedSlug.page?(r(),d("li",lr,rr)):c("",!0),e.selectedSlug.is_global?(r(),d("li",dr,cr)):c("",!0),t("li",mr,[t("div",hr,[t("form",{onSubmit:o[5]||(o[5]=De((...a)=>e.submitRelocateData&&e.submitRelocateData(...a),["prevent"]))},[pr,f(t("select",{class:"form-control w-100","onUpdate:modelValue":o[4]||(o[4]=a=>e.relocated_slug_id=a),required:""},[_r,(r(!0),d(Y,null,ee(e.slugs,a=>(r(),d("option",{value:a.id},"#"+b(a.id)+" "+b(a.slug||"Не указан"),9,vr))),256))],512),[[Vt,e.relocated_slug_id]]),fr,t("button",{disabled:e.relocated_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,br)],32)])])])])])]),gr])):c("",!0)])])],64))}}),kr={class:"row mt-2"},wr={class:"input-group mb-3"},Cr={key:0,class:"row"},Fr={class:"col-12 col-md-12 mb-3"},Tr={class:"table"},Dr=t("th",{scope:"col"},"#",-1),Sr=t("th",{scope:"col"},"Ф.И.О. из телеграмма",-1),Pr=t("th",{scope:"col"},"Имя пользователя",-1),Or=t("th",{scope:"col"},"Домен",-1),Ar=t("th",{scope:"col"},"Телефон",-1),Mr=t("th",{scope:"col"},"TG id",-1),jr={key:0,scope:"col"},qr={key:1,scope:"col"},Ur={key:2,scope:"col"},zr={key:3,scope:"col"},Vr={key:4,scope:"col"},Rr=["onClick"],Yr={scope:"row"},Ir=["href"],Br={key:1},Nr={key:0},Er=["onClick"],Qr=t("i",{class:"fa-solid fa-check text-success"},null,-1),Lr=[Qr],xr=["onClick"],Wr=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Hr=[Wr],Kr={key:1},Xr=["onClick"],Zr=t("i",{class:"fa-solid fa-check text-success"},null,-1),Gr=[Zr],Jr=["onClick"],ed=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),td=[ed],sd={key:2},od=["onClick"],nd=t("i",{class:"fa-solid fa-check text-success"},null,-1),ad=[nd],ld=["onClick"],id=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),rd=[id],dd={key:3},ud=["onClick"],cd=t("i",{class:"fa-solid fa-check text-success"},null,-1),md=[cd],hd=["onClick"],pd=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),_d=[pd],vd={key:4},fd=["onClick"],bd=t("i",{class:"fa-solid fa-check text-success"},null,-1),gd=[bd],yd=["onClick"],$d=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),kd=[$d],wd={class:"col-12"},Cd={key:1,class:"row"},Fd=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет пользователей ")],-1),Td=[Fd],Dd={props:["simple"],data(){return{bot:null,loading:!0,bot_users:[],search:null,bot_users_paginate_object:null}},computed:{...Ne(["getBotUsers","getBotUsersPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadUsers()})},methods:{selectUser(s){this.$emit("select",s)},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},changeUserStatus(s,e,o="is_admin"){this.bot_users[s][o]=e===1,this.$store.dispatch("changeUserStatus",{dataObject:{bot_user_id:this.bot_users[s].id,status:e,type:o}}).then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус пользователя успешно изменен! Пользователь оповещен об изменении статуса!",type:"success"})}).catch(()=>{this.$notify({title:"Конструктор ботов",text:"Ошибка изменения статуса",type:"error"})})},nextUsers(s){this.loadUsers(s)},loadUsers(s=0){this.loading=!0,this.$store.dispatch("loadBotUsers",{dataObject:{botId:this.bot.id||null,search:this.search},size:100,page:s}).then(e=>{this.loading=!1,this.bot_users=this.getBotUsers,this.bot_users_paginate_object=this.getBotUsersPaginateObject}).catch(()=>{this.loading=!1})}}},Xs=Object.assign(Dd,{__name:"BotUserList",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",kr,[t("div",wr,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск пользователя","aria-label":"Поиск пользователя",onKeydown:o[0]||(o[0]=Pe(a=>e.loadUsers(0),["enter"])),"onUpdate:modelValue":o[1]||(o[1]=a=>e.search=a)},null,544),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[2]||(o[2]=a=>e.loadUsers(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.bot_users.length>0?(r(),d("div",Cr,[t("div",Fr,[t("table",Tr,[t("thead",null,[t("tr",null,[Dr,Sr,Pr,Or,Ar,Mr,s.simple?c("",!0):(r(),d("th",jr,"Админ")),s.simple?c("",!0):(r(),d("th",qr,"VIP")),s.simple?c("",!0):(r(),d("th",Ur,"Доставщик")),s.simple?c("",!0):(r(),d("th",zr,"Менеджер")),s.simple?c("",!0):(r(),d("th",Vr,"За работой"))])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.bot_users,(a,n)=>(r(),d("tr",{onClick:l=>e.selectUser(a)},[t("th",Yr,b(a.id),1),t("td",null,b(a.fio_from_telegram||"Не указано"),1),t("td",null,b(a.name||"Не указано"),1),t("td",null,[a.username?(r(),d("a",{key:0,href:"https://t.me/"+a.username,target:"_blank"},"@"+b(a.username),9,Ir)):(r(),d("span",Br,"Не указано"))]),t("td",null,b(a.phone||"Не указано"),1),t("td",null,b(a.telegram_chat_id||"Не указано"),1),s.simple?c("",!0):(r(),d("td",Nr,[a.is_admin?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(n,0,"is_admin")},Lr,8,Er)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(n,1,"is_admin")},Hr,8,xr))])),s.simple?c("",!0):(r(),d("td",Kr,[a.is_vip?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(n,0,"is_vip")},Gr,8,Xr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(n,1,"is_vip")},td,8,Jr))])),s.simple?c("",!0):(r(),d("td",sd,[a.is_deliveryman?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(n,0,"is_deliveryman")},ad,8,od)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(n,1,"is_deliveryman")},rd,8,ld))])),s.simple?c("",!0):(r(),d("td",dd,[a.is_manager?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(n,0,"is_manager")},md,8,ud)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(n,1,"is_manager")},_d,8,hd))])),s.simple?c("",!0):(r(),d("td",vd,[a.is_work?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(n,0,"is_work")},gd,8,fd)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(n,1,"is_work")},kd,8,yd))]))],8,Rr))),256))])])]),t("div",wd,[e.bot_users_paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextUsers,pagination:e.bot_users_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Cd,Td))],64))}});const Sd={class:"row"},Pd={key:0,class:"col-12"},Od=t("p",null,[g("Для создания бота в Телеграм воспользуйтесь "),t("a",{href:"https://telegra.ph/Sozdanie-telegram-bota-02-02",class:"text-success font-bold",target:"_blank"},[t("i",{class:"fa-solid fa-triangle-exclamation mr-1"}),g("инструкцией")])],-1),Ad=[Od],Md={key:1,class:"col-12 mb-2"},jd={class:"position-relative p-4 text-center text-muted bg-body border border-dashed rounded-2"},qd={class:"d-flex justify-content-center mb-3"},Ud={alt:"",width:"100",height:"100"},zd=zn('<h1 class="text-body-emphasis">Создание бота</h1><p class="col-lg-8 mx-auto fs-5 text-muted"> Если вы решили создать бота с самого начала, без заготовленных страниц, скриптов и т.д., то воспользуйтесь данным разделом и предложенной ниже инструкцией. </p><div class="d-inline-flex gap-2"><a href="https://t.me/botfather" target="_blank" class="d-inline-flex align-items-center btn btn-primary btn-lg px-4 rounded-pill"> Создать бота в Телеграм </a><a href="https://telegra.ph/Sozdanie-telegram-bota-02-02" target="_blank" class="d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"> Инструкция </a></div>',3),Vd={class:"col-md-12 col-12"},Rd={class:"mb-3"},Yd={class:"form-label d-flex justify-content-between",id:"bot-token"},Id=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Bd=t("div",null,"Взять из BotFather при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),Nd=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ed={key:0,class:"row"},Qd={class:"col-12"},Ld={class:"nav nav-tabs justify-content-center"},xd={key:1,class:"nav-item"},Wd=t("a",{class:"nav-link text-secondary",href:"javascript:void(0)"},[t("i",{class:"fa-solid fa-triangle-exclamation mr-1"}),g(" Обратная связь")],-1),Hd=[Wd],Kd=t("i",{class:"fa-solid fa-skull-crossbones mr-1"},null,-1),Xd={class:"row py-3"},Zd={class:"col-md-12 col-12"},Gd={class:"form-check mb-3"},Jd=["value"],eu=t("label",{class:"form-check-label",for:"bot-select-company"}," Выбрать клиента из списка ",-1),tu={key:0,class:"font-bold"},su={key:0,class:"col-md-12 col-12"},ou={class:"col-md-12 col-12"},nu={class:"form-check mb-3"},au=["value"],lu=t("label",{class:"form-check-label",for:"bot-is-template"}," Сделать шаблоном ",-1),iu={key:1,class:"col-md-12 col-12"},ru={class:"mb-3"},du={class:"form-label",id:"bot-template-description"},uu=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),cu=t("div",null,"Если Вы создаете шаблон, а не реального бота ",-1),mu=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),hu={class:"col-md-12 col-12"},pu={class:"mb-3"},_u={class:"form-label",id:"bot-domain"},vu=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),fu=t("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),bu={key:0},gu=["href"],yu={class:"col-md-12 col-12"},$u={class:"card"},ku={class:"card-body"},wu=t("h6",null,"Настройка параметров бота в BotFather",-1),Cu={class:"mb-3"},Fu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-title"},Tu={key:0},Du={key:0,class:"text-secondary"},Su={class:"mb-3"},Pu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-short-description"},Ou={key:0,class:"text-secondary"},Au=t("div",{class:"alert alert-info",role:"alert"}," Данное описание видно в момент, когда пользователь делится ссылкой на бота, а также при нажатии на иконку бота. ",-1),Mu={class:"mb-3"},ju={class:"form-label d-flex justify-content-between align-items-center",id:"bot-long-description"},qu={key:0,class:"text-secondary"},Uu=t("div",{class:"alert alert-info",role:"alert"},[g(" Данное описание видно при первом запуске бота, оно должно содержать информацию о возможностях бота: "),t("ul",{class:"m-0 pl-2"},[t("li",null,"- система лояльности"),t("li",null,"- колесо фортуны"),t("li",null,"- интернет-магазин"),t("li",null,"- реферальная система")]),g(" и т.д. ")],-1),zu={key:0,class:"col-12"},Vu=t("div",{class:"alert alert-primary",role:"alert"},[t("strong",null,"Внимание!"),g(" Отображать пользователю команду "),t("strong",{class:"text-danger"},"/adminmenu"),g(" плохая идея. Команда доступна только администраторам системы, а обычный пользователь будет видеть ошибку. Это создаст негативное восприятие от работы сервиса. ")],-1),Ru=[Vu],Yu={class:"col-5"},Iu={class:"mb-3"},Bu=["onUpdate:modelValue","aria-describedby"],Nu={class:"col-5"},Eu={class:"mb-3"},Qu=["onUpdate:modelValue","aria-describedby"],Lu={class:"col-2"},xu=["onClick"],Wu=t("i",{class:"fa-regular fa-trash-can"},null,-1),Hu=[Wu],Ku={class:"row"},Xu={class:"col-12"},Zu={key:0},Gu={key:1},Ju=t("div",{class:"col-12 mt-2"},[t("div",{class:"alert alert-primary",role:"alert"},[t("strong",null,"Внимание!"),g(" Внесите сумму, которую вам дал Клиент! Эта сумма будет балансом Клиента для работы бота! Укажите тариф бота - это сумма, которую система будет списывать с клиента каждый день пока баланс бота не будет равен 0. "),t("br"),t("strong",null,"Внимание!"),g(" Вы можете начислить какую-то небольшую сумму для того чтобы клиент протестировал работу бота. При достижении нулевого баланса клиент будет оповещен об этом и должен будет пополнить счёт бота! ")])],-1),ec={class:"col-md-6 col-12"},tc={class:"mb-3"},sc={class:"form-label",id:"bot-balance"},oc=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),nc=t("div",null,"Начальная сумма денег на счету у конкретного бота",-1),ac=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),lc={class:"col-md-6 col-12"},ic={class:"mb-3"},rc={class:"form-label",id:"bot-tax-per-day"},dc=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),uc=t("div",null,"Сумма списания денег за сутки работы бота (тариф)",-1),cc=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),mc={class:"row py-3"},hc={class:"col-md-6 col-12"},pc={class:"mb-3"},_c=t("label",{class:"form-label",id:"bot-level-1"},[g(" Уровень 1 CashBack, % "),t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),vc={class:"col-md-6 col-12"},fc={class:"mb-3"},bc=t("label",{class:"form-label",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),gc={class:"col-md-6 col-12"},yc={class:"mb-3"},$c=t("label",{class:"form-label",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),kc={class:"mb-2"},wc={class:"form-check"},Cc=t("label",{class:"form-check-label",for:"need-cashback-fired"}," Необходимо настроить период сгорания CashBack ",-1),Fc={key:0,class:"col-md-12 col-12"},Tc={class:"mb-3"},Dc=t("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),Sc=["value"],Pc={key:0,class:"mb-3"},Oc=t("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),Ac={class:"col-12 mb-2"},Mc={class:"form-check"},jc=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),qc={key:1,class:"col-md-12 col-12"},Uc={class:"form-check mb-3 ml-3"},zc=["value"],Vc=t("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),Rc={class:"mb-3"},Yc=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ic=t("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),Bc=t("label",{class:"form-label",id:"payment_provider_token"},[g("Токен платежной системы "),t("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить")],-1),Nc={class:"col-12 mb-2"},Ec={class:"form-check"},Qc=t("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),Lc={key:2,class:"col-md-12 col-12"},xc={class:"mb-3"},Wc=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hc=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Kc=t("label",{class:"form-label",id:"bot-vk_shop_link"},[g("Ссылка на группу ВК с товарами "),t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),Xc={class:"mb-2"},Zc={class:"form-check"},Gc=t("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),Jc={key:3,class:"mb-2"},em=t("h6",null,"Настройка категорий CashBack-а",-1),tm={class:"d-flex justify-content-between align-items-center w-100"},sm=t("small",null,"Название категории",-1),om=["onClick"],nm=t("i",{class:"fa-regular fa-trash-can"},null,-1),am=[nm],lm=["onUpdate:modelValue","aria-describedby"],im=t("div",{class:"alert alert-primary",role:"alert"}," Категории CashBack - это возможность разделить накопления и траты CashBack пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),rm=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),dm={class:"mb-2"},um={class:"form-check"},cm=t("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),mm={key:4,class:"col-md-12 col-12 mb-2"},hm={class:"card border-warning"},pm={class:"card-body"},_m={class:"form-group"},vm=t("label",{class:"form-check-label",for:"warning-rules"},[t("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),g(" Правила критических оповещений ")],-1),fm=t("option",{value:null},"Не выбрано",-1),bm=["value"],gm={class:"card my-2 p-2"},ym={class:"row"},$m={class:"col-md-4 d-flex align-items-center"},km={class:"m-0"},wm={class:"col-md-2"},Cm={class:"form-check"},Fm=["onUpdate:modelValue","id"],Tm=["for"],Dm={key:0},Sm={key:1},Pm={class:"col-md-5"},Om=["onUpdate:modelValue"],Am={class:"col-md-1 d-flex justify-content-center"},Mm=["onClick"],jm=t("i",{class:"fa-solid fa-trash-can"},null,-1),qm=[jm],Um={class:"row py-3"},zm=t("div",{class:"col-12"},[t("div",{class:"alert alert-primary",role:"alert"},[t("strong",null,"Внимание!"),g(" Для того чтобы узнать ID канала сперва создайте Канал или Группу в телеграм, добавьте в него вашего "),t("strong",null,"сохраненного бота"),g(', назначьте бота администратором Канала или Группы, а только после этого впишите команду "Мой id" в бота. ')])],-1),Vm={class:"col-md-6 col-12"},Rm={class:"mb-3"},Ym={class:"d-flex justify-content-between align-items-center"},Im={class:"form-label d-flex justify-content-between",id:"bot-order-channel"},Bm=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Nm=t("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Em=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Qm={class:"col-md-6 col-12"},Lm={class:"mb-3"},xm={class:"d-flex justify-content-between"},Wm=t("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов (id,рекламный)",-1),Hm={key:0,class:"col-12"},Km=t("div",{class:"alert alert-primary",role:"alert"},[t("strong",null,"Внимание!"),g(' Топики работают только в Группах телеграм с включенным режимом "Топики" в настройках Группы! В каналах топиков нет. ')],-1),Xm=[Km],Zm={key:1,class:"col-12 mb-2"},Gm={class:"form-check"},Jm=t("label",{class:"form-check-label",for:"need-topics-mailing"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),eh={key:2,class:"col-12 mb-2"},th={class:"d-flex justify-content-between align-items-center mb-2"},sh=t("p",null,'Для того, чтоб узнать идентификатор топика в группе впишите в чат "Мой id"',-1),oh=["disabled"],nh=t("i",{class:"fa-solid fa-paperclip mr-2"},null,-1),ah={class:"list-group"},lh={class:"list-group-item"},ih={class:"mb-0"},rh=["onUpdate:modelValue"],dh={class:"row py-3"},uh={class:"col-12"},ch={class:"mb-3"},mh={class:"d-flex justify-content-between"},hh={class:"form-label",id:"bot-maintenance-message"},ph=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),_h={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},vh={class:"row py-3"},fh=t("div",{class:"col-12"},[t("div",{class:"alert alert-primary",role:"alert"}," Системная иконка нужна только для красивого отображения и узнаваемости бота на Landing-е системы. ")],-1),bh={class:"col-12 mb-3"},gh=t("h6",null,[g("Системная иконка бота "),t("span",{class:"badge rounded-pill text-bg-warning m-0"},"желательно")],-1),yh={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},$h={key:0,for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2 bg-primary text-white shadow-md"},kh=t("span",null,"+",-1),wh={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Ch={class:"remove"},Fh=t("i",{class:"fa-regular fa-trash-can"},null,-1),Th=[Fh],Dh={key:2,class:"mb-2 img-preview",style:{"margin-right":"10px"}},Sh={class:"remove"},Ph=t("i",{class:"fa-regular fa-trash-can"},null,-1),Oh=[Ph],Ah=t("div",{class:"col-12"},[t("div",{class:"alert alert-primary",role:"alert"},' Внешний сервис находится в эксперементальном режиме. Он нужен для связывания команд (страниц) бота с программой Клиента (если есть такая необходимость). Если на странице бота выбрано "внешнее управление", то все запросы будут переадесрованы на указанную ниже ссылку. ')],-1),Mh={class:"col-md-12 col-12"},jh={class:"mb-3"},qh=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Uh=t("div",null,"Ссылка на внешний сервис обработки данных ",-1),zh=t("label",{class:"form-label",id:"callback_link"},"Ссылка на внешний сервис обработки данных ",-1),Vh={class:"row py-3"},Rh=t("div",{class:"col-12"},[t("div",{class:"alert alert-danger",role:"alert"}," Внимание! Данный блок настроек больше не поддерживается и со временем эти настройки будут удалены из системы. ")],-1),Yh={class:"col-12"},Ih={class:"mb-3"},Bh={class:"d-flex justify-content-between"},Nh={class:"form-label",id:"bot-description"},Eh=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Qh=t("div",null,"Отобразится пользователю при первом запуске",-1),Lh=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),xh={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Wh={class:"col-12"},Hh={class:"mb-3"},Kh={class:"d-flex justify-content-between"},Xh={class:"form-label",id:"bot-description"},Zh=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Gh=t("div",null,'Для меню "О Боте"',-1),Jh=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ep={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},tp={class:"col-12"},sp={class:"card mb-3"},op=t("div",{class:"card-header"},[t("h6",null,[g("Информационная ссылка: создайте контент в "),t("a",{target:"_blank",href:"https://telegra.ph"},"https://telegra.ph")])],-1),np={class:"card-body"},ap=t("div",{class:"row"},[t("div",{class:"col-12"},[t("h6",null,"Ссылка")])],-1),lp={class:"row"},ip={class:"col-12"},rp={class:"mb-3"},dp={class:"col-12"},up={class:"card mb-3"},cp=t("div",{class:"card-header"},[t("h6",null,"Ссылки на соц. сети")],-1),mp={class:"card-body"},hp=t("div",{class:"row"},[t("div",{class:"col-12"},[t("h6",null,"Ссылка")])],-1),pp={class:"col-5"},_p={class:"mb-3"},vp=["onUpdate:modelValue","aria-describedby"],fp={class:"col-5"},bp={class:"mb-3"},gp=["onUpdate:modelValue","aria-describedby"],yp={class:"col-2"},$p=["onClick"],kp=t("i",{class:"fa-regular fa-trash-can"},null,-1),wp=[kp],Cp={class:"row"},Fp={class:"col-12"},Tp={class:"row"},Dp={class:"col-12"},Sp={class:"alert alert-danger alert-dismissible fade show",role:"alert"},Pp=t("strong",null,"Внимание!",-1),Op=["onClick"],Ap={class:"col-12"},Mp=["disabled"],jp={key:0},qp={key:1},Up={key:2,class:"ml-2"},zp={props:["bot"],data(){return{tab:0,spent_time_counter:0,can_create:!0,can_create_topics:!0,messages:[],need_company_select:!1,selected_warning:null,page:null,step:0,templates:[],load:!1,loadPage:!1,needPageListUpdate:!1,need_threads:!1,need_company:!1,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,need_payments:!1,need_shop:!1,command:null,company:null,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],botForm:{title:"Название бота",short_description:"Описание в шапке бота",long_description:"Описание при первом запуске бота",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,company_id:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:70,tax_per_day:10,welcome_message:"Приветствую!",image:null,cashback_fire_percent:0,cashback_fire_period:0,description:"Это ваш бот! Вот такое вот описание у него.",info_link:null,social_links:[],maintenance_message:"Технические работы",payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],commands:null,selected_bot_template_id:null,pages:[],amo:null,warnings:[]}}},watch:{"botForm.bot_token":{handler(s){this.botForm.bot_token&&this.getMe()},deep:!0},need_threads:function(s,e){let o=[{title:"Отзывы",key:"reviews",value:null},{title:"Начисление cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null},{title:"Доставка",key:"delivery",value:null},{title:"Ответы",key:"response",value:null},{title:"Обратная связь",key:"callback",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=o),this.need_threads&&this.botForm.message_threads&&o.forEach(a=>{this.botForm.message_threads.findIndex(l=>l.key===a.key)===-1&&this.botForm.message_threads.push(a)})},need_payments:function(s,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},computed:{...Ne(["getSlugs","getCurrentCompany"]),filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(s=>!(this.botForm.warnings.findIndex(e=>e.rule_key===s.key)>=0))}},mounted(){if(localStorage.getItem("cashman_admin_bot_creator_counter")!=null){this.can_create=!1;let s=localStorage.getItem("cashman_admin_bot_creator_counter");this.startTimer(s==="null"||s==null?0:s)}window.addEventListener("store_current_company-change-event",s=>{this.company=this.getCurrentCompany}),this.bot?this.$nextTick(()=>{this.botForm={id:this.bot.id||null,title:this.bot.title||"",short_description:this.bot.short_description||"",long_description:this.bot.long_description||"",is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,image:this.bot.image||null,commands:this.bot.commands||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1,level_2:this.bot.level_2,level_3:this.bot.level_3,company_id:this.bot.company_id,photos:this.bot.photos||[],warnings:this.bot.warnings||[],amo:this.bot.amo||null},this.botForm.commands==null&&this.autoAddCommands(),this.botForm.message_threads&&(this.need_threads=!0),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0),this.botForm.warnings.length>0&&(this.need_cashback_rules=!0),this.botForm.cashback_fire_period>0&&(this.need_cashback_fired=!0),this.bot.company&&(this.company=this.bot.company)}):this.botForm.commands==null&&this.autoAddCommands()},methods:{autoAddCommands(){this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.can_create=!0,this.spent_time_counter=null),localStorage.setItem("cashman_admin_bot_creator_counter",this.spent_time_counter)},1e3)},alert(s,e=null){e!=null&&(this.tab=e),this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},createBotTopics(){this.can_create_topics=!1,this.$store.dispatch("createBotTopics",{dataObject:{topics:this.botForm.message_threads,bot_id:this.bot.id}}).then(s=>{this.botForm.message_threads=s.data,this.$notify({title:"Конструктор ботов",text:"Топики успешно созданы!",type:"success"})}).catch(()=>{this.can_create_topics=!0,this.$notify({title:"Конструктор ботов",text:"Ошибка создания топиков",type:"error"})})},getMe(){let s=this.botForm.bot_token||"";s.length<40||this.$store.dispatch("getMe",{bot_token:s}).then(e=>{let o=e.username||null,a=e.first_name||null;o&&(this.botForm.bot_domain=o),a&&(this.botForm.title=a)})},getChatLink(s){this.$store.dispatch("loadChatInfo",{dataObject:{chat_id:s,bot_id:this.bot.id}}).then(e=>{console.log("chat info",e)})},addTextTo(s={param:null,text:null}){this.botForm[s.param]=s.text},removeCommands(s){this.botForm.commands.splice(s,1)},addCommands(){this.botForm.commands||(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s){const e=s.target.files;this.botForm.image=null;for(let o=0;o<e.length;o++)this.botForm.photos=[e[o]]},addItem(s){this.botForm[s].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(s,e){this.botForm[s].splice(e,1)},removePhoto(){this.botForm.photos=[],this.botForm.image=null},addBot(){let s=new FormData;Object.keys(this.botForm).forEach(e=>{const o=this.botForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.company&&s.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)s.append("images[]",this.botForm.photos[e]);s.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:s}).then(e=>{let o=e.data;this.$emit("callback",o),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.startTimer(),this.can_create=!1,this.$store.dispatch("updateBotWebhook",{dataObject:{bot_id:o.id}}).catch(a=>{this.alert(a.response.data.message)}),this.bot==null&&(this.botForm={title:"",short_description:"",long_description:"",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,main_channel:null,balance:null,tax_per_day:null,callback_link:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],warnings:[],selected_bot_template_id:null,pages:[]})}).catch(e=>{this.alert(e.response.data.message),this.$notify({title:"Конструктор ботов",text:"Ошибочка...",type:"error"})})},removeCashBackConfig(s){this.botForm.cashback_config.splice(s,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(s){let e=this.warnings.find(o=>o.key===s);return e||{title:"Не найдено"}},removeWarning(s){this.botForm.warnings.splice(s,1)},companyListCallback(s){this.load=!0,this.company=s,this.botForm.company_id=s.id,this.need_company_select=!1,this.$nextTick(()=>{this.load=!1})},addWarning(){const s=this.selected_warning;this.botForm.warnings.push({rule_key:s.key,rule_value:0,is_active:!0}),this.selected_warning=null}}},Vp=Object.assign(zp,{__name:"BotForm",setup(s){return(e,o)=>{const a=gt("Popper"),n=ss("lazy");return r(),d("form",{class:"py-3 mb-5",onSubmit:o[65]||(o[65]=De((...l)=>e.addBot&&e.addBot(...l),["prevent"]))},[t("div",Sd,[(e.botForm.id||null)!=null?(r(),d("div",Pd,Ad)):(r(),d("div",Md,[t("div",jd,[t("div",qd,[f(t("img",Ud,null,512),[[n,"../images/icon.png"]])]),zd])])),t("div",Vd,[t("div",Rd,[t("label",Yd,[t("div",null,[L(a,null,{content:S(()=>[Bd]),default:S(()=>[Id]),_:1}),g(" Токен бота "),Nd])]),f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[0]||(o[0]=l=>e.botForm.bot_token=l),maxlength:"255",onInvalid:o[1]||(o[1]=l=>e.alert("Вы не ввели токен бота!")),"aria-describedby":"bot-token",required:""},null,544),[[E,e.botForm.bot_token]])])])]),e.botForm.bot_token?(r(),d("div",Ed,[t("div",Qd,[t("ul",Ld,[t("li",{class:"nav-item",onClick:o[2]||(o[2]=l=>e.tab=0)},[t("a",{class:M(["nav-link",{active:e.tab===0}]),href:"javascript:void(0)"},"Базовые настройки",2)]),t("li",{class:"nav-item",onClick:o[3]||(o[3]=l=>e.tab=1)},[t("a",{class:M(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Кэшбэк",2)]),e.botForm.id!=null?(r(),d("li",{key:0,class:"nav-item",onClick:o[4]||(o[4]=l=>e.tab=2)},[t("a",{class:M(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Обратная связь",2)])):c("",!0),e.botForm.id==null?(r(),d("li",xd,Hd)):c("",!0),t("li",{class:"nav-item",onClick:o[5]||(o[5]=l=>e.tab=3)},[t("a",{class:M(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Сообщения",2)]),t("li",{class:"nav-item",onClick:o[6]||(o[6]=l=>e.tab=4)},[t("a",{class:M(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Другие настройки",2)]),t("li",{class:"nav-item",onClick:o[7]||(o[7]=l=>e.tab=5)},[t("a",{class:M(["nav-link text-danger",{active:e.tab===5}]),href:"javascript:void(0)"},[Kd,g(" Устаревшие настройки")],2)])])])])):c("",!0),f(t("div",Xd,[t("div",Zd,[t("div",Gd,[f(t("input",{class:"form-check-input",type:"checkbox",value:e.need_company_select,"onUpdate:modelValue":o[8]||(o[8]=l=>e.need_company_select=l),id:"bot-select-company"},null,8,Jd),[[ke,e.need_company_select]]),eu]),e.botForm.company_id==null?(r(),d("p",{key:0,class:"alert alert-danger",onClick:o[9]||(o[9]=l=>e.need_company_select=!0)},"Внимание! Вы не выбрали клиента!")):(r(),d("p",{key:1,class:"card alert alert-success cursor-pointer",onClick:o[10]||(o[10]=l=>e.need_company_select=!0)},[g(" Выбран клиент "),e.company?(r(),d("span",tu,"#"+b(e.company.id)+" "+b(e.company.title),1)):c("",!0)]))]),e.need_company_select?(r(),d("div",su,[e.load?c("",!0):(r(),J(Ra,{key:0,selected:e.botForm.company_id,onCallback:e.companyListCallback},null,8,["selected","onCallback"]))])):c("",!0),t("div",ou,[t("div",nu,[f(t("input",{class:"form-check-input",type:"checkbox",value:e.botForm.is_template||!1,"onUpdate:modelValue":o[11]||(o[11]=l=>e.botForm.is_template=l),id:"bot-is-template"},null,8,au),[[ke,e.botForm.is_template]]),lu])]),e.botForm.is_template?(r(),d("div",iu,[t("div",ru,[t("label",du,[L(a,null,{content:S(()=>[cu]),default:S(()=>[uu]),_:1}),g(" Название шаблона бота "),mu]),f(t("input",{type:"text",class:"form-control",placeholder:"Название \\ описание шаблона","aria-label":"Описание шаблона","onUpdate:modelValue":o[12]||(o[12]=l=>e.botForm.template_description=l),maxlength:"255",onInvalid:o[13]||(o[13]=l=>e.alert("Вы не ввели название шаблона!")),"aria-describedby":"bot-template-description",required:""},null,544),[[E,e.botForm.template_description]])])])):c("",!0),t("div",hu,[t("div",pu,[t("label",_u,[L(a,null,{content:S(()=>[fu]),default:S(()=>[vu]),_:1}),g(" Доменное имя бота (загружается автоматически) ")]),f(t("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота",disabled:!0,name:"bot_domain",onInvalid:o[14]||(o[14]=l=>e.alert("Вы не ввели доменное имя бота!",0)),"onUpdate:modelValue":o[15]||(o[15]=l=>e.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,544),[[E,e.botForm.bot_domain]]),e.botForm.bot_domain?(r(),d("p",bu,[g("Проверить работу бота "),t("a",{href:"https://t.me/"+e.botForm.bot_domain,target:"_blank"},"@"+b(e.botForm.bot_domain),9,gu)])):c("",!0)])]),t("div",yu,[t("div",$u,[t("div",ku,[wu,t("div",Cu,[t("label",Fu,[e.botForm.title?(r(),d("span",Tu,[g(" Название бота "),e.botForm.title.length>0?(r(),d("small",Du,"Длина текста "+b(e.botForm.title.length)+"/64",1)):c("",!0)])):c("",!0)]),f(t("input",{type:"text",class:"form-control",placeholder:"Текст названия","aria-label":"Текст названия","onUpdate:modelValue":o[16]||(o[16]=l=>e.botForm.title=l),maxlength:"64","aria-describedby":"bot-title"},null,512),[[E,e.botForm.title]])]),t("div",Su,[t("label",Pu,[t("span",null,[g(" Описание в шапке бота "),e.botForm.short_description.length>0?(r(),d("small",Ou,"Длина текста "+b(e.botForm.short_description.length)+"/105",1)):c("",!0)])]),Au,f(t("textarea",{class:"form-control",placeholder:"Описание в шапке бота","aria-label":"Описание в шапке бота","onUpdate:modelValue":o[17]||(o[17]=l=>e.botForm.short_description=l),maxlength:"105","aria-describedby":"bot-short-description"},`
                                `,512),[[E,e.botForm.short_description]])]),t("div",Mu,[t("label",ju,[t("span",null,[g(" Описание возможностей бота "),e.botForm.long_description.length>0?(r(),d("small",qu,"Длина текста "+b(e.botForm.long_description.length)+"/505",1)):c("",!0)])]),Uu,f(t("textarea",{class:"form-control",placeholder:"Описание возможностей бота","aria-label":"Описание возможностей бота","onUpdate:modelValue":o[18]||(o[18]=l=>e.botForm.long_description=l),maxlength:"505","aria-describedby":"bot-long-description"},`
                                `,512),[[E,e.botForm.long_description]])]),(r(!0),d(Y,null,ee(e.botForm.commands,(l,i)=>(r(),d("div",{class:"row",key:"commands-"+i},[e.botForm.commands[i].command==="/adminmenu"?(r(),d("div",zu,Ru)):c("",!0),t("div",Yu,[t("div",Iu,[f(t("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255",onInvalid:o[19]||(o[19]=u=>e.alert("Вы не ввели название команды",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].command=u,"aria-describedby":"bot-command-"+i,required:""},null,40,Bu),[[E,e.botForm.commands[i].command]])])]),t("div",Nu,[t("div",Eu,[f(t("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255",onInvalid:o[20]||(o[20]=u=>e.alert("Вы не ввели описание команды!",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].description=u,"aria-describedby":"bot-command-description-"+i,required:""},null,40,Qu),[[E,e.botForm.commands[i].description]])])]),t("div",Lu,[t("button",{type:"button",onClick:u=>e.removeCommands(i),class:"btn btn-outline-danger w-100"},Hu,8,xu)])]))),128)),t("div",Ku,[t("div",Xu,[t("button",{type:"button",onClick:o[21]||(o[21]=l=>e.addCommands()),class:"btn btn-outline-success w-100"},[(e.botForm.commands||[]).length>0?(r(),d("span",Zu," Добавить еще команду")):(r(),d("span",Gu," Добавить системное меню"))])])])])])]),Ju,t("div",ec,[t("div",tc,[t("label",sc,[L(a,null,{content:S(()=>[nc]),default:S(()=>[oc]),_:1}),g(" Баланс бота, руб "),ac]),f(t("input",{type:"number",class:"form-control",placeholder:"Баланс","aria-label":"Баланс","onUpdate:modelValue":o[22]||(o[22]=l=>e.botForm.balance=l),min:"0",onInvalid:o[23]||(o[23]=l=>e.alert("Вы не ввели сумму баланса бота!",1)),"aria-describedby":"bot-balance",required:""},null,544),[[E,e.botForm.balance]])])]),t("div",lc,[t("div",ic,[t("label",rc,[L(a,null,{content:S(()=>[uc]),default:S(()=>[dc]),_:1}),g(" Списание за сутки, руб "),cc]),f(t("input",{type:"number",class:"form-control",placeholder:"Списание","aria-label":"Списание","onUpdate:modelValue":o[24]||(o[24]=l=>e.botForm.tax_per_day=l),min:"0",onInvalid:o[25]||(o[25]=l=>e.alert("Вы не ввели сумму списания бота!",1)),"aria-describedby":"bot-tax-per-day",required:""},null,544),[[E,e.botForm.tax_per_day]])])])],512),[[We,e.tab===0&&e.botForm.bot_token]]),f(t("div",mc,[t("div",hc,[t("div",pc,[_c,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[26]||(o[26]=l=>e.botForm.level_1=l),min:"0",onInvalid:o[27]||(o[27]=l=>e.alert("Вы не ввели значение кэшбэка 1 уровня бота!",1)),"aria-describedby":"bot-level-1",required:""},null,544),[[E,e.botForm.level_1]])])]),t("div",vc,[t("div",fc,[bc,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[28]||(o[28]=l=>e.botForm.level_2=l),min:"0","aria-describedby":"bot-level-2"},null,512),[[E,e.botForm.level_2]])])]),t("div",gc,[t("div",yc,[$c,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[29]||(o[29]=l=>e.botForm.level_3=l),min:"0","aria-describedby":"bot-level-3"},null,512),[[E,e.botForm.level_3]])])]),t("div",kc,[t("div",wc,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[30]||(o[30]=l=>e.need_cashback_fired=l),type:"checkbox",id:"need-cashback-fired"},null,512),[[ke,e.need_cashback_fired]]),Cc])]),e.need_cashback_fired?(r(),d("div",Fc,[t("div",Tc,[Dc,f(t("select",{class:"form-control","onUpdate:modelValue":o[31]||(o[31]=l=>e.botForm.cashback_fire_period=l),id:"cashback-fired-period"},[(r(!0),d(Y,null,ee(e.cashback_fire_periods,l=>(r(),d("option",{value:l.value},b(l.title||"Не указано"),9,Sc))),256))],512),[[Vt,e.botForm.cashback_fire_period]])]),e.botForm.cashback_fire_period>0?(r(),d("div",Pc,[Oc,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":o[32]||(o[32]=l=>e.botForm.cashback_fire_percent=l),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[E,e.botForm.cashback_fire_percent]])])):c("",!0)])):c("",!0),t("div",Ac,[t("div",Mc,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[33]||(o[33]=l=>e.need_payments=l),type:"checkbox",id:"need-payments"},null,512),[[ke,e.need_payments]]),jc])]),e.need_payments?(r(),d("div",qc,[t("div",Uc,[f(t("input",{class:"form-check-input",type:"checkbox",value:e.botForm.auto_cashback_on_payments,"onUpdate:modelValue":o[34]||(o[34]=l=>e.botForm.auto_cashback_on_payments=l),id:"bot-auto-cashback-on-payments"},null,8,zc),[[ke,e.botForm.auto_cashback_on_payments]]),Vc]),t("div",Rc,[L(a,null,{content:S(()=>[Ic]),default:S(()=>[Yc]),_:1}),Bc,f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[35]||(o[35]=l=>e.botForm.payment_provider_token=l),"aria-describedby":"payment_provider_token"},null,512),[[E,e.botForm.payment_provider_token]])])])):c("",!0),t("div",Nc,[t("div",Ec,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[36]||(o[36]=l=>e.need_shop=l),type:"checkbox",id:"need-shop"},null,512),[[ke,e.need_shop]]),Qc])]),e.need_shop?(r(),d("div",Lc,[t("div",xc,[L(a,null,{content:S(()=>[Hc]),default:S(()=>[Wc]),_:1}),Kc,f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[37]||(o[37]=l=>e.botForm.vk_shop_link=l),"aria-describedby":"vk_shop_link"},null,512),[[E,e.botForm.vk_shop_link]])])])):c("",!0),t("div",Xc,[t("div",Zc,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[38]||(o[38]=l=>e.need_cashback_config=l),type:"checkbox",id:"need-cashback-config"},null,512),[[ke,e.need_cashback_config]]),Gc])]),e.need_cashback_config?(r(),d("div",Jc,[em,(r(!0),d(Y,null,ee(e.botForm.cashback_config,(l,i)=>(r(),d("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+i},[t("div",tm,[sm,t("button",{type:"button",onClick:u=>e.removeCashBackConfig(i),class:"btn btn-link text-danger"},am,8,om)]),f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255",onInvalid:o[39]||(o[39]=u=>e.alert("Вы не ввели название категории!",1)),"onUpdate:modelValue":u=>e.botForm.cashback_config[i].title=u,"aria-describedby":"bot-cashback-config-"+i,required:""},null,40,lm),[[E,e.botForm.cashback_config[i].title]])]))),128)),im,t("button",{type:"button",onClick:o[40]||(o[40]=l=>e.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-info w-100"}," Добавить категорию "),rm])):c("",!0),t("div",dm,[t("div",um,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[41]||(o[41]=l=>e.need_cashback_rules=l),type:"checkbox",id:"need-cashback-rules"},null,512),[[ke,e.need_cashback_rules]]),cm])]),e.need_cashback_rules?(r(),d("div",mm,[t("div",hm,[t("div",pm,[t("div",_m,[vm,f(t("select",{class:"form-control","onUpdate:modelValue":o[42]||(o[42]=l=>e.selected_warning=l),onChange:o[43]||(o[43]=(...l)=>e.addWarning&&e.addWarning(...l)),id:"warning-rules"},[fm,(r(!0),d(Y,null,ee(e.filteredWarnings,l=>(r(),d("option",{value:l},b(l.title),9,bm))),256))],544),[[Vt,e.selected_warning]])]),(r(!0),d(Y,null,ee(e.botForm.warnings,(l,i)=>(r(),d("div",gm,[t("div",ym,[t("div",$m,[t("p",km,b(e.getWarning(l.rule_key).title||"Не найдено"),1)]),t("div",wm,[t("div",Cm,[f(t("input",{class:"form-check-input","onUpdate:modelValue":u=>e.botForm.warnings[i].is_active=u,type:"checkbox",id:"warning-is-active-"+i},null,8,Fm),[[ke,e.botForm.warnings[i].is_active]]),t("label",{class:"form-check-label",for:"warning-is-active-"+i},[e.botForm.warnings[i].is_active?(r(),d("span",Dm,"Вкл")):(r(),d("span",Sm,"Выкл"))],8,Tm)])]),t("div",Pm,[f(t("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":u=>e.botForm.warnings[i].rule_value=u,min:"0","aria-describedby":"bot-level-3"},null,8,Om),[[E,e.botForm.warnings[i].rule_value]])]),t("div",Am,[t("button",{onClick:u=>e.removeWarning(i),type:"button",class:"btn btn-outline-danger"},qm,8,Mm)])])]))),256))])])])):c("",!0)],512),[[We,e.tab===1&&e.botForm.bot_token]]),f(t("div",Um,[zm,t("div",Vm,[t("div",Rm,[t("div",Ym,[t("label",Im,[t("div",null,[L(a,null,{content:S(()=>[Nm]),default:S(()=>[Bm]),_:1}),g(" Канал для заказов (id) "),Em])]),L(Es,{token:e.botForm.bot_token,param:"order_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[44]||(o[44]=l=>e.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[E,e.botForm.order_channel]]),t("small",null,[t("a",{onClick:o[45]||(o[45]=l=>e.getChatLink(e.botForm.order_channel)),href:"javascript:void(0)"},"Узнать ссылку"),g("(будет отправлена в бота)")])])]),t("div",Qm,[t("div",Lm,[t("div",xm,[Wm,L(Es,{token:e.botForm.bot_token,param:"main_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[46]||(o[46]=l=>e.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[E,e.botForm.main_channel]]),t("small",null,[t("a",{onClick:o[47]||(o[47]=l=>e.getChatLink(e.botForm.main_channel)),href:"javascript:void(0)"},"Узнать ссылку"),g("(будет отправлена в бота)")])])]),e.botForm.order_channel?(r(),d("div",Hm,Xm)):c("",!0),e.botForm.order_channel?(r(),d("div",Zm,[t("div",Gm,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[48]||(o[48]=l=>e.need_threads=l),type:"checkbox",id:"need-topics-mailing"},null,512),[[ke,e.need_threads]]),Jm])])):c("",!0),e.need_threads&&e.botForm.order_channel?(r(),d("div",eh,[t("div",th,[sh,t("button",{class:"btn btn-outline-info",onClick:o[49]||(o[49]=(...l)=>e.createBotTopics&&e.createBotTopics(...l)),disabled:!e.can_create_topics,type:"button"},[nh,g("Создать топики автоматически ")],8,oh)]),t("ul",ah,[(r(!0),d(Y,null,ee(e.botForm.message_threads,(l,i)=>(r(),d("li",lh,[t("p",ih,b(l.title)+" ("+b(l.key)+")",1),f(t("input",{type:"number",class:"form-control",min:"0",max:"10000",placeholder:"Идентификатор топика","onUpdate:modelValue":u=>e.botForm.message_threads[i].value=u},null,8,rh),[[E,e.botForm.message_threads[i].value]])]))),256))])])):c("",!0)],512),[[We,e.tab===2&&e.botForm.bot_token]]),f(t("div",dh,[t("div",uh,[t("div",ch,[t("div",mh,[t("label",hh,[g("Сообщение для режима тех. работ "),ph,e.botForm.maintenance_message?(r(),d("small",_h," Длина текста "+b(e.botForm.maintenance_message.length),1)):c("",!0)])]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":o[50]||(o[50]=l=>e.botForm.maintenance_message=l),maxlength:"255",onInvalid:o[51]||(o[51]=l=>e.alert("Вы не ввели сообщение для технических работ бота!",3)),"aria-describedby":"bot-maintenance-message",required:""},`
                    `,544),[[E,e.botForm.maintenance_message]])])])],512),[[We,e.tab===3&&e.botForm.bot_token]]),f(t("div",vh,[fh,t("div",bh,[gh,t("div",yh,[e.botForm.photos?(r(),d("label",$h,[kh,t("input",{type:"file",id:"bot-photos",accept:"image/*",onChange:o[52]||(o[52]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)])):c("",!0),e.botForm.photos?(r(!0),d(Y,{key:1},ee(e.botForm.photos,(l,i)=>(r(),d("div",wh,[f(t("img",null,null,512),[[n,e.getPhoto(l).imageUrl]]),t("div",Ch,[t("a",{onClick:o[53]||(o[53]=u=>e.removePhoto())},Th)])]))),256)):(r(),d("div",Dh,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+s.bot.id+"/"+e.botForm.image]]),t("div",Sh,[t("a",{onClick:o[54]||(o[54]=l=>e.removePhoto())},Oh)])]))])]),Ah,t("div",Mh,[t("div",jh,[L(a,null,{content:S(()=>[Uh]),default:S(()=>[qh]),_:1}),zh,f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"ссылка на внешний сервис","onUpdate:modelValue":o[55]||(o[55]=l=>e.botForm.callback_link=l),"aria-describedby":"callback_link"},null,512),[[E,e.botForm.callback_link]])])])],512),[[We,e.tab===4&&e.botForm.bot_token]]),f(t("div",Vh,[Rh,t("div",Yh,[t("div",Ih,[t("div",Bh,[t("label",Nh,[L(a,null,{content:S(()=>[Qh]),default:S(()=>[Eh]),_:1}),g(" Приветственное сообщение "),Lh,e.botForm.welcome_message?(r(),d("small",xh," Длина текста "+b(e.botForm.welcome_message.length),1)):c("",!0)])]),f(t("textarea",{type:"text",class:"form-control",style:{"min-height":"400px"},placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":o[56]||(o[56]=l=>e.botForm.welcome_message=l),onInvalid:o[57]||(o[57]=l=>e.alert("Вы не ввели приветственное сообщение!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[E,e.botForm.welcome_message]])])]),t("div",Wh,[t("div",Hh,[t("div",Kh,[t("label",Xh,[L(a,null,{content:S(()=>[Gh]),default:S(()=>[Zh]),_:1}),g(" Описание бота "),Jh,e.botForm.description?(r(),d("small",ep," Длина текста "+b(e.botForm.description.length),1)):c("",!0)])]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":o[58]||(o[58]=l=>e.botForm.description=l),onInvalid:o[59]||(o[59]=l=>e.alert("Вы не ввели описание бота!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[E,e.botForm.description]])])]),t("div",tp,[t("div",sp,[op,t("div",np,[ap,t("div",lp,[t("div",ip,[t("div",rp,[f(t("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":o[60]||(o[60]=l=>e.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[E,e.botForm.info_link]])])])])])])]),t("div",dp,[t("div",up,[cp,t("div",mp,[hp,(r(!0),d(Y,null,ee(e.botForm.social_links,(l,i)=>(r(),d("div",{class:"row",key:"social-link"+i},[t("div",pp,[t("div",_p,[f(t("input",{type:"text",class:"form-control",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255",onInvalid:o[61]||(o[61]=u=>e.alert("Вы не ввели название ссылки на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].title=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,vp),[[E,e.botForm.social_links[i].title]])])]),t("div",fp,[t("div",bp,[f(t("input",{type:"text",class:"form-control",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255",onInvalid:o[62]||(o[62]=u=>e.alert("Вы не ввели ссылку на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].url=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,gp),[[E,e.botForm.social_links[i].url]])])]),t("div",yp,[t("button",{type:"button",onClick:u=>e.removeItem("social_links",i),class:"btn btn-outline-danger w-100"},wp,8,$p)])]))),128)),t("div",Cp,[t("div",Fp,[t("button",{type:"button",onClick:o[63]||(o[63]=l=>e.addSocialLinks()),class:"btn btn-outline-success w-100"},"Добавить еще ссылку ")])])])])])],512),[[We,e.tab===5&&e.botForm.bot_token]]),t("div",Tp,[t("div",Dp,[e.messages.length>0?(r(!0),d(Y,{key:0},ee(e.messages,(l,i)=>(r(),d("div",Sp,[Pp,g(" "+b(l||"Ошибка")+" ",1),t("button",{type:"button",class:"btn-close",onClick:u=>e.removeMessage(i)},null,8,Op)]))),256)):c("",!0)]),t("div",Ap,[t("button",{type:"submit",onClick:o[64]||(o[64]=l=>e.messages=[]),disabled:!e.botForm.bot_token||!e.can_create,title:"Сохранение бота",class:"btn btn-primary min-menu-btn w-100"},[s.bot?(r(),d("span",qp,"Обновить бота")):(r(),d("span",jp,"Добавить бота")),e.can_create?c("",!0):(r(),d("span",Up,b(e.spent_time_counter)+" сек.",1))],8,Mp)])])],32)}}}),Rp={class:"row"},Yp={class:"col-12"},Ip=t("h6",null,"Добавление нового скрипта в бота",-1),Bp={key:0,class:"row"},Np={class:"col-md-6 col-lg-4 col-sm-6 col-12 mb-2"},Ep={key:1,class:"row"},Qp=t("div",{class:"col-12"},[t("div",{class:"alert alert-danger",role:"alert"},' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')],-1),Lp=[Qp],xp={props:["bot","global","selected"],data(){return{load:!1,search:null,slugs:[],paginate:[]}},computed:{...Ne(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",a=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||a.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(s){this.loadSlugs(s)},selectSlug(s){this.$emit("callback",{id:s.id||null,slug:s.slug,comment:s.comment,command:s.command}),this.$notify("Вы выбрали скрипт из списка!")},loadSlugs(s=0){this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,search:this.search,needGlobal:this.global},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){}}},Wp=Object.assign(xp,{__name:"BotSlugListSimple",setup(s){return(e,o)=>(r(),d("div",Rp,[t("div",Yp,[Ip,t("div",null,[f(t("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),onKeyup:o[1]||(o[1]=(...a)=>e.loadSlugs&&e.loadSlugs(...a)),placeholder:"Поиск нужного скрипта по описанию"},null,544),[[E,e.search]])]),e.slugs.length>0?(r(),d("div",Bp,[(r(!0),d(Y,null,ee(e.slugs,(a,n)=>(r(),d("div",Np,[L(Hl,{"is-active":(s.selected||[]).indexOf(a.id)!=-1,item:a,bot:s.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["is-active","item","bot","onCallback","onSelect"])]))),256)),e.paginate?(r(),J(st,{key:0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",Ep,Lp))])]))}});const Hp={props:["param"],data(){return{expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона: +7(982)000-00-00"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату DD.MM.YYYY"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}]}},methods:{expressionsSelect(s){this.$emit("callback",{param:this.param,text:s.expression})}}},Kp={class:"dropdown"},Xp=t("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-regular fa-registered"})],-1),Zp={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Gp=["onClick"];function Jp(s,e,o,a,n,l){return r(),d("div",Kp,[Xp,t("div",Zp,[t("li",null,[(r(!0),d(Y,null,ee(n.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},b(i.description||"-"),9,Gp))),256))])])])}const e_=Ht(Hp,[["render",Jp]]),t_={key:0,class:"mb-2 d-flex justify-content-start flex-wrap"},s_=t("p",null,"Связь цепочек: ",-1),o_=["onClick"],n_={key:0,class:"fa-solid fa-arrow-right font-12"},a_={class:"form-floating mb-2"},l_=["id"],i_=["for"],r_={class:"form-check mb-2"},d_=t("label",{class:"form-check-label",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),u_={key:1,class:"form-floating mb-2"},c_=["id"],m_=["for"],h_={key:2,class:"form-floating mb-2"},p_=["id"],__=["for"],v_={key:3,class:"mb-2"},f_={class:"d-flex justify-content-between"},b_=["for"],g_=["id"],y_={class:"mb-2"},$_={class:"d-flex justify-content-between"},k_=["for"],w_=["id"],C_={class:"mb-2"},F_={class:"form-check"},T_=t("label",{class:"form-check-label",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),D_={class:"form-check"},S_=t("label",{class:"form-check-label",for:"need-dialog-menu-inline"}," В диалоге нужно меню тексту ",-1),P_={class:"form-check"},O_=t("label",{class:"form-check-label",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),A_={key:4,class:"card mb-2"},M_={class:"card-body"},j_=t("h6",null,"Фотографии к диалогу",-1),q_={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},U_={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},z_=t("span",null,"+",-1),V_={class:"mb-2 img-preview",style:{"margin-right":"10px"}},R_={class:"remove"},Y_=["onClick"],I_={class:"mb-2 img-preview",style:{"margin-right":"10px"}},B_={class:"remove"},N_=["onClick"],E_={key:5,class:"card mb-2"},Q_=t("div",{class:"card-header"},[t("h6",null,"Кнопки к тексту вопроса")],-1),L_={class:"card-body"},x_={key:6,class:"card mb-2"},W_=t("div",{class:"card-header"},[t("h6",null,"Кнопки в виде нижнего меню")],-1),H_={class:"card-body"},K_={class:"mb-2"},X_=t("label",{class:"form-check-label",for:"need-empty-dialog"}," Сохранить в переменную ",-1),Z_=t("option",{selected:""},"Не выбрано",-1),G_=["value"],J_={class:"form-check mb-2"},ev=t("label",{class:"form-check-label",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),tv={key:7,class:"mb-2"},sv=t("p",null,"Выбрать флаги",-1),ov=["onClick"],nv={key:8,class:"mb-2"},av={key:0,class:"row"},lv=t("div",{class:"col-12"},[t("p",null,"Доступные для связывания диалоги:")],-1),iv={class:"col-md-12 mb-1"},rv={type:"button",class:"btn btn-outline-primary w-100 d-flex justify-content-between align-items-center",style:{"text-align":"left"}},dv=["onClick"],uv={key:0,class:"fa-solid fa-link mr-2 text-success"},cv={key:1,class:"row"},mv=t("div",{class:"col-12"},[t("div",{class:"alert alert-danger",role:"alert"}," Диалогов для связывания нет ")],-1),hv=[mv],pv=t("hr",null,null,-1),_v={class:"mb-2"},vv={type:"submit",class:"btn btn-outline-success p-3 w-100"},fv={key:0},bv={key:1},gv={props:["item","bot"],data(){return{loading:!0,dialog_commands:[],dialog_commands_paginate_object:null,need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,is_empty:!1,result_flags:[],store_to:null,result_channel:null,inline_keyboard:null,reply_keyboard:null},photos:[]}},computed:{...Ne(["getDialogCommands","getDialogCommandsPaginateObject"]),filteredCommands(){return this.dialog_commands?this.dialog_commands.filter(s=>s.id!=this.commandForm.id):[]}},mounted(){this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.item&&(this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject)},methods:{nextDialogs(s){this.loadDialogs(s)},loadDialogs(s=0){this.loading=!0,this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:s}).then(e=>{this.loading=!1,this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject}).catch(()=>{this.loading=!1})},doCommandLink(s){this.loading=!0,this.commandForm.next_bot_dialog_command_id=s},submit(){this.loading=!0;let s=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const o=this.commandForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos){for(let e=0;e<this.photos.length;e++)s.append("files[]",this.photos[e]);s.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:s}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Успешная обработка диалоговой команды",type:"success"}),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,is_empty:!1,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s,e){this[s].splice(e,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},saveInlineKeyboard(s){this.commandForm.inline_keyboard=s},saveReplyKeyboard(s){this.commandForm.reply_keyboard=s},addTextTo(s={param:null,text:null}){this.commandForm[s.param]=s.text},selectElementById(s){this.$emit("select-element",s)},selectFlag(s){(!this.commandForm.result_flags||!Array.isArray(this.commandForm.result_flags))&&(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(s.key);e===-1?this.commandForm.result_flags.push(s.key):this.commandForm.result_flags.splice(e,1)}}},yv=Object.assign(gv,{__name:"BotDialogCommandForm",setup(s){return(e,o)=>{const a=ss("lazy");return r(),d("form",{onSubmit:o[13]||(o[13]=De((...n)=>e.submit&&e.submit(...n),["prevent"]))},[e.commandForm.next_bot_dialog_command_id?(r(),d("div",t_,[s_,(r(!0),d(Y,null,ee(s.item.chain,(n,l)=>(r(),d("div",null,[t("span",{class:M(["badge cursor-pointer",{"bg-success":e.commandForm.id==n,"bg-primary":e.commandForm.id!=n}]),onClick:i=>e.selectElementById(n)},b(n),11,o_),l<s.item.chain.length-1?(r(),d("i",n_)):c("",!0)]))),256))])):c("",!0),t("div",a_,[f(t("input",{type:"text",class:"form-control",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[0]||(o[0]=n=>e.commandForm.pre_text=n),required:""},null,8,l_),[[E,e.commandForm.pre_text]]),t("label",{for:"commandForm-pre-text-"+e.commandForm.id},"Текст диалога",8,i_)]),t("div",r_,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=n=>e.commandForm.is_empty=n),id:"need-empty-dialog",checked:""},null,512),[[ke,e.commandForm.is_empty]]),d_]),e.commandForm.is_empty?c("",!0):(r(),d("div",u_,[f(t("input",{type:"text",class:"form-control",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[2]||(o[2]=n=>e.commandForm.post_text=n),required:""},null,8,c_),[[E,e.commandForm.post_text]]),t("label",{for:"commandForm-post-text-"+e.commandForm.id},"Текст после успешного завершения диалога",8,m_)])),e.commandForm.is_empty?c("",!0):(r(),d("div",h_,[f(t("input",{type:"text",class:"form-control",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[3]||(o[3]=n=>e.commandForm.error_text=n),required:""},null,8,p_),[[E,e.commandForm.error_text]]),t("label",{for:"commandForm-error-text-"+e.commandForm.id},"Текст на случай ошибки корректности данных",8,__)])),e.commandForm.is_empty?c("",!0):(r(),d("div",v_,[t("div",f_,[t("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для валидации данных ",8,b_),L(e_,{param:"input_pattern",onCallback:e.addTextTo},null,8,["onCallback"])]),f(t("input",{type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":o[4]||(o[4]=n=>e.commandForm.input_pattern=n),maxlength:"255",id:"commandForm-input-pattern-"+e.commandForm.id,"aria-describedby":"commandForm-input-pattern"},null,8,g_),[[E,e.commandForm.input_pattern]])])),t("div",y_,[t("div",$_,[t("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,k_),s.bot?(r(),J(Es,{key:0,token:s.bot.bot_token,param:"result_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])):c("",!0)]),f(t("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[5]||(o[5]=n=>e.commandForm.result_channel=n),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,w_),[[E,e.commandForm.result_channel]])]),t("div",C_,[t("div",F_,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=n=>e.need_images=n),id:"need-dialog-image",checked:""},null,512),[[ke,e.need_images]]),T_]),t("div",D_,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[7]||(o[7]=n=>e.need_inline_keyboard=n),id:"need-dialog-menu-inline",checked:""},null,512),[[ke,e.need_inline_keyboard]]),S_]),t("div",P_,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=n=>e.need_reply_keyboard=n),id:"need-dialog-menu-reply",checked:""},null,512),[[ke,e.need_reply_keyboard]]),O_])]),e.need_images?(r(),d("div",A_,[t("div",M_,[j_,t("div",q_,[t("label",U_,[z_,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:o[9]||(o[9]=(...n)=>e.onChangePhotos&&e.onChangePhotos(...n)),style:{display:"none"}},null,32)]),e.photos.length>0?(r(!0),d(Y,{key:0},ee(e.photos,(n,l)=>(r(),d("div",V_,[f(t("img",null,null,512),[[a,e.getPhoto(n).imageUrl]]),t("div",R_,[t("a",{onClick:i=>e.removePhoto("photos",l)},"Удалить",8,Y_)])]))),256)):c("",!0),e.commandForm.images&&s.bot?(r(!0),d(Y,{key:1},ee(e.commandForm.images,(n,l)=>(r(),d("div",I_,[f(t("img",null,null,512),[[a,"/images-by-bot-id/"+s.bot.id+"/"+n]]),t("div",B_,[t("a",{onClick:i=>e.removePhoto("images",l)},"Удалить",8,N_)])]))),256)):c("",!0)])])])):c("",!0),e.need_inline_keyboard?(r(),d("div",E_,[Q_,t("div",L_,[L(Bs,{onSave:e.saveInlineKeyboard,"edited-keyboard":e.commandForm.inline_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),e.need_reply_keyboard?(r(),d("div",x_,[W_,t("div",H_,[L(Bs,{onSave:e.saveReplyKeyboard,"edited-keyboard":e.commandForm.reply_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),t("div",K_,[X_,f(t("select",{class:"form-control","onUpdate:modelValue":o[10]||(o[10]=n=>e.commandForm.store_to=n)},[Z_,(r(!0),d(Y,null,ee(e.store_variants,n=>(r(),d("option",{value:n.key},b(n.title||"Не указано"),9,G_))),256))],512),[[Vt,e.commandForm.store_to]])]),t("div",J_,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=n=>e.need_set_flags=n),id:"need-set-flags",checked:""},null,512),[[ke,e.need_set_flags]]),ev]),e.need_set_flags?(r(),d("div",tv,[sv,(r(!0),d(Y,null,ee(e.flags_variants,n=>(r(),d("span",{class:M(["badge text-info mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(n.key)!=-1}]),onClick:l=>e.selectFlag(n)},b(n.title),11,ov))),256))])):c("",!0),e.commandForm.id?(r(),d("div",nv,[e.filteredCommands.length>0?(r(),d("div",av,[lv,(r(!0),d(Y,null,ee(e.filteredCommands,(n,l)=>(r(),d("div",iv,[t("button",rv,[t("span",{onClick:i=>e.doCommandLink(n.id)},[e.commandForm.next_bot_dialog_command_id==n.id?(r(),d("i",uv)):c("",!0),g(" #"+b(n.id)+" "+b(n.pre_text||"Без текста"),1)],8,dv),e.commandForm.next_bot_dialog_command_id==n.id?(r(),d("i",{key:0,class:"fa-solid fa-unlink text-danger",onClick:o[12]||(o[12]=i=>e.doCommandLink(null))})):c("",!0)])]))),256)),e.dialog_commands_paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",cv,hv))])):c("",!0),pv,t("div",_v,[t("button",vv,[e.commandForm.id?(r(),d("span",fv,"Обновить диалог")):(r(),d("span",bv,"Добавить диалог"))])])],32)}}});const $v={class:"row"},kv={class:"col-md-2 col-12"},wv=t("i",{class:"fa-regular fa-comment-dots",style:{"margin-right":"10px"}},null,-1),Cv={class:"col-md-10 col-12"},Fv={class:"input-group mb-3"},Tv={key:0,class:"row"},Dv={class:"col-md-12"},Sv={class:"table"},Pv=t("thead",null,[t("tr",null,[t("th",{class:"text-center",scope:"col"},"#"),t("th",{class:"text-center",scope:"col"},"Текст диалога"),t("th",{class:"text-center",scope:"col"},"Цепочки"),t("th",{class:"text-center",scope:"col"},"Текст успеха"),t("th",{class:"text-center",scope:"col"},"Текст ошибки"),t("th",{class:"text-center",scope:"col"},"Канал результата"),t("th",{class:"text-center",scope:"col"},"Флаги"),t("th",{class:"text-center",scope:"col"},"Сохранить в"),t("th",{class:"text-center",scope:"col"},"Есть изображения"),t("th",{class:"text-center",scope:"col"},"Есть паттерны"),t("th",{class:"text-center",scope:"col"},"Пустой"),t("th",{class:"text-center",scope:"col"},"Есть кнопки"),t("th",{class:"text-center",scope:"col"},"Есть меню"),t("th",{class:"text-center",scope:"col"},"Команды")])],-1),Ov={scope:"row"},Av={class:"text-center"},Mv=["onClick"],jv={class:"text-center"},qv={key:0,class:"badge bg-primary"},Uv={key:1},zv=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Vv=[zv],Rv={class:"text-center"},Yv={key:0},Iv={key:1},Bv=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Nv=[Bv],Ev={class:"text-center"},Qv={key:0},Lv={key:1},xv=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Wv=[xv],Hv={class:"text-center"},Kv={key:0},Xv={key:1},Zv=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Gv=[Zv],Jv={class:"text-center"},ef={key:0},tf={class:"badge bg-primary"},sf={key:1},of=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),nf=[of],af={class:"text-center"},lf={key:0},rf={key:1},df=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),uf=[df],cf={class:"text-center"},mf={key:0,class:"fa-solid fa-check text-success"},hf={key:1,class:"fa-solid fa-xmark text-danger"},pf={class:"text-center"},_f={key:0},vf={key:1},ff=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),bf=[ff],gf={class:"text-center"},yf={key:0,class:"fa-solid fa-check text-success"},$f={key:1,class:"fa-solid fa-xmark text-danger"},kf={class:"text-center"},wf={key:0,class:"fa-solid fa-check text-success"},Cf={key:1,class:"fa-solid fa-xmark text-danger"},Ff={class:"text-center"},Tf={key:0,class:"fa-solid fa-check text-success"},Df={key:1,class:"fa-solid fa-xmark text-danger"},Sf={class:"text-center"},Pf={class:"dropdown"},Of=["disabled"],Af=t("i",{class:"fa-solid fa-ellipsis"},null,-1),Mf=[Af],jf={class:"dropdown-menu"},qf=["onClick"],Uf=t("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),zf=t("hr",null,null,-1),Vf=["onClick"],Rf=t("i",{class:"fa-solid fa-clone mr-1"},null,-1),Yf=["onClick"],If=t("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),Bf={key:1,class:"row"},Nf=t("div",{class:"col-12"},[t("div",{class:"alert alert-danger",role:"alert"}," Не найдено ни одного диалога! ")],-1),Ef=[Nf],Qf={class:"modal fade",id:"dialog-command-modal-editor",tabindex:"-1"},Lf={class:"modal-dialog modal-fullscreen"},xf={class:"modal-content"},Wf=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Создание диалогового сообщения "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Hf={class:"modal-body"},Kf=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Xf={data(){return{bot:null,selected:null,loading:!0,dialog_commands:[],search:null,dialog_commands_paginate_object:null}},computed:{...Ne(["getDialogCommands","getCurrentBot","getDialogCommandsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadDialogs()})},methods:{openEditor(s){this.loading=!0,this.$nextTick(()=>{this.selected=s,this.loading=!1})},removeCommand(s){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:s}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно удалена!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},duplicate(s){this.loading=!0,this.$store.dispatch("duplicateDialogCommand",{dataObject:{dialogCommandId:s}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно продублирована!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},selectDialog(s){this.$emit("select-dialog",s),this.$notify("Вы выбрали диалог из списка!")},nextDialogs(s){this.loadDialogs(s)},selectElement(s){this.loading=!0,this.$nextTick(()=>{this.selected=this.dialog_commands.find(e=>e.id===s)||null,this.loading=!1})},loadDialogs(s=0){this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:s}).then(e=>{const o=this.selected;this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject,this.loading=!0,this.$nextTick(()=>{o&&(this.selected=this.dialog_commands.find(a=>a.id===o.id)||null),this.loading=!1})}).catch(()=>{this.loading=!1})}}},Yn=Object.assign(Xf,{__name:"BotDialogGroupList",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",$v,[t("div",kv,[t("button",{type:"button",onClick:o[0]||(o[0]=a=>e.openEditor(null)),"data-bs-toggle":"modal","data-bs-target":"#dialog-command-modal-editor",class:"btn btn-outline-success mb-2 w-100"},[wv,g("Новый диалог ")])]),t("div",Cv,[t("div",Fv,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск диалога","aria-label":"Поиск диалога","onUpdate:modelValue":o[1]||(o[1]=a=>e.search=a),"aria-describedby":"button-addon2"},null,512),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[2]||(o[2]=a=>e.loadDialogs(0)),type:"button",id:"button-addon2"},"Найти ")])])]),e.dialog_commands.length>0?(r(),d("div",Tv,[t("div",Dv,[t("table",Sv,[Pv,t("tbody",null,[(r(!0),d(Y,null,ee(e.dialog_commands,(a,n)=>(r(),d("tr",null,[t("th",Ov,b(a.id),1),t("td",Av,[t("a",{"data-bs-toggle":"modal",onClick:l=>e.openEditor(a),"data-bs-target":"#dialog-command-modal-editor",href:"javascript:void(0)"},b(a.pre_text||"-"),9,Mv)]),t("td",jv,[a.next_bot_dialog_command_id?(r(),d("span",qv,"#"+b(a.next_bot_dialog_command_id||"-")+" ("+b(a.chain.length||0)+")",1)):(r(),d("span",Uv,Vv))]),t("td",Rv,[a.post_text?(r(),d("p",Yv,b(a.post_text),1)):(r(),d("p",Iv,Nv))]),t("td",Ev,[a.error_text?(r(),d("p",Qv,b(a.error_text),1)):(r(),d("p",Lv,Wv))]),t("td",Hv,[a.result_channel?(r(),d("p",Kv,b(a.result_channel),1)):(r(),d("p",Xv,Gv))]),t("td",Jv,[a.result_flags.length>0?(r(),d("p",ef,[(r(!0),d(Y,null,ee(a.result_flags,l=>(r(),d("span",tf,b(l||"-"),1))),256))])):(r(),d("p",sf,nf))]),t("td",af,[a.store_to?(r(),d("p",lf,b(a.store_to),1)):(r(),d("p",rf,uf))]),t("td",cf,[a.images.length>0?(r(),d("i",mf)):(r(),d("i",hf))]),t("td",pf,[a.input_pattern?(r(),d("p",_f,b(a.input_pattern),1)):(r(),d("p",vf,bf))]),t("td",gf,[a.is_empty?(r(),d("i",yf)):(r(),d("i",$f))]),t("td",kf,[a.inline_keyboard_id!=null?(r(),d("i",wf)):(r(),d("i",Cf))]),t("td",Ff,[a.reply_keyboard_id!=null?(r(),d("i",Tf)):(r(),d("i",Df))]),t("td",Sf,[t("div",Pf,[t("button",{disabled:e.loading,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Mf,8,Of),t("ul",jf,[t("li",null,[t("a",{onClick:l=>e.selectDialog(a),title:"Выбрать диалог",class:"dropdown-item cursor-pointer"},[Uf,g(" Выбрать диалог ")],8,qf)]),zf,t("li",null,[t("a",{title:"Дублирование команды",onClick:l=>e.duplicate(a.id),class:"dropdown-item cursor-pointer"},[Rf,g(" Дублирование диалога ")],8,Vf)]),t("li",null,[t("a",{onClick:l=>e.removeCommand(a.id),title:"Удаление команды",class:"dropdown-item cursor-pointer"},[If,g(" Удаление диалога ")],8,Yf)])])])])]))),256))])]),e.dialog_commands_paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Bf,Ef)),t("div",Qf,[t("div",Lf,[t("div",xf,[Wf,t("div",Hf,[e.bot&&!e.loading?(r(),J(yv,{key:0,item:e.selected,onCallback:e.loadDialogs,onSelectElement:e.selectElement,bot:e.bot},null,8,["item","onCallback","onSelectElement","bot"])):c("",!0)]),Kf])])])],64))}}),Zf=t("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),Gf=t("h6",null,"Блок условий",-1),Jf={key:0,class:"py-2"},eb={class:"form-label",id:"bot-domain"},tb=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),sb=t("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),ob={class:"dropdown mb-2"},nb=t("button",{class:"btn btn-outline-info dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить условие ",-1),ab={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},lb=["onClick"],ib={key:1},rb={key:2,class:"list-group"},db={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},ub={class:"form-check"},cb={class:"form-check-label",for:"bot-user-is-vip"},mb={key:0},hb={key:1},pb=t("i",{class:"fa-solid fa-trash-can"},null,-1),_b=[pb],vb={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},fb={class:"form-check"},bb={class:"form-check-label",for:"bot-user-is-admin"},gb={key:0},yb={key:1},$b=t("i",{class:"fa-solid fa-trash-can"},null,-1),kb=[$b],wb={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},Cb={class:"form-check"},Fb={class:"form-check-label",for:"bot-user-is-deliveryman"},Tb={key:0},Db={key:1},Sb=t("i",{class:"fa-solid fa-trash-can"},null,-1),Pb=[Sb],Ob={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},Ab={class:"form-check"},Mb={class:"form-check-label",for:"bot-user-is-work"},jb={key:0},qb={key:1},Ub=t("i",{class:"fa-solid fa-trash-can"},null,-1),zb=[Ub],Vb={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},Rb={class:"form-check"},Yb={class:"form-check-label",for:"bot-user-in-location"},Ib={key:0},Bb={key:1},Nb=t("i",{class:"fa-solid fa-trash-can"},null,-1),Eb=[Nb],Qb={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},Lb=t("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),xb=t("i",{class:"fa-solid fa-trash-can"},null,-1),Wb=[xb],Hb={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},Kb=t("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),Xb=t("i",{class:"fa-solid fa-trash-can"},null,-1),Zb=[Xb],Gb={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},Jb={class:"form-check"},e1={class:"form-check-label",for:"bot-user-sex"},t1={key:0},s1={key:1},o1=t("i",{class:"fa-solid fa-trash-can"},null,-1),n1=[o1],a1={key:8,class:"list-group-item"},l1={class:"mb-3"},i1={class:"d-flex justify-content-between align-items-center"},r1={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},d1=["onClick"],u1=t("i",{class:"fa-solid fa-trash-can"},null,-1),c1=[u1],m1=["onUpdate:modelValue"],h1={key:3,class:"mt-5"},p1={key:4,class:"d-flex justify-content-between"},_1={key:6,class:"py-2"},v1={class:"form-label",id:"bot-domain"},f1=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),b1=t("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),g1={props:["bot","rulesForm"],data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},computed:{rulesForCustomFields(){let s=this.rules.filter(e=>e.key!=null);return console.log("filtered rules",s),s}},mounted(){},methods:{hasRuleKey(s){return this.rulesForm.rules_if==null?!1:(console.log("key=>",s||"-"),Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===s)!=null)},modifyChannel(s){this.rulesForm.rules_if.channels[s.param]=s.text},removeChannelFromRule(s){this.rulesForm.rules_if.channels.splice(s,1)},removeRule(s){delete this.rulesForm.rules_if.bot_user[s]},addRules(s){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),s.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...s.rule}),s.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(s.rule.channel)},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(s=>{(s.data||[]).forEach(o=>{o.is_active&&(this.rules.push({id:this.rules.length+1,title:o.label,key:o.key,type:o.type,rules_block:"bot_user",rule:{}}),o.type===0&&(this.rules[this.rules.length-1].rule[o.key]=""),o.type===1&&(this.rules[this.rules.length-1].rule[o.key]=0),o.type===2&&(this.rules[this.rules.length-1].rule[o.key]=!0))}),console.log("new rules=>",this.rules)})},attachPageToRule(s){s.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=s.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})}}},y1=Object.assign(g1,{__name:"PageRules",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d(Y,null,[Zf,Gf,s.rulesForm.rules_if?(r(),d("div",Jf,[t("label",eb,[L(a,null,{content:S(()=>[sb]),default:S(()=>[tb]),_:1}),g(" Сообщение при успешном прохождении условий (не обязательно) ")]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[0]||(o[0]=n=>s.rulesForm.rules_if_message=n),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[E,s.rulesForm.rules_if_message]])])):c("",!0),t("div",ob,[nb,t("ul",ab,[(r(!0),d(Y,null,ee(e.rules,n=>(r(),d("li",null,[t("a",{onClick:l=>e.addRules(n),class:"dropdown-item",href:"javascript:void(0)"},b(n.title||"Не указан"),9,lb)]))),256))])]),s.rulesForm.rules_if?(r(),d("h6",ib,"Выбранные условия")):c("",!0),s.rulesForm.rules_if?(r(),d("ul",rb,[e.hasRuleKey("is_vip")?(r(),d("li",db,[t("div",ub,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>s.rulesForm.rules_if.bot_user.is_vip=n),type:"checkbox",id:"bot-user-is-vip"},null,512),[[ke,s.rulesForm.rules_if.bot_user.is_vip]]),t("label",cb,[s.rulesForm.rules_if.bot_user.is_vip?(r(),d("span",mb,"Является VIP-пользователем")):(r(),d("span",hb,"Не является VIP-пользователем"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[2]||(o[2]=n=>e.removeRule("is_vip"))},_b)])):c("",!0),e.hasRuleKey("is_admin")?(r(),d("li",vb,[t("div",fb,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=n=>s.rulesForm.rules_if.bot_user.is_admin=n),type:"checkbox",id:"bot-user-is-admin"},null,512),[[ke,s.rulesForm.rules_if.bot_user.is_admin]]),t("label",bb,[s.rulesForm.rules_if.bot_user.is_admin?(r(),d("span",gb,"Является администратором")):(r(),d("span",yb,"Не является администратором"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[4]||(o[4]=n=>e.removeRule("is_admin"))},kb)])):c("",!0),e.hasRuleKey("is_deliveryman")?(r(),d("li",wb,[t("div",Cb,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=n=>s.rulesForm.rules_if.bot_user.is_deliveryman=n),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[ke,s.rulesForm.rules_if.bot_user.is_deliveryman]]),t("label",Fb,[s.rulesForm.rules_if.bot_user.is_deliveryman?(r(),d("span",Tb,"Является доставщиком")):(r(),d("span",Db,"Не является доставщиком"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[6]||(o[6]=n=>e.removeRule("is_deliveryman"))},Pb)])):c("",!0),e.hasRuleKey("is_work")?(r(),d("li",Ob,[t("div",Ab,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=n=>s.rulesForm.rules_if.bot_user.is_work=n),type:"checkbox",id:"bot-user-is-work"},null,512),[[ke,s.rulesForm.rules_if.bot_user.is_work]]),t("label",Mb,[s.rulesForm.rules_if.bot_user.is_work?(r(),d("span",jb,"За работой")):(r(),d("span",qb,"Не работает"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[8]||(o[8]=n=>e.removeRule("is_work"))},zb)])):c("",!0),e.hasRuleKey("user_in_location")?(r(),d("li",Vb,[t("div",Rb,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=n=>s.rulesForm.rules_if.bot_user.user_in_location=n),type:"checkbox",id:"bot-user-in-location"},null,512),[[ke,s.rulesForm.rules_if.bot_user.user_in_location]]),t("label",Yb,[s.rulesForm.rules_if.bot_user.user_in_location?(r(),d("span",Ib,"Находится в заведении")):(r(),d("span",Bb,"Не находится в заведении"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[10]||(o[10]=n=>e.removeRule("user_in_location"))},Eb)])):c("",!0),e.hasRuleKey("age")?(r(),d("li",Qb,[t("div",null,[Lb,f(t("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":o[11]||(o[11]=n=>s.rulesForm.rules_if.bot_user.age=n),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[E,s.rulesForm.rules_if.bot_user.age]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[12]||(o[12]=n=>e.removeRule("age"))},Wb)])):c("",!0),e.hasRuleKey("city")?(r(),d("li",Hb,[t("div",null,[Kb,f(t("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":o[13]||(o[13]=n=>s.rulesForm.rules_if.bot_user.city=n),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[E,s.rulesForm.rules_if.bot_user.city]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[14]||(o[14]=n=>e.removeRule("city"))},Zb)])):c("",!0),e.hasRuleKey("sex")?(r(),d("li",Gb,[t("div",Jb,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[15]||(o[15]=n=>s.rulesForm.rules_if.bot_user.sex=n),type:"checkbox",id:"bot-user-sex"},null,512),[[ke,s.rulesForm.rules_if.bot_user.sex]]),t("label",e1,[s.rulesForm.rules_if.bot_user.sex?(r(),d("span",t1,"Только для мужчин")):(r(),d("span",s1,"Только для женщин"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[16]||(o[16]=n=>e.removeRule("sex"))},n1)])):c("",!0),s.rulesForm.rules_if.channels.length>0?(r(),d("li",a1,[g("Проверка нахождения в канале \\ группе: "),(r(!0),d(Y,null,ee(s.rulesForm.rules_if.channels,(n,l)=>(r(),d("div",l1,[t("div",i1,[t("label",r1,[L(Es,{token:s.bot.bot_token,param:`${l}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),g(" Канал для проверки ")]),t("button",{type:"button",class:"btn btn-link text-danger",onClick:i=>e.removeChannelFromRule(l)},c1,8,d1)]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":i=>s.rulesForm.rules_if.channels[l]=i,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,m1),[[E,s.rulesForm.rules_if.channels[l]]])]))),256))])):c("",!0)])):c("",!0),s.rulesForm.rules_if?(r(),d("h6",h1,"Иначе")):c("",!0),s.rulesForm.rules_else_page_id?(r(),d("p",p1,[g("Вы выбрали страницу #"+b(s.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),t("a",{href:"javascript:void(0)",onClick:o[17]||(o[17]=n=>s.rulesForm.rules_else_page_id=null)},"Очистить")])):c("",!0),s.rulesForm.rules_if?(r(),J(Co,{key:5,current:s.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):c("",!0),s.rulesForm.rules_if?(r(),d("div",_1,[t("label",v1,[L(a,null,{content:S(()=>[b1]),default:S(()=>[f1]),_:1}),g(" Сообщение в случае невыполнения условий (не обязательно) ")]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[18]||(o[18]=n=>s.rulesForm.rules_else_message=n),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[E,s.rulesForm.rules_else_message]])])):c("",!0)],64)}}});const $1={key:0,class:"row pt-3"},k1={class:"col-12"},w1={class:"alert alert-info",role:"alert"},C1=t("strong",null,"Внимание!",-1),F1={style:{"font-size":"16px"}},T1={key:0,class:"row"},D1={class:"col-12 mb-2"},S1=t("h6",null,"На странице выбраны следующие разделы",-1),P1={class:"mini-pics justify-content-start d-inline-flex text-primary"},O1=t("i",{class:"fa-regular fa-images"},null,-1),A1=[O1],M1=t("i",{class:"fa-regular fa-note-sticky"},null,-1),j1=[M1],q1=t("i",{class:"fa-solid fa-photo-film"},null,-1),U1=[q1],z1=t("i",{class:"fa-regular fa-file-audio"},null,-1),V1=[z1],R1=t("i",{class:"fa-regular fa-file-word"},null,-1),Y1=[R1],I1=t("i",{class:"fa-solid fa-link"},null,-1),B1=[I1],N1=t("i",{class:"fa-solid fa-scroll"},null,-1),E1=[N1],Q1=t("i",{class:"fa-regular fa-comment-dots"},null,-1),L1=[Q1],x1=t("i",{class:"fa-solid fa-scale-balanced"},null,-1),W1=[x1],H1=t("i",{class:"fa-regular fa-keyboard"},null,-1),K1=[H1],X1=t("i",{class:"fa-solid fa-ellipsis"},null,-1),Z1=[X1],G1={class:"row"},J1={class:"col-md-8 col-12 mb-2"},eg={class:"form-label",id:"bot-domain"},tg=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),sg=t("div",null,[g(" Команда должна начинаться с символа . и *"),t("br"),g(" Например: .*Меню"),t("br")],-1),og=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ng={class:"col-md-4 col-12 mb-2 d-flex justify-content-end align-items-end"},ag={class:"btn-group",style:{background:"white"},role:"group","aria-label":"Basic example"},lg={key:0,type:"submit",title:"Сохранить страницу",id:"save-page-btn",class:"btn btn-primary min-menu-btn"},ig=t("i",{class:"fa-regular fa-floppy-disk"},null,-1),rg=[ig],dg=t("i",{class:"fa-solid fa-xmark text-danger"},null,-1),ug=[dg],cg=t("button",{type:"button",title:"Список страниц","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvas",class:"btn btn-outline-primary text-primary min-menu-btn"},[t("i",{class:"fa-solid fa-list-ol"})],-1),mg={class:"row"},hg={class:"col-12 mb-2"},pg={class:"form-label d-flex justify-content-between align-items-center mb-0",id:"bot-domain"},_g=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),vg=t("div",null,[g(" Текстовый редактор. Данный текст будет в таком"),t("br"),g(" же виде отображен в посте в телеграм. ")],-1),fg=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),bg={class:"form-floating"},gg={for:"floatingTextarea2"},yg={key:0},$g={class:"col-12 mb-2"},kg={class:"nav nav-tabs justify-content-center"},wg=t("i",{class:"fa-regular fa-keyboard"},null,-1),Cg=t("span",null,"Нижнее меню",-1),Fg=[wg,Cg],Tg=t("i",{class:"fa-solid fa-ellipsis"},null,-1),Dg=t("span",null,"Меню под текстом",-1),Sg=[Tg,Dg],Pg=t("i",{class:"fa-regular fa-images"},null,-1),Og=t("span",null,"Изображения",-1),Ag=[Pg,Og],Mg=t("i",{class:"fa-solid fa-photo-film"},null,-1),jg=t("span",null,"Видео",-1),qg=[Mg,jg],Ug=t("i",{class:"fa-regular fa-note-sticky"},null,-1),zg=t("span",null,"Стикеры",-1),Vg=[Ug,zg],Rg=t("i",{class:"fa-regular fa-file-audio"},null,-1),Yg=t("span",null,"Аудио",-1),Ig=[Rg,Yg],Bg=t("i",{class:"fa-regular fa-file-word"},null,-1),Ng=t("span",null,"Документы",-1),Eg=[Bg,Ng],Qg=t("i",{class:"fa-solid fa-link"},null,-1),Lg=t("span",null,"Другая страница",-1),xg=[Qg,Lg],Wg=t("i",{class:"fa-solid fa-scroll"},null,-1),Hg=t("span",null,"Скрипт",-1),Kg=[Wg,Hg],Xg=t("i",{class:"fa-regular fa-comment-dots"},null,-1),Zg=t("span",null,"Начало диалога",-1),Gg=[Xg,Zg],Jg=t("i",{class:"fa-solid fa-scale-balanced"},null,-1),ey=t("span",null,"Правила",-1),ty=[Jg,ey],sy={key:0,class:"col-12 mb-2"},oy={class:"form-check"},ny=t("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),ay={key:1,class:"col-12 mb-2"},ly={class:"card"},iy={class:"card-header d-flex justify-between align-items-center"},ry=t("h6",null,"Конструктор нижнего меню",-1),dy={key:0},uy={key:1},cy={class:"card-body"},my={class:"row"},hy={class:"col-12 mb-2"},py={class:"form-label",id:"bot-domain"},_y=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),vy=t("div",null," Заголовок для нижнего меню ",-1),fy={key:2,class:"col-12 mb-2"},by={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},gy={class:"d-flex justify-content-center mb-3"},yy={alt:"",width:"100",height:"100"},$y=t("h1",{class:"text-body-emphasis"},"Нижнее меню",-1),ky=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Создание и настройка нижнего меню страницы бота. Добавление и редактирование функций кнопок бота на странице. Данное меню отображается пользователю всегда. ",-1),wy={class:"d-inline-flex gap-2 mb-5"},Cy=["disabled"],Fy=t("a",{href:"https://telegra.ph/Nizhnee-menyu-bota-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Ty={key:0,class:"col-12 mb-2"},Dy={class:"form-check"},Sy=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),Py={key:1,class:"col-12 mb-2"},Oy={class:"card"},Ay={class:"card-header d-flex justify-between align-items-center"},My=t("h6",null,"Конструктор меню в сообщении",-1),jy={key:0},qy={key:1},Uy={class:"card-body"},zy={key:2,class:"col-12 mb-2"},Vy={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Ry={class:"d-flex justify-content-center mb-3"},Yy={alt:"",width:"100",height:"100"},Iy=t("h1",{class:"text-body-emphasis"},"Меню под текстом",-1),By=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," В отличии от нижнего меню, которое отображается всегда, меню под текстом показывается под контентом только в момент отображения этого контента. ",-1),Ny={class:"d-inline-flex gap-2 mb-5"},Ey=["disabled"],Qy=t("a",{href:"https://telegra.ph/Menyu-k-tekstu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Ly={key:0,class:"col-12 mb-2"},xy={class:"form-check"},Wy=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),Hy={key:1,class:"col-12 mb-2"},Ky={class:"card mb-3"},Xy=t("div",{class:"card-header"},[t("h6",null,"Загрузите изображения с файловой системы")],-1),Zy={class:"card-body d-flex justify-content-start"},Gy={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Jy={class:"row"},e0={key:0,class:"col-12 d-flex flex-wrap"},t0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},s0={class:"remove"},o0=["onClick"],n0={key:1},a0={key:2,class:"col-12 d-flex flex-wrap"},l0={class:"mb-2 img-preview",style:{"margin-right":"10px"}},i0={class:"remove"},r0=["onClick"],d0={key:2,class:"col-12 mb-2"},u0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},c0={class:"d-flex justify-content-center mb-3"},m0={alt:"",width:"100",height:"100"},h0=t("h1",{class:"text-body-emphasis"},"Изображения",-1),p0=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[g(" Вы можете добавить к одной странице от "),t("b",null,"1"),g(" до "),t("b",null,"10"),g(" изображений. Изображения (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. Если изображение одно, то текст будет отображен под ним. ")],-1),_0={class:"d-inline-flex gap-2 mb-5"},v0=["disabled"],f0=t("a",{href:"https://telegra.ph/Dobavlenie-izobrazhenij-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),b0={key:0,class:"col-12 mb-2"},g0={class:"form-check"},y0=t("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),$0={key:1,class:"col-12 mb-2"},k0={key:2,class:"col-12 mb-2"},w0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},C0={class:"d-flex justify-content-center mb-3"},F0={alt:"",width:"100",height:"100"},T0=t("h1",{class:"text-body-emphasis"},"Видео",-1),D0=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[g(" Вы можете добавить к одной странице от "),t("b",null,"1"),g(" до "),t("b",null,"10"),g(" видео. Ролики (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. ")],-1),S0={class:"d-inline-flex gap-2 mb-5"},P0=["disabled"],O0=t("a",{href:"https://telegra.ph/Dobavlenie-video-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),A0={key:0,class:"col-12 mb-2"},M0={class:"form-check"},j0=t("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),q0={key:1,class:"col-12 mb-2"},U0={key:2,class:"col-12 mb-2"},z0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},V0={class:"d-flex justify-content-center mb-3"},R0={alt:"",width:"100",height:"100"},Y0=t("h1",{class:"text-body-emphasis"},"Стикеры",-1),I0=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете переслать любой стикер в бота (от лица администратора) и затем этот стикер использовать для взаимодействия с пользователем. ",-1),B0={class:"d-inline-flex gap-2 mb-5"},N0=["disabled"],E0=t("a",{href:"https://telegra.ph/Dobavlenie-stikera-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Q0={key:0,class:"col-12 mb-2"},L0={class:"form-check"},x0=t("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),W0={key:1,class:"col-12 mb-2"},H0={key:2,class:"col-12 mb-2"},K0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},X0={class:"d-flex justify-content-center mb-3"},Z0={alt:"",width:"100",height:"100"},G0=t("h1",{class:"text-body-emphasis"},"Аудио",-1),J0=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[g(" Вы можете добавить к одной странице от "),t("b",null,"1"),g(" до "),t("b",null,"10"),g(" аудио. Музыка (от 2х) будет собрана в группу и показана под текстовым содержимым страницы. Если вы хотите использовать "),t("b",{class:"text-danger"},"голосовое"),g(", то можно использовать максимум "),t("b",{class:"text-danger"},"одну запись"),g(". Или же, вы можете конвертировать её в mp3 и залить как музыкальный файл в бота. ")],-1),e$={class:"d-inline-flex gap-2 mb-5"},t$=["disabled"],s$=t("a",{href:"https://telegra.ph/Dobavlenie-audio-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),o$={key:0,class:"col-12 mb-2"},n$={class:"form-check"},a$=t("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),l$={key:1,class:"col-12 mb-2"},i$={key:2,class:"col-12 mb-2"},r$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},d$={class:"d-flex justify-content-center mb-3"},u$={alt:"",width:"100",height:"100"},c$=t("h1",{class:"text-body-emphasis"},"Документы",-1),m$=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[g(" Вы можете добавить к одной странице от "),t("b",null,"1"),g(" до "),t("b",null,"10"),g(" документов. Документы (от 2х) будут собраны в группу и показана под текстовым содержимым страницы. В качестве файлов вы можете использовать текстовые документы, презентации, файлы-pdf, изображения в оригинальном размере. ")],-1),h$={class:"d-inline-flex gap-2 mb-5"},p$=["disabled"],_$=t("a",{href:"https://telegra.ph/Dobavlenie-dokumenta-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),v$={class:"col-12 mb-2"},f$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},b$={class:"d-flex justify-content-center mb-3"},g$={alt:"",width:"100",height:"100"},y$=t("h1",{class:"text-body-emphasis"},"Связь со страницей",-1),$$=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете привязать вызов другой страницы непосредственно после вызова текущей. Это позволит выводить контент по цепочке для пользователя. ",-1),k$={key:0,class:"my-3 text-success font-bold"},w$={class:"d-inline-flex gap-2 mb-5"},C$={key:1,"data-bs-toggle":"modal","data-bs-target":"#page-list-modal",class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"},F$=t("a",{href:"https://telegra.ph/Svyazyvanie-so-stranicej-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),T$={key:0,class:"col-12 mb-2"},D$=t("div",{class:"alert alert-info",role:"alert"}," Если в вашем боте нет каких-то предустановленных скриптов вы можете найти их в глобальном магазине скриптов ",-1),S$={class:"form-check"},P$=t("label",{class:"form-check-label",for:"need-show-global-slug-list"}," Добавить скрипты из глобального магазина? ",-1),O$={key:1,class:"col-12 mb-2"},A$={class:"form-check"},M$=t("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),j$={key:2,class:"col-12 mb-2"},q$={key:0,class:"alert alert-success d-flex justify-content-between align-items-center",role:"alert"},U$={key:3,class:"col-12 mb-2"},z$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},V$={class:"d-flex justify-content-center mb-3"},R$={alt:"",width:"100",height:"100"},Y$=t("h1",{class:"text-body-emphasis"},"Скрипты",-1),I$=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Скрипты содержат основной функционал системы. Вы можете к каждой странице привязать один скрипт, который будет вызван после вывода основного содержимого страницы. ",-1),B$={class:"d-inline-flex gap-2 mb-5"},N$=["disabled"],E$=t("a",{href:"https://telegra.ph/Svyazyvanie-so-skriptom-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Q$={key:0,class:"col-12 mb-2"},L$={class:"form-check"},x$=t("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),W$={key:1,class:"col-12 mb-2"},H$={key:0},K$={key:2,class:"col-12 mb-2"},X$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Z$={class:"d-flex justify-content-center mb-3"},G$={alt:"",width:"100",height:"100"},J$=t("h1",{class:"text-body-emphasis"},"Диалоги",-1),ek=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Диалоги страницы - это инструмент запроса данных от пользователя. Вы можете привязать начало диалога к странице, а сам диалог будет вызван по цепочке. ",-1),tk={class:"d-inline-flex gap-2 mb-5"},sk=["disabled"],ok=t("a",{href:"https://telegra.ph/Dobavlenie-dialoga-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),nk={key:0,class:"col-12 mb-2"},ak={class:"form-check"},lk=t("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),ik={key:1,class:"col-12 mb-2"},rk={key:2,class:"col-12 mb-2"},dk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},uk={class:"d-flex justify-content-center mb-3"},ck={alt:"",width:"100",height:"100"},mk=t("h1",{class:"text-body-emphasis"},"Правила отображения страницы",-1),hk=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете создать правила, согласно которым будет отображена та или иная страница. Вы можете перенаправить пользователя с одной страницы на другую, в случае если ваше условие не выполнено. ",-1),pk={class:"d-inline-flex gap-2 mb-5"},_k=["disabled"],vk=t("a",{href:"https://telegra.ph/Pravila-na-stranice-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),fk=t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"alert alert-info",role:"alert"},[t("h6",null,"Страница поддерживает комбинации клавиш:"),t("ul",{class:"mb-0 mr-0 p-0"},[t("li",null,[t("strong",null,"Ctrl+S"),g(" - открыть\\закрыть окно сохранения")]),t("li",null,[t("strong",null,"Ctrl+пробел"),g(" - открыть\\закрыть список страниц")]),t("li",null,[t("strong",null,"Ctrl+backspace"),g(" - очистить страницу\\новая страница")]),t("li",null,[t("strong",null,"Ctrl+стрелка вправо"),g(" - переключение между вкладка вперед")]),t("li",null,[t("strong",null,"Ctrl+стрелка влево"),g(" - переключение между вкладка назад")])])])])],-1),bk={class:"modal fade",id:"save-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},gk={class:"modal-dialog"},yk={class:"modal-content"},$k=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"Сохранение страницы"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),kk={class:"modal-body"},wk={key:0,class:"row"},Ck={class:"col-12 mb-2"},Fk={class:"d-flex justify-between"},Tk=["href"],Dk={class:"col-12 mb-2"},Sk=t("h6",null,"На странице выбраны следующие разделы",-1),Pk={class:"mini-pics text-primary"},Ok=t("i",{class:"fa-regular fa-images"},null,-1),Ak=[Ok],Mk=t("i",{class:"fa-regular fa-note-sticky"},null,-1),jk=[Mk],qk=t("i",{class:"fa-solid fa-photo-film"},null,-1),Uk=[qk],zk=t("i",{class:"fa-regular fa-file-audio"},null,-1),Vk=[zk],Rk=t("i",{class:"fa-regular fa-file-word"},null,-1),Yk=[Rk],Ik=t("i",{class:"fa-solid fa-link"},null,-1),Bk=[Ik],Nk=t("i",{class:"fa-solid fa-scroll"},null,-1),Ek=[Nk],Qk=t("i",{class:"fa-regular fa-comment-dots"},null,-1),Lk=[Qk],xk=t("i",{class:"fa-solid fa-scale-balanced"},null,-1),Wk=[xk],Hk=t("i",{class:"fa-regular fa-keyboard"},null,-1),Kk=[Hk],Xk=t("i",{class:"fa-solid fa-ellipsis"},null,-1),Zk=[Xk],Gk={key:0,class:"col-12 mb-2"},Jk={class:"form-check"},e2=t("label",{class:"form-check-label",for:"need-show-qr-and-link"}," Показать ссылку на страницу и QR-код ",-1),t2={key:1,class:"col-12 mb-2"},s2={class:"d-flex justify-content-center"},o2={style:{width:"200px",height:"200px"}},n2={class:"col-12 mb-2"},a2={class:"form-label",id:"bot-domain"},l2=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),i2=t("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять Вас. ",-1),r2=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),d2={class:"col-12"},u2={class:"form-check"},c2=t("label",{class:"form-check-label",for:"is-external"}," Внешнее управление страницей ",-1),m2={key:0,class:"alert alert-danger",role:"alert"},h2={key:0,class:"mb-0"},p2=t("strong",null,'"Информация о боте"',-1),_2=t("strong",null,"Другие настройки",-1),v2=t("strong",null,'"Ссылка на внешний сервис обработки данных"',-1),f2=t("div",{class:"col-12"},[t("button",{type:"submit",id:"submit-page",class:"btn btn-success w-100 p-3"},"Сохранить ")],-1),b2=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Не сохранять")],-1),g2={class:"modal fade",id:"page-list-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},y2={class:"modal-dialog"},$2={class:"modal-content"},k2={class:"modal-body"},w2={class:"offcanvas offcanvas-end w-25",tabindex:"-1",id:"offcanvas","data-bs-keyboard":"true","data-bs-scroll":"true","data-bs-backdrop":"true"},C2=t("div",{class:"offcanvas-header"},[t("h6",{class:"offcanvas-title d-none d-sm-block",id:"offcanvas"},"Ваши страницы (кнопки)"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),F2={class:"offcanvas-body"},T2={class:"row"},D2={class:"col-12"},S2={data(){return{tab:0,saveModal:null,pageModal:null,page:null,need_show_qr_and_link:!1,need_show_global_slug_list:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,loaded_page_list:!0,load_slug_simple_list:!0,showMenu:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,need_rules:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,videos:[],images:[],audios:[],documents:[],sticker:null,reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_page_images:function(s,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_audios:function(s,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(s,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(s,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_video:function(s,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(s,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_rules:function(s,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_reply_menu:function(s,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(s,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(s,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(s,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(s){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{...Ne(["getCurrentBot"]),qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},hasParts(){return this.need_page_sticker||this.need_page_audios||this.need_page_documents||this.need_page_video||this.need_page_images||this.need_inline_menu||this.need_reply_menu||this.need_attach_page||this.need_attach_dialog||this.need_attach_slug||this.need_rules},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let s="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)s+="0";return s+=this.pageForm.id,"https://t.me/"+this.getCurrentBot.bot_domain+"?start="+btoa("004"+s)}},mounted(){this.page?this.preparePageForm():this.clearForm(),this.loadCurrentBot().then(()=>{this.saveModal=new bootstrap.Modal(document.getElementById("save-modal"),{})}),this.pageModal=new bootstrap.Offcanvas(document.getElementById("offcanvas"),{scroll:!0}),window.addEventListener("keydown",s=>{if(s.ctrlKey&&s.keyCode==8&&(s.preventDefault(),this.clearForm()),s.ctrlKey&&s.keyCode==32&&(s.preventDefault(),this.pageModal.toggle()),s.ctrlKey&&s.code=="KeyS"){s.preventDefault();const e=document.querySelector("#save-page-btn");e?e.click():this.$notify({title:"Конструктор страниц",text:"Вы еще не начали создавать страницу!",type:"warning"})}s.ctrlKey&&s.keyCode==39&&(s.preventDefault(),this.tab===10?this.tab=0:this.tab++),s.ctrlKey&&s.keyCode==37&&(s.preventDefault(),this.tab===0?this.tab=10:this.tab--)})},methods:{loadSlugs(){this.load_slug_simple_list=!1,this.need_show_global_slug_list=!1,this.$nextTick(()=>{this.load_slug_simple_list=!0})},preparePageForm(){let s=this.page;this.photos=[],this.pageForm={id:s.id,slug_id:s.slug?s.slug.id:null,content:s.content,command:s.slug?s.slug.command:null,slug:s.slug?s.slug.slug:null,comment:s.slug?s.slug.comment:null,images:s.images||[],sticker:s.sticker||null,reply_keyboard_title:s.reply_keyboard_title||null,reply_keyboard_id:s.reply_keyboard_id||null,inline_keyboard_id:s.inline_keyboard_id||null,reply_keyboard:s.replyKeyboard||null,inline_keyboard:s.inlineKeyboard||null,next_page_id:s.next_page_id||null,next_bot_dialog_command_id:s.next_bot_dialog_command_id||null,next_bot_menu_slug_id:s.next_bot_menu_slug_id||null,is_external:s.is_external||!1,rules_if:s.rules_if||null,rules_else_page_id:s.rules_else_page_id||null,audios:s.audios||[],documents:s.documents||[],videos:s.videos||[],rules_if_message:s.rules_if_message||null,rules_else_message:s.rules_else_message||null}},copyToClipBoard(s){navigator.clipboard.writeText(s).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},associateDialog(s){this.pageForm.next_bot_dialog_command_id=s.id},associateSlug(s){this.pageForm.next_bot_menu_slug_id=s.id},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},attachPage(s){s.id!=this.pageForm.id?(this.$notify({title:"Конструктор страниц",text:"Вы успешно связали страницы!",type:"success"}),this.pageForm.next_page_id=s.id):this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},injectContent(s){this.pageForm.content?this.pageForm.content+=s.text:this.pageForm.content=s.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard:null,inline_keyboard:null,is_external:!1,videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,next_menu_slug:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_images=!1,this.need_page_video=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.need_page_sticker=!1,this.$nextTick(()=>{this.need_clean=!1})},openSaveModal(){(this.pageForm.comment||"").length===0&&(this.pageForm.comment=this.pageForm.command),this.saveModal.show()},submitPage(){let s=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const o=this.pageForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:s}).then(e=>{this.pageForm.id==null&&(this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()})),this.loaded_page_list=!1,this.$nextTick(()=>{this.loaded_page_list=!0}),this.saveModal.hide(),this.$emit("callback",e.data),this.$notify({title:"Конструктор ботов",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"}),this.pageForm.id!=null&&this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id},page:localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0})}).catch(e=>{})},saveInlineKeyboard(s){this.pageForm.inline_keyboard=s},selectReplyKeyboard(s){this.pageForm.reply_keyboard=s,this.showReplyTemplateSelector=!1},selectInlineKeyboard(s){this.pageForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},saveReplyKeyboard(s){this.pageForm.reply_keyboard=s},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.pageForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},onChange(s){this.pageForm.content=s},selectPhoto(s){this.pageForm.images||(this.pageForm.images=[]);let e=this.pageForm.images.indexOf(s.file_id);e!==-1?this.pageForm.images.splice(e,1):this.pageForm.images.push(s.file_id)},selectSticker(s){this.pageForm.sticker=s.file_id},selectVideo(s){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(s.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(s.file_id)},selectAudio(s){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(s.file_id);if(s.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[s.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(s.file_id)},selectDocument(s){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(s.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(s.file_id)},pageListCallback(s){this.$notify("Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы"),this.load=!0,this.page=s,this.preparePageForm(),this.$nextTick(()=>{this.load=!1})}}},P2=Object.assign(S2,{__name:"Page",setup(s){return(e,o)=>{const a=gt("Popper"),n=ss("lazy");return r(),d(Y,null,[e.pageForm.id?(r(),d("div",$1,[t("div",k1,[t("div",w1,[C1,g(" Вы в режиме редактирования страницы (кнопки) "),t("strong",F1,b(e.page.slug?e.page.slug.command:"Без названия"),1),g(", если хотите создать новую нажмите "),t("a",{href:"javascript:void(0)",class:"btn btn-primary ml-2",onClick:o[0]||(o[0]=(...l)=>e.clearForm&&e.clearForm(...l))},"Создать новую страницу")])])])):c("",!0),e.bot?(r(),d("form",{key:1,id:"page-construct",class:"py-3",onSubmit:o[43]||(o[43]=De((...l)=>e.openSaveModal&&e.openSaveModal(...l),["prevent"]))},[e.hasParts?(r(),d("div",T1,[t("div",D1,[S1,t("ul",P1,[t("li",{class:M(["mr-1",{active:e.need_page_images}]),title:"Изображения"},A1,2),t("li",{class:M(["mr-1",{active:e.need_page_sticker}]),title:"Стикеры"},j1,2),t("li",{class:M(["mr-1",{active:e.need_page_video}]),title:"Видео"},U1,2),t("li",{class:M(["mr-1",{active:e.need_page_audios}]),title:"Аудио"},V1,2),t("li",{class:M(["mr-1",{active:e.need_page_documents}]),title:"Документы"},Y1,2),t("li",{class:M(["mr-1",{active:e.need_attach_page}]),title:"Страницы"},B1,2),t("li",{class:M(["mr-1",{active:e.need_attach_slug}]),title:"Скрипты"},E1,2),t("li",{class:M(["mr-1",{active:e.need_attach_dialog}]),title:"Диалоги"},L1,2),t("li",{class:M(["mr-1",{active:e.need_rules}]),title:"Правила"},W1,2),t("li",{class:M(["mr-1",{active:e.need_reply_menu}]),title:"Нижнее меню"},K1,2),t("li",{title:"Текстовое меню",class:M({active:e.need_inline_menu})},Z1,2)])])])):c("",!0),t("div",G1,[t("div",J1,[t("label",eg,[L(a,null,{content:S(()=>[sg]),default:S(()=>[tg]),_:1}),g(" Команда "),og]),f(t("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[1]||(o[1]=l=>e.pageForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[E,e.pageForm.command]])]),t("div",ng,[t("div",ag,[e.pageForm.id||e.need_clean?(r(),d("button",lg,rg)):c("",!0),e.pageForm.id||e.need_clean?(r(),d("button",{key:1,type:"button",onClick:o[2]||(o[2]=(...l)=>e.clearForm&&e.clearForm(...l)),title:"Очистить \\ Новая страница",class:"btn btn-outline-primary min-menu-btn"},ug)):c("",!0),cg])])]),f(t("div",mg,[t("div",hg,[t("label",pg,[t("div",null,[L(a,null,{content:S(()=>[vg]),default:S(()=>[_g]),_:1}),g(" Текстовое содержимое страницы "),fg]),L(La,{param:"content",onCallback:e.injectContent},null,8,["onCallback"])]),t("div",bg,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=l=>e.pageForm.content=l),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"150px"}},null,512),[[E,e.pageForm.content]]),t("label",gg,[g("Содержимое страницы "),e.pageForm.content?(r(),d("span",yg,b(e.pageForm.content.length)+"/4096 ",1)):c("",!0)])])]),t("div",$g,[t("ul",kg,[t("li",{class:"nav-item",onClick:o[4]||(o[4]=l=>e.tab=0)},[t("a",{class:M([{active:e.tab===0},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Fg,2)]),t("li",{class:"nav-item",onClick:o[5]||(o[5]=l=>e.tab=1)},[t("a",{class:M([{active:e.tab===1},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Sg,2)]),t("li",{class:"nav-item",onClick:o[6]||(o[6]=l=>e.tab=2)},[t("a",{class:M([{active:e.tab===2},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Ag,2)]),t("li",{class:"nav-item",onClick:o[7]||(o[7]=l=>e.tab=3)},[t("a",{class:M([{active:e.tab===3},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},qg,2)]),t("li",{class:"nav-item",onClick:o[8]||(o[8]=l=>e.tab=4)},[t("a",{class:M([{active:e.tab===4},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Vg,2)]),t("li",{class:"nav-item",onClick:o[9]||(o[9]=l=>e.tab=5)},[t("a",{class:M([{active:e.tab===5},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Ig,2)]),t("li",{class:"nav-item",onClick:o[10]||(o[10]=l=>e.tab=6)},[t("a",{class:M([{active:e.tab===6},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Eg,2)]),t("li",{class:"nav-item",onClick:o[11]||(o[11]=l=>e.tab=7)},[t("a",{class:M([{active:e.tab===7},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},xg,2)]),t("li",{class:"nav-item",onClick:o[12]||(o[12]=l=>e.tab=8)},[t("a",{class:M([{active:e.tab===8},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Kg,2)]),t("li",{class:"nav-item",onClick:o[13]||(o[13]=l=>e.tab=9)},[t("a",{class:M([{active:e.tab===9},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Gg,2)]),t("li",{class:"nav-item",onClick:o[14]||(o[14]=l=>e.tab=10)},[t("a",{class:M([{active:e.tab===10},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},ty,2)])])]),f(t("div",null,[e.need_reply_menu?(r(),d("div",sy,[t("div",oy,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[15]||(o[15]=l=>e.need_reply_menu=l),type:"checkbox",id:"need-reply-menu"},null,512),[[ke,e.need_reply_menu]]),ny])])):c("",!0),e.need_reply_menu?(r(),d("div",ay,[t("div",ly,[t("div",iy,[ry,t("button",{class:M(["btn",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:o[16]||(o[16]=l=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(r(),d("span",uy," Скрыть шаблоны меню")):(r(),d("span",dy," Открыть шаблоны меню"))],2)]),t("div",cy,[t("div",my,[t("div",hy,[t("label",py,[L(a,null,{content:S(()=>[vy]),default:S(()=>[_y]),_:1}),g(" Заголовок ")]),f(t("input",{type:"text",class:"form-control",placeholder:"Заголовок меню","aria-label":"Заголовок меню","onUpdate:modelValue":o[17]||(o[17]=l=>e.pageForm.reply_keyboard_title=l),maxlength:"255","aria-describedby":"bot-domain"},null,512),[[E,e.pageForm.reply_keyboard_title]])])]),e.showReplyTemplateSelector?(r(),J(Fo,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),J(Bs,{key:1,type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",fy,[t("div",by,[t("div",gy,[f(t("img",yy,null,512),[[n,"../images/icon.png"]])]),$y,ky,t("div",wy,[t("button",{disabled:e.need_reply_menu,onClick:o[18]||(o[18]=l=>e.need_reply_menu=!0),class:M([{"btn-primary":!e.need_reply_menu,"btn-outline-secondary":e.need_reply_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Cy),Fy])])]))],512),[[We,e.tab===0]]),f(t("div",null,[e.need_inline_menu?(r(),d("div",Ty,[t("div",Dy,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[19]||(o[19]=l=>e.need_inline_menu=l),type:"checkbox",id:"need-inline-menu"},null,512),[[ke,e.need_inline_menu]]),Sy])])):c("",!0),e.need_inline_menu?(r(),d("div",Py,[t("div",Oy,[t("div",Ay,[My,t("button",{class:M(["btn",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[20]||(o[20]=l=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(r(),d("span",qy," Скрыть шаблоны меню")):(r(),d("span",jy," Открыть шаблоны меню"))],2)]),t("div",Uy,[e.showInlineTemplateSelector?(r(),J(Fo,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),J(Bs,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",zy,[t("div",Vy,[t("div",Ry,[f(t("img",Yy,null,512),[[n,"../images/icon.png"]])]),Iy,By,t("div",Ny,[t("button",{disabled:e.need_inline_menu,onClick:o[21]||(o[21]=l=>e.need_inline_menu=!0),class:M([{"btn-primary":!e.need_inline_menu,"btn-outline-secondary":e.need_inline_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Ey),Qy])])]))],512),[[We,e.tab===1]]),f(t("div",null,[e.need_page_images?(r(),d("div",Ly,[t("div",xy,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[22]||(o[22]=l=>e.need_page_images=l),type:"checkbox",id:"need-page-images"},null,512),[[ke,e.need_page_images]]),Wy])])):c("",!0),e.need_page_images?(r(),d("div",Hy,[t("div",Ky,[Xy,t("div",Zy,[t("label",Gy,[g(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[23]||(o[23]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)]),t("div",Jy,[e.photos.length>0?(r(),d("div",e0,[(r(!0),d(Y,null,ee(e.photos,(l,i)=>(r(),d("div",t0,[f(t("img",null,null,512),[[n,e.getPhoto(l).imageUrl]]),t("div",s0,[t("a",{onClick:u=>e.removePhoto(i)},"Удалить",8,o0)])]))),256))])):c("",!0),e.pageForm.images.length>0?(r(),d("h6",n0,"Ранее загруженные фотографии")):c("",!0),e.pageForm.images.length>0?(r(),d("div",a0,[(r(!0),d(Y,null,ee(e.pageForm.images,(l,i)=>(r(),d("div",l0,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+e.bot.id+"/"+l]]),t("div",i0,[t("a",{onClick:u=>e.removeImage(i)},"Удалить",8,r0)])]))),256))])):c("",!0)])])])])):(r(),d("div",d0,[t("div",u0,[t("div",c0,[f(t("img",m0,null,512),[[n,"../images/icon.png"]])]),h0,p0,t("div",_0,[t("button",{disabled:e.need_page_images,onClick:o[24]||(o[24]=l=>e.need_page_images=!0),class:M([{"btn-primary":!e.need_page_images,"btn-outline-secondary":e.need_page_images},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,v0),f0])])]))],512),[[We,e.tab===2]]),f(t("div",null,[e.need_page_video?(r(),d("div",b0,[t("div",g0,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[25]||(o[25]=l=>e.need_page_video=l),type:"checkbox",id:"need-page-video"},null,512),[[ke,e.need_page_video]]),y0])])):c("",!0),e.need_page_video?(r(),d("div",$0,[L(kt,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):(r(),d("div",k0,[t("div",w0,[t("div",C0,[f(t("img",F0,null,512),[[n,"../images/icon.png"]])]),T0,D0,t("div",S0,[t("button",{disabled:e.need_page_video,onClick:o[26]||(o[26]=l=>e.need_page_video=!0),class:M([{"btn-primary":!e.need_page_video,"btn-outline-secondary":e.need_page_video},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,P0),O0])])]))],512),[[We,e.tab===3]]),f(t("div",null,[e.need_page_sticker?(r(),d("div",A0,[t("div",M0,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[27]||(o[27]=l=>e.need_page_sticker=l),type:"checkbox",id:"need-page-sticker"},null,512),[[ke,e.need_page_sticker]]),j0])])):c("",!0),e.need_page_sticker?(r(),d("div",q0,[L(kt,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):(r(),d("div",U0,[t("div",z0,[t("div",V0,[f(t("img",R0,null,512),[[n,"../images/icon.png"]])]),Y0,I0,t("div",B0,[t("button",{disabled:e.need_page_sticker,onClick:o[28]||(o[28]=l=>e.need_page_sticker=!0),class:M([{"btn-primary":!e.need_page_sticker,"btn-outline-secondary":e.need_page_sticker},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,N0),E0])])]))],512),[[We,e.tab===4]]),f(t("div",null,[e.need_page_audios?(r(),d("div",Q0,[t("div",L0,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[29]||(o[29]=l=>e.need_page_audios=l),type:"checkbox",id:"need-page-audio"},null,512),[[ke,e.need_page_audios]]),x0])])):c("",!0),e.need_page_audios?(r(),d("div",W0,[L(kt,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):(r(),d("div",H0,[t("div",K0,[t("div",X0,[f(t("img",Z0,null,512),[[n,"../images/icon.png"]])]),G0,J0,t("div",e$,[t("button",{disabled:e.need_page_audios,onClick:o[30]||(o[30]=l=>e.need_page_audios=!0),class:M([{"btn-primary":!e.need_page_audios,"btn-outline-secondary":e.need_page_audios},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,t$),s$])])]))],512),[[We,e.tab===5]]),f(t("div",null,[e.need_page_documents?(r(),d("div",o$,[t("div",n$,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[31]||(o[31]=l=>e.need_page_documents=l),type:"checkbox",id:"need-page-document"},null,512),[[ke,e.need_page_documents]]),a$])])):c("",!0),e.need_page_documents?(r(),d("div",l$,[L(kt,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):(r(),d("div",i$,[t("div",r$,[t("div",d$,[f(t("img",u$,null,512),[[n,"../images/icon.png"]])]),c$,m$,t("div",h$,[t("button",{disabled:e.need_page_documents,onClick:o[32]||(o[32]=l=>e.need_page_documents=!0),class:M([{"btn-primary":!e.need_page_documents,"btn-outline-secondary":e.need_page_documents},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,p$),_$])])]))],512),[[We,e.tab===6]]),f(t("div",null,[t("div",v$,[t("div",f$,[t("div",b$,[f(t("img",g$,null,512),[[n,"../images/icon.png"]])]),y$,$$,e.pageForm.next_page_id?(r(),d("p",k$,"Связано со страницей #"+b(e.pageForm.next_page_id),1)):c("",!0),t("div",w$,[e.pageForm.next_page_id?(r(),d("button",{key:0,class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-danger",type:"button",onClick:o[33]||(o[33]=l=>e.pageForm.next_page_id=null)},"Очистить")):(r(),d("button",C$," Связать ")),F$])])])],512),[[We,e.tab===7]]),f(t("div",null,[e.need_attach_slug?(r(),d("div",T$,[D$,t("div",S$,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[34]||(o[34]=l=>e.need_show_global_slug_list=l),type:"checkbox",id:"need-show-global-slug-list"},null,512),[[ke,e.need_show_global_slug_list]]),P$]),e.bot&&e.need_show_global_slug_list?(r(),J(Rn,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),e.need_attach_slug?(r(),d("div",O$,[t("div",A$,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[35]||(o[35]=l=>e.need_attach_slug=l),type:"checkbox",id:"need-slug-attach"},null,512),[[ke,e.need_attach_slug]]),M$])])):c("",!0),e.need_attach_slug?(r(),d("div",j$,[e.pageForm.next_bot_menu_slug_id?(r(),d("div",q$,[g(" Связано со скриптом #"+b(e.pageForm.next_bot_menu_slug_id)+" ",1),t("a",{class:"btn btn-link text-danger",onClick:o[36]||(o[36]=l=>e.pageForm.next_bot_menu_slug_id=null)},"Очистить")])):c("",!0),e.bot&&e.load_slug_simple_list?(r(),J(Wp,{key:1,global:!0,selected:[e.pageForm.next_bot_menu_slug_id],onCallback:e.associateSlug,bot:e.bot},null,8,["selected","onCallback","bot"])):c("",!0)])):(r(),d("div",U$,[t("div",z$,[t("div",V$,[f(t("img",R$,null,512),[[n,"../images/icon.png"]])]),Y$,I$,t("div",B$,[t("button",{disabled:e.need_attach_slug,onClick:o[37]||(o[37]=l=>e.need_attach_slug=!0),class:M([{"btn-primary":!e.need_attach_slug,"btn-outline-secondary":e.need_attach_slug},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,N$),E$])])]))],512),[[We,e.tab===8]]),f(t("div",null,[e.need_attach_dialog?(r(),d("div",Q$,[t("div",L$,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[38]||(o[38]=l=>e.need_attach_dialog=l),type:"checkbox",id:"need-dialog-attach"},null,512),[[ke,e.need_attach_dialog]]),x$])])):c("",!0),e.need_attach_dialog?(r(),d("div",W$,[e.pageForm.next_bot_dialog_command_id?(r(),d("p",H$,[g("Связано с диалогом #"+b(e.pageForm.next_bot_dialog_command_id)+" ",1),t("a",{class:"btn btn-link",onClick:o[39]||(o[39]=l=>e.pageForm.next_bot_dialog_command_id=null)},"Очистить")])):c("",!0),e.bot?(r(),J(Yn,{key:1,onSelectDialog:e.associateDialog,bot:e.bot},null,8,["onSelectDialog","bot"])):c("",!0)])):(r(),d("div",K$,[t("div",X$,[t("div",Z$,[f(t("img",G$,null,512),[[n,"../images/icon.png"]])]),J$,ek,t("div",tk,[t("button",{disabled:e.need_attach_dialog,onClick:o[40]||(o[40]=l=>e.need_attach_dialog=!0),class:M([{"btn-primary":!e.need_attach_dialog,"btn-outline-secondary":e.need_attach_dialog},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,sk),ok])])]))],512),[[We,e.tab===9]]),f(t("div",null,[e.need_rules?(r(),d("div",nk,[t("div",ak,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[41]||(o[41]=l=>e.need_rules=l),type:"checkbox",id:"need-rules"},null,512),[[ke,e.need_rules]]),lk])])):c("",!0),e.need_rules?(r(),d("div",ik,[L(y1,{bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])])):(r(),d("div",rk,[t("div",dk,[t("div",uk,[f(t("img",ck,null,512),[[n,"../images/icon.png"]])]),mk,hk,t("div",pk,[t("button",{disabled:e.need_rules,onClick:o[42]||(o[42]=l=>e.need_rules=!0),class:M([{"btn-primary":!e.need_rules,"btn-outline-secondary":e.need_rules},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,_k),vk])])]))],512),[[We,e.tab===10]])],512),[[We,!e.pageForm.is_external]])],32)):c("",!0),fk,t("div",bk,[t("div",gk,[t("div",yk,[$k,t("div",kk,[e.bot?(r(),d("div",wk,[t("div",Ck,[t("h6",Fk,[t("span",null,[g("Вы создаете страницу для "),t("a",{href:"https://t.me/"+e.bot.bot_domain,target:"_blank"},b(e.bot.bot_domain),9,Tk)])])])])):c("",!0),t("form",{onSubmit:o[48]||(o[48]=De((...l)=>e.submitPage&&e.submitPage(...l),["prevent"])),class:"row"},[t("div",Dk,[Sk,t("ul",Pk,[t("li",{class:M({active:e.need_page_images})},Ak,2),t("li",{class:M({active:e.need_page_sticker})},jk,2),t("li",{class:M({active:e.need_page_video})},Uk,2),t("li",{class:M({active:e.need_page_audios})},Vk,2),t("li",{class:M({active:e.need_page_documents})},Yk,2),t("li",{class:M({active:e.need_attach_page})},Bk,2),t("li",{class:M({active:e.need_attach_slug})},Ek,2),t("li",{class:M({active:e.need_attach_dialog})},Lk,2),t("li",{class:M({active:e.need_rules})},Wk,2),t("li",{class:M({active:e.need_reply_menu})},Kk,2),t("li",{class:M({active:e.need_inline_menu})},Zk,2)])]),e.pageForm.id?(r(),d("div",Gk,[t("div",Jk,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[44]||(o[44]=l=>e.need_show_qr_and_link=l),type:"checkbox",id:"need-show-qr-and-link"},null,512),[[ke,e.need_show_qr_and_link]]),e2])])):c("",!0),e.pageForm.id&&e.need_show_qr_and_link?(r(),d("div",t2,[t("p",null,[g("Ссылка на текущую страницу: "),t("span",{class:"bg-secondary font-bold cursor-pointer",onClick:o[45]||(o[45]=l=>e.copyToClipBoard(e.pageLink))},b(e.pageLink),1)]),t("div",s2,[f(t("img",o2,null,512),[[n,e.qr]])])])):c("",!0),t("div",n2,[t("label",a2,[L(a,null,{content:S(()=>[i2]),default:S(()=>[l2]),_:1}),g(" Описание страницы "),r2]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":o[46]||(o[46]=l=>e.pageForm.comment=l),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[E,e.pageForm.comment]])]),t("div",d2,[t("div",u2,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[47]||(o[47]=l=>e.pageForm.is_external=l),type:"checkbox",id:"is-external"},null,512),[[ke,e.pageForm.is_external]]),c2]),e.pageForm.is_external?(r(),d("div",m2,[g(" Обработка ссылок передана на внешний адрес, указанный в настройках бота! Все запросы по данной кнопке будут отправлены на указанный URL-адрес: "),t("strong",null,b(e.bot.callback_link||"не указано")+".",1),e.bot.callback_link?c("",!0):(r(),d("p",h2,[g("Внешня ссылка не установлена! Перейдите в раздел "),p2,g(", затем "),_2,g(" и установите ссылку для внешнего управления в поле "),v2,g("!")]))])):c("",!0)]),f2],32)]),b2])])]),t("div",g2,[t("div",y2,[t("div",$2,[t("div",k2,[L(Co,{current:e.pageForm.id,onCallback:e.attachPage,editor:!1},null,8,["current","onCallback"])])])])]),t("div",w2,[C2,t("div",F2,[t("div",T2,[t("div",D2,[e.loaded_page_list?(r(),J(Co,{key:0,editor:!0,current:e.page,onCallback:e.pageListCallback},null,8,["current","onCallback"])):c("",!0)])])])])],64)}}}),O2={props:["bot","item"],data(){return{sectionForm:{section:null},categoryForm:{label:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]}}},computed:{...Ne(["getProductCategories"]),filteredCategories(){return this.productCategories.length===0?this.categories:this.categories.filter(s=>this.productCategories.indexOf(s.value)===-1)}},mounted(){this.loadProductCategories(),this.item&&this.$nextTick(()=>{this.productForm={id:this.item.id||null,article:this.item.article||null,vk_product_id:this.item.vk_product_id||null,title:this.item.title||null,description:this.item.description||null,images:this.item.images||null,type:this.item.type||1,old_price:this.item.old_price||null,current_price:this.item.current_price||null,variants:this.item.variants||null,in_stop_list_at:this.item.in_stop_list_at||null,bot_id:this.item.bot_id||null,options:this.item.options||null,reviews:this.item.reviews||null},this.options=[],this.item.categories.forEach(s=>{this.productCategories.push(s.id)})})},methods:{prepareCategoryName(s){let e=this.categories.find(o=>o.value===s);return console.log(e),e?e.label:s},addCategory(){const s=this.categoryForm.label;this.productCategories.push(s),this.categoryForm.label=null},selectCategory(s){this.productCategories.push(s.value)},submit(){let s=new FormData;if(Object.keys(this.productForm).forEach(e=>{const o=this.productForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.removed_options.length>0&&s.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&s.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:s}).then(e=>{this.load=!0,this.$notify({title:"Конструктор ботов",text:"Продукт успешно сохранен!",type:"success"}),this.clearForm(),this.$emit("refresh")}).catch(e=>{})},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},loadProductCategories(){this.$store.dispatch("loadProductCategories",{dataObject:{bot_id:this.bot.id}}).then(()=>{this.getProductCategories.forEach(e=>{this.categories.push({value:e.id,label:e.title})})})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removeSection(s){this.sections.splice(s,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeProductCategory(s){this.productCategories.splice(s,1)},removeVariant(s){this.productForm.variants.splice(s,1)},removeOption(s){this.productForm.options[s].id&&this.removed_options.push(this.productForm.options[s].id),this.productForm.options.splice(s,1)},removeImage(s){this.productForm.images.splice(s,1)},removePhoto(s){this.photos.splice(s,1)},clearForm(){const s={article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=s}}},A2={class:"nav nav-tabs"},M2={class:"nav-item"},j2={class:"nav-item"},q2={class:"nav-item"},U2={key:0},z2={class:"col-md-8 d-flex align-items-center"},V2={class:"form-check"},R2=t("label",{class:"form-check-label",for:"in-stop-list"}," Товар находится в стоп-листе ",-1),Y2={class:"col-md-4 d-flex justify-content-end"},I2={class:"col-md-12 mb-3"},B2=["onClick"],N2={class:"dropdown"},E2=t("button",{type:"button",class:"btn btn-outline-info w-100","data-bs-toggle":"dropdown","data-bs-display":"static","aria-expanded":"false"},[t("p",{class:"mb-0"},"Выберите категорию")],-1),Q2={class:"dropdown-menu w-100",style:{"overflow-y":"scroll",height:"300px"}},L2={class:"p-3"},x2=t("label",{for:"exampleDropdownFormEmail1",class:"form-label"},"Новая категория",-1),W2={class:"p-3"},H2=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),K2=["onClick"],X2={class:"col-md-6"},Z2={class:"form-floating mb-3"},G2=t("label",{for:"article"},"Артикул товара",-1),J2={class:"col-md-6"},ew={class:"form-floating mb-3"},tw=t("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),sw={class:"col-md-6"},ow={class:"form-floating mb-3"},nw=t("label",{for:"title"},"Названи товара",-1),aw={class:"col-md-6"},lw={class:"form-floating mb-3"},iw=["value"],rw=t("label",{for:"type"},"Тип товара",-1),dw={class:"col-md-12"},uw={class:"form-floating mb-3"},cw=t("label",{for:"description"},"Описание товара",-1),mw={class:"col-md-6"},hw={class:"form-floating mb-3"},pw=t("label",{for:"current-price"},"Актуальная цена",-1),_w={class:"col-md-6"},vw={class:"form-floating mb-3"},fw=t("label",{for:"old-price"},"Старая цена",-1),bw={class:"col-md-12 mb-3"},gw={class:"card"},yw={class:"card-header"},$w={key:0},kw={class:"card-body"},ww={class:"row"},Cw={class:"col-12 mb-3"},Fw={class:"col-md-6 mb-3"},Tw={class:"card w-100"},Dw={class:"card-body"},Sw={class:"form-floating mb-3"},Pw=["onUpdate:modelValue","id"],Ow=["for"],Aw={class:"form-floating mb-3"},Mw=["onUpdate:modelValue","id"],jw=["for"],qw={class:"card-footer"},Uw=["onClick"],zw=t("i",{class:"fa-solid fa-trash-can"},null,-1),Vw=[zw],Rw={class:"col-md-12 mb-3"},Yw={class:"card"},Iw=t("div",{class:"card-header"},[t("h6",null,"Характеристики товара")],-1),Bw={class:"card-body"},Nw={class:"row mb-3"},Ew={class:"col-12"},Qw=t("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"},"Добавить секцию ",-1),Lw={class:"badge bg-info mr-1"},xw=["onClick"],Ww=t("i",{class:"fa-solid fa-xmark"},null,-1),Hw=[Ww],Kw={class:"row"},Xw={class:"col-md-4 mb-3"},Zw={class:"card w-100"},Gw={class:"card-body"},Jw={class:"form-floating mb-3"},e3=["onUpdate:modelValue","id"],t3=["for"],s3={class:"form-floating mb-3"},o3=["onUpdate:modelValue","id"],n3=["for"],a3={class:"form-floating mb-3"},l3=["onUpdate:modelValue","id"],i3=t("option",{value:null},"Без секции",-1),r3=["value"],d3=["for"],u3={class:"card-footer"},c3=["onClick"],m3=t("i",{class:"fa-solid fa-trash-can"},null,-1),h3=[m3],p3={class:"row"},_3={class:"col-12"},v3={class:"col-md-12 mb-3"},f3=t("h6",null,"Фотографии товара",-1),b3={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},g3={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},y3=t("span",null,"+",-1),$3={class:"mb-2 img-preview",style:{"margin-right":"10px"}},k3={class:"remove"},w3=["onClick"],C3={class:"mb-2 img-preview",style:{"margin-right":"10px"}},F3={class:"remove"},T3=["onClick"],D3=t("div",{class:"col-12"},[t("button",{type:"submit",class:"btn btn-outline-primary w-100 p-3"},"Сохранить ")],-1),S3={key:1};function P3(s,e,o,a,n,l){const i=ss("lazy");return r(),d(Y,null,[t("ul",A2,[t("li",M2,[t("a",{class:M(["nav-link",{active:n.tab===0}]),onClick:e[0]||(e[0]=u=>n.tab=0),"aria-current":"page",href:"#product-form-info"},"Информация о товаре",2)]),t("li",j2,[t("a",{class:M(["nav-link",{active:n.tab===1}]),onClick:e[1]||(e[1]=u=>n.tab=1),href:"#product-reviews"},"Комментарии",2)]),t("li",q2,[t("a",{class:M(["nav-link",{active:n.tab===2}]),onClick:e[2]||(e[2]=u=>n.tab=2),href:"#product-reviews"},"Заказы",2)])]),n.tab===0?(r(),d("div",U2,[t("form",{onSubmit:e[19]||(e[19]=De((...u)=>l.submit&&l.submit(...u),["prevent"])),class:"row"},[t("div",z2,[t("div",V2,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=u=>n.productForm.in_stop_list_at=u),type:"checkbox",value:"false",id:"in-stop-list"},null,512),[[ke,n.productForm.in_stop_list_at]]),R2])]),t("div",Y2,[t("a",{href:"#",class:"btn btn-link",onClick:e[4]||(e[4]=(...u)=>l.clearForm&&l.clearForm(...u))},"Новый товар")]),t("div",I2,[(r(!0),d(Y,null,ee(n.productCategories,(u,h)=>(r(),d("span",{class:"badge bg-info mr-1 mb-1 cursor-pointer",onClick:p=>l.removeProductCategory(h)},b(l.prepareCategoryName(u)),9,B2))),256)),t("div",N2,[E2,t("ul",Q2,[t("div",L2,[x2,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=u=>n.categoryForm.label=u),id:"exampleDropdownFormEmail1",placeholder:"Название категории"},null,512),[[E,n.categoryForm.label]])]),t("div",W2,[t("button",{class:"btn btn-primary w-100",type:"button",onClick:e[6]||(e[6]=(...u)=>l.addCategory&&l.addCategory(...u))},"Добавить категорию ")]),H2,(r(!0),d(Y,null,ee(l.filteredCategories,u=>(r(),d("li",null,[t("button",{class:"dropdown-item",type:"button",onClick:h=>l.selectCategory(u)},b(u.label),9,K2)]))),256))])])]),t("div",X2,[t("div",Z2,[f(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=u=>n.productForm.article=u),class:"form-control",id:"article",placeholder:"name@example.com"},null,512),[[E,n.productForm.article]]),G2])]),t("div",J2,[t("div",ew,[f(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=u=>n.productForm.vk_product_id=u),disabled:!0,class:"form-control",id:"vk-product-id",placeholder:"name@example.com"},null,512),[[E,n.productForm.vk_product_id]]),tw])]),t("div",sw,[t("div",ow,[f(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>n.productForm.title=u),class:"form-control",id:"title",placeholder:"name@example.com"},null,512),[[E,n.productForm.title]]),nw])]),t("div",aw,[t("div",lw,[f(t("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=u=>n.productForm.type=u),id:"type","aria-label":"Floating label select example"},[(r(!0),d(Y,null,ee(n.types,(u,h)=>(r(),d("option",{value:u.value},b(u.title),9,iw))),256))],512),[[Vt,n.productForm.type]]),rw])]),t("div",dw,[t("div",uw,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=u=>n.productForm.description=u),placeholder:"Leave a comment here",id:"description"},null,512),[[E,n.productForm.description]]),cw])]),t("div",mw,[t("div",hw,[f(t("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=u=>n.productForm.current_price=u),class:"form-control",id:"current-price",placeholder:"name@example.com"},null,512),[[E,n.productForm.current_price]]),pw])]),t("div",_w,[t("div",vw,[f(t("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=u=>n.productForm.old_price=u),class:"form-control",id:"old-price",placeholder:"name@example.com"},null,512),[[E,n.productForm.old_price]]),fw])]),t("div",bw,[t("div",gw,[t("div",yw,[t("h6",null,[g("Варианты товара "),n.productForm.variants?(r(),d("span",$w,"("+b(n.productForm.variants.length)+")",1)):c("",!0)])]),t("div",kw,[t("div",ww,[t("div",Cw,[t("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[14]||(e[14]=(...u)=>l.addVariant&&l.addVariant(...u))},"Добавить вариант ")]),(r(!0),d(Y,null,ee(n.productForm.variants,(u,h)=>(r(),d("div",Fw,[t("div",Tw,[t("div",Dw,[t("div",Sw,[f(t("input",{type:"text","onUpdate:modelValue":p=>n.productForm.variants[h].key=p,class:"form-control",id:"variant-key-"+h,placeholder:"name@example.com",required:""},null,8,Pw),[[E,n.productForm.variants[h].key]]),t("label",{for:"variant-key-"+h},"Ключ",8,Ow)]),t("div",Aw,[f(t("input",{type:"text","onUpdate:modelValue":p=>n.productForm.variants[h].value=p,class:"form-control",id:"variant-value-"+h,placeholder:"name@example.com",required:""},null,8,Mw),[[E,n.productForm.variants[h].value]]),t("label",{for:"variant-value-"+h},"Значение",8,jw)])]),t("div",qw,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeVariant(h)},Vw,8,Uw)])])]))),256))])])])]),t("div",Rw,[t("div",Yw,[Iw,t("div",Bw,[t("div",Nw,[t("div",Ew,[t("form",{onSubmit:e[16]||(e[16]=De((...u)=>l.addSection&&l.addSection(...u),["prevent"])),class:"input-group mb-3"},[f(t("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=u=>n.sectionForm.section=u),class:"form-control border-info",placeholder:"Название секции","aria-label":"Recipient's username","aria-describedby":"button-addon2",required:""},null,512),[[E,n.sectionForm.section]]),Qw],32),(r(!0),d(Y,null,ee(n.sections,(u,h)=>(r(),d("span",Lw,[g(b(u)+" ",1),t("strong",{onClick:p=>l.removeSection(h)},Hw,8,xw)]))),256))])]),t("div",Kw,[(r(!0),d(Y,null,ee(n.productForm.options,(u,h)=>(r(),d("div",Xw,[t("div",Zw,[t("div",Gw,[t("div",Jw,[f(t("input",{type:"text","onUpdate:modelValue":p=>n.productForm.options[h].title=p,class:"form-control",id:"option-title-"+h,placeholder:"name@example.com"},null,8,e3),[[E,n.productForm.options[h].title]]),t("label",{for:"option-title-"+h},"Название характеристики",8,t3)]),t("div",s3,[f(t("input",{type:"text","onUpdate:modelValue":p=>n.productForm.options[h].value=p,class:"form-control",id:"option-value-"+h,placeholder:"name@example.com"},null,8,o3),[[E,n.productForm.options[h].value]]),t("label",{for:"option-value-"+h},"Значение характеристики",8,n3)]),t("div",a3,[f(t("select",{class:"form-select","onUpdate:modelValue":p=>n.productForm.options[h].section=p,id:"option-section-"+h,"aria-label":"Floating label select example"},[i3,(r(!0),d(Y,null,ee(n.sections,p=>(r(),d("option",{value:p},b(p),9,r3))),256))],8,l3),[[Vt,n.productForm.options[h].section]]),t("label",{for:"option-section-"+h},"Секция товара",8,d3)])]),t("div",u3,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeOption(h)},h3,8,c3)])])]))),256))]),t("div",p3,[t("div",_3,[t("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[17]||(e[17]=(...u)=>l.addOption&&l.addOption(...u))},"Добавить характеристику ")])])])])]),t("div",v3,[f3,t("div",b3,[t("label",g3,[y3,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[18]||(e[18]=(...u)=>l.onChangePhotos&&l.onChangePhotos(...u)),style:{display:"none"}},null,32)]),n.productForm.images?(r(!0),d(Y,{key:0},ee(n.productForm.images,(u,h)=>(r(),d("div",$3,[f(t("img",null,null,512),[[i,u]]),t("div",k3,[t("a",{onClick:p=>l.removeImage(h)},"Удалить",8,w3)])]))),256)):c("",!0),n.photos.length>0?(r(!0),d(Y,{key:1},ee(n.photos,(u,h)=>(r(),d("div",C3,[f(t("img",null,null,512),[[i,l.getPhoto(u).imageUrl]]),t("div",F3,[t("a",{onClick:p=>l.removePhoto(h)},"Удалить",8,T3)])]))),256)):c("",!0)])]),D3],32)])):c("",!0),n.tab===1?(r(),d("div",S3," Отзывы ")):c("",!0)],64)}const O3=Ht(O2,[["render",P3]]),A3={props:["item"],data(){return{bot:null}},methods:{preparedImgUrl(s){return s.toLocaleLowerCase().startsWith("https://")||s.toLocaleLowerCase().startsWith("http://")?s:"/images-by-bot-id/"+this.bot.id+"/"+s},removeProduct(){this.$store.dispatch("removeProduct",this.item.id).then(s=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"})}).catch(s=>{})},duplicateProduct(){this.$store.dispatch("duplicateProduct",this.item.id).then(s=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно продублирован!",type:"success"})}).catch(s=>{})}},mounted(){this.bot=this.getCurrentBot},computed:{...Ne(["getCurrentBot"])}},M3={key:0,class:"card"},j3={class:"card-header"},q3={class:"card-body"},U3=["id"],z3={class:"carousel-inner"},V3=["src"],R3=["data-bs-target"],Y3=t("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),I3=t("span",{class:"visually-hidden"},"Previous",-1),B3=[Y3,I3],N3=["data-bs-target"],E3=t("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),Q3=t("span",{class:"visually-hidden"},"Next",-1),L3=[E3,Q3],x3={class:"card-footer d-flex justify-content-between"},W3=t("i",{class:"fa-regular fa-copy"},null,-1),H3=[W3],K3=t("i",{class:"fa-solid fa-trash-can"},null,-1),X3=[K3];function Z3(s,e,o,a,n,l){return n.bot?(r(),d("div",M3,[t("div",j3,[t("p",null,"#"+b(o.item.id),1)]),t("div",q3,[t("p",null,b(o.item.title),1),t("div",{id:"image-slider-"+o.item.id,class:"carousel slide","data-bs-ride":"carousel"},[t("div",z3,[(r(!0),d(Y,null,ee(o.item.images,(i,u)=>(r(),d("div",{class:M(["carousel-item",{active:u===0}]),style:{height:"300px"}},[t("img",{src:l.preparedImgUrl(i),class:"d-block w-100 object-fit-cover",alt:"..."},null,8,V3)],2))),256))]),t("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#image-slider-"+o.item.id,"data-bs-slide":"prev"},B3,8,R3),t("button",{class:"carousel-control-next",type:"button","data-bs-target":"#image-slider-"+o.item.id,"data-bs-slide":"next"},L3,8,N3)],8,U3)]),t("div",x3,[t("button",{title:"Дублировать товар",onClick:e[0]||(e[0]=(...i)=>l.duplicateProduct&&l.duplicateProduct(...i)),class:"btn btn-outline-info mr-1"},H3),t("button",{title:"Удалить товар",onClick:e[1]||(e[1]=(...i)=>l.removeProduct&&l.removeProduct(...i)),class:"btn btn-outline-danger"},X3)])])):c("",!0)}const G3=Ht(A3,[["render",Z3]]),J3=t("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"}," Найти ",-1),e5={key:0},t5={class:"row"},s5={class:"col-4 mb-2"},o5={props:["bot"],data(){return{search:null,products:[],paginate:null}},computed:{...Ne(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadProducts()},methods:{selectProduct(s){this.$emit("select",s)},nextProducts(s){this.loadProducts(s)},loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{bot_id:this.bot.id,search:this.search},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})}}},n5=Object.assign(o5,{__name:"ProductList",setup(s){return(e,o)=>(r(),d(Y,null,[t("form",{class:"input-group mb-3",onSubmit:o[1]||(o[1]=De(a=>e.loadProducts(0),["prevent"]))},[f(t("input",{type:"text",class:"form-control border-info",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"aria-describedby":"button-addon2",required:""},null,512),[[E,e.search]]),J3],32),t("p",null,[g("Всего товаров: "),e.paginate?(r(),d("span",e5,b(e.paginate.meta.total||0),1)):c("",!0)]),t("div",t5,[(r(!0),d(Y,null,ee(e.filteredProducts,(a,n)=>(r(),d("div",s5,[L(G3,{onClick:l=>e.selectProduct(a),item:a},null,8,["onClick","item"])]))),256))]),e.paginate?(r(),J(st,{key:0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)],64))}}),a5={class:"card mb-2"},l5=t("div",{class:"card-header"},[t("h6",null,"Управление магазином")],-1),i5={class:"card-body"},r5={class:"row"},d5={class:"col-12"},u5={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},c5=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),m5=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),h5=t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),p5=["disabled"],_5=t("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),v5={class:"row mb-3"},f5={class:"col-md-3"},b5=["href"],g5=zn('<div class="col-md-3"><button class="btn btn-outline-info w-100">Экспорт в XLS</button></div><div class="col-md-3"><button class="btn btn-outline-info w-100">Импорт из XLS</button></div><div class="col-md-3"><button class="btn btn-outline-danger w-100">Удалить товары</button></div>',3),y5=t("div",{class:"row"},[t("div",{class:"col-md-3"},[t("button",{class:"btn btn-outline-info w-100"},"Экспортировать заказы")])],-1),$5={class:"card"},k5=t("div",{class:"card-header"},[t("h6",null,"Работа с товаром")],-1),w5={class:"card-body"},C5={class:"card mt-2"},F5={class:"card-body"},T5={data(){return{load:!1,tab:0,url:null,link:null,bot:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{...Ne(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.botForm.vk_shop_link=this.bot.vk_shop_link||null,this.updateProducts()},methods:{updateShopLink(){this.load=!0,this.botForm.bot_id=this.bot.id,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(s=>{this.load=!1,this.updateProducts(),this.$notify({title:"Менеджер магазина",text:"Ссылка на источник в ВК обновлена"})}).catch(()=>{this.load=!1})},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},selectProduct(s){this.load=!0,this.$nextTick(()=>{this.selectedProduct=s,this.load=!1})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk",{dataObject:{bot_domain:this.getCurrentBot.bot_domain}}).then(s=>{this.link=s.data.url,this.load=!1,this.url=null}).catch(()=>{this.load=!1})}}},D5=Object.assign(T5,{__name:"Shop",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d(Y,null,[t("div",a5,[l5,t("div",i5,[t("div",r5,[t("div",d5,[t("form",{onSubmit:o[1]||(o[1]=De((...n)=>e.updateShopLink&&e.updateShopLink(...n),["prevent"])),class:"mb-2"},[t("label",u5,[t("div",null,[L(a,null,{content:S(()=>[m5]),default:S(()=>[c5]),_:1}),g(" ВК-группа ")]),h5]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[0]||(o[0]=n=>e.botForm.vk_shop_link=n),"aria-describedby":"vk_shop_link"},null,512),[[E,e.botForm.vk_shop_link]]),t("button",{disabled:e.load,class:"btn btn-outline-primary mt-2 mb-2 w-100"},[_5,g(" Сохранить ")],8,p5)],32)])]),t("div",v5,[t("div",f5,[t("a",{target:"_blank",href:e.link,class:"btn btn-primary w-100"}," Обновить товар ",8,b5)]),g5]),y5])]),t("div",$5,[k5,t("div",w5,[e.bot&&!e.load?(r(),J(O3,{key:0,bot:e.bot,item:e.selectedProduct,onRefresh:e.refresh},null,8,["bot","item","onRefresh"])):c("",!0)])]),t("div",C5,[t("div",F5,[e.bot&&!e.load?(r(),J(n5,{key:0,bot:e.bot,onSelect:e.selectProduct},null,8,["bot","onSelect"])):c("",!0)])])],64)}}}),S5={props:["data"],data(){return{hasConnect:!1,bot:null,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null}}},computed:{...Ne(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data?this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null}):this.amoForm.bot_id=this.bot.id||null},methods:{submitAmo(){let s=new FormData;Object.keys(this.amoForm).forEach(e=>{const o=this.amoForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveAmoCRM",{amoForm:s}).then(e=>{this.$notify("Данные CRM успешно сохранены")}).catch(e=>{})}}},P5=t("div",{class:"col-12"},[t("p",null,[t("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),g(" по шагам")])],-1),O5={class:"col-md-6 col-12 mb-2"},A5={class:"form-label",id:"client_id"},M5=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),j5=t("div",null,"ID интеграции",-1),q5=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),U5={class:"col-md-6 col-12 mb-2"},z5={class:"form-label",id:"client_secret"},V5=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),R5=t("div",null,"Секрет интеграции",-1),Y5=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),I5={class:"col-md-6 mb-2"},B5={class:"form-label",id:"auth_code"},N5=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),E5=t("div",null,"Полученный код авторизации",-1),Q5=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),L5={class:"col-md-6 col-12 mb-2"},x5={class:"form-label",id:"subdomain2"},W5=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),H5=t("div",null,"Ваш поддомен в системе AMO CRM",-1),K5=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),X5=t("div",{class:"col-md-12 col-12"},[t("button",{type:"submit",class:"btn btn-outline-primary p-3 w-100"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),g(" Сохранить настройку AMO ")])],-1);function Z5(s,e,o,a,n,l){const i=gt("Popper");return r(),d("form",{onSubmit:e[4]||(e[4]=De((...u)=>l.submitAmo&&l.submitAmo(...u),["prevent"])),class:"row"},[P5,t("div",O5,[t("label",A5,[L(i,null,{content:S(()=>[j5]),default:S(()=>[M5]),_:1}),g(" client_id "),q5]),f(t("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=u=>n.amoForm.client_id=u),"aria-describedby":"client_id"},null,512),[[E,n.amoForm.client_id]])]),t("div",U5,[t("label",z5,[L(i,null,{content:S(()=>[R5]),default:S(()=>[V5]),_:1}),g(" client_secret "),Y5]),f(t("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=u=>n.amoForm.client_secret=u),"aria-describedby":"client_secret"},null,512),[[E,n.amoForm.client_secret]])]),t("div",I5,[t("label",B5,[L(i,null,{content:S(()=>[E5]),default:S(()=>[N5]),_:1}),g(" auth_code "),Q5]),f(t("textarea",{class:"form-control",placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=u=>n.amoForm.auth_code=u),"aria-describedby":"auth_code"},`
                                    `,512),[[E,n.amoForm.auth_code]])]),t("div",L5,[t("label",x5,[L(i,null,{content:S(()=>[H5]),default:S(()=>[W5]),_:1}),g(" subdomain "),K5]),f(t("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=u=>n.amoForm.subdomain=u),"aria-describedby":"subdomain"},null,512),[[E,n.amoForm.subdomain]])]),X5],32)}const G5=Ht(S5,[["render",Z5]]),J5={props:["data"],data(){return{load:!1,bot:null,yClientsForm:{login:null,password:null,partner_token:null,company:null}}},computed:{...Ne(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data&&this.$nextTick(()=>{this.yClientsForm.login=this.data.login||null,this.yClientsForm.password=this.data.password||null,this.yClientsForm.partner_token=this.data.partner_token||null,this.yClientsForm.company=this.data.company||null})},methods:{submitYClients(){let s=new FormData;Object.keys(this.yClientsForm).forEach(e=>{const o=this.yClientsForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("saveYClients",{yClientsForm:s}).then(e=>{this.$notify({title:"Работа с YClients",text:"Данные YClients успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с YClients",text:"Ошибка сохранения данных",type:"error"})})}}},eC=t("h6",null,"Настройка YClients",-1),tC={class:"row"},sC={class:"col-md-12"},oC={class:"mb-2"},nC=t("label",{class:"form-label d-flex justify-content-between mt-2",for:"login"},[g(" Логин "),t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),aC={class:"mb-2"},lC=t("label",{class:"form-label d-flex justify-content-between mt-2",for:"password"},[g(" Пароль "),t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),iC={class:"mb-2"},rC=t("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[g(" Партнерский тоукен "),t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),dC={class:"mb-2"},uC=t("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[g(" ID компании, в которую записывать клиентов "),t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),cC=t("button",{class:"btn btn-success w-100 r mb-3 text-uppercase font-900"}," Сохранить ",-1);function mC(s,e,o,a,n,l){return r(),d(Y,null,[eC,t("form",{onSubmit:e[4]||(e[4]=De((...i)=>l.submitYClients&&l.submitYClients(...i),["prevent"]))},[t("div",tC,[t("div",sC,[t("div",oC,[nC,f(t("input",{type:"text",id:"login",class:"form-control",placeholder:"Ваш логин","aria-label":"Ваш логин","onUpdate:modelValue":e[0]||(e[0]=i=>n.yClientsForm.login=i),"aria-describedby":"Ваш логин",required:""},null,512),[[E,n.yClientsForm.login]])]),t("div",aC,[lC,f(t("input",{type:"text",id:"password",class:"form-control",placeholder:"Ваш пароль","aria-label":"Ваш пароль","onUpdate:modelValue":e[1]||(e[1]=i=>n.yClientsForm.password=i),"aria-describedby":"Ваш пароль",required:""},null,512),[[E,n.yClientsForm.password]])]),t("div",iC,[rC,f(t("input",{type:"text",id:"partner_token",class:"form-control",placeholder:"Ваш партнерский тоукен","aria-label":"Ваш партнерский тоукен","onUpdate:modelValue":e[2]||(e[2]=i=>n.yClientsForm.partner_token=i),"aria-describedby":"Ваш партнерский тоукен",required:""},null,512),[[E,n.yClientsForm.partner_token]])]),t("div",dC,[uC,f(t("input",{type:"number",id:"throttle",class:"form-control",placeholder:"ID компании","aria-label":"ID компании","onUpdate:modelValue":e[3]||(e[3]=i=>n.yClientsForm.company=i),"aria-describedby":"ID компании",required:""},null,512),[[E,n.yClientsForm.company]])])])]),cC],32)],64)}const hC=Ht(J5,[["render",mC]]),pC={data(){return{load:!1,bot:null,fieldTypes:[{title:"Текст",value:0},{title:"Число",value:1},{title:"Логический",value:2},{title:"Дата и время",value:3}],fieldForm:{fields:[]}}},computed:{...Ne(["getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.bot=this.getCurrentBot,this.$nextTick(()=>{this.fieldForm.fields=this.bot.field_settings||[]}),this.loadCurrentBotFields()})},methods:{loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(s=>{this.fieldForm.fields=s.data||[]})},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},removeField(s){this.fieldForm.fields.splice(s,1)},submit(){let s=new FormData;Object.keys(this.fieldForm).forEach(e=>{const o=this.fieldForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("storeBotFields",{dataObject:s}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Поля успешно обновлены",type:"success"}),this.fieldForm.fields=[],this.fieldForm.fields=e.data}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка обновления полей",type:"error"})})},addField(){if(this.fieldForm.fields||(this.fieldForm.fields=[]),this.fieldForm.fields.length>0&&this.fieldForm.fields.findIndex(e=>e.key==null)!==-1){this.$notify({title:"Настраиваемые поля",text:"У вас есть пустые ключевые поля!",type:"error"});return}this.fieldForm.fields.push({key:null,type:0,label:null,description:null,required:!1,validate_pattern:null})}}},_C={class:"mb-2"},vC={class:"d-flex justify-content-between"},fC=t("h6",null,"Настройка полей пользователя бота",-1),bC=t("i",{class:"fa-solid fa-plus mr-2"},null,-1),gC=t("p",null,[t("em",null,"Данные поля будут добавлены пользователю бота и будут автоматически учитываться в условиях страниц, скриптах (в формах заполнения данных), диалогах. Ключи должны быть уникальные для каждого бота. Если ключ дублируется, то будет использовано более позднее его значение. Если поле добавлено и сохранено, то удалить его уже нельзя, только скрыть. "),g(". "),t("br"),t("span",{class:"text-danger"},"*"),g(" - обязательное поле ")],-1),yC={class:"table"},$C=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},[g("Ключ"),t("span",{class:"text-danger"},"*")]),t("th",{scope:"col"},[g("Подпись поля"),t("span",{class:"text-danger"},"*")]),t("th",{scope:"col"},[g("Тип поля"),t("span",{class:"text-danger"},"*")]),t("th",{scope:"col"},"Паттерн"),t("th",{scope:"col"},"Обязательный"),t("th",{scope:"col"},[g("Вопрос для анкеты"),t("span",{class:"text-danger"},"*")]),t("th",{scope:"col"})])],-1),kC={scope:"row"},wC={scope:"col"},CC=["onUpdate:modelValue"],FC={scope:"col"},TC=["onUpdate:modelValue"],DC={scope:"col"},SC=["onUpdate:modelValue"],PC=["value"],OC={scope:"col"},AC=["disabled","onUpdate:modelValue"],MC={scope:"col"},jC={class:"form-check"},qC=["onUpdate:modelValue","id"],UC=["for"],zC={key:0},VC={key:1},RC={scope:"col"},YC=["onUpdate:modelValue"],IC={scope:"col"},BC=["onClick"],NC=t("i",{class:"fa-regular fa-trash-can"},null,-1),EC=[NC],QC={key:1,class:"form-check mt-2"},LC=["onUpdate:modelValue","id"],xC=["for"],WC={key:0},HC=t("i",{class:"fa-solid fa-eye text-success"},null,-1),KC=[HC],XC={key:1},ZC=t("i",{class:"fa-solid fa-eye-slash text-danger"},null,-1),GC=[ZC],JC=t("button",{type:"submit",class:"btn btn-success w-100 p-3"}," Сохранить поля ",-1);function eF(s,e,o,a,n,l){return r(),d("div",_C,[t("div",vC,[fC,t("button",{type:"button",onClick:e[0]||(e[0]=i=>l.addField()),class:"btn mb-2 rounded-sm btn-outline-info"},[bC,g(" Добавить параметр ")])]),gC,t("form",{onSubmit:e[1]||(e[1]=De((...i)=>l.submit&&l.submit(...i),["prevent"]))},[t("table",yC,[$C,t("tbody",null,[(r(!0),d(Y,null,ee(n.fieldForm.fields,(i,u)=>(r(),d("tr",null,[t("th",kC,b(u+1),1),t("th",wC,[f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Ключ","aria-label":"Ключ",maxlength:"255","onUpdate:modelValue":h=>n.fieldForm.fields[u].key=h,required:""},null,8,CC),[[E,n.fieldForm.fields[u].key]])]),t("th",FC,[f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Подпись поля","aria-label":"Название поля",maxlength:"255","onUpdate:modelValue":h=>n.fieldForm.fields[u].label=h,required:""},null,8,TC),[[E,n.fieldForm.fields[u].label]])]),t("th",DC,[f(t("select",{class:"form-select","onUpdate:modelValue":h=>n.fieldForm.fields[u].type=h},[(r(!0),d(Y,null,ee(n.fieldTypes,h=>(r(),d("option",{value:h.value},b(h.title||"Не указан"),9,PC))),256))],8,SC),[[Vt,n.fieldForm.fields[u].type]])]),t("th",OC,[f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Паттерн","aria-label":"Паттерн",maxlength:"255",disabled:n.fieldForm.fields[u].type===2,"onUpdate:modelValue":h=>n.fieldForm.fields[u].validate_pattern=h},null,8,AC),[[E,n.fieldForm.fields[u].validate_pattern]])]),t("th",MC,[t("div",jC,[f(t("input",{class:"form-check-input","onUpdate:modelValue":h=>n.fieldForm.fields[u].required=h,type:"checkbox",value:"",id:"field-required"+u},null,8,qC),[[ke,n.fieldForm.fields[u].required]]),t("label",{class:"form-check-label",for:"field-required"+u},[n.fieldForm.fields[u].required?(r(),d("span",zC,"Да")):c("",!0),n.fieldForm.fields[u].required?c("",!0):(r(),d("span",VC,"Нет"))],8,UC)])]),t("th",RC,[f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Описание вопроса","aria-label":"Описание вопроса",maxlength:"255","onUpdate:modelValue":h=>n.fieldForm.fields[u].description=h,required:""},null,8,YC),[[E,n.fieldForm.fields[u].description]])]),t("th",IC,[n.fieldForm.fields[u].id?(r(),d("div",QC,[f(t("input",{class:"form-check-input d-none","onUpdate:modelValue":h=>n.fieldForm.fields[u].is_active=h,type:"checkbox",value:"",id:"field-is_active-"+u},null,8,LC),[[ke,n.fieldForm.fields[u].is_active]]),t("label",{class:"form-check-label",for:"field-is_active-"+u},[n.fieldForm.fields[u].is_active?(r(),d("span",WC,KC)):c("",!0),n.fieldForm.fields[u].is_active?c("",!0):(r(),d("span",XC,GC))],8,xC)])):(r(),d("button",{key:0,type:"button",onClick:h=>l.removeField(u),class:"btn btn-link text-danger"},EC,8,BC))])]))),256))])]),JC],32)])}const tF=Ht(pC,[["render",eF]]),sF={class:"row"},oF={class:"input-group mb-3"},nF={key:0,class:"row"},aF={class:"col-12 col-md-12 mb-3"},lF={class:"table"},iF=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Тип"),t("th",{scope:"col"},"Подпись"),t("th",{scope:"col"},"File Id"),t("th",{scope:"col"},"Действия")])],-1),rF={scope:"row"},dF={class:"badge bg-info rounded-pill"},uF={style:{"word-break":"break-all"}},cF={style:{"word-break":"break-all"}},mF={style:{"min-width":"200px"}},hF=["onClick"],pF=t("i",{class:"fa-solid fa-eye"},null,-1),_F=[pF],vF=["onClick"],fF=t("i",{class:"fa-brands fa-telegram"},null,-1),bF=[fF],gF=["onClick"],yF=t("i",{class:"fa-solid fa-trash"},null,-1),$F=[yF],kF={class:"col-12"},wF={key:1,class:"row"},CF=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ")],-1),FF=[CF],TF={class:"modal fade",id:"preview-modal",tabindex:"-1","aria-labelledby":"preview-modal-label","aria-hidden":"true"},DF={class:"modal-dialog"},SF={class:"modal-content"},PF={class:"modal-body"},OF={key:0,class:"d-flex justify-content-center align-items-center"},AF={key:0,class:"video-circle"},MF={key:0,controls:"",poster:"/images/load.gif"},jF=["src"],qF={key:1},UF={controls:"",poster:"/images/load.gif"},zF=["src"],VF={key:2,alt:""},RF=["src"],YF=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),IF={data(){return{bot:null,previewContent:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...Ne(["getMedia","getMediaPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMedia()})},methods:{selectMedia(s){this.$emit("select",s)},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},nextMedia(s){this.loadMedia(s)},remove(s){this.$store.dispatch("removeMedia",{dataObject:{mediaId:s}}).then(e=>{this.loadMedia(),this.$notify({title:"Удаление медиа-контента",text:"Медиа контент удален"})}).catch(()=>{})},showPreview(s){this.previewContent=null,this.$nextTick(()=>{this.previewContent=s,new bootstrap.Modal("#preview-modal",{}).show()})},showPreviewInTg(s){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:s}}).then(e=>{this.$notify({title:"Превью медиа-контента",text:"Отправлено в бота"})}).catch(()=>{})},loadMedia(s=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{bot_id:this.bot.id||null,search:this.search,needVideo:!0,needVideoNote:!0,needPhoto:!0,needAudio:!0,needDocument:!0,needSticker:!0},page:s}).then(e=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},BF=Object.assign(IF,{__name:"BotMediaTable",setup(s){return(e,o)=>{const a=ss("lazy");return r(),d(Y,null,[t("div",sF,[t("div",oF,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск файла","aria-label":"Поиск файла","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n)},null,512),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=n=>e.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.media.length>0?(r(),d("div",nF,[t("div",aF,[t("table",lF,[iF,t("tbody",null,[(r(!0),d(Y,null,ee(e.media,(n,l)=>(r(),d("tr",null,[t("th",rF,b(n.id),1),t("td",null,[t("span",dF,b(n.type),1)]),t("td",null,[t("p",uF,b(n.caption??"Без подписи"),1)]),t("td",null,[t("p",cF,b(n.file_id),1)]),t("td",null,[t("div",mF,[t("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:i=>e.showPreview(n)},_F,8,hF),t("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:i=>e.showPreviewInTg(n.id)},bF,8,vF),t("a",{href:"javascript:void(0)",class:"btn btn-outline-danger text-danger",onClick:i=>e.remove(n.id)},$F,8,gF)])])]))),256))])])]),t("div",kF,[e.media_paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextMedia,pagination:e.media_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",wF,FF)),t("div",TF,[t("div",DF,[t("div",SF,[t("div",PF,[e.previewContent!=null?(r(),d("div",OF,[e.previewContent.type=="video_note"?(r(),d("div",AF,[e.previewContent.type==="video"||e.previewContent.type=="video_note"?(r(),d("video",MF,[t("source",{src:"/file-by-file-id/"+e.previewContent.file_id,type:"video/mp4"},null,8,jF)])):c("",!0)])):c("",!0),e.previewContent.type==="video"?(r(),d("div",qF,[t("video",UF,[t("source",{src:"/file-by-file-id/"+e.previewContent.file_id,type:"video/mp4"},null,8,zF)])])):c("",!0),e.previewContent.type=="photo"?f((r(),d("img",VF,null,512)),[[a,"/file-by-file-id/"+e.previewContent.file_id]]):c("",!0),e.previewContent.type==="audio"||e.previewContent.type==="voice"?(r(),d("audio",{key:3,controls:"",src:"/file-by-file-id/"+e.previewContent.file_id},null,8,RF)):c("",!0)])):c("",!0)]),YF])])])],64)}}});function bt(s){return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(s)}function we(s){if(s===null||s===!0||s===!1)return NaN;var e=Number(s);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ve(s,e){if(e.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+e.length+" present")}function $e(s){ve(1,arguments);var e=Object.prototype.toString.call(s);return s instanceof Date||bt(s)==="object"&&e==="[object Date]"?new Date(s.getTime()):typeof s=="number"||e==="[object Number]"?new Date(s):((typeof s=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ut(s,e){ve(2,arguments);var o=$e(s),a=we(e);return isNaN(a)?new Date(NaN):(a&&o.setDate(o.getDate()+a),o)}function wt(s,e){ve(2,arguments);var o=$e(s),a=we(e);if(isNaN(a))return new Date(NaN);if(!a)return o;var n=o.getDate(),l=new Date(o.getTime());l.setMonth(o.getMonth()+a+1,0);var i=l.getDate();return n>=i?l:(o.setFullYear(l.getFullYear(),l.getMonth(),n),o)}function In(s,e){if(ve(2,arguments),!e||bt(e)!=="object")return new Date(NaN);var o=e.years?we(e.years):0,a=e.months?we(e.months):0,n=e.weeks?we(e.weeks):0,l=e.days?we(e.days):0,i=e.hours?we(e.hours):0,u=e.minutes?we(e.minutes):0,h=e.seconds?we(e.seconds):0,p=$e(s),w=a||o?wt(p,a+o*12):p,_=l||n?Ut(w,l+n*7):w,F=u+i*60,D=h+F*60,O=D*1e3,N=new Date(_.getTime()+O);return N}function NF(s,e){ve(2,arguments);var o=$e(s).getTime(),a=we(e);return new Date(o+a)}var EF={};function jt(){return EF}function es(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=jt(),_=we((o=(a=(n=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:w.weekStartsOn)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&o!==void 0?o:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(s),D=F.getDay(),O=(D<_?7:0)+D-_;return F.setDate(F.getDate()-O),F.setHours(0,0,0,0),F}function Qs(s){return ve(1,arguments),es(s,{weekStartsOn:1})}function QF(s){ve(1,arguments);var e=$e(s),o=e.getFullYear(),a=new Date(0);a.setFullYear(o+1,0,4),a.setHours(0,0,0,0);var n=Qs(a),l=new Date(0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);var i=Qs(l);return e.getTime()>=n.getTime()?o+1:e.getTime()>=i.getTime()?o:o-1}function LF(s){ve(1,arguments);var e=QF(s),o=new Date(0);o.setFullYear(e,0,4),o.setHours(0,0,0,0);var a=Qs(o);return a}function Ls(s){var e=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return e.setUTCFullYear(s.getFullYear()),s.getTime()-e.getTime()}function an(s){ve(1,arguments);var e=$e(s);return e.setHours(0,0,0,0),e}var xF=864e5;function WF(s,e){ve(2,arguments);var o=an(s),a=an(e),n=o.getTime()-Ls(o),l=a.getTime()-Ls(a);return Math.round((n-l)/xF)}function HF(s,e){ve(2,arguments);var o=we(e),a=o*3;return wt(s,a)}function Vo(s,e){ve(2,arguments);var o=we(e);return wt(s,o*12)}var Ro=6e4,Yo=36e5,KF=1e3;function Bn(s){return ve(1,arguments),s instanceof Date||bt(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function ws(s){if(ve(1,arguments),!Bn(s)&&typeof s!="number")return!1;var e=$e(s);return!isNaN(Number(e))}function ln(s){ve(1,arguments);var e=$e(s),o=Math.floor(e.getMonth()/3)+1;return o}function Nn(s,e){var o;ve(1,arguments);var a=s||{},n=$e(a.start),l=$e(a.end),i=l.getTime();if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var u=[],h=n;h.setHours(0,0,0,0);var p=Number((o=e==null?void 0:e.step)!==null&&o!==void 0?o:1);if(p<1||isNaN(p))throw new RangeError("`options.step` must be a number greater than 1");for(;h.getTime()<=i;)u.push($e(h)),h.setDate(h.getDate()+p),h.setHours(0,0,0,0);return u}function Ts(s){ve(1,arguments);var e=$e(s),o=e.getMonth(),a=o-o%3;return e.setMonth(a,1),e.setHours(0,0,0,0),e}function XF(s){ve(1,arguments);var e=s||{},o=$e(e.start),a=$e(e.end),n=a.getTime();if(!(o.getTime()<=n))throw new RangeError("Invalid interval");var l=Ts(o),i=Ts(a);n=i.getTime();for(var u=[],h=l;h.getTime()<=n;)u.push($e(h)),h=HF(h,1);return u}function ZF(s){ve(1,arguments);var e=$e(s),o=e.getFullYear();return e.setFullYear(o+1,0,0),e.setHours(23,59,59,999),e}function GF(s){ve(1,arguments);var e=$e(s),o=new Date(0);return o.setFullYear(e.getFullYear(),0,1),o.setHours(0,0,0,0),o}function JF(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=jt(),_=we((o=(a=(n=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:w.weekStartsOn)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&o!==void 0?o:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(s),D=F.getDay(),O=(D<_?-7:0)+6-(D-_);return F.setDate(F.getDate()+O),F.setHours(23,59,59,999),F}function rn(s){ve(1,arguments);var e=$e(s),o=e.getMonth(),a=o-o%3+3;return e.setMonth(a,0),e.setHours(23,59,59,999),e}function En(s,e){ve(2,arguments);var o=we(e);return NF(s,-o)}var e4=864e5;function t4(s){ve(1,arguments);var e=$e(s),o=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var a=e.getTime(),n=o-a;return Math.floor(n/e4)+1}function us(s){ve(1,arguments);var e=1,o=$e(s),a=o.getUTCDay(),n=(a<e?7:0)+a-e;return o.setUTCDate(o.getUTCDate()-n),o.setUTCHours(0,0,0,0),o}function Qn(s){ve(1,arguments);var e=$e(s),o=e.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(o+1,0,4),a.setUTCHours(0,0,0,0);var n=us(a),l=new Date(0);l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0);var i=us(l);return e.getTime()>=n.getTime()?o+1:e.getTime()>=i.getTime()?o:o-1}function s4(s){ve(1,arguments);var e=Qn(s),o=new Date(0);o.setUTCFullYear(e,0,4),o.setUTCHours(0,0,0,0);var a=us(o);return a}var o4=6048e5;function Ln(s){ve(1,arguments);var e=$e(s),o=us(e).getTime()-s4(e).getTime();return Math.round(o/o4)+1}function ts(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=jt(),_=we((o=(a=(n=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:w.weekStartsOn)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&o!==void 0?o:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var F=$e(s),D=F.getUTCDay(),O=(D<_?7:0)+D-_;return F.setUTCDate(F.getUTCDate()-O),F.setUTCHours(0,0,0,0),F}function Io(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=$e(s),_=w.getUTCFullYear(),F=jt(),D=we((o=(a=(n=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:F.firstWeekContainsDate)!==null&&a!==void 0?a:(h=F.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=new Date(0);O.setUTCFullYear(_+1,0,D),O.setUTCHours(0,0,0,0);var N=ts(O,e),te=new Date(0);te.setUTCFullYear(_,0,D),te.setUTCHours(0,0,0,0);var V=ts(te,e);return w.getTime()>=N.getTime()?_+1:w.getTime()>=V.getTime()?_:_-1}function n4(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=jt(),_=we((o=(a=(n=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:w.firstWeekContainsDate)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1),F=Io(s,e),D=new Date(0);D.setUTCFullYear(F,0,_),D.setUTCHours(0,0,0,0);var O=ts(D,e);return O}var a4=6048e5;function xn(s,e){ve(1,arguments);var o=$e(s),a=ts(o,e).getTime()-n4(o,e).getTime();return Math.round(a/a4)+1}function Ie(s,e){for(var o=s<0?"-":"",a=Math.abs(s).toString();a.length<e;)a="0"+a;return o+a}var l4={y:function(e,o){var a=e.getUTCFullYear(),n=a>0?a:1-a;return Ie(o==="yy"?n%100:n,o.length)},M:function(e,o){var a=e.getUTCMonth();return o==="M"?String(a+1):Ie(a+1,2)},d:function(e,o){return Ie(e.getUTCDate(),o.length)},a:function(e,o){var a=e.getUTCHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(e,o){return Ie(e.getUTCHours()%12||12,o.length)},H:function(e,o){return Ie(e.getUTCHours(),o.length)},m:function(e,o){return Ie(e.getUTCMinutes(),o.length)},s:function(e,o){return Ie(e.getUTCSeconds(),o.length)},S:function(e,o){var a=o.length,n=e.getUTCMilliseconds(),l=Math.floor(n*Math.pow(10,a-3));return Ie(l,o.length)}};const It=l4;var ls={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},i4={G:function(e,o,a){var n=e.getUTCFullYear()>0?1:0;switch(o){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(e,o,a){if(o==="yo"){var n=e.getUTCFullYear(),l=n>0?n:1-n;return a.ordinalNumber(l,{unit:"year"})}return It.y(e,o)},Y:function(e,o,a,n){var l=Io(e,n),i=l>0?l:1-l;if(o==="YY"){var u=i%100;return Ie(u,2)}return o==="Yo"?a.ordinalNumber(i,{unit:"year"}):Ie(i,o.length)},R:function(e,o){var a=Qn(e);return Ie(a,o.length)},u:function(e,o){var a=e.getUTCFullYear();return Ie(a,o.length)},Q:function(e,o,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(o){case"Q":return String(n);case"QQ":return Ie(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,o,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(o){case"q":return String(n);case"qq":return Ie(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,o,a){var n=e.getUTCMonth();switch(o){case"M":case"MM":return It.M(e,o);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,o,a){var n=e.getUTCMonth();switch(o){case"L":return String(n+1);case"LL":return Ie(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,o,a,n){var l=xn(e,n);return o==="wo"?a.ordinalNumber(l,{unit:"week"}):Ie(l,o.length)},I:function(e,o,a){var n=Ln(e);return o==="Io"?a.ordinalNumber(n,{unit:"week"}):Ie(n,o.length)},d:function(e,o,a){return o==="do"?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):It.d(e,o)},D:function(e,o,a){var n=t4(e);return o==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Ie(n,o.length)},E:function(e,o,a){var n=e.getUTCDay();switch(o){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,o,a,n){var l=e.getUTCDay(),i=(l-n.weekStartsOn+8)%7||7;switch(o){case"e":return String(i);case"ee":return Ie(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(l,{width:"short",context:"formatting"});case"eeee":default:return a.day(l,{width:"wide",context:"formatting"})}},c:function(e,o,a,n){var l=e.getUTCDay(),i=(l-n.weekStartsOn+8)%7||7;switch(o){case"c":return String(i);case"cc":return Ie(i,o.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(l,{width:"narrow",context:"standalone"});case"cccccc":return a.day(l,{width:"short",context:"standalone"});case"cccc":default:return a.day(l,{width:"wide",context:"standalone"})}},i:function(e,o,a){var n=e.getUTCDay(),l=n===0?7:n;switch(o){case"i":return String(l);case"ii":return Ie(l,o.length);case"io":return a.ordinalNumber(l,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,o,a){var n=e.getUTCHours(),l=n/12>=1?"pm":"am";switch(o){case"a":case"aa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,o,a){var n=e.getUTCHours(),l;switch(n===12?l=ls.noon:n===0?l=ls.midnight:l=n/12>=1?"pm":"am",o){case"b":case"bb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,o,a){var n=e.getUTCHours(),l;switch(n>=17?l=ls.evening:n>=12?l=ls.afternoon:n>=4?l=ls.morning:l=ls.night,o){case"B":case"BB":case"BBB":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,o,a){if(o==="ho"){var n=e.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return It.h(e,o)},H:function(e,o,a){return o==="Ho"?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):It.H(e,o)},K:function(e,o,a){var n=e.getUTCHours()%12;return o==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Ie(n,o.length)},k:function(e,o,a){var n=e.getUTCHours();return n===0&&(n=24),o==="ko"?a.ordinalNumber(n,{unit:"hour"}):Ie(n,o.length)},m:function(e,o,a){return o==="mo"?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):It.m(e,o)},s:function(e,o,a){return o==="so"?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):It.s(e,o)},S:function(e,o){return It.S(e,o)},X:function(e,o,a,n){var l=n._originalDate||e,i=l.getTimezoneOffset();if(i===0)return"Z";switch(o){case"X":return un(i);case"XXXX":case"XX":return Xt(i);case"XXXXX":case"XXX":default:return Xt(i,":")}},x:function(e,o,a,n){var l=n._originalDate||e,i=l.getTimezoneOffset();switch(o){case"x":return un(i);case"xxxx":case"xx":return Xt(i);case"xxxxx":case"xxx":default:return Xt(i,":")}},O:function(e,o,a,n){var l=n._originalDate||e,i=l.getTimezoneOffset();switch(o){case"O":case"OO":case"OOO":return"GMT"+dn(i,":");case"OOOO":default:return"GMT"+Xt(i,":")}},z:function(e,o,a,n){var l=n._originalDate||e,i=l.getTimezoneOffset();switch(o){case"z":case"zz":case"zzz":return"GMT"+dn(i,":");case"zzzz":default:return"GMT"+Xt(i,":")}},t:function(e,o,a,n){var l=n._originalDate||e,i=Math.floor(l.getTime()/1e3);return Ie(i,o.length)},T:function(e,o,a,n){var l=n._originalDate||e,i=l.getTime();return Ie(i,o.length)}};function dn(s,e){var o=s>0?"-":"+",a=Math.abs(s),n=Math.floor(a/60),l=a%60;if(l===0)return o+String(n);var i=e||"";return o+String(n)+i+Ie(l,2)}function un(s,e){if(s%60===0){var o=s>0?"-":"+";return o+Ie(Math.abs(s)/60,2)}return Xt(s,e)}function Xt(s,e){var o=e||"",a=s>0?"-":"+",n=Math.abs(s),l=Ie(Math.floor(n/60),2),i=Ie(n%60,2);return a+l+o+i}const r4=i4;var cn=function(e,o){switch(e){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});case"PPPP":default:return o.date({width:"full"})}},Wn=function(e,o){switch(e){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});case"pppp":default:return o.time({width:"full"})}},d4=function(e,o){var a=e.match(/(P+)(p+)?/)||[],n=a[1],l=a[2];if(!l)return cn(e,o);var i;switch(n){case"P":i=o.dateTime({width:"short"});break;case"PP":i=o.dateTime({width:"medium"});break;case"PPP":i=o.dateTime({width:"long"});break;case"PPPP":default:i=o.dateTime({width:"full"});break}return i.replace("{{date}}",cn(n,o)).replace("{{time}}",Wn(l,o))},u4={p:Wn,P:d4};const To=u4;var c4=["D","DD"],m4=["YY","YYYY"];function Hn(s){return c4.indexOf(s)!==-1}function Kn(s){return m4.indexOf(s)!==-1}function xs(s,e,o){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var h4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},p4=function(e,o,a){var n,l=h4[e];return typeof l=="string"?n=l:o===1?n=l.one:n=l.other.replace("{{count}}",o.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};const _4=p4;function io(s){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.width?String(e.width):s.defaultWidth,a=s.formats[o]||s.formats[s.defaultWidth];return a}}var v4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},b4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g4={date:io({formats:v4,defaultWidth:"full"}),time:io({formats:f4,defaultWidth:"full"}),dateTime:io({formats:b4,defaultWidth:"full"})};const y4=g4;var $4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k4=function(e,o,a,n){return $4[e]};const w4=k4;function gs(s){return function(e,o){var a=o!=null&&o.context?String(o.context):"standalone",n;if(a==="formatting"&&s.formattingValues){var l=s.defaultFormattingWidth||s.defaultWidth,i=o!=null&&o.width?String(o.width):l;n=s.formattingValues[i]||s.formattingValues[l]}else{var u=s.defaultWidth,h=o!=null&&o.width?String(o.width):s.defaultWidth;n=s.values[h]||s.values[u]}var p=s.argumentCallback?s.argumentCallback(e):e;return n[p]}}var C4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},D4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},O4=function(e,o){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},A4={ordinalNumber:O4,era:gs({values:C4,defaultWidth:"wide"}),quarter:gs({values:F4,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:gs({values:T4,defaultWidth:"wide"}),day:gs({values:D4,defaultWidth:"wide"}),dayPeriod:gs({values:S4,defaultWidth:"wide",formattingValues:P4,defaultFormattingWidth:"wide"})};const M4=A4;function ys(s){return function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],l=e.match(n);if(!l)return null;var i=l[0],u=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(u)?q4(u,function(_){return _.test(i)}):j4(u,function(_){return _.test(i)}),p;p=s.valueCallback?s.valueCallback(h):h,p=o.valueCallback?o.valueCallback(p):p;var w=e.slice(i.length);return{value:p,rest:w}}}function j4(s,e){for(var o in s)if(s.hasOwnProperty(o)&&e(s[o]))return o}function q4(s,e){for(var o=0;o<s.length;o++)if(e(s[o]))return o}function U4(s){return function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.match(s.matchPattern);if(!a)return null;var n=a[0],l=e.match(s.parsePattern);if(!l)return null;var i=s.valueCallback?s.valueCallback(l[0]):l[0];i=o.valueCallback?o.valueCallback(i):i;var u=e.slice(n.length);return{value:i,rest:u}}}var z4=/^(\d+)(th|st|nd|rd)?/i,V4=/\d+/i,R4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y4={any:[/^b/i,/^(a|c)/i]},I4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},B4={any:[/1/i,/2/i,/3/i,/4/i]},N4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},E4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Q4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},H4={ordinalNumber:U4({matchPattern:z4,parsePattern:V4,valueCallback:function(e){return parseInt(e,10)}}),era:ys({matchPatterns:R4,defaultMatchWidth:"wide",parsePatterns:Y4,defaultParseWidth:"any"}),quarter:ys({matchPatterns:I4,defaultMatchWidth:"wide",parsePatterns:B4,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ys({matchPatterns:N4,defaultMatchWidth:"wide",parsePatterns:E4,defaultParseWidth:"any"}),day:ys({matchPatterns:Q4,defaultMatchWidth:"wide",parsePatterns:L4,defaultParseWidth:"any"}),dayPeriod:ys({matchPatterns:x4,defaultMatchWidth:"any",parsePatterns:W4,defaultParseWidth:"any"})};const K4=H4;var X4={code:"en-US",formatDistance:_4,formatLong:y4,formatRelative:w4,localize:M4,match:K4,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Xn=X4;var Z4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,J4=/^'([^]*?)'?$/,e6=/''/g,t6=/[a-zA-Z]/;function Et(s,e,o){var a,n,l,i,u,h,p,w,_,F,D,O,N,te,V,R,oe,P;ve(2,arguments);var W=String(e),H=jt(),x=(a=(n=o==null?void 0:o.locale)!==null&&n!==void 0?n:H.locale)!==null&&a!==void 0?a:Xn,pe=we((l=(i=(u=(h=o==null?void 0:o.firstWeekContainsDate)!==null&&h!==void 0?h:o==null||(p=o.locale)===null||p===void 0||(w=p.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&u!==void 0?u:H.firstWeekContainsDate)!==null&&i!==void 0?i:(_=H.locale)===null||_===void 0||(F=_.options)===null||F===void 0?void 0:F.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(pe>=1&&pe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ne=we((D=(O=(N=(te=o==null?void 0:o.weekStartsOn)!==null&&te!==void 0?te:o==null||(V=o.locale)===null||V===void 0||(R=V.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&N!==void 0?N:H.weekStartsOn)!==null&&O!==void 0?O:(oe=H.locale)===null||oe===void 0||(P=oe.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&D!==void 0?D:0);if(!(ne>=0&&ne<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var k=$e(s);if(!ws(k))throw new RangeError("Invalid time value");var j=Ls(k),X=En(k,j),re={firstWeekContainsDate:pe,weekStartsOn:ne,locale:x,_originalDate:k},I=W.match(G4).map(function($){var q=$[0];if(q==="p"||q==="P"){var U=To[q];return U($,x.formatLong)}return $}).join("").match(Z4).map(function($){if($==="''")return"'";var q=$[0];if(q==="'")return s6($);var U=r4[q];if(U)return!(o!=null&&o.useAdditionalWeekYearTokens)&&Kn($)&&xs($,e,String(s)),!(o!=null&&o.useAdditionalDayOfYearTokens)&&Hn($)&&xs($,e,String(s)),U(X,$,x.localize,re);if(q.match(t6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return $}).join("");return I}function s6(s){var e=s.match(J4);return e?e[1].replace(e6,"'"):s}function o6(s,e){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=e[o]);return s}function n6(s){ve(1,arguments);var e=$e(s),o=e.getDay();return o}function a6(s){ve(1,arguments);var e=$e(s),o=e.getFullYear(),a=e.getMonth(),n=new Date(0);return n.setFullYear(o,a+1,0),n.setHours(0,0,0,0),n.getDate()}function Ct(s){ve(1,arguments);var e=$e(s),o=e.getHours();return o}var l6=6048e5;function i6(s){ve(1,arguments);var e=$e(s),o=Qs(e).getTime()-LF(e).getTime();return Math.round(o/l6)+1}function Mt(s){ve(1,arguments);var e=$e(s),o=e.getMinutes();return o}function Ue(s){ve(1,arguments);var e=$e(s),o=e.getMonth();return o}function cs(s){ve(1,arguments);var e=$e(s),o=e.getSeconds();return o}function r6(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=$e(s),_=w.getFullYear(),F=jt(),D=we((o=(a=(n=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:F.firstWeekContainsDate)!==null&&a!==void 0?a:(h=F.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=new Date(0);O.setFullYear(_+1,0,D),O.setHours(0,0,0,0);var N=es(O,e),te=new Date(0);te.setFullYear(_,0,D),te.setHours(0,0,0,0);var V=es(te,e);return w.getTime()>=N.getTime()?_+1:w.getTime()>=V.getTime()?_:_-1}function d6(s,e){var o,a,n,l,i,u,h,p;ve(1,arguments);var w=jt(),_=we((o=(a=(n=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:w.firstWeekContainsDate)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1),F=r6(s,e),D=new Date(0);D.setFullYear(F,0,_),D.setHours(0,0,0,0);var O=es(D,e);return O}var u6=6048e5;function c6(s,e){ve(1,arguments);var o=$e(s),a=es(o,e).getTime()-d6(o,e).getTime();return Math.round(a/u6)+1}function Ae(s){return ve(1,arguments),$e(s).getFullYear()}function Ds(s,e){ve(2,arguments);var o=$e(s),a=$e(e);return o.getTime()>a.getTime()}function Ss(s,e){ve(2,arguments);var o=$e(s),a=$e(e);return o.getTime()<a.getTime()}function ds(s,e){ve(2,arguments);var o=$e(s),a=$e(e);return o.getTime()===a.getTime()}function mn(s,e){(e==null||e>s.length)&&(e=s.length);for(var o=0,a=new Array(e);o<e;o++)a[o]=s[o];return a}function m6(s,e){if(s){if(typeof s=="string")return mn(s,e);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return mn(s,e)}}function hn(s,e){var o=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!o){if(Array.isArray(s)||(o=m6(s))||e&&s&&typeof s.length=="number"){o&&(s=o);var a=0,n=function(){};return{s:n,n:function(){return a>=s.length?{done:!0}:{done:!1,value:s[a++]}},e:function(p){throw p},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,i=!1,u;return{s:function(){o=o.call(s)},n:function(){var p=o.next();return l=p.done,p},e:function(p){i=!0,u=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(i)throw u}}}}function _e(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Do(s,e){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Do(s,e)}function ze(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&Do(s,e)}function Ws(s){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Ws(s)}function Zn(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zn=function(){return!!s})()}function h6(s,e){if(e&&(bt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _e(s)}function Ve(s){var e=Zn();return function(){var a=Ws(s),n;if(e){var l=Ws(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return h6(this,n)}}function je(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function p6(s,e){if(bt(s)!="object"||!s)return s;var o=s[Symbol.toPrimitive];if(o!==void 0){var a=o.call(s,e||"default");if(bt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Gn(s){var e=p6(s,"string");return bt(e)=="symbol"?e:String(e)}function pn(s,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Gn(a.key),a)}}function qe(s,e,o){return e&&pn(s.prototype,e),o&&pn(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s}function he(s,e,o){return e=Gn(e),e in s?Object.defineProperty(s,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[e]=o,s}var _6=10,Jn=function(){function s(){je(this,s),he(this,"priority",void 0),he(this,"subPriority",0)}return qe(s,[{key:"validate",value:function(o,a){return!0}}]),s}(),v6=function(s){ze(o,s);var e=Ve(o);function o(a,n,l,i,u){var h;return je(this,o),h=e.call(this),h.value=a,h.validateValue=n,h.setValue=l,h.priority=i,u&&(h.subPriority=u),h}return qe(o,[{key:"validate",value:function(n,l){return this.validateValue(n,this.value,l)}},{key:"set",value:function(n,l,i){return this.setValue(n,l,this.value,i)}}]),o}(Jn),f6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",_6),he(_e(a),"subPriority",-1),a}return qe(o,[{key:"set",value:function(n,l){if(l.timestampIsSet)return n;var i=new Date(0);return i.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),i.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),i}}]),o}(Jn),Ye=function(){function s(){je(this,s),he(this,"incompatibleTokens",void 0),he(this,"priority",void 0),he(this,"subPriority",void 0)}return qe(s,[{key:"run",value:function(o,a,n,l){var i=this.parse(o,a,n,l);return i?{setter:new v6(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(o,a,n){return!0}}]),s}(),b6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",140),he(_e(a),"incompatibleTokens",["R","u","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}},{key:"set",value:function(n,l,i){return l.era=i,n.setUTCFullYear(i,0,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),Ke={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Pt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Xe(s,e){return s&&{value:e(s.value),rest:s.rest}}function xe(s,e){var o=e.match(s);return o?{value:parseInt(o[0],10),rest:e.slice(o[0].length)}:null}function Ot(s,e){var o=e.match(s);if(!o)return null;if(o[0]==="Z")return{value:0,rest:e.slice(1)};var a=o[1]==="+"?1:-1,n=o[2]?parseInt(o[2],10):0,l=o[3]?parseInt(o[3],10):0,i=o[5]?parseInt(o[5],10):0;return{value:a*(n*Yo+l*Ro+i*KF),rest:e.slice(o[0].length)}}function ea(s){return xe(Ke.anyDigitsSigned,s)}function He(s,e){switch(s){case 1:return xe(Ke.singleDigit,e);case 2:return xe(Ke.twoDigits,e);case 3:return xe(Ke.threeDigits,e);case 4:return xe(Ke.fourDigits,e);default:return xe(new RegExp("^\\d{1,"+s+"}"),e)}}function Hs(s,e){switch(s){case 1:return xe(Ke.singleDigitSigned,e);case 2:return xe(Ke.twoDigitsSigned,e);case 3:return xe(Ke.threeDigitsSigned,e);case 4:return xe(Ke.fourDigitsSigned,e);default:return xe(new RegExp("^-?\\d{1,"+s+"}"),e)}}function Bo(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ta(s,e){var o=e>0,a=o?e:1-e,n;if(a<=50)n=s||100;else{var l=a+50,i=Math.floor(l/100)*100,u=s>=l%100;n=s+i-(u?100:0)}return o?n:1-n}function sa(s){return s%400===0||s%4===0&&s%100!==0}var g6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",130),he(_e(a),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="yy"}};switch(l){case"y":return Xe(He(4,n),u);case"yo":return Xe(i.ordinalNumber(n,{unit:"year"}),u);default:return Xe(He(l.length,n),u)}}},{key:"validate",value:function(n,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(n,l,i){var u=n.getUTCFullYear();if(i.isTwoDigitYear){var h=ta(i.year,u);return n.setUTCFullYear(h,0,1),n.setUTCHours(0,0,0,0),n}var p=!("era"in l)||l.era===1?i.year:1-i.year;return n.setUTCFullYear(p,0,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),y6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",130),he(_e(a),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return Xe(He(4,n),u);case"Yo":return Xe(i.ordinalNumber(n,{unit:"year"}),u);default:return Xe(He(l.length,n),u)}}},{key:"validate",value:function(n,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(n,l,i,u){var h=Io(n,u);if(i.isTwoDigitYear){var p=ta(i.year,h);return n.setUTCFullYear(p,0,u.firstWeekContainsDate),n.setUTCHours(0,0,0,0),ts(n,u)}var w=!("era"in l)||l.era===1?i.year:1-i.year;return n.setUTCFullYear(w,0,u.firstWeekContainsDate),n.setUTCHours(0,0,0,0),ts(n,u)}}]),o}(Ye),$6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",130),he(_e(a),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l){return Hs(l==="R"?4:l.length,n)}},{key:"set",value:function(n,l,i){var u=new Date(0);return u.setUTCFullYear(i,0,4),u.setUTCHours(0,0,0,0),us(u)}}]),o}(Ye),k6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",130),he(_e(a),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l){return Hs(l==="u"?4:l.length,n)}},{key:"set",value:function(n,l,i){return n.setUTCFullYear(i,0,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),w6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",120),he(_e(a),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"Q":case"QQ":return He(l.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,l){return l>=1&&l<=4}},{key:"set",value:function(n,l,i){return n.setUTCMonth((i-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),C6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",120),he(_e(a),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"q":case"qq":return He(l.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,l){return l>=1&&l<=4}},{key:"set",value:function(n,l,i){return n.setUTCMonth((i-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),F6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),he(_e(a),"priority",110),a}return qe(o,[{key:"parse",value:function(n,l,i){var u=function(p){return p-1};switch(l){case"M":return Xe(xe(Ke.month,n),u);case"MM":return Xe(He(2,n),u);case"Mo":return Xe(i.ordinalNumber(n,{unit:"month"}),u);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,l){return l>=0&&l<=11}},{key:"set",value:function(n,l,i){return n.setUTCMonth(i,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),T6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",110),he(_e(a),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){var u=function(p){return p-1};switch(l){case"L":return Xe(xe(Ke.month,n),u);case"LL":return Xe(He(2,n),u);case"Lo":return Xe(i.ordinalNumber(n,{unit:"month"}),u);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,l){return l>=0&&l<=11}},{key:"set",value:function(n,l,i){return n.setUTCMonth(i,1),n.setUTCHours(0,0,0,0),n}}]),o}(Ye);function D6(s,e,o){ve(2,arguments);var a=$e(s),n=we(e),l=xn(a,o)-n;return a.setUTCDate(a.getUTCDate()-l*7),a}var S6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",100),he(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"w":return xe(Ke.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=1&&l<=53}},{key:"set",value:function(n,l,i,u){return ts(D6(n,i,u),u)}}]),o}(Ye);function P6(s,e){ve(2,arguments);var o=$e(s),a=we(e),n=Ln(o)-a;return o.setUTCDate(o.getUTCDate()-n*7),o}var O6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",100),he(_e(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"I":return xe(Ke.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=1&&l<=53}},{key:"set",value:function(n,l,i){return us(P6(n,i))}}]),o}(Ye),A6=[31,28,31,30,31,30,31,31,30,31,30,31],M6=[31,29,31,30,31,30,31,31,30,31,30,31],j6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"subPriority",1),he(_e(a),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"d":return xe(Ke.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){var i=n.getUTCFullYear(),u=sa(i),h=n.getUTCMonth();return u?l>=1&&l<=M6[h]:l>=1&&l<=A6[h]}},{key:"set",value:function(n,l,i){return n.setUTCDate(i),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),q6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"subpriority",1),he(_e(a),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"D":case"DD":return xe(Ke.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){var i=n.getUTCFullYear(),u=sa(i);return u?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(n,l,i){return n.setUTCMonth(0,i),n.setUTCHours(0,0,0,0),n}}]),o}(Ye);function No(s,e,o){var a,n,l,i,u,h,p,w;ve(2,arguments);var _=jt(),F=we((a=(n=(l=(i=o==null?void 0:o.weekStartsOn)!==null&&i!==void 0?i:o==null||(u=o.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&n!==void 0?n:(p=_.locale)===null||p===void 0||(w=p.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&a!==void 0?a:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=$e(s),O=we(e),N=D.getUTCDay(),te=O%7,V=(te+7)%7,R=(V<F?7:0)+O-N;return D.setUTCDate(D.getUTCDate()+R),D}var U6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"incompatibleTokens",["D","i","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,l){return l>=0&&l<=6}},{key:"set",value:function(n,l,i,u){return n=No(n,i,u),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),z6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i,u){var h=function(w){var _=Math.floor((w-1)/7)*7;return(w+u.weekStartsOn+6)%7+_};switch(l){case"e":case"ee":return Xe(He(l.length,n),h);case"eo":return Xe(i.ordinalNumber(n,{unit:"day"}),h);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,l){return l>=0&&l<=6}},{key:"set",value:function(n,l,i,u){return n=No(n,i,u),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),V6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i,u){var h=function(w){var _=Math.floor((w-1)/7)*7;return(w+u.weekStartsOn+6)%7+_};switch(l){case"c":case"cc":return Xe(He(l.length,n),h);case"co":return Xe(i.ordinalNumber(n,{unit:"day"}),h);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,l){return l>=0&&l<=6}},{key:"set",value:function(n,l,i,u){return n=No(n,i,u),n.setUTCHours(0,0,0,0),n}}]),o}(Ye);function R6(s,e){ve(2,arguments);var o=we(e);o%7===0&&(o=o-7);var a=1,n=$e(s),l=n.getUTCDay(),i=o%7,u=(i+7)%7,h=(u<a?7:0)+o-l;return n.setUTCDate(n.getUTCDate()+h),n}var Y6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",90),he(_e(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){var u=function(p){return p===0?7:p};switch(l){case"i":case"ii":return He(l.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Xe(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),u);case"iiiii":return Xe(i.day(n,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Xe(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),u);case"iiii":default:return Xe(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(n,l){return l>=1&&l<=7}},{key:"set",value:function(n,l,i){return n=R6(n,i),n.setUTCHours(0,0,0,0),n}}]),o}(Ye),I6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",80),he(_e(a),"incompatibleTokens",["b","B","H","k","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,l,i){return n.setUTCHours(Bo(i),0,0,0),n}}]),o}(Ye),B6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",80),he(_e(a),"incompatibleTokens",["a","B","H","k","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,l,i){return n.setUTCHours(Bo(i),0,0,0),n}}]),o}(Ye),N6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",80),he(_e(a),"incompatibleTokens",["a","b","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,l,i){return n.setUTCHours(Bo(i),0,0,0),n}}]),o}(Ye),E6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",70),he(_e(a),"incompatibleTokens",["H","K","k","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"h":return xe(Ke.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=1&&l<=12}},{key:"set",value:function(n,l,i){var u=n.getUTCHours()>=12;return u&&i<12?n.setUTCHours(i+12,0,0,0):!u&&i===12?n.setUTCHours(0,0,0,0):n.setUTCHours(i,0,0,0),n}}]),o}(Ye),Q6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",70),he(_e(a),"incompatibleTokens",["a","b","h","K","k","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"H":return xe(Ke.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=0&&l<=23}},{key:"set",value:function(n,l,i){return n.setUTCHours(i,0,0,0),n}}]),o}(Ye),L6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",70),he(_e(a),"incompatibleTokens",["h","H","k","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"K":return xe(Ke.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=0&&l<=11}},{key:"set",value:function(n,l,i){var u=n.getUTCHours()>=12;return u&&i<12?n.setUTCHours(i+12,0,0,0):n.setUTCHours(i,0,0,0),n}}]),o}(Ye),x6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",70),he(_e(a),"incompatibleTokens",["a","b","h","H","K","t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"k":return xe(Ke.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=1&&l<=24}},{key:"set",value:function(n,l,i){var u=i<=24?i%24:i;return n.setUTCHours(u,0,0,0),n}}]),o}(Ye),W6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",60),he(_e(a),"incompatibleTokens",["t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"m":return xe(Ke.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=0&&l<=59}},{key:"set",value:function(n,l,i){return n.setUTCMinutes(i,0,0),n}}]),o}(Ye),H6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",50),he(_e(a),"incompatibleTokens",["t","T"]),a}return qe(o,[{key:"parse",value:function(n,l,i){switch(l){case"s":return xe(Ke.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return He(l.length,n)}}},{key:"validate",value:function(n,l){return l>=0&&l<=59}},{key:"set",value:function(n,l,i){return n.setUTCSeconds(i,0),n}}]),o}(Ye),K6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",30),he(_e(a),"incompatibleTokens",["t","T"]),a}return qe(o,[{key:"parse",value:function(n,l){var i=function(h){return Math.floor(h*Math.pow(10,-l.length+3))};return Xe(He(l.length,n),i)}},{key:"set",value:function(n,l,i){return n.setUTCMilliseconds(i),n}}]),o}(Ye),X6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",10),he(_e(a),"incompatibleTokens",["t","T","x"]),a}return qe(o,[{key:"parse",value:function(n,l){switch(l){case"X":return Ot(Pt.basicOptionalMinutes,n);case"XX":return Ot(Pt.basic,n);case"XXXX":return Ot(Pt.basicOptionalSeconds,n);case"XXXXX":return Ot(Pt.extendedOptionalSeconds,n);case"XXX":default:return Ot(Pt.extended,n)}}},{key:"set",value:function(n,l,i){return l.timestampIsSet?n:new Date(n.getTime()-i)}}]),o}(Ye),Z6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",10),he(_e(a),"incompatibleTokens",["t","T","X"]),a}return qe(o,[{key:"parse",value:function(n,l){switch(l){case"x":return Ot(Pt.basicOptionalMinutes,n);case"xx":return Ot(Pt.basic,n);case"xxxx":return Ot(Pt.basicOptionalSeconds,n);case"xxxxx":return Ot(Pt.extendedOptionalSeconds,n);case"xxx":default:return Ot(Pt.extended,n)}}},{key:"set",value:function(n,l,i){return l.timestampIsSet?n:new Date(n.getTime()-i)}}]),o}(Ye),G6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",40),he(_e(a),"incompatibleTokens","*"),a}return qe(o,[{key:"parse",value:function(n){return ea(n)}},{key:"set",value:function(n,l,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),o}(Ye),J6=function(s){ze(o,s);var e=Ve(o);function o(){var a;je(this,o);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=e.call.apply(e,[this].concat(l)),he(_e(a),"priority",20),he(_e(a),"incompatibleTokens","*"),a}return qe(o,[{key:"parse",value:function(n){return ea(n)}},{key:"set",value:function(n,l,i){return[new Date(i),{timestampIsSet:!0}]}}]),o}(Ye),eT={G:new b6,y:new g6,Y:new y6,R:new $6,u:new k6,Q:new w6,q:new C6,M:new F6,L:new T6,w:new S6,I:new O6,d:new j6,D:new q6,E:new U6,e:new z6,c:new V6,i:new Y6,a:new I6,b:new B6,B:new N6,h:new E6,H:new Q6,K:new L6,k:new x6,m:new W6,s:new H6,S:new K6,X:new X6,x:new Z6,t:new G6,T:new J6},tT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oT=/^'([^]*?)'?$/,nT=/''/g,aT=/\S/,lT=/[a-zA-Z]/;function So(s,e,o,a){var n,l,i,u,h,p,w,_,F,D,O,N,te,V,R,oe,P,W;ve(3,arguments);var H=String(s),x=String(e),pe=jt(),ne=(n=(l=a==null?void 0:a.locale)!==null&&l!==void 0?l:pe.locale)!==null&&n!==void 0?n:Xn;if(!ne.match)throw new RangeError("locale must contain match property");var k=we((i=(u=(h=(p=a==null?void 0:a.firstWeekContainsDate)!==null&&p!==void 0?p:a==null||(w=a.locale)===null||w===void 0||(_=w.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&h!==void 0?h:pe.firstWeekContainsDate)!==null&&u!==void 0?u:(F=pe.locale)===null||F===void 0||(D=F.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=we((O=(N=(te=(V=a==null?void 0:a.weekStartsOn)!==null&&V!==void 0?V:a==null||(R=a.locale)===null||R===void 0||(oe=R.options)===null||oe===void 0?void 0:oe.weekStartsOn)!==null&&te!==void 0?te:pe.weekStartsOn)!==null&&N!==void 0?N:(P=pe.locale)===null||P===void 0||(W=P.options)===null||W===void 0?void 0:W.weekStartsOn)!==null&&O!==void 0?O:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(x==="")return H===""?$e(o):new Date(NaN);var X={firstWeekContainsDate:k,weekStartsOn:j,locale:ne},re=[new f6],I=x.match(sT).map(function(be){var G=be[0];if(G in To){var Fe=To[G];return Fe(be,ne.formatLong)}return be}).join("").match(tT),$=[],q=hn(I),U;try{var K=function(){var G=U.value;!(a!=null&&a.useAdditionalWeekYearTokens)&&Kn(G)&&xs(G,x,s),!(a!=null&&a.useAdditionalDayOfYearTokens)&&Hn(G)&&xs(G,x,s);var Fe=G[0],ge=eT[Fe];if(ge){var Q=ge.incompatibleTokens;if(Array.isArray(Q)){var ie=$.find(function(ue){return Q.includes(ue.token)||ue.token===Fe});if(ie)throw new RangeError("The format string mustn't contain `".concat(ie.fullToken,"` and `").concat(G,"` at the same time"))}else if(ge.incompatibleTokens==="*"&&$.length>0)throw new RangeError("The format string mustn't contain `".concat(G,"` and any other token at the same time"));$.push({token:Fe,fullToken:G});var Se=ge.run(H,G,ne.match,X);if(!Se)return{v:new Date(NaN)};re.push(Se.setter),H=Se.rest}else{if(Fe.match(lT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Fe+"`");if(G==="''"?G="'":Fe==="'"&&(G=iT(G)),H.indexOf(G)===0)H=H.slice(G.length);else return{v:new Date(NaN)}}};for(q.s();!(U=q.n()).done;){var v=K();if(bt(v)==="object")return v.v}}catch(be){q.e(be)}finally{q.f()}if(H.length>0&&aT.test(H))return new Date(NaN);var m=re.map(function(be){return be.priority}).sort(function(be,G){return G-be}).filter(function(be,G,Fe){return Fe.indexOf(be)===G}).map(function(be){return re.filter(function(G){return G.priority===be}).sort(function(G,Fe){return Fe.subPriority-G.subPriority})}).map(function(be){return be[0]}),A=$e(o);if(isNaN(A.getTime()))return new Date(NaN);var B=En(A,Ls(A)),le={},de=hn(m),z;try{for(de.s();!(z=de.n()).done;){var y=z.value;if(!y.validate(B,X))return new Date(NaN);var fe=y.set(B,le,X);Array.isArray(fe)?(B=fe[0],o6(le,fe[1])):B=fe}}catch(be){de.e(be)}finally{de.f()}return B}function iT(s){return s.match(oT)[1].replace(nT,"'")}function _n(s,e){ve(2,arguments);var o=Ts(s),a=Ts(e);return o.getTime()===a.getTime()}function rT(s,e){ve(2,arguments);var o=we(e);return Ut(s,-o)}function dT(s,e){var o;ve(1,arguments);var a=we((o=e==null?void 0:e.additionalDigits)!==null&&o!==void 0?o:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var n=hT(s),l;if(n.date){var i=pT(n.date,a);l=_T(i.restDateString,i.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var u=l.getTime(),h=0,p;if(n.time&&(h=vT(n.time),isNaN(h)))return new Date(NaN);if(n.timezone){if(p=fT(n.timezone),isNaN(p))return new Date(NaN)}else{var w=new Date(u+h),_=new Date(0);return _.setFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate()),_.setHours(w.getUTCHours(),w.getUTCMinutes(),w.getUTCSeconds(),w.getUTCMilliseconds()),_}return new Date(u+h+p)}var Vs={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},uT=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,cT=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mT=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hT(s){var e={},o=s.split(Vs.dateTimeDelimiter),a;if(o.length>2)return e;if(/:/.test(o[0])?a=o[0]:(e.date=o[0],a=o[1],Vs.timeZoneDelimiter.test(e.date)&&(e.date=s.split(Vs.timeZoneDelimiter)[0],a=s.substr(e.date.length,s.length))),a){var n=Vs.timezone.exec(a);n?(e.time=a.replace(n[1],""),e.timezone=n[1]):e.time=a}return e}function pT(s,e){var o=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=s.match(o);if(!a)return{year:NaN,restDateString:""};var n=a[1]?parseInt(a[1]):null,l=a[2]?parseInt(a[2]):null;return{year:l===null?n:l*100,restDateString:s.slice((a[1]||a[2]).length)}}function _T(s,e){if(e===null)return new Date(NaN);var o=s.match(uT);if(!o)return new Date(NaN);var a=!!o[4],n=$s(o[1]),l=$s(o[2])-1,i=$s(o[3]),u=$s(o[4]),h=$s(o[5])-1;if(a)return kT(e,u,h)?bT(e,u,h):new Date(NaN);var p=new Date(0);return!yT(e,l,i)||!$T(e,n)?new Date(NaN):(p.setUTCFullYear(e,l,Math.max(n,i)),p)}function $s(s){return s?parseInt(s):1}function vT(s){var e=s.match(cT);if(!e)return NaN;var o=ro(e[1]),a=ro(e[2]),n=ro(e[3]);return wT(o,a,n)?o*Yo+a*Ro+n*1e3:NaN}function ro(s){return s&&parseFloat(s.replace(",","."))||0}function fT(s){if(s==="Z")return 0;var e=s.match(mT);if(!e)return 0;var o=e[1]==="+"?-1:1,a=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return CT(a,n)?o*(a*Yo+n*Ro):NaN}function bT(s,e,o){var a=new Date(0);a.setUTCFullYear(s,0,4);var n=a.getUTCDay()||7,l=(e-1)*7+o+1-n;return a.setUTCDate(a.getUTCDate()+l),a}var gT=[31,null,31,30,31,30,31,31,30,31,30,31];function oa(s){return s%400===0||s%4===0&&s%100!==0}function yT(s,e,o){return e>=0&&e<=11&&o>=1&&o<=(gT[e]||(oa(s)?29:28))}function $T(s,e){return e>=1&&e<=(oa(s)?366:365)}function kT(s,e,o){return e>=1&&e<=53&&o>=0&&o<=6}function wT(s,e,o){return s===24?e===0&&o===0:o>=0&&o<60&&e>=0&&e<60&&s>=0&&s<25}function CT(s,e){return e>=0&&e<=59}function na(s,e){ve(2,arguments);var o=$e(s),a=we(e),n=o.getFullYear(),l=o.getDate(),i=new Date(0);i.setFullYear(n,a,15),i.setHours(0,0,0,0);var u=a6(i);return o.setMonth(a,Math.min(l,u)),o}function Qe(s,e){if(ve(2,arguments),bt(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var o=$e(s);return isNaN(o.getTime())?new Date(NaN):(e.year!=null&&o.setFullYear(e.year),e.month!=null&&(o=na(o,e.month)),e.date!=null&&o.setDate(we(e.date)),e.hours!=null&&o.setHours(we(e.hours)),e.minutes!=null&&o.setMinutes(we(e.minutes)),e.seconds!=null&&o.setSeconds(we(e.seconds)),e.milliseconds!=null&&o.setMilliseconds(we(e.milliseconds)),o)}function aa(s,e){ve(2,arguments);var o=$e(s),a=we(e);return o.setHours(a),o}function Eo(s,e){ve(2,arguments);var o=$e(s),a=we(e);return o.setMilliseconds(a),o}function la(s,e){ve(2,arguments);var o=$e(s),a=we(e);return o.setMinutes(a),o}function Qo(s,e){ve(2,arguments);var o=$e(s),a=we(e);return o.setSeconds(a),o}function At(s,e){ve(2,arguments);var o=$e(s),a=we(e);return isNaN(o.getTime())?new Date(NaN):(o.setFullYear(a),o)}function ms(s,e){ve(2,arguments);var o=we(e);return wt(s,-o)}function FT(s,e){if(ve(2,arguments),!e||bt(e)!=="object")return new Date(NaN);var o=e.years?we(e.years):0,a=e.months?we(e.months):0,n=e.weeks?we(e.weeks):0,l=e.days?we(e.days):0,i=e.hours?we(e.hours):0,u=e.minutes?we(e.minutes):0,h=e.seconds?we(e.seconds):0,p=ms(s,a+o*12),w=rT(p,l+n*7),_=u+i*60,F=h+_*60,D=F*1e3,O=new Date(w.getTime()-D);return O}function ia(s,e){ve(2,arguments);var o=we(e);return Vo(s,-o)}function vs(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),t("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),t("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),t("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}vs.compatConfig={MODE:3};function ra(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),t("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}ra.compatConfig={MODE:3};function Lo(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Lo.compatConfig={MODE:3};function xo(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}xo.compatConfig={MODE:3};function Wo(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),t("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}Wo.compatConfig={MODE:3};function Ho(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Ho.compatConfig={MODE:3};function Ko(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[t("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}Ko.compatConfig={MODE:3};function Xo(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var da={exports:{}};(function(s){function e(o){return o&&o.__esModule?o:{default:o}}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports})(da);var TT=da.exports,Po={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;function o(a){if(a===null||a===!0||a===!1)return NaN;var n=Number(a);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}s.exports=e.default})(Po,Po.exports);var DT=Po.exports;const ST=Xo(DT);var Oo={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;function o(a){var n=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return n.setUTCFullYear(a.getFullYear()),a.getTime()-n.getTime()}s.exports=e.default})(Oo,Oo.exports);var PT=Oo.exports;const vn=Xo(PT);function OT(s,e){var o=qT(e);return o.formatToParts?MT(o,s):jT(o,s)}var AT={year:0,month:1,day:2,hour:3,minute:4,second:5};function MT(s,e){try{for(var o=s.formatToParts(e),a=[],n=0;n<o.length;n++){var l=AT[o[n].type];l>=0&&(a[l]=parseInt(o[n].value,10))}return a}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function jT(s,e){var o=s.format(e).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(o);return[a[3],a[1],a[2],a[4],a[5],a[6]]}var uo={};function qT(s){if(!uo[s]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),o=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";uo[s]=o?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return uo[s]}function Zo(s,e,o,a,n,l,i){var u=new Date(0);return u.setUTCFullYear(s,e,o),u.setUTCHours(a,n,l,i),u}var fn=36e5,UT=6e4,co={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Go(s,e,o){var a,n;if(s===""||(a=co.timezoneZ.exec(s),a))return 0;var l;if(a=co.timezoneHH.exec(s),a)return l=parseInt(a[1],10),bn(l)?-(l*fn):NaN;if(a=co.timezoneHHMM.exec(s),a){l=parseInt(a[1],10);var i=parseInt(a[2],10);return bn(l,i)?(n=Math.abs(l)*fn+i*UT,l>0?-n:n):NaN}if(RT(s)){e=new Date(e||Date.now());var u=o?e:zT(e),h=Ao(u,s),p=o?h:VT(e,h,s);return-p}return NaN}function zT(s){return Zo(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}function Ao(s,e){var o=OT(s,e),a=Zo(o[0],o[1]-1,o[2],o[3]%24,o[4],o[5],0).getTime(),n=s.getTime(),l=n%1e3;return n-=l>=0?l:1e3+l,a-n}function VT(s,e,o){var a=s.getTime(),n=a-e,l=Ao(new Date(n),o);if(e===l)return e;n-=l-e;var i=Ao(new Date(n),o);return l===i?l:Math.max(l,i)}function bn(s,e){return-23<=s&&s<=23&&(e==null||0<=e&&e<=59)}var gn={};function RT(s){if(gn[s])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:s}),gn[s]=!0,!0}catch{return!1}}var ua=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,mo=36e5,yn=6e4,YT=2,ut={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ua};function Mo(s,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(s===null)return new Date(NaN);var o=e||{},a=o.additionalDigits==null?YT:ST(o.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]")return new Date(s.getTime());if(typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]")return new Date(s);if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var n=IT(s),l=BT(n.date,a),i=l.year,u=l.restDateString,h=NT(u,i);if(isNaN(h))return new Date(NaN);if(h){var p=h.getTime(),w=0,_;if(n.time&&(w=ET(n.time),isNaN(w)))return new Date(NaN);if(n.timeZone||o.timeZone){if(_=Go(n.timeZone||o.timeZone,new Date(p+w)),isNaN(_))return new Date(NaN)}else _=vn(new Date(p+w)),_=vn(new Date(p+w+_));return new Date(p+w+_)}else return new Date(NaN)}function IT(s){var e={},o=ut.dateTimePattern.exec(s),a;if(o?(e.date=o[1],a=o[3]):(o=ut.datePattern.exec(s),o?(e.date=o[1],a=o[2]):(e.date=null,a=s)),a){var n=ut.timeZone.exec(a);n?(e.time=a.replace(n[1],""),e.timeZone=n[1].trim()):e.time=a}return e}function BT(s,e){var o=ut.YYY[e],a=ut.YYYYY[e],n;if(n=ut.YYYY.exec(s)||a.exec(s),n){var l=n[1];return{year:parseInt(l,10),restDateString:s.slice(l.length)}}if(n=ut.YY.exec(s)||o.exec(s),n){var i=n[1];return{year:parseInt(i,10)*100,restDateString:s.slice(i.length)}}return{year:null}}function NT(s,e){if(e===null)return null;var o,a,n,l;if(s.length===0)return a=new Date(0),a.setUTCFullYear(e),a;if(o=ut.MM.exec(s),o)return a=new Date(0),n=parseInt(o[1],10)-1,kn(e,n)?(a.setUTCFullYear(e,n),a):new Date(NaN);if(o=ut.DDD.exec(s),o){a=new Date(0);var i=parseInt(o[1],10);return xT(e,i)?(a.setUTCFullYear(e,0,i),a):new Date(NaN)}if(o=ut.MMDD.exec(s),o){a=new Date(0),n=parseInt(o[1],10)-1;var u=parseInt(o[2],10);return kn(e,n,u)?(a.setUTCFullYear(e,n,u),a):new Date(NaN)}if(o=ut.Www.exec(s),o)return l=parseInt(o[1],10)-1,wn(e,l)?$n(e,l):new Date(NaN);if(o=ut.WwwD.exec(s),o){l=parseInt(o[1],10)-1;var h=parseInt(o[2],10)-1;return wn(e,l,h)?$n(e,l,h):new Date(NaN)}return null}function ET(s){var e,o,a;if(e=ut.HH.exec(s),e)return o=parseFloat(e[1].replace(",",".")),ho(o)?o%24*mo:NaN;if(e=ut.HHMM.exec(s),e)return o=parseInt(e[1],10),a=parseFloat(e[2].replace(",",".")),ho(o,a)?o%24*mo+a*yn:NaN;if(e=ut.HHMMSS.exec(s),e){o=parseInt(e[1],10),a=parseInt(e[2],10);var n=parseFloat(e[3].replace(",","."));return ho(o,a,n)?o%24*mo+a*yn+n*1e3:NaN}return null}function $n(s,e,o){e=e||0,o=o||0;var a=new Date(0);a.setUTCFullYear(s,0,4);var n=a.getUTCDay()||7,l=e*7+o+1-n;return a.setUTCDate(a.getUTCDate()+l),a}var QT=[31,28,31,30,31,30,31,31,30,31,30,31],LT=[31,29,31,30,31,30,31,31,30,31,30,31];function ca(s){return s%400===0||s%4===0&&s%100!==0}function kn(s,e,o){if(e<0||e>11)return!1;if(o!=null){if(o<1)return!1;var a=ca(s);if(a&&o>LT[e]||!a&&o>QT[e])return!1}return!0}function xT(s,e){if(e<1)return!1;var o=ca(s);return!(o&&e>366||!o&&e>365)}function wn(s,e,o){return!(e<0||e>52||o!=null&&(o<0||o>6))}function ho(s,e,o){return!(s!=null&&(s<0||s>=25)||e!=null&&(e<0||e>=60)||o!=null&&(o<0||o>=60))}var jo={exports:{}},qo={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;function o(a,n){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l]);return a}s.exports=e.default})(qo,qo.exports);var WT=qo.exports;(function(s,e){var o=TT.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=o(WT);function n(l){return(0,a.default)({},l)}s.exports=e.default})(jo,jo.exports);var HT=jo.exports;const KT=Xo(HT);function XT(s,e,o){var a=Mo(s,o),n=Go(e,a,!0),l=new Date(a.getTime()-n),i=new Date(0);return i.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),i.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),i}function ZT(s,e,o){if(typeof s=="string"&&!s.match(ua)){var a=KT(o);return a.timeZone=e,Mo(s,a)}var n=Mo(s,o),l=Zo(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()).getTime(),i=Go(e,new Date(l));return new Date(l+i)}function Cn(s){return e=>new Intl.DateTimeFormat(s,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function GT(s){return e=>Et(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:s})}const JT=(s,e,o)=>{const a=[1,2,3,4,5,6,7];let n;if(s!==null)try{n=a.map(GT(s))}catch{n=a.map(Cn(e))}else n=a.map(Cn(e));const l=n.slice(0,o),i=n.slice(o+1,n.length);return[n[o]].concat(...i).concat(...l)},Jo=(s,e)=>{const o=[];for(let a=+s[0];a<=+s[1];a++)o.push({value:+a,text:`${a}`});return e?o.reverse():o},ma=(s,e,o)=>{const a=[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>{const i=l<10?`0${l}`:l;return new Date(`2017-${i}-01T00:00:00+00:00`)});if(s!==null)try{const l=o==="long"?"MMMM":"MMM";return a.map((i,u)=>{const h=Et(i,l,{locale:s});return{text:h.charAt(0).toUpperCase()+h.substring(1),value:u}})}catch{}const n=new Intl.DateTimeFormat(e,{month:o,timeZone:"UTC"});return a.map((l,i)=>{const u=n.format(l);return{text:u.charAt(0).toUpperCase()+u.substring(1),value:i}})},e8=s=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][s],Je=s=>{const e=C(s);return e!=null&&e.$el?e==null?void 0:e.$el:e},t8=s=>Object.assign({type:"dot"},s),ha=s=>Array.isArray(s)?!!s[0]&&!!s[1]:!1,Ks={prop:s=>`"${s}" prop must be enabled!`,dateArr:s=>`You need to use array as "model-value" binding in order to support "${s}"`},et=s=>s,Fn=s=>s===0?s:!s||isNaN(+s)?null:+s,Tn=s=>s===null,s8=s=>{if(s)return[...s.querySelectorAll("input, button, select, textarea, a[href]")][0]},o8=s=>{const e=[],o=a=>a.filter(n=>n);for(let a=0;a<s.length;a+=3){const n=[s[a],s[a+1],s[a+2]];e.push(o(n))}return e},Ps=(s,e,o)=>{const a=o!=null,n=e!=null;if(!a&&!n)return!1;const l=+o,i=+e;return a&&n?+s>l||+s<i:a?+s>l:n?+s<i:!1},hs=(s,e)=>o8(s).map(o=>o.map(a=>{const{active:n,disabled:l,isBetween:i,highlighted:u}=e(a);return{...a,active:n,disabled:l,className:{dp__overlay_cell_active:n,dp__overlay_cell:!n,dp__overlay_cell_disabled:l,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:l&&n,dp__cell_in_between:i,"dp--highlighted":u}}})),Qt=(s,e,o=!1)=>{s&&e.allowStopPropagation&&(o&&s.stopImmediatePropagation(),s.stopPropagation())},n8=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function a8(s,e){let o=[...document.querySelectorAll(n8())];o=o.filter(n=>!s.contains(n)||n.hasAttribute("data-datepicker-instance"));const a=o.indexOf(s);if(a>=0&&(e?a-1>=0:a+1<=o.length))return o[a+(e?-1:1)]}const l8=(s,e)=>{let o;return function(...a){clearTimeout(o),o=setTimeout(()=>{s(...a)},e)}},Dn=(s,e,o,a,n)=>{const l=So(s,e.slice(0,s.length),new Date);return ws(l)&&Bn(l)?a||n?l:Qe(l,{hours:+o.hours,minutes:+(o==null?void 0:o.minutes),seconds:+(o==null?void 0:o.seconds),milliseconds:0}):null},i8=(s,e,o,a,n)=>{const l=Array.isArray(o)?o[0]:o;if(typeof e=="string")return Dn(s,e,l,a,n);if(Array.isArray(e)){let i=null;for(const u of e)if(i=Dn(s,u,l,a,n),i)break;return i}return typeof e=="function"?e(s):null},Z=s=>s?new Date(s):new Date,r8=(s,e,o)=>{if(e){const n=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getDate().toString().padStart(2,"0"),i=s.getHours().toString().padStart(2,"0"),u=s.getMinutes().toString().padStart(2,"0"),h=o?s.getSeconds().toString().padStart(2,"0"):"00";return`${s.getFullYear()}-${n}-${l}T${i}:${u}:${h}.000Z`}const a=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds());return new Date(a).toISOString()},it=s=>{let e=Z(JSON.parse(JSON.stringify(s)));return e=aa(e,0),e=la(e,0),e=Qo(e,0),e=Eo(e,0),e},Lt=(s,e,o,a)=>{let n=s?Z(s):Z();return(e||e===0)&&(n=aa(n,+e)),(o||o===0)&&(n=la(n,+o)),(a||a===0)&&(n=Qo(n,+a)),Eo(n,0)},nt=(s,e)=>!s||!e?!1:Ss(it(s),it(e)),Re=(s,e)=>!s||!e?!1:ds(it(s),it(e)),lt=(s,e)=>!s||!e?!1:Ds(it(s),it(e)),Zs=(s,e,o)=>s!=null&&s[0]&&s!=null&&s[1]?lt(o,s[0])&&nt(o,s[1]):s!=null&&s[0]&&e?lt(o,s[0])&&nt(o,e)||nt(o,s[0])&&lt(o,e):!1,$t=s=>{const e=Qe(new Date(s),{date:1});return it(e)},po=(s,e,o)=>e&&(o||o===0)?Object.fromEntries(["hours","minutes","seconds"].map(a=>a===e?[a,o]:[a,isNaN(+s[a])?void 0:+s[a]])):{hours:isNaN(+s.hours)?void 0:+s.hours,minutes:isNaN(+s.minutes)?void 0:+s.minutes,seconds:isNaN(+s.seconds)?void 0:+s.seconds},Gt=s=>({hours:Ct(s),minutes:Mt(s),seconds:cs(s)}),pa=(s,e)=>{if(e){const o=Ae(Z(e));if(o>s)return 12;if(o===s)return Ue(Z(e))}},_a=(s,e)=>{if(e){const o=Ae(Z(e));return o<s?-1:o===s?Ue(Z(e)):void 0}},ps=s=>{if(s)return Ae(Z(s))},Ft=(s,e)=>e?XT(s,e):s,va=(s,e)=>e?ZT(s,e):s,d8=s=>s instanceof Date?s:dT(s),fa=(s,e)=>{const o=lt(s,e)?e:s,a=lt(e,s)?e:s;return Nn({start:o,end:a})},u8=s=>{const e=wt(s,1);return{month:Ue(e),year:Ae(e)}},Is=(s,e,o)=>{const a=es(Ft(s,e),{weekStartsOn:+o}),n=JF(Ft(s,e),{weekStartsOn:+o});return[a,n]},ba=(s,e)=>{const o={hours:Ct(Z()),minutes:Mt(Z()),seconds:e?cs(Z()):0};return Object.assign(o,s)},Nt=(s,e,o)=>[Qe(Z(s),{date:1}),Qe(Z(),{month:e,year:o,date:1})],zt=(s,e,o)=>{let a=s?Z(s):Z();return(e||e===0)&&(a=na(a,e)),o&&(a=At(a,o)),a},ga=(s,e,o,a,n)=>{if(!a||n&&!e||!n&&!o)return!1;const l=n?wt(s,1):ms(s,1),i=[Ue(l),Ae(l)];return n?!m8(...i,e):!c8(...i,o)},c8=(s,e,o)=>nt(...Nt(o,s,e))||Re(...Nt(o,s,e)),m8=(s,e,o)=>lt(...Nt(o,s,e))||Re(...Nt(o,s,e)),ya=(s,e,o,a,n,l,i)=>{if(typeof e=="function"&&!i)return e(s);const u=o?{locale:o}:void 0;return Array.isArray(s)?`${Et(s[0],l,u)}${n&&!s[1]?"":a}${s[1]?Et(s[1],l,u):""}`:Et(s,l,u)},is=s=>{if(s)return null;throw new Error(Ks.prop("partial-range"))},Rs=(s,e)=>{if(e)return s();throw new Error(Ks.prop("range"))},Uo=s=>Array.isArray(s)?ws(s[0])&&(s[1]?ws(s[1]):!0):s?ws(s):!1,h8=(s,e)=>Qe(e??Z(),{hours:+s.hours||0,minutes:+s.minutes||0,seconds:+s.seconds||0}),_o=(s,e,o,a)=>{if(!s)return!0;if(a){const n=o==="max"?Ss(s,e):Ds(s,e),l={seconds:0,milliseconds:0};return n||ds(Qe(s,l),Qe(e,l))}return o==="max"?s.getTime()<=e.getTime():s.getTime()>=e.getTime()},vo=(s,e,o)=>s?h8(s,e):Z(o??e),Sn=(s,e,o,a,n)=>{if(Array.isArray(a)){const i=vo(s,a[0],e),u=vo(s,a[1],e);return _o(a[0],i,o,!!e)&&_o(a[1],u,o,!!e)&&n}const l=vo(s,a,e);return _o(a,l,o,!!e)&&n},fo=s=>Qe(Z(),Gt(s)),p8=(s,e)=>Array.isArray(s)?s.map(o=>Z(o)).filter(o=>Ae(Z(o))===e).map(o=>Ue(o)):[],$a=(s,e,o)=>typeof s=="function"?s({month:e,year:o}):!!s.months.find(a=>a.month===e&&a.year===o),en=(s,e)=>typeof s=="function"?s(e):s.years.includes(e),ks=Os({menuFocused:!1,shiftKeyInMenu:!1}),ka=()=>{const s=o=>{ks.menuFocused=o},e=o=>{ks.shiftKeyInMenu!==o&&(ks.shiftKeyInMenu=o)};return{control:se(()=>({shiftKeyInMenu:ks.shiftKeyInMenu,menuFocused:ks.menuFocused})),setMenuFocused:s,setShiftKey:e}},Ee=Os({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),bo=ce(null),Ys=ce(!1),go=ce(!1),yo=ce(!1),$o=ce(!1),dt=ce(0),ot=ce(0),Kt=()=>{const s=se(()=>Ys.value?[...Ee.selectionGrid,Ee.actionRow].filter(_=>_.length):go.value?[...Ee.timePicker[0],...Ee.timePicker[1],$o.value?[]:[bo.value],Ee.actionRow].filter(_=>_.length):yo.value?[...Ee.monthPicker,Ee.actionRow]:[Ee.monthYear,...Ee.calendar,Ee.time,Ee.actionRow].filter(_=>_.length)),e=_=>{dt.value=_?dt.value+1:dt.value-1;let F=null;s.value[ot.value]&&(F=s.value[ot.value][dt.value]),F||(dt.value=_?dt.value-1:dt.value+1)},o=_=>{ot.value===0&&!_||ot.value===s.value.length&&_||(ot.value=_?ot.value+1:ot.value-1,s.value[ot.value]?s.value[ot.value]&&!s.value[ot.value][dt.value]&&dt.value!==0&&(dt.value=s.value[ot.value].length-1):ot.value=_?ot.value-1:ot.value+1)},a=_=>{let F=null;s.value[ot.value]&&(F=s.value[ot.value][dt.value]),F?F.focus({preventScroll:!Ys.value}):dt.value=_?dt.value-1:dt.value+1},n=()=>{e(!0),a(!0)},l=()=>{e(!1),a(!1)},i=()=>{o(!1),a(!0)},u=()=>{o(!0),a(!0)},h=(_,F)=>{Ee[F]=_},p=(_,F)=>{Ee[F]=_},w=()=>{dt.value=0,ot.value=0};return{buildMatrix:h,buildMultiLevelMatrix:p,setTimePickerBackRef:_=>{bo.value=_},setSelectionGrid:_=>{Ys.value=_,w(),_||(Ee.selectionGrid=[])},setTimePicker:(_,F=!1)=>{go.value=_,$o.value=F,w(),_||(Ee.timePicker[0]=[],Ee.timePicker[1]=[])},setTimePickerElements:(_,F=0)=>{Ee.timePicker[F]=_},arrowRight:n,arrowLeft:l,arrowUp:i,arrowDown:u,clearArrowNav:()=>{Ee.monthYear=[],Ee.calendar=[],Ee.time=[],Ee.actionRow=[],Ee.selectionGrid=[],Ee.timePicker[0]=[],Ee.timePicker[1]=[],Ys.value=!1,go.value=!1,$o.value=!1,yo.value=!1,w(),bo.value=null},setMonthPicker:_=>{yo.value=_,w()},refSets:Ee}},Pn=s=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...s??{}}),_8=s=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...s??{}}),On=s=>s?typeof s=="boolean"?s?2:0:+s>=2?+s:2:0,v8=s=>{const e=typeof s=="object"&&s,o={static:!0,solo:!1};if(!s)return{...o,count:On(!1)};const a=e?s:{},n=e?a.count??!0:s,l=On(n);return Object.assign(o,a,{count:l})},f8=(s,e,o)=>s||(typeof o=="string"?o:e),b8=s=>typeof s=="boolean"?s?Pn({}):!1:Pn(s),g8=s=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof s=="object"?{...e,...s??{},enabled:!0}:{...e,enabled:s}},y8=s=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...s??{}}),$8=s=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...s??{}}),k8=s=>{const e={input:!1};return typeof s=="object"?{...e,...s??{},enabled:!0}:{enabled:s,...e}},w8=s=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...s??{}}),C8=(s,e,o)=>{const a={dates:Array.isArray(s)?s.map(n=>Z(n)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:o}};return typeof s=="function"?s:{...a,...s??{}}},F8=s=>typeof s=="object"?{type:s.type,hideOnOffsetDates:s.hideOnOffsetDates??!1}:{type:s,hideOnOffsetDates:!1},Ze=s=>{const e=()=>{const V=s.enableSeconds?":ss":"";return s.is24?`HH:mm${V}`:`hh:mm${V} aa`},o=()=>s.format?s.format:s.monthPicker?"MM/yyyy":s.timePicker?e():s.weekPicker?"MM/dd/yyyy":s.yearPicker?"yyyy":s.quarterPicker?"QQQ/yyyy":s.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",a=V=>ba(V,s.enableSeconds),n=()=>s.range?s.startTime&&Array.isArray(s.startTime)?[a(s.startTime[0]),a(s.startTime[1])]:null:s.startTime&&!Array.isArray(s.startTime)?a(s.startTime):null,l=se(()=>v8(s.multiCalendars)),i=se(()=>n()),u=se(()=>_8(s.ariaLabels)),h=se(()=>y8(s.filters)),p=se(()=>b8(s.transitions)),w=se(()=>$8(s.actionRow)),_=se(()=>f8(s.previewFormat,s.format,o())),F=se(()=>g8(s.textInput)),D=se(()=>k8(s.inline)),O=se(()=>w8(s.config)),N=se(()=>C8(s.highlight,s.highlightWeekDays,s.highlightDisabledDays)),te=se(()=>F8(s.weekNumbers));return{defaultedTransitions:p,defaultedMultiCalendars:l,defaultedStartTime:i,defaultedAriaLabels:u,defaultedFilters:h,defaultedActionRow:w,defaultedPreviewFormat:_,defaultedTextInput:F,defaultedInline:D,defaultedConfig:O,defaultedHighlight:N,defaultedWeekNumbers:te,getDefaultPattern:o,getDefaultStartTime:n}},T8=(s,e,o)=>{const a=ce(),{defaultedTextInput:n,getDefaultPattern:l}=Ze(e),i=ce(""),u=Ns(e,"format");Wt(a,()=>{s("internal-model-change",a.value)}),Wt(u,()=>{I()});const h=m=>va(m,e.timezone),p=m=>Ft(m,e.timezone),w=(m,A,B=!1)=>ya(m,e.format,e.formatLocale,n.value.rangeSeparator,e.modelAuto,A??l(),B),_=m=>m?e.modelType?q(m):{hours:Ct(m),minutes:Mt(m),seconds:e.enableSeconds?cs(m):0}:null,F=m=>e.modelType?q(m):{month:Ue(m),year:Ae(m)},D=m=>Array.isArray(m)?e.multiDates?m.map(A=>O(A,At(Z(),A))):Rs(()=>[At(Z(),m[0]),m[1]?At(Z(),m[1]):is(e.partialRange)],e.range):At(Z(),+m),O=(m,A)=>(typeof m=="string"||typeof m=="number")&&e.modelType?$(m):A,N=m=>Array.isArray(m)?[O(m[0],Lt(null,+m[0].hours,+m[0].minutes,m[0].seconds)),O(m[1],Lt(null,+m[1].hours,+m[1].minutes,m[1].seconds))]:O(m,Lt(null,m.hours,m.minutes,m.seconds)),te=m=>Array.isArray(m)?e.multiDates?m.map(A=>O(A,zt(null,+A.month,+A.year))):Rs(()=>[O(m[0],zt(null,+m[0].month,+m[0].year)),O(m[1],m[1]?zt(null,+m[1].month,+m[1].year):is(e.partialRange))],e.range):O(m,zt(null,+m.month,+m.year)),V=m=>{if(Array.isArray(m))return m.map(A=>$(A));throw new Error(Ks.dateArr("multi-dates"))},R=m=>{if(Array.isArray(m))return[Z(m[0]),Z(m[1])];throw new Error(Ks.dateArr("week-picker"))},oe=m=>e.modelAuto?Array.isArray(m)?[$(m[0]),$(m[1])]:e.autoApply?[$(m)]:[$(m),null]:Array.isArray(m)?Rs(()=>[$(m[0]),m[1]?$(m[1]):is(e.partialRange)],e.range):$(m),P=()=>{Array.isArray(a.value)&&e.range&&a.value.length===1&&a.value.push(is(e.partialRange))},W=()=>{const m=a.value;return[q(m[0]),m[1]?q(m[1]):is(e.partialRange)]},H=()=>a.value[1]?W():q(et(a.value[0])),x=()=>(a.value||[]).map(m=>q(m)),pe=()=>(P(),e.modelAuto?H():e.multiDates?x():Array.isArray(a.value)?Rs(()=>W(),e.range):q(et(a.value))),ne=m=>!m||Array.isArray(m)&&!m.length?null:e.timePicker?N(et(m)):e.monthPicker?te(et(m)):e.yearPicker?D(et(m)):e.multiDates?V(et(m)):e.weekPicker?R(et(m)):oe(et(m)),k=m=>{const A=ne(m);Uo(et(A))?(a.value=et(A),I()):(a.value=null,i.value="")},j=()=>{const m=A=>Et(A,n.value.format);return`${m(a.value[0])} ${n.value.rangeSeparator} ${a.value[1]?m(a.value[1]):""}`},X=()=>o.value&&a.value?Array.isArray(a.value)?j():Et(a.value,n.value.format):w(a.value),re=()=>a.value?e.multiDates?a.value.map(m=>w(m)).join("; "):n.value.enabled&&typeof n.value.format=="string"?X():w(a.value):"",I=()=>{!e.format||typeof e.format=="string"||n.value.enabled&&typeof n.value.format=="string"?i.value=re():i.value=e.format(a.value)},$=m=>{if(e.utc){const A=new Date(m);return e.utc==="preserve"?new Date(A.getTime()+A.getTimezoneOffset()*6e4):A}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?p(new Date(m)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?So(m,l(),new Date):p(So(m,e.modelType,new Date)):p(new Date(m))},q=m=>m?e.utc?r8(m,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+h(m):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?w(h(m)):w(h(m),e.modelType,!0):h(m):"",U=(m,A=!1)=>{if(s("update:model-value",m),e.emitTimezone&&A){const B=Array.isArray(m)?m.map(le=>Ft(et(le)),e.emitTimezone):Ft(et(m),e.emitTimezone);s("update:model-timezone-value",B)}},K=m=>Array.isArray(a.value)?e.multiDates?a.value.map(A=>m(A)):[m(a.value[0]),a.value[1]?m(a.value[1]):is(e.partialRange)]:m(et(a.value)),v=m=>U(et(K(m)));return{inputValue:i,internalModelValue:a,checkBeforeEmit:()=>a.value?e.range?e.partialRange?a.value.length>=1:a.value.length===2:!!a.value:!1,parseExternalModelValue:k,formatInputValue:I,emitModelValue:()=>(I(),e.monthPicker?v(F):e.timePicker?v(_):e.yearPicker?v(Ae):e.weekPicker?U(a.value.map(m=>q(m)),!0):U(pe(),!0))}},D8=(s,e)=>{const{defaultedFilters:o}=Ze(s),{validateMonthYearInRange:a}=ns(s),n=(p,w)=>{let _=p;return o.value.months.includes(Ue(_))?(_=w?wt(p,1):ms(p,1),n(_,w)):_},l=(p,w)=>{let _=p;return o.value.years.includes(Ae(_))?(_=w?Vo(p,1):ia(p,1),l(_,w)):_},i=(p,w=!1)=>{const _=Qe(new Date,{month:s.month,year:s.year});let F=p?wt(_,1):ms(_,1);s.disableYearSelect&&(F=At(F,s.year));let D=Ue(F),O=Ae(F);o.value.months.includes(D)&&(F=n(F,p),D=Ue(F),O=Ae(F)),o.value.years.includes(O)&&(F=l(F,p),O=Ae(F)),a(D,O,p,s.preventMinMaxNavigation)&&u(D,O,w)},u=(p,w,_)=>{e("update-month-year",{month:p,year:w,fromNav:_})},h=se(()=>p=>ga(Qe(new Date,{month:s.month,year:s.year}),s.maxDate,s.minDate,s.preventMinMaxNavigation,p));return{handleMonthYearChange:i,isDisabled:h,updateMonthYear:u}};var rs=(s=>(s.center="center",s.left="left",s.right="right",s))(rs||{}),yt=(s=>(s.month="month",s.year="year",s))(yt||{}),Zt=(s=>(s.top="top",s.bottom="bottom",s))(Zt||{}),Jt=(s=>(s.header="header",s.calendar="calendar",s.timePicker="timePicker",s))(Jt||{}),St=(s=>(s.month="month",s.year="year",s.calendar="calendar",s.time="time",s.minutes="minutes",s.hours="hours",s.seconds="seconds",s))(St||{});const S8=({menuRef:s,menuRefInner:e,inputRef:o,pickerWrapperRef:a,inline:n,emit:l,props:i,slots:u})=>{const h=ce({}),p=ce(!1),w=ce({top:"0",left:"0"}),_=ce(!1),F=Ns(i,"teleportCenter");Wt(F,()=>{w.value=JSON.parse(JSON.stringify({})),P()});const D=$=>{if(i.teleport){const q=$.getBoundingClientRect();return{left:q.left+window.scrollX,top:q.top+window.scrollY}}return{top:0,left:0}},O=($,q)=>{w.value.left=`${$+q-h.value.width}px`},N=$=>{w.value.left=`${$}px`},te=($,q)=>{i.position===rs.left&&N($),i.position===rs.right&&O($,q),i.position===rs.center&&(w.value.left=`${$+q/2-h.value.width/2}px`)},V=$=>{const{width:q,height:U}=$.getBoundingClientRect(),{top:K,left:v}=i.altPosition?i.altPosition($):D($);return{top:+K,left:+v,width:q,height:U}},R=()=>{w.value.left="50%",w.value.top="50%",w.value.transform="translate(-50%, -50%)",w.value.position="fixed",delete w.value.opacity},oe=()=>{const $=Je(o),{top:q,left:U,transform:K}=i.altPosition($);w.value={top:`${q}px`,left:`${U}px`,transform:K??""}},P=($=!0)=>{var q;if(!n.value.enabled){if(F.value)return R();if(i.altPosition!==null)return oe();if($){const U=i.teleport?(q=e.value)==null?void 0:q.$el:s.value;U&&(h.value=U.getBoundingClientRect()),l("recalculate-position")}return j()}},W=({inputEl:$,left:q,width:U})=>{window.screen.width>768&&!p.value&&te(q,U),pe($)},H=$=>{const{top:q,left:U,height:K,width:v}=V($);w.value.top=`${K+q+ +i.offset}px`,_.value=!1,p.value||(w.value.left=`${U+v/2-h.value.width/2}px`),W({inputEl:$,left:U,width:v})},x=$=>{const{top:q,left:U,width:K}=V($);w.value.top=`${q-+i.offset-h.value.height}px`,_.value=!0,W({inputEl:$,left:U,width:K})},pe=$=>{if(i.autoPosition){const{left:q,width:U}=V($),{left:K,right:v}=h.value;if(!p.value){if(Math.abs(K)!==Math.abs(v)){if(K<=0)return p.value=!0,N(q);if(v>=document.documentElement.clientWidth)return p.value=!0,O(q,U)}return te(q,U)}}},ne=()=>{const $=Je(o);if($){const{height:q}=h.value,{top:U,height:K}=$.getBoundingClientRect(),v=window.innerHeight-U-K,m=U;return q<=v?Zt.bottom:q>v&&q<=m?Zt.top:v>=m?Zt.bottom:Zt.top}return Zt.bottom},k=$=>ne()===Zt.bottom?H($):x($),j=()=>{const $=Je(o);if($)return i.autoPosition?k($):H($)},X=function($){if($){const q=$.scrollHeight>$.clientHeight,U=window.getComputedStyle($).overflowY.indexOf("hidden")!==-1;return q&&!U}return!0},re=function($){return!$||$===document.body||$.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:X($)?$:re($.parentNode)},I=$=>{if($)switch(i.position){case rs.left:return{left:0,transform:"translateX(0)"};case rs.right:return{left:`${$.width}px`,transform:"translateX(-100%)"};default:return{left:`${$.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:_,menuStyle:w,xCorrect:p,setMenuPosition:P,getScrollableParent:re,shadowRender:($,q)=>{var U,K,v;const m=document.createElement("div"),A=(U=Je(o))==null?void 0:U.getBoundingClientRect();m.setAttribute("id","dp--temp-container");const B=(K=a.value)!=null&&K.clientWidth?a.value:document.body;B.append(m);const le=I(A),de=Ma($,{...q,shadow:!0,style:{opacity:0,position:"absolute",...le}},Object.fromEntries(Object.keys(u).filter(z=>["right-sidebar","left-sidebar"].includes(z)).map(z=>[z,u[z]])));nn(de,m),h.value=(v=de.el)==null?void 0:v.getBoundingClientRect(),nn(null,m),B.removeChild(m)}}},Bt=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],P8=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],O8={all:()=>Bt,monthYear:()=>Bt.filter(s=>s.use.includes("month-year")),input:()=>P8,timePicker:()=>Bt.filter(s=>s.use.includes("time")),action:()=>Bt.filter(s=>s.use.includes("action")),calendar:()=>Bt.filter(s=>s.use.includes("calendar")),menu:()=>Bt.filter(s=>s.use.includes("menu")),shared:()=>Bt.filter(s=>s.use.includes("shared")),yearMode:()=>Bt.filter(s=>s.use.includes("year-mode"))},pt=(s,e,o)=>{const a=[];return O8[e]().forEach(n=>{s[n.name]&&a.push(n.name)}),o!=null&&o.length&&o.forEach(n=>{n.slot&&a.push(n.slot)}),a},As=s=>{const e=se(()=>a=>s.value?a?s.value.open:s.value.close:""),o=se(()=>a=>s.value?a?s.value.menuAppearTop:s.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!s.value,menuTransition:o}},Ms=(s,e)=>{const o=Z(Ft(new Date,s.timezone)),a=ce([{month:Ue(o),year:Ae(o)}]),n=Os({hours:s.range?[Ct(o),Ct(o)]:Ct(o),minutes:s.range?[Mt(o),Mt(o)]:Mt(o),seconds:s.range?[0,0]:0}),l=se({get:()=>s.internalModelValue,set:h=>{!s.readonly&&!s.disabled&&e("update:internal-model-value",h)}}),i=se(()=>h=>a.value[h]?a.value[h].month:0),u=se(()=>h=>a.value[h]?a.value[h].year:0);return{calendars:a,time:n,modelValue:l,month:i,year:u}},A8=(s,e)=>{const{defaultedMultiCalendars:o,defaultedHighlight:a}=Ze(e),{isDisabled:n,matchDate:l}=ns(e),i=ce(null),u=ce(Z(Ft(new Date,e.timezone))),h=v=>{!v.current&&e.hideOffsetDates||(i.value=v.value)},p=()=>{i.value=null},w=v=>Array.isArray(s.value)&&e.range&&s.value[0]&&i.value?v?lt(i.value,s.value[0]):nt(i.value,s.value[0]):!0,_=(v,m)=>{const A=()=>s.value?m?s.value[0]||null:s.value[1]:null,B=s.value&&Array.isArray(s.value)?A():null;return Re(Z(v.value),B)},F=v=>{const m=Array.isArray(s.value)?s.value[0]:null;return v?!nt(i.value??null,m):!0},D=(v,m=!0)=>(e.range||e.weekPicker)&&Array.isArray(s.value)&&s.value.length===2?e.hideOffsetDates&&!v.current?!1:Re(Z(v.value),s.value[m?0:1]):e.range?_(v,m)&&F(m)||Re(v.value,Array.isArray(s.value)?s.value[0]:null)&&w(m):!1,O=(v,m,A)=>Array.isArray(s.value)&&s.value[0]&&s.value.length===1?v?!1:A?lt(s.value[0],m.value):nt(s.value[0],m.value):!1,N=v=>!s.value||e.hideOffsetDates&&!v.current?!1:e.range?e.modelAuto&&Array.isArray(s.value)?Re(v.value,s.value[0]?s.value[0]:u.value):!1:e.multiDates&&Array.isArray(s.value)?s.value.some(m=>Re(m,v.value)):Re(v.value,s.value?s.value:u.value),te=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=Ut(i.value,+e.autoRange),A=Is(Z(i.value),e.timezone,e.weekStart);return e.weekPicker?Re(A[1],Z(v.value)):Re(m,Z(v.value))}return!1}return!1},V=v=>{if(e.autoRange||e.weekPicker){if(i.value){const m=Ut(i.value,+e.autoRange);if(e.hideOffsetDates&&!v.current)return!1;const A=Is(Z(i.value),e.timezone,e.weekStart);return e.weekPicker?lt(v.value,A[0])&&nt(v.value,A[1]):lt(v.value,i.value)&&nt(v.value,m)}return!1}return!1},R=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=Is(Z(i.value),e.timezone,e.weekStart);return e.weekPicker?Re(m[0],v.value):Re(i.value,v.value)}return!1}return!1},oe=v=>Zs(s.value,i.value,v.value),P=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,W=()=>e.modelAuto?ha(e.internalModelValue):!0,H=v=>{if(Array.isArray(s.value)&&s.value.length||e.weekPicker)return!1;const m=e.range?!D(v)&&!D(v,!1):!0;return!n(v.value)&&!N(v)&&!(!v.current&&e.hideOffsetDates)&&m},x=v=>e.range?e.modelAuto?P()&&N(v):!1:N(v),pe=v=>{var m;return a.value?typeof a.value=="function"?a.value(v.value):l(v.value,(m=e.arrMapValues)!=null&&m.highlightedDates?e.arrMapValues.highlightedDates:a.value.dates):!1},ne=v=>{const m=n(v.value);return m&&(typeof a.value=="function"?!a.value(v.value,m):!a.value.options.highlightDisabled)},k=v=>{var m;return typeof a.value=="function"?a.value(v.value):(m=a.value.weekdays)==null?void 0:m.includes(v.value.getDay())},j=v=>(e.range||e.weekPicker)&&(!(o.value.count>0)||v.current)&&W()&&!(!v.current&&e.hideOffsetDates)&&!N(v)?oe(v):!1,X=v=>{const{isRangeStart:m,isRangeEnd:A}=$(v),B=e.range?m||A:!1;return{dp__cell_offset:!v.current,dp__pointer:!e.disabled&&!(!v.current&&e.hideOffsetDates)&&!n(v.value),dp__cell_disabled:n(v.value),dp__cell_highlight:!ne(v)&&(pe(v)||k(v))&&!x(v)&&!B&&!R(v)&&!(j(v)&&e.weekPicker)&&!A,dp__cell_highlight_active:!ne(v)&&(pe(v)||k(v))&&x(v),dp__today:!e.noToday&&Re(v.value,u.value)&&v.current}},re=v=>({dp__active_date:x(v),dp__date_hover:H(v)}),I=v=>({...q(v),...U(v),dp__range_between_week:j(v)&&e.weekPicker}),$=v=>{const m=o.value.count>0?v.current&&D(v)&&W():D(v)&&W(),A=o.value.count>0?v.current&&D(v,!1)&&W():D(v,!1)&&W();return{isRangeStart:m,isRangeEnd:A}},q=v=>{const{isRangeStart:m,isRangeEnd:A}=$(v);return{dp__range_start:m,dp__range_end:A,dp__range_between:j(v)&&!e.weekPicker,dp__date_hover_start:O(H(v),v,!0),dp__date_hover_end:O(H(v),v,!1)}},U=v=>({...q(v),dp__cell_auto_range:V(v),dp__cell_auto_range_start:R(v),dp__cell_auto_range_end:te(v)}),K=v=>e.range?e.autoRange?U(v):e.modelAuto?{...re(v),...q(v)}:q(v):e.weekPicker?I(v):re(v);return{setHoverDate:h,clearHoverDate:p,getDayClassData:v=>e.hideOffsetDates&&!v.current?{}:{...X(v),...K(v),[e.dayClass?e.dayClass(v.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},ns=s=>{const{defaultedFilters:e,defaultedHighlight:o}=Ze(s),a=()=>{if(s.timezone)return s.timezone;if(s.utc)return"UTC"},n=k=>{const j=it(l(Z(k))).toISOString(),[X]=j.split("T");return X},l=k=>s.utc==="preserve"?va(k,a()):Ft(k,a()),i=k=>{var j;const X=s.maxDate?lt(k,l(Z(s.maxDate))):!1,re=s.minDate?nt(k,l(Z(s.minDate))):!1,I=w(l(k),(j=s.arrMapValues)!=null&&j.disabledDates?s.arrMapValues.disabledDates:s.disabledDates),$=e.value.months.map(m=>+m).includes(Ue(k)),q=s.disabledWeekDays.length?s.disabledWeekDays.some(m=>+m===n6(k)):!1,U=F(k),K=Ae(k),v=K<+s.yearRange[0]||K>+s.yearRange[1];return!(X||re||I||$||v||q||U)},u=(k,j)=>nt(...Nt(s.minDate,k,j))||Re(...Nt(s.minDate,k,j)),h=(k,j)=>lt(...Nt(s.maxDate,k,j))||Re(...Nt(s.maxDate,k,j)),p=(k,j,X)=>{let re=!1;return s.maxDate&&X&&h(k,j)&&(re=!0),s.minDate&&!X&&u(k,j)&&(re=!0),re},w=(k,j)=>k?j instanceof Map?!!j.get(n(k)):Array.isArray(j)?j.some(X=>Re(l(Z(X)),k)):j?j(Z(JSON.parse(JSON.stringify(k)))):!1:!0,_=(k,j,X,re)=>{let I=!1;return re?s.minDate&&s.maxDate?I=p(k,j,X):(s.minDate&&u(k,j)||s.maxDate&&h(k,j))&&(I=!0):I=!0,I},F=k=>{var j,X,re,I,$;return Array.isArray(s.allowedDates)&&!((j=s.allowedDates)!=null&&j.length)?!0:(X=s.arrMapValues)!=null&&X.allowedDates?!w(k,(re=s.arrMapValues)==null?void 0:re.allowedDates):(I=s.allowedDates)!=null&&I.length?!(($=s.allowedDates)!=null&&$.some(q=>Re(it(q),l(it(k))))):!1},D=k=>!i(k),O=k=>s.noDisabledRange?!Nn({start:k[0],end:k[1]}).some(j=>D(j)):!0,N=(k,j,X=0)=>{if(Array.isArray(j)&&j[X]){const re=WF(k,j[X]),I=fa(j[X],k),$=I.length===1?0:I.filter(U=>D(U)).length,q=Math.abs(re)-$;if(s.minRange&&s.maxRange)return q>=+s.minRange&&q<=+s.maxRange;if(s.minRange)return q>=+s.minRange;if(s.maxRange)return q<=+s.maxRange}return!0},te=k=>new Map(k.map(j=>[n(j),!0])),V=k=>Array.isArray(k)&&k.length>0,R=()=>{const k={disabledDates:null,allowedDates:null,highlightedDates:null};return V(s.allowedDates)&&(k.allowedDates=te(s.allowedDates)),typeof o.value!="function"&&V(o.value.dates)&&(k.highlightedDates=te(o.value.dates)),V(s.disabledDates)&&(k.disabledDates=te(s.disabledDates)),k},oe=()=>!s.enableTimePicker||s.monthPicker||s.yearPicker||s.ignoreTimeValidation,P=k=>Array.isArray(k)?[k[0]?fo(k[0]):null,k[1]?fo(k[1]):null]:fo(k),W=(k,j,X)=>k.find(re=>+re.hours===Ct(j)&&re.minutes==="*"?!0:+re.minutes===Mt(j)&&+re.hours===Ct(j))&&X,H=(k,j,X)=>{const[re,I]=k,[$,q]=j;return!W(re,$,X)&&!W(I,q,X)&&X},x=(k,j)=>{const X=Array.isArray(j)?j:[j];return Array.isArray(s.disabledTimes)?Array.isArray(s.disabledTimes[0])?H(s.disabledTimes,X,k):!X.some(re=>W(s.disabledTimes,re,k)):k},pe=(k,j)=>{const X=Array.isArray(j)?[Gt(j[0]),j[1]?Gt(j[1]):void 0]:Gt(j),re=!s.disabledTimes(X);return k&&re},ne=(k,j)=>s.disabledTimes?Array.isArray(s.disabledTimes)?x(j,k):pe(j,k):j;return{isDisabled:D,validateDate:i,validateMonthYearInRange:_,isDateRangeAllowed:O,checkMinMaxRange:N,matchDate:w,mapDatesArrToMap:R,isValidTime:k=>{let j=!0;if(!k||oe())return!0;const X=!s.minDate&&!s.maxDate?P(k):k;return(s.maxTime||s.maxDate)&&(j=Sn(s.maxTime,s.maxDate,"max",et(X),j)),(s.minTime||s.minDate)&&(j=Sn(s.minTime,s.minDate,"min",et(X),j)),ne(k,j)}}},Gs=()=>{const s=se(()=>(a,n)=>a==null?void 0:a.includes(n)),e=se(()=>(a,n)=>a.count?a.solo?!0:n===0:!0),o=se(()=>(a,n)=>a.count?a.solo?!0:n===a.count-1:!0);return{hideNavigationButtons:s,showLeftIcon:e,showRightIcon:o}},M8=(s,e,o)=>{const a=ce(0),n=Os({[Jt.timePicker]:!s.enableTimePicker||s.timePicker||s.monthPicker,[Jt.calendar]:!1,[Jt.header]:!1}),l=se(()=>s.monthPicker),i=_=>{var F;if((F=s.flow)!=null&&F.length){if(!_&&l.value)return w();n[_]=!0,Object.keys(n).filter(D=>!n[D]).length||w()}},u=()=>{var _;(_=s.flow)!=null&&_.length&&a.value!==-1&&(a.value+=1,e("flow-step",a.value),w())},h=()=>{a.value=-1},p=(_,F,...D)=>{s.flow[a.value]===_&&o.value&&o.value[F](...D)},w=()=>{p(St.month,"toggleMonthPicker",!0),p(St.year,"toggleYearPicker",!0),p(St.calendar,"toggleTimePicker",!1,!0),p(St.time,"toggleTimePicker",!0,!0);const _=s.flow[a.value];(_===St.hours||_===St.minutes||_===St.seconds)&&p(_,"toggleTimePicker",!0,!0,_)};return{childMount:i,updateFlowStep:u,resetFlow:h,flowStep:a}},Js={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},Tt={...Js,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},j8={key:1,class:"dp__input_wrap"},q8=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],U8={key:2,class:"dp__clear_icon"},z8=tt({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Js},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(s,{expose:e,emit:o}){const a=o,n=s,{defaultedTextInput:l,defaultedAriaLabels:i,defaultedInline:u,defaultedConfig:h,getDefaultPattern:p,getDefaultStartTime:w}=Ze(n),{checkMinMaxRange:_}=ns(n),F=ce(),D=ce(null),O=ce(!1),N=ce(!1),te=se(()=>({dp__pointer:!n.disabled&&!n.readonly&&!l.value.enabled,dp__disabled:n.disabled,dp__input_readonly:!l.value.enabled,dp__input:!0,dp__input_icon_pad:!n.hideInputIcon,dp__input_valid:!!n.state,dp__input_invalid:n.state===!1,dp__input_focus:O.value||n.isMenuOpen,dp__input_reg:!l.value.enabled,[n.inputClassName]:!!n.inputClassName})),V=()=>{a("set-input-date",null),n.autoApply&&(a("set-empty-date"),F.value=null)},R=I=>{const $=w();return i8(I,l.value.format??p(),$??ba({},n.enableSeconds),n.inputValue,N.value)},oe=I=>{const{rangeSeparator:$}=l.value,[q,U]=I.split(`${$}`);if(q){const K=R(q.trim()),v=U?R(U.trim()):null,m=K&&v?[K,v]:[K];_(v,m,0)&&(F.value=K?m:null)}},P=()=>{N.value=!0},W=I=>{if(n.range)oe(I);else if(n.multiDates){const $=I.split(";");F.value=$.map(q=>R(q.trim())).filter(q=>q)}else F.value=R(I)},H=I=>{var $;const q=typeof I=="string"?I:($=I.target)==null?void 0:$.value;q!==""?(l.value.openMenu&&!n.isMenuOpen&&a("open"),W(q),a("set-input-date",F.value)):V(),N.value=!1,a("update:input-value",q)},x=I=>{l.value.enabled?(W(I.target.value),l.value.enterSubmit&&Uo(F.value)&&n.inputValue!==""?(a("set-input-date",F.value,!0),F.value=null):l.value.enterSubmit&&n.inputValue===""&&(F.value=null,a("clear"))):k(I)},pe=I=>{l.value.enabled&&l.value.tabSubmit&&W(I.target.value),l.value.tabSubmit&&Uo(F.value)&&n.inputValue!==""?(a("set-input-date",F.value,!0,!0),F.value=null):l.value.tabSubmit&&n.inputValue===""&&(F.value=null,a("clear",!0))},ne=()=>{var I;O.value=!0,a("focus"),l.value.enabled&&l.value.selectOnFocus&&((I=D.value)==null||I.select())},k=I=>{I.preventDefault(),Qt(I,h.value,!0),l.value.enabled&&l.value.openMenu&&!u.value.input&&!n.isMenuOpen?a("open"):l.value.enabled||a("toggle")},j=()=>{a("real-blur"),O.value=!1,(!n.isMenuOpen||u.value.enabled&&u.value.input)&&a("blur"),n.autoApply&&l.value.enabled&&F.value&&!n.isMenuOpen&&(a("set-input-date",F.value),a("select-date"),F.value=null)},X=I=>{Qt(I,h.value,!0),a("clear")},re=I=>{if(!l.value.enabled){if(I.code==="Tab")return;I.preventDefault()}};return e({focusInput:()=>{var I;(I=D.value)==null||I.focus({preventScroll:!0})},setParsedDate:I=>{F.value=I}}),(I,$)=>{var q;return r(),d("div",{onClick:k},[I.$slots.trigger&&!I.$slots["dp-input"]&&!C(u).enabled?ye(I.$slots,"trigger",{key:0}):c("",!0),!I.$slots.trigger&&(!C(u).enabled||C(u).input)?(r(),d("div",j8,[I.$slots["dp-input"]&&!I.$slots.trigger&&!C(u).enabled?ye(I.$slots,"dp-input",{key:0,value:s.inputValue,isMenuOpen:s.isMenuOpen,onInput:H,onEnter:x,onTab:pe,onClear:X,onBlur:j,onKeypress:re,onPaste:P,openMenu:()=>I.$emit("open"),closeMenu:()=>I.$emit("close"),toggleMenu:()=>I.$emit("toggle")}):c("",!0),I.$slots["dp-input"]?c("",!0):(r(),d("input",{key:1,id:I.uid?`dp-input-${I.uid}`:void 0,ref_key:"inputRef",ref:D,name:I.name,class:M(te.value),inputmode:C(l).enabled?"text":"none",placeholder:I.placeholder,disabled:I.disabled,readonly:I.readonly,required:I.required,value:s.inputValue,autocomplete:I.autocomplete,"aria-label":(q=C(i))==null?void 0:q.input,"aria-disabled":I.disabled||void 0,"aria-invalid":I.state===!1?!0:void 0,onInput:H,onKeydown:[Pe(x,["enter"]),Pe(pe,["tab"]),re],onBlur:j,onFocus:ne,onKeypress:re,onPaste:P},null,42,q8)),t("div",{onClick:$[2]||($[2]=U=>a("toggle"))},[I.$slots["input-icon"]&&!I.hideInputIcon?(r(),d("span",{key:0,class:"dp__input_icon",onClick:$[0]||($[0]=U=>a("toggle"))},[ye(I.$slots,"input-icon")])):c("",!0),!I.$slots["input-icon"]&&!I.hideInputIcon&&!I.$slots["dp-input"]?(r(),J(C(vs),{key:1,class:"dp__input_icon dp__input_icons",onClick:$[1]||($[1]=U=>a("toggle"))})):c("",!0)]),I.$slots["clear-icon"]&&s.inputValue&&I.clearable&&!I.disabled&&!I.readonly?(r(),d("span",U8,[ye(I.$slots,"clear-icon",{clear:X})])):c("",!0),I.clearable&&!I.$slots["clear-icon"]&&s.inputValue&&!I.disabled&&!I.readonly?(r(),J(C(ra),{key:3,class:"dp__clear_icon dp__input_icons",onClick:$[3]||($[3]=De(U=>X(U),["prevent"]))})):c("",!0)])):c("",!0)])}}}),V8=["title"],R8={class:"dp__action_buttons"},Y8=["disabled"],I8=tt({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Tt},emits:["close-picker","select-date","select-now","invalid-select"],setup(s,{emit:e}){const o=e,a=s,{defaultedActionRow:n,defaultedPreviewFormat:l,defaultedMultiCalendars:i,defaultedTextInput:u,defaultedInline:h,getDefaultPattern:p}=Ze(a),{isValidTime:w}=ns(a),{buildMatrix:_}=Kt(),F=ce(null),D=ce(null);rt(()=>{a.arrowNavigation&&_([Je(F),Je(D)],"actionRow")});const O=se(()=>a.range&&!a.partialRange&&a.internalModelValue?a.internalModelValue.length===2:!0),N=se(()=>!te.value||!V.value||!O.value),te=se(()=>!a.enableTimePicker||a.ignoreTimeValidation?!0:w(a.internalModelValue)),V=se(()=>a.monthPicker?a.range&&Array.isArray(a.internalModelValue)?!a.internalModelValue.filter(k=>!pe(k)).length:pe(a.internalModelValue):!0),R=()=>{const k=l.value;return a.timePicker||a.monthPicker,k(et(a.internalModelValue))},oe=()=>{const k=a.internalModelValue;return i.value.count>0?`${P(k[0])} - ${P(k[1])}`:[P(k[0]),P(k[1])]},P=k=>ya(k,l.value,a.formatLocale,u.value.rangeSeparator,a.modelAuto,p()),W=se(()=>!a.internalModelValue||!a.menuMount?"":typeof l.value=="string"?Array.isArray(a.internalModelValue)?a.internalModelValue.length===2&&a.internalModelValue[1]?oe():a.multiDates?a.internalModelValue.map(k=>`${P(k)}`):a.modelAuto?`${P(a.internalModelValue[0])}`:`${P(a.internalModelValue[0])} -`:P(a.internalModelValue):R()),H=()=>a.multiDates?"; ":" - ",x=se(()=>Array.isArray(W.value)?W.value.join(H()):W.value),pe=k=>{if(!a.monthPicker)return!0;let j=!0;const X=Z($t(k));if(a.minDate&&a.maxDate){const re=Z($t(a.minDate)),I=Z($t(a.maxDate));return lt(X,re)&&nt(X,I)||Re(X,re)||Re(X,I)}if(a.minDate){const re=Z($t(a.minDate));j=lt(X,re)||Re(X,re)}if(a.maxDate){const re=Z($t(a.maxDate));j=nt(X,re)||Re(X,re)}return j},ne=()=>{te.value&&V.value&&O.value?o("select-date"):o("invalid-select")};return(k,j)=>(r(),d("div",{class:"dp__action_row",style:ft(s.calendarWidth?{width:`${s.calendarWidth}px`}:{})},[k.$slots["action-row"]?ye(k.$slots,"action-row",Ge(at({key:0},{internalModelValue:k.internalModelValue,disabled:N.value,selectDate:()=>k.$emit("select-date"),closePicker:()=>k.$emit("close-picker")}))):(r(),d(Y,{key:1},[C(n).showPreview?(r(),d("div",{key:0,class:"dp__selection_preview",title:x.value},[k.$slots["action-preview"]?ye(k.$slots,"action-preview",{key:0,value:k.internalModelValue}):c("",!0),k.$slots["action-preview"]?c("",!0):(r(),d(Y,{key:1},[g(b(x.value),1)],64))],8,V8)):c("",!0),t("div",R8,[k.$slots["action-buttons"]?ye(k.$slots,"action-buttons",{key:0,value:k.internalModelValue}):c("",!0),k.$slots["action-buttons"]?c("",!0):(r(),d(Y,{key:1},[!C(h).enabled&&C(n).showCancel?(r(),d("button",{key:0,ref_key:"cancelButtonRef",ref:F,type:"button",class:"dp__action_button dp__action_cancel",onClick:j[0]||(j[0]=X=>k.$emit("close-picker")),onKeydown:[j[1]||(j[1]=Pe(X=>k.$emit("close-picker"),["enter"])),j[2]||(j[2]=Pe(X=>k.$emit("close-picker"),["space"]))]},b(k.cancelText),545)):c("",!0),C(n).showNow?(r(),d("button",{key:1,ref_key:"cancelButtonRef",ref:F,type:"button",class:"dp__action_button dp__action_cancel",onClick:j[3]||(j[3]=X=>k.$emit("select-now")),onKeydown:[j[4]||(j[4]=Pe(X=>k.$emit("select-now"),["enter"])),j[5]||(j[5]=Pe(X=>k.$emit("select-now"),["space"]))]},b(k.nowButtonLabel),545)):c("",!0),C(n).showSelect?(r(),d("button",{key:2,ref_key:"selectButtonRef",ref:D,type:"button",class:"dp__action_button dp__action_select",disabled:N.value,onKeydown:[Pe(ne,["enter"]),Pe(ne,["space"])],onClick:ne},b(k.selectText),41,Y8)):c("",!0)],64))])],64))],4))}}),B8=["onKeydown"],N8={class:"dp__selection_grid_header"},E8=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],Q8=["aria-label"],js=tt({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(s,{expose:e,emit:o}){const{setSelectionGrid:a,buildMultiLevelMatrix:n,setMonthPicker:l}=Kt(),i=o,u=s,{defaultedAriaLabels:h,defaultedTextInput:p,defaultedConfig:w}=Ze(u),{hideNavigationButtons:_}=Gs(),F=ce(!1),D=ce(null),O=ce(null),N=ce([]),te=ce(),V=ce(null),R=ce(0),oe=ce(null);ja(()=>{D.value=null}),rt(()=>{xt().then(()=>j()),u.noOverlayFocus||W(),P(!0)}),zo(()=>P(!1));const P=v=>{var m;u.arrowNavigation&&((m=u.headerRefs)!=null&&m.length?l(v):a(v))},W=()=>{var v;const m=Je(O);m&&(p.value.enabled||(D.value?(v=D.value)==null||v.focus({preventScroll:!0}):m.focus({preventScroll:!0})),F.value=m.clientHeight<m.scrollHeight)},H=se(()=>({dp__overlay:!0,"dp--overlay-absolute":!u.useRelative,"dp--overlay-relative":u.useRelative})),x=se(()=>u.useRelative?{height:`${u.height}px`,width:"260px"}:void 0),pe=se(()=>({dp__overlay_col:!0})),ne=se(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:F.value,dp__button_bottom:u.isLast})),k=se(()=>{var v,m;return{dp__overlay_container:!0,dp__container_flex:((v=u.items)==null?void 0:v.length)<=6,dp__container_block:((m=u.items)==null?void 0:m.length)>6}});Wt(()=>u.items,()=>j(),{deep:!0});const j=()=>{xt().then(()=>{const v=Je(D),m=Je(O),A=Je(V),B=Je(oe),le=A?A.getBoundingClientRect().height:0;m&&(m.getBoundingClientRect().height?R.value=m.getBoundingClientRect().height-le:R.value=w.value.modeHeight-le),v&&B&&(B.scrollTop=v.offsetTop-B.offsetTop-(R.value/2-v.getBoundingClientRect().height)-le)})},X=v=>{v.disabled||i("selected",v.value)},re=()=>{i("toggle"),i("reset-flow")},I=()=>{u.escClose&&re()},$=(v,m,A,B)=>{v&&((m.active||m.value===u.focusValue)&&(D.value=v),u.arrowNavigation&&(Array.isArray(N.value[A])?N.value[A][B]=v:N.value[A]=[v],q()))},q=()=>{var v,m;const A=(v=u.headerRefs)!=null&&v.length?[u.headerRefs].concat(N.value):N.value.concat([u.skipButtonRef?[]:[V.value]]);n(et(A),(m=u.headerRefs)!=null&&m.length?"monthPicker":"selectionGrid")},U=v=>{u.arrowNavigation||Qt(v,w.value,!0)},K=v=>{te.value=v,i("hover-value",v)};return e({focusGrid:W}),(v,m)=>{var A;return r(),d("div",{ref_key:"gridWrapRef",ref:O,class:M(H.value),style:ft(x.value),role:"dialog",tabindex:"0",onKeydown:[Pe(De(I,["prevent"]),["esc"]),m[0]||(m[0]=Pe(De(B=>U(B),["prevent"]),["left"])),m[1]||(m[1]=Pe(De(B=>U(B),["prevent"]),["up"])),m[2]||(m[2]=Pe(De(B=>U(B),["prevent"]),["down"])),m[3]||(m[3]=Pe(De(B=>U(B),["prevent"]),["right"]))]},[t("div",{ref_key:"containerRef",ref:oe,class:M(k.value),role:"grid",style:ft({height:`${R.value}px`})},[t("div",N8,[ye(v.$slots,"header")]),v.$slots.overlay?ye(v.$slots,"overlay",{key:0}):(r(!0),d(Y,{key:1},ee(v.items,(B,le)=>(r(),d("div",{key:le,class:M(["dp__overlay_row",{dp__flex_row:v.items.length>=3}]),role:"row"},[(r(!0),d(Y,null,ee(B,(de,z)=>(r(),d("div",{key:de.value,ref_for:!0,ref:y=>$(y,de,le,z),role:"gridcell",class:M(pe.value),"aria-selected":de.active,"aria-disabled":de.disabled||void 0,tabindex:"0",onClick:y=>X(de),onKeydown:[Pe(De(y=>X(de),["prevent"]),["enter"]),Pe(De(y=>X(de),["prevent"]),["space"])],onMouseover:y=>K(de.value)},[t("div",{class:M(de.className)},[v.$slots.item?ye(v.$slots,"item",{key:0,item:de}):c("",!0),v.$slots.item?c("",!0):(r(),d(Y,{key:1},[g(b(de.text),1)],64))],2)],42,E8))),128))],2))),128))],6),v.$slots["button-icon"]?f((r(),d("button",{key:0,ref_key:"toggleButton",ref:V,type:"button","aria-label":(A=C(h))==null?void 0:A.toggleOverlay,class:M(ne.value),tabindex:"0",onClick:re,onKeydown:[Pe(re,["enter"]),Pe(re,["tab"])]},[ye(v.$slots,"button-icon")],42,Q8)),[[We,!C(_)(v.hideNavigation,v.type)]]):c("",!0)],46,B8)}}}),eo=tt({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(s){const e=s,o=se(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),a=se(()=>({dp__instance_calendar:e.multiCalendars>0}));return(n,l)=>(r(),d("div",{class:M({dp__menu_inner:!n.stretch,"dp--menu--inner-stretched":n.stretch,dp__flex_display:n.multiCalendars>0})},[(r(!0),d(Y,null,ee(o.value,(i,u)=>(r(),d("div",{key:i,class:M(a.value)},[ye(n.$slots,"default",{instance:i,index:u})],2))),128))],2))}}),L8=["aria-label","aria-disabled"],Cs=tt({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(s,{emit:e}){const o=e,a=ce(null);return rt(()=>o("set-ref",a)),(n,l)=>(r(),d("button",{ref_key:"elRef",ref:a,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":n.ariaLabel,"aria-disabled":n.disabled||void 0,onClick:l[0]||(l[0]=i=>n.$emit("activate")),onKeydown:[l[1]||(l[1]=Pe(De(i=>n.$emit("activate"),["prevent"]),["enter"])),l[2]||(l[2]=Pe(De(i=>n.$emit("activate"),["prevent"]),["space"]))]},[t("span",{class:M(["dp__inner_nav",{dp__inner_nav_disabled:n.disabled}])},[ye(n.$slots,"default")],2)],40,L8))}}),x8={class:"dp--year-mode-picker"},W8=["aria-label"],wa=tt({__name:"YearModePicker",props:{...Tt,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(s,{emit:e}){const o=e,a=s,{showRightIcon:n,showLeftIcon:l}=Gs(),{defaultedConfig:i,defaultedMultiCalendars:u,defaultedAriaLabels:h,defaultedTransitions:p}=Ze(a),{showTransition:w,transitionName:_}=As(p),F=(N=!1,te)=>{o("toggle-year-picker",{flow:N,show:te})},D=N=>{o("year-select",N)},O=(N=!1)=>{o("handle-year",N)};return(N,te)=>{var V,R,oe;return r(),d("div",x8,[C(l)(C(u),s.instance)?(r(),J(Cs,{key:0,ref:"mpPrevIconRef","aria-label":(V=C(h))==null?void 0:V.prevYear,disabled:s.isDisabled(!1),onActivate:te[0]||(te[0]=P=>O(!1))},{default:S(()=>[N.$slots["arrow-left"]?ye(N.$slots,"arrow-left",{key:0}):c("",!0),N.$slots["arrow-left"]?c("",!0):(r(),J(C(Lo),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),t("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(R=C(h))==null?void 0:R.openYearsOverlay,onClick:te[1]||(te[1]=()=>F(!1)),onKeydown:te[2]||(te[2]=Pe(()=>F(!1),["enter"]))},[N.$slots.year?ye(N.$slots,"year",{key:0,year:s.year}):c("",!0),N.$slots.year?c("",!0):(r(),d(Y,{key:1},[g(b(s.year),1)],64))],40,W8),C(n)(C(u),s.instance)?(r(),J(Cs,{key:1,ref:"mpNextIconRef","aria-label":(oe=C(h))==null?void 0:oe.nextYear,disabled:s.isDisabled(!0),onActivate:te[3]||(te[3]=P=>O(!0))},{default:S(()=>[N.$slots["arrow-right"]?ye(N.$slots,"arrow-right",{key:0}):c("",!0),N.$slots["arrow-right"]?c("",!0):(r(),J(C(xo),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),L(_s,{name:C(_)(s.showYearPicker),css:C(w)},{default:S(()=>[s.showYearPicker?(r(),J(js,{key:0,items:s.items,"text-input":N.textInput,"esc-close":N.escClose,config:N.config,"is-last":N.autoApply&&!C(i).keepActionRow,"hide-navigation":N.hideNavigation,type:"year",onToggle:F,onSelected:te[4]||(te[4]=P=>D(P))},mt({"button-icon":S(()=>[N.$slots["calendar-icon"]?ye(N.$slots,"calendar-icon",{key:0}):c("",!0),N.$slots["calendar-icon"]?c("",!0):(r(),J(C(vs),{key:1}))]),_:2},[N.$slots["year-overlay-value"]?{name:"item",fn:S(({item:P})=>[ye(N.$slots,"year-overlay-value",{text:P.text,value:P.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):c("",!0)]),_:3},8,["name","css"])])}}}),tn=(s,e,o)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(a=>Re(s,a))){const a=e.value.filter(n=>!Re(n,s));e.value=a.length?a:null}else(o&&+o>e.value.length||!o)&&e.value.push(s);else e.value=[s]},sn=(s,e,o)=>{let a=s.value?s.value.slice():[];return a.length===2&&a[1]!==null&&(a=[]),a.length?nt(e,a[0])?(a.unshift(e),o("range-start",a[0]),o("range-start",a[1])):(a[1]=e,o("range-end",e)):(a=[e],o("range-start",e)),s.value=a,a},to=(s,e,o,a)=>{s[0]&&s[1]&&o&&e("auto-apply"),s[0]&&!s[1]&&a&&o&&e("auto-apply")},Ca=s=>{Array.isArray(s.value)&&s.value.length<=2&&s.range?s.modelValue.value=s.value.map(e=>Ft(Z(e),s.timezone)):Array.isArray(s.value)||(s.modelValue.value=Ft(Z(s.value),s.timezone))},Fa=({multiCalendars:s,highlight:e,calendars:o,modelValue:a,props:n,year:l,month:i,emit:u})=>{const h=se(()=>Jo(n.yearRange,n.reverseYears)),p=ce([!1]),w=se(()=>(P,W)=>{const H=Qe($t(new Date),{month:i.value(P),year:l.value(P)});return ga(H,n.maxDate,n.minDate,n.preventMinMaxNavigation,W)}),_=()=>{for(let P=0;P<s.value.count;P++)if(P===0)o.value[P]=o.value[0];else{const W=Qe(Z(),o.value[P-1]);o.value[P]={month:Ue(W),year:Ae(Vo(W,1))}}},F=P=>{if(!P)return _();const W=Qe(Z(),o.value[P]);return o.value[0].year=Ae(ia(W,s.value.count-1)),_()},D=P=>n.focusStartDate?P[0]:P[1]?P[1]:P[0],O=()=>{if(a.value){const P=Array.isArray(a.value)?D(a.value):a.value;o.value[0]={month:Ue(P),year:Ae(P)}}};rt(()=>{O(),s.value.count&&_()});const N=(P,W)=>{o.value[W].year=P,s.value.count&&!s.value.solo&&F(W)},te=se(()=>P=>hs(h.value,W=>{const H=l.value(P)===W.value,x=Ps(W.value,ps(n.minDate),ps(n.maxDate)),pe=en(e.value,W.value);return{active:H,disabled:x,highlighted:pe}})),V=(P,W)=>{N(P,W),oe(W)},R=(P,W=!1)=>{if(!w.value(P,W)){const H=W?l.value(P)+1:l.value(P)-1;N(H,P)}},oe=(P,W=!1,H)=>{W||u("reset-flow"),H!==void 0?p.value[P]=H:p.value[P]=!p.value[P],p.value||u("overlay-closed")};return{isDisabled:w,groupedYears:te,showYearPicker:p,selectYear:N,toggleYearPicker:oe,handleYearSelect:V,handleYear:R}},H8=(s,e)=>{const{defaultedMultiCalendars:o,defaultedAriaLabels:a,defaultedTransitions:n,defaultedConfig:l,defaultedHighlight:i}=Ze(s),{modelValue:u,year:h,month:p,calendars:w}=Ms(s,e),_=se(()=>ma(s.formatLocale,s.locale,s.monthNameFormat)),F=ce(null),{selectYear:D,groupedYears:O,showYearPicker:N,toggleYearPicker:te,handleYearSelect:V,handleYear:R,isDisabled:oe}=Fa({modelValue:u,multiCalendars:o,highlight:i,calendars:w,year:h,month:p,props:s,emit:e});rt(()=>{s.startDate&&(u.value&&s.focusStartDate||!u.value)&&D(Ae(Z(s.startDate)),0)});const P=U=>U?{month:Ue(U),year:Ae(U)}:{month:null,year:null},W=()=>u.value?Array.isArray(u.value)?u.value.map(U=>P(U)):P(u.value):P(),H=(U,K)=>{const v=w.value[U],m=W();return Array.isArray(m)?m.some(A=>A.year===(v==null?void 0:v.year)&&A.month===K):(v==null?void 0:v.year)===m.year&&K===m.month},x=(U,K,v)=>{var m,A;const B=W();return Array.isArray(B)?h.value(K)===((m=B[v])==null?void 0:m.year)&&U===((A=B[v])==null?void 0:A.month):!1},pe=(U,K)=>{if(s.range){const v=W();if(Array.isArray(u.value)&&Array.isArray(v)){const m=x(U,K,0)||x(U,K,1),A=zt($t(Z()),U,h.value(K));return Zs(u.value,F.value,A)&&!m}return!1}return!1},ne=se(()=>U=>hs(_.value,K=>{const v=H(U,K.value),m=Ps(K.value,pa(h.value(U),s.minDate),_a(h.value(U),s.maxDate))||p8(s.disabledDates,h.value(U)).includes(K.value),A=pe(K.value,U),B=$a(i.value,K.value,h.value(U));return{active:v,disabled:m,isBetween:A,highlighted:B}})),k=(U,K)=>zt($t(Z()),U,h.value(K)),j=(U,K)=>{const v=u.value?u.value:$t(new Date);u.value=zt(v,U,h.value(K)),e("auto-apply")},X=(U,K)=>{const v=sn(u,k(U,K),e);to(v,e,s.autoApply,s.modelAuto)},re=(U,K)=>{tn(k(U,K),u,s.multiDatesLimit),e("auto-apply",!0)},I=(U,K)=>(w.value[K].month=U,q(K,w.value[K].year,U),s.multiDates?re(U,K):s.range?X(U,K):j(U,K)),$=(U,K)=>{D(U,K),q(K,U,null)},q=(U,K,v)=>{let m=v;if(!m&&m!==0){const A=W();m=Array.isArray(A)?A[U].month:A.month}e("update-month-year",{instance:U,year:K,month:m})};return{groupedMonths:ne,groupedYears:O,year:h,isDisabled:oe,defaultedMultiCalendars:o,defaultedAriaLabels:a,defaultedTransitions:n,defaultedConfig:l,showYearPicker:N,modelValue:u,presetDate:(U,K)=>{Ca({value:U,modelValue:u,range:s.range,timezone:K?void 0:s.timezone}),e("auto-apply")},setHoverDate:(U,K)=>{F.value=k(U,K)},selectMonth:I,selectYear:$,toggleYearPicker:te,handleYearSelect:V,handleYear:R,getModelMonthYear:W}},K8=tt({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Tt},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(s,{expose:e,emit:o}){const a=o,n=os(),l=pt(n,"yearMode"),i=s;rt(()=>{i.shadow||a("mount",null)});const{groupedMonths:u,groupedYears:h,year:p,isDisabled:w,defaultedMultiCalendars:_,defaultedConfig:F,showYearPicker:D,modelValue:O,presetDate:N,setHoverDate:te,selectMonth:V,selectYear:R,toggleYearPicker:oe,handleYearSelect:P,handleYear:W,getModelMonthYear:H}=H8(i,a);return e({getSidebarProps:()=>({modelValue:O,year:p,getModelMonthYear:H,selectMonth:V,selectYear:R,handleYear:W}),presetDate:N,toggleYearPicker:x=>oe(0,x)}),(x,pe)=>(r(),J(eo,{"multi-calendars":C(_).count,stretch:""},{default:S(({instance:ne})=>[x.$slots["month-year"]?ye(x.$slots,"month-year",Ge(at({key:0},{year:C(p),months:C(u)(ne),years:C(h)(ne),selectMonth:C(V),selectYear:C(R),instance:ne}))):(r(),J(js,{key:1,items:C(u)(ne),"arrow-navigation":x.arrowNavigation,"is-last":x.autoApply&&!C(F).keepActionRow,"esc-close":x.escClose,height:C(F).modeHeight,config:x.config,"no-overlay-focus":!!(x.noOverlayFocus||x.textInput),"use-relative":"",type:"month",onSelected:k=>C(V)(k,ne),onHoverValue:k=>C(te)(k,ne)},{header:S(()=>[L(wa,at(x.$props,{items:C(h)(ne),instance:ne,"show-year-picker":C(D)[ne],year:C(p)(ne),"is-disabled":k=>C(w)(ne,k),onHandleYear:k=>C(W)(ne,k),onYearSelect:k=>C(P)(k,ne),onToggleYearPicker:k=>C(oe)(ne,k==null?void 0:k.flow,k==null?void 0:k.show)}),mt({_:2},[ee(C(l),(k,j)=>({name:k,fn:S(X=>[ye(x.$slots,k,Ge(ct(X)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),X8=(s,e)=>{const{modelValue:o}=Ms(s,e),a=ce(null),{defaultedHighlight:n,defaultedFilters:l}=Ze(s),i=ce();rt(()=>{s.startDate&&(o.value&&s.focusStartDate||!o.value)&&(i.value=Ae(Z(s.startDate)))});const u=_=>Array.isArray(o.value)?o.value.some(F=>Ae(F)===_):o.value?Ae(o.value)===_:!1,h=_=>s.range&&Array.isArray(o.value)?Zs(o.value,a.value,w(_)):!1,p=se(()=>hs(Jo(s.yearRange,s.reverseYears),_=>{const F=u(_.value),D=Ps(_.value,ps(s.minDate),ps(s.maxDate))||l.value.years.includes(_.value),O=h(_.value)&&!F,N=en(n.value,_.value);return{active:F,disabled:D,isBetween:O,highlighted:N}})),w=_=>At($t(new Date),_);return{groupedYears:p,modelValue:o,focusYear:i,setHoverValue:_=>{a.value=At($t(new Date),_)},selectYear:_=>{var F;if(s.multiDates)return o.value?Array.isArray(o.value)&&(((F=o.value)==null?void 0:F.map(D=>Ae(D))).includes(_)?o.value=o.value.filter(D=>Ae(D)!==_):o.value.push(At(it(Z()),_))):o.value=[At(it(Z()),_)],e("auto-apply",!0);if(s.range){const D=sn(o,w(_),e);return to(D,e,s.autoApply,s.modelAuto)}o.value=w(_),e("auto-apply")}}},Z8=tt({compatConfig:{MODE:3},__name:"YearPicker",props:{...Tt},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(s,{expose:e,emit:o}){const a=o,n=s,{groupedYears:l,modelValue:i,focusYear:u,selectYear:h,setHoverValue:p}=X8(n,a),{defaultedConfig:w}=Ze(n);return e({getSidebarProps:()=>({modelValue:i,selectYear:h})}),(_,F)=>(r(),d("div",null,[_.$slots["month-year"]?ye(_.$slots,"month-year",Ge(at({key:0},{years:C(l),selectYear:C(h)}))):(r(),J(js,{key:1,items:C(l),"is-last":_.autoApply&&!C(w).keepActionRow,height:C(w).modeHeight,config:_.config,"no-overlay-focus":!!(_.noOverlayFocus||_.textInput),"focus-value":C(u),type:"year","use-relative":"",onSelected:C(h),onHoverValue:C(p)},mt({_:2},[_.$slots["year-overlay-value"]?{name:"item",fn:S(({item:D})=>[ye(_.$slots,"year-overlay-value",{text:D.text,value:D.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),G8={key:0,class:"dp__time_input"},J8=["aria-label","onKeydown","onClick"],eD=t("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),tD=t("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),sD=["aria-label","disabled","onKeydown","onClick"],oD=["aria-label","onKeydown","onClick"],nD=t("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),aD=t("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),lD={key:0},iD=["aria-label","onKeydown"],rD=tt({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Tt},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(s,{expose:e,emit:o}){const a=o,n=s,{setTimePickerElements:l,setTimePickerBackRef:i}=Kt(),{defaultedAriaLabels:u,defaultedTransitions:h,defaultedFilters:p,defaultedConfig:w}=Ze(n),{transitionName:_,showTransition:F}=As(h),D=Os({hours:!1,minutes:!1,seconds:!1}),O=ce("AM"),N=ce(null),te=ce([]);rt(()=>{a("mounted")});const V=y=>Qe(new Date,{hours:y.hours,minutes:y.minutes,seconds:n.enableSeconds?y.seconds:0,milliseconds:0}),R=se(()=>y=>I(y,n[y])||P(y,n[y])),oe=se(()=>({hours:n.hours,minutes:n.minutes,seconds:n.seconds})),P=(y,fe)=>n.range&&!n.disableTimeRangeValidation?!n.validateTime(y,fe):!1,W=(y,fe)=>{if(n.range&&!n.disableTimeRangeValidation){const be=fe?+n[`${y}Increment`]:-+n[`${y}Increment`],G=n[y]+be;return!n.validateTime(y,G)}return!1},H=se(()=>y=>!q(+n[y]+ +n[`${y}Increment`],y)||W(y,!0)),x=se(()=>y=>!q(+n[y]-+n[`${y}Increment`],y)||W(y,!1)),pe=(y,fe)=>In(Qe(Z(),y),fe),ne=(y,fe)=>FT(Qe(Z(),y),fe),k=se(()=>({dp__time_col:!0,dp__time_col_block:!n.timePickerInline,dp__time_col_reg_block:!n.enableSeconds&&n.is24&&!n.timePickerInline,dp__time_col_reg_inline:!n.enableSeconds&&n.is24&&n.timePickerInline,dp__time_col_reg_with_button:!n.enableSeconds&&!n.is24,dp__time_col_sec:n.enableSeconds&&n.is24,dp__time_col_sec_with_button:n.enableSeconds&&!n.is24})),j=se(()=>{const y=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return n.enableSeconds?y.concat([{type:"",separator:!0},{type:"seconds"}]):y}),X=se(()=>j.value.filter(y=>!y.separator)),re=se(()=>y=>{if(y==="hours"){const fe=A(+n.hours);return{text:fe<10?`0${fe}`:`${fe}`,value:fe}}return{text:n[y]<10?`0${n[y]}`:`${n[y]}`,value:n[y]}}),I=(y,fe)=>{var be;if(!n.disabledTimesConfig)return!1;const G=n.disabledTimesConfig(n.order,y==="hours"?fe:void 0);return G[y]?!!((be=G[y])!=null&&be.includes(fe)):!0},$=y=>{const fe=n.is24?24:12,be=y==="hours"?fe:60,G=+n[`${y}GridIncrement`],Fe=y==="hours"&&!n.is24?G:0,ge=[];for(let Q=Fe;Q<be;Q+=G)ge.push({value:Q,text:Q<10?`0${Q}`:`${Q}`});return y==="hours"&&!n.is24&&ge.push({value:0,text:"12"}),hs(ge,Q=>({active:!1,disabled:p.value.times[y].includes(Q.value)||!q(Q.value,y)||I(y,Q.value)||P(y,Q.value)}))},q=(y,fe)=>{const be=n.minTime?V(po(n.minTime)):null,G=n.maxTime?V(po(n.maxTime)):null,Fe=V(po(oe.value,fe,y));return be&&G?(Ss(Fe,G)||ds(Fe,G))&&(Ds(Fe,be)||ds(Fe,be)):be?Ds(Fe,be)||ds(Fe,be):G?Ss(Fe,G)||ds(Fe,G):!0},U=y=>n[`no${y[0].toUpperCase()+y.slice(1)}Overlay`],K=y=>{U(y)||(D[y]=!D[y],D[y]||a("overlay-closed"))},v=y=>y==="hours"?Ct:y==="minutes"?Mt:cs,m=(y,fe=!0)=>{const be=fe?pe:ne,G=fe?+n[`${y}Increment`]:-+n[`${y}Increment`];q(+n[y]+G,y)&&a(`update:${y}`,v(y)(be({[y]:+n[y]},{[y]:+n[`${y}Increment`]})))},A=y=>n.is24?y:(y>=12?O.value="PM":O.value="AM",e8(y)),B=()=>{O.value==="PM"?(O.value="AM",a("update:hours",n.hours-12)):(O.value="PM",a("update:hours",n.hours+12)),a("am-pm-change",O.value)},le=y=>{D[y]=!0},de=(y,fe,be)=>{if(y&&n.arrowNavigation){Array.isArray(te.value[fe])?te.value[fe][be]=y:te.value[fe]=[y];const G=te.value.reduce((Fe,ge)=>ge.map((Q,ie)=>[...Fe[ie]||[],ge[ie]]),[]);i(n.closeTimePickerBtn),N.value&&(G[1]=G[1].concat(N.value)),l(G,n.order)}},z=(y,fe)=>(K(y),y==="hours"&&!n.is24?a(`update:${y}`,O.value==="PM"?fe+12:fe):a(`update:${y}`,fe));return e({openChildCmp:le}),(y,fe)=>{var be;return y.disabled?c("",!0):(r(),d("div",G8,[(r(!0),d(Y,null,ee(j.value,(G,Fe)=>{var ge,Q,ie;return r(),d("div",{key:Fe,class:M(k.value)},[G.separator?(r(),d(Y,{key:0},[g(" : ")],64)):(r(),d(Y,{key:1},[t("button",{ref_for:!0,ref:Se=>de(Se,Fe,0),type:"button",class:M({dp__btn:!0,dp__inc_dec_button:!y.timePickerInline,dp__inc_dec_button_inline:y.timePickerInline,dp__tp_inline_btn_top:y.timePickerInline,dp__inc_dec_button_disabled:H.value(G.type)}),"aria-label":(ge=C(u))==null?void 0:ge.incrementValue(G.type),tabindex:"0",onKeydown:[Pe(De(Se=>m(G.type),["prevent"]),["enter"]),Pe(De(Se=>m(G.type),["prevent"]),["space"])],onClick:Se=>m(G.type)},[n.timePickerInline?(r(),d(Y,{key:1},[eD,tD],64)):(r(),d(Y,{key:0},[y.$slots["arrow-up"]?ye(y.$slots,"arrow-up",{key:0}):c("",!0),y.$slots["arrow-up"]?c("",!0):(r(),J(C(Ho),{key:1}))],64))],42,J8),t("button",{ref_for:!0,ref:Se=>de(Se,Fe,1),type:"button","aria-label":(Q=C(u))==null?void 0:Q.openTpOverlay(G.type),class:M({dp__time_display:!0,dp__time_display_block:!y.timePickerInline,dp__time_display_inline:y.timePickerInline,"dp--time-invalid":R.value(G.type),"dp--time-overlay-btn":!R.value(G.type)}),disabled:U(G.type),tabindex:"0",onKeydown:[Pe(De(Se=>K(G.type),["prevent"]),["enter"]),Pe(De(Se=>K(G.type),["prevent"]),["space"])],onClick:Se=>K(G.type)},[y.$slots[G.type]?ye(y.$slots,G.type,{key:0,text:re.value(G.type).text,value:re.value(G.type).value}):c("",!0),y.$slots[G.type]?c("",!0):(r(),d(Y,{key:1},[g(b(re.value(G.type).text),1)],64))],42,sD),t("button",{ref_for:!0,ref:Se=>de(Se,Fe,2),type:"button",class:M({dp__btn:!0,dp__inc_dec_button:!y.timePickerInline,dp__inc_dec_button_inline:y.timePickerInline,dp__tp_inline_btn_bottom:y.timePickerInline,dp__inc_dec_button_disabled:x.value(G.type)}),"aria-label":(ie=C(u))==null?void 0:ie.decrementValue(G.type),tabindex:"0",onKeydown:[Pe(De(Se=>m(G.type,!1),["prevent"]),["enter"]),Pe(De(Se=>m(G.type,!1),["prevent"]),["space"])],onClick:Se=>m(G.type,!1)},[n.timePickerInline?(r(),d(Y,{key:1},[nD,aD],64)):(r(),d(Y,{key:0},[y.$slots["arrow-down"]?ye(y.$slots,"arrow-down",{key:0}):c("",!0),y.$slots["arrow-down"]?c("",!0):(r(),J(C(Ko),{key:1}))],64))],42,oD)],64))],2)}),128)),y.is24?c("",!0):(r(),d("div",lD,[y.$slots["am-pm-button"]?ye(y.$slots,"am-pm-button",{key:0,toggle:B,value:O.value}):c("",!0),y.$slots["am-pm-button"]?c("",!0):(r(),d("button",{key:1,ref_key:"amPmButton",ref:N,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(be=C(u))==null?void 0:be.amPmButton,tabindex:"0",onClick:B,onKeydown:[Pe(De(B,["prevent"]),["enter"]),Pe(De(B,["prevent"]),["space"])]},b(O.value),41,iD))])),(r(!0),d(Y,null,ee(X.value,(G,Fe)=>(r(),J(_s,{key:Fe,name:C(_)(D[G.type]),css:C(F)},{default:S(()=>[D[G.type]?(r(),J(js,{key:0,items:$(G.type),"is-last":y.autoApply&&!C(w).keepActionRow,"esc-close":y.escClose,type:G.type,"text-input":y.textInput,config:y.config,"arrow-navigation":y.arrowNavigation,onSelected:ge=>z(G.type,ge),onToggle:ge=>K(G.type),onResetFlow:fe[0]||(fe[0]=ge=>y.$emit("reset-flow"))},mt({"button-icon":S(()=>[y.$slots["clock-icon"]?ye(y.$slots,"clock-icon",{key:0}):c("",!0),y.$slots["clock-icon"]?c("",!0):(r(),J(Fs(y.timePickerInline?C(vs):C(Wo)),{key:1}))]),_:2},[y.$slots[`${G.type}-overlay-value`]?{name:"item",fn:S(({item:ge})=>[ye(y.$slots,`${G.type}-overlay-value`,{text:ge.text,value:ge.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),dD={class:"dp--tp-wrap"},uD=["aria-label","tabindex"],cD=["tabindex"],mD=["aria-label"],Ta=tt({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Tt},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(s,{expose:e,emit:o}){const a=o,n=s,{buildMatrix:l,setTimePicker:i}=Kt(),u=os(),{defaultedTransitions:h,defaultedAriaLabels:p,defaultedTextInput:w,defaultedConfig:_}=Ze(n),{transitionName:F,showTransition:D}=As(h),{hideNavigationButtons:O}=Gs(),N=ce(null),te=ce(null),V=ce([]),R=ce(null);rt(()=>{a("mount"),!n.timePicker&&n.arrowNavigation?l([Je(N.value)],"time"):i(!0,n.timePicker)});const oe=se(()=>n.range&&n.modelAuto?ha(n.internalModelValue):!0),P=ce(!1),W=$=>({hours:Array.isArray(n.hours)?n.hours[$]:n.hours,minutes:Array.isArray(n.minutes)?n.minutes[$]:n.minutes,seconds:Array.isArray(n.seconds)?n.seconds[$]:n.seconds}),H=se(()=>{const $=[];if(n.range)for(let q=0;q<2;q++)$.push(W(q));else $.push(W(0));return $}),x=($,q=!1,U="")=>{q||a("reset-flow"),P.value=$,a($?"overlay-opened":"overlay-closed"),n.arrowNavigation&&i($),xt(()=>{U!==""&&V.value[0]&&V.value[0].openChildCmp(U)})},pe=se(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:n.autoApply&&!_.value.keepActionRow})),ne=pt(u,"timePicker"),k=($,q,U)=>n.range?q===0?[$,H.value[1][U]]:[H.value[0][U],$]:$,j=$=>{a("update:hours",$)},X=$=>{a("update:minutes",$)},re=$=>{a("update:seconds",$)},I=()=>{if(R.value&&!w.value.enabled&&!n.noOverlayFocus){const $=s8(R.value);$&&$.focus({preventScroll:!0})}};return e({toggleTimePicker:x}),($,q)=>{var U;return r(),d("div",dD,[!$.timePicker&&!$.timePickerInline?f((r(),d("button",{key:0,ref_key:"openTimePickerBtn",ref:N,type:"button",class:M(pe.value),"aria-label":(U=C(p))==null?void 0:U.openTimePicker,tabindex:$.noOverlayFocus?void 0:0,onKeydown:[q[0]||(q[0]=Pe(K=>x(!0),["enter"])),q[1]||(q[1]=Pe(K=>x(!0),["space"]))],onClick:q[2]||(q[2]=K=>x(!0))},[$.$slots["clock-icon"]?ye($.$slots,"clock-icon",{key:0}):c("",!0),$.$slots["clock-icon"]?c("",!0):(r(),J(C(Wo),{key:1}))],42,uD)),[[We,!C(O)($.hideNavigation,"time")]]):c("",!0),L(_s,{name:C(F)(P.value),css:C(D)&&!$.timePickerInline},{default:S(()=>{var K;return[P.value||$.timePicker||$.timePickerInline?(r(),d("div",{key:0,ref_key:"overlayRef",ref:R,class:M({dp__overlay:!$.timePickerInline,"dp--overlay-absolute":!n.timePicker&&!$.timePickerInline,"dp--overlay-relative":n.timePicker}),style:ft($.timePicker?{height:`${C(_).modeHeight}px`}:void 0),tabindex:$.timePickerInline?void 0:0},[t("div",{class:M($.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[$.$slots["time-picker-overlay"]?ye($.$slots,"time-picker-overlay",{key:0,hours:s.hours,minutes:s.minutes,seconds:s.seconds,setHours:j,setMinutes:X,setSeconds:re}):c("",!0),$.$slots["time-picker-overlay"]?c("",!0):(r(),d("div",{key:1,class:M($.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(r(!0),d(Y,null,ee(H.value,(v,m)=>f((r(),J(rD,at({key:m},{...$.$props,order:m,hours:v.hours,minutes:v.minutes,seconds:v.seconds,closeTimePickerBtn:te.value,disabledTimesConfig:s.disabledTimesConfig,disabled:m===0?$.fixedStart:$.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:V,"validate-time":(A,B)=>s.validateTime(A,k(B,m,A)),"onUpdate:hours":A=>j(k(A,m,"hours")),"onUpdate:minutes":A=>X(k(A,m,"minutes")),"onUpdate:seconds":A=>re(k(A,m,"seconds")),onMounted:I,onOverlayClosed:I,onAmPmChange:q[3]||(q[3]=A=>$.$emit("am-pm-change",A))}),mt({_:2},[ee(C(ne),(A,B)=>({name:A,fn:S(le=>[ye($.$slots,A,Ge(ct(le)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[We,m===0?!0:oe.value]])),128))],2)),!$.timePicker&&!$.timePickerInline?f((r(),d("button",{key:2,ref_key:"closeTimePickerBtn",ref:te,type:"button",class:M(pe.value),"aria-label":(K=C(p))==null?void 0:K.closeTimePicker,tabindex:"0",onKeydown:[q[4]||(q[4]=Pe(v=>x(!1),["enter"])),q[5]||(q[5]=Pe(v=>x(!1),["space"]))],onClick:q[6]||(q[6]=v=>x(!1))},[$.$slots["calendar-icon"]?ye($.$slots,"calendar-icon",{key:0}):c("",!0),$.$slots["calendar-icon"]?c("",!0):(r(),J(C(vs),{key:1}))],42,mD)),[[We,!C(O)($.hideNavigation,"time")]]):c("",!0)],2)],14,cD)):c("",!0)]}),_:3},8,["name","css"])])}}}),Da=(s,e,o,a)=>{const n=(V,R)=>Array.isArray(e[V])?e[V][R]:e[V],l=V=>s.enableSeconds?Array.isArray(e.seconds)?e.seconds[V]:e.seconds:0,i=(V,R)=>V?R!==void 0?Lt(V,n("hours",R),n("minutes",R),l(R)):Lt(V,e.hours,e.minutes,l()):Qo(Z(),l(R)),u=(V,R)=>{e[V]=R},h=(V,R)=>{const oe=Object.fromEntries(Object.keys(e).map(P=>P===V?[P,R]:[P,e[P]].slice()));if(s.range&&!s.disableTimeRangeValidation){const P=H=>o.value?Lt(o.value[H],oe.hours[H],oe.minutes[H],oe.seconds[H]):null,W=H=>Eo(o.value[H],0);return!(Re(P(0),P(1))&&(Ds(P(0),W(1))||Ss(P(1),W(0))))}return!0},p=(V,R)=>{h(V,R)&&(u(V,R),a&&a())},w=V=>{p("hours",V)},_=V=>{p("minutes",V)},F=V=>{p("seconds",V)},D=(V,R,oe,P)=>{R&&w(V),!R&&!oe&&_(V),oe&&F(V),o.value&&P(o.value)},O=V=>{if(V){const R=Array.isArray(V),oe=R?[+V[0].hours,+V[1].hours]:+V.hours,P=R?[+V[0].minutes,+V[1].minutes]:+V.minutes,W=R?[+V[0].seconds,+V[1].seconds]:+V.seconds;u("hours",oe),u("minutes",P),s.enableSeconds&&u("seconds",W)}},N=(V,R)=>{const oe={hours:Array.isArray(e.hours)?e.hours[V]:e.hours,disabledArr:[]};return(R||R===0)&&(oe.hours=R),Array.isArray(s.disabledTimes)&&(oe.disabledArr=s.range&&Array.isArray(s.disabledTimes[V])?s.disabledTimes[V]:s.disabledTimes),oe},te=se(()=>(V,R)=>{var oe;if(Array.isArray(s.disabledTimes)){const{disabledArr:P,hours:W}=N(V,R),H=P.filter(x=>+x.hours===W);return((oe=H[0])==null?void 0:oe.minutes)==="*"?{hours:[W],minutes:void 0,seconds:void 0}:{hours:[],minutes:(H==null?void 0:H.map(x=>+x.minutes))??[],seconds:(H==null?void 0:H.map(x=>x.seconds?+x.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:w,updateMinutes:_,updateSeconds:F,getSetDateTime:i,updateTimeValues:D,getSecondsValue:l,assignStartTime:O,validateTime:h,disabledTimesConfig:te}},hD=(s,e)=>{const{modelValue:o,time:a}=Ms(s,e),{defaultedStartTime:n}=Ze(s),{updateTimeValues:l,getSetDateTime:i,setTime:u,assignStartTime:h,disabledTimesConfig:p,validateTime:w}=Da(s,a,o),_=R=>{const{hours:oe,minutes:P,seconds:W}=R;return{hours:+oe,minutes:+P,seconds:W?+W:0}},F=()=>{if(s.startTime){if(Array.isArray(s.startTime)){const oe=_(s.startTime[0]),P=_(s.startTime[1]);return[Qe(Z(),oe),Qe(Z(),P)]}const R=_(s.startTime);return Qe(Z(),R)}return s.range?[null,null]:null},D=()=>{if(s.range){const[R,oe]=F();o.value=[i(R,0),i(oe,1)]}else o.value=i(F())},O=R=>Array.isArray(R)?[Gt(Z(R[0])),Gt(Z(R[1]))]:[Gt(R??Z())],N=(R,oe,P)=>{u("hours",R),u("minutes",oe),u("seconds",s.enableSeconds?P:0)},te=()=>{const[R,oe]=O(o.value);return s.range?N([R.hours,oe.hours],[R.minutes,oe.minutes],[R.seconds,oe.minutes]):N(R.hours,R.minutes,R.seconds)};rt(()=>{if(!s.shadow)return h(n.value),o.value?te():D()});const V=()=>{Array.isArray(o.value)?o.value=o.value.map((R,oe)=>R&&i(R,oe)):o.value=i(o.value),e("time-update")};return{modelValue:o,time:a,disabledTimesConfig:p,updateTime:(R,oe=!0,P=!1)=>{l(R,oe,P,V)},validateTime:w}},pD=tt({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Tt},emits:["update:internal-model-value","time-update","am-pm-change"],setup(s,{expose:e,emit:o}){const a=o,n=s,l=os(),i=pt(l,"timePicker"),{time:u,modelValue:h,disabledTimesConfig:p,updateTime:w,validateTime:_}=hD(n,a);return e({getSidebarProps:()=>({modelValue:h,time:u,updateTime:w})}),(F,D)=>(r(),J(eo,{"multi-calendars":0,stretch:""},{default:S(()=>[L(Ta,at(F.$props,{hours:C(u).hours,minutes:C(u).minutes,seconds:C(u).seconds,"internal-model-value":F.internalModelValue,"disabled-times-config":C(p),"validate-time":C(_),"onUpdate:hours":D[0]||(D[0]=O=>C(w)(O)),"onUpdate:minutes":D[1]||(D[1]=O=>C(w)(O,!1)),"onUpdate:seconds":D[2]||(D[2]=O=>C(w)(O,!1,!0)),onAmPmChange:D[3]||(D[3]=O=>F.$emit("am-pm-change",O))}),mt({_:2},[ee(C(i),(O,N)=>({name:O,fn:S(te=>[ye(F.$slots,O,Ge(ct(te)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),_D={class:"dp__month_year_row"},vD=["aria-label","onClick","onKeydown"],fD=tt({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Tt},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(s,{expose:e,emit:o}){const a=o,n=s,{defaultedTransitions:l,defaultedAriaLabels:i,defaultedMultiCalendars:u,defaultedFilters:h,defaultedConfig:p,defaultedHighlight:w}=Ze(n),{transitionName:_,showTransition:F}=As(l),{buildMatrix:D}=Kt(),{handleMonthYearChange:O,isDisabled:N,updateMonthYear:te}=D8(n,a),{showLeftIcon:V,showRightIcon:R}=Gs(),oe=ce(!1),P=ce(!1),W=ce([null,null,null,null]);rt(()=>{a("mount")});const H=m=>({get:()=>n[m],set:A=>{const B=m===yt.month?yt.year:yt.month;a("update-month-year",{[m]:A,[B]:n[B]}),m===yt.month?I(!0):$(!0)}}),x=se(H(yt.month)),pe=se(H(yt.year)),ne=se(()=>m=>({month:n.month,year:n.year,items:m===yt.month?n.months:n.years,instance:n.instance,updateMonthYear:te,toggle:m===yt.month?I:$})),k=se(()=>n.months.find(A=>A.value===n.month)||{text:"",value:0}),j=se(()=>hs(n.months,m=>{const A=n.month===m.value,B=Ps(m.value,pa(n.year,n.minDate),_a(n.year,n.maxDate))||h.value.months.includes(m.value),le=$a(w.value,m.value,n.year);return{active:A,disabled:B,highlighted:le}})),X=se(()=>hs(n.years,m=>{const A=n.year===m.value,B=Ps(m.value,ps(n.minDate),ps(n.maxDate))||h.value.years.includes(m.value),le=en(w.value,m.value);return{active:A,disabled:B,highlighted:le}})),re=(m,A)=>{A!==void 0?m.value=A:m.value=!m.value,m.value||a("overlay-closed")},I=(m=!1,A)=>{q(m),re(oe,A)},$=(m=!1,A)=>{q(m),re(P,A)},q=m=>{m||a("reset-flow")},U=(m,A)=>{n.arrowNavigation&&(W.value[A]=Je(m),D(W.value,"monthYear"))},K=se(()=>{var m,A;return[{type:yt.month,index:1,toggle:I,modelValue:x.value,updateModelValue:B=>x.value=B,text:k.value.text,showSelectionGrid:oe.value,items:j.value,ariaLabel:(m=i.value)==null?void 0:m.openMonthsOverlay},{type:yt.year,index:2,toggle:$,modelValue:pe.value,updateModelValue:B=>pe.value=B,text:n.year,showSelectionGrid:P.value,items:X.value,ariaLabel:(A=i.value)==null?void 0:A.openYearsOverlay}]}),v=se(()=>n.disableYearSelect?[K.value[0]]:n.yearFirst?[...K.value].reverse():K.value);return e({toggleMonthPicker:I,toggleYearPicker:$,handleMonthYearChange:O}),(m,A)=>{var B,le,de;return r(),d("div",_D,[m.$slots["month-year"]?ye(m.$slots,"month-year",Ge(at({key:0},{month:s.month,year:s.year,months:s.months,years:s.years,updateMonthYear:C(te),handleMonthYearChange:C(O),instance:s.instance}))):(r(),d(Y,{key:1},[C(V)(C(u),s.instance)&&!m.vertical?(r(),J(Cs,{key:0,"aria-label":(B=C(i))==null?void 0:B.prevMonth,disabled:C(N)(!1),onActivate:A[0]||(A[0]=z=>C(O)(!1,!0)),onSetRef:A[1]||(A[1]=z=>U(z,0))},{default:S(()=>[m.$slots["arrow-left"]?ye(m.$slots,"arrow-left",{key:0}):c("",!0),m.$slots["arrow-left"]?c("",!0):(r(),J(C(Lo),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),t("div",{class:M(["dp__month_year_wrap",{dp__year_disable_select:m.disableYearSelect}])},[(r(!0),d(Y,null,ee(v.value,(z,y)=>(r(),d(Y,{key:z.type},[t("button",{ref_for:!0,ref:fe=>U(fe,y+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":z.ariaLabel,onClick:z.toggle,onKeydown:[Pe(De(z.toggle,["prevent"]),["enter"]),Pe(De(z.toggle,["prevent"]),["space"])]},[m.$slots[z.type]?ye(m.$slots,z.type,{key:0,text:z.text,value:n[z.type]}):c("",!0),m.$slots[z.type]?c("",!0):(r(),d(Y,{key:1},[g(b(z.text),1)],64))],40,vD),L(_s,{name:C(_)(z.showSelectionGrid),css:C(F)},{default:S(()=>[z.showSelectionGrid?(r(),J(js,{key:0,items:z.items,"arrow-navigation":m.arrowNavigation,"hide-navigation":m.hideNavigation,"is-last":m.autoApply&&!C(p).keepActionRow,"skip-button-ref":!1,config:m.config,type:z.type,"header-refs":[],"esc-close":m.escClose,"text-input":m.textInput,onSelected:z.updateModelValue,onToggle:z.toggle},mt({"button-icon":S(()=>[m.$slots["calendar-icon"]?ye(m.$slots,"calendar-icon",{key:0}):c("",!0),m.$slots["calendar-icon"]?c("",!0):(r(),J(C(vs),{key:1}))]),_:2},[m.$slots[`${z.type}-overlay-value`]?{name:"item",fn:S(({item:fe})=>[ye(m.$slots,`${z.type}-overlay-value`,{text:fe.text,value:fe.value})]),key:"0"}:void 0,m.$slots[`${z.type}-overlay`]?{name:"overlay",fn:S(()=>[ye(m.$slots,`${z.type}-overlay`,Ge(ct(ne.value(z.type))))]),key:"1"}:void 0,m.$slots[`${z.type}-overlay-header`]?{name:"header",fn:S(()=>[ye(m.$slots,`${z.type}-overlay-header`,{toggle:z.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"])],64))),128))],2),C(V)(C(u),s.instance)&&m.vertical?(r(),J(Cs,{key:1,"aria-label":(le=C(i))==null?void 0:le.prevMonth,disabled:C(N)(!1),onActivate:A[2]||(A[2]=z=>C(O)(!1,!0))},{default:S(()=>[m.$slots["arrow-up"]?ye(m.$slots,"arrow-up",{key:0}):c("",!0),m.$slots["arrow-up"]?c("",!0):(r(),J(C(Ho),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),C(R)(C(u),s.instance)?(r(),J(Cs,{key:2,ref:"rightIcon",disabled:C(N)(!0),"aria-label":(de=C(i))==null?void 0:de.nextMonth,onActivate:A[3]||(A[3]=z=>C(O)(!0,!0)),onSetRef:A[4]||(A[4]=z=>U(z,m.disableYearSelect?2:3))},{default:S(()=>[m.$slots[m.vertical?"arrow-down":"arrow-right"]?ye(m.$slots,m.vertical?"arrow-down":"arrow-right",{key:0}):c("",!0),m.$slots[m.vertical?"arrow-down":"arrow-right"]?c("",!0):(r(),J(Fs(m.vertical?C(Ko):C(xo)),{key:1}))]),_:3},8,["disabled","aria-label"])):c("",!0)],64))])}}}),bD=["aria-label"],gD={class:"dp__calendar_header",role:"row"},yD={key:0,class:"dp__calendar_header_item",role:"gridcell"},$D=t("div",{class:"dp__calendar_header_separator"},null,-1),kD=["aria-label"],wD={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},CD={class:"dp__cell_inner"},FD=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],TD=tt({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Tt},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(s,{expose:e,emit:o}){const a=o,n=s,{buildMultiLevelMatrix:l}=Kt(),{defaultedTransitions:i,defaultedConfig:u,defaultedAriaLabels:h,defaultedMultiCalendars:p,defaultedWeekNumbers:w}=Ze(n),_=ce(null),F=ce({bottom:"",left:"",transform:""}),D=ce([]),O=ce(null),N=ce(!0),te=ce(""),V=ce({startX:0,endX:0,startY:0,endY:0}),R=ce([]),oe=ce({left:"50%"}),P=se(()=>n.calendar?n.calendar(n.mappedDates):n.mappedDates),W=se(()=>n.dayNames?Array.isArray(n.dayNames)?n.dayNames:n.dayNames(n.locale,+n.weekStart):JT(n.formatLocale,n.locale,+n.weekStart));rt(()=>{a("mount",{cmp:"calendar",refs:D}),u.value.noSwipe||O.value&&(O.value.addEventListener("touchstart",$,{passive:!1}),O.value.addEventListener("touchend",q,{passive:!1}),O.value.addEventListener("touchmove",U,{passive:!1})),n.monthChangeOnScroll&&O.value&&O.value.addEventListener("wheel",m,{passive:!1})});const H=z=>z?n.vertical?"vNext":"next":n.vertical?"vPrevious":"previous",x=(z,y)=>{if(n.transitions){const fe=it(zt(Z(),n.month,n.year));te.value=lt(it(zt(Z(),z,y)),fe)?i.value[H(!0)]:i.value[H(!1)],N.value=!1,xt(()=>{N.value=!0})}},pe=se(()=>({[n.calendarClassName]:!!n.calendarClassName})),ne=se(()=>z=>{const y=t8(z);return{dp__marker_dot:y.type==="dot",dp__marker_line:y.type==="line"}}),k=se(()=>z=>Re(z,_.value)),j=se(()=>({dp__calendar:!0,dp__calendar_next:p.value.count>0&&n.instance!==0})),X=se(()=>z=>n.hideOffsetDates?z.current:!0),re=async(z,y,fe)=>{var be,G;if(a("set-hover-date",z),(G=(be=z.marker)==null?void 0:be.tooltip)!=null&&G.length){const Fe=Je(D.value[y][fe]);if(Fe){const{width:ge,height:Q}=Fe.getBoundingClientRect();_.value=z.value;let ie={left:`${ge/2}px`},Se=-50;if(await xt(),R.value[0]){const{left:ue,width:Be}=R.value[0].getBoundingClientRect();ue<0&&(ie={left:"0"},Se=0,oe.value.left=`${ge/2}px`),window.innerWidth<ue+Be&&(ie={right:"0"},Se=0,oe.value.left=`${Be-ge/2}px`)}F.value={bottom:`${Q}px`,...ie,transform:`translateX(${Se}%)`},a("tooltip-open",z.marker)}}},I=z=>{_.value&&(_.value=null,F.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),a("tooltip-close",z.marker))},$=z=>{V.value.startX=z.changedTouches[0].screenX,V.value.startY=z.changedTouches[0].screenY},q=z=>{V.value.endX=z.changedTouches[0].screenX,V.value.endY=z.changedTouches[0].screenY,K()},U=z=>{n.vertical&&!n.inline&&z.preventDefault()},K=()=>{const z=n.vertical?"Y":"X";Math.abs(V.value[`start${z}`]-V.value[`end${z}`])>10&&a("handle-swipe",V.value[`start${z}`]>V.value[`end${z}`]?"right":"left")},v=(z,y,fe)=>{z&&(Array.isArray(D.value[y])?D.value[y][fe]=z:D.value[y]=[z]),n.arrowNavigation&&l(D.value,"calendar")},m=z=>{n.monthChangeOnScroll&&(z.preventDefault(),a("handle-scroll",z))},A=z=>w.value.type==="local"?c6(z.value,{weekStartsOn:+n.weekStart}):w.value.type==="iso"?i6(z.value):typeof w.value.type=="function"?w.value.type(z.value):"",B=z=>{const y=z[0];return w.value.hideOnOffsetDates?z.some(fe=>fe.current)?A(y):"":A(y)},le=(z,y)=>{Qt(z,u.value),a("select-date",y)},de=z=>{Qt(z,u.value)};return e({triggerTransition:x}),(z,y)=>{var fe;return r(),d("div",{class:M(j.value)},[t("div",{ref_key:"calendarWrapRef",ref:O,role:"grid",class:M(pe.value),"aria-label":(fe=C(h))==null?void 0:fe.calendarWrap},[(r(),d(Y,{key:0},[t("div",gD,[z.weekNumbers?(r(),d("div",yD,b(z.weekNumName),1)):c("",!0),(r(!0),d(Y,null,ee(W.value,(be,G)=>(r(),d("div",{key:G,class:"dp__calendar_header_item",role:"gridcell"},[z.$slots["calendar-header"]?ye(z.$slots,"calendar-header",{key:0,day:be,index:G}):c("",!0),z.$slots["calendar-header"]?c("",!0):(r(),d(Y,{key:1},[g(b(be),1)],64))]))),128))]),$D,L(_s,{name:te.value,css:!!z.transitions},{default:S(()=>{var be;return[N.value?(r(),d("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((be=C(h))==null?void 0:be.calendarDays)||void 0},[(r(!0),d(Y,null,ee(P.value,(G,Fe)=>(r(),d("div",{key:Fe,class:"dp__calendar_row",role:"row"},[z.weekNumbers?(r(),d("div",wD,[t("div",CD,b(B(G.days)),1)])):c("",!0),(r(!0),d(Y,null,ee(G.days,(ge,Q)=>{var ie,Se,ue;return r(),d("div",{id:ge.value.toISOString().split("T")[0],ref_for:!0,ref:Be=>v(Be,Fe,Q),key:Q+Fe,role:"gridcell",class:"dp__calendar_item","aria-selected":ge.classData.dp__active_date||ge.classData.dp__range_start||ge.classData.dp__range_start,"aria-disabled":ge.classData.dp__cell_disabled||void 0,"aria-label":(Se=(ie=C(h))==null?void 0:ie.day)==null?void 0:Se.call(ie,ge),tabindex:"0",onClick:De(Be=>le(Be,ge),["prevent"]),onKeydown:[Pe(Be=>z.$emit("select-date",ge),["enter"]),Pe(Be=>z.$emit("handle-space",ge),["space"])],onMouseenter:Be=>re(ge,Fe,Q),onMouseleave:Be=>I(ge)},[t("div",{class:M(["dp__cell_inner",ge.classData])},[z.$slots.day&&X.value(ge)?ye(z.$slots,"day",{key:0,day:+ge.text,date:ge.value}):c("",!0),z.$slots.day?c("",!0):(r(),d(Y,{key:1},[g(b(ge.text),1)],64)),ge.marker&&X.value(ge)?(r(),d(Y,{key:2},[z.$slots.marker?ye(z.$slots,"marker",{key:0,marker:ge.marker,day:+ge.text,date:ge.value}):(r(),d("div",{key:1,class:M(ne.value(ge.marker)),style:ft(ge.marker.color?{backgroundColor:ge.marker.color}:{})},null,6))],64)):c("",!0),k.value(ge.value)?(r(),d("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:R,class:"dp__marker_tooltip",style:ft(F.value)},[(ue=ge.marker)!=null&&ue.tooltip?(r(),d("div",{key:0,class:"dp__tooltip_content",onClick:de},[(r(!0),d(Y,null,ee(ge.marker.tooltip,(Be,ht)=>(r(),d("div",{key:ht,class:"dp__tooltip_text"},[z.$slots["marker-tooltip"]?ye(z.$slots,"marker-tooltip",{key:0,tooltip:Be,day:ge.value}):c("",!0),z.$slots["marker-tooltip"]?c("",!0):(r(),d(Y,{key:1},[t("div",{class:"dp__tooltip_mark",style:ft(Be.color?{backgroundColor:Be.color}:{})},null,4),t("div",null,b(Be.text),1)],64))]))),128)),t("div",{class:"dp__arrow_bottom_tp",style:ft(oe.value)},null,4)])):c("",!0)],4)):c("",!0)],2)],40,FD)}),128))]))),128))],8,kD)):c("",!0)]}),_:3},8,["name","css"])],64))],10,bD)],2)}}}),An=s=>Array.isArray(s),DD=(s,e,o,a)=>{const n=ce([]),{modelValue:l,calendars:i,time:u}=Ms(s,e),{defaultedMultiCalendars:h,defaultedStartTime:p}=Ze(s),{validateMonthYearInRange:w,isDisabled:_,isDateRangeAllowed:F,checkMinMaxRange:D}=ns(s),{updateTimeValues:O,getSetDateTime:N,setTime:te,assignStartTime:V,validateTime:R,disabledTimesConfig:oe}=Da(s,u,l,a),P=se(()=>T=>i.value[T]?i.value[T].month:0),W=se(()=>T=>i.value[T]?i.value[T].year:0),H=(T,ae,Ce)=>{var Me,Le;i.value[T]||(i.value[T]={month:0,year:0}),i.value[T].month=Tn(ae)?(Me=i.value[T])==null?void 0:Me.month:ae,i.value[T].year=Tn(Ce)?(Le=i.value[T])==null?void 0:Le.year:Ce},x=()=>{s.autoApply&&e("select-date")};Wt(l,(T,ae)=>{JSON.stringify(T)!==JSON.stringify(ae)&&k()}),rt(()=>{s.shadow||(l.value||(m(),p.value&&V(p.value)),k(!0),s.focusStartDate&&s.startDate&&m())});const pe=se(()=>{var T;return(T=s.flow)!=null&&T.length&&!s.partialFlow?s.flowStep===s.flow.length:!0}),ne=()=>{s.autoApply&&pe.value&&e("auto-apply",s.partialFlow)},k=(T=!1)=>{if(l.value)return Array.isArray(l.value)?(n.value=l.value,q(T)):X(l.value,T);if(h.value.count&&T&&!s.startDate)return j(Z(),T)},j=(T,ae=!1)=>{if((!h.value.count||!h.value.static||ae)&&H(0,Ue(T),Ae(T)),h.value.count&&(!h.value.solo||!l.value))for(let Ce=1;Ce<h.value.count;Ce++){const Me=Qe(Z(),{month:P.value(Ce-1),year:W.value(Ce-1)}),Le=In(Me,{months:1});i.value[Ce]={month:Ue(Le),year:Ae(Le)}}},X=(T,ae)=>{j(T),te("hours",Ct(T)),te("minutes",Mt(T)),te("seconds",cs(T)),h.value.count&&ae&&v()},re=T=>{if(h.value.count){if(h.value.solo)return 0;const ae=Ue(T[0]),Ce=Ue(T[1]);return Math.abs(Ce-ae)<h.value.count?0:1}return 1},I=(T,ae)=>{T[1]&&s.showLastInRange?j(T[re(T)],ae):j(T[0],ae);const Ce=(Me,Le)=>[Me(T[0]),T[1]?Me(T[1]):u[Le][1]];te("hours",Ce(Ct,"hours")),te("minutes",Ce(Mt,"minutes")),te("seconds",Ce(cs,"seconds"))},$=(T,ae)=>{if((s.range||s.weekPicker)&&!s.multiDates)return I(T,ae);if(s.multiDates&&ae){const Ce=T[T.length-1];return X(Ce,ae)}},q=T=>{const ae=l.value;$(ae,T),h.value.count&&h.value.solo&&v()},U=(T,ae)=>{const Ce=Qe(Z(),{month:P.value(ae),year:W.value(ae)}),Me=T<0?wt(Ce,1):ms(Ce,1);w(Ue(Me),Ae(Me),T<0,s.preventMinMaxNavigation)&&(H(ae,Ue(Me),Ae(Me)),e("update-month-year",{instance:ae,month:Ue(Me),year:Ae(Me)}),h.value.count&&!h.value.solo&&K(ae),o())},K=T=>{for(let ae=T-1;ae>=0;ae--){const Ce=ms(Qe(Z(),{month:P.value(ae+1),year:W.value(ae+1)}),1);H(ae,Ue(Ce),Ae(Ce))}for(let ae=T+1;ae<=h.value.count-1;ae++){const Ce=wt(Qe(Z(),{month:P.value(ae-1),year:W.value(ae-1)}),1);H(ae,Ue(Ce),Ae(Ce))}},v=()=>{if(Array.isArray(l.value)&&l.value.length===2){const T=Z(Z(l.value[1]?l.value[1]:wt(l.value[0],1))),[ae,Ce]=[Ue(l.value[0]),Ae(l.value[0])],[Me,Le]=[Ue(l.value[1]),Ae(l.value[1])];(ae!==Me||ae===Me&&Ce!==Le)&&h.value.solo&&H(1,Ue(T),Ae(T))}else l.value&&!Array.isArray(l.value)&&(H(0,Ue(l.value),Ae(l.value)),j(Z()))},m=()=>{s.startDate&&(H(0,Ue(Z(s.startDate)),Ae(Z(s.startDate))),h.value.count&&K(0))},A=l8((T,ae)=>{s.monthChangeOnScroll&&U(s.monthChangeOnScroll!=="inverse"?-T.deltaY:T.deltaY,ae)},50),B=(T,ae,Ce=!1)=>{s.monthChangeOnArrows&&s.vertical===Ce&&le(T,ae)},le=(T,ae)=>{U(T==="right"?-1:1,ae)},de=T=>s.markers.find(ae=>Re(d8(T.value),Ft(Z(ae.date),s.timezone))),z=(T,ae)=>{switch(s.sixWeeks===!0?"append":s.sixWeeks){case"prepend":return[!0,!1];case"center":return[T==0,!0];case"fair":return[T==0||ae>T,!0];case"append":return[!1,!1];default:return[!1,!1]}},y=(T,ae,Ce,Me)=>{if(s.sixWeeks&&T.length<6){const Le=6-T.length,Dt=(ae.getDay()+7-Me)%7,Yt=6-(Ce.getDay()+7-Me)%7,[me,Oe]=z(Dt,Yt);for(let Te=1;Te<=Le;Te++)if(Oe?!!(Te%2)==me:me){const vt=T[0].days[0],qt=fe(Ut(vt.value,-7),Ue(ae));T.unshift({days:qt})}else{const vt=T[T.length-1],qt=vt.days[vt.days.length-1],lo=fe(Ut(qt.value,1),Ue(ae));T.push({days:lo})}}return T},fe=(T,ae)=>{const Ce=Z(T),Me=[];for(let Le=0;Le<7;Le++){const Dt=Ut(Ce,Le),Yt=Ue(Dt)!==ae;Me.push({text:s.hideOffsetDates&&Yt?"":Dt.getDate(),value:Dt,current:!Yt,classData:{}})}return Me},be=(T,ae)=>{const Ce=[],Me=new Date(ae,T),Le=new Date(ae,T+1,0),Dt=s.weekStart,Yt=es(Me,{weekStartsOn:Dt}),me=Oe=>{const Te=fe(Oe,T);if(Ce.push({days:Te}),!Ce[Ce.length-1].days.some(vt=>Re(it(vt.value),it(Le)))){const vt=Ut(Oe,7);me(vt)}};return me(Yt),y(Ce,Me,Le,Dt)},G=T=>(l.value=Is(Z(T.value),s.timezone,s.weekStart),e("date-update",T.value),ne()),Fe=T=>{const ae=Lt(Z(T.value),u.hours,u.minutes,as());e("date-update",ae),s.multiDates?tn(ae,l,s.multiDatesLimit):l.value=ae,a(),xt().then(()=>{ne()})},ge=T=>s.noDisabledRange?fa(n.value[0],T).some(ae=>_(ae)):!1,Q=()=>{n.value=l.value?l.value.slice():[],n.value.length===2&&!(s.fixedStart||s.fixedEnd)&&(n.value=[])},ie=(T,ae)=>{const Ce=[Z(T.value),Ut(Z(T.value),+s.autoRange)];F(Ce)?(ae&&Se(T.value),n.value=Ce):e("invalid-date",T.value)},Se=T=>{const ae=Ue(Z(T)),Ce=Ae(Z(T));if(H(0,ae,Ce),h.value.count>0)for(let Me=1;Me<h.value.count;Me++){const Le=u8(Qe(Z(T),{year:P.value(Me-1),month:W.value(Me-1)}));H(Me,Le.month,Le.year)}},ue=T=>Array.isArray(l.value)&&l.value.length===2?s.fixedStart&&(lt(T,l.value[0])||Re(T,l.value[0]))?[l.value[0],T]:s.fixedEnd&&(nt(T,l.value[1])||Re(T,l.value[1]))?[T,l.value[1]]:(e("invalid-fixed-range",T),l.value):[],Be=T=>{if(ge(T.value)||!D(T.value,l.value,s.fixedStart?0:1))return e("invalid-date",T.value);n.value=ue(Z(T.value))},ht=(T,ae)=>{if(Q(),s.autoRange)return ie(T,ae);if(s.fixedStart||s.fixedEnd)return Be(T);n.value[0]?D(Z(T.value),l.value)&&!ge(T.value)?nt(Z(T.value),Z(n.value[0]))?(n.value.unshift(Z(T.value)),e("range-end",n.value[0])):(n.value[1]=Z(T.value),e("range-end",n.value[1])):(s.autoApply&&e("auto-apply-invalid",T.value),e("invalid-date",T.value)):(n.value[0]=Z(T.value),e("range-start",n.value[0]))},as=(T=!0)=>s.enableSeconds?Array.isArray(u.seconds)?T?u.seconds[0]:u.seconds[1]:u.seconds:0,Rt=T=>{n.value[T]=Lt(n.value[T],u.hours[T],u.minutes[T],as(T!==1))},qs=()=>{var T,ae;n.value[0]&&n.value[1]&&+((T=n.value)==null?void 0:T[0])>+((ae=n.value)==null?void 0:ae[1])&&(n.value.reverse(),e("range-start",n.value[0]),e("range-end",n.value[1]))},Us=()=>{n.value.length&&(n.value[0]&&!n.value[1]?Rt(0):(Rt(0),Rt(1),a()),qs(),l.value=n.value.slice(),to(n.value,e,s.autoApply,s.modelAuto))},oo=(T,ae=!1)=>{if(_(T.value)||!T.current&&s.hideOffsetDates)return e("invalid-date",T.value);if(s.weekPicker)return G(T);if(!s.range)return Fe(T);An(u.hours)&&An(u.minutes)&&!s.multiDates&&(ht(T,ae),Us())},bs=(T,ae)=>{var Ce;H(T,ae.month,ae.year),h.value.count&&!h.value.solo&&K(T),e("update-month-year",{instance:T,month:ae.month,year:ae.year}),o(h.value.solo?T:void 0);const Me=(Ce=s.flow)!=null&&Ce.length?s.flow[s.flowStep]:void 0;!ae.fromNav&&(Me===St.month||Me===St.year)&&a()},_t=(T,ae)=>{Ca({value:T,modelValue:l,range:s.range,timezone:ae?void 0:s.timezone}),x(),s.multiCalendars&&xt().then(()=>k(!0))},no=()=>{s.range?l.value&&Array.isArray(l.value)&&l.value[0]?l.value=nt(Z(),l.value[0])?[Z(),l.value[0]]:[l.value[0],Z()]:l.value=[Z()]:l.value=Z(),x()},ao=()=>{if(Array.isArray(l.value))if(s.multiDates){const T=zs();l.value[l.value.length-1]=N(T)}else l.value=l.value.map((T,ae)=>T&&N(T,ae));else l.value=N(l.value);e("time-update")},zs=()=>Array.isArray(l.value)&&l.value.length?l.value[l.value.length-1]:null;return{calendars:i,modelValue:l,month:P,year:W,time:u,disabledTimesConfig:oe,validateTime:R,getCalendarDays:be,getMarker:de,handleScroll:A,handleSwipe:le,handleArrow:B,selectDate:oo,updateMonthYear:bs,presetDate:_t,selectCurrentDate:no,updateTime:(T,ae=!0,Ce=!1)=>{O(T,ae,Ce,ao)}}},SD={key:0},PD=tt({__name:"DatePicker",props:{...Tt},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(s,{expose:e,emit:o}){const a=o,n=s,{calendars:l,month:i,year:u,modelValue:h,time:p,disabledTimesConfig:w,validateTime:_,getCalendarDays:F,getMarker:D,handleArrow:O,handleScroll:N,handleSwipe:te,selectDate:V,updateMonthYear:R,presetDate:oe,selectCurrentDate:P,updateTime:W}=DD(n,a,v,m),H=os(),{setHoverDate:x,getDayClassData:pe,clearHoverDate:ne}=A8(h,n),{defaultedMultiCalendars:k}=Ze(n),j=ce([]),X=ce([]),re=ce(null),I=pt(H,"calendar"),$=pt(H,"monthYear"),q=pt(H,"timePicker"),U=B=>{n.shadow||a("mount",B)};Wt(l,()=>{n.shadow||setTimeout(()=>{a("recalculate-position")},0)},{deep:!0});const K=se(()=>B=>F(i.value(B),u.value(B)).map(le=>({...le,days:le.days.map(de=>(de.marker=D(de),de.classData=pe(de),de))})));function v(B){var le;B||B===0?(le=X.value[B])==null||le.triggerTransition(i.value(B),u.value(B)):X.value.forEach((de,z)=>de.triggerTransition(i.value(z),u.value(z)))}function m(){a("update-flow-step")}const A=(B,le=!1)=>{V(B,le),n.spaceConfirm&&a("select-date")};return e({clearHoverDate:ne,presetDate:oe,selectCurrentDate:P,toggleMonthPicker:(B,le,de=0)=>{var z;(z=j.value[de])==null||z.toggleMonthPicker(B,le)},toggleYearPicker:(B,le,de=0)=>{var z;(z=j.value[de])==null||z.toggleYearPicker(B,le)},toggleTimePicker:(B,le,de)=>{var z;(z=re.value)==null||z.toggleTimePicker(B,le,de)},handleArrow:O,updateMonthYear:R,getSidebarProps:()=>({modelValue:h,month:i,year:u,time:p,updateTime:W,updateMonthYear:R,selectDate:V,presetDate:oe})}),(B,le)=>(r(),d(Y,null,[L(eo,{"multi-calendars":C(k).count},{default:S(({instance:de,index:z})=>[B.disableMonthYearSelect?c("",!0):(r(),J(fD,at({key:0,ref:y=>{y&&(j.value[z]=y)},months:C(ma)(B.formatLocale,B.locale,B.monthNameFormat),years:C(Jo)(B.yearRange,B.reverseYears),month:C(i)(de),year:C(u)(de),instance:de},B.$props,{onMount:le[0]||(le[0]=y=>U(C(Jt).header)),onResetFlow:le[1]||(le[1]=y=>B.$emit("reset-flow")),onUpdateMonthYear:y=>C(R)(de,y),onOverlayClosed:le[2]||(le[2]=y=>B.$emit("focus-menu"))}),mt({_:2},[ee(C($),(y,fe)=>({name:y,fn:S(be=>[ye(B.$slots,y,Ge(ct(be)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),L(TD,at({ref:y=>{y&&(X.value[z]=y)},"mapped-dates":K.value(de),month:C(i)(de),year:C(u)(de),instance:de},B.$props,{onSelectDate:y=>C(V)(y,de!==1),onHandleSpace:y=>A(y,de!==1),onSetHoverDate:le[3]||(le[3]=y=>C(x)(y)),onHandleScroll:y=>C(N)(y,de),onHandleSwipe:y=>C(te)(y,de),onMount:le[4]||(le[4]=y=>U(C(Jt).calendar)),onResetFlow:le[5]||(le[5]=y=>B.$emit("reset-flow")),onTooltipOpen:le[6]||(le[6]=y=>B.$emit("tooltip-open",y)),onTooltipClose:le[7]||(le[7]=y=>B.$emit("tooltip-close",y))}),mt({_:2},[ee(C(I),(y,fe)=>({name:y,fn:S(be=>[ye(B.$slots,y,Ge(ct({...be})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),B.enableTimePicker?(r(),d("div",SD,[B.$slots["time-picker"]?ye(B.$slots,"time-picker",Ge(at({key:0},{time:C(p),updateTime:C(W)}))):(r(),J(Ta,at({key:1,ref_key:"timePickerRef",ref:re},B.$props,{hours:C(p).hours,minutes:C(p).minutes,seconds:C(p).seconds,"internal-model-value":B.internalModelValue,"disabled-times-config":C(w),"validate-time":C(_),onMount:le[8]||(le[8]=de=>U(C(Jt).timePicker)),"onUpdate:hours":le[9]||(le[9]=de=>C(W)(de)),"onUpdate:minutes":le[10]||(le[10]=de=>C(W)(de,!1)),"onUpdate:seconds":le[11]||(le[11]=de=>C(W)(de,!1,!0)),onResetFlow:le[12]||(le[12]=de=>B.$emit("reset-flow")),onOverlayClosed:le[13]||(le[13]=de=>B.$emit("time-picker-close")),onOverlayOpened:le[14]||(le[14]=de=>B.$emit("time-picker-open",de)),onAmPmChange:le[15]||(le[15]=de=>B.$emit("am-pm-change",de))}),mt({_:2},[ee(C(q),(de,z)=>({name:de,fn:S(y=>[ye(B.$slots,de,Ge(ct(y)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):c("",!0)],64))}}),OD=(s,e)=>{const o=ce(),{defaultedMultiCalendars:a,defaultedConfig:n,defaultedHighlight:l}=Ze(s),{modelValue:i,year:u,month:h,calendars:p}=Ms(s,e),{isDisabled:w}=ns(s),{selectYear:_,groupedYears:F,showYearPicker:D,isDisabled:O,toggleYearPicker:N,handleYearSelect:te,handleYear:V}=Fa({modelValue:i,multiCalendars:a,highlight:l,calendars:p,month:h,year:u,props:s,emit:e}),R=(ne,k)=>[ne,k].map(j=>Et(j,"MMMM",{locale:s.formatLocale})).join("-"),oe=se(()=>ne=>i.value?Array.isArray(i.value)?i.value.some(k=>_n(ne,k)):_n(i.value,ne):!1),P=ne=>{if(s.range){if(Array.isArray(i.value)){const k=Re(ne,i.value[0])||Re(ne,i.value[1]);return Zs(i.value,o.value,ne)&&!k}return!1}return!1},W=se(()=>ne=>{const k=Qe(new Date,{year:u.value(ne)});return XF({start:GF(k),end:ZF(k)}).map(j=>{const X=Ts(j),re=rn(j),I=w(j),$=P(X),q=typeof l.value=="function"?l.value({quarter:ln(X),year:Ae(X)}):!!l.value.quarters.find(U=>U.quarter===ln(X)&&U.year===Ae(X));return{text:R(X,re),value:X,active:oe.value(X),highlighted:q,disabled:I,isBetween:$}})}),H=ne=>{tn(ne,i,s.multiDatesLimit),e("auto-apply",!0)},x=ne=>{const k=sn(i,ne,e);to(k,e,s.autoApply,s.modelAuto)},pe=ne=>{i.value=ne,e("auto-apply")};return{defaultedConfig:n,defaultedMultiCalendars:a,groupedYears:F,year:u,isDisabled:O,quarters:W,showYearPicker:D,modelValue:i,setHoverDate:ne=>{o.value=ne},selectYear:_,selectQuarter:(ne,k,j)=>{if(!j)return p.value[k].month=Ue(rn(ne)),s.multiDates?H(ne):s.range?x(ne):pe(ne)},toggleYearPicker:N,handleYearSelect:te,handleYear:V}},AD={class:"dp--quarter-items"},MD=["disabled","onClick","onMouseover"],jD=tt({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Tt},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(s,{expose:e,emit:o}){const a=o,n=s,l=os(),i=pt(l,"yearMode"),{defaultedMultiCalendars:u,defaultedConfig:h,groupedYears:p,year:w,isDisabled:_,quarters:F,modelValue:D,showYearPicker:O,setHoverDate:N,selectQuarter:te,toggleYearPicker:V,handleYearSelect:R,handleYear:oe}=OD(n,a);return e({getSidebarProps:()=>({modelValue:D,year:w,selectQuarter:te,handleYearSelect:R,handleYear:oe})}),(P,W)=>(r(),J(eo,{"multi-calendars":C(u).count,stretch:""},{default:S(({instance:H})=>[t("div",{class:"dp-quarter-picker-wrap",style:ft({minHeight:`${C(h).modeHeight}px`})},[t("div",null,[L(wa,at(P.$props,{items:C(p)(H),instance:H,"show-year-picker":C(O)[H],year:C(w)(H),"is-disabled":x=>C(_)(H,x),onHandleYear:x=>C(oe)(H,x),onYearSelect:x=>C(R)(x,H),onToggleYearPicker:x=>C(V)(H,x==null?void 0:x.flow,x==null?void 0:x.show)}),mt({_:2},[ee(C(i),(x,pe)=>({name:x,fn:S(ne=>[ye(P.$slots,x,Ge(ct(ne)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),t("div",AD,[(r(!0),d(Y,null,ee(C(F)(H),(x,pe)=>(r(),d("div",{key:pe},[t("button",{type:"button",class:M(["dp--qr-btn",{"dp--qr-btn-active":x.active,"dp--qr-btn-between":x.isBetween,"dp--qr-btn-disabled":x.disabled,"dp--highlighted":x.highlighted}]),disabled:x.disabled,onClick:ne=>C(te)(x.value,H,x.disabled),onMouseover:ne=>C(N)(x.value)},[P.$slots.quarter?ye(P.$slots,"quarter",{key:0,value:x.value,text:x.text}):(r(),d(Y,{key:1},[g(b(x.text),1)],64))],42,MD)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),qD=["id"],UD={key:0,class:"dp__sidebar_left"},zD={key:1,class:"dp--preset-dates"},VD=["onClick","onKeydown"],RD={key:2,class:"dp__sidebar_right"},YD={key:3,class:"dp__action_extra"},Mn=tt({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Js,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(s,{expose:e,emit:o}){const a=o,n=s,l=se(()=>{const{openOnTop:Q,...ie}=n;return{...ie,flowStep:pe.value,noOverlayFocus:n.noOverlayFocus}}),{setMenuFocused:i,setShiftKey:u,control:h}=ka(),p=os(),{defaultedTextInput:w,defaultedInline:_,defaultedConfig:F}=Ze(n),D=ce(null),O=ce(0),N=ce(null),te=ce(null),V=ce(!1),R=ce(null);rt(()=>{if(!n.shadow){V.value=!0,oe(),window.addEventListener("resize",oe);const Q=Je(N);if(Q&&!w.value.enabled&&!_.value.enabled&&(i(!0),re()),Q){const ie=Se=>{F.value.allowPreventDefault&&Se.preventDefault(),Qt(Se,F.value,!0)};Q.addEventListener("pointerdown",ie),Q.addEventListener("mousedown",ie)}}}),zo(()=>{window.removeEventListener("resize",oe)});const oe=()=>{const Q=Je(te);Q&&(O.value=Q.getBoundingClientRect().width)},{arrowRight:P,arrowLeft:W,arrowDown:H,arrowUp:x}=Kt(),{flowStep:pe,updateFlowStep:ne,childMount:k,resetFlow:j}=M8(n,a,R),X=se(()=>n.monthPicker?K8:n.yearPicker?Z8:n.timePicker?pD:n.quarterPicker?jD:PD),re=()=>{const Q=Je(N);Q&&Q.focus({preventScroll:!0})},I=se(()=>{var Q;return((Q=R.value)==null?void 0:Q.getSidebarProps())||{}}),$=()=>{n.openOnTop&&a("recalculate-position")},q=pt(p,"action"),U=se(()=>n.monthPicker||n.yearPicker?pt(p,"monthYear"):n.timePicker?pt(p,"timePicker"):pt(p,"shared")),K=se(()=>n.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),v=se(()=>({dp__menu_disabled:n.disabled,dp__menu_readonly:n.readonly})),m=se(()=>({dp__menu:!0,dp__menu_index:!_.value.enabled,dp__relative:_.value.enabled,[n.menuClassName]:!!n.menuClassName})),A=Q=>{Qt(Q,F.value,!0)},B=()=>{n.escClose&&a("close-picker")},le=Q=>{if(n.arrowNavigation){if(Q==="up")return x();if(Q==="down")return H();if(Q==="left")return W();if(Q==="right")return P()}else Q==="left"||Q==="up"?be("handleArrow","left",0,Q==="up"):be("handleArrow","right",0,Q==="down")},de=Q=>{u(Q.shiftKey),!n.disableMonthYearSelect&&Q.code==="Tab"&&Q.target.classList.contains("dp__menu")&&h.value.shiftKeyInMenu&&(Q.preventDefault(),Qt(Q,F.value,!0),a("close-picker"))},z=()=>{re(),a("time-picker-close")},y=Q=>{var ie,Se,ue;(ie=R.value)==null||ie.toggleTimePicker(!1,!1),(Se=R.value)==null||Se.toggleMonthPicker(!1,!1,Q),(ue=R.value)==null||ue.toggleYearPicker(!1,!1,Q)},fe=(Q,ie=0)=>{var Se,ue,Be;return Q==="month"?(Se=R.value)==null?void 0:Se.toggleMonthPicker(!1,!0,ie):Q==="year"?(ue=R.value)==null?void 0:ue.toggleYearPicker(!1,!0,ie):Q==="time"?(Be=R.value)==null?void 0:Be.toggleTimePicker(!0,!1):y(ie)},be=(Q,...ie)=>{var Se,ue;(Se=R.value)!=null&&Se[Q]&&((ue=R.value)==null||ue[Q](...ie))},G=()=>{be("selectCurrentDate")},Fe=(Q,ie)=>{be("presetDate",Q,ie)},ge=()=>{be("clearHoverDate")};return e({updateMonthYear:(Q,ie)=>{be("updateMonthYear",Q,ie)},switchView:fe}),(Q,ie)=>{var Se;return r(),d("div",{id:Q.uid?`dp-menu-${Q.uid}`:void 0,ref_key:"dpMenuRef",ref:N,tabindex:"0",role:"dialog",class:M(m.value),onMouseleave:ge,onClick:A,onKeydown:[Pe(B,["esc"]),ie[18]||(ie[18]=Pe(De(ue=>le("left"),["prevent"]),["left"])),ie[19]||(ie[19]=Pe(De(ue=>le("up"),["prevent"]),["up"])),ie[20]||(ie[20]=Pe(De(ue=>le("down"),["prevent"]),["down"])),ie[21]||(ie[21]=Pe(De(ue=>le("right"),["prevent"]),["right"])),de]},[(Q.disabled||Q.readonly)&&C(_).enabled?(r(),d("div",{key:0,class:M(v.value)},null,2)):c("",!0),!C(_).enabled&&!Q.teleportCenter?(r(),d("div",{key:1,class:M(K.value)},null,2)):c("",!0),t("div",{ref_key:"innerMenuRef",ref:te,class:M({dp__menu_content_wrapper:((Se=Q.presetDates)==null?void 0:Se.length)||!!Q.$slots["left-sidebar"]||!!Q.$slots["right-sidebar"]}),style:ft({"--dp-menu-width":`${O.value}px`})},[Q.$slots["left-sidebar"]?(r(),d("div",UD,[ye(Q.$slots,"left-sidebar",Ge(ct(I.value)))])):c("",!0),Q.presetDates.length?(r(),d("div",zD,[(r(!0),d(Y,null,ee(Q.presetDates,(ue,Be)=>(r(),d(Y,{key:Be},[ue.slot?ye(Q.$slots,ue.slot,{key:0,presetDate:Fe,label:ue.label,value:ue.value}):(r(),d("button",{key:1,type:"button",style:ft(ue.style||{}),class:"dp__btn dp--preset-range",onClick:De(ht=>Fe(ue.value,ue.noTz),["prevent"]),onKeydown:[Pe(De(ht=>Fe(ue.value,ue.noTz),["prevent"]),["enter"]),Pe(De(ht=>Fe(ue.value,ue.noTz),["prevent"]),["space"])]},b(ue.label),45,VD))],64))),128))])):c("",!0),t("div",{ref_key:"calendarWrapperRef",ref:D,class:"dp__instance_calendar",role:"document"},[(r(),J(Fs(X.value),at({ref_key:"dynCmpRef",ref:R},l.value,{"flow-step":C(pe),onMount:C(k),onUpdateFlowStep:C(ne),onResetFlow:C(j),onFocusMenu:re,onSelectDate:ie[0]||(ie[0]=ue=>Q.$emit("select-date")),onDateUpdate:ie[1]||(ie[1]=ue=>Q.$emit("date-update",ue)),onTooltipOpen:ie[2]||(ie[2]=ue=>Q.$emit("tooltip-open",ue)),onTooltipClose:ie[3]||(ie[3]=ue=>Q.$emit("tooltip-close",ue)),onAutoApply:ie[4]||(ie[4]=ue=>Q.$emit("auto-apply",ue)),onRangeStart:ie[5]||(ie[5]=ue=>Q.$emit("range-start",ue)),onRangeEnd:ie[6]||(ie[6]=ue=>Q.$emit("range-end",ue)),onInvalidFixedRange:ie[7]||(ie[7]=ue=>Q.$emit("invalid-fixed-range",ue)),onTimeUpdate:ie[8]||(ie[8]=ue=>Q.$emit("time-update")),onAmPmChange:ie[9]||(ie[9]=ue=>Q.$emit("am-pm-change",ue)),onTimePickerOpen:ie[10]||(ie[10]=ue=>Q.$emit("time-picker-open",ue)),onTimePickerClose:z,onRecalculatePosition:$,onUpdateMonthYear:ie[11]||(ie[11]=ue=>Q.$emit("update-month-year",ue)),onAutoApplyInvalid:ie[12]||(ie[12]=ue=>Q.$emit("auto-apply-invalid",ue)),onInvalidDate:ie[13]||(ie[13]=ue=>Q.$emit("invalid-date",ue)),"onUpdate:internalModelValue":ie[14]||(ie[14]=ue=>Q.$emit("update:internal-model-value",ue))}),mt({_:2},[ee(U.value,(ue,Be)=>({name:ue,fn:S(ht=>[ye(Q.$slots,ue,Ge(ct({...ht})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),Q.$slots["right-sidebar"]?(r(),d("div",RD,[ye(Q.$slots,"right-sidebar",Ge(ct(I.value)))])):c("",!0),Q.$slots["action-extra"]?(r(),d("div",YD,[Q.$slots["action-extra"]?ye(Q.$slots,"action-extra",{key:0,selectCurrentDate:G}):c("",!0)])):c("",!0)],6),!Q.autoApply||C(F).keepActionRow?(r(),J(I8,at({key:2,"menu-mount":V.value},l.value,{"calendar-width":O.value,onClosePicker:ie[15]||(ie[15]=ue=>Q.$emit("close-picker")),onSelectDate:ie[16]||(ie[16]=ue=>Q.$emit("select-date")),onInvalidSelect:ie[17]||(ie[17]=ue=>Q.$emit("invalid-select")),onSelectNow:G}),mt({_:2},[ee(C(q),(ue,Be)=>({name:ue,fn:S(ht=>[ye(Q.$slots,ue,Ge(ct({...ht})))])}))]),1040,["menu-mount","calendar-width"])):c("",!0)],42,qD)}}}),ID=typeof window<"u"?window:void 0,ko=()=>{},BD=s=>qa()?(Ua(s),!0):!1,ND=(s,e,o,a)=>{if(!s)return ko;let n=ko;const l=Wt(()=>C(s),u=>{n(),u&&(u.addEventListener(e,o,a),n=()=>{u.removeEventListener(e,o,a),n=ko})},{immediate:!0,flush:"post"}),i=()=>{l(),n()};return BD(i),i},ED=(s,e,o,a={})=>{const{window:n=ID,event:l="pointerdown"}=a;return n?ND(n,l,i=>{const u=Je(s),h=Je(e);!u||!h||u===i.target||i.composedPath().includes(u)||i.composedPath().includes(h)||o(i)},{passive:!0}):void 0},QD=tt({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Js},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(s,{expose:e,emit:o}){const a=o,n=s,l=os(),i=ce(!1),u=Ns(n,"modelValue"),h=Ns(n,"timezone"),p=ce(null),w=ce(null),_=ce(null),F=ce(!1),D=ce(null),O=ce(!1),N=ce(!1),{setMenuFocused:te,setShiftKey:V}=ka(),{clearArrowNav:R}=Kt(),{mapDatesArrToMap:oe,validateDate:P,isValidTime:W}=ns(n),{defaultedTransitions:H,defaultedTextInput:x,defaultedInline:pe,defaultedConfig:ne}=Ze(n),{menuTransition:k,showTransition:j}=As(H);rt(()=>{le(n.modelValue),xt().then(()=>{if(!pe.value.enabled){const me=v(D.value);me==null||me.addEventListener("scroll",Q),window==null||window.addEventListener("resize",ie)}}),pe.value.enabled&&(i.value=!0),window==null||window.addEventListener("keyup",Se),window==null||window.addEventListener("keydown",ue)});const X=se(()=>oe());zo(()=>{if(!pe.value.enabled){const me=v(D.value);me==null||me.removeEventListener("scroll",Q),window==null||window.removeEventListener("resize",ie)}window==null||window.removeEventListener("keyup",Se),window==null||window.removeEventListener("keydown",ue)});const re=pt(l,"all",n.presetDates),I=pt(l,"input");Wt([u,h],()=>{le(u.value)},{deep:!0});const{openOnTop:$,menuStyle:q,xCorrect:U,setMenuPosition:K,getScrollableParent:v,shadowRender:m}=S8({menuRef:p,menuRefInner:w,inputRef:_,pickerWrapperRef:D,inline:pe,emit:a,props:n,slots:l}),{inputValue:A,internalModelValue:B,parseExternalModelValue:le,emitModelValue:de,formatInputValue:z,checkBeforeEmit:y}=T8(a,n,F),fe=se(()=>({dp__main:!0,dp__theme_dark:n.dark,dp__theme_light:!n.dark,dp__flex_display:pe.value.enabled,dp__flex_display_with_input:pe.value.input})),be=se(()=>n.dark?"dp__theme_dark":"dp__theme_light"),G=se(()=>({to:typeof n.teleport=="boolean"?"body":n.teleport,disabled:!n.teleport||pe.value.enabled})),Fe=se(()=>({class:"dp__outer_menu_wrap"})),ge=se(()=>pe.value.enabled&&(n.timePicker||n.monthPicker||n.yearPicker||n.quarterPicker)),Q=()=>{i.value&&(ne.value.closeOnScroll?_t():K())},ie=()=>{i.value&&K()},Se=me=>{me.key==="Tab"&&!pe.value.enabled&&!n.teleport&&ne.value.tabOutClosesMenu&&(D.value.contains(document.activeElement)||_t()),N.value=me.shiftKey},ue=me=>{N.value=me.shiftKey},Be=()=>{!n.disabled&&!n.readonly&&(m(Mn,n),K(!1),i.value=!0,i.value&&a("open"),i.value||bs(),le(n.modelValue))},ht=()=>{var me;A.value="",bs(),(me=_.value)==null||me.setParsedDate(null),a("update:model-value",null),a("update:model-timezone-value",null),a("cleared"),ne.value.closeOnClearValue&&_t()},as=()=>{const me=B.value;return!me||!Array.isArray(me)&&P(me)?!0:Array.isArray(me)?n.multiDates||me.length===2&&P(me[0])&&P(me[1])?!0:n.partialRange&&!n.timePicker?P(me[0]):!1:!1},Rt=()=>{y()&&as()?(de(),_t()):a("invalid-select",B.value)},qs=me=>{Us(),de(),ne.value.closeOnAutoApply&&!me&&_t()},Us=()=>{_.value&&x.value.enabled&&_.value.setParsedDate(B.value)},oo=(me=!1)=>{n.autoApply&&W(B.value)&&as()&&(n.range&&Array.isArray(B.value)?(n.partialRange||B.value.length===2)&&qs(me):qs(me))},bs=()=>{x.value.enabled||(B.value=null)},_t=()=>{pe.value.enabled||(i.value&&(i.value=!1,U.value=!1,te(!1),V(!1),R(),a("closed"),A.value&&le(u.value)),bs(),a("blur"))},no=(me,Oe,Te=!1)=>{if(!me){B.value=null;return}const vt=Array.isArray(me)?!me.some(lo=>!P(lo)):P(me),qt=W(me);vt&&qt&&(B.value=me,Oe&&(O.value=Te,Rt(),a("text-submit")))},ao=()=>{n.autoApply&&W(B.value)&&de(),Us()},zs=()=>i.value?_t():Be(),T=me=>{B.value=me},ae=()=>{x.value.enabled&&(F.value=!0,z()),a("focus")},Ce=()=>{if(x.value.enabled&&(F.value=!1,le(n.modelValue),O.value)){const me=a8(D.value,N.value);me==null||me.focus()}a("blur")},Me=me=>{w.value&&w.value.updateMonthYear(0,{month:Fn(me.month),year:Fn(me.year)})},Le=me=>{le(me??n.modelValue)},Dt=(me,Oe)=>{var Te;(Te=w.value)==null||Te.switchView(me,Oe)},Yt=me=>ne.value.onClickOutside?ne.value.onClickOutside(me):_t();return ED(p,_,()=>Yt(as)),e({closeMenu:_t,selectDate:Rt,clearValue:ht,openMenu:Be,onScroll:Q,formatInputValue:z,updateInternalModelValue:T,setMonthYear:Me,parseModel:Le,switchView:Dt,toggleMenu:zs}),(me,Oe)=>(r(),d("div",{ref_key:"pickerWrapperRef",ref:D,class:M(fe.value),"data-datepicker-instance":""},[L(z8,at({ref_key:"inputRef",ref:_,"input-value":C(A),"onUpdate:inputValue":Oe[0]||(Oe[0]=Te=>on(A)?A.value=Te:null),"is-menu-open":i.value},me.$props,{onClear:ht,onOpen:Be,onSetInputDate:no,onSetEmptyDate:C(de),onSelectDate:Rt,onToggle:zs,onClose:_t,onFocus:ae,onBlur:Ce,onRealBlur:Oe[1]||(Oe[1]=Te=>F.value=!1)}),mt({_:2},[ee(C(I),(Te,vt)=>({name:Te,fn:S(qt=>[ye(me.$slots,Te,Ge(ct(qt)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),L(Aa,Ge(ct(G.value)),{default:S(()=>[L(_s,{name:C(k)(C($)),css:C(j)&&!C(pe).enabled},{default:S(()=>[i.value?(r(),d("div",at({key:0,ref_key:"dpWrapMenuRef",ref:p},Fe.value,{class:{"dp--menu-wrapper":!C(pe).enabled},style:C(pe).enabled?void 0:C(q)}),[L(Mn,at({ref_key:"dpMenuRef",ref:w},me.$props,{"internal-model-value":C(B),"onUpdate:internalModelValue":Oe[2]||(Oe[2]=Te=>on(B)?B.value=Te:null),class:{[be.value]:!0,"dp--menu-wrapper":me.teleport},"open-on-top":C($),"arr-map-values":X.value,"no-overlay-focus":ge.value,onClosePicker:_t,onSelectDate:Rt,onAutoApply:oo,onTimeUpdate:ao,onFlowStep:Oe[3]||(Oe[3]=Te=>me.$emit("flow-step",Te)),onUpdateMonthYear:Oe[4]||(Oe[4]=Te=>me.$emit("update-month-year",Te)),onInvalidSelect:Oe[5]||(Oe[5]=Te=>me.$emit("invalid-select",C(B))),onAutoApplyInvalid:Oe[6]||(Oe[6]=Te=>me.$emit("invalid-select",Te)),onInvalidFixedRange:Oe[7]||(Oe[7]=Te=>me.$emit("invalid-fixed-range",Te)),onRecalculatePosition:C(K),onTooltipOpen:Oe[8]||(Oe[8]=Te=>me.$emit("tooltip-open",Te)),onTooltipClose:Oe[9]||(Oe[9]=Te=>me.$emit("tooltip-close",Te)),onTimePickerOpen:Oe[10]||(Oe[10]=Te=>me.$emit("time-picker-open",Te)),onTimePickerClose:Oe[11]||(Oe[11]=Te=>me.$emit("time-picker-close",Te)),onAmPmChange:Oe[12]||(Oe[12]=Te=>me.$emit("am-pm-change",Te)),onRangeStart:Oe[13]||(Oe[13]=Te=>me.$emit("range-start",Te)),onRangeEnd:Oe[14]||(Oe[14]=Te=>me.$emit("range-end",Te)),onDateUpdate:Oe[15]||(Oe[15]=Te=>me.$emit("date-update",Te)),onInvalidDate:Oe[16]||(Oe[16]=Te=>me.$emit("invalid-date",Te))}),mt({_:2},[ee(C(re),(Te,vt)=>({name:Te,fn:S(qt=>[ye(me.$slots,Te,Ge(ct({...qt})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):c("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),fs=(()=>{const s=QD;return s.install=e=>{e.component("Vue3DatePicker",s)},s})(),LD=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"}));Object.entries(LD).forEach(([s,e])=>{s!=="default"&&(fs[s]=e)});const xD={class:"row"},WD={class:"col-md-4"},HD={class:"col-12"},KD={key:0,class:"fa-solid fa-arrow-down-short-wide"},XD={key:1,class:"fa-solid fa-arrow-up-wide-short"},ZD={key:0,class:"fa-solid fa-arrow-down-short-wide"},GD={key:1,class:"fa-solid fa-arrow-up-wide-short"},JD={key:0,class:"fa-solid fa-arrow-down-short-wide"},eS={key:1,class:"fa-solid fa-arrow-up-wide-short"},tS={class:"col-md-4 mb-2"},sS=["onClick"],oS={class:"card-body text-center"},nS={class:"row"},aS={class:"col-md-6"},lS={class:"mb-0"},iS=t("p",{class:"mb-0"},"Начало сеанса",-1),rS={class:"mb-0"},dS=t("p",{class:"mb-0"},"Окончание сеанса",-1),uS={class:"mb-0"},cS={class:"col-md-6"},mS={class:"mb-0"},hS={class:"mb-0"},pS={class:"mb-0"},_S=t("p",{class:"mb-0"},[t("strong",null,"Период")],-1),vS={class:"mb-0"},fS={class:"row"},bS={class:"col-12"},gS={props:["bot","eventId"],components:{VueDatePicker:fs},data(){return{date:null,loading:!0,schedule:[],order:null,direction:null,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginate_object:null}},watch:{date:{handler:function(s){this.loadAppointmentSchedules()},deep:!0}},computed:{...Ne(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"])},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{selectTime(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(s){this.loadAppointmentSchedules(s)},loadAppointmentSchedules(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})}}},Sa=Object.assign(gS,{__name:"AppointmentScheduleList",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",xD,[t("div",WD,[L(C(fs),{modelValue:e.date,"onUpdate:modelValue":o[0]||(o[0]=a=>e.date=a)},null,8,["modelValue"])]),t("div",HD,[t("p",null,[g(" Тип сортировки: "),t("a",{class:"mx-2",onClick:o[1]||(o[1]=a=>e.loadAndOrder("day")),href:"javascript:void(0)"},[g("По дню недели "),e.order==="day"&&e.direction==="asc"?(r(),d("i",KD)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",XD)):c("",!0)]),t("a",{class:"mx-2",onClick:o[2]||(o[2]=a=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[g("По времени начала "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",ZD)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",GD)):c("",!0)]),t("a",{class:"mx-2",onClick:o[3]||(o[3]=a=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[g("По времени окончания "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",JD)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",eS)):c("",!0)])])]),(r(!0),d(Y,null,ee(e.schedule,a=>(r(),d("div",tS,[t("div",{class:M(["card btn",{"btn-outline-secondary bg-secondary":a.appointment!=null,"btn-outline-success":a.appointment==null}]),onClick:n=>e.selectTime(a)},[t("div",oS,[t("div",nS,[t("div",aS,[t("p",lS,[t("strong",null,b(e.days[a.day-1]),1)]),iS,t("p",rS,[t("strong",null,b(a.start_time||"-"),1)]),dS,t("p",uS,[t("strong",null,b(a.end_time||"-"),1)])]),t("div",cS,[t("p",mS,[t("strong",null,b(a.year||"-"),1)]),t("p",hS,[t("strong",null,b(e.months[a.month||0]),1)]),t("p",pS,[t("strong",null,b(a.day_number),1)]),_S,t("p",vS,[t("strong",null,"c "+b(a.week_start||"-"),1),g(" по "),t("strong",null,b(a.week_end||"-"),1)])])])])],10,sS)]))),256))]),t("div",fS,[t("div",bS,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])],64))}}),yS={class:"row"},$S={class:"col-12 mb-3"},kS={class:"form-label",id:"service-title"},wS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),CS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),FS={class:"col-12 mb-3"},TS={key:0},DS=["onClick"],SS={class:"form-label",id:"service-category"},PS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),OS=t("div",null,"Категория услуги (используется для группировки) ",-1),AS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),MS={class:"col-12 mb-3"},jS={class:"form-label",id:"service-description"},qS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),US=t("div",null," Краткая информация об оказываемой услуге ",-1),zS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),VS={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},RS={class:"col-12 col-md-6 mb-3"},YS={class:"form-label",id:"service-title"},IS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),BS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),NS={class:"col-12 col-md-6 mb-3"},ES={class:"form-label",id:"service-title"},QS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),LS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),xS={class:"col-12 mb-3"},WS={class:"form-label",id:"service-images"},HS=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),KS=t("div",null," Изображение, которое видит пользователь при выборе услуги ",-1),XS=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ZS={class:"col-12 mb-3"},GS={class:"form-check"},JS=t("label",{class:"form-check-label",for:"need_prepayment"}," Необходима предоплата ",-1),eP={class:"row"},tP={class:"col-12"},sP={type:"submit",class:"btn btn-outline-success w-100 p-3"},oP={key:0},nP={key:1},aP={props:["eventId","bot","service"],data(){return{load:!1,need_reset:!1,categories:[],serviceForm:{id:null,title:null,appointment_event_id:null,description:null,category:null,images:[],need_prepayment:!1,price:0,discount_price:0}}},watch:{serviceForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.loadAppointmentServiceCategories(),console.log("Service form",this.service),this.service&&this.$nextTick(()=>{this.serviceForm={id:this.service.id||null,appointment_event_id:this.service.appointment_event_id||null,title:this.service.title||null,category:this.service.category||null,description:this.service.description||null,images:this.service.images||[],need_prepayment:this.service.need_prepayment||!1,price:this.service.price||0,discount_price:this.service.discount_price||0}})},methods:{loadAppointmentServiceCategories(){this.$store.dispatch("loadAppointmentServiceCategories",{dataObject:{bot_id:this.bot.id||null,event_id:this.eventId||null}}).then(s=>{this.categories=s})},selectPhotos(s){this.serviceForm.images||(this.serviceForm.images=[]);let e=this.serviceForm.images.indexOf(s.file_id);e!==-1?this.serviceForm.images.splice(e,1):this.serviceForm.images.push(s.file_id)},resetForm(){},submitForm(){let s=new FormData;Object.keys(this.serviceForm).forEach(e=>{const o=this.serviceForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),s.append("appointment_event_id",this.eventId),this.$store.dispatch(this.serviceForm.id===null?"addAppointmentService":"updateAppointmentService",{appointmentServiceForm:s}).then(e=>{this.$emit("callback",e.data),this.$notify("Услуги успешно создано")}).catch(e=>{this.$notify("Услуги создания события")})}}},lP=Object.assign(aP,{__name:"AppointmentServiceForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d("form",{onSubmit:o[6]||(o[6]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",yS,[t("div",$S,[t("label",kS,[L(a,{content:"Название оказываемой услуги"},{default:S(()=>[wS]),_:1}),g(" Название услуги "),CS]),f(t("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":o[0]||(o[0]=n=>e.serviceForm.title=n),maxlength:"255","aria-describedby":"service-title",required:""},null,512),[[E,e.serviceForm.title]])]),t("div",FS,[e.categories?(r(),d("p",TS,[g(" Ранее созданные категории: "),(r(!0),d(Y,null,ee(e.categories,n=>(r(),d("span",{onClick:l=>e.serviceForm.category=n,class:"badge bg-primary mr-1 cursor-pointer"},b(n),9,DS))),256))])):c("",!0),t("label",SS,[L(a,null,{content:S(()=>[OS]),default:S(()=>[PS]),_:1}),g(" Категория услуги "),AS]),f(t("input",{type:"text",class:"form-control",placeholder:"Категория услуги","aria-label":"Категория услуги","onUpdate:modelValue":o[1]||(o[1]=n=>e.serviceForm.category=n),maxlength:"255","aria-describedby":"service-category",required:""},null,512),[[E,e.serviceForm.category]])]),t("div",MS,[t("label",jS,[L(a,null,{content:S(()=>[US]),default:S(()=>[qS]),_:1}),g(" Описание услуги "),zS,e.serviceForm.description?(r(),d("small",VS," Длина текста "+b(e.serviceForm.description.length)+" / 255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание услуги","aria-label":"Описание услуги",maxlength:"255","onUpdate:modelValue":o[2]||(o[2]=n=>e.serviceForm.description=n),"aria-describedby":"service-description",required:""},`
                    `,512),[[E,e.serviceForm.description]])]),t("div",RS,[t("label",YS,[L(a,{content:"Цена оказываемой услуги"},{default:S(()=>[IS]),_:1}),g(" Цена услуги, руб "),BS]),f(t("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":o[3]||(o[3]=n=>e.serviceForm.price=n),"aria-describedby":"price",required:""},null,512),[[E,e.serviceForm.price]])]),t("div",NS,[t("label",ES,[L(a,{content:"Цена скидки на оказываемую услугу"},{default:S(()=>[QS]),_:1}),g(" Цена скидки на услугу, руб "),LS]),f(t("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":o[4]||(o[4]=n=>e.serviceForm.discount_price=n),"aria-describedby":"price",required:""},null,512),[[E,e.serviceForm.discount_price]])]),t("div",xS,[t("label",WS,[L(a,null,{content:S(()=>[KS]),default:S(()=>[HS]),_:1}),g(" Изображение к услуге "),XS]),L(kt,{"need-photo":!0,selected:e.serviceForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),t("div",ZS,[t("div",GS,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=n=>e.serviceForm.need_prepayment=n),type:"checkbox",id:"need_prepayment"},null,512),[[ke,e.serviceForm.need_prepayment]]),JS])])]),t("div",eP,[t("div",tP,[t("button",sP,[e.serviceForm.id===null?(r(),d("span",oP,"Создать услугу")):(r(),d("span",nP,"Обновить услугу"))])])])],32)}}}),iP={class:"row py-3"},rP={class:"col-12"},dP={class:"row"},uP={class:"col-12"},cP={key:0},mP={key:1},hP={key:0,class:"col-12 mb-3"},pP={class:"col-12 mb-3"},_P={key:0},vP={key:1},fP={key:1,class:"col-12 mb-3"},bP={class:"row py-3"},gP=t("div",{class:"col-12"},[t("p",{class:"mb-0"},"Выбор статуса")],-1),yP={class:"col-md-3"},$P=["onClick"],kP={class:"row"},wP={class:"col-12 mb-3"},CP={class:"form-label",id:"service-title"},FP=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),TP=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),DP={class:"col-12 mb-3"},SP={class:"form-label",id:"service-title"},PP=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),OP=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),AP={class:"col-12 mb-3"},MP={class:"form-label",id:"appointment-info"},jP=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qP=t("div",null," Краткая информация от клиента ",-1),UP=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),zP={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},VP={class:"row"},RP={class:"col-12"},YP={type:"submit",class:"btn btn-outline-success w-100 p-3"},IP={key:0},BP={key:1},NP={props:["eventId","bot","appointment"],data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,statuses:[{value:0,title:"Новая запись"},{value:1,title:"Подтверждение записи"},{value:2,title:"Прохождение по записи"},{value:3,title:"Отмена записи"}],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],appointmentForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0,name:null,phone:null,info:null}}},mounted(){this.appointment&&this.$nextTick(()=>{this.appointmentForm={id:this.appointment.id||null,appointment_event_id:this.appointment.appointment_event_id||null,appointment_schedule_id:this.appointment.appointment_schedule_id||null,bot_user_id:this.appointment.bot_user_id||null,status:this.appointment.status||0,name:this.appointment.name||null,phone:this.appointment.phone||null,info:this.appointment.info||null},this.selected_schedule_time=this.appointment.schedule||null,this.selected_bot_user=this.appointment.botUser||null})},methods:{selectScheduleTime(s){if(s.appointment){this.$notify("Данное время уже занято!");return}this.selected_schedule_time=s,this.need_schedule_time=!1},selectBotUser(s){this.selected_bot_user=s,this.need_load_users=!1},clearAppointmentForm(){this.appointmentForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.appointmentForm.bot_user_id=this.selected_bot_user.id,this.appointmentForm.appointment_schedule_id=this.selected_schedule_time.id,this.appointmentForm.appointment_event_id=this.eventId;let s=new FormData;Object.keys(this.appointmentForm).forEach(e=>{const o=this.appointmentForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointment",{dataObject:{appointmentForm:s}}).then(e=>{this.clearAppointmentForm(),this.$emit("callback"),this.$notify("Запись успешно создана")}).catch(e=>{this.$notify("Ошибка создания записи")})}}},EP=Object.assign(NP,{__name:"AppointmentForm",setup(s){return(e,o)=>{const a=gt("Popper"),n=ss("mask");return r(),d(Y,null,[t("div",iP,[t("div",rP,[t("button",{onClick:o[0]||(o[0]=(...l)=>e.clearAppointmentForm&&e.clearAppointmentForm(...l)),class:"btn btn-primary"},"Новая заявка ")])]),t("form",{onSubmit:o[6]||(o[6]=De((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[t("div",dP,[t("div",uP,[t("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:o[1]||(o[1]=l=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",cP,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",mP," Пользователь "+b(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",hP,[L(Xs,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),t("div",pP,[t("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:o[2]||(o[2]=l=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",_P,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",vP," Запись на "+b(e.days[e.selected_schedule_time.day-1]||"-")+" с "+b(e.selected_schedule_time.start_time||"-")+" до "+b(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",fP,[L(Sa,{"event-id":s.eventId,bot:s.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0)]),t("div",bP,[gP,(r(!0),d(Y,null,ee(e.statuses,l=>(r(),d("div",yP,[t("button",{type:"button",class:M([{"btn-success text-white":e.appointmentForm.status==l.value},"btn btn-outline-success w-100"]),onClick:i=>e.appointmentForm.status=l.value},b(l.title||"не указано"),11,$P)]))),256))]),t("div",kP,[t("div",wP,[t("label",CP,[L(a,{content:"ФИО человека, который посетит запись"},{default:S(()=>[FP]),_:1}),g(" Ф.И.О. посетителя "),TP]),f(t("input",{type:"text",class:"form-control",placeholder:"Иванов Иван Иванович","aria-label":"ФИО","onUpdate:modelValue":o[3]||(o[3]=l=>e.appointmentForm.name=l),maxlength:"255","aria-describedby":"appointment-name",required:""},null,512),[[E,e.appointmentForm.name]])]),t("div",DP,[t("label",SP,[L(a,{content:"Номер телефона человека, который посетит запись"},{default:S(()=>[PP]),_:1}),g(" Телефонный номер "),OP]),f(t("input",{type:"text",class:"form-control",placeholder:"+7(000)000-00-00","aria-label":"номер телефона","onUpdate:modelValue":o[4]||(o[4]=l=>e.appointmentForm.phone=l),maxlength:"255","aria-describedby":"appointment-phone",required:""},null,512),[[n,"+7(###)###-##-##"],[E,e.appointmentForm.phone]])]),t("div",AP,[t("label",MP,[L(a,null,{content:S(()=>[qP]),default:S(()=>[jP]),_:1}),g(" Описание услуги "),UP,e.appointmentForm.info?(r(),d("small",zP," Длина текста "+b(e.appointmentForm.info.length)+" / 255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Информация от клиента","aria-label":"Информация от клиента",maxlength:"255","onUpdate:modelValue":o[5]||(o[5]=l=>e.appointmentForm.info=l),"aria-describedby":"appointment-info",required:""},`
                    `,512),[[E,e.appointmentForm.info]])])]),t("div",VP,[t("div",RP,[t("button",YP,[e.appointmentForm.id==null?(r(),d("span",IP,"Записаться")):(r(),d("span",BP,"Обновить запись"))])])])],32)],64)}}}),QP={class:"row"},LP={class:"col-12"},xP={key:0,class:"table"},WP=t("th",{scope:"col"},"Действие",-1),HP=["onClick"],KP={scope:"row"},XP={key:0},ZP={key:0,class:"dropdown"},GP=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),JP={class:"dropdown-menu"},e7={key:0},t7=["onClick"],s7={key:1},o7={class:"col-12"},n7={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,statuses:["Новая запись","Подтверждение записи","Прохождение по записи","Отмена записи"],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],paginate_object:null}},computed:{...Ne(["getAppointments","getAppointmentsPaginateObject"])},mounted(){this.loadAppointments()},methods:{nextAppointments(s){this.loadAppointments(s)},selectAppointment(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointments(0)},removeAppointment(s){this.loading=!0,this.$store.dispatch("removeAppointment",{dataObject:{appointmentId:s}}).then(e=>{this.loading=!1,this.loadAppointments(0),this.$notify("Запись успешно удалена")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления записи")})},loadAppointments(s=0){this.loading=!0,this.$store.dispatch("loadAppointments",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointments,this.paginate_object=this.getAppointmentsPaginateObject}).catch(()=>{this.loading=!1})}}},a7=Object.assign(n7,{__name:"AppointmentsTable",setup(s){return(e,o)=>(r(),d("div",QP,[t("div",LP,[e.services.length>0?(r(),d("table",xP,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("bot_user_id"))},"Пользователь"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("appointment_schedule_id"))},"Дата записи "),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=a=>e.loadAndOrder("status"))},"Статус"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=a=>e.loadAndOrder("name"))},"Посетитель"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.loadAndOrder("phone"))},"Телефон посетителя"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[6]||(o[6]=a=>e.loadAndOrder("info"))},"Доп.инф"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),WP])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.services,(a,n)=>(r(),d("tr",{onClick:l=>e.selectAppointment(a),class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",KP,b(a.id),1),t("td",null,b(a.botUser.fio_from_telegram||a.botUser.telegram_chat_id||"Не указано"),1),t("td",null,[a.schedule?(r(),d("p",XP," Запись на "+b(e.days[a.schedule.day-1]||"Не указано")+" с "+b(a.schedule.start_time||"Не указано")+" до "+b(a.schedule.end_time||"Не указано"),1)):c("",!0)]),t("td",null,b(e.statuses[a.status]),1),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,b(a.name||"не указано"),1),t("td",null,b(a.phone||"не указано"),1),t("td",null,b(a.info||"не указано"),1),t("td",null,[a.id?(r(),d("div",ZP,[GP,t("ul",JP,[a.deleted_at==null?(r(),d("li",e7,[t("a",{class:"dropdown-item",onClick:l=>e.removeAppointment(a.id),href:"javascript:void(0)"},"Удалить",8,t7)])):c("",!0)])])):c("",!0)])],10,HP))),256))])])):(r(),d("p",s7,"На текущий момент нет ни одного созданного сервиса"))]),t("div",o7,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointments,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),l7={class:"row py-2"},i7={class:"col-12"},r7={class:"input-group mb-3"},d7={class:"col-12"},u7={key:0,class:"table"},c7=t("th",{scope:"col"},"Действие",-1),m7={scope:"row"},h7=["onClick"],p7={key:0,class:"fa-solid fa-chevron-down text-success"},_7={key:1,class:"fa-solid fa-xmark text-danger"},v7={key:0,class:"dropdown"},f7=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),b7={class:"dropdown-menu"},g7={key:0},y7=["onClick"],$7={key:1},k7={class:"col-12"},w7={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,events:[],search:null,paginate_object:null}},computed:{...Ne(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){this.loadAppointmentEvents()},methods:{removeAppointmentEvent(s){this.loading=!0,this.$store.dispatch("removeAppointmentEvent",{dataObject:{appointmentEventId:s}}).then(e=>{this.loading=!1,this.loadAppointmentEvents(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},nextAppointmentEvents(s){this.loadAppointmentEvents(s)},selectEvent(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentEvents(0)},loadAppointmentEvents(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentEvents",{dataObject:{bot_id:this.bot.id||null,search:this.search,is_group:this.is_group,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.events=this.getAppointmentEvents,this.paginate_object=this.getAppointmentEventsPaginateObject}).catch(()=>{this.loading=!1})}}},C7=Object.assign(w7,{__name:"AppointmentEventTable",setup(s){return(e,o)=>(r(),d("div",l7,[t("div",i7,[t("div",r7,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск события","aria-label":"Поиск события","onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"aria-describedby":"appointment-search-event"},null,512),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=a=>e.loadAppointmentEvents(0)),type:"button",id:"appointment-search-event"},"Найти ")])]),t("div",d7,[e.events.length>0?(r(),d("table",u7,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=a=>e.loadAndOrder("title"))},"Название"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=a=>e.loadAndOrder("subtitle"))},"Подзаголовок"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.loadAndOrder("description"))},"Описание"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[6]||(o[6]=a=>e.loadAndOrder("is_group"))},"Групповое"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),c7])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.events,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",m7,b(a.id),1),t("td",{onClick:l=>e.selectEvent(a)},b(a.title||"Не указано"),9,h7),t("td",null,b(a.subtitle||"Не указано"),1),t("td",null,b(a.description||"Не указано"),1),t("td",null,[a.is_group?(r(),d("i",p7)):(r(),d("i",_7))]),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[a.id?(r(),d("div",v7,[f7,t("ul",b7,[a.deleted_at==null?(r(),d("li",g7,[t("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentEvent(a.id),href:"javascript:void(0)"},"Удалить",8,y7)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",$7,"На текущий момент нет событий в вашем списке"))]),t("div",k7,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointmentEvents,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),F7={class:"row"},T7={class:"col-12"},D7={key:0,class:"table"},S7=t("th",{scope:"col"},"Действие",-1),P7={scope:"row"},O7=["onClick"],A7={key:0,class:"fa-solid fa-chevron-down text-success"},M7={key:1,class:"fa-solid fa-xmark text-danger"},j7={key:0,class:"dropdown"},q7=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),U7={class:"dropdown-menu"},z7={key:0},V7=["onClick"],R7={key:1},Y7={class:"col-12"},I7={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,paginate_object:null}},computed:{...Ne(["getAppointmentServices","getAppointmentServicesPaginateObject"])},mounted(){this.loadAppointmentServices()},methods:{nextAppointmentService(s){this.loadAppointmentServices(s)},selectService(s){this.$emit("select",s)},removeAppointmentService(s){this.loading=!0,this.$store.dispatch("removeAppointmentService",{dataObject:{appointmentServiceId:s}}).then(e=>{this.loading=!1,this.loadAppointmentServices(0),this.$notify("Сервис успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentServices(0)},loadAppointmentServices(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentServices",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointmentServices,this.paginate_object=this.getAppointmentServicesPaginateObject}).catch(()=>{this.loading=!1})}}},B7=Object.assign(I7,{__name:"AppointmentServicesTable",setup(s){return(e,o)=>(r(),d("div",F7,[t("div",T7,[e.services.length>0?(r(),d("table",D7,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("title"))},"Название"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("subtitle"))},"Подзаголовок"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=a=>e.loadAndOrder("description"))},"Описание"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=a=>e.loadAndOrder("is_group"))},"Групповое"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),S7])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.services,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",P7,b(a.id),1),t("td",{onClick:l=>e.selectService(a)},b(a.title||"Не указано"),9,O7),t("td",null,b(a.subtitle||"Не указано"),1),t("td",null,b(a.description||"Не указано"),1),t("td",null,[a.is_group?(r(),d("i",A7)):(r(),d("i",M7))]),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[a.id?(r(),d("div",j7,[q7,t("ul",U7,[a.deleted_at==null?(r(),d("li",z7,[t("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentService(a.id),href:"javascript:void(0)"},"Удалить",8,V7)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",R7,"На текущий момент нет ни одного созданого сервиса"))]),t("div",Y7,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointmentService,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),N7={class:"row"},E7={class:"col-12 mb-3"},Q7={class:"form-label",id:"event-title"},L7=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),x7=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),W7={class:"col-12 mb-3"},H7={class:"form-label",id:"event-subtitle"},K7=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),X7=t("div",null,"Подзаголовок события или доп. инфа под названием события ",-1),Z7=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),G7={class:"col-12 mb-3"},J7={class:"form-label",id:"event-description"},eO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),tO=t("div",null," Краткая информация о происходящем мероприятии ",-1),sO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),oO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},nO={class:"col-12 mb-3"},aO={class:"form-label",id:"event-on_start_appointment"},lO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),iO=t("div",null," Текст, который будет отображен клиенту, когда тот записался ",-1),rO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),dO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},uO={class:"col-12 mb-3"},cO={class:"form-label",id:"event-on_cancel_appointment"},mO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),hO=t("div",null," Текст, который будет отображен клиенту, когда тот отменил запись ",-1),pO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),_O={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},vO={class:"col-12 mb-3"},fO={class:"form-label",id:"event-on_after_appointment"},bO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),gO=t("div",null," Текст, который будет отображен клиенту, когда тот прошел событие успешно ",-1),yO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),$O={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},kO={class:"col-12 mb-3"},wO={class:"form-label",id:"event-on_repeat_appointment"},CO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),FO=t("div",null," Текст, который будет отображен клиенту, когда тот записывается 2й и более раз ",-1),TO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),DO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},SO={class:"col-12 mb-3"},PO={class:"form-check"},OO=t("label",{class:"form-check-label",for:"need_media"}," Нужно изображение к событию ",-1),AO={key:0,class:"col-12 mb-3"},MO={class:"form-label",id:"event-images"},jO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qO=t("div",null," Изображение, которое видит пользователь при выборе события ",-1),UO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),zO={class:"col-12 mb-3"},VO={class:"form-check"},RO=t("label",{class:"form-check-label",for:"is-group"}," Является групповым мероприятием ",-1),YO={key:1,class:"col-md-6 col-12 mb-3"},IO={class:"form-label",id:"event-min_people"},BO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),NO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),EO={key:2,class:"col-md-6 col-12 mb-3"},QO={class:"form-label",id:"event-max_people"},LO=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xO=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),WO={class:"row"},HO={class:"col-12"},KO={type:"submit",class:"btn btn-outline-success w-100 p-3"},XO={key:0},ZO={key:1},GO={props:["event","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,eventForm:{id:null,title:null,subtitle:null,description:null,images:[],services:[],times:[],is_group:!1,max_people:0,min_people:0,on_start_appointment:null,on_cancel_appointment:null,on_after_appointment:null,on_repeat_appointment:null}}},watch:{eventForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.event&&this.$nextTick(()=>{this.eventForm={id:this.event.id||null,title:this.event.title||null,subtitle:this.event.subtitle||null,description:this.event.description||null,images:this.event.images||[],is_group:this.event.is_group||!1,max_people:this.event.max_people||0,min_people:this.event.min_people||0,on_start_appointment:this.event.on_start_appointment||null,on_cancel_appointment:this.event.on_cancel_appointment||null,on_after_appointment:this.event.on_after_appointment||null,on_repeat_appointment:this.event.on_repeat_appointment||null}})},methods:{selectPhotos(s){this.eventForm.images||(this.eventForm.images=[]);let e=this.eventForm.images.indexOf(s.file_id);e!==-1?this.eventForm.images.splice(e,1):this.eventForm.images.push(s.file_id)},resetForm(){},submitForm(){let s=new FormData;Object.keys(this.eventForm).forEach(e=>{const o=this.eventForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch(this.eventForm.id===null?"addAppointmentEvent":"updateAppointmentEvent",{appointmentEventForm:s}).then(e=>{this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},jn=Object.assign(GO,{__name:"AppointmentEventForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d("form",{onSubmit:o[11]||(o[11]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",N7,[t("div",E7,[t("label",Q7,[L(a,{content:"Название вашего события (или специалиста), на которое планируется осуществить запись"},{default:S(()=>[L7]),_:1}),g(" Название события "),x7]),f(t("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":o[0]||(o[0]=n=>e.eventForm.title=n),maxlength:"255","aria-describedby":"event-title",required:""},null,512),[[E,e.eventForm.title]])]),t("div",W7,[t("label",H7,[L(a,null,{content:S(()=>[X7]),default:S(()=>[K7]),_:1}),g(" Подзаголовок события "),Z7]),f(t("input",{type:"text",class:"form-control",placeholder:"Подзаголовок","aria-label":"Подзаголовок","onUpdate:modelValue":o[1]||(o[1]=n=>e.eventForm.subtitle=n),maxlength:"255","aria-describedby":"event-subtitle",required:""},null,512),[[E,e.eventForm.subtitle]])]),t("div",G7,[t("label",J7,[L(a,null,{content:S(()=>[tO]),default:S(()=>[eO]),_:1}),g(" Описание события "),sO,e.eventForm.description?(r(),d("small",oO," Длина текста "+b(e.eventForm.description.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":o[2]||(o[2]=n=>e.eventForm.description=n),"aria-describedby":"event-description",required:""},`
                    `,512),[[E,e.eventForm.description]])]),t("div",nO,[t("label",aO,[L(a,null,{content:S(()=>[iO]),default:S(()=>[lO]),_:1}),g(" Текст при записи на событие "),rO,e.eventForm.on_start_appointment?(r(),d("small",dO," Длина текста "+b(e.eventForm.on_start_appointment.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст при записи на событие","aria-label":"Текст при записи на событие","onUpdate:modelValue":o[3]||(o[3]=n=>e.eventForm.on_start_appointment=n),maxlength:"255","aria-describedby":"event-on_start_appointment",required:""},`
                    `,512),[[E,e.eventForm.on_start_appointment]])]),t("div",uO,[t("label",cO,[L(a,null,{content:S(()=>[hO]),default:S(()=>[mO]),_:1}),g(" Текст при отмене записи на событие "),pO,e.eventForm.on_cancel_appointment?(r(),d("small",_O," Длина текста "+b(e.eventForm.on_cancel_appointment.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст при отмене записи на событие","aria-label":"Текст при отмене записи на событие","onUpdate:modelValue":o[4]||(o[4]=n=>e.eventForm.on_cancel_appointment=n),maxlength:"255","aria-describedby":"event-on_cancel_appointment",required:""},`
                    `,512),[[E,e.eventForm.on_cancel_appointment]])]),t("div",vO,[t("label",fO,[L(a,null,{content:S(()=>[gO]),default:S(()=>[bO]),_:1}),g(" Текст после прохождения события "),yO,e.eventForm.on_after_appointment?(r(),d("small",$O," Длина текста "+b(e.eventForm.on_after_appointment.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст после прохождения события","aria-label":"Текст после прохождения события","onUpdate:modelValue":o[5]||(o[5]=n=>e.eventForm.on_after_appointment=n),maxlength:"255","aria-describedby":"event-on_after_appointment",required:""},`
                    `,512),[[E,e.eventForm.on_after_appointment]])]),t("div",kO,[t("label",wO,[L(a,null,{content:S(()=>[FO]),default:S(()=>[CO]),_:1}),g(" Текст при повторной записи на событие "),TO,e.eventForm.on_repeat_appointment?(r(),d("small",DO," Длина текста "+b(e.eventForm.on_repeat_appointment.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:" Текст при повторной записи на событие","aria-label":" Текст при повторной записи на событие","onUpdate:modelValue":o[6]||(o[6]=n=>e.eventForm.on_repeat_appointment=n),maxlength:"255","aria-describedby":"event-on_repeat_appointment",required:""},`
                    `,512),[[E,e.eventForm.on_repeat_appointment]])]),t("div",SO,[t("div",PO,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=n=>e.need_media=n),type:"checkbox",id:"need_media"},null,512),[[ke,e.need_media]]),OO])]),e.need_media?(r(),d("div",AO,[t("label",MO,[L(a,null,{content:S(()=>[qO]),default:S(()=>[jO]),_:1}),g(" Изображение к событию "),UO]),L(kt,{"need-photo":!0,selected:e.eventForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])])):c("",!0),t("div",zO,[t("div",VO,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[8]||(o[8]=n=>e.eventForm.is_group=n),type:"checkbox",id:"is-group"},null,512),[[ke,e.eventForm.is_group]]),RO])]),e.eventForm.is_group?(r(),d("div",YO,[t("label",IO,[L(a,{content:"Минимально необходимое число людей, для начала 1 мероприятия"},{default:S(()=>[BO]),_:1}),g(" Минимальное число посетителей в группе "),NO]),f(t("input",{type:"number",class:"form-control",placeholder:"Минимальное число посетителей","aria-label":"Название","onUpdate:modelValue":o[9]||(o[9]=n=>e.eventForm.min_people=n),"aria-describedby":"event-min_people",required:""},null,512),[[E,e.eventForm.min_people]])])):c("",!0),e.eventForm.is_group?(r(),d("div",EO,[t("label",QO,[L(a,{content:"Количество людей, которые могут посетить мероприятие за 1 сеанс"},{default:S(()=>[LO]),_:1}),g(" Максимальное число посетителей в группе "),xO]),f(t("input",{type:"number",class:"form-control",placeholder:"Максимальное число посетителей","aria-label":"Название","onUpdate:modelValue":o[10]||(o[10]=n=>e.eventForm.max_people=n),"aria-describedby":"event-max_people",required:""},null,512),[[E,e.eventForm.max_people]])])):c("",!0)]),t("div",WO,[t("div",HO,[t("button",KO,[e.eventForm.id==null?(r(),d("span",XO,"Создать событие")):(r(),d("span",ZO,"Обновить событие"))])])])],32)}}}),JO={class:"row pt-3"},eA={class:"col-md-4"},tA={class:"form-floating mb-3"},sA=t("label",{for:"config-step"},"Шаг, минуты",-1),oA={class:"col-md-4"},nA={class:"form-floating mb-3"},aA=t("label",{for:"config-start-time"},"Начало, часы",-1),lA={class:"col-md-4"},iA={class:"form-floating mb-3"},rA=["min"],dA=t("label",{for:"config-end-time"},"Конец, часы",-1),uA=t("hr",null,null,-1),cA={key:0,class:"row"},mA={class:"col-12 d-flex justify-content-end pb-3"},hA={class:"row"},pA={class:"col-md-4 text-center"},_A={key:0,class:"fa-solid fa-arrow-down-short-wide"},vA={key:1,class:"fa-solid fa-arrow-up-wide-short"},fA={class:"col-md-4 text-center"},bA={key:0,class:"fa-solid fa-arrow-down-short-wide"},gA={key:1,class:"fa-solid fa-arrow-up-wide-short"},yA={class:"col-md-4 text-center"},$A={key:0,class:"fa-solid fa-arrow-down-short-wide"},kA={key:1,class:"fa-solid fa-arrow-up-wide-short"},wA={class:"col-md-4"},CA={class:"form-floating"},FA=["onUpdate:modelValue","id"],TA=["for"],DA={class:"col-md-4"},SA={class:"form-floating"},PA=["onUpdate:modelValue","id"],OA=["for"],AA={class:"col-md-4"},MA={class:"form-floating"},jA=["onUpdate:modelValue","id"],qA=["for"],UA={class:"row mt-3"},zA={class:"col-12"},VA={class:"row"},RA={class:"col-12"},YA={class:"col-12"},IA={class:"text-center"},BA={class:"row d-flex justify-content-center"},NA={class:"col-md-4"},EA={class:"table"},QA=t("th",{scope:"col"},"#",-1),LA={scope:"col"},xA={scope:"row"},WA=["onClick"],HA={key:0,class:"fa-solid fa-check"},KA={key:1,class:"fa-solid fa-xmark"},XA={components:{VueDatePicker:fs},props:["eventId","bot"],data(){return{date:null,load:!1,step:30,start:8,end:18,order:null,direction:null,paginate_object:null,years:[2024,2025],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],schedule:[],added_schedule:[]}},watch:{date:{handler:function(s){this.loadAppointmentSchedules()},deep:!0}},computed:{...Ne(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"]),currentWeek(){return new Date().getWeek()},currentMonthWeek(){return new Date().getMonthWeek()},currentMonth(){return new Date().getMonth()},currentYear(){return new Date().getFullYear()},times(){let s=this.step,e=[],o=0,a=0;for(let n=0;o<24*60;n++){let l=Math.floor(o/60);if(l>=this.start&&l<=this.end){let i=o%60;e[a]=("0"+l).slice(-2)+":"+("0"+i).slice(-2),a++}o=o+s}return e}},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{removeAppointmentSchedule(s){this.loading=!0,this.$store.dispatch("removeAppointmentSchedule",{dataObject:{appointmentScheduleId:s}}).then(e=>{this.loading=!1,this.loadAppointmentSchedules(0),this.$notify("Время успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления времени")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(s){this.loadAppointmentSchedules(s)},loadAppointmentSchedules(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})},storeSchedule(){this.$store.dispatch("storeAppointmentSchedule",{dataObject:{schedule:[...this.schedule,...this.added_schedule],bot_id:this.bot.id,appointment_event_id:this.eventId}}).then(()=>{this.$notify("Расписание успешно сохранено"),this.loadAppointmentSchedules(),this.added_schedule=[]}).catch(()=>{this.$notify("Ошибка сохраения расписания")})},inScheduleRow(s){return this.schedule.findIndex(e=>e.start_time==this.times[s])!=-1||this.added_schedule.findIndex(e=>e.start_time==this.times[s])!=-1},inSchedule(s,e){return this.schedule.findIndex(o=>o.day==e&&o.start_time==this.times[s])!=-1||this.added_schedule.findIndex(o=>o.day==e&&o.start_time==this.times[s])!=-1},setScheduleItem(s,e){let o=this.schedule.findIndex(a=>a.day==e&&a.start_time==this.times[s]);if(o!==-1){this.schedule.splice(o,1);return}if(o=this.added_schedule.findIndex(a=>a.day==e&&a.start_time==this.times[s]),o!==-1){this.added_schedule.splice(o,1);return}this.added_schedule.push({day:e,start_time:this.times[s]||null,end_time:this.times[s+1]||null,week:this.date==null?this.currentWeek:new Date(this.date).getWeek(),month:this.date==null?this.currentMonth:new Date(this.date).getMonth(),year:this.date==null?this.currentYear:new Date(this.date).getFullYear()})}}},ZA=Object.assign(XA,{__name:"AppointmentScheduleForm",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",JO,[t("div",eA,[t("div",tA,[f(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=a=>e.step=a),min:"0",id:"config-step",placeholder:"30 минут"},null,512),[[E,e.step]]),sA])]),t("div",oA,[t("div",nA,[f(t("input",{type:"number","onUpdate:modelValue":o[1]||(o[1]=a=>e.start=a),min:"0",max:"23",class:"form-control",id:"config-start-time",placeholder:"Часы"},null,512),[[E,e.start]]),aA])]),t("div",lA,[t("div",iA,[f(t("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=a=>e.end=a),min:e.start,max:"23",class:"form-control",id:"config-end-time",placeholder:"Часы"},null,8,rA),[[E,e.end]]),dA])])]),uA,e.schedule.length>0||e.added_schedule.length>0?(r(),d("div",cA,[t("div",mA,[t("button",{onClick:o[3]||(o[3]=(...a)=>e.storeSchedule&&e.storeSchedule(...a)),class:"btn btn-primary"},"Сохранить текущий график ")]),t("div",hA,[t("div",pA,[t("a",{onClick:o[4]||(o[4]=a=>e.loadAndOrder("day")),href:"javascript:void(0)"},[g("День "),e.order==="day"&&e.direction==="asc"?(r(),d("i",_A)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",vA)):c("",!0)])]),t("div",fA,[t("a",{onClick:o[5]||(o[5]=a=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[g("Начало "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",bA)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",gA)):c("",!0)])]),t("div",yA,[t("a",{onClick:o[6]||(o[6]=a=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[g("Конец "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",$A)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",kA)):c("",!0)])])])])):c("",!0),(r(!0),d(Y,null,ee([...e.schedule,...e.added_schedule],(a,n)=>(r(),d("div",{class:M(["row py-2",{"bg-warning":a.id==null}])},[t("div",wA,[t("div",CA,[f(t("input",{type:"text","onUpdate:modelValue":l=>e.days[a.day-1]=l,class:"form-control",id:"day-of-week-"+n,placeholder:"День недели"},null,8,FA),[[E,e.days[a.day-1]]]),t("label",{for:"day-of-week-"+n},"День недели",8,TA)])]),t("div",DA,[t("div",SA,[f(t("input",{type:"text","onUpdate:modelValue":l=>a.start_time=l,class:"form-control",id:"day-of-start-at-"+n,placeholder:"Время начало"},null,8,PA),[[E,a.start_time]]),t("label",{for:"day-of-start-at-"+n},"Начало",8,OA)])]),t("div",AA,[t("div",MA,[f(t("input",{type:"text","onUpdate:modelValue":l=>a.end_time=l,class:"form-control",id:"day-of-end-at-"+n,placeholder:"Время окончания"},null,8,jA),[[E,a.end_time]]),t("label",{for:"day-of-end-at-"+n},"Окончание",8,qA)])])],2))),256)),t("div",UA,[t("div",zA,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]),t("div",VA,[t("div",RA,[t("button",{class:"btn btn-primary",onClick:o[7]||(o[7]=a=>e.schedule=[])},"Очистить таблицу")]),t("div",YA,[t("p",IA,[g(" Год: "),t("strong",null,b(e.currentYear),1),g(" Месяц: "),t("strong",null,b(e.months[e.currentMonth]),1),g(" Неделя: "),t("strong",null,b(e.currentWeek),1)])])]),t("div",BA,[t("div",NA,[L(C(fs),{modelValue:e.date,"onUpdate:modelValue":o[8]||(o[8]=a=>e.date=a)},null,8,["modelValue"])])]),t("table",EA,[t("thead",null,[t("tr",null,[QA,(r(!0),d(Y,null,ee(e.days,a=>(r(),d("th",LA,b(a),1))),256))])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.times,(a,n)=>(r(),d("tr",{class:M({"table-light":e.inScheduleRow(n)})},[t("th",xA,b(a),1),(r(),d(Y,null,ee(7,l=>t("td",null,[t("button",{class:M([{"btn-primary text-white":e.inSchedule(n,l)},"btn btn-outline-primary"]),onClick:i=>e.setScheduleItem(n,l)},[e.inSchedule(n,l)?(r(),d("i",HA)):(r(),d("i",KA))],10,WA)])),64))],2))),256))])])],64))}});(function(){try{if(typeof document<"u"){var s=document.createElement("style");s.appendChild(document.createTextNode(".vue3-star-ratings[data-v-7fab3f62]{width:fit-content;overflow:hidden;position:relative;white-space:nowrap}.vue3-star-ratings *[data-v-7fab3f62]{box-sizing:border-box;margin:0;padding:0;line-height:1}.vue3-star-ratings__inner[data-v-7fab3f62],.vue3-star-ratings__outer[data-v-7fab3f62]{height:inherit}.vue3-star-ratings__outer[data-v-7fab3f62]{position:absolute;top:0;left:0;width:var(--vue3StarRatingOuterWidth);max-width:100%;overflow:hidden;color:var(--vue3StarRatingsOuterColor);transition:width .32s cubic-bezier(.075,.82,.165,1)}.vue3-star-ratings__inner[data-v-7fab3f62]{color:var(--vue3StarRatingsInnerColor)}.vue3-star-ratings__icon[data-v-7fab3f62]{fill:currentColor;width:var(--vue3StarRatingIconSize);aspect-ratio:1;cursor:pointer;display:inline-block}")),document.head.appendChild(s)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Pa=(s,e)=>{const o=s.__vccOpts||s;for(const[a,n]of e)o[a]=n;return o},GA={},JA={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},eM=t("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),tM=[eM];function sM(s,e){return r(),d("svg",JA,tM)}const qn=Pa(GA,[["render",sM]]),oM={class:"vue3-star-ratings__outer"},nM={class:"vue3-star-ratings__inner"},aM=tt({__name:"Vue3StarRatings",props:{modelValue:{default:0},numberOfStars:{default:5},starColor:{default:"#ff9800"},inactiveColor:{default:"#333333"},starSize:{default:24},disableClick:{type:Boolean},customSvg:{default:qn}},emits:["update:modelValue"],setup(s,{emit:e}){const o=s,a=se(()=>o.customSvg||qn),n={rounded(p,w){const _=Math.pow(10,w);return Math.round(p*_)/_}},l=ce(),i=se({get(){return o.modelValue},set(p){const w=n.rounded(p,1);e("update:modelValue",w)}});function u(p){if(o.disableClick)return;const w=this.getBoundingClientRect(),{pageX:_}=p,F=_-w.left,D=w.width,O=o.numberOfStars,N=F/D*O;i.value=N}const h=se(()=>(i.value<0?0:i.value>o.numberOfStars?o.numberOfStars:i.value)/o.numberOfStars*100);return za(()=>{var p;const w={"--vue3StarRatingsInnerColor":o.inactiveColor,"--vue3StarRatingsOuterColor":o.starColor,"--vue3StarRatingOuterWidth":`${h.value}%`,"--vue3StarRatingIconSize":`${o.starSize}px`};for(const[_,F]of Object.entries(w))(p=l.value)==null||p.style.setProperty(_,F)}),rt(()=>{var p;(p=l.value)==null||p.addEventListener("click",u)}),Va(()=>{var p;(p=l.value)==null||p.removeEventListener("click",u)}),(p,w)=>(r(),d("div",{class:"vue3-star-ratings",ref_key:"starsContainer",ref:l,style:ft({pointerEvents:p.disableClick?"none":"auto"})},[t("div",oM,[(r(!0),d(Y,null,ee(p.numberOfStars,_=>(r(),J(Fs(a.value),{key:_,class:"vue3-star-ratings__icon"}))),128))]),t("div",nM,[(r(!0),d(Y,null,ee(p.numberOfStars,_=>(r(),J(Fs(a.value),{key:_,class:"vue3-star-ratings__icon"}))),128))])],4))}}),so=Pa(aM,[["__scopeId","data-v-7fab3f62"]]),lM={class:"row py-3"},iM={class:"col-12"},rM={class:"row"},dM={class:"col-12"},uM={key:0},cM={key:1},mM={key:0,class:"col-12 mb-3"},hM={class:"col-12 mb-3"},pM={key:0},_M={key:1},vM={key:1,class:"col-12 mb-3"},fM={class:"col-12 mb-3"},bM={class:"col-12 mb-3"},gM={class:"form-label",id:"event-on_after_appointment"},yM=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$M=t("div",null," Текст, который пользователь оставляет после прохождения услуги ",-1),kM=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wM={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},CM={class:"row"},FM={class:"col-12"},TM={type:"submit",class:"btn btn-outline-success w-100 p-3"},DM={key:0},SM={key:1},PM={props:["eventId","bot","review"],components:{vue3starRatings:so},data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],reviewForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null}}},watch:{reviewForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.review&&this.$nextTick(()=>{this.reviewForm={id:this.review.id||null,appointment_event_id:this.review.appointment_event_id||null,appointment_schedule_id:this.review.appointment_schedule_id||null,bot_user_id:this.review.bot_user_id||null,rating:this.review.rating||null,text:this.review.text||null},this.selected_schedule_time=this.review.schedule||null,this.selected_bot_user=this.review.botUser||null})},methods:{selectScheduleTime(s){this.selected_schedule_time=s,this.need_schedule_time=!1},selectBotUser(s){this.selected_bot_user=s,this.need_load_users=!1},clearReviewForm(){this.reviewForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.reviewForm.bot_user_id=this.selected_bot_user.id,this.reviewForm.appointment_schedule_id=this.selected_schedule_time.id,this.reviewForm.appointment_event_id=this.eventId;let s=new FormData;Object.keys(this.reviewForm).forEach(e=>{const o=this.reviewForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointmentReview",{dataObject:{appointmentReviewForm:s}}).then(e=>{this.$emit("callback",e.data),this.$notify("Отзыв успешно создан"),this.clearReviewForm()}).catch(e=>{this.$notify("Ошибка создания отзыва")})}}},OM=Object.assign(PM,{__name:"AppointmentReviewForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d(Y,null,[t("div",lM,[t("div",iM,[t("button",{onClick:o[0]||(o[0]=(...n)=>e.clearReviewForm&&e.clearReviewForm(...n)),class:"btn btn-primary"},"Новый отзыв")])]),t("form",{onSubmit:o[5]||(o[5]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",rM,[t("div",dM,[t("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:o[1]||(o[1]=n=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",uM,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",cM," Пользователь "+b(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",mM,[L(Xs,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),t("div",hM,[t("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:o[2]||(o[2]=n=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",pM,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",_M," Запись на "+b(e.days[e.selected_schedule_time.day-1]||"-")+" с "+b(e.selected_schedule_time.start_time||"-")+" до "+b(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",vM,[L(Sa,{"event-id":s.eventId,bot:s.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0),t("div",fM,[t("p",null," Рейтинг: "+b(e.reviewForm.rating||0),1),L(C(so),{modelValue:e.reviewForm.rating,"onUpdate:modelValue":o[3]||(o[3]=n=>e.reviewForm.rating=n)},null,8,["modelValue"])]),t("div",bM,[t("label",gM,[L(a,null,{content:S(()=>[$M]),default:S(()=>[yM]),_:1}),g(" Текст отзыва "),kM,e.reviewForm.text?(r(),d("small",wM," Длина текста "+b(e.reviewForm.text.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст отзыва","aria-label":"Текст отзыва","onUpdate:modelValue":o[4]||(o[4]=n=>e.reviewForm.text=n),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[E,e.reviewForm.text]])])]),t("div",CM,[t("div",FM,[t("button",TM,[e.reviewForm.id==null?(r(),d("span",DM,"Оставить отзыв")):(r(),d("span",SM,"Обновить отзыв"))])])])],32)],64)}}}),AM={class:"row"},MM={class:"col-12"},jM={key:0,class:"table"},qM=t("th",{scope:"col"},"Действие",-1),UM=["onClick"],zM={scope:"row"},VM={class:"d-flex align-items-center"},RM={class:"ml-2"},YM={key:0,class:"dropdown"},IM=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),BM={class:"dropdown-menu"},NM={key:0},EM=["onClick"],QM={key:1},LM={class:"col-12"},xM={props:["bot","eventId"],components:{vue3starRatings:so},data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,reviews:[],search:null,paginate_object:null}},computed:{...Ne(["getAppointmentReviews","getAppointmentReviewsPaginateObject"])},mounted(){this.loadAppointmentReviews()},methods:{nextAppointmentReviews(s){this.loadAppointmentReviews(s)},selectReview(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentReviews(0)},removeAppointmentReview(s){this.loading=!0,this.$store.dispatch("removeAppointmentReview",{dataObject:{appointmentReviewId:s}}).then(e=>{this.loadAppointmentReviews(0),this.$notify("Сервис успешно удален"),this.loading=!1}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAppointmentReviews(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentReviews",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.reviews=this.getAppointmentReviews,this.paginate_object=this.getAppointmentReviewsPaginateObject}).catch(()=>{this.loading=!1})}}},WM=Object.assign(xM,{__name:"AppointmentReviewsTable",setup(s){return(e,o)=>(r(),d("div",AM,[t("div",MM,[e.reviews.length>0?(r(),d("table",jM,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("bot_user_id"))},"Пользователь"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("rating"))},"Рейтинг"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=a=>e.loadAndOrder("text"))},"Текст"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),qM])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.reviews,(a,n)=>(r(),d("tr",{onClick:l=>e.selectReview(a),class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",zM,b(a.id),1),t("td",null,b(a.botUser.fio_from_telegram||a.botUser.telegram_chat_id||"Не указано"),1),t("td",null,[t("p",VM,[L(C(so),{disableClick:!0,modelValue:a.rating,"onUpdate:modelValue":l=>a.rating=l},null,8,["modelValue","onUpdate:modelValue"]),t("span",RM,b(a.rating||0),1)])]),t("td",null,b(a.text||"Не указано"),1),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[a.id?(r(),d("div",YM,[IM,t("ul",BM,[a.deleted_at==null?(r(),d("li",NM,[t("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentReview(a.id),href:"javascript:void(0)"},"Удалить",8,EM)])):c("",!0)])])):c("",!0)])],10,UM))),256))])])):(r(),d("p",QM,"На текущий момент нет ни одного созданного отзыва"))]),t("div",LM,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextAppointmentReviews,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),HM={key:0,class:"py-2"},KM={class:"row"},XM={class:"col-12"},ZM={key:1,class:"py-2"},GM={class:"row"},JM={class:"col-12"},e9={key:2,class:"py-2"},t9={class:"row"},s9={class:"col-12"},o9={class:"nav nav-tabs justify-content-center"},n9={key:0,class:"row py-3"},a9={class:"col-12"},l9={key:1,class:"row py-3"},i9={class:"col-12"},r9={class:"col-12 py-3"},d9=t("h4",null,"Доступные сервисы в событии",-1),u9={key:2,class:"row"},c9={class:"col-12"},m9={key:3,class:"row"},h9={class:"col-12"},p9={class:"col-12 py-3"},_9=t("h4",null,"Актуальные записи на событие",-1),v9={key:4,class:"row"},f9={class:"col-12"},b9={class:"col-12 py-3"},g9=t("h4",null,"Отзывы к событию",-1),y9={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadService:!1,loadReviewForm:!1,loadAppointments:!1,loadReviews:!1,loadAppointmentForm:!1,loadForm:!1,selectedEvent:null,selectedService:null,selectedAppointment:null,selectedReview:null}},computed:{...Ne(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){},methods:{callbackForm(){this.loadTable=!0,this.$nextTick(()=>{this.loadTable=!1})},callbackAppointment(){this.loadAppointments=!0,this.$nextTick(()=>{this.loadAppointments=!1})},callbackReview(){this.loadReviews=!0,this.$nextTick(()=>{this.loadReviews=!1})},createEvent(){this.part=2},selectAppointment(s){this.loadAppointmentForm=!0,this.selectedAppointment=s,this.$nextTick(()=>{this.loadAppointmentForm=!1})},selectService(s){this.loadService=!0,this.selectedService=s,this.$nextTick(()=>{this.loadService=!1})},selectReview(s){this.loadReviewForm=!0,this.selectedReview=s,this.$nextTick(()=>{this.loadReviewForm=!1})},selectEvent(s){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedEvent=s,this.part=1,this.tab=0})}}},$9=Object.assign(y9,{__name:"Appointment",setup(s){return(e,o)=>(r(),d(Y,null,[e.part===0?(r(),d("div",HM,[t("div",KM,[t("div",XM,[t("button",{type:"button",onClick:o[0]||(o[0]=(...a)=>e.createEvent&&e.createEvent(...a)),class:"btn btn-primary"}," Создать новое событие ")])]),e.loadTable?c("",!0):(r(),J(C7,{key:0,onSelect:e.selectEvent,bot:s.bot},null,8,["onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",ZM,[t("div",GM,[t("div",JM,[t("button",{type:"button",onClick:o[1]||(o[1]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),J(jn,{key:0,onCallback:e.callbackForm,bot:s.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",e9,[t("div",t9,[t("div",s9,[t("button",{type:"button",onClick:o[2]||(o[2]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),t("ul",o9,[t("li",{class:"nav-item",onClick:o[3]||(o[3]=a=>e.tab=0)},[t("a",{class:M(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о событии",2)]),t("li",{class:"nav-item",onClick:o[4]||(o[4]=a=>e.tab=1)},[t("a",{class:M(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Сервисы в событии",2)]),t("li",{class:"nav-item",onClick:o[5]||(o[5]=a=>e.tab=2)},[t("a",{class:M(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"График",2)]),t("li",{class:"nav-item",onClick:o[6]||(o[6]=a=>e.tab=3)},[t("a",{class:M(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Записи на событие",2)]),t("li",{class:"nav-item",onClick:o[7]||(o[7]=a=>e.tab=4)},[t("a",{class:M(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Отзывы о событии",2)])]),e.tab===0?(r(),d("div",n9,[t("div",a9,[e.loadForm?c("",!0):(r(),J(jn,{key:0,onCallback:e.callbackForm,event:e.selectedEvent,bot:s.bot},null,8,["onCallback","event","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",l9,[t("div",i9,[e.loadService?c("",!0):(r(),J(lP,{key:0,service:e.selectedService,"event-id":e.selectedEvent.id,bot:s.bot},null,8,["service","event-id","bot"]))]),t("div",r9,[d9,L(B7,{"event-id":e.selectedEvent.id,onSelect:e.selectService,bot:s.bot},null,8,["event-id","onSelect","bot"])])])):c("",!0),e.tab===2?(r(),d("div",u9,[t("div",c9,[L(ZA,{"event-id":e.selectedEvent.id,bot:s.bot},null,8,["event-id","bot"])])])):c("",!0),e.tab===3?(r(),d("div",m9,[t("div",h9,[e.loadAppointmentForm?c("",!0):(r(),J(EP,{key:0,bot:s.bot,onCallback:e.callbackAppointment,"event-id":e.selectedEvent.id,appointment:e.selectedAppointment},null,8,["bot","onCallback","event-id","appointment"]))]),t("div",p9,[_9,e.loadAppointments?c("",!0):(r(),J(a7,{key:0,"event-id":e.selectedEvent.id,onSelect:e.selectAppointment,bot:s.bot},null,8,["event-id","onSelect","bot"]))])])):c("",!0),e.tab===4?(r(),d("div",v9,[t("div",f9,[e.loadReviewForm?c("",!0):(r(),J(OM,{key:0,review:e.selectedReview,bot:s.bot,onCallback:o[8]||(o[8]=a=>e.callbackReview()),"event-id":e.selectedEvent.id},null,8,["review","bot","event-id"]))]),t("div",b9,[g9,e.loadReviews?c("",!0):(r(),J(WM,{key:0,bot:s.bot,onSelect:e.selectReview,"event-id":e.selectedEvent.id},null,8,["bot","onSelect","event-id"]))])])):c("",!0)])):c("",!0)],64))}}),k9={class:"row"},w9={class:"col-12 mb-3"},C9={class:"form-label",id:"quiz-title"},F9=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),T9=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),D9={class:"col-12 mb-3"},S9={class:"form-check"},P9=t("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),O9={key:0,class:"col-12 mb-3"},A9={class:"form-label",id:"quiz-images"},M9=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),j9=t("div",null," Изображение, которое видит пользователь при выборе квиза ",-1),q9=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),U9={class:"col-12 mb-3"},z9={class:"form-label",id:"quiz-description"},V9=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),R9=t("div",null," Краткая информация о квизе ",-1),Y9=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),I9={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},B9={class:"col-12 mb-3"},N9={class:"form-label",id:"quiz-time_limit"},E9=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Q9=t("div",null," Время на ответ ",-1),L9=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),x9={class:"col-12 mb-3"},W9={class:"form-check"},H9=t("label",{class:"form-check-label",for:"is-group"}," Показывать ответы по окончанию раунда ",-1),K9={class:"col-12 mb-3"},X9={class:"form-check"},Z9=t("label",{class:"form-check-label",for:"is_active"}," Квиз виден пользователям ",-1),G9={class:"col-12 mb-3"},J9={class:"form-check"},ej=t("label",{class:"form-check-label",for:"round_mode"}," Использовать систему раундов ",-1),tj={class:"col-12 mb-3"},sj={class:"form-check"},oj=t("label",{class:"form-check-label",for:"polling_mode"}," Квиз в режиме опроса (без команд) ",-1),nj={class:"col-12 mb-3"},aj={class:"form-label",id:"quiz-time_limit"},lj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ij=t("div",null," Число попыток прохождения квиза ",-1),rj=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),dj={class:"col-12 mb-3"},uj={class:"form-label",id:"quiz-time_limit"},cj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),mj=t("div",null," Сколько % нужно ответить чтоб пройти ",-1),hj=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),pj={class:"row"},_j={class:"col-12 py-2"},vj={class:"col-12 mb-3"},fj={class:"row"},bj={class:"col-10"},gj={class:"form-label",id:"quiz-success_message"},yj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$j=t("div",null," Текст в случае успешного прохождения квиза ",-1),kj=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wj={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Cj=["onUpdate:modelValue"],Fj={class:"col-2 d-flex align-items-center justify-content-center"},Tj=["disabled","onClick"],Dj={class:"row"},Sj={class:"col-12 py-2"},Pj={class:"col-12 mb-3"},Oj={class:"row"},Aj={class:"col-10"},Mj=["id"],jj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qj=t("div",null," Текст в случае неудачного прохождения квиза ",-1),Uj=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),zj={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Vj=["onUpdate:modelValue"],Rj={class:"col-2 d-flex align-items-center justify-content-center"},Yj=["disabled","onClick"],Ij={class:"row"},Bj={class:"col-12 mb-3"},Nj={class:"form-floating"},Ej=["value","selected"],Qj=t("label",{for:"quiz-display-type"},"Тип вывода вопросов",-1),Lj={key:0,class:"row"},xj={class:"col-12 mb-3"},Wj={class:"form-label",id:"quiz-time_limit"},Hj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Kj=t("div",null," Дата и время начала квиза ",-1),Xj=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Zj={class:"col-12 mb-3"},Gj={class:"form-label",id:"quiz-time_limit"},Jj=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),eq=t("div",null," Дата и время окончания квиза ",-1),tq=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),sq={class:"col-12 mb-3"},oq={class:"form-label",id:"quiz-time_limit"},nq=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),aq=t("div",null," Дата и время окончания квиза. Квиз создается на 1 игру. Данное поле заполняется автоматически при прохождении квиза командой. ",-1),lq={class:"row"},iq={class:"col-12"},rq={type:"submit",class:"btn btn-outline-success w-100 p-3"},dq={key:0},uq={key:1},cq={props:["quiz","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"],quizForm:{id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]}}},watch:{quizForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.quiz&&this.$nextTick(()=>{this.quizForm={id:this.quiz.id||null,title:this.quiz.title||null,image:this.quiz.image||null,description:this.quiz.description||null,completed_at:this.quiz.completed_at?this.$filters.currentFull(this.quiz.completed_at):null,start_at:this.quiz.start_at?this.$filters.currentFull(this.quiz.start_at):null,end_at:this.quiz.end_at?this.$filters.currentFull(this.quiz.end_at):null,display_type:this.quiz.display_type||0,time_limit:this.quiz.time_limit||30,show_answers:this.quiz.show_answers||!1,polling_mode:this.quiz.polling_mode||!1,round_mode:this.quiz.round_mode||!1,is_active:this.quiz.is_active||!1,try_count:this.quiz.try_count||1,success_percent:this.quiz.success_percent||50,success_message:this.quiz.success_message||["Задание успешно пройдено!"],failure_message:this.quiz.failure_message||["К сожалению вы не прошли задание!"]}})},methods:{selectPhoto(s){this.quizForm.image=s.file_id},removeMessage(s,e){this.quizForm[s||"success_message"].splice(e,1)},addMessage(s,e){this.quizForm[s||"success_message"].push(e)},submitForm(){let s=new FormData;Object.keys(this.quizForm).forEach(e=>{const o=this.quizForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("storeQuiz",{quizForm:s}).then(e=>{this.quizForm={id:null,title:null,image:null,description:null,completed_at:null,start_at:null,end_at:null,display_type:0,time_limit:30,show_answers:!1,polling_mode:!1,round_mode:!1,is_active:!1,try_count:1,success_percent:50,success_message:["Задание успешно пройдено!"],failure_message:["К сожалению вы не прошли задание!"]},this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},Un=Object.assign(cq,{__name:"QuizForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d("form",{onSubmit:o[16]||(o[16]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"])),class:"py-3"},[t("div",k9,[t("div",w9,[t("label",C9,[L(a,{content:"Название вашего квиза"},{default:S(()=>[F9]),_:1}),g(" Название квиза "),T9]),f(t("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":o[0]||(o[0]=n=>e.quizForm.title=n),maxlength:"255","aria-describedby":"quiz-title",required:""},null,512),[[E,e.quizForm.title]])]),t("div",D9,[t("div",S9,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>e.need_media=n),type:"checkbox",id:"need_media"},null,512),[[ke,e.need_media]]),P9])]),e.need_media?(r(),d("div",O9,[t("label",A9,[L(a,null,{content:S(()=>[j9]),default:S(()=>[M9]),_:1}),g(" Изображение к квизу "),q9]),L(kt,{"need-photo":!0,selected:e.quizForm.image,onSelect:e.selectPhoto},null,8,["selected","onSelect"])])):c("",!0),t("div",U9,[t("label",z9,[L(a,null,{content:S(()=>[R9]),default:S(()=>[V9]),_:1}),g(" Описание события "),Y9,e.quizForm.description?(r(),d("small",I9," Длина текста "+b(e.quizForm.description.length)+"/255",1)):c("",!0)]),f(t("textarea",{class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":o[2]||(o[2]=n=>e.quizForm.description=n),"aria-describedby":"quiz-description",required:""},`
                    `,512),[[E,e.quizForm.description]])]),t("div",B9,[t("label",N9,[L(a,null,{content:S(()=>[Q9]),default:S(()=>[E9]),_:1}),g(" Лимит времени на ответ в секундах "),L9]),f(t("input",{type:"number",class:"form-control",placeholder:"Лимит времени на ответ","aria-label":"Лимит времени на ответ",step:"0.1",min:"0","onUpdate:modelValue":o[3]||(o[3]=n=>e.quizForm.time_limit=n),"aria-describedby":"quiz-time_limit",required:""},null,512),[[E,e.quizForm.time_limit]])]),t("div",x9,[t("div",W9,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=n=>e.quizForm.show_answers=n),type:"checkbox",id:"is-group"},null,512),[[ke,e.quizForm.show_answers]]),H9])]),t("div",K9,[t("div",X9,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=n=>e.quizForm.is_active=n),type:"checkbox",id:"is_active"},null,512),[[ke,e.quizForm.is_active]]),Z9])]),t("div",G9,[t("div",J9,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=n=>e.quizForm.round_mode=n),type:"checkbox",id:"round_mode"},null,512),[[ke,e.quizForm.round_mode]]),ej])]),t("div",tj,[t("div",sj,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=n=>e.quizForm.polling_mode=n),type:"checkbox",id:"polling_mode"},null,512),[[ke,e.quizForm.polling_mode]]),oj])]),t("div",nj,[t("label",aj,[L(a,null,{content:S(()=>[ij]),default:S(()=>[lj]),_:1}),g(" Количество попыток "),rj]),f(t("input",{type:"number",class:"form-control",placeholder:"Число попыток","aria-label":"Число попыток",step:"1",min:"1","onUpdate:modelValue":o[8]||(o[8]=n=>e.quizForm.try_count=n),"aria-describedby":"quiz-try_count",required:""},null,512),[[E,e.quizForm.try_count]])]),t("div",dj,[t("label",uj,[L(a,null,{content:S(()=>[mj]),default:S(()=>[cj]),_:1}),g(" % для прохождения "),hj]),f(t("input",{type:"number",class:"form-control",placeholder:"Процент для победы","aria-label":"Процент для победы",step:"1",min:"0","onUpdate:modelValue":o[9]||(o[9]=n=>e.quizForm.success_percent=n),"aria-describedby":"quiz-success_percent",required:""},null,512),[[E,e.quizForm.success_percent]])])]),t("div",pj,[t("div",_j,[t("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:o[10]||(o[10]=n=>e.addMessage("success_message",null))},"Добавить еще вариант текста ")]),(r(!0),d(Y,null,ee(e.quizForm.success_message,(n,l)=>(r(),d("div",vj,[t("div",fj,[t("div",bj,[t("label",gj,[L(a,null,{content:S(()=>[$j]),default:S(()=>[yj]),_:1}),g(" Текст при победе "),kj,e.quizForm.success_message[l]?(r(),d("small",wj," Длина текста "+b(e.quizForm.success_message[l].length)+"/255",1)):c("",!0)]),f(t("textarea",{class:"form-control",placeholder:"Текст при победе","aria-label":"Текст при победе",maxlength:"255","onUpdate:modelValue":i=>e.quizForm.success_message[l]=i,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,Cj),[[E,e.quizForm.success_message[l]]])]),t("div",Fj,[t("button",{class:"btn btn-outline-danger",disabled:e.quizForm.success_message.length<=1,onClick:i=>e.removeMessage("success_message",l)},"Удалить ",8,Tj)])])]))),256))]),t("div",Dj,[t("div",Sj,[t("button",{class:"btn btn-outline-info rounded-5",type:"button",onClick:o[11]||(o[11]=n=>e.addMessage("failure_message",null))},"Добавить еще вариант текста ")]),(r(!0),d(Y,null,ee(e.quizForm.failure_message,(n,l)=>(r(),d("div",Pj,[t("div",Oj,[t("div",Aj,[t("label",{class:"form-label",id:"quiz-failure_message"+l},[L(a,null,{content:S(()=>[qj]),default:S(()=>[jj]),_:1}),g(" Текст при проигрыше "),Uj,e.quizForm.failure_message[l]?(r(),d("small",zj," Длина текста "+b(e.quizForm.failure_message[l].length)+"/255",1)):c("",!0)],8,Mj),f(t("textarea",{class:"form-control",placeholder:"Текст при проигрыше","aria-label":"Текст при проигрыше",maxlength:"255","onUpdate:modelValue":i=>e.quizForm.failure_message[l]=i,"aria-describedby":"quiz-success_message",required:""},`
                    `,8,Vj),[[E,e.quizForm.failure_message[l]]])]),t("div",Rj,[t("button",{class:"btn btn-outline-danger",disabled:e.quizForm.failure_message.length<=1,onClick:i=>e.removeMessage("failure_message",l)},"Удалить ",8,Yj)])])]))),256))]),t("div",Ij,[t("div",Bj,[t("div",Nj,[f(t("select",{class:"form-select","onUpdate:modelValue":o[12]||(o[12]=n=>e.quizForm.display_type=n),id:"quiz-display-type","aria-label":"quiz-display-type"},[(r(!0),d(Y,null,ee(e.types,(n,l)=>(r(),d("option",{value:l,selected:l==e.quizForm.display_type},b(n),9,Ej))),256))],512),[[Vt,e.quizForm.display_type]]),Qj])])]),e.quizForm.polling_mode?c("",!0):(r(),d("div",Lj,[t("div",xj,[t("label",Wj,[L(a,null,{content:S(()=>[Kj]),default:S(()=>[Hj]),_:1}),g(" Дата и время начала начала "),Xj]),f(t("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время начала квиза ","aria-label":"Дата и время начала квиза",maxlength:"255","onUpdate:modelValue":o[13]||(o[13]=n=>e.quizForm.start_at=n),"aria-describedby":"quiz-start_at",required:""},null,512),[[E,e.quizForm.start_at]])]),t("div",Zj,[t("label",Gj,[L(a,null,{content:S(()=>[eq]),default:S(()=>[Jj]),_:1}),g(" Дата и время окончания квиза "),tq]),f(t("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время окончания квиза","aria-label":"Дата и время окончания квиза",maxlength:"255","onUpdate:modelValue":o[14]||(o[14]=n=>e.quizForm.end_at=n),"aria-describedby":"quiz-end_at",required:""},null,512),[[E,e.quizForm.end_at]])]),t("div",sq,[t("label",oq,[L(a,null,{content:S(()=>[aq]),default:S(()=>[nq]),_:1}),g(" Дата и время прохождения квиза ")]),f(t("input",{type:"datetime-local",class:"form-control",placeholder:"Дата и время прохождения квиза","aria-label":"Дата и время прохождения квиза",maxlength:"255","onUpdate:modelValue":o[15]||(o[15]=n=>e.quizForm.completed_at=n),"aria-describedby":"quiz-completed_at"},null,512),[[E,e.quizForm.completed_at]])])])),t("div",lq,[t("div",iq,[t("button",rq,[e.quizForm.id==null?(r(),d("span",dq,"Создать квиз")):(r(),d("span",uq,"Обновить квиз"))])])])],32)}}}),mq={class:"row py-2"},hq={class:"col-12"},pq={class:"input-group mb-3"},_q={class:"col-12"},vq={key:0,class:"table"},fq=t("th",{scope:"col"},"Число вопросов",-1),bq=t("th",{scope:"col"},"Число команд",-1),gq=t("th",{scope:"col"},"Действие",-1),yq={scope:"row"},$q=["onClick"],kq={key:0,style:{width:"50px",height:"50px"},alt:""},wq={key:1},Cq={key:0,class:"mb-0"},Fq={key:1},Tq={key:0,class:"mb-0"},Dq={key:1},Sq={key:0,class:"mb-0"},Pq={key:1},Oq={key:0,class:"fa-solid fa-chevron-down text-success"},Aq={key:1,class:"fa-solid fa-xmark text-danger"},Mq={key:0,class:"fa-solid fa-chevron-down text-success"},jq={key:1,class:"fa-solid fa-xmark text-danger"},qq={key:0,class:"dropdown"},Uq=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),zq={class:"dropdown-menu"},Vq={key:0},Rq=["onClick"],Yq={key:1},Iq=t("div",{class:"alert alert-warning alert-dismissible fade show",role:"alert"},[t("strong",null,"Внимание!"),g(" Вы еще не добавили ни одного квиза! "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})],-1),Bq={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Nq={class:"d-flex justify-content-center mb-3"},Eq={alt:"",width:"100",height:"100"},Qq=t("h1",{class:"text-body-emphasis"},"Создание Квиза",-1),Lq=t("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Квиз - это игра. Создавайте игры и делитесь с клиентами ссылкой на игру. Формируйте команды, начисляйте баллы, меняйте баллы на вкусные призы. Всё в ваших руках. ",-1),xq={class:"d-inline-flex gap-2 mb-5"},Wq=t("a",{href:"https://telegra.ph/Sozdanie-Kviza-01-13",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Hq={key:0,class:"col-12"},Kq={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,quizzes:[],search:null,paginate_object:null}},computed:{...Ne(["getQuizzes","getQuizzesPaginateObject"])},mounted(){this.loadQuizzes()},methods:{removeQuiz(s){this.loading=!0,this.$store.dispatch("removeQuiz",{quizId:s}).then(e=>{this.loading=!1,this.loadQuizzes(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},createQuiz(){this.$emit("create")},nextQuizzes(s){this.loadQuizzes(s)},selectEvent(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizzes(0)},loadQuizzes(s=0){this.loading=!0,this.$store.dispatch("loadQuizzes",{dataObject:{bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.quizzes=this.getQuizzes,this.paginate_object=this.getQuizzesPaginateObject}).catch(()=>{this.loading=!1})}}},Xq=Object.assign(Kq,{__name:"QuizTable",setup(s){return(e,o)=>{const a=ss("lazy");return r(),d("div",mq,[t("div",hq,[t("div",pq,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск квиза","aria-label":"Поиск квиза","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),"aria-describedby":"quiz-search-quiz"},null,512),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=n=>e.loadQuizzes(0)),type:"button",id:"quiz-search-quiz"},"Найти ")])]),t("div",_q,[e.quizzes.length>0?(r(),d("table",vq,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=n=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=n=>e.loadAndOrder("title"))},"Название"),fq,bq,t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=n=>e.loadAndOrder("image"))},"Изображение к квизу"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[5]||(o[5]=n=>e.loadAndOrder("description"))},"Описание"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[6]||(o[6]=n=>e.loadAndOrder("completed_at"))},"Квиз пройден"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=n=>e.loadAndOrder("start_at"))},"Дата и время начала"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[8]||(o[8]=n=>e.loadAndOrder("end_at"))},"Дата и время завершения"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[9]||(o[9]=n=>e.loadAndOrder("display_type"))},"Тип отображения"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[10]||(o[10]=n=>e.loadAndOrder("show_answers"))},"Показывать ответы по окончанию раунда "),t("th",{scope:"col",class:"cursor-pointer",onClick:o[11]||(o[11]=n=>e.loadAndOrder("is_active"))},"Активный "),t("th",{scope:"col",class:"cursor-pointer",onClick:o[12]||(o[12]=n=>e.loadAndOrder("updated_at"))},"Дата изменения"),gq])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.quizzes,(n,l)=>(r(),d("tr",{class:M({"border-info":n.deleted_at==null,"border-danger":n.deleted_at!=null})},[t("th",yq,b(n.id),1),t("td",{onClick:i=>e.selectEvent(n)},b(n.title||"Не указано"),9,$q),t("td",null,b((n.questions||[]).length),1),t("td",null,b((n.commands||[]).length),1),t("td",null,[n.image!=null?f((r(),d("img",kq,null,512)),[[a,"/file-by-file-id/"+n.image]]):(r(),d("p",wq,"не указано"))]),t("td",null,b(n.description||"Не указано"),1),t("td",null,[n.completed_at?(r(),d("p",Cq,b(e.$filters.currentFull(n.completed_at)),1)):(r(),d("p",Fq,"Не задано"))]),t("td",null,[n.start_at?(r(),d("p",Tq,b(e.$filters.currentFull(n.start_at)),1)):(r(),d("p",Dq,"Не задано"))]),t("td",null,[n.end_at?(r(),d("p",Sq,b(e.$filters.currentFull(n.end_at)),1)):(r(),d("p",Pq,"Не задано"))]),t("td",null,b(n.display_type),1),t("td",null,b(n.time_limit),1),t("td",null,[n.show_answers?(r(),d("i",Oq)):(r(),d("i",Aq))]),t("td",null,[n.is_multiply?(r(),d("i",Mq)):(r(),d("i",jq))]),t("td",null,b(e.$filters.current(n.updated_at)),1),t("td",null,[n.id?(r(),d("div",qq,[Uq,t("ul",zq,[n.deleted_at==null?(r(),d("li",Vq,[t("a",{class:"dropdown-item",onClick:i=>e.removeQuiz(n.id),href:"javascript:void(0)"},"Удалить",8,Rq)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("div",Yq,[Iq,t("div",Bq,[t("div",Nq,[f(t("img",Eq,null,512),[[a,"../images/icon.png"]])]),Qq,Lq,t("div",xq,[t("button",{onClick:o[13]||(o[13]=(...n)=>e.createQuiz&&e.createQuiz(...n)),class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"}," Добавить "),Wq])])]))]),e.quizzes.length>0?(r(),d("div",Hq,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextQuizzes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0)])}}}),Zq={props:{type:String,value:String}},Gq={class:"d-flex mb-2"},Jq={class:"form-floating mb-3"},eU=["value"],tU=t("label",{for:"custom-url-link-for-success"},"Ссылка на файл",-1);function sU(s,e,o,a,n,l){return r(),d(Y,null,[t("div",Gq,[t("span",{class:M(["badge bg-secondary cursor-pointer mr-1",{"bg-success":o.type=="video"}]),onClick:e[0]||(e[0]=i=>s.$emit("update:type","video"))},"Видео",2),t("span",{class:M(["badge bg-secondary cursor-pointer mr-1",{"bg-success":o.type=="photo"}]),onClick:e[1]||(e[1]=i=>s.$emit("update:type","photo"))},"Изображение",2),t("span",{class:M(["badge bg-secondary cursor-pointer mr-1",{"bg-success":o.type=="audio"}]),onClick:e[2]||(e[2]=i=>s.$emit("update:type","audio"))},"Звук",2)]),t("div",Jq,[t("input",{type:"url",class:"form-control",value:o.value,onInput:e[3]||(e[3]=i=>s.$emit("update:value",i.target.value)),id:"custom-url-link-for-success",placeholder:"https://...."},null,40,eU),tU])],64)}const wo=Ht(Zq,[["render",sU]]),oU={class:"row py-3"},nU={class:"col-12"},aU={class:"row"},lU={class:"col-12 mb-3"},iU={key:0},rU=["onClick"],dU={class:"form-label",id:"quiz-round"},uU=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),cU=t("div",null," Раунд, в котором будет отображен вопрос ",-1),mU=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),hU={class:"col-12 mb-3"},pU={class:"form-label",id:"event-on_after_appointment"},_U=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),vU=t("div",null," Текст вопроса ",-1),fU=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),bU={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},gU={class:"col-12 mb-3"},yU={class:"form-check"},$U=t("label",{class:"form-check-label",for:"need_media"}," Нужен медиа-контент ",-1),kU={key:0,class:"col-12 mb-3"},wU={class:"form-label",id:"quiz-images"},CU=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),FU=t("div",null," Изображение, видео, аудио сопровождение вопроса ",-1),TU={key:0,class:"badge rounded-pill text-bg-info m-0"},DU=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),SU=t("h6",null,"Вставьте ссылку на контент...",-1),PU=t("h6",null,"...или выберите из доступных",-1),OU={class:"col-12 mb-3"},AU={class:"form-check"},MU=t("label",{class:"form-check-label",for:"is_multiply"}," Множественные ответы ",-1),jU={class:"col-12 mb-3"},qU={class:"form-check"},UU=t("label",{class:"form-check-label",for:"is_open"}," Открытый вопрос ",-1),zU={class:"col-12 mb-3"},VU={class:"form-label",id:"quiz-description"},RU=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),YU=t("div",null," Текст при выборе правильного ответа ",-1),IU=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),BU={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},NU={class:"col-12 mb-3"},EU={class:"form-check"},QU=t("label",{class:"form-check-label",for:"need_media_for_success"}," Нужен медиа-контент при правильном ответе ",-1),LU={key:1,class:"col-12 mb-3"},xU=t("h6",null,"Вставьте ссылку на контент...",-1),WU=t("h6",null,"...или выберите из доступных",-1),HU={class:"col-12 mb-3"},KU={class:"form-label",id:"quiz-description"},XU=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ZU=t("div",null," Текст в выбора неправильного ответа ",-1),GU=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),JU={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},ez={class:"col-12 mb-3"},tz={class:"form-check"},sz=t("label",{class:"form-check-label",for:"need_media_for_failed"}," Нужен медиа-контент при неправильном ответе ",-1),oz={key:2,class:"col-12 mb-3"},nz=t("h6",null,"Вставьте ссылку на контент...",-1),az=t("h6",null,"...или выберите из доступных",-1),lz={class:"row"},iz={class:"col-12"},rz={class:"col-12"},dz={key:0,class:"table"},uz=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Текст вопроса"),t("th",{scope:"col"},"Баллы"),t("th",{scope:"col"},"Контент"),t("th",{scope:"col"},"Тип контента"),t("th",{scope:"col"},"Является верным"),t("th",{scope:"col"},"Действие")])],-1),cz={scope:"row"},mz={class:"form-floating mb-3"},hz=["onUpdate:modelValue","id"],pz=["for"],_z={class:"form-floating mb-3"},vz=["onUpdate:modelValue","id"],fz=["for"],bz=["onClick"],gz={class:"form-check"},yz=["onUpdate:modelValue","id"],$z=["for"],kz={class:"dropdown"},wz=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),Cz={class:"dropdown-menu"},Fz={key:0},Tz=["onClick"],Dz={key:1},Sz=["onClick"],Pz={key:1},Oz={class:"row"},Az={class:"col-12"},Mz={type:"submit",class:"btn btn-outline-success w-100 p-3"},jz={key:0},qz={key:1},Uz={class:"modal fade",id:"chooseMediaContent",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},zz={class:"modal-dialog"},Vz={class:"modal-content"},Rz={key:0,class:"modal-body"},Yz=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Iz={props:["quizId","bot","question"],data(){return{step:0,load:!1,selectedQuestionIndex:null,need_media:!1,need_media_for_success:!1,need_media_for_failed:!1,rounds:[],questionForm:{id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}}},watch:{questionForm:{handler(s){this.need_reset=!0},deep:!0},need_media:function(s,e){this.need_page_images||(this.questionForm.media_content=null,this.questionForm.content_type=null)},need_media_for_success:function(s,e){this.need_page_images||(this.questionForm.success_media_content=null,this.questionForm.success_media_content_type=null)},need_media_for_failed:function(s,e){this.need_page_images||(this.questionForm.failure_media_content=null,this.questionForm.failure_media_content_type=null)}},mounted(){this.loadQuizRounds(),this.question&&(this.question.media_content!=null&&(this.need_media=!0),this.question.success_media_content!=null&&(this.need_media_for_success=!0),this.question.failure_media_content!=null&&(this.need_media_for_failed=!0),this.$nextTick(()=>{this.questionForm={id:this.question.id||null,text:this.question.text||null,round:this.question.round||null,media_content:this.question.media_content||null,content_type:this.question.content_type||null,is_multiply:this.question.is_multiply||!1,is_open:this.question.is_open||!1,answers:this.question.answers||[],success_message:this.question.success_message||null,failure_message:this.question.failure_message||null,success_media_content:this.question.success_media_content||null,failure_media_content:this.question.failure_media_content||null,success_media_content_type:this.question.success_media_content_type||null,failure_media_content_type:this.question.failure_media_content_type||null}}))},methods:{loadQuizRounds(){this.$store.dispatch("loadQuizRounds",{dataObject:{bot_id:this.bot.id||null,quiz_id:this.quizId||null}}).then(s=>{this.rounds=s})},chooseMediaContent(s){this.selectedQuestionIndex=null,this.$nextTick(()=>{this.selectedQuestionIndex=s}),new bootstrap.Modal(document.getElementById("chooseMediaContent"),{}).show()},selectMediaForFailure(s){this.questionForm.failure_media_content=s.file_id,this.questionForm.failure_media_content_type=s.type},selectMediaForSuccess(s){this.questionForm.success_media_content=s.file_id,this.questionForm.success_media_content_type=s.type},selectMediaForAnswer(s){this.questionForm.answers[this.selectedQuestionIndex].media_content=s.file_id,this.questionForm.answers[this.selectedQuestionIndex].content_type=s.type},selectMedia(s){this.questionForm.media_content=s.file_id,this.questionForm.content_type=s.type},clearQuestionForm(){this.questionForm={id:null,text:null,round:null,media_content:null,content_type:null,is_multiply:!1,is_open:!1,answers:[],success_message:null,failure_message:null,success_media_content:null,failure_media_content:null,success_media_content_type:null,failure_media_content_type:null}},addNewAnswer(){this.questionForm.answers.push({text:null,media_content:null,content_type:null,is_right_answer:!1,points:0})},removeAnswerFromArray(s){this.questionForm.answers.splice(s,1)},removeAnswer(s){this.$store.dispatch("removeQuizAnswer",{quizAnswerId:s}).then(e=>{this.$notify("Вопрос успешно удален");let o=this.questionForm.answers.findIndex(a=>a.id==s);this.questionForm.answers.splice(o,1)}).catch(e=>{this.$notify("Ошибка удаления вопроса")})},submitForm(){let s=new FormData;Object.keys(this.questionForm).forEach(e=>{const o=this.questionForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),s.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizQuestion",{quizQuestionForm:s}).then(e=>{this.$emit("callback",e.data),this.$notify("Вопрос успешно создан"),this.clearQuestionForm(),this.loadQuizRounds()}).catch(e=>{this.$notify("Ошибка создания вопроса")})}}},Bz=Object.assign(Iz,{__name:"QuizQuestionForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d(Y,null,[t("div",oU,[t("div",nU,[t("button",{onClick:o[0]||(o[0]=(...n)=>e.clearQuestionForm&&e.clearQuestionForm(...n)),class:"btn btn-primary"},"Новый вопрос ")])]),t("form",{onSubmit:o[17]||(o[17]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",aU,[t("div",lU,[e.rounds.length>0?(r(),d("p",iU,[g(" Ранее созданные раунды: "),(r(!0),d(Y,null,ee(e.rounds,n=>(r(),d("span",{onClick:l=>e.questionForm.round=n,class:"badge bg-primary mr-1 cursor-pointer"},b(n),9,rU))),256))])):c("",!0),t("label",dU,[L(a,null,{content:S(()=>[cU]),default:S(()=>[uU]),_:1}),g(" Раунд "),mU]),f(t("input",{type:"number",class:"form-control",placeholder:"Раунд","aria-label":"Раундт",step:"1",min:"1","onUpdate:modelValue":o[1]||(o[1]=n=>e.questionForm.round=n),"aria-describedby":"quiz-round",required:""},null,512),[[E,e.questionForm.round]])]),t("div",hU,[t("label",pU,[L(a,null,{content:S(()=>[vU]),default:S(()=>[_U]),_:1}),g(" Текст вопроса "),fU,e.questionForm.text?(r(),d("small",bU," Длина текста "+b(e.questionForm.text.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст вопроса","aria-label":"Текст вопроса","onUpdate:modelValue":o[2]||(o[2]=n=>e.questionForm.text=n),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[E,e.questionForm.text]])]),t("div",gU,[t("div",yU,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=n=>e.need_media=n),type:"checkbox",id:"need_media"},null,512),[[ke,e.need_media]]),$U])]),e.need_media?(r(),d("div",kU,[t("label",wU,[L(a,null,{content:S(()=>[FU]),default:S(()=>[CU]),_:1}),g(" Медиа контент к вопросу "),e.questionForm.content_type?(r(),d("span",TU,b(e.questionForm.content_type),1)):c("",!0),DU]),SU,L(wo,{type:e.questionForm.media_content,"onUpdate:type":o[4]||(o[4]=n=>e.questionForm.media_content=n),value:e.questionForm.content_type,"onUpdate:value":o[5]||(o[5]=n=>e.questionForm.content_type=n)},null,8,["type","value"]),PU,L(kt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.media_content],onSelect:e.selectMedia},null,8,["selected","onSelect"])])):c("",!0),t("div",OU,[t("div",AU,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=n=>e.questionForm.is_multiply=n),type:"checkbox",id:"is_multiply"},null,512),[[ke,e.questionForm.is_multiply]]),MU])]),t("div",jU,[t("div",qU,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=n=>e.questionForm.is_open=n),type:"checkbox",id:"is_open"},null,512),[[ke,e.questionForm.is_open]]),UU])]),t("div",zU,[t("label",VU,[L(a,null,{content:S(()=>[YU]),default:S(()=>[RU]),_:1}),g(" Текст при выборе правильного ответа "),IU,e.questionForm.success_message?(r(),d("small",BU," Длина текста "+b(e.questionForm.success_message.length)+"/255",1)):c("",!0)]),f(t("textarea",{class:"form-control",placeholder:"Текст при правильном ответе","aria-label":"Текст при правильном ответе",maxlength:"255","onUpdate:modelValue":o[8]||(o[8]=n=>e.questionForm.success_message=n),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[E,e.questionForm.success_message]])]),t("div",NU,[t("div",EU,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=n=>e.need_media_for_success=n),type:"checkbox",id:"need_media_for_success"},null,512),[[ke,e.need_media_for_success]]),QU])]),e.need_media_for_success?(r(),d("div",LU,[xU,L(wo,{type:e.questionForm.success_media_content_type,"onUpdate:type":o[10]||(o[10]=n=>e.questionForm.success_media_content_type=n),value:e.questionForm.success_media_content,"onUpdate:value":o[11]||(o[11]=n=>e.questionForm.success_media_content=n)},null,8,["type","value"]),WU,L(kt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.success_media_content],onSelect:e.selectMediaForSuccess},null,8,["selected","onSelect"])])):c("",!0),t("div",HU,[t("label",KU,[L(a,null,{content:S(()=>[ZU]),default:S(()=>[XU]),_:1}),g(" Текст при выборе неправильного ответа "),GU,e.questionForm.failure_message?(r(),d("small",JU," Длина текста "+b(e.questionForm.failure_message.length)+"/255",1)):c("",!0)]),f(t("textarea",{class:"form-control",placeholder:"Текст при неправильном ответе","aria-label":"Текст при неправильном ответе",maxlength:"255","onUpdate:modelValue":o[12]||(o[12]=n=>e.questionForm.failure_message=n),"aria-describedby":"quiz-question-success_message",required:""},`
                    `,512),[[E,e.questionForm.failure_message]])]),t("div",ez,[t("div",tz,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[13]||(o[13]=n=>e.need_media_for_failed=n),type:"checkbox",id:"need_media_for_failed"},null,512),[[ke,e.need_media_for_failed]]),sz])]),e.need_media_for_failed?(r(),d("div",oz,[nz,L(wo,{type:e.questionForm.failure_media_content_type,"onUpdate:type":o[14]||(o[14]=n=>e.questionForm.failure_media_content_type=n),value:e.questionForm.failure_media_content,"onUpdate:value":o[15]||(o[15]=n=>e.questionForm.failure_media_content=n)},null,8,["type","value"]),az,L(kt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.failure_media_content],onSelect:e.selectMediaForFailure},null,8,["selected","onSelect"])])):c("",!0)]),t("div",lz,[t("div",iz,[t("button",{onClick:o[16]||(o[16]=(...n)=>e.addNewAnswer&&e.addNewAnswer(...n)),type:"button",class:"btn btn-outline-success rounded-5"}," Добавить ответы ")]),t("div",rz,[e.questionForm.answers.length>0?(r(),d("table",dz,[uz,t("tbody",null,[(r(!0),d(Y,null,ee(e.questionForm.answers,(n,l)=>(r(),d("tr",{class:M({"border-info":n.deleted_at==null,"border-danger":n.deleted_at!=null})},[t("th",cz,b(n.id||"Новый"),1),t("td",null,[t("div",mz,[f(t("input",{type:"text","onUpdate:modelValue":i=>e.questionForm.answers[l].text=i,class:"form-control",id:"answer-text-"+l,placeholder:"Текст ответа"},null,8,hz),[[E,e.questionForm.answers[l].text]]),t("label",{for:"answer-text-"+l},"Текст ответа",8,pz)])]),t("td",null,[t("div",_z,[f(t("input",{type:"text","onUpdate:modelValue":i=>e.questionForm.answers[l].points=i,class:"form-control",id:"answer-points-"+l,placeholder:"Текст ответа"},null,8,vz),[[E,e.questionForm.answers[l].points]]),t("label",{for:"answer-points-"+l},"Баллы",8,fz)])]),t("td",null,[t("p",{class:"cursor-pointer",onClick:i=>e.chooseMediaContent(l)},b(n.media_content||"Не указано"),9,bz)]),t("td",null,b(n.content_type||"Не указано"),1),t("td",null,[t("div",gz,[f(t("input",{class:"form-check-input","onUpdate:modelValue":i=>e.questionForm.answers[l].is_right_answer=i,type:"checkbox",id:"answer-is_right_answer-"+l},null,8,yz),[[ke,e.questionForm.answers[l].is_right_answer]]),t("label",{class:"form-check-label",for:"answer-is_right_answer-"+l}," Правильный ответ ",8,$z)])]),t("td",null,[t("div",kz,[wz,t("ul",Cz,[n.id==null?(r(),d("li",Fz,[t("a",{class:"dropdown-item",onClick:i=>e.removeAnswerFromArray(l),href:"javascript:void(0)"},"Удалить",8,Tz)])):c("",!0),n.deleted_at==null&&n.id!=null?(r(),d("li",Dz,[t("a",{class:"dropdown-item",onClick:i=>e.removeAnswer(n.id),href:"javascript:void(0)"},"Удалить",8,Sz)])):c("",!0)])])])],2))),256))])])):(r(),d("p",Pz,"На текущий момент нет ни одного созданного ответа"))])]),t("div",Oz,[t("div",Az,[t("button",Mz,[e.questionForm.id==null?(r(),d("span",jz,"Сохранить вопрос")):(r(),d("span",qz,"Обновить вопрос"))])])])],32),t("div",Uz,[t("div",zz,[t("div",Vz,[e.selectedQuestionIndex!=null?(r(),d("div",Rz,[L(kt,{"need-video":!0,"need-video-note":!0,"need-audio":!0,"need-photo":!0,selected:[e.questionForm.answers[e.selectedQuestionIndex||0].media_content||""],onSelect:e.selectMediaForAnswer},null,8,["selected","onSelect"])])):c("",!0),Yz])])])],64)}}}),Nz={class:"row"},Ez={class:"col-12"},Qz={key:0,class:"table"},Lz=t("th",{scope:"col"},"Число ответов",-1),xz=t("th",{scope:"col"},"Действие",-1),Wz={scope:"row"},Hz=["onClick"],Kz={key:0,class:"fa-solid fa-chevron-down text-success"},Xz={key:1,class:"fa-solid fa-xmark text-danger"},Zz={key:0,class:"fa-solid fa-chevron-down text-success"},Gz={key:1,class:"fa-solid fa-xmark text-danger"},Jz={key:0,class:"dropdown"},eV=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),tV={class:"dropdown-menu"},sV={key:0},oV=["onClick"],nV={key:1},aV={class:"col-12"},lV={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,questions:[],search:null,paginate_object:null}},computed:{...Ne(["getQuizQuestions","getQuizQuestionsPaginateObject"])},mounted(){this.loadQuizQuestions()},methods:{nextQuizQuestion(s){this.loadQuizQuestions(s)},selectQuizQuestion(s){this.$emit("select",s),this.$notify("Вопрос успешно выбран")},removeQuizQuestion(s){this.loading=!0,this.$store.dispatch("removeQuizQuestion",{quizQuestionId:s}).then(e=>{this.loading=!1,this.loadQuizQuestions(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizQuestions(0)},loadQuizQuestions(s=0){this.loading=!0,this.$store.dispatch("loadQuizQuestions",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.questions=this.getQuizQuestions,this.paginate_object=this.getQuizQuestionsPaginateObject}).catch(()=>{this.loading=!1})}}},iV=Object.assign(lV,{__name:"QuizQuestionTable",setup(s){return(e,o)=>(r(),d("div",Nz,[t("div",Ez,[e.questions.length>0?(r(),d("table",Qz,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("text"))},"Текст вопроса"),Lz,t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("round"))},"Раунд"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[3]||(o[3]=a=>e.loadAndOrder("media_content"))},"Контент"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=a=>e.loadAndOrder("content_type"))},"Тип контента"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.loadAndOrder("is_multiply"))},"Множественный"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[6]||(o[6]=a=>e.loadAndOrder("is_open"))},"Открытый"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),xz])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.questions,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",Wz,b(a.id),1),t("td",{onClick:l=>e.selectQuizQuestion(a)},b(a.text||"Не указано"),9,Hz),t("td",null,b((a.answers||[]).length),1),t("td",null,b(a.round||"Не указано"),1),t("td",null,b(a.media_content||"Не указано"),1),t("td",null,b(a.content_type||"Не указано"),1),t("td",null,[a.is_multiply?(r(),d("i",Kz)):(r(),d("i",Xz))]),t("td",null,[a.is_open?(r(),d("i",Zz)):(r(),d("i",Gz))]),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[a.id?(r(),d("div",Jz,[eV,t("ul",tV,[a.deleted_at==null?(r(),d("li",sV,[t("a",{class:"dropdown-item",onClick:l=>e.removeQuizQuestion(a.id),href:"javascript:void(0)"},"Удалить",8,oV)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",nV,"На текущий момент нет ни одного созданного вопроса"))]),t("div",aV,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextQuizQuestion,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),rV={class:"row py-3"},dV={class:"col-12"},uV={class:"row"},cV={class:"col-12 mb-3"},mV={class:"form-label",id:"command-title"},hV=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pV=t("div",null," Название команды ",-1),_V=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),vV={class:"col-12 mb-3"},fV={class:"form-label",id:"event-on_after_appointment"},bV=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),gV=t("div",null," Текст описания команды ",-1),yV=t("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),$V={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},kV=t("div",{class:"col-12 mb-3"},[t("button",{type:"button",class:"btn btn-outline-info rounded-5","data-bs-toggle":"modal","data-bs-target":"#select-players"}," Подобрать участников команды ")],-1),wV={key:0,class:"col-12 mb-3"},CV=t("h4",null,"Пользователи в команде",-1),FV={class:"list-group list-group-numbered"},TV={class:"list-group-item d-flex justify-content-between align-items-start"},DV={class:"ms-2 me-auto"},SV={class:"fw-bold"},PV={class:"dropdown"},OV=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),AV={class:"dropdown-menu"},MV=["onClick"],jV={class:"row"},qV={class:"col-12"},UV={type:"submit",class:"btn btn-outline-success w-100 p-3"},zV={key:0},VV={key:1},RV={class:"modal fade",id:"select-players",tabindex:"-1","aria-labelledby":"select-players-label","aria-hidden":"true"},YV={class:"modal-dialog modal-fullscreen"},IV={class:"modal-content"},BV=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"select-players-label"},"Подбор участников команды"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),NV={class:"modal-body"},EV=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),QV={props:["quizId","bot","command"],data(){return{step:0,load:!1,commandForm:{id:null,title:null,description:null,players:[]}}},watch:{commandForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.command&&this.$nextTick(()=>{this.commandForm={id:this.command.id||null,title:this.command.title||null,description:this.command.description||null,players:this.command.players||[]}})},methods:{removePlayerFromCommand(s){},selectBotUser(s){if(this.commandForm.players.findIndex(o=>o.id==s.id)>=0){this.$notify("Такой пользователь уже есть в списке");return}this.$notify("Пользователь успешно добавлен"),this.commandForm.players.push(s)},clearCommandForm(){this.commandForm={id:null,title:null,description:null,players:[]}},submitForm(){let s=new FormData;Object.keys(this.commandForm).forEach(e=>{const o=this.commandForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),s.append("quiz_id",this.quizId),this.$store.dispatch("storeQuizCommand",{quizCommandForm:s}).then(e=>{this.$emit("callback",e.data),this.$notify("Команда успешно создана"),this.clearCommandForm()}).catch(e=>{this.$notify("Ошибка создания команды")})}}},LV=Object.assign(QV,{__name:"QuizCommandForm",setup(s){return(e,o)=>{const a=gt("Popper");return r(),d(Y,null,[t("div",rV,[t("div",dV,[t("button",{onClick:o[0]||(o[0]=(...n)=>e.clearCommandForm&&e.clearCommandForm(...n)),class:"btn btn-primary"},"Новая команда")])]),t("form",{onSubmit:o[3]||(o[3]=De((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",uV,[t("div",cV,[t("label",mV,[L(a,null,{content:S(()=>[pV]),default:S(()=>[hV]),_:1}),g(" Название команды "),_V]),f(t("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":o[1]||(o[1]=n=>e.commandForm.title=n),"aria-describedby":"command-title",required:""},null,512),[[E,e.commandForm.title]])]),t("div",vV,[t("label",fV,[L(a,null,{content:S(()=>[gV]),default:S(()=>[bV]),_:1}),g(" Описание команды "),yV,e.commandForm.description?(r(),d("small",$V," Длина текста "+b(e.commandForm.description.length)+"/255",1)):c("",!0)]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст описания","aria-label":"Текст описания","onUpdate:modelValue":o[2]||(o[2]=n=>e.commandForm.description=n),maxlength:"255","aria-describedby":"command-text",required:""},`
                    `,512),[[E,e.commandForm.description]])]),kV,e.commandForm.players.length>0?(r(),d("div",wV,[CV,t("ol",FV,[(r(!0),d(Y,null,ee(e.commandForm.players,n=>(r(),d("li",TV,[t("div",DV,[t("div",SV,"#"+b(n.id),1),g(" "+b(n.fio_from_telegram||n.telegram_chat_id),1)]),t("div",PV,[OV,t("ul",AV,[t("li",null,[t("a",{class:"dropdown-item",onClick:l=>e.removePlayerFromCommand(n.id),href:"javascript:void(0)"},"Удалить",8,MV)])])])]))),256))])])):c("",!0)]),t("div",jV,[t("div",qV,[t("button",UV,[e.commandForm.id==null?(r(),d("span",zV,"Сохранить команду")):(r(),d("span",VV,"Обновить команду"))])])])],32),t("div",RV,[t("div",YV,[t("div",IV,[BV,t("div",NV,[L(Xs,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])]),EV])])])],64)}}}),xV={class:"row"},WV={class:"col-12"},HV={key:0,class:"table"},KV=t("th",{scope:"col"},"Число участников",-1),XV=t("th",{scope:"col"},"Действие",-1),ZV={scope:"row"},GV=["onClick"],JV={key:0,class:"dropdown"},eR=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),tR={class:"dropdown-menu"},sR={key:0},oR=["onClick"],nR={key:1},aR={class:"col-12"},lR={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,commands:[],search:null,paginate_object:null}},computed:{...Ne(["getQuizCommands","getQuizCommandsPaginateObject"])},mounted(){this.loadQuizCommands()},methods:{nextQuizCommand(s){this.loadQuizCommands(s)},selectQuizCommand(s){this.$emit("select",s),this.$notify("Вопрос успешно выбран")},removeQuizCommand(s){this.loading=!0,this.$store.dispatch("removeQuizCommand",{quizCommandId:s}).then(e=>{this.loading=!1,this.loadQuizCommands(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizCommands(0)},loadQuizCommands(s=0){this.loading=!0,this.$store.dispatch("loadQuizCommands",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.commands=this.getQuizCommands,this.paginate_object=this.getQuizCommandsPaginateObject}).catch(()=>{this.loading=!1})}}},iR=Object.assign(lR,{__name:"QuizCommandTable",setup(s){return(e,o)=>(r(),d("div",xV,[t("div",WV,[e.commands.length>0?(r(),d("table",HV,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("title"))},"Название"),KV,t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("description"))},"Описание"),XV])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.commands,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",ZV,b(a.id),1),t("td",{onClick:l=>e.selectQuizCommand(a)},b(a.title||"Не указано"),9,GV),t("td",null,b((a.players||[]).length),1),t("td",null,b(a.description||"Не указано"),1),t("td",null,[a.id?(r(),d("div",JV,[eR,t("ul",tR,[a.deleted_at==null?(r(),d("li",sR,[t("a",{class:"dropdown-item",onClick:l=>e.removeQuizCommand(a.id),href:"javascript:void(0)"},"Удалить",8,oR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",nR,"На текущий момент нет ни одной созданной команды"))]),t("div",aR,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextQuizCommand,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),rR={class:"row"},dR={class:"col-12"},uR={key:0,class:"table"},cR=t("th",{scope:"col"},"Название квиза",-1),mR=t("th",{scope:"col"},"Название команды",-1),hR=t("th",{scope:"col"},"Число участников",-1),pR=t("th",{scope:"col"},"Результат",-1),_R=t("th",{scope:"col"},"Действие",-1),vR={scope:"row"},fR=["onClick"],bR={key:0},gR=t("td",null,"-",-1),yR={key:0,class:"dropdown"},$R=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),kR={class:"dropdown-menu"},wR={key:0},CR=["onClick"],FR={key:1},TR={class:"col-12"},DR={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,results:[],search:null,paginate_object:null}},computed:{...Ne(["getQuizResults","getQuizResultsPaginateObject"])},mounted(){this.loadQuizResults()},methods:{nextQuizResult(s){this.loadQuizResults(s)},selectQuizResult(s){this.$emit("select",s),this.$notify("Вопрос успешно выбран")},removeQuizResult(s){this.loading=!0,this.$store.dispatch("removeQuizResult",{quizResultId:s}).then(e=>{this.loading=!1,this.loadQuizResults(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizResults(0)},loadQuizResults(s=0){this.loading=!0,this.$store.dispatch("loadQuizResults",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:100}).then(e=>{this.loading=!1,this.results=this.getQuizResults,this.paginate_object=this.getQuizResultsPaginateObject}).catch(()=>{this.loading=!1})}}},SR=Object.assign(DR,{__name:"QuizResultTable",setup(s){return(e,o)=>(r(),d("div",rR,[t("div",dR,[e.results.length>0?(r(),d("table",uR,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[0]||(o[0]=a=>e.loadAndOrder("id"))},"#"),cR,mR,hR,t("th",{scope:"col",class:"cursor-pointer",onClick:o[1]||(o[1]=a=>e.loadAndOrder("points"))},"Баллы"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.loadAndOrder("times"))},"Время"),pR,_R])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.results,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",vR,b(a.id),1),t("td",{onClick:l=>e.selectQuizResult(a)},b(a.quiz.title||"Не указано"),9,fR),t("td",null,[a.command?(r(),d("span",bR,b(a.command.title||"Не указано"),1)):c("",!0)]),t("td",null,b((a.command.players||[]).length),1),t("td",null,b(a.points||"Не указано"),1),t("td",null,b(a.times||"Не указано"),1),gR,t("td",null,[a.id?(r(),d("div",yR,[$R,t("ul",kR,[a.deleted_at==null?(r(),d("li",wR,[t("a",{class:"dropdown-item",onClick:l=>e.removeQuizResult(a.id),href:"javascript:void(0)"},"Удалить",8,CR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",FR,"На текущий момент нет ни одного созданного вопроса"))]),t("div",TR,[e.paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextQuizResult,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),PR={key:0,class:"py-2"},OR={class:"row"},AR={class:"col-12"},MR={key:1,class:"py-2"},jR={class:"row"},qR={class:"col-12"},UR={key:2,class:"py-2"},zR={class:"row"},VR={class:"col-12"},RR={class:"nav nav-tabs justify-content-center"},YR={key:0,class:"row py-3"},IR={class:"col-12"},BR={key:1,class:"row py-3"},NR={class:"col-12"},ER={class:"col-12 py-3"},QR=t("h4",null,"Доступные вопросы",-1),LR={key:2,class:"row"},xR={class:"col-12"},WR={class:"col-12 py-3"},HR=t("h4",null,"Команды участники квиза",-1),KR={key:3,class:"row"},XR={class:"col-12 py-3"},ZR=t("h4",null,"Статистика",-1),GR={key:4,class:"row"},JR=t("div",{class:"col-12"},null,-1),eY=t("div",{class:"col-12 py-3"},[t("h4",null,"Отзывы к событию")],-1),tY=[JR,eY],sY={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadQuizCommand:!1,loadQuizQuestion:!1,loadQuizQuestionTable:!1,loadQuizCommandTable:!1,loadQuizResult:!1,loadForm:!1,selectedQuiz:null,selectedQuizQuestion:null,selectedQuizCommand:null,selectedQuizResult:null}},mounted(){},methods:{callbackCommandForm(){this.loadQuizCommandTable=!0,this.$nextTick(()=>{this.loadQuizCommandTable=!1})},callbackQuestionForm(){this.loadQuizQuestionTable=!0,this.$nextTick(()=>{this.loadQuizQuestionTable=!1})},callbackForm(){this.loadTable=!0,this.part=0,this.$nextTick(()=>{this.loadTable=!1})},createQuiz(){this.part=2},selectQuizResult(s){this.loadQuizResult=!0,this.$nextTick(()=>{this.loadQuizResult=!1,this.selectedQuizResult=s})},selectQuizCommand(s){this.loadQuizCommand=!0,this.$nextTick(()=>{this.loadQuizCommand=!1,this.selectedQuizCommand=s})},selectQuizQuestion(s){this.loadQuizQuestion=!0,this.$nextTick(()=>{this.loadQuizQuestion=!1,this.selectedQuizQuestion=s})},selectQuiz(s){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedQuiz=s,this.part=1,this.tab=0})}}},oY=Object.assign(sY,{__name:"Quizzes",setup(s){return(e,o)=>(r(),d(Y,null,[e.part===0?(r(),d("div",PR,[t("div",OR,[t("div",AR,[t("button",{type:"button",onClick:o[0]||(o[0]=(...a)=>e.createQuiz&&e.createQuiz(...a)),class:"btn btn-primary"}," Создать новый квиз ")])]),e.loadTable?c("",!0):(r(),J(Xq,{key:0,onCreate:e.createQuiz,onSelect:e.selectQuiz,bot:s.bot},null,8,["onCreate","onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",MR,[t("div",jR,[t("div",qR,[t("button",{type:"button",onClick:o[1]||(o[1]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),J(Un,{key:0,onCallback:e.callbackForm,bot:s.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",UR,[t("div",zR,[t("div",VR,[t("button",{type:"button",onClick:o[2]||(o[2]=a=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),t("ul",RR,[t("li",{class:"nav-item",onClick:o[3]||(o[3]=a=>e.tab=0)},[t("a",{class:M(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о квизе",2)]),t("li",{class:"nav-item",onClick:o[4]||(o[4]=a=>e.tab=1)},[t("a",{class:M(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Вопросы квиза",2)]),t("li",{class:"nav-item",onClick:o[5]||(o[5]=a=>e.tab=2)},[t("a",{class:M(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Команды на квизе",2)]),t("li",{class:"nav-item",onClick:o[6]||(o[6]=a=>e.tab=3)},[t("a",{class:M(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Командная статистика",2)])]),e.tab===0?(r(),d("div",YR,[t("div",IR,[e.loadForm?c("",!0):(r(),J(Un,{key:0,onCallback:e.callbackForm,quiz:e.selectedQuiz,bot:s.bot},null,8,["onCallback","quiz","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",BR,[t("div",NR,[e.loadQuizQuestion?c("",!0):(r(),J(Bz,{key:0,question:e.selectedQuizQuestion,"quiz-id":e.selectedQuiz.id,onCallback:e.callbackQuestionForm,bot:s.bot},null,8,["question","quiz-id","onCallback","bot"]))]),t("div",ER,[QR,e.loadQuizQuestionTable?c("",!0):(r(),J(iV,{key:0,"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizQuestion,bot:s.bot},null,8,["quiz-id","onSelect","bot"]))])])):c("",!0),e.tab===2?(r(),d("div",LR,[t("div",xR,[e.loadQuizCommand?c("",!0):(r(),J(LV,{key:0,command:e.selectedQuizCommand,"quiz-id":e.selectedQuiz.id,onCallback:e.callbackCommandForm,bot:s.bot},null,8,["command","quiz-id","onCallback","bot"]))]),t("div",WR,[HR,e.loadQuizCommandTable?c("",!0):(r(),J(iR,{key:0,"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizCommand,bot:s.bot},null,8,["quiz-id","onSelect","bot"]))])])):c("",!0),e.tab===3?(r(),d("div",KR,[t("div",XR,[ZR,L(SR,{"quiz-id":e.selectedQuiz.id,onSelect:e.selectQuizResult,bot:s.bot},null,8,["quiz-id","onSelect","bot"])])])):c("",!0),e.tab===4?(r(),d("div",GR,tY)):c("",!0)])):c("",!0)],64))}});const nY={class:"d-flex custom-dropdown justify-content-between align-items-center"},aY={class:"btn-group"},lY=t("i",{class:"fa-solid fa-info mr-2"},null,-1),iY=t("i",{class:"fa-solid fa-file mr-2"},null,-1),rY={key:0,class:"dropdown"},dY=t("button",{type:"button",class:"btn btn-primary dropdown-toggle text-primary p-2",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-screwdriver-wrench mr-2"})],-1),uY={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},cY=t("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1),mY=t("i",{class:"fa-solid fa-q mr-2"},null,-1),hY=t("i",{class:"fa-solid fa-code mr-2"},null,-1),pY=t("i",{class:"fa-solid fa-keyboard mr-2"},null,-1),_Y=t("i",{class:"fa-solid fa-scroll mr-2"},null,-1),vY=t("i",{class:"fa-solid fa-comment-dots mr-2"},null,-1),fY=t("i",{class:"fa-solid fa-users mr-2"},null,-1),bY=t("i",{class:"fa-regular fa-newspaper mr-2"},null,-1),gY=t("i",{class:"fa-solid fa-list-check mr-2"},null,-1),yY=t("i",{class:"fa-solid fa-list-check mr-2"},null,-1),$Y=t("i",{class:"fa-brands fa-shopify mr-2"},null,-1),kY=t("i",{class:"fa-brands fa-shopify mr-2"},null,-1),wY={key:0,class:"pb-5 mb-5"},CY={key:1,class:"pb-5 mb-5"},FY={key:2,class:"pb-5 mb-5"},TY={key:3,class:"pb-5 mb-5"},DY={key:4,class:"pb-5 mb-5"},SY={key:5,class:"pb-5 pt-2 mb-5"},PY={key:6,class:"pb-5 mb-5"},OY={key:7,class:"pb-5 mb-5 pt-2"},AY={key:8,class:"pb-5 mb-5"},MY={key:9,class:"pb-5 mb-5 pt-2"},jY={key:10,class:"pb-5 mb-5 pt-2"},qY={key:11,class:"pb-5 mb-5 pt-2"},UY={key:12,class:"row pb-5 mb-5"},zY={key:0,class:"col-12 col-md-12"},VY={key:13,class:"pb-5 mb-5"},RY={props:["bot"],data(){return{page:null,step:0,load:!1,loadPage:!1}},mounted(){this.setStep(localStorage.getItem("cashman_set_botform_step_index")||0)},methods:{hasRole(s){return window.hasRole(s)||!1},setStep(s){this.step=parseInt(s),localStorage.setItem("cashman_set_botform_step_index",s)},pageListCallback(s){this.loadPage=!0,this.page=s,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(s){this.page=s,this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})},loadCurrentCompany(s=null){this.$store.dispatch("updateCurrentCompany",{company:s}).then(()=>{this.company=this.getCurrentCompany})},companyListCallback(s){this.load=!0,this.loadCurrentCompany(s),this.$nextTick(()=>{this.load=!1})}}},AB=Object.assign(RY,{__name:"BotSection",setup(s){return(e,o)=>(r(),d(Y,null,[t("div",nY,[t("div",aY,[t("button",{type:"button",class:M(["btn btn-primary text-primary",{"bg-primary text-white":e.step==0}]),onClick:o[0]||(o[0]=a=>e.setStep(0))},[lY,g("Информация о боте")],2),t("button",{type:"button",class:M(["btn btn-primary text-primary",{"bg-primary text-white":e.step==4}]),onClick:o[1]||(o[1]=a=>e.setStep(4))},[iY,g("Страницы (кнопки бота)")],2)]),e.hasRole("admin")?(r(),d("div",rY,[dY,t("ul",uY,[t("li",null,[t("a",{class:"dropdown-item",href:"#bot-appointments",onClick:o[2]||(o[2]=a=>e.setStep(13))},[cY,g("Запись на событие (прием)")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-quizzes",onClick:o[3]||(o[3]=a=>e.setStep(14))},[mY,g("Квизы")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-custom-fields",onClick:o[4]||(o[4]=a=>e.setStep(10))},[hY,g("Настраиваемые поля")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-menu-template",onClick:o[5]||(o[5]=a=>e.setStep(1))},[pY,g("Все клавиатуры в боте")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-slugs",onClick:o[6]||(o[6]=a=>e.setStep(2))},[_Y,g("Все скрипты в боте")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-dialogs",onClick:o[7]||(o[7]=a=>e.setStep(6))},[vY,g("Все диалоги в боте")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-users",onClick:o[8]||(o[8]=a=>e.setStep(3))},[fY,g("Все пользователи в боте")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-news",onClick:o[9]||(o[9]=a=>e.setStep(9))},[bY,g(" Новостной канал")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-amo",onClick:o[10]||(o[10]=a=>e.setStep(7))},[gY,g(" AMO CRM")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-y-clients",onClick:o[11]||(o[11]=a=>e.setStep(12))},[yY,g(" YClients")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-shop",onClick:o[12]||(o[12]=a=>e.setStep(8))},[$Y,g(" Магазин")])]),t("li",null,[t("a",{class:"dropdown-item",href:"#bot-media",onClick:o[13]||(o[13]=a=>e.setStep(11))},[kY,g(" Медиа файлы бота")])])])])):c("",!0)]),e.step===14?(r(),d("div",wY,[e.load?c("",!0):(r(),J(oY,{key:0,bot:s.bot},null,8,["bot"]))])):c("",!0),e.step===13?(r(),d("div",CY,[e.load?c("",!0):(r(),J($9,{key:0,bot:s.bot},null,8,["bot"]))])):c("",!0),e.step===0?(r(),d("div",FY,[e.load?c("",!0):(r(),J(Vp,{key:0,bot:s.bot},null,8,["bot"]))])):c("",!0),e.step===7?(r(),d("div",TY,[e.load?c("",!0):(r(),J(G5,{key:0,data:s.bot.amo},null,8,["data"]))])):c("",!0),e.step===12?(r(),d("div",DY,[e.load?c("",!0):(r(),J(hC,{key:0,data:s.bot.y_clients},null,8,["data"]))])):c("",!0),e.step===11?(r(),d("div",SY,[e.load?c("",!0):(r(),J(BF,{key:0}))])):c("",!0),e.step===8?(r(),d("div",PY,[e.load?c("",!0):(r(),J(D5,{key:0}))])):c("",!0),e.step===10?(r(),d("div",OY,[e.load?c("",!0):(r(),J(tF,{key:0}))])):c("",!0),e.step===1?(r(),d("div",AY,[e.load?c("",!0):(r(),J(Fo,{key:0,"select-mode":!1}))])):c("",!0),e.step===6?(r(),d("div",MY,[e.load?c("",!0):(r(),J(Yn,{key:0}))])):c("",!0),e.step===2?(r(),d("div",jY,[e.load?c("",!0):(r(),J($r,{key:0}))])):c("",!0),e.step===3?(r(),d("div",qY,[e.load?c("",!0):(r(),J(Xs,{key:0}))])):c("",!0),e.step===4?(r(),d("div",UY,[e.load?c("",!0):(r(),d("div",zY,[e.loadPage?c("",!0):(r(),J(P2,{key:0,page:e.page,onCallback:e.pageCallback},null,8,["page","onCallback"]))]))])):c("",!0),e.step===9?(r(),d("div",VY,[L(Oa)])):c("",!0)],64))}}),YY={key:0},IY={key:0,class:"row"},BY={class:"col-md-12"},NY=t("h4",null,"Боты в работе",-1),EY={class:"mb-0"},QY={class:"table mb-5"},LY=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Домен"),t("th",{scope:"col"},"Название"),t("th",{scope:"col"},"Шаблон"),t("th",{scope:"col"},"Дата изменения"),t("th",{scope:"col"},"Действие")])],-1),xY={scope:"row"},WY=["onClick"],HY=["onClick"],KY={key:0,class:"badge bg-primary"},XY={key:1},ZY={class:"d-flex"},GY=["onClick"],JY=t("i",{class:"fa-regular fa-star"},null,-1),eI=[JY],tI=["onClick"],sI=t("i",{class:"fa-solid fa-chevron-down"},null,-1),oI=[sI],nI=["onClick"],aI=t("i",{class:"fa-solid fa-chevron-up"},null,-1),lI=[aI],iI=t("hr",null,null,-1),rI={class:"row"},dI={class:"col-md-12 d-flex flex-column"},uI={class:"d-flex"},cI={class:"dropdown mr-2"},mI=t("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),hI={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},pI=["onClick"],_I={class:"input-group mb-3"},vI={key:0,class:"mt-2"},fI={class:"badge bg-primary mr-1"},bI=["onClick"],gI=t("i",{class:"fa-solid fa-xmark"},null,-1),yI=[gI],$I={key:1,class:"row"},kI={class:"col-12"},wI=t("h4",null,"Все боты",-1),CI={class:"mb-0"},FI={class:"mb-0"},TI={key:2,class:"row"},DI={class:"col-12 mb-3"},SI={key:0,class:"col-12 mb-3"},PI={class:"table"},OI=t("th",{scope:"col"},"Действие",-1),AI={scope:"row"},MI=["onClick"],jI=["onClick"],qI={key:0,class:"badge bg-primary"},UI={key:1},zI={class:"d-flex"},VI=["onClick"],RI=t("i",{class:"fa-regular fa-star"},null,-1),YI=[RI],II=["onClick"],BI=t("i",{class:"fa-regular fa-copy"},null,-1),NI=[BI],EI=["onClick"],QI=t("i",{class:"fa-solid fa-boxes-packing"},null,-1),LI=[QI],xI=["onClick"],WI=t("i",{class:"fa-solid fa-box-open"},null,-1),HI=[WI],KI=["onClick"],XI=t("i",{class:"fa-solid fa-trash-can text-white"},null,-1),ZI=[XI],GI={class:"col-lg-4 col-12 mb-3"},JI={class:"card-body"},eB=["onClick"],tB={key:0,class:"badge bg-info"},sB={class:"card-footer d-flex"},oB=["onClick"],nB=t("i",{class:"fa-regular fa-star"},null,-1),aB=[nB],lB=["onClick"],iB=t("i",{class:"fa-regular fa-copy"},null,-1),rB=[iB],dB=["onClick"],uB=t("i",{class:"fa-solid fa-boxes-packing"},null,-1),cB=[uB],mB=["onClick"],hB=t("i",{class:"fa-solid fa-box-open"},null,-1),pB=[hB],_B=["onClick"],vB=t("i",{class:"fa-solid fa-trash-can text-white"},null,-1),fB=[vB],bB={class:"col-12"},gB={key:3,class:"row"},yB=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),$B=[yB],kB={props:["companyId","editor"],data(){return{displayType:1,direction:"desc",order:"updated_at",filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],favorites:[],search:null,bots_paginate_object:null}},watch:{displayType:function(s,e){localStorage.setItem("cashman_set_botlist_display_type",this.displayType)},selectedFilters:{handler:function(s){this.loadBots()},deep:!0}},computed:{...Ne(["getBots","getBotsPaginateObject","getCurrentCompany","getBotFavorites","inBotFav"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let s=[];return this.selectedFilters.forEach(e=>{switch(e.slug){case"active":this.bots.filter(o=>o.deleted_at==null).forEach(o=>{s.push(o)});break;case"archive":this.bots.filter(o=>o.deleted_at!=null).forEach(o=>{s.push(o)});break}}),this.search==null?s:s.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.selectFilter("active"),this.displayType=parseInt(localStorage.getItem("cashman_set_botlist_display_type")||0)},methods:{hasRole(s){return window.hasRole(s)||!1},loadBotsByIds(){if(this.getBotFavorites.length==0){this.favorites=[];return}this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:this.getBotFavorites}).then(s=>{this.loading=!1,this.favorites=s}).catch(()=>{this.loading=!1})},prepareFavorites(){this.$store.dispatch("loadBotFavs").then(s=>{this.loadBotsByIds()})},moveOrderFavBot(s,e){this.$store.dispatch("swapBotInFav",{id:s,direction:e}).then(o=>{this.loadBotsByIds()})},addToFavorite(s){if(this.inBotFav(s)){this.$store.dispatch("removeFromBotFavorites",s).then(e=>{this.$notify("Указанный бот успешно удален из избранного"),this.loadBotsByIds()});return}this.$store.dispatch("addBotToFavorites",s).then(e=>{this.$notify("Указанный бот успешно добавлен в избранное"),this.loadBotsByIds()})},duplicate(s){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:s,company_id:this.getCurrentCompany.id}}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно продублирован")})},addToArchive(s){this.$store.dispatch("removeBot",{botId:s}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(o),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(s){this.$store.dispatch("forceDeleteBot",{botId:s}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(o),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(s){this.$store.dispatch("restoreBot",{botId:s}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(s){let e=this.filters.find(o=>o.slug===s);e&&this.selectedFilters.filter(o=>o.slug===s).length===0&&this.selectedFilters.push(e)},removeSelectedFilter(s){let e=this.selectedFilters.findIndex(o=>o.slug===s);this.selectedFilters.splice(e,1)},selectBot(s){this.$emit("callback",s),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(s){this.loadBots(s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(s=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(e=>e.slug)},page:s,size:20}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject,this.prepareFavorites()}).catch(()=>{this.loading=!1})}}},MB=Object.assign(kB,{__name:"BotList",setup(s){return(e,o)=>e.show?(r(),d("div",YY,[e.favorites.length>0?(r(),d("div",IY,[t("div",BY,[NY,t("p",EY,"Количество ботов в работе "+b(e.favorites.length||0),1),t("table",QY,[LY,t("tbody",null,[(r(!0),d(Y,null,ee(e.favorites,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",xY,b(a.id),1),t("td",{onClick:l=>e.selectBot(a)},[t("i",{class:M([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),g(" "+b(a.bot_domain||"Не указано"),1)],8,WY),t("td",{onClick:l=>e.selectBot(a)},b(a.title||"Не указано"),9,HY),t("td",null,[a.is_template?(r(),d("span",KY,b(a.template_description||"Не указано"),1)):(r(),d("span",XY,"Не является шаблоном"))]),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[t("div",ZY,[t("button",{class:M(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},eI,10,GY),e.favorites.length>1?(r(),d("button",{key:0,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(a.id,1),title:"Переместить вниз"},oI,8,tI)):c("",!0),e.favorites.length>1?(r(),d("button",{key:1,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(a.id,0),title:"Переместить вверх"},lI,8,nI)):c("",!0)])])],2))),256))])]),iI])])):c("",!0),t("div",rI,[t("div",dI,[t("div",uI,[t("div",cI,[mI,t("ul",hI,[(r(!0),d(Y,null,ee(e.filters,a=>(r(),d("li",null,[t("a",{class:"dropdown-item",onClick:n=>e.selectFilter(a.slug),href:"#filter"},[t("i",{class:M([a.icon,"mr-2"])},null,2),g(" "+b(a.name||"Не указано"),1)],8,pI)]))),256))])]),t("div",_I,[f(t("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),onKeydown:o[1]||(o[1]=Pe((...a)=>e.loadBots&&e.loadBots(...a),["enter"])),"aria-describedby":"button-addon2"},null,544),[[E,e.search]]),t("button",{class:"btn btn-outline-secondary",onClick:o[2]||(o[2]=(...a)=>e.loadBots&&e.loadBots(...a)),type:"button",id:"button-addon2"},"Найти ")])]),e.selectedFilters.length>0?(r(),d("p",vI,[(r(!0),d(Y,null,ee(e.selectedFilters,a=>(r(),d("span",fI,[g(b(a.name||"не указан")+" ",1),t("a",{onClick:n=>e.removeSelectedFilter(a.slug),class:"ml-1 text-white",href:"#filter"},yI,8,bI)]))),256))])):c("",!0)])]),e.bots_paginate_object?(r(),d("div",$I,[t("div",kI,[wI,t("p",CI,"Количество найденных ботов "+b(e.bots_paginate_object.meta.total||0),1),t("p",FI,"Количество результатов на странице "+b(e.bots.length||0),1),t("p",null,[g(" Тип отображения списка: "),t("span",{onClick:o[3]||(o[3]=a=>e.displayType=0),class:M([{"bg-primary":e.displayType===0,"bg-secondary":e.displayType!==0},"badge cursor-pointer mr-2"])},"Карточки",2),t("span",{class:M([{"bg-primary":e.displayType===1,"bg-secondary":e.displayType!==1},"badge cursor-pointer mr-2"]),onClick:o[4]||(o[4]=a=>e.displayType=1)},"Таблица",2)])])])):c("",!0),e.bots.length>0?(r(),d("div",TI,[t("div",DI,[s.editor?c("",!0):(r(),d("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:o[5]||(o[5]=a=>e.selectBot(null))},"Создать нового бота "))]),e.displayType===1?(r(),d("div",SI,[t("table",PI,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[6]||(o[6]=a=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=a=>e.loadAndOrder("bot_domain"))},"Домен"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[8]||(o[8]=a=>e.loadAndOrder("title"))},"Название"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[9]||(o[9]=a=>e.loadAndOrder("template_description"))},"Шаблон"),t("th",{scope:"col",class:"cursor-pointer",onClick:o[10]||(o[10]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),OI])]),t("tbody",null,[(r(!0),d(Y,null,ee(e.bots,(a,n)=>(r(),d("tr",{class:M({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[t("th",AI,b(a.id),1),t("td",{onClick:l=>e.selectBot(a)},[t("i",{class:M([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),g(" "+b(a.bot_domain||"Не указано"),1)],8,MI),t("td",{onClick:l=>e.selectBot(a)},b(a.title||"Не указано"),9,jI),t("td",null,[a.is_template?(r(),d("span",qI,b(a.template_description||"Не указано"),1)):(r(),d("span",UI,"Не является шаблоном"))]),t("td",null,b(e.$filters.current(a.updated_at)),1),t("td",null,[t("div",zI,[t("button",{class:M(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},YI,10,VI),t("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(a.id),title:"Дублировать"},NI,8,II),a.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(a.id),title:"В архив"},LI,8,EI)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(a.id),title:"Из архива"},HI,8,xI)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(a.id),title:"Удалить на совсем"},ZI,8,KI)):c("",!0)])])],2))),256))])])])):c("",!0),e.displayType===0?(r(!0),d(Y,{key:1},ee(e.bots,(a,n)=>(r(),d("div",GI,[t("div",{class:M(["card w-100",{"border-info":a.deleted_at==null,"border-secondary":a.deleted_at!=null}])},[t("div",JI,[t("p",{class:"d-flex justify-content-between",onClick:l=>e.selectBot(a),style:{"word-wrap":"break-word"}},[t("span",null,[t("i",{class:M([{"text-danger":a.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),g(" "+b(a.bot_domain||"Не указано"),1)]),a.is_template?(r(),d("span",tB,b(a.template_description||"Шаблон без названия"),1)):c("",!0)],8,eB)]),t("div",sB,[t("button",{class:M(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(a.id)}]),type:"button",onClick:l=>e.addToFavorite(a.id),title:"Добавить в избранное"},aB,10,oB),t("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(a.id),title:"Дублировать"},rB,8,lB),a.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(a.id),title:"В архив"},cB,8,dB)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(a.id),title:"Из архива"},pB,8,mB)):c("",!0),a.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(a.id),title:"Удалить на совсем"},fB,8,_B)):c("",!0)])],2)]))),256)):c("",!0),t("div",bB,[e.bots_paginate_object?(r(),J(st,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",gB,$B))])):c("",!0)}});export{Vp as _,MB as a,AB as b,P2 as c,Yn as d};
