import{q as r,t as d,v as n,F as x,C as ne,y as f,x as B,D as F,A as c,P as Pe,H as b,X as zt,K as de,G as Ee,J as Q,R as Se,B as le,a7 as De,Y as Ut,L as en,O as q,a3 as Qe,M as jo,j as An,o as ce,k as nt,a8 as tn,a9 as En,a4 as rt,n as Lt,g as J,a5 as js,w as Wt,aa as mt,N as ye,ab as Ge,ac as ct,u as w,ad as at,a1 as eo,ae as vn,af as Da,f as Pa,ag as to,z as ft,ah as Tn,ai as Sa,aj as Oa,ak as Aa,al as Ma,am as ja}from"./index.es-71d37bd0.js";import{a as Ro,b as Uo,_ as dn}from"./GlobalSlugList-e4e95745.js";import{P as Je}from"./Pagination-c0ff4992.js";import{a as Ra}from"./CompanyList-66581a10.js";import{T as qn}from"./TelegramChannelHelper-d5723a62.js";import{B as zn,_ as no}from"./Mail-55bbc290.js";import{_ as nn}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                               */const Ua={props:["param"],data(){return{expressions:[{expression:"{{userName}}",description:"Имя пользователя"},{expression:"{{telegramChatId}}",description:"Идентификатор чата"},{expression:"{{referralLink}}",description:"Реферальная ссылка"},{expression:"{{referralQr}}",description:"Реферальный QR-код"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},Va={class:"dropdown"},Ya=n("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-brands fa-hire-a-helper"})],-1),Ia={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},Ba=["onClick"];function xa(t,e,s,o,a,l){return r(),d("div",Va,[Ya,n("div",Ia,[n("li",null,[(r(!0),d(x,null,ne(a.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},f(i.description||"-"),9,Ba))),256))])])])}const Na=nn(Ua,[["render",xa]]);const Ea={class:"card-header d-flex justify-content-between align-items-center"},qa={class:"d-flex"},za=n("i",{class:"fa-solid fa-arrow-left"},null,-1),La=[za],Wa={class:"dropdown"},Ha=n("i",{class:"fa-solid fa-ellipsis"},null,-1),Qa=[Ha],Xa={class:"dropdown-menu"},Ka=["data-bs-target"],Za=n("i",{class:"fa-regular fa-pen-to-square mr-1"},null,-1),Ga=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),Ja=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),el={key:0,class:"fa-solid fa-arrow-up-short-wide"},tl={key:1,class:"fa-solid fa-arrow-down-short-wide"},nl={class:"card-body"},sl={class:"row"},ol={class:"col-12"},al={key:0},ll={key:1,class:"list-group list-group-numbered"},il={class:"list-group-item d-flex justify-content-between align-items-start"},rl={class:"ms-2 me-auto"},dl=n("div",{class:"fw-bold"},"Идентификатор",-1),ul={class:"list-group-item d-flex justify-content-between align-items-start"},cl={class:"ms-2 me-auto"},ml=n("div",{class:"fw-bold"},"Команда",-1),hl={class:"list-group-item d-flex justify-content-between align-items-start"},pl={class:"ms-2 me-auto"},_l=n("div",{class:"fw-bold"},"Мнемоническое имя",-1),vl={class:"list-group-item d-flex justify-content-between align-items-start"},fl={class:"ms-2 me-auto"},bl=n("div",{class:"fw-bold"},"Пояснение",-1),gl={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},yl={class:"ms-2 me-auto"},kl=n("div",{class:"fw-bold"},"Набор параметров скрипта",-1),$l={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},wl=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Привязана страница")],-1),Cl=[wl],Fl={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},Tl=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Глобальный скрипт")],-1),Dl=[Tl],Pl={class:"list-group-item d-flex justify-content-between align-items-start"},Sl={class:"ms-2 me-auto w-100"},Ol=n("div",{class:"fw-bold"},"Перенести данные из:",-1),Al=n("option",{value:null},"Не выбрано",-1),Ml=["value"],jl=n("p",{class:"my-2"},[n("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),Rl=["disabled"],Ul=["id"],Vl={class:"modal-dialog modal-fullscreen"},Yl={class:"modal-content"},Il={class:"modal-header"},Bl={class:"modal-title",id:"exampleModalLabel"},xl=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Nl={class:"modal-body"},El=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ql={props:["item","bot","selectMode","isActive"],data(){return{selected_slug_id:null,slugs:[],load:!1,simple:!0}},watch:{simple:function(){this.simple||this.loadAllSlugs()}},mounted(){},methods:{selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.selected_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},loadAllSlugs(){this.$store.dispatch("loadAllSlugs",{botId:this.bot.id}).then(t=>{this.slugs=t.data})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(t=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(t=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},zl=Object.assign(ql,{__name:"Slug",setup(t){return(e,s)=>(r(),d(x,null,[n("div",{class:B(["card",{"deprecated-slug":t.item.deprecated_at!=null,"global-slug":t.item.is_global,"bg-success text-white":t.isActive}])},[n("div",Ea,[n("div",qa,[n("button",{onClick:s[0]||(s[0]=(...o)=>e.selectSlug&&e.selectSlug(...o)),type:"button",title:"Выбрать команду",class:B(["btn btn-outline-primary mr-2",{"text-white":t.isActive}])},La,2),n("div",Wa,[n("button",{class:B([{"text-white border-white":t.isActive},"btn btn-outline-secondary"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Qa,2),n("ul",Xa,[n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:s[1]||(s[1]=(...o)=>e.editSlug&&e.editSlug(...o)),"data-bs-toggle":"modal","data-bs-target":"#edit-slug-"+t.item.id},[Za,F(" Редактировать")],8,Ka)]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:s[2]||(s[2]=(...o)=>e.duplicateSlug&&e.duplicateSlug(...o))},[Ga,F(" Дублировать")])]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:s[3]||(s[3]=(...o)=>e.removeSlug&&e.removeSlug(...o))},[Ja,F(" Удалить")])])])])]),n("span",null,[n("small",null,[n("strong",null,"#"+f(t.item.id),1)])]),n("button",{type:"button",onClick:s[4]||(s[4]=o=>e.simple=!e.simple),class:B([{"text-white border-white":t.isActive},"btn btn-outline-primary ml-2"])},[e.simple?(r(),d("i",el)):(r(),d("i",tl))],2)]),n("div",nl,[n("div",sl,[n("div",ol,[e.simple?(r(),d("p",al,f(t.item.command||"Нет команды"),1)):(r(),d("ol",ll,[n("li",il,[n("div",rl,[dl,F(" №"+f(t.item.id||"Нет идентификатора"),1)])]),n("li",ul,[n("div",cl,[ml,F(" "+f(t.item.command||"Нет команды"),1)])]),n("li",hl,[n("div",pl,[_l,F(" "+f(t.item.slug||"Slug"),1)])]),n("li",vl,[n("div",fl,[bl,F(" "+f(t.item.comment||"Пояснение не указано"),1)])]),t.item.config?(r(),d("li",gl,[n("div",yl,[kl,t.item.config?(r(!0),d(x,{key:0},ne(t.item.config,o=>(r(),d("p",null,[n("strong",null,f(o.key||"Ключ не найден")+":",1),F(f(o.value||"Не указано"),1)]))),256)):c("",!0)])])):c("",!0),t.item.page?(r(),d("li",$l,Cl)):c("",!0),t.item.is_global?(r(),d("li",Fl,Dl)):c("",!0),n("li",Pl,[n("div",Sl,[n("form",{onSubmit:s[6]||(s[6]=Pe((...o)=>e.submitRelocateData&&e.submitRelocateData(...o),["prevent"]))},[Ol,b(n("select",{class:"form-control w-100","onUpdate:modelValue":s[5]||(s[5]=o=>e.selected_slug_id=o),required:""},[Al,(r(!0),d(x,null,ne(e.slugs,o=>(r(),d("option",{value:o.id},"#"+f(o.id)+" "+f(o.slug||"Не указан"),9,Ml))),256))],512),[[zt,e.selected_slug_id]]),jl,n("button",{disabled:e.selected_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,Rl)],32)])])]))])])])],2),n("div",{class:"modal fade",id:"edit-slug-"+t.item.id,tabindex:"-1"},[n("div",Vl,[n("div",Yl,[n("div",Il,[n("h5",Bl,[F("Редактирование команды #"),n("span",null,f(t.item.id),1)]),xl]),n("div",Nl,[e.load?c("",!0):(r(),de(Ro,{key:0,item:t.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"]))]),El])])],8,Ul)],64))}}),Ll={key:0,class:"row"},Wl={class:"col-12 mb-2"},Hl={key:0},Ql=n("i",{class:"fa-solid fa-scroll"},null,-1),Xl={key:1},Kl=n("i",{class:"fa-regular fa-square-minus"},null,-1),Zl={key:0,class:"col-12"},Gl={class:"col-12"},Jl={class:"form-floating mb-3"},ei=n("label",{for:"floatingInput"},"Быстрый поиск команды",-1),ti={class:"col-12 mb-2"},ni={class:"form-check"},si={class:"form-check-label",for:"need_global"},oi={key:0},ai={key:1},li={class:"form-check"},ii=n("label",{class:"form-check-label",for:"need_show_deleted"}," Удаленные ",-1),ri={key:1,class:"mb-3 col-12 col-sm-12"},di={class:"table"},ui=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Команда"),n("th",{scope:"col"},"Пояснение"),n("th",{scope:"col"},"Глобальный"),n("th",{scope:"col"},"Действия")])],-1),ci=["onClick"],mi={key:0},hi=n("i",{class:"fa-solid fa-check text-success"},null,-1),pi=[hi],_i={key:1},vi=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),fi=[vi],bi={class:"dropdown"},gi=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),yi={class:"dropdown-menu"},ki={key:0},$i=["onClick"],wi=n("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),Ci={key:1},Fi=["onClick"],Ti=n("a",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#edit-table-slug"},[n("i",{class:"fa-regular fa-pen-to-square mr-1"}),F(" Редактировать")],-1),Di=[Ti],Pi=["onClick"],Si=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),Oi=["href"],Ai=n("i",{class:"fa-regular fa-file-excel mr-1"},null,-1),Mi={key:2},ji=["onClick"],Ri=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Ui={key:3},Vi=["onClick"],Yi=n("i",{class:"fa-regular fa-trash-can text-danger mr-1"},null,-1),Ii={key:3,class:"mb-3 col-md-12"},Bi=n("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),xi=[Bi],Ni={class:"modal fade",id:"edit-table-slug",tabindex:"-1"},Ei={class:"modal-dialog modal-fullscreen"},qi={key:0,class:"modal-content"},zi={class:"modal-header"},Li={class:"modal-title",id:"exampleModalLabel"},Wi=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Hi={class:"modal-body"},Qi={class:"row"},Xi={class:"col-8"},Ki={class:"col-4"},Zi={class:"list-group list-group-numbered"},Gi={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},Ji={class:"ms-2 me-auto"},er=n("div",{class:"fw-bold"},"Набор параметров скрипта",-1),tr={key:1},nr={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},sr=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Привязана страница")],-1),or=[sr],ar={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},lr=n("div",{class:"ms-2 me-auto"},[n("div",{class:"fw-bold"},"Является глобальным скриптом")],-1),ir=[lr],rr={class:"list-group-item d-flex justify-content-between align-items-start"},dr={class:"ms-2 me-auto w-100"},ur=n("div",{class:"fw-bold"},"Перенести данные из:",-1),cr=n("option",{value:null},"Не выбрано",-1),mr=["value"],hr=n("p",{class:"my-2"},[n("em",null,"Перенос данных затирает текущие данные в данном скрипте")],-1),pr=["disabled"],_r=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),vr={props:["command","canSelect"],data(){return{bot:null,relocated_slug_id:null,need_global:!0,need_show_deleted:!0,show:!1,load:!1,slugs:[],paginate:[],selectedSlug:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{ownSearch:function(t,e){this.loadSlugs()},need_global:function(t,e){this.loadSlugs()},need_show_deleted:function(t,e){this.loadSlugs()}},computed:{...Ee(["getCurrentBot","getSlugs","getSlugsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})})},methods:{nextSlugs(t){this.loadSlugs(t)},loadSlugs(t=0){return this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,needGlobal:this.need_global,needDeleted:this.need_show_deleted,search:this.ownSearch},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},callbackSlugs(){this.loadSlugs()},selectSlug(t){this.load=!0,this.$nextTick(()=>{this.selectedSlug=t,this.load=!1}),this.$emit("select",t)},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0;const t=this.selectedSlug;this.loadSlugs().then(()=>{let e=this.slugs.find(s=>s.id===t.id);this.selectSlug(e||null)}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},duplicateSlug(t){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.loadSlugs(),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},submitRelocateData(){this.$store.dispatch("relocateSlugActionData",{slug_sender_id:this.relocated_slug_id,slug_recipient_id:this.item.id,bot_id:this.bot.id}).then(t=>{this.$notify({title:"Конструктор команд",text:"Данные команды успешно перенесены",type:"success"})}).catch(t=>{this.$notify({title:"Конструктор команд",text:"Ошибка переноса данных",type:"error"})})},restoreSlug(t){this.load=!0,this.$store.dispatch("restoreSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно восстановлена",type:"success"}),this.loadSlugs(),this.$nextTick(()=>{this.load=!1})}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})},removeSlug(t){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:t.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена",type:"success"}),this.loadSlugs()}).catch(e=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},LV=Object.assign(vr,{__name:"BotSlugTableList",setup(t){return(e,s)=>(r(),d(x,null,[e.bot?(r(),d("div",Ll,[n("div",Wl,[n("button",{type:"button",onClick:s[0]||(s[0]=o=>e.show=!e.show),class:"btn btn-outline-success p-3 w-100"},[e.show?(r(),d("span",Xl,[Kl,F(" Свернуть форму добавления")])):(r(),d("span",Hl,[Ql,F(" Добавить глобальный скрипт")]))])]),e.show?(r(),d("div",Zl,[e.bot?(r(),de(Uo,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),n("div",Gl,[n("div",Jl,[b(n("input",{type:"search","onUpdate:modelValue":s[1]||(s[1]=o=>e.ownSearch=o),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[Q,e.ownSearch]]),ei])]),n("div",ti,[n("div",ni,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[2]||(s[2]=o=>e.need_global=o),type:"checkbox",id:"need_global"},null,512),[[Se,e.need_global]]),n("label",si,[e.need_global?(r(),d("span",oi,"Глобальные")):(r(),d("span",ai,"Локальные"))])]),n("div",li,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[3]||(s[3]=o=>e.need_show_deleted=o),type:"checkbox",id:"need_show_deleted"},null,512),[[Se,e.need_show_deleted]]),ii])]),e.slugs&&e.bot?(r(),d("div",ri,[n("table",di,[ui,n("tbody",null,[(r(!0),d(x,null,ne(e.slugs,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",{scope:"row",class:B({"text-danger":o.deleted_at!=null})},f(o.id||"Нет идентификатора"),3),n("td",{onClick:l=>e.selectSlug(o),"data-bs-toggle":"modal","data-bs-target":"#edit-table-slug",class:B({"text-danger":o.deleted_at!=null})},f(o.command||"Нет команды"),11,ci),n("td",{class:B({"text-danger":o.deleted_at!=null})},f(o.comment||"Пояснение не указано"),3),n("td",null,[o.is_global?(r(),d("span",mi,pi)):(r(),d("span",_i,fi))]),n("td",null,[n("div",bi,[gi,n("ul",yi,[t.canSelect?(r(),d("li",ki,[n("a",{onClick:l=>e.selectSlug(o),title:"Выбрать команду",class:"dropdown-item cursor-pointer"},[wi,F(" Выбрать команду ")],8,$i)])):c("",!0),t.canSelect?(r(),d("hr",Ci)):c("",!0),n("li",{onClick:l=>e.selectSlug(o)},Di,8,Fi),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.duplicateSlug(o)},[Si,F(" Дублировать")],8,Pi)]),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",target:"_blank",href:"/admin/slugs/action-data-export/"+o.id},[Ai,F(" Скачать данные участников")],8,Oi)]),o.deleted_at==null?(r(),d("li",Mi,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.removeSlug(o)},[Ri,F(" Удалить")],8,ji)])):c("",!0),o.deleted_at!=null?(r(),d("li",Ui,[n("a",{class:"dropdown-item cursor-pointer",onClick:l=>e.restoreSlug(o)},[Yi,F(" Восстановить")],8,Vi)])):c("",!0)])])])],2))),256))])])])):c("",!0),e.paginate?(r(),de(Je,{key:2,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0),e.slugs.length===0?(r(),d("div",Ii,xi)):c("",!0)])):c("",!0),n("div",Ni,[n("div",Ei,[e.selectedSlug&&!e.load?(r(),d("div",qi,[n("div",zi,[n("h5",Li,[F("Редактирование команды #"),n("span",null,f(e.selectedSlug.id),1)]),Wi]),n("div",Hi,[n("div",Qi,[n("div",Xi,[le(Ro,{item:e.selectedSlug,onCallback:e.slugFormCallback},null,8,["item","onCallback"])]),n("div",Ki,[n("ol",Zi,[e.selectedSlug.config?(r(),d("li",Gi,[n("div",Ji,[er,(e.selectedSlug.config||[]).length>0?(r(!0),d(x,{key:0},ne(e.selectedSlug.config,o=>(r(),d("p",null,[n("strong",null,f(o.key||"Ключ не найден")+":",1),F(f(o.value||"Не указано"),1)]))),256)):(r(),d("p",tr,"Отсутствует"))])])):c("",!0),e.selectedSlug.page?(r(),d("li",nr,or)):c("",!0),e.selectedSlug.is_global?(r(),d("li",ar,ir)):c("",!0),n("li",rr,[n("div",dr,[n("form",{onSubmit:s[5]||(s[5]=Pe((...o)=>e.submitRelocateData&&e.submitRelocateData(...o),["prevent"]))},[ur,b(n("select",{class:"form-control w-100","onUpdate:modelValue":s[4]||(s[4]=o=>e.relocated_slug_id=o),required:""},[cr,(r(!0),d(x,null,ne(e.slugs,o=>(r(),d("option",{value:o.id},"#"+f(o.id)+" "+f(o.slug||"Не указан"),9,mr))),256))],512),[[zt,e.relocated_slug_id]]),hr,n("button",{disabled:e.relocated_slug_id==null,class:"btn btn-outline-warning w-100"}," Выполнить перенос ",8,pr)],32)])])])])])]),_r])):c("",!0)])])],64))}}),fr={class:"row mt-2"},br={class:"input-group mb-3"},gr={key:0,class:"row"},yr={class:"col-12 col-md-12 mb-3"},kr={class:"table"},$r=n("th",{scope:"col"},"#",-1),wr=n("th",{scope:"col"},"Ф.И.О. из телеграмма",-1),Cr=n("th",{scope:"col"},"Имя пользователя",-1),Fr=n("th",{scope:"col"},"Домен",-1),Tr=n("th",{scope:"col"},"Телефон",-1),Dr=n("th",{scope:"col"},"TG id",-1),Pr={key:0,scope:"col"},Sr={key:1,scope:"col"},Or={key:2,scope:"col"},Ar={key:3,scope:"col"},Mr={key:4,scope:"col"},jr=["onClick"],Rr={scope:"row"},Ur=["href"],Vr={key:1},Yr={key:0},Ir=["onClick"],Br=n("i",{class:"fa-solid fa-check text-success"},null,-1),xr=[Br],Nr=["onClick"],Er=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),qr=[Er],zr={key:1},Lr=["onClick"],Wr=n("i",{class:"fa-solid fa-check text-success"},null,-1),Hr=[Wr],Qr=["onClick"],Xr=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Kr=[Xr],Zr={key:2},Gr=["onClick"],Jr=n("i",{class:"fa-solid fa-check text-success"},null,-1),ed=[Jr],td=["onClick"],nd=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),sd=[nd],od={key:3},ad=["onClick"],ld=n("i",{class:"fa-solid fa-check text-success"},null,-1),id=[ld],rd=["onClick"],dd=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),ud=[dd],cd={key:4},md=["onClick"],hd=n("i",{class:"fa-solid fa-check text-success"},null,-1),pd=[hd],_d=["onClick"],vd=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),fd=[vd],bd={class:"col-12"},gd={key:1,class:"row"},yd=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет пользователей ")],-1),kd=[yd],$d={props:["simple"],data(){return{bot:null,loading:!0,bot_users:[],search:null,bot_users_paginate_object:null}},computed:{...Ee(["getBotUsers","getBotUsersPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadUsers()})},methods:{selectUser(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},changeUserStatus(t,e,s="is_admin"){this.bot_users[t][s]=e===1,this.$store.dispatch("changeUserStatus",{dataObject:{bot_user_id:this.bot_users[t].id,status:e,type:s}}).then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус пользователя успешно изменен! Пользователь оповещен об изменении статуса!",type:"success"})}).catch(()=>{this.$notify({title:"Конструктор ботов",text:"Ошибка изменения статуса",type:"error"})})},nextUsers(t){this.loadUsers(t)},loadUsers(t=0){this.loading=!0,this.$store.dispatch("loadBotUsers",{dataObject:{botId:this.bot.id||null,search:this.search},size:100,page:t}).then(e=>{this.loading=!1,this.bot_users=this.getBotUsers,this.bot_users_paginate_object=this.getBotUsersPaginateObject}).catch(()=>{this.loading=!1})}}},Vo=Object.assign($d,{__name:"BotUserList",setup(t){return(e,s)=>(r(),d(x,null,[n("div",fr,[n("div",br,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск пользователя","aria-label":"Поиск пользователя",onKeydown:s[0]||(s[0]=De(o=>e.loadUsers(0),["enter"])),"onUpdate:modelValue":s[1]||(s[1]=o=>e.search=o)},null,544),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[2]||(s[2]=o=>e.loadUsers(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.bot_users.length>0?(r(),d("div",gr,[n("div",yr,[n("table",kr,[n("thead",null,[n("tr",null,[$r,wr,Cr,Fr,Tr,Dr,t.simple?c("",!0):(r(),d("th",Pr,"Админ")),t.simple?c("",!0):(r(),d("th",Sr,"VIP")),t.simple?c("",!0):(r(),d("th",Or,"Доставщик")),t.simple?c("",!0):(r(),d("th",Ar,"Менеджер")),t.simple?c("",!0):(r(),d("th",Mr,"За работой"))])]),n("tbody",null,[(r(!0),d(x,null,ne(e.bot_users,(o,a)=>(r(),d("tr",{onClick:l=>e.selectUser(o)},[n("th",Rr,f(o.id),1),n("td",null,f(o.fio_from_telegram||"Не указано"),1),n("td",null,f(o.name||"Не указано"),1),n("td",null,[o.username?(r(),d("a",{key:0,href:"https://t.me/"+o.username,target:"_blank"},"@"+f(o.username),9,Ur)):(r(),d("span",Vr,"Не указано"))]),n("td",null,f(o.phone||"Не указано"),1),n("td",null,f(o.telegram_chat_id||"Не указано"),1),t.simple?c("",!0):(r(),d("td",Yr,[o.is_admin?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(a,0,"is_admin")},xr,8,Ir)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(a,1,"is_admin")},qr,8,Nr))])),t.simple?c("",!0):(r(),d("td",zr,[o.is_vip?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(a,0,"is_vip")},Hr,8,Lr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(a,1,"is_vip")},Kr,8,Qr))])),t.simple?c("",!0):(r(),d("td",Zr,[o.is_deliveryman?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(a,0,"is_deliveryman")},ed,8,Gr)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(a,1,"is_deliveryman")},sd,8,td))])),t.simple?c("",!0):(r(),d("td",od,[o.is_manager?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(a,0,"is_manager")},id,8,ad)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(a,1,"is_manager")},ud,8,rd))])),t.simple?c("",!0):(r(),d("td",cd,[o.is_work?(r(),d("span",{key:0,onClick:l=>e.changeUserStatus(a,0,"is_work")},pd,8,md)):(r(),d("span",{key:1,onClick:l=>e.changeUserStatus(a,1,"is_work")},fd,8,_d))]))],8,jr))),256))])])]),n("div",bd,[e.bot_users_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextUsers,pagination:e.bot_users_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",gd,kd))],64))}});const wd={class:"row"},Cd={key:0,class:"col-12"},Fd=n("p",null,[F("Для создания бота в Телеграм воспользуйтесь "),n("a",{href:"https://telegra.ph/Sozdanie-telegram-bota-02-02",class:"text-success font-bold",target:"_blank"},[n("i",{class:"fa-solid fa-triangle-exclamation mr-1"}),F("инструкцией")])],-1),Td=[Fd],Dd={key:1,class:"col-12 mb-2"},Pd={class:"position-relative p-4 text-center text-muted bg-body border border-dashed rounded-2"},Sd={class:"d-flex justify-content-center mb-3"},Od={alt:"",width:"100",height:"100"},Ad=jo('<h1 class="text-body-emphasis">Создание бота</h1><p class="col-lg-8 mx-auto fs-5 text-muted"> Если вы решили создать бота с самого начала, без заготовленных страниц, скриптов и т.д., то воспользуйтесь данным разделом и предложенной ниже инструкцией. </p><div class="d-inline-flex gap-2"><a href="https://t.me/botfather" target="_blank" class="d-inline-flex align-items-center btn btn-primary btn-lg px-4 rounded-pill"> Создать бота в Телеграм </a><a href="https://telegra.ph/Nizhnee-menyu-bota-01-03" target="_blank" class="d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"> Инструкция </a></div>',3),Md={class:"col-md-12 col-12"},jd={class:"mb-3"},Rd={class:"form-label d-flex justify-content-between",id:"bot-token"},Ud=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Vd=n("div",null,"Взять из BotFather при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),Yd=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Id={key:0,class:"row"},Bd={class:"col-12"},xd={class:"nav nav-tabs justify-content-center"},Nd={key:1,class:"nav-item"},Ed=n("a",{class:"nav-link text-secondary",href:"javascript:void(0)"},[n("i",{class:"fa-solid fa-triangle-exclamation mr-1"}),F(" Обратная связь")],-1),qd=[Ed],zd=n("i",{class:"fa-solid fa-skull-crossbones mr-1"},null,-1),Ld={class:"row py-3"},Wd={class:"col-md-12 col-12"},Hd={class:"form-check mb-3"},Qd=["value"],Xd=n("label",{class:"form-check-label",for:"bot-select-company"}," Выбрать клиента из списка ",-1),Kd={key:0,class:"font-bold"},Zd={key:0,class:"col-md-12 col-12"},Gd={class:"col-md-12 col-12"},Jd={class:"form-check mb-3"},eu=["value"],tu=n("label",{class:"form-check-label",for:"bot-is-template"}," Сделать шаблоном ",-1),nu={key:1,class:"col-md-12 col-12"},su={class:"mb-3"},ou={class:"form-label",id:"bot-template-description"},au=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),lu=n("div",null,"Если Вы создаете шаблон, а не реального бота ",-1),iu=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ru={class:"col-md-12 col-12"},du={class:"mb-3"},uu={class:"form-label",id:"bot-domain"},cu=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),mu=n("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),hu={key:0},pu=["href"],_u={class:"col-md-12 col-12"},vu={class:"card"},fu={class:"card-body"},bu=n("h6",null,"Настройка параметров бота в BotFather",-1),gu={class:"mb-3"},yu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-title"},ku={key:0},$u={key:0,class:"text-secondary"},wu={class:"mb-3"},Cu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-short-description"},Fu={key:0,class:"text-secondary"},Tu=n("div",{class:"alert alert-info",role:"alert"}," Данное описание видно в момент, когда пользователь делится ссылкой на бота, а также при нажатии на иконку бота. ",-1),Du={class:"mb-3"},Pu={class:"form-label d-flex justify-content-between align-items-center",id:"bot-long-description"},Su={key:0,class:"text-secondary"},Ou=n("div",{class:"alert alert-info",role:"alert"},[F(" Данное описание видно при первом запуске бота, оно должно содержать информацию о возможностях бота: "),n("ul",{class:"m-0 pl-2"},[n("li",null,"- система лояльности"),n("li",null,"- колесо фортуны"),n("li",null,"- интернет-магазин"),n("li",null,"- реферальная система")]),F(" и т.д. ")],-1),Au={key:0,class:"col-12"},Mu=n("div",{class:"alert alert-primary",role:"alert"},[n("strong",null,"Внимание!"),F(" Отображать пользователю команду "),n("strong",{class:"text-danger"},"/adminmenu"),F(" плохая идея. Команда доступна только администраторам системы, а обычный пользователь будет видеть ошибку. Это создаст негативное восприятие от работы сервиса. ")],-1),ju=[Mu],Ru={class:"col-5"},Uu={class:"mb-3"},Vu=["onUpdate:modelValue","aria-describedby"],Yu={class:"col-5"},Iu={class:"mb-3"},Bu=["onUpdate:modelValue","aria-describedby"],xu={class:"col-2"},Nu=["onClick"],Eu=n("i",{class:"fa-regular fa-trash-can"},null,-1),qu=[Eu],zu={class:"row"},Lu={class:"col-12"},Wu={key:0},Hu={key:1},Qu=n("div",{class:"col-12 mt-2"},[n("div",{class:"alert alert-primary",role:"alert"},[n("strong",null,"Внимание!"),F(" Внесите сумму, которую вам дал Клиент! Эта сумма будет балансом Клиента для работы бота! Укажите тариф бота - это сумма, которую система будет списывать с клиента каждый день пока баланс бота не будет равен 0. "),n("br"),n("strong",null,"Внимание!"),F(" Вы можете начислить какую-то небольшую сумму для того чтобы клиент протестировал работу бота. При достижении нулевого баланса клиент будет оповещен об этом и должен будет пополнить счёт бота! ")])],-1),Xu={class:"col-md-6 col-12"},Ku={class:"mb-3"},Zu={class:"form-label",id:"bot-balance"},Gu=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ju=n("div",null,"Начальная сумма денег на счету у конкретного бота",-1),ec=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),tc={class:"col-md-6 col-12"},nc={class:"mb-3"},sc={class:"form-label",id:"bot-tax-per-day"},oc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ac=n("div",null,"Сумма списания денег за сутки работы бота (тариф)",-1),lc=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ic={class:"row py-3"},rc={class:"col-md-6 col-12"},dc={class:"mb-3"},uc=n("label",{class:"form-label",id:"bot-level-1"},[F(" Уровень 1 CashBack, % "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),cc={class:"col-md-6 col-12"},mc={class:"mb-3"},hc=n("label",{class:"form-label",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),pc={class:"col-md-6 col-12"},_c={class:"mb-3"},vc=n("label",{class:"form-label",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),fc={class:"mb-2"},bc={class:"form-check"},gc=n("label",{class:"form-check-label",for:"need-cashback-fired"}," Необходимо настроить период сгорания CashBack ",-1),yc={key:0,class:"col-md-12 col-12"},kc={class:"mb-3"},$c=n("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),wc=["value"],Cc={key:0,class:"mb-3"},Fc=n("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),Tc={class:"col-12 mb-2"},Dc={class:"form-check"},Pc=n("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),Sc={key:1,class:"col-md-12 col-12"},Oc={class:"form-check mb-3 ml-3"},Ac=["value"],Mc=n("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),jc={class:"mb-3"},Rc=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Uc=n("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),Vc=n("label",{class:"form-label",id:"payment_provider_token"},[F("Токен платежной системы "),n("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить")],-1),Yc={class:"col-12 mb-2"},Ic={class:"form-check"},Bc=n("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),xc={key:2,class:"col-md-12 col-12"},Nc={class:"mb-3"},Ec=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qc=n("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),zc=n("label",{class:"form-label",id:"bot-vk_shop_link"},[F("Ссылка на группу ВК с товарами "),n("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),Lc={class:"mb-2"},Wc={class:"form-check"},Hc=n("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),Qc={key:3,class:"mb-2"},Xc=n("h6",null,"Настройка категорий CashBack-а",-1),Kc={class:"d-flex justify-content-between align-items-center w-100"},Zc=n("small",null,"Название категории",-1),Gc=["onClick"],Jc=n("i",{class:"fa-regular fa-trash-can"},null,-1),em=[Jc],tm=["onUpdate:modelValue","aria-describedby"],nm=n("div",{class:"alert alert-primary",role:"alert"}," Категории CashBack - это возможность разделить накопления и траты CashBack пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),sm=n("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),om={class:"mb-2"},am={class:"form-check"},lm=n("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),im={key:4,class:"col-md-12 col-12 mb-2"},rm={class:"card border-warning"},dm={class:"card-body"},um={class:"form-group"},cm=n("label",{class:"form-check-label",for:"warning-rules"},[n("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),F(" Правила критических оповещений ")],-1),mm=n("option",{value:null},"Не выбрано",-1),hm=["value"],pm={class:"card my-2 p-2"},_m={class:"row"},vm={class:"col-md-4 d-flex align-items-center"},fm={class:"m-0"},bm={class:"col-md-2"},gm={class:"form-check"},ym=["onUpdate:modelValue","id"],km=["for"],$m={key:0},wm={key:1},Cm={class:"col-md-5"},Fm=["onUpdate:modelValue"],Tm={class:"col-md-1 d-flex justify-content-center"},Dm=["onClick"],Pm=n("i",{class:"fa-solid fa-trash-can"},null,-1),Sm=[Pm],Om={class:"row py-3"},Am=n("div",{class:"col-12"},[n("div",{class:"alert alert-primary",role:"alert"},[n("strong",null,"Внимание!"),F(" Для того чтобы узнать ID канала сперва создайте Канал или Группу в телеграм, добавьте в него вашего "),n("strong",null,"сохраненного бота"),F(', назначьте бота администратором Канала или Группы, а только после этого впишите команду "Мой id" в бота. ')])],-1),Mm={class:"col-md-6 col-12"},jm={class:"mb-3"},Rm={class:"d-flex justify-content-between align-items-center"},Um={class:"form-label d-flex justify-content-between",id:"bot-order-channel"},Vm=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ym=n("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Im=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Bm={class:"col-md-6 col-12"},xm={class:"mb-3"},Nm={class:"d-flex justify-content-between"},Em=n("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов (id,рекламный)",-1),qm={key:0,class:"col-12"},zm=n("div",{class:"alert alert-primary",role:"alert"},[n("strong",null,"Внимание!"),F(' Топики работают только в Группах телеграм с включенным режимом "Топики" в настройках Группы! В каналах топиков нет. ')],-1),Lm=[zm],Wm={key:1,class:"col-12 mb-2"},Hm={class:"form-check"},Qm=n("label",{class:"form-check-label",for:"need-topics-mailing"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),Xm={key:2,class:"col-12 mb-2"},Km={class:"d-flex justify-content-between align-items-center mb-2"},Zm=n("p",null,'Для того, чтоб узнать идентификатор топика в группе впишите в чат "Мой id"',-1),Gm=["disabled"],Jm=n("i",{class:"fa-solid fa-paperclip mr-2"},null,-1),eh={class:"list-group"},th={class:"list-group-item"},nh={class:"mb-0"},sh=["onUpdate:modelValue"],oh={class:"row py-3"},ah={class:"col-12"},lh={class:"mb-3"},ih={class:"d-flex justify-content-between"},rh={class:"form-label",id:"bot-maintenance-message"},dh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),uh={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},ch={class:"row py-3"},mh=n("div",{class:"col-12"},[n("div",{class:"alert alert-primary",role:"alert"}," Системная иконка нужна только для красивого отображения и узнаваемости бота на Landing-е системы. ")],-1),hh={class:"col-12 mb-3"},ph=n("h6",null,[F("Системная иконка бота "),n("span",{class:"badge rounded-pill text-bg-warning m-0"},"желательно")],-1),_h={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},vh={key:0,for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2 bg-primary text-white shadow-md"},fh=n("span",null,"+",-1),bh={class:"mb-2 img-preview",style:{"margin-right":"10px"}},gh={class:"remove"},yh=n("i",{class:"fa-regular fa-trash-can"},null,-1),kh=[yh],$h={key:2,class:"mb-2 img-preview",style:{"margin-right":"10px"}},wh={class:"remove"},Ch=n("i",{class:"fa-regular fa-trash-can"},null,-1),Fh=[Ch],Th=n("div",{class:"col-12"},[n("div",{class:"alert alert-primary",role:"alert"},' Внешний сервис находится в эксперементальном режиме. Он нужен для связывания команд (страниц) бота с программой Клиента (если есть такая необходимость). Если на странице бота выбрано "внешнее управление", то все запросы будут переадесрованы на указанную ниже ссылку. ')],-1),Dh={class:"col-md-12 col-12"},Ph={class:"mb-3"},Sh=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Oh=n("div",null,"Ссылка на внешний сервис обработки данных ",-1),Ah=n("label",{class:"form-label",id:"callback_link"},"Ссылка на внешний сервис обработки данных ",-1),Mh={class:"row py-3"},jh=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"}," Внимание! Данный блок настроек больше не поддерживается и со временем эти настройки будут удалены из системы. ")],-1),Rh={class:"col-12"},Uh={class:"mb-3"},Vh={class:"d-flex justify-content-between"},Yh={class:"form-label",id:"bot-description"},Ih=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Bh=n("div",null,"Отобразится пользователю при первом запуске",-1),xh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Nh={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Eh={class:"col-12"},qh={class:"mb-3"},zh={class:"d-flex justify-content-between"},Lh={class:"form-label",id:"bot-description"},Wh=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Hh=n("div",null,'Для меню "О Боте"',-1),Qh=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Xh={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Kh={class:"col-12"},Zh={class:"card mb-3"},Gh=n("div",{class:"card-header"},[n("h6",null,[F("Информационная ссылка: создайте контент в "),n("a",{target:"_blank",href:"https://telegra.ph"},"https://telegra.ph")])],-1),Jh={class:"card-body"},ep=n("div",{class:"row"},[n("div",{class:"col-12"},[n("h6",null,"Ссылка")])],-1),tp={class:"row"},np={class:"col-12"},sp={class:"mb-3"},op={class:"col-12"},ap={class:"card mb-3"},lp=n("div",{class:"card-header"},[n("h6",null,"Ссылки на соц. сети")],-1),ip={class:"card-body"},rp=n("div",{class:"row"},[n("div",{class:"col-12"},[n("h6",null,"Ссылка")])],-1),dp={class:"col-5"},up={class:"mb-3"},cp=["onUpdate:modelValue","aria-describedby"],mp={class:"col-5"},hp={class:"mb-3"},pp=["onUpdate:modelValue","aria-describedby"],_p={class:"col-2"},vp=["onClick"],fp=n("i",{class:"fa-regular fa-trash-can"},null,-1),bp=[fp],gp={class:"row"},yp={class:"col-12"},kp={class:"row"},$p={class:"col-12"},wp={class:"alert alert-danger alert-dismissible fade show",role:"alert"},Cp=n("strong",null,"Внимание!",-1),Fp=["onClick"],Tp={class:"col-12"},Dp=["disabled"],Pp={key:0},Sp={key:1},Op={key:2,class:"ml-2"},Ap={props:["bot"],data(){return{tab:0,spent_time_counter:0,can_create:!0,can_create_topics:!0,messages:[],need_company_select:!1,selected_warning:null,page:null,step:0,templates:[],load:!1,loadPage:!1,needPageListUpdate:!1,need_threads:!1,need_company:!1,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,need_payments:!1,need_shop:!1,command:null,company:null,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],botForm:{title:"Название бота",short_description:"Описание в шапке бота",long_description:"Описание при первом запуске бота",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,company_id:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:70,tax_per_day:10,welcome_message:"Приветствую!",image:null,cashback_fire_percent:0,cashback_fire_period:0,description:"Это ваш бот! Вот такое вот описание у него.",info_link:null,social_links:[],maintenance_message:"Технические работы",payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],commands:null,selected_bot_template_id:null,pages:[],amo:null,warnings:[]}}},watch:{"botForm.bot_token":{handler(t){this.botForm.bot_token&&this.getMe()},deep:!0},need_threads:function(t,e){let s=[{title:"Отзывы",key:"reviews",value:null},{title:"Начисление cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null},{title:"Доставка",key:"delivery",value:null},{title:"Ответы",key:"response",value:null},{title:"Обратная связь",key:"callback",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=s),this.need_threads&&this.botForm.message_threads&&s.forEach(o=>{this.botForm.message_threads.findIndex(l=>l.key===o.key)===-1&&this.botForm.message_threads.push(o)})},need_payments:function(t,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},computed:{...Ee(["getSlugs","getCurrentCompany"]),filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(t=>!(this.botForm.warnings.findIndex(e=>e.rule_key===t.key)>=0))}},mounted(){if(localStorage.getItem("cashman_admin_bot_creator_counter")!=null){this.can_create=!1;let t=localStorage.getItem("cashman_admin_bot_creator_counter");this.startTimer(t==="null"||t==null?0:t)}window.addEventListener("store_current_company-change-event",t=>{this.company=this.getCurrentCompany}),this.bot?this.$nextTick(()=>{this.botForm={id:this.bot.id||null,title:this.bot.title||"",short_description:this.bot.short_description||"",long_description:this.bot.long_description||"",is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,image:this.bot.image||null,commands:this.bot.commands||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1,level_2:this.bot.level_2,level_3:this.bot.level_3,company_id:this.bot.company_id,photos:this.bot.photos||[],warnings:this.bot.warnings||[],amo:this.bot.amo||null},this.botForm.commands==null&&this.autoAddCommands(),this.botForm.message_threads&&(this.need_threads=!0),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0),this.botForm.warnings.length>0&&(this.need_cashback_rules=!0),this.botForm.cashback_fire_period>0&&(this.need_cashback_fired=!0),this.bot.company&&(this.company=this.bot.company)}):this.botForm.commands==null&&this.autoAddCommands()},methods:{autoAddCommands(){this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]},startTimer(t){this.spent_time_counter=t!=null?Math.min(t,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.can_create=!0,this.spent_time_counter=null),localStorage.setItem("cashman_admin_bot_creator_counter",this.spent_time_counter)},1e3)},alert(t,e=null){e!=null&&(this.tab=e),this.messages.push(t)},removeMessage(t){this.messages.splice(t,1)},createBotTopics(){this.can_create_topics=!1,this.$store.dispatch("createBotTopics",{dataObject:{topics:this.botForm.message_threads,bot_id:this.bot.id}}).then(t=>{this.botForm.message_threads=t.data,this.$notify({title:"Конструктор ботов",text:"Топики успешно созданы!",type:"success"})}).catch(()=>{this.can_create_topics=!0,this.$notify({title:"Конструктор ботов",text:"Ошибка создания топиков",type:"error"})})},getMe(){let t=this.botForm.bot_token||"";t.length<40||this.$store.dispatch("getMe",{bot_token:t}).then(e=>{let s=e.username||null,o=e.first_name||null;s&&(this.botForm.bot_domain=s),o&&(this.botForm.title=o)})},getChatLink(t){this.$store.dispatch("loadChatInfo",{dataObject:{chat_id:t,bot_id:this.bot.id}}).then(e=>{console.log("chat info",e)})},addTextTo(t={param:null,text:null}){this.botForm[t.param]=t.text},removeCommands(t){this.botForm.commands.splice(t,1)},addCommands(){this.botForm.commands||(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},onChangePhotos(t){const e=t.target.files;this.botForm.image=null;for(let s=0;s<e.length;s++)this.botForm.photos=[e[s]]},addItem(t){this.botForm[t].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(t,e){this.botForm[t].splice(e,1)},removePhoto(){this.botForm.photos=[],this.botForm.image=null},addBot(){let t=new FormData;Object.keys(this.botForm).forEach(e=>{const s=this.botForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.company&&t.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)t.append("images[]",this.botForm.photos[e]);t.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:t}).then(e=>{let s=e.data;this.$emit("callback",s),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.startTimer(),this.can_create=!1,this.$store.dispatch("updateBotWebhook",{dataObject:{bot_id:s.id}}).catch(o=>{this.alert(o.response.data.message)}),this.bot==null&&(this.botForm={title:"",short_description:"",long_description:"",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,main_channel:null,balance:null,tax_per_day:null,callback_link:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],warnings:[],selected_bot_template_id:null,pages:[]})}).catch(e=>{this.alert(e.response.data.message),this.$notify({title:"Конструктор ботов",text:"Ошибочка...",type:"error"})})},removeCashBackConfig(t){this.botForm.cashback_config.splice(t,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(t){let e=this.warnings.find(s=>s.key===t);return e||{title:"Не найдено"}},removeWarning(t){this.botForm.warnings.splice(t,1)},companyListCallback(t){this.load=!0,this.company=t,this.botForm.company_id=t.id,this.need_company_select=!1,this.$nextTick(()=>{this.load=!1})},addWarning(){const t=this.selected_warning;this.botForm.warnings.push({rule_key:t.key,rule_value:0,is_active:!0}),this.selected_warning=null}}},WV=Object.assign(Ap,{__name:"BotForm",setup(t){return(e,s)=>{const o=Ut("Popper"),a=en("lazy");return r(),d("form",{class:"py-3 mb-5",onSubmit:s[65]||(s[65]=Pe((...l)=>e.addBot&&e.addBot(...l),["prevent"]))},[n("div",wd,[(e.botForm.id||null)!=null?(r(),d("div",Cd,Td)):(r(),d("div",Dd,[n("div",Pd,[n("div",Sd,[b(n("img",Od,null,512),[[a,"../images/icon.png"]])]),Ad])])),n("div",Md,[n("div",jd,[n("label",Rd,[n("div",null,[le(o,null,{content:q(()=>[Vd]),default:q(()=>[Ud]),_:1}),F(" Токен бота "),Yd])]),b(n("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":s[0]||(s[0]=l=>e.botForm.bot_token=l),maxlength:"255",onInvalid:s[1]||(s[1]=l=>e.alert("Вы не ввели токен бота!")),"aria-describedby":"bot-token",required:""},null,544),[[Q,e.botForm.bot_token]])])])]),e.botForm.bot_token?(r(),d("div",Id,[n("div",Bd,[n("ul",xd,[n("li",{class:"nav-item",onClick:s[2]||(s[2]=l=>e.tab=0)},[n("a",{class:B(["nav-link",{active:e.tab===0}]),href:"javascript:void(0)"},"Базовые настройки",2)]),n("li",{class:"nav-item",onClick:s[3]||(s[3]=l=>e.tab=1)},[n("a",{class:B(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Кэшбэк",2)]),e.botForm.id!=null?(r(),d("li",{key:0,class:"nav-item",onClick:s[4]||(s[4]=l=>e.tab=2)},[n("a",{class:B(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Обратная связь",2)])):c("",!0),e.botForm.id==null?(r(),d("li",Nd,qd)):c("",!0),n("li",{class:"nav-item",onClick:s[5]||(s[5]=l=>e.tab=3)},[n("a",{class:B(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Сообщения",2)]),n("li",{class:"nav-item",onClick:s[6]||(s[6]=l=>e.tab=4)},[n("a",{class:B(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Другие настройки",2)]),n("li",{class:"nav-item",onClick:s[7]||(s[7]=l=>e.tab=5)},[n("a",{class:B(["nav-link text-danger",{active:e.tab===5}]),href:"javascript:void(0)"},[zd,F(" Устаревшие настройки")],2)])])])])):c("",!0),b(n("div",Ld,[n("div",Wd,[n("div",Hd,[b(n("input",{class:"form-check-input",type:"checkbox",value:e.need_company_select,"onUpdate:modelValue":s[8]||(s[8]=l=>e.need_company_select=l),id:"bot-select-company"},null,8,Qd),[[Se,e.need_company_select]]),Xd]),e.botForm.company_id==null?(r(),d("p",{key:0,class:"alert alert-danger",onClick:s[9]||(s[9]=l=>e.need_company_select=!0)},"Внимание! Вы не выбрали клиента!")):(r(),d("p",{key:1,class:"card alert alert-success cursor-pointer",onClick:s[10]||(s[10]=l=>e.need_company_select=!0)},[F(" Выбран клиент "),e.company?(r(),d("span",Kd,"#"+f(e.company.id)+" "+f(e.company.title),1)):c("",!0)]))]),e.need_company_select?(r(),d("div",Zd,[e.load?c("",!0):(r(),de(Ra,{key:0,selected:e.botForm.company_id,onCallback:e.companyListCallback},null,8,["selected","onCallback"]))])):c("",!0),n("div",Gd,[n("div",Jd,[b(n("input",{class:"form-check-input",type:"checkbox",value:e.botForm.is_template||!1,"onUpdate:modelValue":s[11]||(s[11]=l=>e.botForm.is_template=l),id:"bot-is-template"},null,8,eu),[[Se,e.botForm.is_template]]),tu])]),e.botForm.is_template?(r(),d("div",nu,[n("div",su,[n("label",ou,[le(o,null,{content:q(()=>[lu]),default:q(()=>[au]),_:1}),F(" Название шаблона бота "),iu]),b(n("input",{type:"text",class:"form-control",placeholder:"Название \\ описание шаблона","aria-label":"Описание шаблона","onUpdate:modelValue":s[12]||(s[12]=l=>e.botForm.template_description=l),maxlength:"255",onInvalid:s[13]||(s[13]=l=>e.alert("Вы не ввели название шаблона!")),"aria-describedby":"bot-template-description",required:""},null,544),[[Q,e.botForm.template_description]])])])):c("",!0),n("div",ru,[n("div",du,[n("label",uu,[le(o,null,{content:q(()=>[mu]),default:q(()=>[cu]),_:1}),F(" Доменное имя бота (загружается автоматически) ")]),b(n("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота",disabled:!0,name:"bot_domain",onInvalid:s[14]||(s[14]=l=>e.alert("Вы не ввели доменное имя бота!",0)),"onUpdate:modelValue":s[15]||(s[15]=l=>e.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,544),[[Q,e.botForm.bot_domain]]),e.botForm.bot_domain?(r(),d("p",hu,[F("Проверить работу бота "),n("a",{href:"https://t.me/"+e.botForm.bot_domain,target:"_blank"},"@"+f(e.botForm.bot_domain),9,pu)])):c("",!0)])]),n("div",_u,[n("div",vu,[n("div",fu,[bu,n("div",gu,[n("label",yu,[e.botForm.title?(r(),d("span",ku,[F(" Название бота "),e.botForm.title.length>0?(r(),d("small",$u,"Длина текста "+f(e.botForm.title.length)+"/64",1)):c("",!0)])):c("",!0)]),b(n("input",{type:"text",class:"form-control",placeholder:"Текст названия","aria-label":"Текст названия","onUpdate:modelValue":s[16]||(s[16]=l=>e.botForm.title=l),maxlength:"64","aria-describedby":"bot-title"},null,512),[[Q,e.botForm.title]])]),n("div",wu,[n("label",Cu,[n("span",null,[F(" Описание в шапке бота "),e.botForm.short_description.length>0?(r(),d("small",Fu,"Длина текста "+f(e.botForm.short_description.length)+"/105",1)):c("",!0)])]),Tu,b(n("textarea",{class:"form-control",placeholder:"Описание в шапке бота","aria-label":"Описание в шапке бота","onUpdate:modelValue":s[17]||(s[17]=l=>e.botForm.short_description=l),maxlength:"105","aria-describedby":"bot-short-description"},`
                                `,512),[[Q,e.botForm.short_description]])]),n("div",Du,[n("label",Pu,[n("span",null,[F(" Описание возможностей бота "),e.botForm.long_description.length>0?(r(),d("small",Su,"Длина текста "+f(e.botForm.long_description.length)+"/505",1)):c("",!0)])]),Ou,b(n("textarea",{class:"form-control",placeholder:"Описание возможностей бота","aria-label":"Описание возможностей бота","onUpdate:modelValue":s[18]||(s[18]=l=>e.botForm.long_description=l),maxlength:"505","aria-describedby":"bot-long-description"},`
                                `,512),[[Q,e.botForm.long_description]])]),(r(!0),d(x,null,ne(e.botForm.commands,(l,i)=>(r(),d("div",{class:"row",key:"commands-"+i},[e.botForm.commands[i].command==="/adminmenu"?(r(),d("div",Au,ju)):c("",!0),n("div",Ru,[n("div",Uu,[b(n("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255",onInvalid:s[19]||(s[19]=u=>e.alert("Вы не ввели название команды",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].command=u,"aria-describedby":"bot-command-"+i,required:""},null,40,Vu),[[Q,e.botForm.commands[i].command]])])]),n("div",Yu,[n("div",Iu,[b(n("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255",onInvalid:s[20]||(s[20]=u=>e.alert("Вы не ввели описание команды!",0)),"onUpdate:modelValue":u=>e.botForm.commands[i].description=u,"aria-describedby":"bot-command-description-"+i,required:""},null,40,Bu),[[Q,e.botForm.commands[i].description]])])]),n("div",xu,[n("button",{type:"button",onClick:u=>e.removeCommands(i),class:"btn btn-outline-danger w-100"},qu,8,Nu)])]))),128)),n("div",zu,[n("div",Lu,[n("button",{type:"button",onClick:s[21]||(s[21]=l=>e.addCommands()),class:"btn btn-outline-success w-100"},[(e.botForm.commands||[]).length>0?(r(),d("span",Wu," Добавить еще команду")):(r(),d("span",Hu," Добавить системное меню"))])])])])])]),Qu,n("div",Xu,[n("div",Ku,[n("label",Zu,[le(o,null,{content:q(()=>[Ju]),default:q(()=>[Gu]),_:1}),F(" Баланс бота, руб "),ec]),b(n("input",{type:"number",class:"form-control",placeholder:"Баланс","aria-label":"Баланс","onUpdate:modelValue":s[22]||(s[22]=l=>e.botForm.balance=l),min:"0",onInvalid:s[23]||(s[23]=l=>e.alert("Вы не ввели сумму баланса бота!",1)),"aria-describedby":"bot-balance",required:""},null,544),[[Q,e.botForm.balance]])])]),n("div",tc,[n("div",nc,[n("label",sc,[le(o,null,{content:q(()=>[ac]),default:q(()=>[oc]),_:1}),F(" Списание за сутки, руб "),lc]),b(n("input",{type:"number",class:"form-control",placeholder:"Списание","aria-label":"Списание","onUpdate:modelValue":s[24]||(s[24]=l=>e.botForm.tax_per_day=l),min:"0",onInvalid:s[25]||(s[25]=l=>e.alert("Вы не ввели сумму списания бота!",1)),"aria-describedby":"bot-tax-per-day",required:""},null,544),[[Q,e.botForm.tax_per_day]])])])],512),[[Qe,e.tab===0&&e.botForm.bot_token]]),b(n("div",ic,[n("div",rc,[n("div",dc,[uc,b(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[26]||(s[26]=l=>e.botForm.level_1=l),min:"0",onInvalid:s[27]||(s[27]=l=>e.alert("Вы не ввели значение кэшбэка 1 уровня бота!",1)),"aria-describedby":"bot-level-1",required:""},null,544),[[Q,e.botForm.level_1]])])]),n("div",cc,[n("div",mc,[hc,b(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[28]||(s[28]=l=>e.botForm.level_2=l),min:"0","aria-describedby":"bot-level-2"},null,512),[[Q,e.botForm.level_2]])])]),n("div",pc,[n("div",_c,[vc,b(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[29]||(s[29]=l=>e.botForm.level_3=l),min:"0","aria-describedby":"bot-level-3"},null,512),[[Q,e.botForm.level_3]])])]),n("div",fc,[n("div",bc,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[30]||(s[30]=l=>e.need_cashback_fired=l),type:"checkbox",id:"need-cashback-fired"},null,512),[[Se,e.need_cashback_fired]]),gc])]),e.need_cashback_fired?(r(),d("div",yc,[n("div",kc,[$c,b(n("select",{class:"form-control","onUpdate:modelValue":s[31]||(s[31]=l=>e.botForm.cashback_fire_period=l),id:"cashback-fired-period"},[(r(!0),d(x,null,ne(e.cashback_fire_periods,l=>(r(),d("option",{value:l.value},f(l.title||"Не указано"),9,wc))),256))],512),[[zt,e.botForm.cashback_fire_period]])]),e.botForm.cashback_fire_period>0?(r(),d("div",Cc,[Fc,b(n("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":s[32]||(s[32]=l=>e.botForm.cashback_fire_percent=l),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[Q,e.botForm.cashback_fire_percent]])])):c("",!0)])):c("",!0),n("div",Tc,[n("div",Dc,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[33]||(s[33]=l=>e.need_payments=l),type:"checkbox",id:"need-payments"},null,512),[[Se,e.need_payments]]),Pc])]),e.need_payments?(r(),d("div",Sc,[n("div",Oc,[b(n("input",{class:"form-check-input",type:"checkbox",value:e.botForm.auto_cashback_on_payments,"onUpdate:modelValue":s[34]||(s[34]=l=>e.botForm.auto_cashback_on_payments=l),id:"bot-auto-cashback-on-payments"},null,8,Ac),[[Se,e.botForm.auto_cashback_on_payments]]),Mc]),n("div",jc,[le(o,null,{content:q(()=>[Uc]),default:q(()=>[Rc]),_:1}),Vc,b(n("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":s[35]||(s[35]=l=>e.botForm.payment_provider_token=l),"aria-describedby":"payment_provider_token"},null,512),[[Q,e.botForm.payment_provider_token]])])])):c("",!0),n("div",Yc,[n("div",Ic,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[36]||(s[36]=l=>e.need_shop=l),type:"checkbox",id:"need-shop"},null,512),[[Se,e.need_shop]]),Bc])]),e.need_shop?(r(),d("div",xc,[n("div",Nc,[le(o,null,{content:q(()=>[qc]),default:q(()=>[Ec]),_:1}),zc,b(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":s[37]||(s[37]=l=>e.botForm.vk_shop_link=l),"aria-describedby":"vk_shop_link"},null,512),[[Q,e.botForm.vk_shop_link]])])])):c("",!0),n("div",Lc,[n("div",Wc,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[38]||(s[38]=l=>e.need_cashback_config=l),type:"checkbox",id:"need-cashback-config"},null,512),[[Se,e.need_cashback_config]]),Hc])]),e.need_cashback_config?(r(),d("div",Qc,[Xc,(r(!0),d(x,null,ne(e.botForm.cashback_config,(l,i)=>(r(),d("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+i},[n("div",Kc,[Zc,n("button",{type:"button",onClick:u=>e.removeCashBackConfig(i),class:"btn btn-link text-danger"},em,8,Gc)]),b(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255",onInvalid:s[39]||(s[39]=u=>e.alert("Вы не ввели название категории!",1)),"onUpdate:modelValue":u=>e.botForm.cashback_config[i].title=u,"aria-describedby":"bot-cashback-config-"+i,required:""},null,40,tm),[[Q,e.botForm.cashback_config[i].title]])]))),128)),nm,n("button",{type:"button",onClick:s[40]||(s[40]=l=>e.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-info w-100"}," Добавить категорию "),sm])):c("",!0),n("div",om,[n("div",am,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[41]||(s[41]=l=>e.need_cashback_rules=l),type:"checkbox",id:"need-cashback-rules"},null,512),[[Se,e.need_cashback_rules]]),lm])]),e.need_cashback_rules?(r(),d("div",im,[n("div",rm,[n("div",dm,[n("div",um,[cm,b(n("select",{class:"form-control","onUpdate:modelValue":s[42]||(s[42]=l=>e.selected_warning=l),onChange:s[43]||(s[43]=(...l)=>e.addWarning&&e.addWarning(...l)),id:"warning-rules"},[mm,(r(!0),d(x,null,ne(e.filteredWarnings,l=>(r(),d("option",{value:l},f(l.title),9,hm))),256))],544),[[zt,e.selected_warning]])]),(r(!0),d(x,null,ne(e.botForm.warnings,(l,i)=>(r(),d("div",pm,[n("div",_m,[n("div",vm,[n("p",fm,f(e.getWarning(l.rule_key).title||"Не найдено"),1)]),n("div",bm,[n("div",gm,[b(n("input",{class:"form-check-input","onUpdate:modelValue":u=>e.botForm.warnings[i].is_active=u,type:"checkbox",id:"warning-is-active-"+i},null,8,ym),[[Se,e.botForm.warnings[i].is_active]]),n("label",{class:"form-check-label",for:"warning-is-active-"+i},[e.botForm.warnings[i].is_active?(r(),d("span",$m,"Вкл")):(r(),d("span",wm,"Выкл"))],8,km)])]),n("div",Cm,[b(n("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":u=>e.botForm.warnings[i].rule_value=u,min:"0","aria-describedby":"bot-level-3"},null,8,Fm),[[Q,e.botForm.warnings[i].rule_value]])]),n("div",Tm,[n("button",{onClick:u=>e.removeWarning(i),type:"button",class:"btn btn-outline-danger"},Sm,8,Dm)])])]))),256))])])])):c("",!0)],512),[[Qe,e.tab===1&&e.botForm.bot_token]]),b(n("div",Om,[Am,n("div",Mm,[n("div",jm,[n("div",Rm,[n("label",Um,[n("div",null,[le(o,null,{content:q(()=>[Ym]),default:q(()=>[Vm]),_:1}),F(" Канал для заказов (id) "),Im])]),le(qn,{token:e.botForm.bot_token,param:"order_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),b(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":s[44]||(s[44]=l=>e.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[Q,e.botForm.order_channel]]),n("small",null,[n("a",{onClick:s[45]||(s[45]=l=>e.getChatLink(e.botForm.order_channel)),href:"javascript:void(0)"},"Узнать ссылку"),F("(будет отправлена в бота)")])])]),n("div",Bm,[n("div",xm,[n("div",Nm,[Em,le(qn,{token:e.botForm.bot_token,param:"main_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])]),b(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":s[46]||(s[46]=l=>e.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[Q,e.botForm.main_channel]]),n("small",null,[n("a",{onClick:s[47]||(s[47]=l=>e.getChatLink(e.botForm.main_channel)),href:"javascript:void(0)"},"Узнать ссылку"),F("(будет отправлена в бота)")])])]),e.botForm.order_channel?(r(),d("div",qm,Lm)):c("",!0),e.botForm.order_channel?(r(),d("div",Wm,[n("div",Hm,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[48]||(s[48]=l=>e.need_threads=l),type:"checkbox",id:"need-topics-mailing"},null,512),[[Se,e.need_threads]]),Qm])])):c("",!0),e.need_threads&&e.botForm.order_channel?(r(),d("div",Xm,[n("div",Km,[Zm,n("button",{class:"btn btn-outline-info",onClick:s[49]||(s[49]=(...l)=>e.createBotTopics&&e.createBotTopics(...l)),disabled:!e.can_create_topics,type:"button"},[Jm,F("Создать топики автоматически ")],8,Gm)]),n("ul",eh,[(r(!0),d(x,null,ne(e.botForm.message_threads,(l,i)=>(r(),d("li",th,[n("p",nh,f(l.title)+" ("+f(l.key)+")",1),b(n("input",{type:"number",class:"form-control",min:"0",max:"10000",placeholder:"Идентификатор топика","onUpdate:modelValue":u=>e.botForm.message_threads[i].value=u},null,8,sh),[[Q,e.botForm.message_threads[i].value]])]))),256))])])):c("",!0)],512),[[Qe,e.tab===2&&e.botForm.bot_token]]),b(n("div",oh,[n("div",ah,[n("div",lh,[n("div",ih,[n("label",rh,[F("Сообщение для режима тех. работ "),dh,e.botForm.maintenance_message?(r(),d("small",uh," Длина текста "+f(e.botForm.maintenance_message.length),1)):c("",!0)])]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":s[50]||(s[50]=l=>e.botForm.maintenance_message=l),maxlength:"255",onInvalid:s[51]||(s[51]=l=>e.alert("Вы не ввели сообщение для технических работ бота!",3)),"aria-describedby":"bot-maintenance-message",required:""},`
                    `,544),[[Q,e.botForm.maintenance_message]])])])],512),[[Qe,e.tab===3&&e.botForm.bot_token]]),b(n("div",ch,[mh,n("div",hh,[ph,n("div",_h,[e.botForm.photos?(r(),d("label",vh,[fh,n("input",{type:"file",id:"bot-photos",accept:"image/*",onChange:s[52]||(s[52]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)])):c("",!0),e.botForm.photos?(r(!0),d(x,{key:1},ne(e.botForm.photos,(l,i)=>(r(),d("div",bh,[b(n("img",null,null,512),[[a,e.getPhoto(l).imageUrl]]),n("div",gh,[n("a",{onClick:s[53]||(s[53]=u=>e.removePhoto())},kh)])]))),256)):(r(),d("div",$h,[b(n("img",null,null,512),[[a,"/images-by-bot-id/"+t.bot.id+"/"+e.botForm.image]]),n("div",wh,[n("a",{onClick:s[54]||(s[54]=l=>e.removePhoto())},Fh)])]))])]),Th,n("div",Dh,[n("div",Ph,[le(o,null,{content:q(()=>[Oh]),default:q(()=>[Sh]),_:1}),Ah,b(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"ссылка на внешний сервис","onUpdate:modelValue":s[55]||(s[55]=l=>e.botForm.callback_link=l),"aria-describedby":"callback_link"},null,512),[[Q,e.botForm.callback_link]])])])],512),[[Qe,e.tab===4&&e.botForm.bot_token]]),b(n("div",Mh,[jh,n("div",Rh,[n("div",Uh,[n("div",Vh,[n("label",Yh,[le(o,null,{content:q(()=>[Bh]),default:q(()=>[Ih]),_:1}),F(" Приветственное сообщение "),xh,e.botForm.welcome_message?(r(),d("small",Nh," Длина текста "+f(e.botForm.welcome_message.length),1)):c("",!0)])]),b(n("textarea",{type:"text",class:"form-control",style:{"min-height":"400px"},placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":s[56]||(s[56]=l=>e.botForm.welcome_message=l),onInvalid:s[57]||(s[57]=l=>e.alert("Вы не ввели приветственное сообщение!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[Q,e.botForm.welcome_message]])])]),n("div",Eh,[n("div",qh,[n("div",zh,[n("label",Lh,[le(o,null,{content:q(()=>[Hh]),default:q(()=>[Wh]),_:1}),F(" Описание бота "),Qh,e.botForm.description?(r(),d("small",Xh," Длина текста "+f(e.botForm.description.length),1)):c("",!0)])]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":s[58]||(s[58]=l=>e.botForm.description=l),onInvalid:s[59]||(s[59]=l=>e.alert("Вы не ввели описание бота!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[Q,e.botForm.description]])])]),n("div",Kh,[n("div",Zh,[Gh,n("div",Jh,[ep,n("div",tp,[n("div",np,[n("div",sp,[b(n("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":s[60]||(s[60]=l=>e.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[Q,e.botForm.info_link]])])])])])])]),n("div",op,[n("div",ap,[lp,n("div",ip,[rp,(r(!0),d(x,null,ne(e.botForm.social_links,(l,i)=>(r(),d("div",{class:"row",key:"social-link"+i},[n("div",dp,[n("div",up,[b(n("input",{type:"text",class:"form-control",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255",onInvalid:s[61]||(s[61]=u=>e.alert("Вы не ввели название ссылки на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].title=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,cp),[[Q,e.botForm.social_links[i].title]])])]),n("div",mp,[n("div",hp,[b(n("input",{type:"text",class:"form-control",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255",onInvalid:s[62]||(s[62]=u=>e.alert("Вы не ввели ссылку на соц. сеть!",4)),"onUpdate:modelValue":u=>e.botForm.social_links[i].url=u,"aria-describedby":"bot-social-link-"+i,required:""},null,40,pp),[[Q,e.botForm.social_links[i].url]])])]),n("div",_p,[n("button",{type:"button",onClick:u=>e.removeItem("social_links",i),class:"btn btn-outline-danger w-100"},bp,8,vp)])]))),128)),n("div",gp,[n("div",yp,[n("button",{type:"button",onClick:s[63]||(s[63]=l=>e.addSocialLinks()),class:"btn btn-outline-success w-100"},"Добавить еще ссылку ")])])])])])],512),[[Qe,e.tab===5&&e.botForm.bot_token]]),n("div",kp,[n("div",$p,[e.messages.length>0?(r(!0),d(x,{key:0},ne(e.messages,(l,i)=>(r(),d("div",wp,[Cp,F(" "+f(l||"Ошибка")+" ",1),n("button",{type:"button",class:"btn-close",onClick:u=>e.removeMessage(i)},null,8,Fp)]))),256)):c("",!0)]),n("div",Tp,[n("button",{type:"submit",onClick:s[64]||(s[64]=l=>e.messages=[]),disabled:!e.botForm.bot_token||!e.can_create,title:"Сохранение бота",class:"btn btn-primary min-menu-btn w-100"},[t.bot?(r(),d("span",Sp,"Обновить бота")):(r(),d("span",Pp,"Добавить бота")),e.can_create?c("",!0):(r(),d("span",Op,f(e.spent_time_counter)+" сек.",1))],8,Dp)])])],32)}}});const Mp={class:"row"},jp={class:"input-group mb-3"},Rp={class:"row"},Up={class:"col-12"},Vp={class:"form-check"},Yp=n("label",{class:"form-check-label",for:"needDeleted"},"Отобразить удаленные",-1),Ip={key:0,class:"row"},Bp={key:0,class:"col-12"},xp={class:"col-12 mb-3"},Np={class:"list-group w-100"},Ep={class:"d-flex justify-content-between"},qp=["onClick"],zp={key:0},Lp={key:1},Wp={key:2},Hp=n("i",{class:"fa-solid fa-lock"},null,-1),Qp=[Hp],Xp={key:0},Kp={class:"dropdown"},Zp=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),Gp={class:"dropdown-menu"},Jp={key:0},e_=["onClick"],t_=n("i",{class:"fa-solid fa-copy mr-1"},null,-1),n_={key:1},s_=["onClick"],o_=n("i",{class:"fa-solid fa-ban mr-1"},null,-1),a_=["onClick"],l_=n("i",{class:"fa-solid fa-copy mr-1"},null,-1),i_={key:2},r_=["onClick"],d_=n("i",{class:"fa-solid fa-trash mr-1"},null,-1),u_={key:0,class:"component-icons"},c_={key:0},m_=n("i",{class:"fa-regular fa-images"},null,-1),h_=[m_],p_={key:1},__=n("i",{class:"fa-regular fa-note-sticky"},null,-1),v_=[__],f_={key:2},b_=n("i",{class:"fa-solid fa-photo-film"},null,-1),g_=[b_],y_={key:3},k_=n("i",{class:"fa-regular fa-file-audio"},null,-1),$_=[k_],w_={key:4},C_=n("i",{class:"fa-regular fa-file-word"},null,-1),F_=[C_],T_={key:5},D_=n("i",{class:"fa-solid fa-link"},null,-1),P_=[D_],S_={key:6},O_=n("i",{class:"fa-solid fa-scroll"},null,-1),A_=[O_],M_={key:7},j_=n("i",{class:"fa-regular fa-comment-dots"},null,-1),R_=[j_],U_={key:8},V_=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),Y_=[V_],I_={key:9},B_=n("i",{class:"fa-regular fa-keyboard"},null,-1),x_=[B_],N_={key:10},E_=n("i",{class:"fa-solid fa-ellipsis"},null,-1),q_=[E_],z_={class:"col-12"},L_={key:1,class:"row"},W_=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," Созданных страниц не найдено! ")],-1),H_=[W_],Q_={props:["editor","current"],data(){return{bot:null,current_page:0,need_deleted:!1,loading:!0,pages:[],search:null,pages_paginate_object:null,need_new_page:!1}},watch:{need_deleted:function(t,e){this.nextPages(0)},getPages:function(t,e){this.$nextTick(()=>{this.search||(this.pages=this.getPages)})},search:function(t,e){this.nextPages(0)}},computed:{...Ee(["getPages","getCurrentBot","getPagesPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.bot&&(this.current_page=localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0),this.loadPages()})},methods:{loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},selectPage(t){this.$emit("callback",t),this.$notify("Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы")},nextPages(t){this.current_page=t,this.bot&&localStorage.setItem(`cashman_pagelist_${this.bot.id}_page_index`,this.current_page),this.loadPages()},duplicatePage(t){this.loading=!0,this.$store.dispatch("duplicatePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},forceRemovePage(t){this.loading=!0,this.$store.dispatch("forceRemovePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},restorePage(t){this.loading=!0,this.$store.dispatch("restorePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},removePage(t){this.loading=!0,this.$store.dispatch("removePage",{dataObject:{pageId:t}}).then(e=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},loadPages(){this.loading=!0,this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id||null,search:this.search||null,needDeleted:this.need_deleted},page:this.current_page||0}).then(t=>{this.loading=!1,this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject,this.pages.length===0&&localStorage.setItem(`cashman_pagelist_${this.bot.id}_page_index`,0)}).catch(()=>{this.loading=!1})}}},$s=Object.assign(Q_,{__name:"PagesList",setup(t){return(e,s)=>(r(),d(x,null,[n("div",Mp,[n("div",jp,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск страницы","aria-label":"Поиск бота","onUpdate:modelValue":s[0]||(s[0]=o=>e.search=o),"aria-describedby":"button-addon2"},null,512),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=(...o)=>e.loadPages&&e.loadPages(...o)),type:"button",id:"button-addon2"},"Найти ")])]),n("div",Rp,[n("div",Up,[n("div",Vp,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[2]||(s[2]=o=>e.need_deleted=o),type:"checkbox",id:"needDeleted"},null,512),[[Se,e.need_deleted]]),Yp])])]),e.pages.length>0?(r(),d("div",Ip,[e.pages.length>7?(r(),d("div",Bp,[e.pages_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0),n("div",xp,[n("ul",Np,[(r(!0),d(x,null,ne(e.pages,(o,a)=>(r(),d("li",{class:B(["list-group-item cursor-pointer page-menu-item btn btn-outline-info mb-1",{"border border-warning":o.deleted_at!=null}])},[n("div",Ep,[n("strong",{onClick:l=>e.selectPage(o)},[F("#"+f(o.id||"Не указано")+" ",1),o.slug?(r(),d("span",zp,f(o.slug.command||"Не указано"),1)):(r(),d("span",Lp,"Не привязано к команде")),t.current&&t.current==o.id?(r(),d("span",Wp,Qp)):c("",!0)],8,qp),t.editor?(r(),d("div",Xp,[n("div",Kp,[Zp,n("ul",Gp,[o.deleted_at!=null?(r(),d("li",Jp,[n("a",{class:"dropdown-item",onClick:l=>e.restorePage(o.id)},[t_,F("Восстановить")],8,e_)])):c("",!0),o.deleted_at!=null?(r(),d("li",n_,[n("a",{class:"dropdown-item",onClick:l=>e.forceRemovePage(o.id)},[o_,F("Удалить полностью")],8,s_)])):c("",!0),n("li",null,[n("a",{class:"dropdown-item",onClick:l=>e.duplicatePage(o.id)},[l_,F("Дублировать")],8,a_)]),o.deleted_at==null?(r(),d("li",i_,[n("a",{class:"dropdown-item",onClick:l=>e.removePage(o.id)},[d_,F("Удалить")],8,r_)])):c("",!0)])])])):c("",!0)]),o?(r(),d("ul",u_,[(o.images||[]).length>0?(r(),d("li",c_,h_)):c("",!0),o.sticker?(r(),d("li",p_,v_)):c("",!0),(o.videos||[]).length>0?(r(),d("li",f_,g_)):c("",!0),(o.audios||[]).length>0?(r(),d("li",y_,$_)):c("",!0),(o.documents||[]).length>0?(r(),d("li",w_,F_)):c("",!0),o.next_page_id?(r(),d("li",T_,P_)):c("",!0),o.next_bot_menu_slug_id?(r(),d("li",S_,A_)):c("",!0),o.next_bot_dialog_command_id?(r(),d("li",M_,R_)):c("",!0),o.rules_if?(r(),d("li",U_,Y_)):c("",!0),o.reply_keyboard_id?(r(),d("li",I_,x_)):c("",!0),o.inline_keyboard_id?(r(),d("li",N_,q_)):c("",!0)])):c("",!0)],2))),256))])]),n("div",z_,[e.pages_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",L_,H_))],64))}}),X_={class:"row"},K_={class:"col-12"},Z_=n("h6",null,"Добавление нового скрипта в бота",-1),G_={key:0,class:"row"},J_={class:"col-md-6 col-lg-4 col-sm-6 col-12 mb-2"},ev={key:1,class:"row"},tv=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"},' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')],-1),nv=[tv],sv={props:["bot","global","selected"],data(){return{load:!1,search:null,slugs:[],paginate:[]}},computed:{...Ee(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(t=>{let e=t.slug||"",s=t.command||"",o=t.comment||"";return s.toLowerCase().indexOf(this.search.toLowerCase())!==-1||o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(t){this.loadSlugs(t)},selectSlug(t){this.$emit("callback",{id:t.id||null,slug:t.slug,comment:t.comment,command:t.command}),this.$notify("Вы выбрали скрипт из списка!")},loadSlugs(t=0){this.$store.dispatch("loadSlugs",{dataObject:{botId:this.bot.id,search:this.search,needGlobal:this.global},page:t}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){}}},ov=Object.assign(sv,{__name:"BotSlugListSimple",setup(t){return(e,s)=>(r(),d("div",X_,[n("div",K_,[Z_,n("div",null,[b(n("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":s[0]||(s[0]=o=>e.search=o),onKeyup:s[1]||(s[1]=(...o)=>e.loadSlugs&&e.loadSlugs(...o)),placeholder:"Поиск нужного скрипта по описанию"},null,544),[[Q,e.search]])]),e.slugs.length>0?(r(),d("div",G_,[(r(!0),d(x,null,ne(e.slugs,(o,a)=>(r(),d("div",J_,[le(zl,{"is-active":(t.selected||[]).indexOf(o.id)!=-1,item:o,bot:t.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["is-active","item","bot","onCallback","onSelect"])]))),256)),e.paginate?(r(),de(Je,{key:0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",ev,nv))])]))}});const av={props:["param"],data(){return{expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона: +7(982)000-00-00"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату DD.MM.YYYY"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}]}},methods:{expressionsSelect(t){this.$emit("callback",{param:this.param,text:t.expression})}}},lv={class:"dropdown"},iv=n("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-regular fa-registered"})],-1),rv={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},dv=["onClick"];function uv(t,e,s,o,a,l){return r(),d("div",lv,[iv,n("div",rv,[n("li",null,[(r(!0),d(x,null,ne(a.expressions,i=>(r(),d("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(i)},f(i.description||"-"),9,dv))),256))])])])}const cv=nn(av,[["render",uv]]),mv={key:0,class:"mb-2 d-flex justify-content-start flex-wrap"},hv=n("p",null,"Связь цепочек: ",-1),pv=["onClick"],_v={key:0,class:"fa-solid fa-arrow-right font-12"},vv={class:"form-floating mb-2"},fv=["id"],bv=["for"],gv={class:"form-check mb-2"},yv=n("label",{class:"form-check-label",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),kv={key:1,class:"form-floating mb-2"},$v=["id"],wv=["for"],Cv={key:2,class:"form-floating mb-2"},Fv=["id"],Tv=["for"],Dv={key:3,class:"mb-2"},Pv={class:"d-flex justify-content-between"},Sv=["for"],Ov=["id"],Av={class:"mb-2"},Mv={class:"d-flex justify-content-between"},jv=["for"],Rv=["id"],Uv={class:"mb-2"},Vv={class:"form-check"},Yv=n("label",{class:"form-check-label",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),Iv={class:"form-check"},Bv=n("label",{class:"form-check-label",for:"need-dialog-menu-inline"}," В диалоге нужно меню тексту ",-1),xv={class:"form-check"},Nv=n("label",{class:"form-check-label",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),Ev={key:4,class:"card mb-2"},qv={class:"card-body"},zv=n("h6",null,"Фотографии к диалогу",-1),Lv={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},Wv={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Hv=n("span",null,"+",-1),Qv={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Xv={class:"remove"},Kv=["onClick"],Zv={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Gv={class:"remove"},Jv=["onClick"],ef={key:5,class:"card mb-2"},tf=n("div",{class:"card-header"},[n("h6",null,"Кнопки к тексту вопроса")],-1),nf={class:"card-body"},sf={key:6,class:"card mb-2"},of=n("div",{class:"card-header"},[n("h6",null,"Кнопки в виде нижнего меню")],-1),af={class:"card-body"},lf={class:"mb-2"},rf=n("label",{class:"form-check-label",for:"need-empty-dialog"}," Сохранить в переменную ",-1),df=n("option",{selected:""},"Не выбрано",-1),uf=["value"],cf={class:"form-check mb-2"},mf=n("label",{class:"form-check-label",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),hf={key:7,class:"mb-2"},pf=n("p",null,"Выбрать флаги",-1),_f=["onClick"],vf={key:8,class:"mb-2"},ff={key:0,class:"row"},bf=n("div",{class:"col-12"},[n("p",null,"Доступные для связывания диалоги:")],-1),gf={class:"col-md-12 mb-1"},yf={type:"button",class:"btn btn-outline-primary w-100 d-flex justify-content-between align-items-center",style:{"text-align":"left"}},kf=["onClick"],$f={key:0,class:"fa-solid fa-link mr-2 text-success"},wf={key:1,class:"row"},Cf=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"}," Диалогов для связывания нет ")],-1),Ff=[Cf],Tf=n("hr",null,null,-1),Df={class:"mb-2"},Pf={type:"submit",class:"btn btn-outline-success p-3 w-100"},Sf={key:0},Of={key:1},Af={props:["item","bot"],data(){return{loading:!0,dialog_commands:[],dialog_commands_paginate_object:null,need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,is_empty:!1,result_flags:[],store_to:null,result_channel:null,inline_keyboard:null,reply_keyboard:null},photos:[]}},computed:{...Ee(["getDialogCommands","getDialogCommandsPaginateObject"]),filteredCommands(){return this.dialog_commands?this.dialog_commands.filter(t=>t.id!=this.commandForm.id):[]}},mounted(){this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.item&&(this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject)},methods:{nextDialogs(t){this.loadDialogs(t)},loadDialogs(t=0){this.loading=!0,this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{this.loading=!1,this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject}).catch(()=>{this.loading=!1})},doCommandLink(t){this.loading=!0,this.commandForm.next_bot_dialog_command_id=t},submit(){this.loading=!0;let t=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const s=this.commandForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.photos){for(let e=0;e<this.photos.length;e++)t.append("files[]",this.photos[e]);t.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:t}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Успешная обработка диалоговой команды",type:"success"}),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,is_empty:!1,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t,e){this[t].splice(e,1)},onChangePhotos(t){const e=t.target.files;for(let s=0;s<e.length;s++)this.photos.push(e[s])},saveInlineKeyboard(t){this.commandForm.inline_keyboard=t},saveReplyKeyboard(t){this.commandForm.reply_keyboard=t},addTextTo(t={param:null,text:null}){this.commandForm[t.param]=t.text},selectElementById(t){this.$emit("select-element",t)},selectFlag(t){(!this.commandForm.result_flags||!Array.isArray(this.commandForm.result_flags))&&(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(t.key);e===-1?this.commandForm.result_flags.push(t.key):this.commandForm.result_flags.splice(e,1)}}},Mf=Object.assign(Af,{__name:"BotDialogCommandForm",setup(t){return(e,s)=>{const o=en("lazy");return r(),d("form",{onSubmit:s[13]||(s[13]=Pe((...a)=>e.submit&&e.submit(...a),["prevent"]))},[e.commandForm.next_bot_dialog_command_id?(r(),d("div",mv,[hv,(r(!0),d(x,null,ne(t.item.chain,(a,l)=>(r(),d("div",null,[n("span",{class:B(["badge cursor-pointer",{"bg-success":e.commandForm.id==a,"bg-primary":e.commandForm.id!=a}]),onClick:i=>e.selectElementById(a)},f(a),11,pv),l<t.item.chain.length-1?(r(),d("i",_v)):c("",!0)]))),256))])):c("",!0),n("div",vv,[b(n("input",{type:"text",class:"form-control",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":s[0]||(s[0]=a=>e.commandForm.pre_text=a),required:""},null,8,fv),[[Q,e.commandForm.pre_text]]),n("label",{for:"commandForm-pre-text-"+e.commandForm.id},"Текст диалога",8,bv)]),n("div",gv,[b(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=a=>e.commandForm.is_empty=a),id:"need-empty-dialog",checked:""},null,512),[[Se,e.commandForm.is_empty]]),yv]),e.commandForm.is_empty?c("",!0):(r(),d("div",kv,[b(n("input",{type:"text",class:"form-control",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":s[2]||(s[2]=a=>e.commandForm.post_text=a),required:""},null,8,$v),[[Q,e.commandForm.post_text]]),n("label",{for:"commandForm-post-text-"+e.commandForm.id},"Текст после успешного завершения диалога",8,wv)])),e.commandForm.is_empty?c("",!0):(r(),d("div",Cv,[b(n("input",{type:"text",class:"form-control",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":s[3]||(s[3]=a=>e.commandForm.error_text=a),required:""},null,8,Fv),[[Q,e.commandForm.error_text]]),n("label",{for:"commandForm-error-text-"+e.commandForm.id},"Текст на случай ошибки корректности данных",8,Tv)])),e.commandForm.is_empty?c("",!0):(r(),d("div",Dv,[n("div",Pv,[n("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для валидации данных ",8,Sv),le(cv,{param:"input_pattern",onCallback:e.addTextTo},null,8,["onCallback"])]),b(n("input",{type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":s[4]||(s[4]=a=>e.commandForm.input_pattern=a),maxlength:"255",id:"commandForm-input-pattern-"+e.commandForm.id,"aria-describedby":"commandForm-input-pattern"},null,8,Ov),[[Q,e.commandForm.input_pattern]])])),n("div",Av,[n("div",Mv,[n("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,jv),t.bot?(r(),de(qn,{key:0,token:t.bot.bot_token,param:"result_channel",onCallback:e.addTextTo},null,8,["token","onCallback"])):c("",!0)]),b(n("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":s[5]||(s[5]=a=>e.commandForm.result_channel=a),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,Rv),[[Q,e.commandForm.result_channel]])]),n("div",Uv,[n("div",Vv,[b(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=a=>e.need_images=a),id:"need-dialog-image",checked:""},null,512),[[Se,e.need_images]]),Yv]),n("div",Iv,[b(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=a=>e.need_inline_keyboard=a),id:"need-dialog-menu-inline",checked:""},null,512),[[Se,e.need_inline_keyboard]]),Bv]),n("div",xv,[b(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[8]||(s[8]=a=>e.need_reply_keyboard=a),id:"need-dialog-menu-reply",checked:""},null,512),[[Se,e.need_reply_keyboard]]),Nv])]),e.need_images?(r(),d("div",Ev,[n("div",qv,[zv,n("div",Lv,[n("label",Wv,[Hv,n("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:s[9]||(s[9]=(...a)=>e.onChangePhotos&&e.onChangePhotos(...a)),style:{display:"none"}},null,32)]),e.photos.length>0?(r(!0),d(x,{key:0},ne(e.photos,(a,l)=>(r(),d("div",Qv,[b(n("img",null,null,512),[[o,e.getPhoto(a).imageUrl]]),n("div",Xv,[n("a",{onClick:i=>e.removePhoto("photos",l)},"Удалить",8,Kv)])]))),256)):c("",!0),e.commandForm.images&&t.bot?(r(!0),d(x,{key:1},ne(e.commandForm.images,(a,l)=>(r(),d("div",Zv,[b(n("img",null,null,512),[[o,"/images-by-bot-id/"+t.bot.id+"/"+a]]),n("div",Gv,[n("a",{onClick:i=>e.removePhoto("images",l)},"Удалить",8,Jv)])]))),256)):c("",!0)])])])):c("",!0),e.need_inline_keyboard?(r(),d("div",ef,[tf,n("div",nf,[le(zn,{onSave:e.saveInlineKeyboard,"edited-keyboard":e.commandForm.inline_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),e.need_reply_keyboard?(r(),d("div",sf,[of,n("div",af,[le(zn,{onSave:e.saveReplyKeyboard,"edited-keyboard":e.commandForm.reply_keyboard},null,8,["onSave","edited-keyboard"])])])):c("",!0),n("div",lf,[rf,b(n("select",{class:"form-control","onUpdate:modelValue":s[10]||(s[10]=a=>e.commandForm.store_to=a)},[df,(r(!0),d(x,null,ne(e.store_variants,a=>(r(),d("option",{value:a.key},f(a.title||"Не указано"),9,uf))),256))],512),[[zt,e.commandForm.store_to]])]),n("div",cf,[b(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=a=>e.need_set_flags=a),id:"need-set-flags",checked:""},null,512),[[Se,e.need_set_flags]]),mf]),e.need_set_flags?(r(),d("div",hf,[pf,(r(!0),d(x,null,ne(e.flags_variants,a=>(r(),d("span",{class:B(["badge text-info mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(a.key)!=-1}]),onClick:l=>e.selectFlag(a)},f(a.title),11,_f))),256))])):c("",!0),e.commandForm.id?(r(),d("div",vf,[e.filteredCommands.length>0?(r(),d("div",ff,[bf,(r(!0),d(x,null,ne(e.filteredCommands,(a,l)=>(r(),d("div",gf,[n("button",yf,[n("span",{onClick:i=>e.doCommandLink(a.id)},[e.commandForm.next_bot_dialog_command_id==a.id?(r(),d("i",$f)):c("",!0),F(" #"+f(a.id)+" "+f(a.pre_text||"Без текста"),1)],8,kf),e.commandForm.next_bot_dialog_command_id==a.id?(r(),d("i",{key:0,class:"fa-solid fa-unlink text-danger",onClick:s[12]||(s[12]=i=>e.doCommandLink(null))})):c("",!0)])]))),256)),e.dialog_commands_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):(r(),d("div",wf,Ff))])):c("",!0),Tf,n("div",Df,[n("button",Pf,[e.commandForm.id?(r(),d("span",Sf,"Обновить диалог")):(r(),d("span",Of,"Добавить диалог"))])])],32)}}});const jf={class:"row"},Rf={class:"col-md-2 col-12"},Uf=n("i",{class:"fa-regular fa-comment-dots",style:{"margin-right":"10px"}},null,-1),Vf={class:"col-md-10 col-12"},Yf={class:"input-group mb-3"},If={key:0,class:"row"},Bf={class:"col-md-12"},xf={class:"table"},Nf=n("thead",null,[n("tr",null,[n("th",{class:"text-center",scope:"col"},"#"),n("th",{class:"text-center",scope:"col"},"Текст диалога"),n("th",{class:"text-center",scope:"col"},"Цепочки"),n("th",{class:"text-center",scope:"col"},"Текст успеха"),n("th",{class:"text-center",scope:"col"},"Текст ошибки"),n("th",{class:"text-center",scope:"col"},"Канал результата"),n("th",{class:"text-center",scope:"col"},"Флаги"),n("th",{class:"text-center",scope:"col"},"Сохранить в"),n("th",{class:"text-center",scope:"col"},"Есть изображения"),n("th",{class:"text-center",scope:"col"},"Есть паттерны"),n("th",{class:"text-center",scope:"col"},"Пустой"),n("th",{class:"text-center",scope:"col"},"Есть кнопки"),n("th",{class:"text-center",scope:"col"},"Есть меню"),n("th",{class:"text-center",scope:"col"},"Команды")])],-1),Ef={scope:"row"},qf={class:"text-center"},zf=["onClick"],Lf={class:"text-center"},Wf={key:0,class:"badge bg-primary"},Hf={key:1},Qf=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Xf=[Qf],Kf={class:"text-center"},Zf={key:0},Gf={key:1},Jf=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),eb=[Jf],tb={class:"text-center"},nb={key:0},sb={key:1},ob=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),ab=[ob],lb={class:"text-center"},ib={key:0},rb={key:1},db=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),ub=[db],cb={class:"text-center"},mb={key:0},hb={class:"badge bg-primary"},pb={key:1},_b=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),vb=[_b],fb={class:"text-center"},bb={key:0},gb={key:1},yb=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),kb=[yb],$b={class:"text-center"},wb={key:0,class:"fa-solid fa-check text-success"},Cb={key:1,class:"fa-solid fa-xmark text-danger"},Fb={class:"text-center"},Tb={key:0},Db={key:1},Pb=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),Sb=[Pb],Ob={class:"text-center"},Ab={key:0,class:"fa-solid fa-check text-success"},Mb={key:1,class:"fa-solid fa-xmark text-danger"},jb={class:"text-center"},Rb={key:0,class:"fa-solid fa-check text-success"},Ub={key:1,class:"fa-solid fa-xmark text-danger"},Vb={class:"text-center"},Yb={key:0,class:"fa-solid fa-check text-success"},Ib={key:1,class:"fa-solid fa-xmark text-danger"},Bb={class:"text-center"},xb={class:"dropdown"},Nb=["disabled"],Eb=n("i",{class:"fa-solid fa-ellipsis"},null,-1),qb=[Eb],zb={class:"dropdown-menu"},Lb=["onClick"],Wb=n("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),Hb=n("hr",null,null,-1),Qb=["onClick"],Xb=n("i",{class:"fa-solid fa-clone mr-1"},null,-1),Kb=["onClick"],Zb=n("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),Gb={key:1,class:"row"},Jb=n("div",{class:"col-12"},[n("div",{class:"alert alert-danger",role:"alert"}," Не найдено ни одного диалога! ")],-1),eg=[Jb],tg={class:"modal fade",id:"dialog-command-modal-editor",tabindex:"-1"},ng={class:"modal-dialog modal-fullscreen"},sg={class:"modal-content"},og=n("div",{class:"modal-header"},[n("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Создание диалогового сообщения "),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ag={class:"modal-body"},lg=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ig={data(){return{bot:null,selected:null,loading:!0,dialog_commands:[],search:null,dialog_commands_paginate_object:null}},computed:{...Ee(["getDialogCommands","getCurrentBot","getDialogCommandsPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadDialogs()})},methods:{openEditor(t){this.loading=!0,this.$nextTick(()=>{this.selected=t,this.loading=!1})},removeCommand(t){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно удалена!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},duplicate(t){this.loading=!0,this.$store.dispatch("duplicateDialogCommand",{dataObject:{dialogCommandId:t}}).then(e=>{this.loading=!1,this.$notify({title:"Конструктор ботов",text:"Диалоговая команда успешно продублирована!",type:"success"}),this.loadDialogs(),this.$emit("callback")}).catch(e=>{this.loading=!1})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},selectDialog(t){this.$emit("select-dialog",t),this.$notify("Вы выбрали диалог из списка!")},nextDialogs(t){this.loadDialogs(t)},selectElement(t){this.loading=!0,this.$nextTick(()=>{this.selected=this.dialog_commands.find(e=>e.id===t)||null,this.loading=!1})},loadDialogs(t=0){this.$store.dispatch("loadDialogCommands",{dataObject:{botId:this.bot.id||null,search:this.search},page:t}).then(e=>{const s=this.selected;this.dialog_commands=this.getDialogCommands,this.dialog_commands_paginate_object=this.getDialogCommandsPaginateObject,this.loading=!0,this.$nextTick(()=>{s&&(this.selected=this.dialog_commands.find(o=>o.id===s.id)||null),this.loading=!1})}).catch(()=>{this.loading=!1})}}},rg=Object.assign(ig,{__name:"BotDialogGroupList",setup(t){return(e,s)=>(r(),d(x,null,[n("div",jf,[n("div",Rf,[n("button",{type:"button",onClick:s[0]||(s[0]=o=>e.openEditor(null)),"data-bs-toggle":"modal","data-bs-target":"#dialog-command-modal-editor",class:"btn btn-outline-success mb-2 w-100"},[Uf,F("Новый диалог ")])]),n("div",Vf,[n("div",Yf,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск диалога","aria-label":"Поиск диалога","onUpdate:modelValue":s[1]||(s[1]=o=>e.search=o),"aria-describedby":"button-addon2"},null,512),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[2]||(s[2]=o=>e.loadDialogs(0)),type:"button",id:"button-addon2"},"Найти ")])])]),e.dialog_commands.length>0?(r(),d("div",If,[n("div",Bf,[n("table",xf,[Nf,n("tbody",null,[(r(!0),d(x,null,ne(e.dialog_commands,(o,a)=>(r(),d("tr",null,[n("th",Ef,f(o.id),1),n("td",qf,[n("a",{"data-bs-toggle":"modal",onClick:l=>e.openEditor(o),"data-bs-target":"#dialog-command-modal-editor",href:"javascript:void(0)"},f(o.pre_text||"-"),9,zf)]),n("td",Lf,[o.next_bot_dialog_command_id?(r(),d("span",Wf,"#"+f(o.next_bot_dialog_command_id||"-")+" ("+f(o.chain.length||0)+")",1)):(r(),d("span",Hf,Xf))]),n("td",Kf,[o.post_text?(r(),d("p",Zf,f(o.post_text),1)):(r(),d("p",Gf,eb))]),n("td",tb,[o.error_text?(r(),d("p",nb,f(o.error_text),1)):(r(),d("p",sb,ab))]),n("td",lb,[o.result_channel?(r(),d("p",ib,f(o.result_channel),1)):(r(),d("p",rb,ub))]),n("td",cb,[o.result_flags.length>0?(r(),d("p",mb,[(r(!0),d(x,null,ne(o.result_flags,l=>(r(),d("span",hb,f(l||"-"),1))),256))])):(r(),d("p",pb,vb))]),n("td",fb,[o.store_to?(r(),d("p",bb,f(o.store_to),1)):(r(),d("p",gb,kb))]),n("td",$b,[o.images.length>0?(r(),d("i",wb)):(r(),d("i",Cb))]),n("td",Fb,[o.input_pattern?(r(),d("p",Tb,f(o.input_pattern),1)):(r(),d("p",Db,Sb))]),n("td",Ob,[o.is_empty?(r(),d("i",Ab)):(r(),d("i",Mb))]),n("td",jb,[o.inline_keyboard_id!=null?(r(),d("i",Rb)):(r(),d("i",Ub))]),n("td",Vb,[o.reply_keyboard_id!=null?(r(),d("i",Yb)):(r(),d("i",Ib))]),n("td",Bb,[n("div",xb,[n("button",{disabled:e.loading,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},qb,8,Nb),n("ul",zb,[n("li",null,[n("a",{onClick:l=>e.selectDialog(o),title:"Выбрать диалог",class:"dropdown-item cursor-pointer"},[Wb,F(" Выбрать диалог ")],8,Lb)]),Hb,n("li",null,[n("a",{title:"Дублирование команды",onClick:l=>e.duplicate(o.id),class:"dropdown-item cursor-pointer"},[Xb,F(" Дублирование диалога ")],8,Qb)]),n("li",null,[n("a",{onClick:l=>e.removeCommand(o.id),title:"Удаление команды",class:"dropdown-item cursor-pointer"},[Zb,F(" Удаление диалога ")],8,Kb)])])])])]))),256))])]),e.dialog_commands_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialog_commands_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",Gb,eg)),n("div",tg,[n("div",ng,[n("div",sg,[og,n("div",ag,[e.bot&&!e.loading?(r(),de(Mf,{key:0,item:e.selected,onCallback:e.loadDialogs,onSelectElement:e.selectElement,bot:e.bot},null,8,["item","onCallback","onSelectElement","bot"])):c("",!0)]),lg])])])],64))}}),dg=n("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),ug=n("h6",null,"Блок условий",-1),cg={key:0,class:"py-2"},mg={class:"form-label",id:"bot-domain"},hg=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pg=n("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),_g={class:"dropdown mb-2"},vg=n("button",{class:"btn btn-outline-info dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить условие ",-1),fg={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},bg=["onClick"],gg={key:1},yg={key:2,class:"list-group"},kg={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},$g={class:"form-check"},wg={class:"form-check-label",for:"bot-user-is-vip"},Cg={key:0},Fg={key:1},Tg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Dg=[Tg],Pg={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},Sg={class:"form-check"},Og={class:"form-check-label",for:"bot-user-is-admin"},Ag={key:0},Mg={key:1},jg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Rg=[jg],Ug={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},Vg={class:"form-check"},Yg={class:"form-check-label",for:"bot-user-is-deliveryman"},Ig={key:0},Bg={key:1},xg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Ng=[xg],Eg={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},qg={class:"form-check"},zg={class:"form-check-label",for:"bot-user-is-work"},Lg={key:0},Wg={key:1},Hg=n("i",{class:"fa-solid fa-trash-can"},null,-1),Qg=[Hg],Xg={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},Kg={class:"form-check"},Zg={class:"form-check-label",for:"bot-user-in-location"},Gg={key:0},Jg={key:1},e1=n("i",{class:"fa-solid fa-trash-can"},null,-1),t1=[e1],n1={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},s1=n("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),o1=n("i",{class:"fa-solid fa-trash-can"},null,-1),a1=[o1],l1={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},i1=n("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),r1=n("i",{class:"fa-solid fa-trash-can"},null,-1),d1=[r1],u1={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},c1={class:"form-check"},m1={class:"form-check-label",for:"bot-user-sex"},h1={key:0},p1={key:1},_1=n("i",{class:"fa-solid fa-trash-can"},null,-1),v1=[_1],f1={key:8,class:"list-group-item"},b1={class:"mb-3"},g1={class:"d-flex justify-content-between align-items-center"},y1={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},k1=["onClick"],$1=n("i",{class:"fa-solid fa-trash-can"},null,-1),w1=[$1],C1=["onUpdate:modelValue"],F1={key:3,class:"mt-5"},T1={key:4,class:"d-flex justify-content-between"},D1={key:6,class:"py-2"},P1={class:"form-label",id:"bot-domain"},S1=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),O1=n("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),A1={props:["bot","rulesForm"],data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},computed:{rulesForCustomFields(){let t=this.rules.filter(e=>e.key!=null);return console.log("filtered rules",t),t}},mounted(){},methods:{hasRuleKey(t){return this.rulesForm.rules_if==null?!1:(console.log("key=>",t||"-"),Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===t)!=null)},modifyChannel(t){this.rulesForm.rules_if.channels[t.param]=t.text},removeChannelFromRule(t){this.rulesForm.rules_if.channels.splice(t,1)},removeRule(t){delete this.rulesForm.rules_if.bot_user[t]},addRules(t){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),t.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...t.rule}),t.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(t.rule.channel)},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{(t.data||[]).forEach(s=>{s.is_active&&(this.rules.push({id:this.rules.length+1,title:s.label,key:s.key,type:s.type,rules_block:"bot_user",rule:{}}),s.type===0&&(this.rules[this.rules.length-1].rule[s.key]=""),s.type===1&&(this.rules[this.rules.length-1].rule[s.key]=0),s.type===2&&(this.rules[this.rules.length-1].rule[s.key]=!0))}),console.log("new rules=>",this.rules)})},attachPageToRule(t){t.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=t.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})}}},M1=Object.assign(A1,{__name:"PageRules",setup(t){return(e,s)=>{const o=Ut("Popper");return r(),d(x,null,[dg,ug,t.rulesForm.rules_if?(r(),d("div",cg,[n("label",mg,[le(o,null,{content:q(()=>[pg]),default:q(()=>[hg]),_:1}),F(" Сообщение при успешном прохождении условий (не обязательно) ")]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":s[0]||(s[0]=a=>t.rulesForm.rules_if_message=a),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[Q,t.rulesForm.rules_if_message]])])):c("",!0),n("div",_g,[vg,n("ul",fg,[(r(!0),d(x,null,ne(e.rules,a=>(r(),d("li",null,[n("a",{onClick:l=>e.addRules(a),class:"dropdown-item",href:"javascript:void(0)"},f(a.title||"Не указан"),9,bg)]))),256))])]),t.rulesForm.rules_if?(r(),d("h6",gg,"Выбранные условия")):c("",!0),t.rulesForm.rules_if?(r(),d("ul",yg,[e.hasRuleKey("is_vip")?(r(),d("li",kg,[n("div",$g,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[1]||(s[1]=a=>t.rulesForm.rules_if.bot_user.is_vip=a),type:"checkbox",id:"bot-user-is-vip"},null,512),[[Se,t.rulesForm.rules_if.bot_user.is_vip]]),n("label",wg,[t.rulesForm.rules_if.bot_user.is_vip?(r(),d("span",Cg,"Является VIP-пользователем")):(r(),d("span",Fg,"Не является VIP-пользователем"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[2]||(s[2]=a=>e.removeRule("is_vip"))},Dg)])):c("",!0),e.hasRuleKey("is_admin")?(r(),d("li",Pg,[n("div",Sg,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[3]||(s[3]=a=>t.rulesForm.rules_if.bot_user.is_admin=a),type:"checkbox",id:"bot-user-is-admin"},null,512),[[Se,t.rulesForm.rules_if.bot_user.is_admin]]),n("label",Og,[t.rulesForm.rules_if.bot_user.is_admin?(r(),d("span",Ag,"Является администратором")):(r(),d("span",Mg,"Не является администратором"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[4]||(s[4]=a=>e.removeRule("is_admin"))},Rg)])):c("",!0),e.hasRuleKey("is_deliveryman")?(r(),d("li",Ug,[n("div",Vg,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[5]||(s[5]=a=>t.rulesForm.rules_if.bot_user.is_deliveryman=a),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[Se,t.rulesForm.rules_if.bot_user.is_deliveryman]]),n("label",Yg,[t.rulesForm.rules_if.bot_user.is_deliveryman?(r(),d("span",Ig,"Является доставщиком")):(r(),d("span",Bg,"Не является доставщиком"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[6]||(s[6]=a=>e.removeRule("is_deliveryman"))},Ng)])):c("",!0),e.hasRuleKey("is_work")?(r(),d("li",Eg,[n("div",qg,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[7]||(s[7]=a=>t.rulesForm.rules_if.bot_user.is_work=a),type:"checkbox",id:"bot-user-is-work"},null,512),[[Se,t.rulesForm.rules_if.bot_user.is_work]]),n("label",zg,[t.rulesForm.rules_if.bot_user.is_work?(r(),d("span",Lg,"За работой")):(r(),d("span",Wg,"Не работает"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[8]||(s[8]=a=>e.removeRule("is_work"))},Qg)])):c("",!0),e.hasRuleKey("user_in_location")?(r(),d("li",Xg,[n("div",Kg,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[9]||(s[9]=a=>t.rulesForm.rules_if.bot_user.user_in_location=a),type:"checkbox",id:"bot-user-in-location"},null,512),[[Se,t.rulesForm.rules_if.bot_user.user_in_location]]),n("label",Zg,[t.rulesForm.rules_if.bot_user.user_in_location?(r(),d("span",Gg,"Находится в заведении")):(r(),d("span",Jg,"Не находится в заведении"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[10]||(s[10]=a=>e.removeRule("user_in_location"))},t1)])):c("",!0),e.hasRuleKey("age")?(r(),d("li",n1,[n("div",null,[s1,b(n("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":s[11]||(s[11]=a=>t.rulesForm.rules_if.bot_user.age=a),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[Q,t.rulesForm.rules_if.bot_user.age]])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[12]||(s[12]=a=>e.removeRule("age"))},a1)])):c("",!0),e.hasRuleKey("city")?(r(),d("li",l1,[n("div",null,[i1,b(n("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":s[13]||(s[13]=a=>t.rulesForm.rules_if.bot_user.city=a),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[Q,t.rulesForm.rules_if.bot_user.city]])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[14]||(s[14]=a=>e.removeRule("city"))},d1)])):c("",!0),e.hasRuleKey("sex")?(r(),d("li",u1,[n("div",c1,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[15]||(s[15]=a=>t.rulesForm.rules_if.bot_user.sex=a),type:"checkbox",id:"bot-user-sex"},null,512),[[Se,t.rulesForm.rules_if.bot_user.sex]]),n("label",m1,[t.rulesForm.rules_if.bot_user.sex?(r(),d("span",h1,"Только для мужчин")):(r(),d("span",p1,"Только для женщин"))])]),n("button",{type:"button",class:"btn btn-outline-info",onClick:s[16]||(s[16]=a=>e.removeRule("sex"))},v1)])):c("",!0),t.rulesForm.rules_if.channels.length>0?(r(),d("li",f1,[F("Проверка нахождения в канале \\ группе: "),(r(!0),d(x,null,ne(t.rulesForm.rules_if.channels,(a,l)=>(r(),d("div",b1,[n("div",g1,[n("label",y1,[le(qn,{token:t.bot.bot_token,param:`${l}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),F(" Канал для проверки ")]),n("button",{type:"button",class:"btn btn-link text-danger",onClick:i=>e.removeChannelFromRule(l)},w1,8,k1)]),b(n("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":i=>t.rulesForm.rules_if.channels[l]=i,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,C1),[[Q,t.rulesForm.rules_if.channels[l]]])]))),256))])):c("",!0)])):c("",!0),t.rulesForm.rules_if?(r(),d("h6",F1,"Иначе")):c("",!0),t.rulesForm.rules_else_page_id?(r(),d("p",T1,[F("Вы выбрали страницу #"+f(t.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),n("a",{href:"javascript:void(0)",onClick:s[17]||(s[17]=a=>t.rulesForm.rules_else_page_id=null)},"Очистить")])):c("",!0),t.rulesForm.rules_if?(r(),de($s,{key:5,current:t.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):c("",!0),t.rulesForm.rules_if?(r(),d("div",D1,[n("label",P1,[le(o,null,{content:q(()=>[O1]),default:q(()=>[S1]),_:1}),F(" Сообщение в случае невыполнения условий (не обязательно) ")]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":s[18]||(s[18]=a=>t.rulesForm.rules_else_message=a),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[Q,t.rulesForm.rules_else_message]])])):c("",!0)],64)}}});const j1={key:0,class:"row"},R1={class:"col-12 mb-2"},U1=n("h6",null,"На странице выбраны следующие разделы",-1),V1={class:"mini-pics justify-content-start d-inline-flex text-primary"},Y1=n("i",{class:"fa-regular fa-images"},null,-1),I1=[Y1],B1=n("i",{class:"fa-regular fa-note-sticky"},null,-1),x1=[B1],N1=n("i",{class:"fa-solid fa-photo-film"},null,-1),E1=[N1],q1=n("i",{class:"fa-regular fa-file-audio"},null,-1),z1=[q1],L1=n("i",{class:"fa-regular fa-file-word"},null,-1),W1=[L1],H1=n("i",{class:"fa-solid fa-link"},null,-1),Q1=[H1],X1=n("i",{class:"fa-solid fa-scroll"},null,-1),K1=[X1],Z1=n("i",{class:"fa-regular fa-comment-dots"},null,-1),G1=[Z1],J1=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),ey=[J1],ty=n("i",{class:"fa-regular fa-keyboard"},null,-1),ny=[ty],sy=n("i",{class:"fa-solid fa-ellipsis"},null,-1),oy=[sy],ay={class:"row"},ly={class:"col-8 mb-2"},iy={class:"form-label",id:"bot-domain"},ry=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dy=n("div",null,[F(" Команда должна начинаться с символа . и *"),n("br"),F(" Например: .*Меню"),n("br")],-1),uy=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),cy={class:"col-4 mb-2 d-flex justify-content-end align-items-end"},my={class:"btn-group",style:{background:"white"},role:"group","aria-label":"Basic example"},hy={key:0,type:"submit",title:"Сохранить страницу",class:"btn btn-primary min-menu-btn"},py=n("i",{class:"fa-regular fa-floppy-disk"},null,-1),_y=[py],vy=n("i",{class:"fa-solid fa-xmark text-danger"},null,-1),fy=[vy],by=n("button",{type:"button",title:"Список страниц","data-bs-toggle":"modal","data-bs-target":"#pages-modal",class:"btn btn-outline-primary text-primary min-menu-btn"},[n("i",{class:"fa-solid fa-list-ol"})],-1),gy={class:"col-12 mb-2"},yy={class:"form-check"},ky=n("label",{class:"form-check-label",for:"is-external"}," Внешнее управление страницей ",-1),$y={key:1,class:"row"},wy={class:"col-12 mb-2"},Cy={class:"form-label d-flex justify-content-between align-items-center mb-0",id:"bot-domain"},Fy=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ty=n("div",null,[F(" Текстовый редактор. Данный текст будет в таком"),n("br"),F(" же виде отображен в посте в телеграм. ")],-1),Dy=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Py={class:"form-floating"},Sy={for:"floatingTextarea2"},Oy={key:0},Ay={class:"col-12 mb-2"},My={class:"nav nav-tabs justify-content-center"},jy=n("i",{class:"fa-regular fa-keyboard"},null,-1),Ry=n("span",null,"Нижнее меню",-1),Uy=[jy,Ry],Vy=n("i",{class:"fa-solid fa-ellipsis"},null,-1),Yy=n("span",null,"Меню под текстом",-1),Iy=[Vy,Yy],By=n("i",{class:"fa-regular fa-images"},null,-1),xy=n("span",null,"Изображения",-1),Ny=[By,xy],Ey=n("i",{class:"fa-solid fa-photo-film"},null,-1),qy=n("span",null,"Видео",-1),zy=[Ey,qy],Ly=n("i",{class:"fa-regular fa-note-sticky"},null,-1),Wy=n("span",null,"Стикеры",-1),Hy=[Ly,Wy],Qy=n("i",{class:"fa-regular fa-file-audio"},null,-1),Xy=n("span",null,"Аудио",-1),Ky=[Qy,Xy],Zy=n("i",{class:"fa-regular fa-file-word"},null,-1),Gy=n("span",null,"Документы",-1),Jy=[Zy,Gy],e0=n("i",{class:"fa-solid fa-link"},null,-1),t0=n("span",null,"Другая страница",-1),n0=[e0,t0],s0=n("i",{class:"fa-solid fa-scroll"},null,-1),o0=n("span",null,"Скрипт",-1),a0=[s0,o0],l0=n("i",{class:"fa-regular fa-comment-dots"},null,-1),i0=n("span",null,"Начало диалога",-1),r0=[l0,i0],d0=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),u0=n("span",null,"Правила",-1),c0=[d0,u0],m0={key:0,class:"col-12 mb-2"},h0={class:"form-check"},p0=n("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),_0={key:1,class:"col-12 mb-2"},v0={class:"card"},f0={class:"card-header d-flex justify-between align-items-center"},b0=n("h6",null,"Конструктор нижнего меню",-1),g0={key:0},y0={key:1},k0={class:"card-body"},$0={class:"row"},w0={class:"col-12 mb-2"},C0={class:"form-label",id:"bot-domain"},F0=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),T0=n("div",null," Заголовок для нижнего меню ",-1),D0={key:2,class:"col-12 mb-2"},P0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},S0={class:"d-flex justify-content-center mb-3"},O0={alt:"",width:"100",height:"100"},A0=n("h1",{class:"text-body-emphasis"},"Нижнее меню",-1),M0=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Создание и настройка нижнего меню страницы бота. Добавление и редактирование функций кнопок бота на странице. Данное меню отображается пользователю всегда. ",-1),j0={class:"d-inline-flex gap-2 mb-5"},R0=["disabled"],U0=n("a",{href:"https://telegra.ph/Nizhnee-menyu-bota-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),V0={key:0,class:"col-12 mb-2"},Y0={class:"form-check"},I0=n("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),B0={key:1,class:"col-12 mb-2"},x0={class:"card"},N0={class:"card-header d-flex justify-between align-items-center"},E0=n("h6",null,"Конструктор меню в сообщении",-1),q0={key:0},z0={key:1},L0={class:"card-body"},W0={key:2,class:"col-12 mb-2"},H0={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Q0={class:"d-flex justify-content-center mb-3"},X0={alt:"",width:"100",height:"100"},K0=n("h1",{class:"text-body-emphasis"},"Меню под текстом",-1),Z0=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," В отличии от нижнего меню, которое отображается всегда, меню под текстом показывается под контентом только в момент отображения этого контента. ",-1),G0={class:"d-inline-flex gap-2 mb-5"},J0=["disabled"],ek=n("a",{href:"https://telegra.ph/Menyu-k-tekstu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),tk={key:0,class:"col-12 mb-2"},nk={class:"form-check"},sk=n("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),ok={key:1,class:"col-12 mb-2"},ak={class:"card mb-3"},lk=n("div",{class:"card-header"},[n("h6",null,"Загрузите изображения с файловой системы")],-1),ik={class:"card-body d-flex justify-content-start"},rk={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},dk={class:"row"},uk={key:0,class:"col-12 d-flex flex-wrap"},ck={class:"mb-2 img-preview",style:{"margin-right":"10px"}},mk={class:"remove"},hk=["onClick"],pk={key:1},_k={key:2,class:"col-12 d-flex flex-wrap"},vk={class:"mb-2 img-preview",style:{"margin-right":"10px"}},fk={class:"remove"},bk=["onClick"],gk={key:2,class:"col-12 mb-2"},yk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},kk={class:"d-flex justify-content-center mb-3"},$k={alt:"",width:"100",height:"100"},wk=n("h1",{class:"text-body-emphasis"},"Изображения",-1),Ck=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[F(" Вы можете добавить к одной странице от "),n("b",null,"1"),F(" до "),n("b",null,"10"),F(" изображений. Изображения (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. Если изображение одно, то текст будет отображен под ним. ")],-1),Fk={class:"d-inline-flex gap-2 mb-5"},Tk=["disabled"],Dk=n("a",{href:"https://telegra.ph/Dobavlenie-izobrazhenij-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Pk={key:0,class:"col-12 mb-2"},Sk={class:"form-check"},Ok=n("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),Ak={key:1,class:"col-12 mb-2"},Mk={key:2,class:"col-12 mb-2"},jk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Rk={class:"d-flex justify-content-center mb-3"},Uk={alt:"",width:"100",height:"100"},Vk=n("h1",{class:"text-body-emphasis"},"Видео",-1),Yk=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[F(" Вы можете добавить к одной странице от "),n("b",null,"1"),F(" до "),n("b",null,"10"),F(" видео. Ролики (от 2х) будут собраны в группу и показаны под текстовым содержимым страницы. ")],-1),Ik={class:"d-inline-flex gap-2 mb-5"},Bk=["disabled"],xk=n("a",{href:"https://telegra.ph/Dobavlenie-video-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Nk={key:0,class:"col-12 mb-2"},Ek={class:"form-check"},qk=n("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),zk={key:1,class:"col-12 mb-2"},Lk={key:2,class:"col-12 mb-2"},Wk={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Hk={class:"d-flex justify-content-center mb-3"},Qk={alt:"",width:"100",height:"100"},Xk=n("h1",{class:"text-body-emphasis"},"Стикеры",-1),Kk=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете переслать любой стикер в бота (от лица администратора) и затем этот стикер использовать для взаимодействия с пользователем. ",-1),Zk={class:"d-inline-flex gap-2 mb-5"},Gk=["disabled"],Jk=n("a",{href:"https://telegra.ph/Dobavlenie-stikera-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),e$={key:0,class:"col-12 mb-2"},t$={class:"form-check"},n$=n("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),s$={key:1,class:"col-12 mb-2"},o$={key:2,class:"col-12 mb-2"},a$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},l$={class:"d-flex justify-content-center mb-3"},i$={alt:"",width:"100",height:"100"},r$=n("h1",{class:"text-body-emphasis"},"Аудио",-1),d$=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[F(" Вы можете добавить к одной странице от "),n("b",null,"1"),F(" до "),n("b",null,"10"),F(" аудио. Музыка (от 2х) будет собрана в группу и показана под текстовым содержимым страницы. Если вы хотите использовать "),n("b",{class:"text-danger"},"голосовое"),F(", то можно использовать максимум "),n("b",{class:"text-danger"},"одну запись"),F(". Или же, вы можете конвертировать её в mp3 и залить как музыкальный файл в бота. ")],-1),u$={class:"d-inline-flex gap-2 mb-5"},c$=["disabled"],m$=n("a",{href:"https://telegra.ph/Dobavlenie-audio-na-stranicu-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),h$={key:0,class:"col-12 mb-2"},p$={class:"form-check"},_$=n("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),v$={key:1,class:"col-12 mb-2"},f$={key:2,class:"col-12 mb-2"},b$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},g$={class:"d-flex justify-content-center mb-3"},y$={alt:"",width:"100",height:"100"},k$=n("h1",{class:"text-body-emphasis"},"Документы",-1),$$=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"},[F(" Вы можете добавить к одной странице от "),n("b",null,"1"),F(" до "),n("b",null,"10"),F(" документов. Документы (от 2х) будут собраны в группу и показана под текстовым содержимым страницы. В качестве файлов вы можете использовать текстовые документы, презентации, файлы-pdf, изображения в оригинальном размере. ")],-1),w$={class:"d-inline-flex gap-2 mb-5"},C$=["disabled"],F$=n("a",{href:"https://telegra.ph/Dobavlenie-dokumenta-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),T$={key:0,class:"col-12 mb-2"},D$={class:"form-check"},P$=n("label",{class:"form-check-label",for:"need-page-attach"}," Связать с другой страницей ",-1),S$={key:1,class:"col-12 mb-2"},O$={key:0},A$={key:2,class:"col-12 mb-2"},M$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},j$={class:"d-flex justify-content-center mb-3"},R$={alt:"",width:"100",height:"100"},U$=n("h1",{class:"text-body-emphasis"},"Связь со страницей",-1),V$=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете привязать вызов другой страницы непосредственно после вызова текущей. Это позволит выводить контент по цепочке для пользователя. ",-1),Y$={class:"d-inline-flex gap-2 mb-5"},I$=["disabled"],B$=n("a",{href:"https://telegra.ph/Svyazyvanie-so-stranicej-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),x$={key:0,class:"col-12 mb-2"},N$=n("div",{class:"alert alert-info",role:"alert"}," Если в вашем боте нет каких-то предустановленных скриптов вы можете найти их в глобальном магазине скриптов ",-1),E$={class:"form-check"},q$=n("label",{class:"form-check-label",for:"need-show-global-slug-list"}," Добавить скрипты из глобального магазина? ",-1),z$={key:1,class:"col-12 mb-2"},L$={class:"form-check"},W$=n("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),H$={key:2,class:"col-12 mb-2"},Q$={key:0,class:"alert alert-success d-flex justify-content-between align-items-center",role:"alert"},X$={key:3,class:"col-12 mb-2"},K$={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Z$={class:"d-flex justify-content-center mb-3"},G$={alt:"",width:"100",height:"100"},J$=n("h1",{class:"text-body-emphasis"},"Скрипты",-1),e2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Скрипты содержат основной функционал системы. Вы можете к каждой странице привязать один скрипт, который будет вызван после вывода основного содержимого страницы. ",-1),t2={class:"d-inline-flex gap-2 mb-5"},n2=["disabled"],s2=n("a",{href:"https://telegra.ph/Svyazyvanie-so-skriptom-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),o2={key:0,class:"col-12 mb-2"},a2={class:"form-check"},l2=n("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),i2={key:1,class:"col-12 mb-2"},r2={key:0},d2={key:2,class:"col-12 mb-2"},u2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},c2={class:"d-flex justify-content-center mb-3"},m2={alt:"",width:"100",height:"100"},h2=n("h1",{class:"text-body-emphasis"},"Диалоги",-1),p2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Диалоги страницы - это инструмент запроса данных от пользователя. Вы можете привязать начало диалога к странице, а сам диалог будет вызван по цепочке. ",-1),_2={class:"d-inline-flex gap-2 mb-5"},v2=["disabled"],f2=n("a",{href:"https://telegra.ph/Dobavlenie-dialoga-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),b2={key:0,class:"col-12 mb-2"},g2={class:"form-check"},y2=n("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),k2={key:1,class:"col-12 mb-2"},$2={key:2,class:"col-12 mb-2"},w2={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},C2={class:"d-flex justify-content-center mb-3"},F2={alt:"",width:"100",height:"100"},T2=n("h1",{class:"text-body-emphasis"},"Правила отображения страницы",-1),D2=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Вы можете создать правила, согласно которым будет отображена та или иная страница. Вы можете перенаправить пользователя с одной страницы на другую, в случае если ваше условие не выполнено. ",-1),P2={class:"d-inline-flex gap-2 mb-5"},S2=["disabled"],O2=n("a",{href:"https://telegra.ph/Pravila-na-stranice-01-03",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),A2={class:"modal fade",id:"save-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M2={class:"modal-dialog"},j2={class:"modal-content"},R2=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalLabel"},"Сохранение страницы"),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U2={class:"modal-body"},V2={key:0,class:"row"},Y2={class:"col-12 mb-2"},I2={class:"d-flex justify-between"},B2=["href"],x2={class:"col-12 mb-2"},N2=n("h6",null,"На странице выбраны следующие разделы",-1),E2={class:"mini-pics text-primary"},q2=n("i",{class:"fa-regular fa-images"},null,-1),z2=[q2],L2=n("i",{class:"fa-regular fa-note-sticky"},null,-1),W2=[L2],H2=n("i",{class:"fa-solid fa-photo-film"},null,-1),Q2=[H2],X2=n("i",{class:"fa-regular fa-file-audio"},null,-1),K2=[X2],Z2=n("i",{class:"fa-regular fa-file-word"},null,-1),G2=[Z2],J2=n("i",{class:"fa-solid fa-link"},null,-1),ew=[J2],tw=n("i",{class:"fa-solid fa-scroll"},null,-1),nw=[tw],sw=n("i",{class:"fa-regular fa-comment-dots"},null,-1),ow=[sw],aw=n("i",{class:"fa-solid fa-scale-balanced"},null,-1),lw=[aw],iw=n("i",{class:"fa-regular fa-keyboard"},null,-1),rw=[iw],dw=n("i",{class:"fa-solid fa-ellipsis"},null,-1),uw=[dw],cw={key:0,class:"col-12 mb-2"},mw={class:"form-check"},hw=n("label",{class:"form-check-label",for:"need-show-qr-and-link"}," Показать ссылку на страницу и QR-код ",-1),pw={key:1,class:"col-12 mb-2"},_w={class:"d-flex justify-content-center"},vw={style:{width:"200px",height:"200px"}},fw={class:"col-12 mb-2"},bw={class:"form-label",id:"bot-domain"},gw=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),yw=n("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять Вас. ",-1),kw=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),$w=n("div",{class:"col-12"},[n("button",{type:"submit",class:"btn btn-success w-100 p-3"},"Сохранить ")],-1),ww=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Не сохранять")],-1),Cw={class:"modal fade",id:"pages-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Fw={class:"modal-dialog"},Tw={class:"modal-content"},Dw={class:"modal-body"},Pw={data(){return{tab:0,saveModal:null,page:null,need_show_qr_and_link:!1,need_show_global_slug_list:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,load_slug_simple_list:!0,showMenu:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,need_rules:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,videos:[],images:[],audios:[],documents:[],sticker:null,reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_page_images:function(t,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_audios:function(t,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(t,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(t,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_video:function(t,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(t,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_rules:function(t,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_reply_menu:function(t,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(t,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(t,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(t,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(t){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{...Ee(["getCurrentBot"]),qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},hasParts(){return this.need_page_sticker||this.need_page_audios||this.need_page_documents||this.need_page_video||this.need_page_images||this.need_inline_menu||this.need_reply_menu||this.need_attach_page||this.need_attach_dialog||this.need_attach_slug||this.need_rules},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let t="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)t+="0";return t+=this.pageForm.id,"https://t.me/"+this.getCurrentBot.bot_domain+"?start="+btoa("004"+t)}},mounted(){this.page?this.preparePageForm():this.clearForm(),this.loadCurrentBot().then(()=>{this.saveModal=new bootstrap.Modal(document.getElementById("save-modal"),{})})},methods:{loadSlugs(){this.load_slug_simple_list=!1,this.need_show_global_slug_list=!1,this.$nextTick(()=>{this.load_slug_simple_list=!0})},preparePageForm(){let t=this.page;this.photos=[],this.pageForm={id:t.id,slug_id:t.slug?t.slug.id:null,content:t.content,command:t.slug?t.slug.command:null,slug:t.slug?t.slug.slug:null,comment:t.slug?t.slug.comment:null,images:t.images||[],sticker:t.sticker||null,reply_keyboard_title:t.reply_keyboard_title||null,reply_keyboard_id:t.reply_keyboard_id||null,inline_keyboard_id:t.inline_keyboard_id||null,reply_keyboard:t.replyKeyboard||null,inline_keyboard:t.inlineKeyboard||null,next_page_id:t.next_page_id||null,next_bot_dialog_command_id:t.next_bot_dialog_command_id||null,next_bot_menu_slug_id:t.next_bot_menu_slug_id||null,is_external:t.is_external||!1,rules_if:t.rules_if||null,rules_else_page_id:t.rules_else_page_id||null,audios:t.audios||[],documents:t.documents||[],videos:t.videos||[],rules_if_message:t.rules_if_message||null,rules_else_message:t.rules_else_message||null}},copyToClipBoard(t){navigator.clipboard.writeText(t).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},associateDialog(t){this.pageForm.next_bot_dialog_command_id=t.id},associateSlug(t){this.pageForm.next_bot_menu_slug_id=t.id},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},attachPage(t){t.id!=this.pageForm.id?this.pageForm.next_page_id=t.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},injectContent(t){this.pageForm.content?this.pageForm.content+=t.text:this.pageForm.content=t.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard:null,inline_keyboard:null,is_external:!1,videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,next_menu_slug:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_images=!1,this.need_page_video=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.need_page_sticker=!1,this.$nextTick(()=>{this.need_clean=!1})},openSaveModal(){(this.pageForm.comment||"").length===0&&(this.pageForm.comment=this.pageForm.command),this.saveModal.show()},submitPage(){let t=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const s=this.pageForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:t}).then(e=>{this.pageForm.id==null&&(this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()})),this.saveModal.hide(),this.$emit("callback",e.data),this.$notify({title:"Конструктор ботов",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"}),this.pageForm.id!=null&&this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id},page:localStorage.getItem(`cashman_pagelist_${this.bot.id}_page_index`)||0})}).catch(e=>{})},saveInlineKeyboard(t){this.pageForm.inline_keyboard=t},selectReplyKeyboard(t){this.pageForm.reply_keyboard=t,this.showReplyTemplateSelector=!1},selectInlineKeyboard(t){this.pageForm.inline_keyboard=t,this.showInlineTemplateSelector=!1},saveReplyKeyboard(t){this.pageForm.reply_keyboard=t},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removePhoto(t){this.photos.splice(t,1)},removeImage(t){this.pageForm.images.splice(t,1)},onChangePhotos(t){const e=t.target.files;for(let s=0;s<e.length;s++)this.photos.push(e[s])},onChange(t){this.pageForm.content=t},selectPhoto(t){this.pageForm.images||(this.pageForm.images=[]);let e=this.pageForm.images.indexOf(t.file_id);e!==-1?this.pageForm.images.splice(e,1):this.pageForm.images.push(t.file_id)},selectSticker(t){this.pageForm.sticker=t.file_id},selectVideo(t){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(t.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(t.file_id)},selectAudio(t){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(t.file_id);if(t.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[t.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(t.file_id)},selectDocument(t){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(t.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(t.file_id)},pageListCallback(t){this.load=!0,this.page=t,this.preparePageForm(),this.$nextTick(()=>{this.load=!1})}}},HV=Object.assign(Pw,{__name:"Page",setup(t){return(e,s)=>{const o=Ut("Popper"),a=en("lazy");return r(),d(x,null,[e.bot?(r(),d("form",{key:0,id:"page-construct",onSubmit:s[45]||(s[45]=Pe((...l)=>e.openSaveModal&&e.openSaveModal(...l),["prevent"]))},[e.hasParts?(r(),d("div",j1,[n("div",R1,[U1,n("ul",V1,[n("li",{class:B(["mr-1",{active:e.need_page_images}]),title:"Изображения"},I1,2),n("li",{class:B(["mr-1",{active:e.need_page_sticker}]),title:"Стикеры"},x1,2),n("li",{class:B(["mr-1",{active:e.need_page_video}]),title:"Видео"},E1,2),n("li",{class:B(["mr-1",{active:e.need_page_audios}]),title:"Аудио"},z1,2),n("li",{class:B(["mr-1",{active:e.need_page_documents}]),title:"Документы"},W1,2),n("li",{class:B(["mr-1",{active:e.need_attach_page}]),title:"Страницы"},Q1,2),n("li",{class:B(["mr-1",{active:e.need_attach_slug}]),title:"Скрипты"},K1,2),n("li",{class:B(["mr-1",{active:e.need_attach_dialog}]),title:"Диалоги"},G1,2),n("li",{class:B(["mr-1",{active:e.need_rules}]),title:"Правила"},ey,2),n("li",{class:B(["mr-1",{active:e.need_reply_menu}]),title:"Нижнее меню"},ny,2),n("li",{title:"Текстовое меню",class:B({active:e.need_inline_menu})},oy,2)])])])):c("",!0),n("div",ay,[n("div",ly,[n("label",iy,[le(o,null,{content:q(()=>[dy]),default:q(()=>[ry]),_:1}),F(" Команда "),uy]),b(n("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":s[0]||(s[0]=l=>e.pageForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[Q,e.pageForm.command]])]),n("div",cy,[n("div",my,[e.pageForm.id||e.need_clean?(r(),d("button",hy,_y)):c("",!0),e.pageForm.id||e.need_clean?(r(),d("button",{key:1,type:"button",onClick:s[1]||(s[1]=(...l)=>e.clearForm&&e.clearForm(...l)),title:"Очистить \\ Новая страница",class:"btn btn-outline-primary min-menu-btn"},fy)):c("",!0),by])]),n("div",gy,[n("div",yy,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[2]||(s[2]=l=>e.pageForm.is_external=l),type:"checkbox",id:"is-external"},null,512),[[Se,e.pageForm.is_external]]),ky])])]),e.pageForm.is_external?c("",!0):(r(),d("div",$y,[n("div",wy,[n("label",Cy,[n("div",null,[le(o,null,{content:q(()=>[Ty]),default:q(()=>[Fy]),_:1}),F(" Текстовое содержимое страницы "),Dy]),le(Na,{param:"content",onCallback:e.injectContent},null,8,["onCallback"])]),n("div",Py,[b(n("textarea",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=l=>e.pageForm.content=l),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"300px"}},null,512),[[Q,e.pageForm.content]]),n("label",Sy,[F("Содержимое страницы "),e.pageForm.content?(r(),d("span",Oy,f(e.pageForm.content.length)+"/4096 ",1)):c("",!0)])])]),n("div",Ay,[n("ul",My,[n("li",{class:"nav-item",onClick:s[4]||(s[4]=l=>e.tab=0)},[n("a",{class:B([{active:e.tab===0},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Uy,2)]),n("li",{class:"nav-item",onClick:s[5]||(s[5]=l=>e.tab=1)},[n("a",{class:B([{active:e.tab===1},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Iy,2)]),n("li",{class:"nav-item",onClick:s[6]||(s[6]=l=>e.tab=2)},[n("a",{class:B([{active:e.tab===2},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Ny,2)]),n("li",{class:"nav-item",onClick:s[7]||(s[7]=l=>e.tab=3)},[n("a",{class:B([{active:e.tab===3},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},zy,2)]),n("li",{class:"nav-item",onClick:s[8]||(s[8]=l=>e.tab=4)},[n("a",{class:B([{active:e.tab===4},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Hy,2)]),n("li",{class:"nav-item",onClick:s[9]||(s[9]=l=>e.tab=5)},[n("a",{class:B([{active:e.tab===5},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Ky,2)]),n("li",{class:"nav-item",onClick:s[10]||(s[10]=l=>e.tab=6)},[n("a",{class:B([{active:e.tab===6},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},Jy,2)]),n("li",{class:"nav-item",onClick:s[11]||(s[11]=l=>e.tab=7)},[n("a",{class:B([{active:e.tab===7},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},n0,2)]),n("li",{class:"nav-item",onClick:s[12]||(s[12]=l=>e.tab=8)},[n("a",{class:B([{active:e.tab===8},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},a0,2)]),n("li",{class:"nav-item",onClick:s[13]||(s[13]=l=>e.tab=9)},[n("a",{class:B([{active:e.tab===9},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},r0,2)]),n("li",{class:"nav-item",onClick:s[14]||(s[14]=l=>e.tab=10)},[n("a",{class:B([{active:e.tab===10},"nav-link d-flex flex-column justify-content-center align-items-center font-12"]),href:"javascript:void(0)"},c0,2)])])]),b(n("div",null,[e.need_reply_menu?(r(),d("div",m0,[n("div",h0,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[15]||(s[15]=l=>e.need_reply_menu=l),type:"checkbox",id:"need-reply-menu"},null,512),[[Se,e.need_reply_menu]]),p0])])):c("",!0),e.need_reply_menu?(r(),d("div",_0,[n("div",v0,[n("div",f0,[b0,n("button",{class:B(["btn",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:s[16]||(s[16]=l=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(r(),d("span",y0," Скрыть шаблоны меню")):(r(),d("span",g0," Открыть шаблоны меню"))],2)]),n("div",k0,[n("div",$0,[n("div",w0,[n("label",C0,[le(o,null,{content:q(()=>[T0]),default:q(()=>[F0]),_:1}),F(" Заголовок ")]),b(n("input",{type:"text",class:"form-control",placeholder:"Заголовок меню","aria-label":"Заголовок меню","onUpdate:modelValue":s[17]||(s[17]=l=>e.pageForm.reply_keyboard_title=l),maxlength:"255","aria-describedby":"bot-domain"},null,512),[[Q,e.pageForm.reply_keyboard_title]])])]),e.showReplyTemplateSelector?(r(),de(no,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),de(zn,{key:1,type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",D0,[n("div",P0,[n("div",S0,[b(n("img",O0,null,512),[[a,"../images/icon.png"]])]),A0,M0,n("div",j0,[n("button",{disabled:e.need_reply_menu,onClick:s[18]||(s[18]=l=>e.need_reply_menu=!0),class:B([{"btn-primary":!e.need_reply_menu,"btn-outline-secondary":e.need_reply_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,R0),U0])])]))],512),[[Qe,e.tab===0]]),b(n("div",null,[e.need_inline_menu?(r(),d("div",V0,[n("div",Y0,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[19]||(s[19]=l=>e.need_inline_menu=l),type:"checkbox",id:"need-inline-menu"},null,512),[[Se,e.need_inline_menu]]),I0])])):c("",!0),e.need_inline_menu?(r(),d("div",B0,[n("div",x0,[n("div",N0,[E0,n("button",{class:B(["btn",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:s[20]||(s[20]=l=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(r(),d("span",z0," Скрыть шаблоны меню")):(r(),d("span",q0," Открыть шаблоны меню"))],2)]),n("div",L0,[e.showInlineTemplateSelector?(r(),de(no,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(r(),de(zn,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])])])):(r(),d("div",W0,[n("div",H0,[n("div",Q0,[b(n("img",X0,null,512),[[a,"../images/icon.png"]])]),K0,Z0,n("div",G0,[n("button",{disabled:e.need_inline_menu,onClick:s[21]||(s[21]=l=>e.need_inline_menu=!0),class:B([{"btn-primary":!e.need_inline_menu,"btn-outline-secondary":e.need_inline_menu},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,J0),ek])])]))],512),[[Qe,e.tab===1]]),b(n("div",null,[e.need_page_images?(r(),d("div",tk,[n("div",nk,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[22]||(s[22]=l=>e.need_page_images=l),type:"checkbox",id:"need-page-images"},null,512),[[Se,e.need_page_images]]),sk])])):c("",!0),e.need_page_images?(r(),d("div",ok,[n("div",ak,[lk,n("div",ik,[n("label",rk,[F(" + "),n("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:s[23]||(s[23]=(...l)=>e.onChangePhotos&&e.onChangePhotos(...l)),style:{display:"none"}},null,32)]),n("div",dk,[e.photos.length>0?(r(),d("div",uk,[(r(!0),d(x,null,ne(e.photos,(l,i)=>(r(),d("div",ck,[b(n("img",null,null,512),[[a,e.getPhoto(l).imageUrl]]),n("div",mk,[n("a",{onClick:u=>e.removePhoto(i)},"Удалить",8,hk)])]))),256))])):c("",!0),e.pageForm.images.length>0?(r(),d("h6",pk,"Ранее загруженные фотографии")):c("",!0),e.pageForm.images.length>0?(r(),d("div",_k,[(r(!0),d(x,null,ne(e.pageForm.images,(l,i)=>(r(),d("div",vk,[b(n("img",null,null,512),[[a,"/images-by-bot-id/"+e.bot.id+"/"+l]]),n("div",fk,[n("a",{onClick:u=>e.removeImage(i)},"Удалить",8,bk)])]))),256))])):c("",!0)])])])])):(r(),d("div",gk,[n("div",yk,[n("div",kk,[b(n("img",$k,null,512),[[a,"../images/icon.png"]])]),wk,Ck,n("div",Fk,[n("button",{disabled:e.need_page_images,onClick:s[24]||(s[24]=l=>e.need_page_images=!0),class:B([{"btn-primary":!e.need_page_images,"btn-outline-secondary":e.need_page_images},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Tk),Dk])])]))],512),[[Qe,e.tab===2]]),b(n("div",null,[e.need_page_video?(r(),d("div",Pk,[n("div",Sk,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[25]||(s[25]=l=>e.need_page_video=l),type:"checkbox",id:"need-page-video"},null,512),[[Se,e.need_page_video]]),Ok])])):c("",!0),e.need_page_video?(r(),d("div",Ak,[le(dn,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):(r(),d("div",Mk,[n("div",jk,[n("div",Rk,[b(n("img",Uk,null,512),[[a,"../images/icon.png"]])]),Vk,Yk,n("div",Ik,[n("button",{disabled:e.need_page_video,onClick:s[26]||(s[26]=l=>e.need_page_video=!0),class:B([{"btn-primary":!e.need_page_video,"btn-outline-secondary":e.need_page_video},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Bk),xk])])]))],512),[[Qe,e.tab===3]]),b(n("div",null,[e.need_page_sticker?(r(),d("div",Nk,[n("div",Ek,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[27]||(s[27]=l=>e.need_page_sticker=l),type:"checkbox",id:"need-page-sticker"},null,512),[[Se,e.need_page_sticker]]),qk])])):c("",!0),e.need_page_sticker?(r(),d("div",zk,[le(dn,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):(r(),d("div",Lk,[n("div",Wk,[n("div",Hk,[b(n("img",Qk,null,512),[[a,"../images/icon.png"]])]),Xk,Kk,n("div",Zk,[n("button",{disabled:e.need_page_sticker,onClick:s[28]||(s[28]=l=>e.need_page_sticker=!0),class:B([{"btn-primary":!e.need_page_sticker,"btn-outline-secondary":e.need_page_sticker},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,Gk),Jk])])]))],512),[[Qe,e.tab===4]]),b(n("div",null,[e.need_page_audios?(r(),d("div",e$,[n("div",t$,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[29]||(s[29]=l=>e.need_page_audios=l),type:"checkbox",id:"need-page-audio"},null,512),[[Se,e.need_page_audios]]),n$])])):c("",!0),e.need_page_audios?(r(),d("div",s$,[le(dn,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):(r(),d("div",o$,[n("div",a$,[n("div",l$,[b(n("img",i$,null,512),[[a,"../images/icon.png"]])]),r$,d$,n("div",u$,[n("button",{disabled:e.need_page_audios,onClick:s[30]||(s[30]=l=>e.need_page_audios=!0),class:B([{"btn-primary":!e.need_page_audios,"btn-outline-secondary":e.need_page_audios},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,c$),m$])])]))],512),[[Qe,e.tab===5]]),b(n("div",null,[e.need_page_documents?(r(),d("div",h$,[n("div",p$,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[31]||(s[31]=l=>e.need_page_documents=l),type:"checkbox",id:"need-page-document"},null,512),[[Se,e.need_page_documents]]),_$])])):c("",!0),e.need_page_documents?(r(),d("div",v$,[le(dn,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):(r(),d("div",f$,[n("div",b$,[n("div",g$,[b(n("img",y$,null,512),[[a,"../images/icon.png"]])]),k$,$$,n("div",w$,[n("button",{disabled:e.need_page_documents,onClick:s[32]||(s[32]=l=>e.need_page_documents=!0),class:B([{"btn-primary":!e.need_page_documents,"btn-outline-secondary":e.need_page_documents},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,C$),F$])])]))],512),[[Qe,e.tab===6]]),b(n("div",null,[e.need_attach_page?(r(),d("div",T$,[n("div",D$,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[33]||(s[33]=l=>e.need_attach_page=l),type:"checkbox",id:"need-page-attach"},null,512),[[Se,e.need_attach_page]]),P$])])):c("",!0),e.need_attach_page?(r(),d("div",S$,[e.pageForm.next_page_id?(r(),d("p",O$,[F("Связано со страницей #"+f(e.pageForm.next_page_id)+" ",1),n("a",{class:"btn btn-link",onClick:s[34]||(s[34]=l=>e.pageForm.next_page_id=null)},"Очистить")])):c("",!0),le($s,{current:e.pageForm.id,onCallback:e.attachPage,editor:!1},null,8,["current","onCallback"])])):(r(),d("div",A$,[n("div",M$,[n("div",j$,[b(n("img",R$,null,512),[[a,"../images/icon.png"]])]),U$,V$,n("div",Y$,[n("button",{disabled:e.need_attach_page,onClick:s[35]||(s[35]=l=>e.need_attach_page=!0),class:B([{"btn-primary":!e.need_attach_page,"btn-outline-secondary":e.need_attach_page},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,I$),B$])])]))],512),[[Qe,e.tab===7]]),b(n("div",null,[e.need_attach_slug?(r(),d("div",x$,[N$,n("div",E$,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[36]||(s[36]=l=>e.need_show_global_slug_list=l),type:"checkbox",id:"need-show-global-slug-list"},null,512),[[Se,e.need_show_global_slug_list]]),q$]),e.bot&&e.need_show_global_slug_list?(r(),de(Uo,{key:0,"can-add":!0,bot:e.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):c("",!0)])):c("",!0),e.need_attach_slug?(r(),d("div",z$,[n("div",L$,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[37]||(s[37]=l=>e.need_attach_slug=l),type:"checkbox",id:"need-slug-attach"},null,512),[[Se,e.need_attach_slug]]),W$])])):c("",!0),e.need_attach_slug?(r(),d("div",H$,[e.pageForm.next_bot_menu_slug_id?(r(),d("div",Q$,[F(" Связано со скриптом #"+f(e.pageForm.next_bot_menu_slug_id)+" ",1),n("a",{class:"btn btn-link text-danger",onClick:s[38]||(s[38]=l=>e.pageForm.next_bot_menu_slug_id=null)},"Очистить")])):c("",!0),e.bot&&e.load_slug_simple_list?(r(),de(ov,{key:1,global:!0,selected:[e.pageForm.next_bot_menu_slug_id],onCallback:e.associateSlug,bot:e.bot},null,8,["selected","onCallback","bot"])):c("",!0)])):(r(),d("div",X$,[n("div",K$,[n("div",Z$,[b(n("img",G$,null,512),[[a,"../images/icon.png"]])]),J$,e2,n("div",t2,[n("button",{disabled:e.need_attach_slug,onClick:s[39]||(s[39]=l=>e.need_attach_slug=!0),class:B([{"btn-primary":!e.need_attach_slug,"btn-outline-secondary":e.need_attach_slug},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,n2),s2])])]))],512),[[Qe,e.tab===8]]),b(n("div",null,[e.need_attach_dialog?(r(),d("div",o2,[n("div",a2,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[40]||(s[40]=l=>e.need_attach_dialog=l),type:"checkbox",id:"need-dialog-attach"},null,512),[[Se,e.need_attach_dialog]]),l2])])):c("",!0),e.need_attach_dialog?(r(),d("div",i2,[e.pageForm.next_bot_dialog_command_id?(r(),d("p",r2,[F("Связано с диалогом #"+f(e.pageForm.next_bot_dialog_command_id)+" ",1),n("a",{class:"btn btn-link",onClick:s[41]||(s[41]=l=>e.pageForm.next_bot_dialog_command_id=null)},"Очистить")])):c("",!0),e.bot?(r(),de(rg,{key:1,onSelectDialog:e.associateDialog,bot:e.bot},null,8,["onSelectDialog","bot"])):c("",!0)])):(r(),d("div",d2,[n("div",u2,[n("div",c2,[b(n("img",m2,null,512),[[a,"../images/icon.png"]])]),h2,p2,n("div",_2,[n("button",{disabled:e.need_attach_dialog,onClick:s[42]||(s[42]=l=>e.need_attach_dialog=!0),class:B([{"btn-primary":!e.need_attach_dialog,"btn-outline-secondary":e.need_attach_dialog},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,v2),f2])])]))],512),[[Qe,e.tab===9]]),b(n("div",null,[e.need_rules?(r(),d("div",b2,[n("div",g2,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[43]||(s[43]=l=>e.need_rules=l),type:"checkbox",id:"need-rules"},null,512),[[Se,e.need_rules]]),y2])])):c("",!0),e.need_rules?(r(),d("div",k2,[le(M1,{bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])])):(r(),d("div",$2,[n("div",w2,[n("div",C2,[b(n("img",F2,null,512),[[a,"../images/icon.png"]])]),T2,D2,n("div",P2,[n("button",{disabled:e.need_rules,onClick:s[44]||(s[44]=l=>e.need_rules=!0),class:B([{"btn-primary":!e.need_rules,"btn-outline-secondary":e.need_rules},"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill"]),type:"button"}," Добавить ",10,S2),O2])])]))],512),[[Qe,e.tab===10]])]))],32)):c("",!0),n("div",A2,[n("div",M2,[n("div",j2,[R2,n("div",U2,[e.bot?(r(),d("div",V2,[n("div",Y2,[n("h6",I2,[n("span",null,[F("Вы создаете страницу для "),n("a",{href:"https://t.me/"+e.bot.bot_domain,target:"_blank"},f(e.bot.bot_domain),9,B2)])])])])):c("",!0),n("form",{onSubmit:s[49]||(s[49]=Pe((...l)=>e.submitPage&&e.submitPage(...l),["prevent"])),class:"row"},[n("div",x2,[N2,n("ul",E2,[n("li",{class:B({active:e.need_page_images})},z2,2),n("li",{class:B({active:e.need_page_sticker})},W2,2),n("li",{class:B({active:e.need_page_video})},Q2,2),n("li",{class:B({active:e.need_page_audios})},K2,2),n("li",{class:B({active:e.need_page_documents})},G2,2),n("li",{class:B({active:e.need_attach_page})},ew,2),n("li",{class:B({active:e.need_attach_slug})},nw,2),n("li",{class:B({active:e.need_attach_dialog})},ow,2),n("li",{class:B({active:e.need_rules})},lw,2),n("li",{class:B({active:e.need_reply_menu})},rw,2),n("li",{class:B({active:e.need_inline_menu})},uw,2)])]),e.pageForm.id?(r(),d("div",cw,[n("div",mw,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[46]||(s[46]=l=>e.need_show_qr_and_link=l),type:"checkbox",id:"need-show-qr-and-link"},null,512),[[Se,e.need_show_qr_and_link]]),hw])])):c("",!0),e.pageForm.id&&e.need_show_qr_and_link?(r(),d("div",pw,[n("p",null,[F("Ссылка на текущую страницу: "),n("span",{class:"bg-secondary font-bold cursor-pointer",onClick:s[47]||(s[47]=l=>e.copyToClipBoard(e.pageLink))},f(e.pageLink),1)]),n("div",_w,[b(n("img",vw,null,512),[[a,e.qr]])])])):c("",!0),n("div",fw,[n("label",bw,[le(o,null,{content:q(()=>[yw]),default:q(()=>[gw]),_:1}),F(" Описание страницы "),kw]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":s[48]||(s[48]=l=>e.pageForm.comment=l),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[Q,e.pageForm.comment]])]),$w],32)]),ww])])]),n("div",Cw,[n("div",Fw,[n("div",Tw,[n("div",Dw,[le($s,{editor:!0,current:e.page,onCallback:e.pageListCallback},null,8,["current","onCallback"])])])])])],64)}}}),Sw={props:["bot","item"],data(){return{sectionForm:{section:null},categoryForm:{label:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]}}},computed:{...Ee(["getProductCategories"]),filteredCategories(){return this.productCategories.length===0?this.categories:this.categories.filter(t=>this.productCategories.indexOf(t.value)===-1)}},mounted(){this.loadProductCategories(),this.item&&this.$nextTick(()=>{this.productForm={id:this.item.id||null,article:this.item.article||null,vk_product_id:this.item.vk_product_id||null,title:this.item.title||null,description:this.item.description||null,images:this.item.images||null,type:this.item.type||1,old_price:this.item.old_price||null,current_price:this.item.current_price||null,variants:this.item.variants||null,in_stop_list_at:this.item.in_stop_list_at||null,bot_id:this.item.bot_id||null,options:this.item.options||null,reviews:this.item.reviews||null},this.options=[],this.item.categories.forEach(t=>{this.productCategories.push(t.id)})})},methods:{prepareCategoryName(t){let e=this.categories.find(s=>s.value===t);return console.log(e),e?e.label:t},addCategory(){const t=this.categoryForm.label;this.productCategories.push(t),this.categoryForm.label=null},selectCategory(t){this.productCategories.push(t.value)},submit(){let t=new FormData;if(Object.keys(this.productForm).forEach(e=>{const s=this.productForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.bot&&t.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)t.append("photos[]",this.photos[e]);this.removed_options.length>0&&t.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&t.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:t}).then(e=>{this.load=!0,this.$notify({title:"Конструктор ботов",text:"Продукт успешно сохранен!",type:"success"}),this.clearForm(),this.$emit("refresh")}).catch(e=>{})},onChangePhotos(t){const e=t.target.files;for(let s=0;s<e.length;s++)this.photos.push(e[s])},loadProductCategories(){this.$store.dispatch("loadProductCategories",{dataObject:{bot_id:this.bot.id}}).then(()=>{this.getProductCategories.forEach(e=>{this.categories.push({value:e.id,label:e.title})})})},getPhoto(t){return{imageUrl:URL.createObjectURL(t)}},removeSection(t){this.sections.splice(t,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeProductCategory(t){this.productCategories.splice(t,1)},removeVariant(t){this.productForm.variants.splice(t,1)},removeOption(t){this.productForm.options[t].id&&this.removed_options.push(this.productForm.options[t].id),this.productForm.options.splice(t,1)},removeImage(t){this.productForm.images.splice(t,1)},removePhoto(t){this.photos.splice(t,1)},clearForm(){const t={article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=t}}},Ow={class:"nav nav-tabs"},Aw={class:"nav-item"},Mw={class:"nav-item"},jw={class:"nav-item"},Rw={key:0},Uw={class:"col-md-8 d-flex align-items-center"},Vw={class:"form-check"},Yw=n("label",{class:"form-check-label",for:"in-stop-list"}," Товар находится в стоп-листе ",-1),Iw={class:"col-md-4 d-flex justify-content-end"},Bw={class:"col-md-12 mb-3"},xw=["onClick"],Nw={class:"dropdown"},Ew=n("button",{type:"button",class:"btn btn-outline-info w-100","data-bs-toggle":"dropdown","data-bs-display":"static","aria-expanded":"false"},[n("p",{class:"mb-0"},"Выберите категорию")],-1),qw={class:"dropdown-menu w-100",style:{"overflow-y":"scroll",height:"300px"}},zw={class:"p-3"},Lw=n("label",{for:"exampleDropdownFormEmail1",class:"form-label"},"Новая категория",-1),Ww={class:"p-3"},Hw=n("li",null,[n("hr",{class:"dropdown-divider"})],-1),Qw=["onClick"],Xw={class:"col-md-6"},Kw={class:"form-floating mb-3"},Zw=n("label",{for:"article"},"Артикул товара",-1),Gw={class:"col-md-6"},Jw={class:"form-floating mb-3"},e3=n("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),t3={class:"col-md-6"},n3={class:"form-floating mb-3"},s3=n("label",{for:"title"},"Названи товара",-1),o3={class:"col-md-6"},a3={class:"form-floating mb-3"},l3=["value"],i3=n("label",{for:"type"},"Тип товара",-1),r3={class:"col-md-12"},d3={class:"form-floating mb-3"},u3=n("label",{for:"description"},"Описание товара",-1),c3={class:"col-md-6"},m3={class:"form-floating mb-3"},h3=n("label",{for:"current-price"},"Актуальная цена",-1),p3={class:"col-md-6"},_3={class:"form-floating mb-3"},v3=n("label",{for:"old-price"},"Старая цена",-1),f3={class:"col-md-12 mb-3"},b3={class:"card"},g3={class:"card-header"},y3={key:0},k3={class:"card-body"},$3={class:"row"},w3={class:"col-12 mb-3"},C3={class:"col-md-6 mb-3"},F3={class:"card w-100"},T3={class:"card-body"},D3={class:"form-floating mb-3"},P3=["onUpdate:modelValue","id"],S3=["for"],O3={class:"form-floating mb-3"},A3=["onUpdate:modelValue","id"],M3=["for"],j3={class:"card-footer"},R3=["onClick"],U3=n("i",{class:"fa-solid fa-trash-can"},null,-1),V3=[U3],Y3={class:"col-md-12 mb-3"},I3={class:"card"},B3=n("div",{class:"card-header"},[n("h6",null,"Характеристики товара")],-1),x3={class:"card-body"},N3={class:"row mb-3"},E3={class:"col-12"},q3=n("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"},"Добавить секцию ",-1),z3={class:"badge bg-info mr-1"},L3=["onClick"],W3=n("i",{class:"fa-solid fa-xmark"},null,-1),H3=[W3],Q3={class:"row"},X3={class:"col-md-4 mb-3"},K3={class:"card w-100"},Z3={class:"card-body"},G3={class:"form-floating mb-3"},J3=["onUpdate:modelValue","id"],eC=["for"],tC={class:"form-floating mb-3"},nC=["onUpdate:modelValue","id"],sC=["for"],oC={class:"form-floating mb-3"},aC=["onUpdate:modelValue","id"],lC=n("option",{value:null},"Без секции",-1),iC=["value"],rC=["for"],dC={class:"card-footer"},uC=["onClick"],cC=n("i",{class:"fa-solid fa-trash-can"},null,-1),mC=[cC],hC={class:"row"},pC={class:"col-12"},_C={class:"col-md-12 mb-3"},vC=n("h6",null,"Фотографии товара",-1),fC={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},bC={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},gC=n("span",null,"+",-1),yC={class:"mb-2 img-preview",style:{"margin-right":"10px"}},kC={class:"remove"},$C=["onClick"],wC={class:"mb-2 img-preview",style:{"margin-right":"10px"}},CC={class:"remove"},FC=["onClick"],TC=n("div",{class:"col-12"},[n("button",{type:"submit",class:"btn btn-outline-primary w-100 p-3"},"Сохранить ")],-1),DC={key:1};function PC(t,e,s,o,a,l){const i=en("lazy");return r(),d(x,null,[n("ul",Ow,[n("li",Aw,[n("a",{class:B(["nav-link",{active:a.tab===0}]),onClick:e[0]||(e[0]=u=>a.tab=0),"aria-current":"page",href:"#product-form-info"},"Информация о товаре",2)]),n("li",Mw,[n("a",{class:B(["nav-link",{active:a.tab===1}]),onClick:e[1]||(e[1]=u=>a.tab=1),href:"#product-reviews"},"Комментарии",2)]),n("li",jw,[n("a",{class:B(["nav-link",{active:a.tab===2}]),onClick:e[2]||(e[2]=u=>a.tab=2),href:"#product-reviews"},"Заказы",2)])]),a.tab===0?(r(),d("div",Rw,[n("form",{onSubmit:e[19]||(e[19]=Pe((...u)=>l.submit&&l.submit(...u),["prevent"])),class:"row"},[n("div",Uw,[n("div",Vw,[b(n("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=u=>a.productForm.in_stop_list_at=u),type:"checkbox",value:"false",id:"in-stop-list"},null,512),[[Se,a.productForm.in_stop_list_at]]),Yw])]),n("div",Iw,[n("a",{href:"#",class:"btn btn-link",onClick:e[4]||(e[4]=(...u)=>l.clearForm&&l.clearForm(...u))},"Новый товар")]),n("div",Bw,[(r(!0),d(x,null,ne(a.productCategories,(u,h)=>(r(),d("span",{class:"badge bg-info mr-1 mb-1 cursor-pointer",onClick:p=>l.removeProductCategory(h)},f(l.prepareCategoryName(u)),9,xw))),256)),n("div",Nw,[Ew,n("ul",qw,[n("div",zw,[Lw,b(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=u=>a.categoryForm.label=u),id:"exampleDropdownFormEmail1",placeholder:"Название категории"},null,512),[[Q,a.categoryForm.label]])]),n("div",Ww,[n("button",{class:"btn btn-primary w-100",type:"button",onClick:e[6]||(e[6]=(...u)=>l.addCategory&&l.addCategory(...u))},"Добавить категорию ")]),Hw,(r(!0),d(x,null,ne(l.filteredCategories,u=>(r(),d("li",null,[n("button",{class:"dropdown-item",type:"button",onClick:h=>l.selectCategory(u)},f(u.label),9,Qw)]))),256))])])]),n("div",Xw,[n("div",Kw,[b(n("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=u=>a.productForm.article=u),class:"form-control",id:"article",placeholder:"name@example.com"},null,512),[[Q,a.productForm.article]]),Zw])]),n("div",Gw,[n("div",Jw,[b(n("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=u=>a.productForm.vk_product_id=u),disabled:!0,class:"form-control",id:"vk-product-id",placeholder:"name@example.com"},null,512),[[Q,a.productForm.vk_product_id]]),e3])]),n("div",t3,[n("div",n3,[b(n("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>a.productForm.title=u),class:"form-control",id:"title",placeholder:"name@example.com"},null,512),[[Q,a.productForm.title]]),s3])]),n("div",o3,[n("div",a3,[b(n("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=u=>a.productForm.type=u),id:"type","aria-label":"Floating label select example"},[(r(!0),d(x,null,ne(a.types,(u,h)=>(r(),d("option",{value:u.value},f(u.title),9,l3))),256))],512),[[zt,a.productForm.type]]),i3])]),n("div",r3,[n("div",d3,[b(n("textarea",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=u=>a.productForm.description=u),placeholder:"Leave a comment here",id:"description"},null,512),[[Q,a.productForm.description]]),u3])]),n("div",c3,[n("div",m3,[b(n("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=u=>a.productForm.current_price=u),class:"form-control",id:"current-price",placeholder:"name@example.com"},null,512),[[Q,a.productForm.current_price]]),h3])]),n("div",p3,[n("div",_3,[b(n("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=u=>a.productForm.old_price=u),class:"form-control",id:"old-price",placeholder:"name@example.com"},null,512),[[Q,a.productForm.old_price]]),v3])]),n("div",f3,[n("div",b3,[n("div",g3,[n("h6",null,[F("Варианты товара "),a.productForm.variants?(r(),d("span",y3,"("+f(a.productForm.variants.length)+")",1)):c("",!0)])]),n("div",k3,[n("div",$3,[n("div",w3,[n("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[14]||(e[14]=(...u)=>l.addVariant&&l.addVariant(...u))},"Добавить вариант ")]),(r(!0),d(x,null,ne(a.productForm.variants,(u,h)=>(r(),d("div",C3,[n("div",F3,[n("div",T3,[n("div",D3,[b(n("input",{type:"text","onUpdate:modelValue":p=>a.productForm.variants[h].key=p,class:"form-control",id:"variant-key-"+h,placeholder:"name@example.com",required:""},null,8,P3),[[Q,a.productForm.variants[h].key]]),n("label",{for:"variant-key-"+h},"Ключ",8,S3)]),n("div",O3,[b(n("input",{type:"text","onUpdate:modelValue":p=>a.productForm.variants[h].value=p,class:"form-control",id:"variant-value-"+h,placeholder:"name@example.com",required:""},null,8,A3),[[Q,a.productForm.variants[h].value]]),n("label",{for:"variant-value-"+h},"Значение",8,M3)])]),n("div",j3,[n("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeVariant(h)},V3,8,R3)])])]))),256))])])])]),n("div",Y3,[n("div",I3,[B3,n("div",x3,[n("div",N3,[n("div",E3,[n("form",{onSubmit:e[16]||(e[16]=Pe((...u)=>l.addSection&&l.addSection(...u),["prevent"])),class:"input-group mb-3"},[b(n("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=u=>a.sectionForm.section=u),class:"form-control border-info",placeholder:"Название секции","aria-label":"Recipient's username","aria-describedby":"button-addon2",required:""},null,512),[[Q,a.sectionForm.section]]),q3],32),(r(!0),d(x,null,ne(a.sections,(u,h)=>(r(),d("span",z3,[F(f(u)+" ",1),n("strong",{onClick:p=>l.removeSection(h)},H3,8,L3)]))),256))])]),n("div",Q3,[(r(!0),d(x,null,ne(a.productForm.options,(u,h)=>(r(),d("div",X3,[n("div",K3,[n("div",Z3,[n("div",G3,[b(n("input",{type:"text","onUpdate:modelValue":p=>a.productForm.options[h].title=p,class:"form-control",id:"option-title-"+h,placeholder:"name@example.com"},null,8,J3),[[Q,a.productForm.options[h].title]]),n("label",{for:"option-title-"+h},"Название характеристики",8,eC)]),n("div",tC,[b(n("input",{type:"text","onUpdate:modelValue":p=>a.productForm.options[h].value=p,class:"form-control",id:"option-value-"+h,placeholder:"name@example.com"},null,8,nC),[[Q,a.productForm.options[h].value]]),n("label",{for:"option-value-"+h},"Значение характеристики",8,sC)]),n("div",oC,[b(n("select",{class:"form-select","onUpdate:modelValue":p=>a.productForm.options[h].section=p,id:"option-section-"+h,"aria-label":"Floating label select example"},[lC,(r(!0),d(x,null,ne(a.sections,p=>(r(),d("option",{value:p},f(p),9,iC))),256))],8,aC),[[zt,a.productForm.options[h].section]]),n("label",{for:"option-section-"+h},"Секция товара",8,rC)])]),n("div",dC,[n("button",{type:"button",class:"btn btn-outline-danger",onClick:p=>l.removeOption(h)},mC,8,uC)])])]))),256))]),n("div",hC,[n("div",pC,[n("button",{type:"button",class:"btn btn-outline-info w-100",onClick:e[17]||(e[17]=(...u)=>l.addOption&&l.addOption(...u))},"Добавить характеристику ")])])])])]),n("div",_C,[vC,n("div",fC,[n("label",bC,[gC,n("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[18]||(e[18]=(...u)=>l.onChangePhotos&&l.onChangePhotos(...u)),style:{display:"none"}},null,32)]),a.productForm.images?(r(!0),d(x,{key:0},ne(a.productForm.images,(u,h)=>(r(),d("div",yC,[b(n("img",null,null,512),[[i,u]]),n("div",kC,[n("a",{onClick:p=>l.removeImage(h)},"Удалить",8,$C)])]))),256)):c("",!0),a.photos.length>0?(r(!0),d(x,{key:1},ne(a.photos,(u,h)=>(r(),d("div",wC,[b(n("img",null,null,512),[[i,l.getPhoto(u).imageUrl]]),n("div",CC,[n("a",{onClick:p=>l.removePhoto(h)},"Удалить",8,FC)])]))),256)):c("",!0)])]),TC],32)])):c("",!0),a.tab===1?(r(),d("div",DC," Отзывы ")):c("",!0)],64)}const SC=nn(Sw,[["render",PC]]),OC={props:["item"],data(){return{bot:null}},methods:{preparedImgUrl(t){return t.toLocaleLowerCase().startsWith("https://")||t.toLocaleLowerCase().startsWith("http://")?t:"/images-by-bot-id/"+this.bot.id+"/"+t},removeProduct(){this.$store.dispatch("removeProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"})}).catch(t=>{})},duplicateProduct(){this.$store.dispatch("duplicateProduct",this.item.id).then(t=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно продублирован!",type:"success"})}).catch(t=>{})}},mounted(){this.bot=this.getCurrentBot},computed:{...Ee(["getCurrentBot"])}},AC={key:0,class:"card"},MC={class:"card-header"},jC={class:"card-body"},RC=["id"],UC={class:"carousel-inner"},VC=["src"],YC=["data-bs-target"],IC=n("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),BC=n("span",{class:"visually-hidden"},"Previous",-1),xC=[IC,BC],NC=["data-bs-target"],EC=n("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),qC=n("span",{class:"visually-hidden"},"Next",-1),zC=[EC,qC],LC={class:"card-footer d-flex justify-content-between"},WC=n("i",{class:"fa-regular fa-copy"},null,-1),HC=[WC],QC=n("i",{class:"fa-solid fa-trash-can"},null,-1),XC=[QC];function KC(t,e,s,o,a,l){return a.bot?(r(),d("div",AC,[n("div",MC,[n("p",null,"#"+f(s.item.id),1)]),n("div",jC,[n("p",null,f(s.item.title),1),n("div",{id:"image-slider-"+s.item.id,class:"carousel slide","data-bs-ride":"carousel"},[n("div",UC,[(r(!0),d(x,null,ne(s.item.images,(i,u)=>(r(),d("div",{class:B(["carousel-item",{active:u===0}]),style:{height:"300px"}},[n("img",{src:l.preparedImgUrl(i),class:"d-block w-100 object-fit-cover",alt:"..."},null,8,VC)],2))),256))]),n("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#image-slider-"+s.item.id,"data-bs-slide":"prev"},xC,8,YC),n("button",{class:"carousel-control-next",type:"button","data-bs-target":"#image-slider-"+s.item.id,"data-bs-slide":"next"},zC,8,NC)],8,RC)]),n("div",LC,[n("button",{title:"Дублировать товар",onClick:e[0]||(e[0]=(...i)=>l.duplicateProduct&&l.duplicateProduct(...i)),class:"btn btn-outline-info mr-1"},HC),n("button",{title:"Удалить товар",onClick:e[1]||(e[1]=(...i)=>l.removeProduct&&l.removeProduct(...i)),class:"btn btn-outline-danger"},XC)])])):c("",!0)}const ZC=nn(OC,[["render",KC]]),GC=n("button",{class:"btn btn-outline-info",type:"submit",id:"button-addon2"}," Найти ",-1),JC={key:0},e5={class:"row"},t5={class:"col-4 mb-2"},n5={props:["bot"],data(){return{search:null,products:[],paginate:null}},computed:{...Ee(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(t=>t.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadProducts()},methods:{selectProduct(t){this.$emit("select",t)},nextProducts(t){this.loadProducts(t)},loadProducts(t=0){return this.$store.dispatch("loadProducts",{dataObject:{bot_id:this.bot.id,search:this.search},page:t}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})}}},s5=Object.assign(n5,{__name:"ProductList",setup(t){return(e,s)=>(r(),d(x,null,[n("form",{class:"input-group mb-3",onSubmit:s[1]||(s[1]=Pe(o=>e.loadProducts(0),["prevent"]))},[b(n("input",{type:"text",class:"form-control border-info",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":s[0]||(s[0]=o=>e.search=o),"aria-describedby":"button-addon2",required:""},null,512),[[Q,e.search]]),GC],32),n("p",null,[F("Всего товаров: "),e.paginate?(r(),d("span",JC,f(e.paginate.meta.total||0),1)):c("",!0)]),n("div",e5,[(r(!0),d(x,null,ne(e.filteredProducts,(o,a)=>(r(),d("div",t5,[le(ZC,{onClick:l=>e.selectProduct(o),item:o},null,8,["onClick","item"])]))),256))]),e.paginate?(r(),de(Je,{key:0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):c("",!0)],64))}}),o5={class:"card mb-2"},a5=n("div",{class:"card-header"},[n("h6",null,"Управление магазином")],-1),l5={class:"card-body"},i5={class:"row"},r5={class:"col-12"},d5={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},u5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),c5=n("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),m5=n("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),h5=["disabled"],p5=n("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),_5={class:"row mb-3"},v5={class:"col-md-3"},f5=["href"],b5=jo('<div class="col-md-3"><button class="btn btn-outline-info w-100">Экспорт в XLS</button></div><div class="col-md-3"><button class="btn btn-outline-info w-100">Импорт из XLS</button></div><div class="col-md-3"><button class="btn btn-outline-danger w-100">Удалить товары</button></div>',3),g5=n("div",{class:"row"},[n("div",{class:"col-md-3"},[n("button",{class:"btn btn-outline-info w-100"},"Экспортировать заказы")])],-1),y5={class:"card"},k5=n("div",{class:"card-header"},[n("h6",null,"Работа с товаром")],-1),$5={class:"card-body"},w5={class:"card mt-2"},C5={class:"card-body"},F5={data(){return{load:!1,tab:0,url:null,link:null,bot:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{...Ee(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.botForm.vk_shop_link=this.bot.vk_shop_link||null,this.updateProducts()},methods:{updateShopLink(){this.load=!0,this.botForm.bot_id=this.bot.id,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(t=>{this.load=!1,this.updateProducts(),this.$notify({title:"Менеджер магазина",text:"Ссылка на источник в ВК обновлена"})}).catch(()=>{this.load=!1})},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},selectProduct(t){this.load=!0,this.$nextTick(()=>{this.selectedProduct=t,this.load=!1})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk",{dataObject:{bot_domain:this.getCurrentBot.bot_domain}}).then(t=>{this.link=t.data.url,this.load=!1,this.url=null}).catch(()=>{this.load=!1})}}},QV=Object.assign(F5,{__name:"Shop",setup(t){return(e,s)=>{const o=Ut("Popper");return r(),d(x,null,[n("div",o5,[a5,n("div",l5,[n("div",i5,[n("div",r5,[n("form",{onSubmit:s[1]||(s[1]=Pe((...a)=>e.updateShopLink&&e.updateShopLink(...a),["prevent"])),class:"mb-2"},[n("label",d5,[n("div",null,[le(o,null,{content:q(()=>[c5]),default:q(()=>[u5]),_:1}),F(" ВК-группа ")]),m5]),b(n("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":s[0]||(s[0]=a=>e.botForm.vk_shop_link=a),"aria-describedby":"vk_shop_link"},null,512),[[Q,e.botForm.vk_shop_link]]),n("button",{disabled:e.load,class:"btn btn-outline-primary mt-2 mb-2 w-100"},[p5,F(" Сохранить ")],8,h5)],32)])]),n("div",_5,[n("div",v5,[n("a",{target:"_blank",href:e.link,class:"btn btn-primary w-100"}," Обновить товар ",8,f5)]),b5]),g5])]),n("div",y5,[k5,n("div",$5,[e.bot&&!e.load?(r(),de(SC,{key:0,bot:e.bot,item:e.selectedProduct,onRefresh:e.refresh},null,8,["bot","item","onRefresh"])):c("",!0)])]),n("div",w5,[n("div",C5,[e.bot&&!e.load?(r(),de(s5,{key:0,bot:e.bot,onSelect:e.selectProduct},null,8,["bot","onSelect"])):c("",!0)])])],64)}}}),T5={props:["data"],data(){return{hasConnect:!1,bot:null,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null}}},computed:{...Ee(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data?this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null}):this.amoForm.bot_id=this.bot.id||null},methods:{submitAmo(){let t=new FormData;Object.keys(this.amoForm).forEach(e=>{const s=this.amoForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.$store.dispatch("saveAmoCRM",{amoForm:t}).then(e=>{this.$notify("Данные CRM успешно сохранены")}).catch(e=>{})}}},D5=n("div",{class:"col-12"},[n("p",null,[n("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),F(" по шагам")])],-1),P5={class:"col-md-6 col-12 mb-2"},S5={class:"form-label",id:"client_id"},O5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),A5=n("div",null,"ID интеграции",-1),M5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),j5={class:"col-md-6 col-12 mb-2"},R5={class:"form-label",id:"client_secret"},U5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),V5=n("div",null,"Секрет интеграции",-1),Y5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),I5={class:"col-md-6 mb-2"},B5={class:"form-label",id:"auth_code"},x5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),N5=n("div",null,"Полученный код авторизации",-1),E5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),q5={class:"col-md-6 col-12 mb-2"},z5={class:"form-label",id:"subdomain2"},L5=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),W5=n("div",null,"Ваш поддомен в системе AMO CRM",-1),H5=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Q5=n("div",{class:"col-md-12 col-12"},[n("button",{type:"submit",class:"btn btn-outline-primary p-3 w-100"},[n("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),F(" Сохранить настройку AMO ")])],-1);function X5(t,e,s,o,a,l){const i=Ut("Popper");return r(),d("form",{onSubmit:e[4]||(e[4]=Pe((...u)=>l.submitAmo&&l.submitAmo(...u),["prevent"])),class:"row"},[D5,n("div",P5,[n("label",S5,[le(i,null,{content:q(()=>[A5]),default:q(()=>[O5]),_:1}),F(" client_id "),M5]),b(n("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=u=>a.amoForm.client_id=u),"aria-describedby":"client_id"},null,512),[[Q,a.amoForm.client_id]])]),n("div",j5,[n("label",R5,[le(i,null,{content:q(()=>[V5]),default:q(()=>[U5]),_:1}),F(" client_secret "),Y5]),b(n("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=u=>a.amoForm.client_secret=u),"aria-describedby":"client_secret"},null,512),[[Q,a.amoForm.client_secret]])]),n("div",I5,[n("label",B5,[le(i,null,{content:q(()=>[N5]),default:q(()=>[x5]),_:1}),F(" auth_code "),E5]),b(n("textarea",{class:"form-control",placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=u=>a.amoForm.auth_code=u),"aria-describedby":"auth_code"},`
                                    `,512),[[Q,a.amoForm.auth_code]])]),n("div",q5,[n("label",z5,[le(i,null,{content:q(()=>[W5]),default:q(()=>[L5]),_:1}),F(" subdomain "),H5]),b(n("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=u=>a.amoForm.subdomain=u),"aria-describedby":"subdomain"},null,512),[[Q,a.amoForm.subdomain]])]),Q5],32)}const XV=nn(T5,[["render",X5]]),K5={props:["data"],data(){return{load:!1,bot:null,yClientsForm:{login:null,password:null,partner_token:null,company:null}}},computed:{...Ee(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data&&this.$nextTick(()=>{this.yClientsForm.login=this.data.login||null,this.yClientsForm.password=this.data.password||null,this.yClientsForm.partner_token=this.data.partner_token||null,this.yClientsForm.company=this.data.company||null})},methods:{submitYClients(){let t=new FormData;Object.keys(this.yClientsForm).forEach(e=>{const s=this.yClientsForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),this.$store.dispatch("saveYClients",{yClientsForm:t}).then(e=>{this.$notify({title:"Работа с YClients",text:"Данные YClients успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с YClients",text:"Ошибка сохранения данных",type:"error"})})}}},Z5=n("h6",null,"Настройка YClients",-1),G5={class:"row"},J5={class:"col-md-12"},eF={class:"mb-2"},tF=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"login"},[F(" Логин "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),nF={class:"mb-2"},sF=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"password"},[F(" Пароль "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),oF={class:"mb-2"},aF=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[F(" Партнерский тоукен "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),lF={class:"mb-2"},iF=n("label",{class:"form-label d-flex justify-content-between mt-2",for:"partner_token"},[F(" ID компании, в которую записывать клиентов "),n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),rF=n("button",{class:"btn btn-success w-100 r mb-3 text-uppercase font-900"}," Сохранить ",-1);function dF(t,e,s,o,a,l){return r(),d(x,null,[Z5,n("form",{onSubmit:e[4]||(e[4]=Pe((...i)=>l.submitYClients&&l.submitYClients(...i),["prevent"]))},[n("div",G5,[n("div",J5,[n("div",eF,[tF,b(n("input",{type:"text",id:"login",class:"form-control",placeholder:"Ваш логин","aria-label":"Ваш логин","onUpdate:modelValue":e[0]||(e[0]=i=>a.yClientsForm.login=i),"aria-describedby":"Ваш логин",required:""},null,512),[[Q,a.yClientsForm.login]])]),n("div",nF,[sF,b(n("input",{type:"text",id:"password",class:"form-control",placeholder:"Ваш пароль","aria-label":"Ваш пароль","onUpdate:modelValue":e[1]||(e[1]=i=>a.yClientsForm.password=i),"aria-describedby":"Ваш пароль",required:""},null,512),[[Q,a.yClientsForm.password]])]),n("div",oF,[aF,b(n("input",{type:"text",id:"partner_token",class:"form-control",placeholder:"Ваш партнерский тоукен","aria-label":"Ваш партнерский тоукен","onUpdate:modelValue":e[2]||(e[2]=i=>a.yClientsForm.partner_token=i),"aria-describedby":"Ваш партнерский тоукен",required:""},null,512),[[Q,a.yClientsForm.partner_token]])]),n("div",lF,[iF,b(n("input",{type:"number",id:"throttle",class:"form-control",placeholder:"ID компании","aria-label":"ID компании","onUpdate:modelValue":e[3]||(e[3]=i=>a.yClientsForm.company=i),"aria-describedby":"ID компании",required:""},null,512),[[Q,a.yClientsForm.company]])])])]),rF],32)],64)}const KV=nn(K5,[["render",dF]]),uF={data(){return{load:!1,bot:null,fieldTypes:[{title:"Текст",value:0},{title:"Число",value:1},{title:"Логический",value:2},{title:"Дата и время",value:3}],fieldForm:{fields:[]}}},computed:{...Ee(["getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.bot=this.getCurrentBot,this.$nextTick(()=>{this.fieldForm.fields=this.bot.field_settings||[]}),this.loadCurrentBotFields()})},methods:{loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields",{bot_id:this.bot.id}).then(t=>{this.fieldForm.fields=t.data||[]})},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},removeField(t){this.fieldForm.fields.splice(t,1)},submit(){let t=new FormData;Object.keys(this.fieldForm).forEach(e=>{const s=this.fieldForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeBotFields",{dataObject:t}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Поля успешно обновлены",type:"success"}),this.fieldForm.fields=[],this.fieldForm.fields=e.data}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка обновления полей",type:"error"})})},addField(){if(this.fieldForm.fields||(this.fieldForm.fields=[]),this.fieldForm.fields.length>0&&this.fieldForm.fields.findIndex(e=>e.key==null)!==-1){this.$notify({title:"Настраиваемые поля",text:"У вас есть пустые ключевые поля!",type:"error"});return}this.fieldForm.fields.push({key:null,type:0,label:null,description:null,required:!1,validate_pattern:null})}}},cF={class:"mb-2"},mF={class:"d-flex justify-content-between"},hF=n("h6",null,"Настройка полей пользователя бота",-1),pF=n("i",{class:"fa-solid fa-plus mr-2"},null,-1),_F=n("p",null,[n("em",null,"Данные поля будут добавлены пользователю бота и будут автоматически учитываться в условиях страниц, скриптах (в формах заполнения данных), диалогах. Ключи должны быть уникальные для каждого бота. Если ключ дублируется, то будет использовано более позднее его значение. Если поле добавлено и сохранено, то удалить его уже нельзя, только скрыть. "),F(". "),n("br"),n("span",{class:"text-danger"},"*"),F(" - обязательное поле ")],-1),vF={class:"table"},fF=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},[F("Ключ"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},[F("Подпись поля"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},[F("Тип поля"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"},"Паттерн"),n("th",{scope:"col"},"Обязательный"),n("th",{scope:"col"},[F("Вопрос для анкеты"),n("span",{class:"text-danger"},"*")]),n("th",{scope:"col"})])],-1),bF={scope:"row"},gF={scope:"col"},yF=["onUpdate:modelValue"],kF={scope:"col"},$F=["onUpdate:modelValue"],wF={scope:"col"},CF=["onUpdate:modelValue"],FF=["value"],TF={scope:"col"},DF=["disabled","onUpdate:modelValue"],PF={scope:"col"},SF={class:"form-check"},OF=["onUpdate:modelValue","id"],AF=["for"],MF={key:0},jF={key:1},RF={scope:"col"},UF=["onUpdate:modelValue"],VF={scope:"col"},YF=["onClick"],IF=n("i",{class:"fa-regular fa-trash-can"},null,-1),BF=[IF],xF={key:1,class:"form-check mt-2"},NF=["onUpdate:modelValue","id"],EF=["for"],qF={key:0},zF=n("i",{class:"fa-solid fa-eye text-success"},null,-1),LF=[zF],WF={key:1},HF=n("i",{class:"fa-solid fa-eye-slash text-danger"},null,-1),QF=[HF],XF=n("button",{type:"submit",class:"btn btn-success w-100 p-3"}," Сохранить поля ",-1);function KF(t,e,s,o,a,l){return r(),d("div",cF,[n("div",mF,[hF,n("button",{type:"button",onClick:e[0]||(e[0]=i=>l.addField()),class:"btn mb-2 rounded-sm btn-outline-info"},[pF,F(" Добавить параметр ")])]),_F,n("form",{onSubmit:e[1]||(e[1]=Pe((...i)=>l.submit&&l.submit(...i),["prevent"]))},[n("table",vF,[fF,n("tbody",null,[(r(!0),d(x,null,ne(a.fieldForm.fields,(i,u)=>(r(),d("tr",null,[n("th",bF,f(u+1),1),n("th",gF,[b(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Ключ","aria-label":"Ключ",maxlength:"255","onUpdate:modelValue":h=>a.fieldForm.fields[u].key=h,required:""},null,8,yF),[[Q,a.fieldForm.fields[u].key]])]),n("th",kF,[b(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Подпись поля","aria-label":"Название поля",maxlength:"255","onUpdate:modelValue":h=>a.fieldForm.fields[u].label=h,required:""},null,8,$F),[[Q,a.fieldForm.fields[u].label]])]),n("th",wF,[b(n("select",{class:"form-select","onUpdate:modelValue":h=>a.fieldForm.fields[u].type=h},[(r(!0),d(x,null,ne(a.fieldTypes,h=>(r(),d("option",{value:h.value},f(h.title||"Не указан"),9,FF))),256))],8,CF),[[zt,a.fieldForm.fields[u].type]])]),n("th",TF,[b(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Паттерн","aria-label":"Паттерн",maxlength:"255",disabled:a.fieldForm.fields[u].type===2,"onUpdate:modelValue":h=>a.fieldForm.fields[u].validate_pattern=h},null,8,DF),[[Q,a.fieldForm.fields[u].validate_pattern]])]),n("th",PF,[n("div",SF,[b(n("input",{class:"form-check-input","onUpdate:modelValue":h=>a.fieldForm.fields[u].required=h,type:"checkbox",value:"",id:"field-required"+u},null,8,OF),[[Se,a.fieldForm.fields[u].required]]),n("label",{class:"form-check-label",for:"field-required"+u},[a.fieldForm.fields[u].required?(r(),d("span",MF,"Да")):c("",!0),a.fieldForm.fields[u].required?c("",!0):(r(),d("span",jF,"Нет"))],8,AF)])]),n("th",RF,[b(n("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Описание вопроса","aria-label":"Описание вопроса",maxlength:"255","onUpdate:modelValue":h=>a.fieldForm.fields[u].description=h,required:""},null,8,UF),[[Q,a.fieldForm.fields[u].description]])]),n("th",VF,[a.fieldForm.fields[u].id?(r(),d("div",xF,[b(n("input",{class:"form-check-input d-none","onUpdate:modelValue":h=>a.fieldForm.fields[u].is_active=h,type:"checkbox",value:"",id:"field-is_active-"+u},null,8,NF),[[Se,a.fieldForm.fields[u].is_active]]),n("label",{class:"form-check-label",for:"field-is_active-"+u},[a.fieldForm.fields[u].is_active?(r(),d("span",qF,LF)):c("",!0),a.fieldForm.fields[u].is_active?c("",!0):(r(),d("span",WF,QF))],8,EF)])):(r(),d("button",{key:0,type:"button",onClick:h=>l.removeField(u),class:"btn btn-link text-danger"},BF,8,YF))])]))),256))])]),XF],32)])}const ZV=nn(uF,[["render",KF]]),ZF={class:"row"},GF={class:"input-group mb-3"},JF={key:0,class:"row"},e4={class:"col-12 col-md-12 mb-3"},t4={class:"table"},n4=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Тип"),n("th",{scope:"col"},"Подпись"),n("th",{scope:"col"},"File Id"),n("th",{scope:"col"},"Действия")])],-1),s4={scope:"row"},o4={class:"badge bg-info rounded-pill"},a4={style:{"word-break":"break-all"}},l4={style:{"word-break":"break-all"}},i4={style:{"min-width":"200px"}},r4=["onClick"],d4=n("i",{class:"fa-solid fa-eye"},null,-1),u4=[d4],c4=["onClick"],m4=n("i",{class:"fa-brands fa-telegram"},null,-1),h4=[m4],p4=["onClick"],_4=n("i",{class:"fa-solid fa-trash"},null,-1),v4=[_4],f4={class:"col-12"},b4={key:1,class:"row"},g4=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ")],-1),y4=[g4],k4={class:"modal fade",id:"preview-modal",tabindex:"-1","aria-labelledby":"preview-modal-label","aria-hidden":"true"},$4={class:"modal-dialog"},w4={class:"modal-content"},C4={class:"modal-body"},F4={key:0,class:"d-flex justify-content-center align-items-center"},T4={key:0,class:"video-circle"},D4={key:0,controls:"",poster:"/images/load.gif"},P4=["src"],S4={key:1},O4={controls:"",poster:"/images/load.gif"},A4=["src"],M4={key:2,alt:""},j4=["src"],R4=n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),U4={data(){return{bot:null,previewContent:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...Ee(["getMedia","getMediaPaginateObject","getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMedia()})},methods:{selectMedia(t){this.$emit("select",t)},loadCurrentBot(t=null){return this.$store.dispatch("updateCurrentBot",{bot:t}).then(()=>{this.bot=this.getCurrentBot})},nextMedia(t){this.loadMedia(t)},remove(t){this.$store.dispatch("removeMedia",{dataObject:{mediaId:t}}).then(e=>{this.loadMedia(),this.$notify({title:"Удаление медиа-контента",text:"Медиа контент удален"})}).catch(()=>{})},showPreview(t){this.previewContent=null,this.$nextTick(()=>{this.previewContent=t,new bootstrap.Modal("#preview-modal",{}).show()})},showPreviewInTg(t){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:t}}).then(e=>{this.$notify({title:"Превью медиа-контента",text:"Отправлено в бота"})}).catch(()=>{})},loadMedia(t=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{bot_id:this.bot.id||null,search:this.search,needVideo:!0,needVideoNote:!0,needPhoto:!0,needAudio:!0,needDocument:!0,needSticker:!0},page:t}).then(e=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},GV=Object.assign(U4,{__name:"BotMediaTable",setup(t){return(e,s)=>{const o=en("lazy");return r(),d(x,null,[n("div",ZF,[n("div",GF,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск файла","aria-label":"Поиск файла","onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a)},null,512),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=a=>e.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")])]),e.media.length>0?(r(),d("div",JF,[n("div",e4,[n("table",t4,[n4,n("tbody",null,[(r(!0),d(x,null,ne(e.media,(a,l)=>(r(),d("tr",null,[n("th",s4,f(a.id),1),n("td",null,[n("span",o4,f(a.type),1)]),n("td",null,[n("p",a4,f(a.caption??"Без подписи"),1)]),n("td",null,[n("p",l4,f(a.file_id),1)]),n("td",null,[n("div",i4,[n("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:i=>e.showPreview(a)},u4,8,r4),n("a",{href:"javascript:void(0)",class:"btn btn-info mr-2",onClick:i=>e.showPreviewInTg(a.id)},h4,8,c4),n("a",{href:"javascript:void(0)",class:"btn btn-outline-danger text-danger",onClick:i=>e.remove(a.id)},v4,8,p4)])])]))),256))])])]),n("div",f4,[e.media_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextMedia,pagination:e.media_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",b4,y4)),n("div",k4,[n("div",$4,[n("div",w4,[n("div",C4,[e.previewContent!=null?(r(),d("div",F4,[e.previewContent.type=="video_note"?(r(),d("div",T4,[e.previewContent.type==="video"||e.previewContent.type=="video_note"?(r(),d("video",D4,[n("source",{src:"/file-by-file-id/"+e.previewContent.file_id,type:"video/mp4"},null,8,P4)])):c("",!0)])):c("",!0),e.previewContent.type==="video"?(r(),d("div",S4,[n("video",O4,[n("source",{src:"/file-by-file-id/"+e.previewContent.file_id,type:"video/mp4"},null,8,A4)])])):c("",!0),e.previewContent.type=="photo"?b((r(),d("img",M4,null,512)),[[o,"/file-by-file-id/"+e.previewContent.file_id]]):c("",!0),e.previewContent.type==="audio"||e.previewContent.type==="voice"?(r(),d("audio",{key:3,controls:"",src:"/file-by-file-id/"+e.previewContent.file_id},null,8,j4)):c("",!0)])):c("",!0)]),R4])])])],64)}}});function bt(t){return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}function $e(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ve(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ke(t){ve(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||bt(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function jt(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return isNaN(o)?new Date(NaN):(o&&s.setDate(s.getDate()+o),s)}function kt(t,e){ve(2,arguments);var s=ke(t),o=$e(e);if(isNaN(o))return new Date(NaN);if(!o)return s;var a=s.getDate(),l=new Date(s.getTime());l.setMonth(s.getMonth()+o+1,0);var i=l.getDate();return a>=i?l:(s.setFullYear(l.getFullYear(),l.getMonth(),a),s)}function Yo(t,e){if(ve(2,arguments),!e||bt(e)!=="object")return new Date(NaN);var s=e.years?$e(e.years):0,o=e.months?$e(e.months):0,a=e.weeks?$e(e.weeks):0,l=e.days?$e(e.days):0,i=e.hours?$e(e.hours):0,u=e.minutes?$e(e.minutes):0,h=e.seconds?$e(e.seconds):0,p=ke(t),$=o||s?kt(p,o+s*12):p,_=l||a?jt($,l+a*7):$,C=u+i*60,D=h+C*60,S=D*1e3,N=new Date(_.getTime()+S);return N}function V4(t,e){ve(2,arguments);var s=ke(t).getTime(),o=$e(e);return new Date(s+o)}var Y4={};function At(){return Y4}function Gt(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=At(),_=$e((s=(o=(a=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:$.weekStartsOn)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&s!==void 0?s:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var C=ke(t),D=C.getDay(),S=(D<_?7:0)+D-_;return C.setDate(C.getDate()-S),C.setHours(0,0,0,0),C}function Ln(t){return ve(1,arguments),Gt(t,{weekStartsOn:1})}function I4(t){ve(1,arguments);var e=ke(t),s=e.getFullYear(),o=new Date(0);o.setFullYear(s+1,0,4),o.setHours(0,0,0,0);var a=Ln(o),l=new Date(0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);var i=Ln(l);return e.getTime()>=a.getTime()?s+1:e.getTime()>=i.getTime()?s:s-1}function B4(t){ve(1,arguments);var e=I4(t),s=new Date(0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);var o=Ln(s);return o}function Wn(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function so(t){ve(1,arguments);var e=ke(t);return e.setHours(0,0,0,0),e}var x4=864e5;function N4(t,e){ve(2,arguments);var s=so(t),o=so(e),a=s.getTime()-Wn(s),l=o.getTime()-Wn(o);return Math.round((a-l)/x4)}function E4(t,e){ve(2,arguments);var s=$e(e),o=s*3;return kt(t,o)}function Rs(t,e){ve(2,arguments);var s=$e(e);return kt(t,s*12)}var Us=6e4,Vs=36e5,q4=1e3;function Io(t){return ve(1,arguments),t instanceof Date||bt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Cn(t){if(ve(1,arguments),!Io(t)&&typeof t!="number")return!1;var e=ke(t);return!isNaN(Number(e))}function oo(t){ve(1,arguments);var e=ke(t),s=Math.floor(e.getMonth()/3)+1;return s}function Bo(t,e){var s;ve(1,arguments);var o=t||{},a=ke(o.start),l=ke(o.end),i=l.getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var u=[],h=a;h.setHours(0,0,0,0);var p=Number((s=e==null?void 0:e.step)!==null&&s!==void 0?s:1);if(p<1||isNaN(p))throw new RangeError("`options.step` must be a number greater than 1");for(;h.getTime()<=i;)u.push(ke(h)),h.setDate(h.getDate()+p),h.setHours(0,0,0,0);return u}function Dn(t){ve(1,arguments);var e=ke(t),s=e.getMonth(),o=s-s%3;return e.setMonth(o,1),e.setHours(0,0,0,0),e}function z4(t){ve(1,arguments);var e=t||{},s=ke(e.start),o=ke(e.end),a=o.getTime();if(!(s.getTime()<=a))throw new RangeError("Invalid interval");var l=Dn(s),i=Dn(o);a=i.getTime();for(var u=[],h=l;h.getTime()<=a;)u.push(ke(h)),h=E4(h,1);return u}function L4(t){ve(1,arguments);var e=ke(t),s=e.getFullYear();return e.setFullYear(s+1,0,0),e.setHours(23,59,59,999),e}function W4(t){ve(1,arguments);var e=ke(t),s=new Date(0);return s.setFullYear(e.getFullYear(),0,1),s.setHours(0,0,0,0),s}function H4(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=At(),_=$e((s=(o=(a=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:$.weekStartsOn)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&s!==void 0?s:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var C=ke(t),D=C.getDay(),S=(D<_?-7:0)+6-(D-_);return C.setDate(C.getDate()+S),C.setHours(23,59,59,999),C}function ao(t){ve(1,arguments);var e=ke(t),s=e.getMonth(),o=s-s%3+3;return e.setMonth(o,0),e.setHours(23,59,59,999),e}function xo(t,e){ve(2,arguments);var s=$e(e);return V4(t,-s)}var Q4=864e5;function X4(t){ve(1,arguments);var e=ke(t),s=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var o=e.getTime(),a=s-o;return Math.floor(a/Q4)+1}function cn(t){ve(1,arguments);var e=1,s=ke(t),o=s.getUTCDay(),a=(o<e?7:0)+o-e;return s.setUTCDate(s.getUTCDate()-a),s.setUTCHours(0,0,0,0),s}function No(t){ve(1,arguments);var e=ke(t),s=e.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(s+1,0,4),o.setUTCHours(0,0,0,0);var a=cn(o),l=new Date(0);l.setUTCFullYear(s,0,4),l.setUTCHours(0,0,0,0);var i=cn(l);return e.getTime()>=a.getTime()?s+1:e.getTime()>=i.getTime()?s:s-1}function K4(t){ve(1,arguments);var e=No(t),s=new Date(0);s.setUTCFullYear(e,0,4),s.setUTCHours(0,0,0,0);var o=cn(s);return o}var Z4=6048e5;function Eo(t){ve(1,arguments);var e=ke(t),s=cn(e).getTime()-K4(e).getTime();return Math.round(s/Z4)+1}function Jt(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=At(),_=$e((s=(o=(a=(l=e==null?void 0:e.weekStartsOn)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:$.weekStartsOn)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&s!==void 0?s:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var C=ke(t),D=C.getUTCDay(),S=(D<_?7:0)+D-_;return C.setUTCDate(C.getUTCDate()-S),C.setUTCHours(0,0,0,0),C}function Ys(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=ke(t),_=$.getUTCFullYear(),C=At(),D=$e((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&o!==void 0?o:(h=C.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setUTCFullYear(_+1,0,D),S.setUTCHours(0,0,0,0);var N=Jt(S,e),G=new Date(0);G.setUTCFullYear(_,0,D),G.setUTCHours(0,0,0,0);var U=Jt(G,e);return $.getTime()>=N.getTime()?_+1:$.getTime()>=U.getTime()?_:_-1}function G4(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=At(),_=$e((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:$.firstWeekContainsDate)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:1),C=Ys(t,e),D=new Date(0);D.setUTCFullYear(C,0,_),D.setUTCHours(0,0,0,0);var S=Jt(D,e);return S}var J4=6048e5;function qo(t,e){ve(1,arguments);var s=ke(t),o=Jt(s,e).getTime()-G4(s,e).getTime();return Math.round(o/J4)+1}function xe(t,e){for(var s=t<0?"-":"",o=Math.abs(t).toString();o.length<e;)o="0"+o;return s+o}var e6={y:function(e,s){var o=e.getUTCFullYear(),a=o>0?o:1-o;return xe(s==="yy"?a%100:a,s.length)},M:function(e,s){var o=e.getUTCMonth();return s==="M"?String(o+1):xe(o+1,2)},d:function(e,s){return xe(e.getUTCDate(),s.length)},a:function(e,s){var o=e.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(e,s){return xe(e.getUTCHours()%12||12,s.length)},H:function(e,s){return xe(e.getUTCHours(),s.length)},m:function(e,s){return xe(e.getUTCMinutes(),s.length)},s:function(e,s){return xe(e.getUTCSeconds(),s.length)},S:function(e,s){var o=s.length,a=e.getUTCMilliseconds(),l=Math.floor(a*Math.pow(10,o-3));return xe(l,s.length)}};const It=e6;var an={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},t6={G:function(e,s,o){var a=e.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"});case"GGGGG":return o.era(a,{width:"narrow"});case"GGGG":default:return o.era(a,{width:"wide"})}},y:function(e,s,o){if(s==="yo"){var a=e.getUTCFullYear(),l=a>0?a:1-a;return o.ordinalNumber(l,{unit:"year"})}return It.y(e,s)},Y:function(e,s,o,a){var l=Ys(e,a),i=l>0?l:1-l;if(s==="YY"){var u=i%100;return xe(u,2)}return s==="Yo"?o.ordinalNumber(i,{unit:"year"}):xe(i,s.length)},R:function(e,s){var o=No(e);return xe(o,s.length)},u:function(e,s){var o=e.getUTCFullYear();return xe(o,s.length)},Q:function(e,s,o){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return xe(a,2);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,s,o){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return xe(a,2);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,s,o){var a=e.getUTCMonth();switch(s){case"M":case"MM":return It.M(e,s);case"Mo":return o.ordinalNumber(a+1,{unit:"month"});case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(a,{width:"wide",context:"formatting"})}},L:function(e,s,o){var a=e.getUTCMonth();switch(s){case"L":return String(a+1);case"LL":return xe(a+1,2);case"Lo":return o.ordinalNumber(a+1,{unit:"month"});case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(a,{width:"wide",context:"standalone"})}},w:function(e,s,o,a){var l=qo(e,a);return s==="wo"?o.ordinalNumber(l,{unit:"week"}):xe(l,s.length)},I:function(e,s,o){var a=Eo(e);return s==="Io"?o.ordinalNumber(a,{unit:"week"}):xe(a,s.length)},d:function(e,s,o){return s==="do"?o.ordinalNumber(e.getUTCDate(),{unit:"date"}):It.d(e,s)},D:function(e,s,o){var a=X4(e);return s==="Do"?o.ordinalNumber(a,{unit:"dayOfYear"}):xe(a,s.length)},E:function(e,s,o){var a=e.getUTCDay();switch(s){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"});case"EEEE":default:return o.day(a,{width:"wide",context:"formatting"})}},e:function(e,s,o,a){var l=e.getUTCDay(),i=(l-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return xe(i,2);case"eo":return o.ordinalNumber(i,{unit:"day"});case"eee":return o.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(l,{width:"short",context:"formatting"});case"eeee":default:return o.day(l,{width:"wide",context:"formatting"})}},c:function(e,s,o,a){var l=e.getUTCDay(),i=(l-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return xe(i,s.length);case"co":return o.ordinalNumber(i,{unit:"day"});case"ccc":return o.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(l,{width:"narrow",context:"standalone"});case"cccccc":return o.day(l,{width:"short",context:"standalone"});case"cccc":default:return o.day(l,{width:"wide",context:"standalone"})}},i:function(e,s,o){var a=e.getUTCDay(),l=a===0?7:a;switch(s){case"i":return String(l);case"ii":return xe(l,s.length);case"io":return o.ordinalNumber(l,{unit:"day"});case"iii":return o.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(a,{width:"short",context:"formatting"});case"iiii":default:return o.day(a,{width:"wide",context:"formatting"})}},a:function(e,s,o){var a=e.getUTCHours(),l=a/12>=1?"pm":"am";switch(s){case"a":case"aa":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,s,o){var a=e.getUTCHours(),l;switch(a===12?l=an.noon:a===0?l=an.midnight:l=a/12>=1?"pm":"am",s){case"b":case"bb":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,s,o){var a=e.getUTCHours(),l;switch(a>=17?l=an.evening:a>=12?l=an.afternoon:a>=4?l=an.morning:l=an.night,s){case"B":case"BB":case"BBB":return o.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,s,o){if(s==="ho"){var a=e.getUTCHours()%12;return a===0&&(a=12),o.ordinalNumber(a,{unit:"hour"})}return It.h(e,s)},H:function(e,s,o){return s==="Ho"?o.ordinalNumber(e.getUTCHours(),{unit:"hour"}):It.H(e,s)},K:function(e,s,o){var a=e.getUTCHours()%12;return s==="Ko"?o.ordinalNumber(a,{unit:"hour"}):xe(a,s.length)},k:function(e,s,o){var a=e.getUTCHours();return a===0&&(a=24),s==="ko"?o.ordinalNumber(a,{unit:"hour"}):xe(a,s.length)},m:function(e,s,o){return s==="mo"?o.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):It.m(e,s)},s:function(e,s,o){return s==="so"?o.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):It.s(e,s)},S:function(e,s){return It.S(e,s)},X:function(e,s,o,a){var l=a._originalDate||e,i=l.getTimezoneOffset();if(i===0)return"Z";switch(s){case"X":return io(i);case"XXXX":case"XX":return Qt(i);case"XXXXX":case"XXX":default:return Qt(i,":")}},x:function(e,s,o,a){var l=a._originalDate||e,i=l.getTimezoneOffset();switch(s){case"x":return io(i);case"xxxx":case"xx":return Qt(i);case"xxxxx":case"xxx":default:return Qt(i,":")}},O:function(e,s,o,a){var l=a._originalDate||e,i=l.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+lo(i,":");case"OOOO":default:return"GMT"+Qt(i,":")}},z:function(e,s,o,a){var l=a._originalDate||e,i=l.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+lo(i,":");case"zzzz":default:return"GMT"+Qt(i,":")}},t:function(e,s,o,a){var l=a._originalDate||e,i=Math.floor(l.getTime()/1e3);return xe(i,s.length)},T:function(e,s,o,a){var l=a._originalDate||e,i=l.getTime();return xe(i,s.length)}};function lo(t,e){var s=t>0?"-":"+",o=Math.abs(t),a=Math.floor(o/60),l=o%60;if(l===0)return s+String(a);var i=e||"";return s+String(a)+i+xe(l,2)}function io(t,e){if(t%60===0){var s=t>0?"-":"+";return s+xe(Math.abs(t)/60,2)}return Qt(t,e)}function Qt(t,e){var s=e||"",o=t>0?"-":"+",a=Math.abs(t),l=xe(Math.floor(a/60),2),i=xe(a%60,2);return o+l+s+i}const n6=t6;var ro=function(e,s){switch(e){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},zo=function(e,s){switch(e){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},s6=function(e,s){var o=e.match(/(P+)(p+)?/)||[],a=o[1],l=o[2];if(!l)return ro(e,s);var i;switch(a){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",ro(a,s)).replace("{{time}}",zo(l,s))},o6={p:zo,P:s6};const ws=o6;var a6=["D","DD"],l6=["YY","YYYY"];function Lo(t){return a6.indexOf(t)!==-1}function Wo(t){return l6.indexOf(t)!==-1}function Hn(t,e,s){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var i6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r6=function(e,s,o){var a,l=i6[e];return typeof l=="string"?a=l:s===1?a=l.one:a=l.other.replace("{{count}}",s.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+a:a+" ago":a};const d6=r6;function is(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=e.width?String(e.width):t.defaultWidth,o=t.formats[s]||t.formats[t.defaultWidth];return o}}var u6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},h6={date:is({formats:u6,defaultWidth:"full"}),time:is({formats:c6,defaultWidth:"full"}),dateTime:is({formats:m6,defaultWidth:"full"})};const p6=h6;var _6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},v6=function(e,s,o,a){return _6[e]};const f6=v6;function yn(t){return function(e,s){var o=s!=null&&s.context?String(s.context):"standalone",a;if(o==="formatting"&&t.formattingValues){var l=t.defaultFormattingWidth||t.defaultWidth,i=s!=null&&s.width?String(s.width):l;a=t.formattingValues[i]||t.formattingValues[l]}else{var u=t.defaultWidth,h=s!=null&&s.width?String(s.width):t.defaultWidth;a=t.values[h]||t.values[u]}var p=t.argumentCallback?t.argumentCallback(e):e;return a[p]}}var b6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},g6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},y6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},w6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},C6=function(e,s){var o=Number(e),a=o%100;if(a>20||a<10)switch(a%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},F6={ordinalNumber:C6,era:yn({values:b6,defaultWidth:"wide"}),quarter:yn({values:g6,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:yn({values:y6,defaultWidth:"wide"}),day:yn({values:k6,defaultWidth:"wide"}),dayPeriod:yn({values:$6,defaultWidth:"wide",formattingValues:w6,defaultFormattingWidth:"wide"})};const T6=F6;function kn(t){return function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],l=e.match(a);if(!l)return null;var i=l[0],u=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?P6(u,function(_){return _.test(i)}):D6(u,function(_){return _.test(i)}),p;p=t.valueCallback?t.valueCallback(h):h,p=s.valueCallback?s.valueCallback(p):p;var $=e.slice(i.length);return{value:p,rest:$}}}function D6(t,e){for(var s in t)if(t.hasOwnProperty(s)&&e(t[s]))return s}function P6(t,e){for(var s=0;s<t.length;s++)if(e(t[s]))return s}function S6(t){return function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.match(t.matchPattern);if(!o)return null;var a=o[0],l=e.match(t.parsePattern);if(!l)return null;var i=t.valueCallback?t.valueCallback(l[0]):l[0];i=s.valueCallback?s.valueCallback(i):i;var u=e.slice(a.length);return{value:i,rest:u}}}var O6=/^(\d+)(th|st|nd|rd)?/i,A6=/\d+/i,M6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j6={any:[/^b/i,/^(a|c)/i]},R6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U6={any:[/1/i,/2/i,/3/i,/4/i]},V6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Y6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},N6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},E6={ordinalNumber:S6({matchPattern:O6,parsePattern:A6,valueCallback:function(e){return parseInt(e,10)}}),era:kn({matchPatterns:M6,defaultMatchWidth:"wide",parsePatterns:j6,defaultParseWidth:"any"}),quarter:kn({matchPatterns:R6,defaultMatchWidth:"wide",parsePatterns:U6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kn({matchPatterns:V6,defaultMatchWidth:"wide",parsePatterns:Y6,defaultParseWidth:"any"}),day:kn({matchPatterns:I6,defaultMatchWidth:"wide",parsePatterns:B6,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:x6,defaultMatchWidth:"any",parsePatterns:N6,defaultParseWidth:"any"})};const q6=E6;var z6={code:"en-US",formatDistance:d6,formatLong:p6,formatRelative:f6,localize:T6,match:q6,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Ho=z6;var L6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,H6=/^'([^]*?)'?$/,Q6=/''/g,X6=/[a-zA-Z]/;function Nt(t,e,s){var o,a,l,i,u,h,p,$,_,C,D,S,N,G,U,V,ee,P;ve(2,arguments);var L=String(e),W=At(),z=(o=(a=s==null?void 0:s.locale)!==null&&a!==void 0?a:W.locale)!==null&&o!==void 0?o:Ho,pe=$e((l=(i=(u=(h=s==null?void 0:s.firstWeekContainsDate)!==null&&h!==void 0?h:s==null||(p=s.locale)===null||p===void 0||($=p.options)===null||$===void 0?void 0:$.firstWeekContainsDate)!==null&&u!==void 0?u:W.firstWeekContainsDate)!==null&&i!==void 0?i:(_=W.locale)===null||_===void 0||(C=_.options)===null||C===void 0?void 0:C.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(pe>=1&&pe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var te=$e((D=(S=(N=(G=s==null?void 0:s.weekStartsOn)!==null&&G!==void 0?G:s==null||(U=s.locale)===null||U===void 0||(V=U.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&N!==void 0?N:W.weekStartsOn)!==null&&S!==void 0?S:(ee=W.locale)===null||ee===void 0||(P=ee.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&D!==void 0?D:0);if(!(te>=0&&te<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!z.localize)throw new RangeError("locale must contain localize property");if(!z.formatLong)throw new RangeError("locale must contain formatLong property");var k=ke(t);if(!Cn(k))throw new RangeError("Invalid time value");var A=Wn(k),X=xo(k,A),ie={firstWeekContainsDate:pe,weekStartsOn:te,locale:z,_originalDate:k},Y=L.match(W6).map(function(y){var M=y[0];if(M==="p"||M==="P"){var j=ws[M];return j(y,z.formatLong)}return y}).join("").match(L6).map(function(y){if(y==="''")return"'";var M=y[0];if(M==="'")return K6(y);var j=n6[M];if(j)return!(s!=null&&s.useAdditionalWeekYearTokens)&&Wo(y)&&Hn(y,e,String(t)),!(s!=null&&s.useAdditionalDayOfYearTokens)&&Lo(y)&&Hn(y,e,String(t)),j(X,y,z.localize,ie);if(M.match(X6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return y}).join("");return Y}function K6(t){var e=t.match(H6);return e?e[1].replace(Q6,"'"):t}function Z6(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}function G6(t){ve(1,arguments);var e=ke(t),s=e.getDay();return s}function J6(t){ve(1,arguments);var e=ke(t),s=e.getFullYear(),o=e.getMonth(),a=new Date(0);return a.setFullYear(s,o+1,0),a.setHours(0,0,0,0),a.getDate()}function $t(t){ve(1,arguments);var e=ke(t),s=e.getHours();return s}var eT=6048e5;function tT(t){ve(1,arguments);var e=ke(t),s=Ln(e).getTime()-B4(e).getTime();return Math.round(s/eT)+1}function Ot(t){ve(1,arguments);var e=ke(t),s=e.getMinutes();return s}function Ue(t){ve(1,arguments);var e=ke(t),s=e.getMonth();return s}function mn(t){ve(1,arguments);var e=ke(t),s=e.getSeconds();return s}function nT(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=ke(t),_=$.getFullYear(),C=At(),D=$e((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&o!==void 0?o:(h=C.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setFullYear(_+1,0,D),S.setHours(0,0,0,0);var N=Gt(S,e),G=new Date(0);G.setFullYear(_,0,D),G.setHours(0,0,0,0);var U=Gt(G,e);return $.getTime()>=N.getTime()?_+1:$.getTime()>=U.getTime()?_:_-1}function sT(t,e){var s,o,a,l,i,u,h,p;ve(1,arguments);var $=At(),_=$e((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:$.firstWeekContainsDate)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:1),C=nT(t,e),D=new Date(0);D.setFullYear(C,0,_),D.setHours(0,0,0,0);var S=Gt(D,e);return S}var oT=6048e5;function aT(t,e){ve(1,arguments);var s=ke(t),o=Gt(s,e).getTime()-sT(s,e).getTime();return Math.round(o/oT)+1}function Ae(t){return ve(1,arguments),ke(t).getFullYear()}function Pn(t,e){ve(2,arguments);var s=ke(t),o=ke(e);return s.getTime()>o.getTime()}function Sn(t,e){ve(2,arguments);var s=ke(t),o=ke(e);return s.getTime()<o.getTime()}function un(t,e){ve(2,arguments);var s=ke(t),o=ke(e);return s.getTime()===o.getTime()}function uo(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,o=new Array(e);s<e;s++)o[s]=t[s];return o}function lT(t,e){if(t){if(typeof t=="string")return uo(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return uo(t,e)}}function co(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=lT(t))||e&&t&&typeof t.length=="number"){s&&(t=s);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(p){throw p},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,i=!1,u;return{s:function(){s=s.call(t)},n:function(){var p=s.next();return l=p.done,p},e:function(p){i=!0,u=p},f:function(){try{!l&&s.return!=null&&s.return()}finally{if(i)throw u}}}}function _e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cs(t,e){return Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},Cs(t,e)}function Ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cs(t,e)}function Qn(t){return Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Qn(t)}function Qo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qo=function(){return!!t})()}function iT(t,e){if(e&&(bt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _e(t)}function Ye(t){var e=Qo();return function(){var o=Qn(t),a;if(e){var l=Qn(this).constructor;a=Reflect.construct(o,arguments,l)}else a=o.apply(this,arguments);return iT(this,a)}}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rT(t,e){if(bt(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var o=s.call(t,e||"default");if(bt(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xo(t){var e=rT(t,"string");return bt(e)=="symbol"?e:String(e)}function mo(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Xo(o.key),o)}}function Re(t,e,s){return e&&mo(t.prototype,e),s&&mo(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function he(t,e,s){return e=Xo(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var dT=10,Ko=function(){function t(){je(this,t),he(this,"priority",void 0),he(this,"subPriority",0)}return Re(t,[{key:"validate",value:function(s,o){return!0}}]),t}(),uT=function(t){Ve(s,t);var e=Ye(s);function s(o,a,l,i,u){var h;return je(this,s),h=e.call(this),h.value=o,h.validateValue=a,h.setValue=l,h.priority=i,u&&(h.subPriority=u),h}return Re(s,[{key:"validate",value:function(a,l){return this.validateValue(a,this.value,l)}},{key:"set",value:function(a,l,i){return this.setValue(a,l,this.value,i)}}]),s}(Ko),cT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",dT),he(_e(o),"subPriority",-1),o}return Re(s,[{key:"set",value:function(a,l){if(l.timestampIsSet)return a;var i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}}]),s}(Ko),Be=function(){function t(){je(this,t),he(this,"incompatibleTokens",void 0),he(this,"priority",void 0),he(this,"subPriority",void 0)}return Re(t,[{key:"run",value:function(s,o,a,l){var i=this.parse(s,o,a,l);return i?{setter:new uT(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(s,o,a){return!0}}]),t}(),mT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",140),he(_e(o),"incompatibleTokens",["R","u","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})||i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"})}}},{key:"set",value:function(a,l,i){return l.era=i,a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),Xe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Dt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ke(t,e){return t&&{value:e(t.value),rest:t.rest}}function We(t,e){var s=e.match(t);return s?{value:parseInt(s[0],10),rest:e.slice(s[0].length)}:null}function Pt(t,e){var s=e.match(t);if(!s)return null;if(s[0]==="Z")return{value:0,rest:e.slice(1)};var o=s[1]==="+"?1:-1,a=s[2]?parseInt(s[2],10):0,l=s[3]?parseInt(s[3],10):0,i=s[5]?parseInt(s[5],10):0;return{value:o*(a*Vs+l*Us+i*q4),rest:e.slice(s[0].length)}}function Zo(t){return We(Xe.anyDigitsSigned,t)}function He(t,e){switch(t){case 1:return We(Xe.singleDigit,e);case 2:return We(Xe.twoDigits,e);case 3:return We(Xe.threeDigits,e);case 4:return We(Xe.fourDigits,e);default:return We(new RegExp("^\\d{1,"+t+"}"),e)}}function Xn(t,e){switch(t){case 1:return We(Xe.singleDigitSigned,e);case 2:return We(Xe.twoDigitsSigned,e);case 3:return We(Xe.threeDigitsSigned,e);case 4:return We(Xe.fourDigitsSigned,e);default:return We(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Is(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Go(t,e){var s=e>0,o=s?e:1-e,a;if(o<=50)a=t||100;else{var l=o+50,i=Math.floor(l/100)*100,u=t>=l%100;a=t+i-(u?100:0)}return s?a:1-a}function Jo(t){return t%400===0||t%4===0&&t%100!==0}var hT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="yy"}};switch(l){case"y":return Ke(He(4,a),u);case"yo":return Ke(i.ordinalNumber(a,{unit:"year"}),u);default:return Ke(He(l.length,a),u)}}},{key:"validate",value:function(a,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(a,l,i){var u=a.getUTCFullYear();if(i.isTwoDigitYear){var h=Go(i.year,u);return a.setUTCFullYear(h,0,1),a.setUTCHours(0,0,0,0),a}var p=!("era"in l)||l.era===1?i.year:1-i.year;return a.setUTCFullYear(p,0,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),pT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){var u=function(p){return{year:p,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return Ke(He(4,a),u);case"Yo":return Ke(i.ordinalNumber(a,{unit:"year"}),u);default:return Ke(He(l.length,a),u)}}},{key:"validate",value:function(a,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(a,l,i,u){var h=Ys(a,u);if(i.isTwoDigitYear){var p=Go(i.year,h);return a.setUTCFullYear(p,0,u.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Jt(a,u)}var $=!("era"in l)||l.era===1?i.year:1-i.year;return a.setUTCFullYear($,0,u.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Jt(a,u)}}]),s}(Be),_T=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l){return Xn(l==="R"?4:l.length,a)}},{key:"set",value:function(a,l,i){var u=new Date(0);return u.setUTCFullYear(i,0,4),u.setUTCHours(0,0,0,0),cn(u)}}]),s}(Be),vT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",130),he(_e(o),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l){return Xn(l==="u"?4:l.length,a)}},{key:"set",value:function(a,l,i){return a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),fT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",120),he(_e(o),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"Q":case"QQ":return He(l.length,a);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})||i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,l){return l>=1&&l<=4}},{key:"set",value:function(a,l,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),bT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",120),he(_e(o),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"q":case"qq":return He(l.length,a);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})||i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,l){return l>=1&&l<=4}},{key:"set",value:function(a,l,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),gT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),he(_e(o),"priority",110),o}return Re(s,[{key:"parse",value:function(a,l,i){var u=function(p){return p-1};switch(l){case"M":return Ke(We(Xe.month,a),u);case"MM":return Ke(He(2,a),u);case"Mo":return Ke(i.ordinalNumber(a,{unit:"month"}),u);case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})||i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,l){return l>=0&&l<=11}},{key:"set",value:function(a,l,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be),yT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",110),he(_e(o),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){var u=function(p){return p-1};switch(l){case"L":return Ke(We(Xe.month,a),u);case"LL":return Ke(He(2,a),u);case"Lo":return Ke(i.ordinalNumber(a,{unit:"month"}),u);case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})||i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,l){return l>=0&&l<=11}},{key:"set",value:function(a,l,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),s}(Be);function kT(t,e,s){ve(2,arguments);var o=ke(t),a=$e(e),l=qo(o,s)-a;return o.setUTCDate(o.getUTCDate()-l*7),o}var $T=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",100),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"w":return We(Xe.week,a);case"wo":return i.ordinalNumber(a,{unit:"week"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=1&&l<=53}},{key:"set",value:function(a,l,i,u){return Jt(kT(a,i,u),u)}}]),s}(Be);function wT(t,e){ve(2,arguments);var s=ke(t),o=$e(e),a=Eo(s)-o;return s.setUTCDate(s.getUTCDate()-a*7),s}var CT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",100),he(_e(o),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"I":return We(Xe.week,a);case"Io":return i.ordinalNumber(a,{unit:"week"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=1&&l<=53}},{key:"set",value:function(a,l,i){return cn(wT(a,i))}}]),s}(Be),FT=[31,28,31,30,31,30,31,31,30,31,30,31],TT=[31,29,31,30,31,30,31,31,30,31,30,31],DT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"subPriority",1),he(_e(o),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"d":return We(Xe.date,a);case"do":return i.ordinalNumber(a,{unit:"date"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){var i=a.getUTCFullYear(),u=Jo(i),h=a.getUTCMonth();return u?l>=1&&l<=TT[h]:l>=1&&l<=FT[h]}},{key:"set",value:function(a,l,i){return a.setUTCDate(i),a.setUTCHours(0,0,0,0),a}}]),s}(Be),PT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"subpriority",1),he(_e(o),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"D":case"DD":return We(Xe.dayOfYear,a);case"Do":return i.ordinalNumber(a,{unit:"date"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){var i=a.getUTCFullYear(),u=Jo(i);return u?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(a,l,i){return a.setUTCMonth(0,i),a.setUTCHours(0,0,0,0),a}}]),s}(Be);function Bs(t,e,s){var o,a,l,i,u,h,p,$;ve(2,arguments);var _=At(),C=$e((o=(a=(l=(i=s==null?void 0:s.weekStartsOn)!==null&&i!==void 0?i:s==null||(u=s.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&a!==void 0?a:(p=_.locale)===null||p===void 0||($=p.options)===null||$===void 0?void 0:$.weekStartsOn)!==null&&o!==void 0?o:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=ke(t),S=$e(e),N=D.getUTCDay(),G=S%7,U=(G+7)%7,V=(U<C?7:0)+S-N;return D.setUTCDate(D.getUTCDate()+V),D}var ST=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["D","i","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,l){return l>=0&&l<=6}},{key:"set",value:function(a,l,i,u){return a=Bs(a,i,u),a.setUTCHours(0,0,0,0),a}}]),s}(Be),OT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i,u){var h=function($){var _=Math.floor(($-1)/7)*7;return($+u.weekStartsOn+6)%7+_};switch(l){case"e":case"ee":return Ke(He(l.length,a),h);case"eo":return Ke(i.ordinalNumber(a,{unit:"day"}),h);case"eee":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,l){return l>=0&&l<=6}},{key:"set",value:function(a,l,i,u){return a=Bs(a,i,u),a.setUTCHours(0,0,0,0),a}}]),s}(Be),AT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i,u){var h=function($){var _=Math.floor(($-1)/7)*7;return($+u.weekStartsOn+6)%7+_};switch(l){case"c":case"cc":return Ke(He(l.length,a),h);case"co":return Ke(i.ordinalNumber(a,{unit:"day"}),h);case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(a,{width:"wide",context:"standalone"})||i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,l){return l>=0&&l<=6}},{key:"set",value:function(a,l,i,u){return a=Bs(a,i,u),a.setUTCHours(0,0,0,0),a}}]),s}(Be);function MT(t,e){ve(2,arguments);var s=$e(e);s%7===0&&(s=s-7);var o=1,a=ke(t),l=a.getUTCDay(),i=s%7,u=(i+7)%7,h=(u<o?7:0)+s-l;return a.setUTCDate(a.getUTCDate()+h),a}var jT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",90),he(_e(o),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){var u=function(p){return p===0?7:p};switch(l){case"i":case"ii":return He(l.length,a);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return Ke(i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),u);case"iiiii":return Ke(i.day(a,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Ke(i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),u);case"iiii":default:return Ke(i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(a,l){return l>=1&&l<=7}},{key:"set",value:function(a,l,i){return a=MT(a,i),a.setUTCHours(0,0,0,0),a}}]),s}(Be),RT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["b","B","H","k","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"a":case"aa":case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,l,i){return a.setUTCHours(Is(i),0,0,0),a}}]),s}(Be),UT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["a","B","H","k","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"b":case"bb":case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,l,i){return a.setUTCHours(Is(i),0,0,0),a}}]),s}(Be),VT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",80),he(_e(o),"incompatibleTokens",["a","b","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,l,i){return a.setUTCHours(Is(i),0,0,0),a}}]),s}(Be),YT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["H","K","k","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"h":return We(Xe.hour12h,a);case"ho":return i.ordinalNumber(a,{unit:"hour"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=1&&l<=12}},{key:"set",value:function(a,l,i){var u=a.getUTCHours()>=12;return u&&i<12?a.setUTCHours(i+12,0,0,0):!u&&i===12?a.setUTCHours(0,0,0,0):a.setUTCHours(i,0,0,0),a}}]),s}(Be),IT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["a","b","h","K","k","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"H":return We(Xe.hour23h,a);case"Ho":return i.ordinalNumber(a,{unit:"hour"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=0&&l<=23}},{key:"set",value:function(a,l,i){return a.setUTCHours(i,0,0,0),a}}]),s}(Be),BT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["h","H","k","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"K":return We(Xe.hour11h,a);case"Ko":return i.ordinalNumber(a,{unit:"hour"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=0&&l<=11}},{key:"set",value:function(a,l,i){var u=a.getUTCHours()>=12;return u&&i<12?a.setUTCHours(i+12,0,0,0):a.setUTCHours(i,0,0,0),a}}]),s}(Be),xT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",70),he(_e(o),"incompatibleTokens",["a","b","h","H","K","t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"k":return We(Xe.hour24h,a);case"ko":return i.ordinalNumber(a,{unit:"hour"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=1&&l<=24}},{key:"set",value:function(a,l,i){var u=i<=24?i%24:i;return a.setUTCHours(u,0,0,0),a}}]),s}(Be),NT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",60),he(_e(o),"incompatibleTokens",["t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"m":return We(Xe.minute,a);case"mo":return i.ordinalNumber(a,{unit:"minute"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=0&&l<=59}},{key:"set",value:function(a,l,i){return a.setUTCMinutes(i,0,0),a}}]),s}(Be),ET=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",50),he(_e(o),"incompatibleTokens",["t","T"]),o}return Re(s,[{key:"parse",value:function(a,l,i){switch(l){case"s":return We(Xe.second,a);case"so":return i.ordinalNumber(a,{unit:"second"});default:return He(l.length,a)}}},{key:"validate",value:function(a,l){return l>=0&&l<=59}},{key:"set",value:function(a,l,i){return a.setUTCSeconds(i,0),a}}]),s}(Be),qT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",30),he(_e(o),"incompatibleTokens",["t","T"]),o}return Re(s,[{key:"parse",value:function(a,l){var i=function(h){return Math.floor(h*Math.pow(10,-l.length+3))};return Ke(He(l.length,a),i)}},{key:"set",value:function(a,l,i){return a.setUTCMilliseconds(i),a}}]),s}(Be),zT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",10),he(_e(o),"incompatibleTokens",["t","T","x"]),o}return Re(s,[{key:"parse",value:function(a,l){switch(l){case"X":return Pt(Dt.basicOptionalMinutes,a);case"XX":return Pt(Dt.basic,a);case"XXXX":return Pt(Dt.basicOptionalSeconds,a);case"XXXXX":return Pt(Dt.extendedOptionalSeconds,a);case"XXX":default:return Pt(Dt.extended,a)}}},{key:"set",value:function(a,l,i){return l.timestampIsSet?a:new Date(a.getTime()-i)}}]),s}(Be),LT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",10),he(_e(o),"incompatibleTokens",["t","T","X"]),o}return Re(s,[{key:"parse",value:function(a,l){switch(l){case"x":return Pt(Dt.basicOptionalMinutes,a);case"xx":return Pt(Dt.basic,a);case"xxxx":return Pt(Dt.basicOptionalSeconds,a);case"xxxxx":return Pt(Dt.extendedOptionalSeconds,a);case"xxx":default:return Pt(Dt.extended,a)}}},{key:"set",value:function(a,l,i){return l.timestampIsSet?a:new Date(a.getTime()-i)}}]),s}(Be),WT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",40),he(_e(o),"incompatibleTokens","*"),o}return Re(s,[{key:"parse",value:function(a){return Zo(a)}},{key:"set",value:function(a,l,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),s}(Be),HT=function(t){Ve(s,t);var e=Ye(s);function s(){var o;je(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l)),he(_e(o),"priority",20),he(_e(o),"incompatibleTokens","*"),o}return Re(s,[{key:"parse",value:function(a){return Zo(a)}},{key:"set",value:function(a,l,i){return[new Date(i),{timestampIsSet:!0}]}}]),s}(Be),QT={G:new mT,y:new hT,Y:new pT,R:new _T,u:new vT,Q:new fT,q:new bT,M:new gT,L:new yT,w:new $T,I:new CT,d:new DT,D:new PT,E:new ST,e:new OT,c:new AT,i:new jT,a:new RT,b:new UT,B:new VT,h:new YT,H:new IT,K:new BT,k:new xT,m:new NT,s:new ET,S:new qT,X:new zT,x:new LT,t:new WT,T:new HT},XT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZT=/^'([^]*?)'?$/,GT=/''/g,JT=/\S/,eD=/[a-zA-Z]/;function Fs(t,e,s,o){var a,l,i,u,h,p,$,_,C,D,S,N,G,U,V,ee,P,L;ve(3,arguments);var W=String(t),z=String(e),pe=At(),te=(a=(l=o==null?void 0:o.locale)!==null&&l!==void 0?l:pe.locale)!==null&&a!==void 0?a:Ho;if(!te.match)throw new RangeError("locale must contain match property");var k=$e((i=(u=(h=(p=o==null?void 0:o.firstWeekContainsDate)!==null&&p!==void 0?p:o==null||($=o.locale)===null||$===void 0||(_=$.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&h!==void 0?h:pe.firstWeekContainsDate)!==null&&u!==void 0?u:(C=pe.locale)===null||C===void 0||(D=C.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=$e((S=(N=(G=(U=o==null?void 0:o.weekStartsOn)!==null&&U!==void 0?U:o==null||(V=o.locale)===null||V===void 0||(ee=V.options)===null||ee===void 0?void 0:ee.weekStartsOn)!==null&&G!==void 0?G:pe.weekStartsOn)!==null&&N!==void 0?N:(P=pe.locale)===null||P===void 0||(L=P.options)===null||L===void 0?void 0:L.weekStartsOn)!==null&&S!==void 0?S:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(z==="")return W===""?ke(s):new Date(NaN);var X={firstWeekContainsDate:k,weekStartsOn:A,locale:te},ie=[new cT],Y=z.match(KT).map(function(be){var Z=be[0];if(Z in ws){var Ce=ws[Z];return Ce(be,te.formatLong)}return be}).join("").match(XT),y=[],M=co(Y),j;try{var H=function(){var Z=j.value;!(o!=null&&o.useAdditionalWeekYearTokens)&&Wo(Z)&&Hn(Z,z,t),!(o!=null&&o.useAdditionalDayOfYearTokens)&&Lo(Z)&&Hn(Z,z,t);var Ce=Z[0],ge=QT[Ce];if(ge){var E=ge.incompatibleTokens;if(Array.isArray(E)){var ae=y.find(function(ue){return E.includes(ue.token)||ue.token===Ce});if(ae)throw new RangeError("The format string mustn't contain `".concat(ae.fullToken,"` and `").concat(Z,"` at the same time"))}else if(ge.incompatibleTokens==="*"&&y.length>0)throw new RangeError("The format string mustn't contain `".concat(Z,"` and any other token at the same time"));y.push({token:Ce,fullToken:Z});var Te=ge.run(W,Z,te.match,X);if(!Te)return{v:new Date(NaN)};ie.push(Te.setter),W=Te.rest}else{if(Ce.match(eD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ce+"`");if(Z==="''"?Z="'":Ce==="'"&&(Z=tD(Z)),W.indexOf(Z)===0)W=W.slice(Z.length);else return{v:new Date(NaN)}}};for(M.s();!(j=M.n()).done;){var v=H();if(bt(v)==="object")return v.v}}catch(be){M.e(be)}finally{M.f()}if(W.length>0&&JT.test(W))return new Date(NaN);var m=ie.map(function(be){return be.priority}).sort(function(be,Z){return Z-be}).filter(function(be,Z,Ce){return Ce.indexOf(be)===Z}).map(function(be){return ie.filter(function(Z){return Z.priority===be}).sort(function(Z,Ce){return Ce.subPriority-Z.subPriority})}).map(function(be){return be[0]}),O=ke(s);if(isNaN(O.getTime()))return new Date(NaN);var I=xo(O,Wn(O)),oe={},re=co(m),R;try{for(re.s();!(R=re.n()).done;){var g=R.value;if(!g.validate(I,X))return new Date(NaN);var fe=g.set(I,oe,X);Array.isArray(fe)?(I=fe[0],Z6(oe,fe[1])):I=fe}}catch(be){re.e(be)}finally{re.f()}return I}function tD(t){return t.match(ZT)[1].replace(GT,"'")}function ho(t,e){ve(2,arguments);var s=Dn(t),o=Dn(e);return s.getTime()===o.getTime()}function nD(t,e){ve(2,arguments);var s=$e(e);return jt(t,-s)}function sD(t,e){var s;ve(1,arguments);var o=$e((s=e==null?void 0:e.additionalDigits)!==null&&s!==void 0?s:2);if(o!==2&&o!==1&&o!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=iD(t),l;if(a.date){var i=rD(a.date,o);l=dD(i.restDateString,i.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var u=l.getTime(),h=0,p;if(a.time&&(h=uD(a.time),isNaN(h)))return new Date(NaN);if(a.timezone){if(p=cD(a.timezone),isNaN(p))return new Date(NaN)}else{var $=new Date(u+h),_=new Date(0);return _.setFullYear($.getUTCFullYear(),$.getUTCMonth(),$.getUTCDate()),_.setHours($.getUTCHours(),$.getUTCMinutes(),$.getUTCSeconds(),$.getUTCMilliseconds()),_}return new Date(u+h+p)}var In={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},oD=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,aD=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lD=/^([+-])(\d{2})(?::?(\d{2}))?$/;function iD(t){var e={},s=t.split(In.dateTimeDelimiter),o;if(s.length>2)return e;if(/:/.test(s[0])?o=s[0]:(e.date=s[0],o=s[1],In.timeZoneDelimiter.test(e.date)&&(e.date=t.split(In.timeZoneDelimiter)[0],o=t.substr(e.date.length,t.length))),o){var a=In.timezone.exec(o);a?(e.time=o.replace(a[1],""),e.timezone=a[1]):e.time=o}return e}function rD(t,e){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),o=t.match(s);if(!o)return{year:NaN,restDateString:""};var a=o[1]?parseInt(o[1]):null,l=o[2]?parseInt(o[2]):null;return{year:l===null?a:l*100,restDateString:t.slice((o[1]||o[2]).length)}}function dD(t,e){if(e===null)return new Date(NaN);var s=t.match(oD);if(!s)return new Date(NaN);var o=!!s[4],a=$n(s[1]),l=$n(s[2])-1,i=$n(s[3]),u=$n(s[4]),h=$n(s[5])-1;if(o)return vD(e,u,h)?mD(e,u,h):new Date(NaN);var p=new Date(0);return!pD(e,l,i)||!_D(e,a)?new Date(NaN):(p.setUTCFullYear(e,l,Math.max(a,i)),p)}function $n(t){return t?parseInt(t):1}function uD(t){var e=t.match(aD);if(!e)return NaN;var s=rs(e[1]),o=rs(e[2]),a=rs(e[3]);return fD(s,o,a)?s*Vs+o*Us+a*1e3:NaN}function rs(t){return t&&parseFloat(t.replace(",","."))||0}function cD(t){if(t==="Z")return 0;var e=t.match(lD);if(!e)return 0;var s=e[1]==="+"?-1:1,o=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return bD(o,a)?s*(o*Vs+a*Us):NaN}function mD(t,e,s){var o=new Date(0);o.setUTCFullYear(t,0,4);var a=o.getUTCDay()||7,l=(e-1)*7+s+1-a;return o.setUTCDate(o.getUTCDate()+l),o}var hD=[31,null,31,30,31,30,31,31,30,31,30,31];function ea(t){return t%400===0||t%4===0&&t%100!==0}function pD(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(hD[e]||(ea(t)?29:28))}function _D(t,e){return e>=1&&e<=(ea(t)?366:365)}function vD(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function fD(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function bD(t,e){return e>=0&&e<=59}function ta(t,e){ve(2,arguments);var s=ke(t),o=$e(e),a=s.getFullYear(),l=s.getDate(),i=new Date(0);i.setFullYear(a,o,15),i.setHours(0,0,0,0);var u=J6(i);return s.setMonth(o,Math.min(l,u)),s}function ze(t,e){if(ve(2,arguments),bt(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var s=ke(t);return isNaN(s.getTime())?new Date(NaN):(e.year!=null&&s.setFullYear(e.year),e.month!=null&&(s=ta(s,e.month)),e.date!=null&&s.setDate($e(e.date)),e.hours!=null&&s.setHours($e(e.hours)),e.minutes!=null&&s.setMinutes($e(e.minutes)),e.seconds!=null&&s.setSeconds($e(e.seconds)),e.milliseconds!=null&&s.setMilliseconds($e(e.milliseconds)),s)}function na(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return s.setHours(o),s}function xs(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return s.setMilliseconds(o),s}function sa(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return s.setMinutes(o),s}function Ns(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return s.setSeconds(o),s}function St(t,e){ve(2,arguments);var s=ke(t),o=$e(e);return isNaN(s.getTime())?new Date(NaN):(s.setFullYear(o),s)}function hn(t,e){ve(2,arguments);var s=$e(e);return kt(t,-s)}function gD(t,e){if(ve(2,arguments),!e||bt(e)!=="object")return new Date(NaN);var s=e.years?$e(e.years):0,o=e.months?$e(e.months):0,a=e.weeks?$e(e.weeks):0,l=e.days?$e(e.days):0,i=e.hours?$e(e.hours):0,u=e.minutes?$e(e.minutes):0,h=e.seconds?$e(e.seconds):0,p=hn(t,o+s*12),$=nD(p,l+a*7),_=u+i*60,C=h+_*60,D=C*1e3,S=new Date($.getTime()-D);return S}function oa(t,e){ve(2,arguments);var s=$e(e);return Rs(t,-s)}function fn(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),n("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),n("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),n("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}fn.compatConfig={MODE:3};function aa(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),n("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}aa.compatConfig={MODE:3};function Es(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Es.compatConfig={MODE:3};function qs(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}qs.compatConfig={MODE:3};function zs(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),n("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}zs.compatConfig={MODE:3};function Ls(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Ls.compatConfig={MODE:3};function Ws(){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[n("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}Ws.compatConfig={MODE:3};function Hs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var la={exports:{}};(function(t){function e(s){return s&&s.__esModule?s:{default:s}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(la);var yD=la.exports,Ts={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(o){if(o===null||o===!0||o===!1)return NaN;var a=Number(o);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}t.exports=e.default})(Ts,Ts.exports);var kD=Ts.exports;const $D=Hs(kD);var Ds={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(o){var a=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return a.setUTCFullYear(o.getFullYear()),o.getTime()-a.getTime()}t.exports=e.default})(Ds,Ds.exports);var wD=Ds.exports;const po=Hs(wD);function CD(t,e){var s=PD(e);return s.formatToParts?TD(s,t):DD(s,t)}var FD={year:0,month:1,day:2,hour:3,minute:4,second:5};function TD(t,e){try{for(var s=t.formatToParts(e),o=[],a=0;a<s.length;a++){var l=FD[s[a].type];l>=0&&(o[l]=parseInt(s[a].value,10))}return o}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function DD(t,e){var s=t.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(s);return[o[3],o[1],o[2],o[4],o[5],o[6]]}var ds={};function PD(t){if(!ds[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),s=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";ds[t]=s?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return ds[t]}function Qs(t,e,s,o,a,l,i){var u=new Date(0);return u.setUTCFullYear(t,e,s),u.setUTCHours(o,a,l,i),u}var _o=36e5,SD=6e4,us={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Xs(t,e,s){var o,a;if(t===""||(o=us.timezoneZ.exec(t),o))return 0;var l;if(o=us.timezoneHH.exec(t),o)return l=parseInt(o[1],10),vo(l)?-(l*_o):NaN;if(o=us.timezoneHHMM.exec(t),o){l=parseInt(o[1],10);var i=parseInt(o[2],10);return vo(l,i)?(a=Math.abs(l)*_o+i*SD,l>0?-a:a):NaN}if(MD(t)){e=new Date(e||Date.now());var u=s?e:OD(e),h=Ps(u,t),p=s?h:AD(e,h,t);return-p}return NaN}function OD(t){return Qs(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Ps(t,e){var s=CD(t,e),o=Qs(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),a=t.getTime(),l=a%1e3;return a-=l>=0?l:1e3+l,o-a}function AD(t,e,s){var o=t.getTime(),a=o-e,l=Ps(new Date(a),s);if(e===l)return e;a-=l-e;var i=Ps(new Date(a),s);return l===i?l:Math.max(l,i)}function vo(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var fo={};function MD(t){if(fo[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),fo[t]=!0,!0}catch{return!1}}var ia=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,cs=36e5,bo=6e4,jD=2,ut={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ia};function Ss(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var s=e||{},o=s.additionalDigits==null?jD:$D(s.additionalDigits);if(o!==2&&o!==1&&o!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=RD(t),l=UD(a.date,o),i=l.year,u=l.restDateString,h=VD(u,i);if(isNaN(h))return new Date(NaN);if(h){var p=h.getTime(),$=0,_;if(a.time&&($=YD(a.time),isNaN($)))return new Date(NaN);if(a.timeZone||s.timeZone){if(_=Xs(a.timeZone||s.timeZone,new Date(p+$)),isNaN(_))return new Date(NaN)}else _=po(new Date(p+$)),_=po(new Date(p+$+_));return new Date(p+$+_)}else return new Date(NaN)}function RD(t){var e={},s=ut.dateTimePattern.exec(t),o;if(s?(e.date=s[1],o=s[3]):(s=ut.datePattern.exec(t),s?(e.date=s[1],o=s[2]):(e.date=null,o=t)),o){var a=ut.timeZone.exec(o);a?(e.time=o.replace(a[1],""),e.timeZone=a[1].trim()):e.time=o}return e}function UD(t,e){var s=ut.YYY[e],o=ut.YYYYY[e],a;if(a=ut.YYYY.exec(t)||o.exec(t),a){var l=a[1];return{year:parseInt(l,10),restDateString:t.slice(l.length)}}if(a=ut.YY.exec(t)||s.exec(t),a){var i=a[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}return{year:null}}function VD(t,e){if(e===null)return null;var s,o,a,l;if(t.length===0)return o=new Date(0),o.setUTCFullYear(e),o;if(s=ut.MM.exec(t),s)return o=new Date(0),a=parseInt(s[1],10)-1,yo(e,a)?(o.setUTCFullYear(e,a),o):new Date(NaN);if(s=ut.DDD.exec(t),s){o=new Date(0);var i=parseInt(s[1],10);return xD(e,i)?(o.setUTCFullYear(e,0,i),o):new Date(NaN)}if(s=ut.MMDD.exec(t),s){o=new Date(0),a=parseInt(s[1],10)-1;var u=parseInt(s[2],10);return yo(e,a,u)?(o.setUTCFullYear(e,a,u),o):new Date(NaN)}if(s=ut.Www.exec(t),s)return l=parseInt(s[1],10)-1,ko(e,l)?go(e,l):new Date(NaN);if(s=ut.WwwD.exec(t),s){l=parseInt(s[1],10)-1;var h=parseInt(s[2],10)-1;return ko(e,l,h)?go(e,l,h):new Date(NaN)}return null}function YD(t){var e,s,o;if(e=ut.HH.exec(t),e)return s=parseFloat(e[1].replace(",",".")),ms(s)?s%24*cs:NaN;if(e=ut.HHMM.exec(t),e)return s=parseInt(e[1],10),o=parseFloat(e[2].replace(",",".")),ms(s,o)?s%24*cs+o*bo:NaN;if(e=ut.HHMMSS.exec(t),e){s=parseInt(e[1],10),o=parseInt(e[2],10);var a=parseFloat(e[3].replace(",","."));return ms(s,o,a)?s%24*cs+o*bo+a*1e3:NaN}return null}function go(t,e,s){e=e||0,s=s||0;var o=new Date(0);o.setUTCFullYear(t,0,4);var a=o.getUTCDay()||7,l=e*7+s+1-a;return o.setUTCDate(o.getUTCDate()+l),o}var ID=[31,28,31,30,31,30,31,31,30,31,30,31],BD=[31,29,31,30,31,30,31,31,30,31,30,31];function ra(t){return t%400===0||t%4===0&&t%100!==0}function yo(t,e,s){if(e<0||e>11)return!1;if(s!=null){if(s<1)return!1;var o=ra(t);if(o&&s>BD[e]||!o&&s>ID[e])return!1}return!0}function xD(t,e){if(e<1)return!1;var s=ra(t);return!(s&&e>366||!s&&e>365)}function ko(t,e,s){return!(e<0||e>52||s!=null&&(s<0||s>6))}function ms(t,e,s){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||s!=null&&(s<0||s>=60))}var Os={exports:{}},As={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(o,a){if(o==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l]);return o}t.exports=e.default})(As,As.exports);var ND=As.exports;(function(t,e){var s=yD.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var o=s(ND);function a(l){return(0,o.default)({},l)}t.exports=e.default})(Os,Os.exports);var ED=Os.exports;const qD=Hs(ED);function zD(t,e,s){var o=Ss(t,s),a=Xs(e,o,!0),l=new Date(o.getTime()-a),i=new Date(0);return i.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),i.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),i}function LD(t,e,s){if(typeof t=="string"&&!t.match(ia)){var o=qD(s);return o.timeZone=e,Ss(t,o)}var a=Ss(t,s),l=Qs(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).getTime(),i=Xs(e,new Date(l));return new Date(l+i)}function $o(t){return e=>new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`)).slice(0,2)}function WD(t){return e=>Nt(new Date(`2017-01-0${e}T00:00:00+00:00`),"EEEEEE",{locale:t})}const HD=(t,e,s)=>{const o=[1,2,3,4,5,6,7];let a;if(t!==null)try{a=o.map(WD(t))}catch{a=o.map($o(e))}else a=o.map($o(e));const l=a.slice(0,s),i=a.slice(s+1,a.length);return[a[s]].concat(...i).concat(...l)},Ks=(t,e)=>{const s=[];for(let o=+t[0];o<=+t[1];o++)s.push({value:+o,text:`${o}`});return e?s.reverse():s},da=(t,e,s)=>{const o=[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>{const i=l<10?`0${l}`:l;return new Date(`2017-${i}-01T00:00:00+00:00`)});if(t!==null)try{const l=s==="long"?"MMMM":"MMM";return o.map((i,u)=>{const h=Nt(i,l,{locale:t});return{text:h.charAt(0).toUpperCase()+h.substring(1),value:u}})}catch{}const a=new Intl.DateTimeFormat(e,{month:s,timeZone:"UTC"});return o.map((l,i)=>{const u=a.format(l);return{text:u.charAt(0).toUpperCase()+u.substring(1),value:i}})},QD=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],et=t=>{const e=w(t);return e!=null&&e.$el?e==null?void 0:e.$el:e},XD=t=>Object.assign({type:"dot"},t),ua=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,Kn={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},tt=t=>t,wo=t=>t===0?t:!t||isNaN(+t)?null:+t,Co=t=>t===null,KD=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},ZD=t=>{const e=[],s=o=>o.filter(a=>a);for(let o=0;o<t.length;o+=3){const a=[t[o],t[o+1],t[o+2]];e.push(s(a))}return e},On=(t,e,s)=>{const o=s!=null,a=e!=null;if(!o&&!a)return!1;const l=+s,i=+e;return o&&a?+t>l||+t<i:o?+t>l:a?+t<i:!1},pn=(t,e)=>ZD(t).map(s=>s.map(o=>{const{active:a,disabled:l,isBetween:i,highlighted:u}=e(o);return{...o,active:a,disabled:l,className:{dp__overlay_cell_active:a,dp__overlay_cell:!a,dp__overlay_cell_disabled:l,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:l&&a,dp__cell_in_between:i,"dp--highlighted":u}}})),Et=(t,e,s=!1)=>{t&&e.allowStopPropagation&&(s&&t.stopImmediatePropagation(),t.stopPropagation())},GD=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function JD(t,e){let s=[...document.querySelectorAll(GD())];s=s.filter(a=>!t.contains(a)||a.hasAttribute("data-datepicker-instance"));const o=s.indexOf(t);if(o>=0&&(e?o-1>=0:o+1<=s.length))return s[o+(e?-1:1)]}const e8=(t,e)=>{let s;return function(...o){clearTimeout(s),s=setTimeout(()=>{t(...o)},e)}},Fo=(t,e,s,o,a)=>{const l=Fs(t,e.slice(0,t.length),new Date);return Cn(l)&&Io(l)?o||a?l:ze(l,{hours:+s.hours,minutes:+(s==null?void 0:s.minutes),seconds:+(s==null?void 0:s.seconds),milliseconds:0}):null},t8=(t,e,s,o,a)=>{const l=Array.isArray(s)?s[0]:s;if(typeof e=="string")return Fo(t,e,l,o,a);if(Array.isArray(e)){let i=null;for(const u of e)if(i=Fo(t,u,l,o,a),i)break;return i}return typeof e=="function"?e(t):null},K=t=>t?new Date(t):new Date,n8=(t,e,s)=>{if(e){const a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),u=t.getMinutes().toString().padStart(2,"0"),h=s?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${a}-${l}T${i}:${u}:${h}.000Z`}const o=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(o).toISOString()},it=t=>{let e=K(JSON.parse(JSON.stringify(t)));return e=na(e,0),e=sa(e,0),e=Ns(e,0),e=xs(e,0),e},qt=(t,e,s,o)=>{let a=t?K(t):K();return(e||e===0)&&(a=na(a,+e)),(s||s===0)&&(a=sa(a,+s)),(o||o===0)&&(a=Ns(a,+o)),xs(a,0)},ot=(t,e)=>!t||!e?!1:Sn(it(t),it(e)),Ie=(t,e)=>!t||!e?!1:un(it(t),it(e)),lt=(t,e)=>!t||!e?!1:Pn(it(t),it(e)),Zn=(t,e,s)=>t!=null&&t[0]&&t!=null&&t[1]?lt(s,t[0])&&ot(s,t[1]):t!=null&&t[0]&&e?lt(s,t[0])&&ot(s,e)||ot(s,t[0])&&lt(s,e):!1,yt=t=>{const e=ze(new Date(t),{date:1});return it(e)},hs=(t,e,s)=>e&&(s||s===0)?Object.fromEntries(["hours","minutes","seconds"].map(o=>o===e?[o,s]:[o,isNaN(+t[o])?void 0:+t[o]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},Kt=t=>({hours:$t(t),minutes:Ot(t),seconds:mn(t)}),ca=(t,e)=>{if(e){const s=Ae(K(e));if(s>t)return 12;if(s===t)return Ue(K(e))}},ma=(t,e)=>{if(e){const s=Ae(K(e));return s<t?-1:s===t?Ue(K(e)):void 0}},_n=t=>{if(t)return Ae(K(t))},wt=(t,e)=>e?zD(t,e):t,ha=(t,e)=>e?LD(t,e):t,s8=t=>t instanceof Date?t:sD(t),pa=(t,e)=>{const s=lt(t,e)?e:t,o=lt(e,t)?e:t;return Bo({start:s,end:o})},o8=t=>{const e=kt(t,1);return{month:Ue(e),year:Ae(e)}},Nn=(t,e,s)=>{const o=Gt(wt(t,e),{weekStartsOn:+s}),a=H4(wt(t,e),{weekStartsOn:+s});return[o,a]},_a=(t,e)=>{const s={hours:$t(K()),minutes:Ot(K()),seconds:e?mn(K()):0};return Object.assign(s,t)},xt=(t,e,s)=>[ze(K(t),{date:1}),ze(K(),{month:e,year:s,date:1})],Rt=(t,e,s)=>{let o=t?K(t):K();return(e||e===0)&&(o=ta(o,e)),s&&(o=St(o,s)),o},va=(t,e,s,o,a)=>{if(!o||a&&!e||!a&&!s)return!1;const l=a?kt(t,1):hn(t,1),i=[Ue(l),Ae(l)];return a?!l8(...i,e):!a8(...i,s)},a8=(t,e,s)=>ot(...xt(s,t,e))||Ie(...xt(s,t,e)),l8=(t,e,s)=>lt(...xt(s,t,e))||Ie(...xt(s,t,e)),fa=(t,e,s,o,a,l,i)=>{if(typeof e=="function"&&!i)return e(t);const u=s?{locale:s}:void 0;return Array.isArray(t)?`${Nt(t[0],l,u)}${a&&!t[1]?"":o}${t[1]?Nt(t[1],l,u):""}`:Nt(t,l,u)},ln=t=>{if(t)return null;throw new Error(Kn.prop("partial-range"))},Bn=(t,e)=>{if(e)return t();throw new Error(Kn.prop("range"))},Ms=t=>Array.isArray(t)?Cn(t[0])&&(t[1]?Cn(t[1]):!0):t?Cn(t):!1,i8=(t,e)=>ze(e??K(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),ps=(t,e,s,o)=>{if(!t)return!0;if(o){const a=s==="max"?Sn(t,e):Pn(t,e),l={seconds:0,milliseconds:0};return a||un(ze(t,l),ze(e,l))}return s==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},_s=(t,e,s)=>t?i8(t,e):K(s??e),To=(t,e,s,o,a)=>{if(Array.isArray(o)){const i=_s(t,o[0],e),u=_s(t,o[1],e);return ps(o[0],i,s,!!e)&&ps(o[1],u,s,!!e)&&a}const l=_s(t,o,e);return ps(o,l,s,!!e)&&a},vs=t=>ze(K(),Kt(t)),r8=(t,e)=>Array.isArray(t)?t.map(s=>K(s)).filter(s=>Ae(K(s))===e).map(s=>Ue(s)):[],ba=(t,e,s)=>typeof t=="function"?t({month:e,year:s}):!!t.months.find(o=>o.month===e&&o.year===s),Zs=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),wn=An({menuFocused:!1,shiftKeyInMenu:!1}),ga=()=>{const t=s=>{wn.menuFocused=s},e=s=>{wn.shiftKeyInMenu!==s&&(wn.shiftKeyInMenu=s)};return{control:J(()=>({shiftKeyInMenu:wn.shiftKeyInMenu,menuFocused:wn.menuFocused})),setMenuFocused:t,setShiftKey:e}},qe=An({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),fs=ce(null),xn=ce(!1),bs=ce(!1),gs=ce(!1),ys=ce(!1),dt=ce(0),st=ce(0),Ht=()=>{const t=J(()=>xn.value?[...qe.selectionGrid,qe.actionRow].filter(_=>_.length):bs.value?[...qe.timePicker[0],...qe.timePicker[1],ys.value?[]:[fs.value],qe.actionRow].filter(_=>_.length):gs.value?[...qe.monthPicker,qe.actionRow]:[qe.monthYear,...qe.calendar,qe.time,qe.actionRow].filter(_=>_.length)),e=_=>{dt.value=_?dt.value+1:dt.value-1;let C=null;t.value[st.value]&&(C=t.value[st.value][dt.value]),C||(dt.value=_?dt.value-1:dt.value+1)},s=_=>{st.value===0&&!_||st.value===t.value.length&&_||(st.value=_?st.value+1:st.value-1,t.value[st.value]?t.value[st.value]&&!t.value[st.value][dt.value]&&dt.value!==0&&(dt.value=t.value[st.value].length-1):st.value=_?st.value-1:st.value+1)},o=_=>{let C=null;t.value[st.value]&&(C=t.value[st.value][dt.value]),C?C.focus({preventScroll:!xn.value}):dt.value=_?dt.value-1:dt.value+1},a=()=>{e(!0),o(!0)},l=()=>{e(!1),o(!1)},i=()=>{s(!1),o(!0)},u=()=>{s(!0),o(!0)},h=(_,C)=>{qe[C]=_},p=(_,C)=>{qe[C]=_},$=()=>{dt.value=0,st.value=0};return{buildMatrix:h,buildMultiLevelMatrix:p,setTimePickerBackRef:_=>{fs.value=_},setSelectionGrid:_=>{xn.value=_,$(),_||(qe.selectionGrid=[])},setTimePicker:(_,C=!1)=>{bs.value=_,ys.value=C,$(),_||(qe.timePicker[0]=[],qe.timePicker[1]=[])},setTimePickerElements:(_,C=0)=>{qe.timePicker[C]=_},arrowRight:a,arrowLeft:l,arrowUp:i,arrowDown:u,clearArrowNav:()=>{qe.monthYear=[],qe.calendar=[],qe.time=[],qe.actionRow=[],qe.selectionGrid=[],qe.timePicker[0]=[],qe.timePicker[1]=[],xn.value=!1,bs.value=!1,ys.value=!1,gs.value=!1,$(),fs.value=null},setMonthPicker:_=>{gs.value=_,$()},refSets:qe}},Do=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),d8=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...t??{}}),Po=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,u8=t=>{const e=typeof t=="object"&&t,s={static:!0,solo:!1};if(!t)return{...s,count:Po(!1)};const o=e?t:{},a=e?o.count??!0:t,l=Po(a);return Object.assign(s,o,{count:l})},c8=(t,e,s)=>t||(typeof s=="string"?s:e),m8=t=>typeof t=="boolean"?t?Do({}):!1:Do(t),h8=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},p8=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),_8=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),v8=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},f8=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...t??{}}),b8=(t,e,s)=>{const o={dates:Array.isArray(t)?t.map(a=>K(a)):[],years:[],months:[],quarters:[],weeks:[],weekdays:e,options:{highlightDisabled:s}};return typeof t=="function"?t:{...o,...t??{}}},g8=t=>typeof t=="object"?{type:t.type,hideOnOffsetDates:t.hideOnOffsetDates??!1}:{type:t,hideOnOffsetDates:!1},Ze=t=>{const e=()=>{const U=t.enableSeconds?":ss":"";return t.is24?`HH:mm${U}`:`hh:mm${U} aa`},s=()=>t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?"MM/dd/yyyy":t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy",o=U=>_a(U,t.enableSeconds),a=()=>t.range?t.startTime&&Array.isArray(t.startTime)?[o(t.startTime[0]),o(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?o(t.startTime):null,l=J(()=>u8(t.multiCalendars)),i=J(()=>a()),u=J(()=>d8(t.ariaLabels)),h=J(()=>p8(t.filters)),p=J(()=>m8(t.transitions)),$=J(()=>_8(t.actionRow)),_=J(()=>c8(t.previewFormat,t.format,s())),C=J(()=>h8(t.textInput)),D=J(()=>v8(t.inline)),S=J(()=>f8(t.config)),N=J(()=>b8(t.highlight,t.highlightWeekDays,t.highlightDisabledDays)),G=J(()=>g8(t.weekNumbers));return{defaultedTransitions:p,defaultedMultiCalendars:l,defaultedStartTime:i,defaultedAriaLabels:u,defaultedFilters:h,defaultedActionRow:$,defaultedPreviewFormat:_,defaultedTextInput:C,defaultedInline:D,defaultedConfig:S,defaultedHighlight:N,defaultedWeekNumbers:G,getDefaultPattern:s,getDefaultStartTime:a}},y8=(t,e,s)=>{const o=ce(),{defaultedTextInput:a,getDefaultPattern:l}=Ze(e),i=ce(""),u=En(e,"format");Wt(o,()=>{t("internal-model-change",o.value)}),Wt(u,()=>{Y()});const h=m=>ha(m,e.timezone),p=m=>wt(m,e.timezone),$=(m,O,I=!1)=>fa(m,e.format,e.formatLocale,a.value.rangeSeparator,e.modelAuto,O??l(),I),_=m=>m?e.modelType?M(m):{hours:$t(m),minutes:Ot(m),seconds:e.enableSeconds?mn(m):0}:null,C=m=>e.modelType?M(m):{month:Ue(m),year:Ae(m)},D=m=>Array.isArray(m)?e.multiDates?m.map(O=>S(O,St(K(),O))):Bn(()=>[St(K(),m[0]),m[1]?St(K(),m[1]):ln(e.partialRange)],e.range):St(K(),+m),S=(m,O)=>(typeof m=="string"||typeof m=="number")&&e.modelType?y(m):O,N=m=>Array.isArray(m)?[S(m[0],qt(null,+m[0].hours,+m[0].minutes,m[0].seconds)),S(m[1],qt(null,+m[1].hours,+m[1].minutes,m[1].seconds))]:S(m,qt(null,m.hours,m.minutes,m.seconds)),G=m=>Array.isArray(m)?e.multiDates?m.map(O=>S(O,Rt(null,+O.month,+O.year))):Bn(()=>[S(m[0],Rt(null,+m[0].month,+m[0].year)),S(m[1],m[1]?Rt(null,+m[1].month,+m[1].year):ln(e.partialRange))],e.range):S(m,Rt(null,+m.month,+m.year)),U=m=>{if(Array.isArray(m))return m.map(O=>y(O));throw new Error(Kn.dateArr("multi-dates"))},V=m=>{if(Array.isArray(m))return[K(m[0]),K(m[1])];throw new Error(Kn.dateArr("week-picker"))},ee=m=>e.modelAuto?Array.isArray(m)?[y(m[0]),y(m[1])]:e.autoApply?[y(m)]:[y(m),null]:Array.isArray(m)?Bn(()=>[y(m[0]),m[1]?y(m[1]):ln(e.partialRange)],e.range):y(m),P=()=>{Array.isArray(o.value)&&e.range&&o.value.length===1&&o.value.push(ln(e.partialRange))},L=()=>{const m=o.value;return[M(m[0]),m[1]?M(m[1]):ln(e.partialRange)]},W=()=>o.value[1]?L():M(tt(o.value[0])),z=()=>(o.value||[]).map(m=>M(m)),pe=()=>(P(),e.modelAuto?W():e.multiDates?z():Array.isArray(o.value)?Bn(()=>L(),e.range):M(tt(o.value))),te=m=>!m||Array.isArray(m)&&!m.length?null:e.timePicker?N(tt(m)):e.monthPicker?G(tt(m)):e.yearPicker?D(tt(m)):e.multiDates?U(tt(m)):e.weekPicker?V(tt(m)):ee(tt(m)),k=m=>{const O=te(m);Ms(tt(O))?(o.value=tt(O),Y()):(o.value=null,i.value="")},A=()=>{const m=O=>Nt(O,a.value.format);return`${m(o.value[0])} ${a.value.rangeSeparator} ${o.value[1]?m(o.value[1]):""}`},X=()=>s.value&&o.value?Array.isArray(o.value)?A():Nt(o.value,a.value.format):$(o.value),ie=()=>o.value?e.multiDates?o.value.map(m=>$(m)).join("; "):a.value.enabled&&typeof a.value.format=="string"?X():$(o.value):"",Y=()=>{!e.format||typeof e.format=="string"||a.value.enabled&&typeof a.value.format=="string"?i.value=ie():i.value=e.format(o.value)},y=m=>{if(e.utc){const O=new Date(m);return e.utc==="preserve"?new Date(O.getTime()+O.getTimezoneOffset()*6e4):O}return e.modelType?e.modelType==="date"||e.modelType==="timestamp"?p(new Date(m)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?Fs(m,l(),new Date):p(Fs(m,e.modelType,new Date)):p(new Date(m))},M=m=>m?e.utc?n8(m,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+h(m):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?$(h(m)):$(h(m),e.modelType,!0):h(m):"",j=(m,O=!1)=>{if(t("update:model-value",m),e.emitTimezone&&O){const I=Array.isArray(m)?m.map(oe=>wt(tt(oe)),e.emitTimezone):wt(tt(m),e.emitTimezone);t("update:model-timezone-value",I)}},H=m=>Array.isArray(o.value)?e.multiDates?o.value.map(O=>m(O)):[m(o.value[0]),o.value[1]?m(o.value[1]):ln(e.partialRange)]:m(tt(o.value)),v=m=>j(tt(H(m)));return{inputValue:i,internalModelValue:o,checkBeforeEmit:()=>o.value?e.range?e.partialRange?o.value.length>=1:o.value.length===2:!!o.value:!1,parseExternalModelValue:k,formatInputValue:Y,emitModelValue:()=>(Y(),e.monthPicker?v(C):e.timePicker?v(_):e.yearPicker?v(Ae):e.weekPicker?j(o.value.map(m=>M(m)),!0):j(pe(),!0))}},k8=(t,e)=>{const{defaultedFilters:s}=Ze(t),{validateMonthYearInRange:o}=sn(t),a=(p,$)=>{let _=p;return s.value.months.includes(Ue(_))?(_=$?kt(p,1):hn(p,1),a(_,$)):_},l=(p,$)=>{let _=p;return s.value.years.includes(Ae(_))?(_=$?Rs(p,1):oa(p,1),l(_,$)):_},i=(p,$=!1)=>{const _=ze(new Date,{month:t.month,year:t.year});let C=p?kt(_,1):hn(_,1);t.disableYearSelect&&(C=St(C,t.year));let D=Ue(C),S=Ae(C);s.value.months.includes(D)&&(C=a(C,p),D=Ue(C),S=Ae(C)),s.value.years.includes(S)&&(C=l(C,p),S=Ae(C)),o(D,S,p,t.preventMinMaxNavigation)&&u(D,S,$)},u=(p,$,_)=>{e("update-month-year",{month:p,year:$,fromNav:_})},h=J(()=>p=>va(ze(new Date,{month:t.month,year:t.year}),t.maxDate,t.minDate,t.preventMinMaxNavigation,p));return{handleMonthYearChange:i,isDisabled:h,updateMonthYear:u}};var rn=(t=>(t.center="center",t.left="left",t.right="right",t))(rn||{}),gt=(t=>(t.month="month",t.year="year",t))(gt||{}),Xt=(t=>(t.top="top",t.bottom="bottom",t))(Xt||{}),Zt=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(Zt||{}),Tt=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(Tt||{});const $8=({menuRef:t,menuRefInner:e,inputRef:s,pickerWrapperRef:o,inline:a,emit:l,props:i,slots:u})=>{const h=ce({}),p=ce(!1),$=ce({top:"0",left:"0"}),_=ce(!1),C=En(i,"teleportCenter");Wt(C,()=>{$.value=JSON.parse(JSON.stringify({})),P()});const D=y=>{if(i.teleport){const M=y.getBoundingClientRect();return{left:M.left+window.scrollX,top:M.top+window.scrollY}}return{top:0,left:0}},S=(y,M)=>{$.value.left=`${y+M-h.value.width}px`},N=y=>{$.value.left=`${y}px`},G=(y,M)=>{i.position===rn.left&&N(y),i.position===rn.right&&S(y,M),i.position===rn.center&&($.value.left=`${y+M/2-h.value.width/2}px`)},U=y=>{const{width:M,height:j}=y.getBoundingClientRect(),{top:H,left:v}=i.altPosition?i.altPosition(y):D(y);return{top:+H,left:+v,width:M,height:j}},V=()=>{$.value.left="50%",$.value.top="50%",$.value.transform="translate(-50%, -50%)",$.value.position="fixed",delete $.value.opacity},ee=()=>{const y=et(s),{top:M,left:j,transform:H}=i.altPosition(y);$.value={top:`${M}px`,left:`${j}px`,transform:H??""}},P=(y=!0)=>{var M;if(!a.value.enabled){if(C.value)return V();if(i.altPosition!==null)return ee();if(y){const j=i.teleport?(M=e.value)==null?void 0:M.$el:t.value;j&&(h.value=j.getBoundingClientRect()),l("recalculate-position")}return A()}},L=({inputEl:y,left:M,width:j})=>{window.screen.width>768&&!p.value&&G(M,j),pe(y)},W=y=>{const{top:M,left:j,height:H,width:v}=U(y);$.value.top=`${H+M+ +i.offset}px`,_.value=!1,p.value||($.value.left=`${j+v/2-h.value.width/2}px`),L({inputEl:y,left:j,width:v})},z=y=>{const{top:M,left:j,width:H}=U(y);$.value.top=`${M-+i.offset-h.value.height}px`,_.value=!0,L({inputEl:y,left:j,width:H})},pe=y=>{if(i.autoPosition){const{left:M,width:j}=U(y),{left:H,right:v}=h.value;if(!p.value){if(Math.abs(H)!==Math.abs(v)){if(H<=0)return p.value=!0,N(M);if(v>=document.documentElement.clientWidth)return p.value=!0,S(M,j)}return G(M,j)}}},te=()=>{const y=et(s);if(y){const{height:M}=h.value,{top:j,height:H}=y.getBoundingClientRect(),v=window.innerHeight-j-H,m=j;return M<=v?Xt.bottom:M>v&&M<=m?Xt.top:v>=m?Xt.bottom:Xt.top}return Xt.bottom},k=y=>te()===Xt.bottom?W(y):z(y),A=()=>{const y=et(s);if(y)return i.autoPosition?k(y):W(y)},X=function(y){if(y){const M=y.scrollHeight>y.clientHeight,j=window.getComputedStyle(y).overflowY.indexOf("hidden")!==-1;return M&&!j}return!0},ie=function(y){return!y||y===document.body||y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:X(y)?y:ie(y.parentNode)},Y=y=>{if(y)switch(i.position){case rn.left:return{left:0,transform:"translateX(0)"};case rn.right:return{left:`${y.width}px`,transform:"translateX(-100%)"};default:return{left:`${y.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:_,menuStyle:$,xCorrect:p,setMenuPosition:P,getScrollableParent:ie,shadowRender:(y,M)=>{var j,H,v;const m=document.createElement("div"),O=(j=et(s))==null?void 0:j.getBoundingClientRect();m.setAttribute("id","dp--temp-container");const I=(H=o.value)!=null&&H.clientWidth?o.value:document.body;I.append(m);const oe=Y(O),re=Pa(y,{...M,shadow:!0,style:{opacity:0,position:"absolute",...oe}},Object.fromEntries(Object.keys(u).filter(R=>["right-sidebar","left-sidebar"].includes(R)).map(R=>[R,u[R]])));to(re,m),h.value=(v=re.el)==null?void 0:v.getBoundingClientRect(),to(null,m),I.removeChild(m)}}},Bt=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],w8=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],C8={all:()=>Bt,monthYear:()=>Bt.filter(t=>t.use.includes("month-year")),input:()=>w8,timePicker:()=>Bt.filter(t=>t.use.includes("time")),action:()=>Bt.filter(t=>t.use.includes("action")),calendar:()=>Bt.filter(t=>t.use.includes("calendar")),menu:()=>Bt.filter(t=>t.use.includes("menu")),shared:()=>Bt.filter(t=>t.use.includes("shared")),yearMode:()=>Bt.filter(t=>t.use.includes("year-mode"))},pt=(t,e,s)=>{const o=[];return C8[e]().forEach(a=>{t[a.name]&&o.push(a.name)}),s!=null&&s.length&&s.forEach(a=>{a.slot&&o.push(a.slot)}),o},Mn=t=>{const e=J(()=>o=>t.value?o?t.value.open:t.value.close:""),s=J(()=>o=>t.value?o?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:s}},jn=(t,e)=>{const s=K(wt(new Date,t.timezone)),o=ce([{month:Ue(s),year:Ae(s)}]),a=An({hours:t.range?[$t(s),$t(s)]:$t(s),minutes:t.range?[Ot(s),Ot(s)]:Ot(s),seconds:t.range?[0,0]:0}),l=J({get:()=>t.internalModelValue,set:h=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",h)}}),i=J(()=>h=>o.value[h]?o.value[h].month:0),u=J(()=>h=>o.value[h]?o.value[h].year:0);return{calendars:o,time:a,modelValue:l,month:i,year:u}},F8=(t,e)=>{const{defaultedMultiCalendars:s,defaultedHighlight:o}=Ze(e),{isDisabled:a,matchDate:l}=sn(e),i=ce(null),u=ce(K(wt(new Date,e.timezone))),h=v=>{!v.current&&e.hideOffsetDates||(i.value=v.value)},p=()=>{i.value=null},$=v=>Array.isArray(t.value)&&e.range&&t.value[0]&&i.value?v?lt(i.value,t.value[0]):ot(i.value,t.value[0]):!0,_=(v,m)=>{const O=()=>t.value?m?t.value[0]||null:t.value[1]:null,I=t.value&&Array.isArray(t.value)?O():null;return Ie(K(v.value),I)},C=v=>{const m=Array.isArray(t.value)?t.value[0]:null;return v?!ot(i.value??null,m):!0},D=(v,m=!0)=>(e.range||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!v.current?!1:Ie(K(v.value),t.value[m?0:1]):e.range?_(v,m)&&C(m)||Ie(v.value,Array.isArray(t.value)?t.value[0]:null)&&$(m):!1,S=(v,m,O)=>Array.isArray(t.value)&&t.value[0]&&t.value.length===1?v?!1:O?lt(t.value[0],m.value):ot(t.value[0],m.value):!1,N=v=>!t.value||e.hideOffsetDates&&!v.current?!1:e.range?e.modelAuto&&Array.isArray(t.value)?Ie(v.value,t.value[0]?t.value[0]:u.value):!1:e.multiDates&&Array.isArray(t.value)?t.value.some(m=>Ie(m,v.value)):Ie(v.value,t.value?t.value:u.value),G=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=jt(i.value,+e.autoRange),O=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?Ie(O[1],K(v.value)):Ie(m,K(v.value))}return!1}return!1},U=v=>{if(e.autoRange||e.weekPicker){if(i.value){const m=jt(i.value,+e.autoRange);if(e.hideOffsetDates&&!v.current)return!1;const O=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?lt(v.value,O[0])&&ot(v.value,O[1]):lt(v.value,i.value)&&ot(v.value,m)}return!1}return!1},V=v=>{if(e.autoRange||e.weekPicker){if(i.value){if(e.hideOffsetDates&&!v.current)return!1;const m=Nn(K(i.value),e.timezone,e.weekStart);return e.weekPicker?Ie(m[0],v.value):Ie(i.value,v.value)}return!1}return!1},ee=v=>Zn(t.value,i.value,v.value),P=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,L=()=>e.modelAuto?ua(e.internalModelValue):!0,W=v=>{if(Array.isArray(t.value)&&t.value.length||e.weekPicker)return!1;const m=e.range?!D(v)&&!D(v,!1):!0;return!a(v.value)&&!N(v)&&!(!v.current&&e.hideOffsetDates)&&m},z=v=>e.range?e.modelAuto?P()&&N(v):!1:N(v),pe=v=>{var m;return o.value?typeof o.value=="function"?o.value(v.value):l(v.value,(m=e.arrMapValues)!=null&&m.highlightedDates?e.arrMapValues.highlightedDates:o.value.dates):!1},te=v=>{const m=a(v.value);return m&&(typeof o.value=="function"?!o.value(v.value,m):!o.value.options.highlightDisabled)},k=v=>{var m;return typeof o.value=="function"?o.value(v.value):(m=o.value.weekdays)==null?void 0:m.includes(v.value.getDay())},A=v=>(e.range||e.weekPicker)&&(!(s.value.count>0)||v.current)&&L()&&!(!v.current&&e.hideOffsetDates)&&!N(v)?ee(v):!1,X=v=>{const{isRangeStart:m,isRangeEnd:O}=y(v),I=e.range?m||O:!1;return{dp__cell_offset:!v.current,dp__pointer:!e.disabled&&!(!v.current&&e.hideOffsetDates)&&!a(v.value),dp__cell_disabled:a(v.value),dp__cell_highlight:!te(v)&&(pe(v)||k(v))&&!z(v)&&!I&&!V(v)&&!(A(v)&&e.weekPicker)&&!O,dp__cell_highlight_active:!te(v)&&(pe(v)||k(v))&&z(v),dp__today:!e.noToday&&Ie(v.value,u.value)&&v.current}},ie=v=>({dp__active_date:z(v),dp__date_hover:W(v)}),Y=v=>({...M(v),...j(v),dp__range_between_week:A(v)&&e.weekPicker}),y=v=>{const m=s.value.count>0?v.current&&D(v)&&L():D(v)&&L(),O=s.value.count>0?v.current&&D(v,!1)&&L():D(v,!1)&&L();return{isRangeStart:m,isRangeEnd:O}},M=v=>{const{isRangeStart:m,isRangeEnd:O}=y(v);return{dp__range_start:m,dp__range_end:O,dp__range_between:A(v)&&!e.weekPicker,dp__date_hover_start:S(W(v),v,!0),dp__date_hover_end:S(W(v),v,!1)}},j=v=>({...M(v),dp__cell_auto_range:U(v),dp__cell_auto_range_start:V(v),dp__cell_auto_range_end:G(v)}),H=v=>e.range?e.autoRange?j(v):e.modelAuto?{...ie(v),...M(v)}:M(v):e.weekPicker?Y(v):ie(v);return{setHoverDate:h,clearHoverDate:p,getDayClassData:v=>e.hideOffsetDates&&!v.current?{}:{...X(v),...H(v),[e.dayClass?e.dayClass(v.value):""]:!0,[e.calendarCellClassName]:!!e.calendarCellClassName}}},sn=t=>{const{defaultedFilters:e,defaultedHighlight:s}=Ze(t),o=()=>{if(t.timezone)return t.timezone;if(t.utc)return"UTC"},a=k=>{const A=it(l(K(k))).toISOString(),[X]=A.split("T");return X},l=k=>t.utc==="preserve"?ha(k,o()):wt(k,o()),i=k=>{var A;const X=t.maxDate?lt(k,l(K(t.maxDate))):!1,ie=t.minDate?ot(k,l(K(t.minDate))):!1,Y=$(l(k),(A=t.arrMapValues)!=null&&A.disabledDates?t.arrMapValues.disabledDates:t.disabledDates),y=e.value.months.map(m=>+m).includes(Ue(k)),M=t.disabledWeekDays.length?t.disabledWeekDays.some(m=>+m===G6(k)):!1,j=C(k),H=Ae(k),v=H<+t.yearRange[0]||H>+t.yearRange[1];return!(X||ie||Y||y||v||M||j)},u=(k,A)=>ot(...xt(t.minDate,k,A))||Ie(...xt(t.minDate,k,A)),h=(k,A)=>lt(...xt(t.maxDate,k,A))||Ie(...xt(t.maxDate,k,A)),p=(k,A,X)=>{let ie=!1;return t.maxDate&&X&&h(k,A)&&(ie=!0),t.minDate&&!X&&u(k,A)&&(ie=!0),ie},$=(k,A)=>k?A instanceof Map?!!A.get(a(k)):Array.isArray(A)?A.some(X=>Ie(l(K(X)),k)):A?A(K(JSON.parse(JSON.stringify(k)))):!1:!0,_=(k,A,X,ie)=>{let Y=!1;return ie?t.minDate&&t.maxDate?Y=p(k,A,X):(t.minDate&&u(k,A)||t.maxDate&&h(k,A))&&(Y=!0):Y=!0,Y},C=k=>{var A,X,ie,Y,y;return Array.isArray(t.allowedDates)&&!((A=t.allowedDates)!=null&&A.length)?!0:(X=t.arrMapValues)!=null&&X.allowedDates?!$(k,(ie=t.arrMapValues)==null?void 0:ie.allowedDates):(Y=t.allowedDates)!=null&&Y.length?!((y=t.allowedDates)!=null&&y.some(M=>Ie(it(M),l(it(k))))):!1},D=k=>!i(k),S=k=>t.noDisabledRange?!Bo({start:k[0],end:k[1]}).some(A=>D(A)):!0,N=(k,A,X=0)=>{if(Array.isArray(A)&&A[X]){const ie=N4(k,A[X]),Y=pa(A[X],k),y=Y.length===1?0:Y.filter(j=>D(j)).length,M=Math.abs(ie)-y;if(t.minRange&&t.maxRange)return M>=+t.minRange&&M<=+t.maxRange;if(t.minRange)return M>=+t.minRange;if(t.maxRange)return M<=+t.maxRange}return!0},G=k=>new Map(k.map(A=>[a(A),!0])),U=k=>Array.isArray(k)&&k.length>0,V=()=>{const k={disabledDates:null,allowedDates:null,highlightedDates:null};return U(t.allowedDates)&&(k.allowedDates=G(t.allowedDates)),typeof s.value!="function"&&U(s.value.dates)&&(k.highlightedDates=G(s.value.dates)),U(t.disabledDates)&&(k.disabledDates=G(t.disabledDates)),k},ee=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,P=k=>Array.isArray(k)?[k[0]?vs(k[0]):null,k[1]?vs(k[1]):null]:vs(k),L=(k,A,X)=>k.find(ie=>+ie.hours===$t(A)&&ie.minutes==="*"?!0:+ie.minutes===Ot(A)&&+ie.hours===$t(A))&&X,W=(k,A,X)=>{const[ie,Y]=k,[y,M]=A;return!L(ie,y,X)&&!L(Y,M,X)&&X},z=(k,A)=>{const X=Array.isArray(A)?A:[A];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?W(t.disabledTimes,X,k):!X.some(ie=>L(t.disabledTimes,ie,k)):k},pe=(k,A)=>{const X=Array.isArray(A)?[Kt(A[0]),A[1]?Kt(A[1]):void 0]:Kt(A),ie=!t.disabledTimes(X);return k&&ie},te=(k,A)=>t.disabledTimes?Array.isArray(t.disabledTimes)?z(A,k):pe(A,k):A;return{isDisabled:D,validateDate:i,validateMonthYearInRange:_,isDateRangeAllowed:S,checkMinMaxRange:N,matchDate:$,mapDatesArrToMap:V,isValidTime:k=>{let A=!0;if(!k||ee())return!0;const X=!t.minDate&&!t.maxDate?P(k):k;return(t.maxTime||t.maxDate)&&(A=To(t.maxTime,t.maxDate,"max",tt(X),A)),(t.minTime||t.minDate)&&(A=To(t.minTime,t.minDate,"min",tt(X),A)),te(k,A)}}},Gn=()=>{const t=J(()=>(o,a)=>o==null?void 0:o.includes(a)),e=J(()=>(o,a)=>o.count?o.solo?!0:a===0:!0),s=J(()=>(o,a)=>o.count?o.solo?!0:a===o.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:s}},T8=(t,e,s)=>{const o=ce(0),a=An({[Zt.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[Zt.calendar]:!1,[Zt.header]:!1}),l=J(()=>t.monthPicker),i=_=>{var C;if((C=t.flow)!=null&&C.length){if(!_&&l.value)return $();a[_]=!0,Object.keys(a).filter(D=>!a[D]).length||$()}},u=()=>{var _;(_=t.flow)!=null&&_.length&&o.value!==-1&&(o.value+=1,e("flow-step",o.value),$())},h=()=>{o.value=-1},p=(_,C,...D)=>{t.flow[o.value]===_&&s.value&&s.value[C](...D)},$=()=>{p(Tt.month,"toggleMonthPicker",!0),p(Tt.year,"toggleYearPicker",!0),p(Tt.calendar,"toggleTimePicker",!1,!0),p(Tt.time,"toggleTimePicker",!0,!0);const _=t.flow[o.value];(_===Tt.hours||_===Tt.minutes||_===Tt.seconds)&&p(_,"toggleTimePicker",!0,!0,_)};return{childMount:i,updateFlowStep:u,resetFlow:h,flowStep:o}},Jn={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},Ct={...Jn,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},D8={key:1,class:"dp__input_wrap"},P8=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],S8={key:2,class:"dp__clear_icon"},O8=nt({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Jn},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(t,{expose:e,emit:s}){const o=s,a=t,{defaultedTextInput:l,defaultedAriaLabels:i,defaultedInline:u,defaultedConfig:h,getDefaultPattern:p,getDefaultStartTime:$}=Ze(a),{checkMinMaxRange:_}=sn(a),C=ce(),D=ce(null),S=ce(!1),N=ce(!1),G=J(()=>({dp__pointer:!a.disabled&&!a.readonly&&!l.value.enabled,dp__disabled:a.disabled,dp__input_readonly:!l.value.enabled,dp__input:!0,dp__input_icon_pad:!a.hideInputIcon,dp__input_valid:!!a.state,dp__input_invalid:a.state===!1,dp__input_focus:S.value||a.isMenuOpen,dp__input_reg:!l.value.enabled,[a.inputClassName]:!!a.inputClassName})),U=()=>{o("set-input-date",null),a.autoApply&&(o("set-empty-date"),C.value=null)},V=Y=>{const y=$();return t8(Y,l.value.format??p(),y??_a({},a.enableSeconds),a.inputValue,N.value)},ee=Y=>{const{rangeSeparator:y}=l.value,[M,j]=Y.split(`${y}`);if(M){const H=V(M.trim()),v=j?V(j.trim()):null,m=H&&v?[H,v]:[H];_(v,m,0)&&(C.value=H?m:null)}},P=()=>{N.value=!0},L=Y=>{if(a.range)ee(Y);else if(a.multiDates){const y=Y.split(";");C.value=y.map(M=>V(M.trim())).filter(M=>M)}else C.value=V(Y)},W=Y=>{var y;const M=typeof Y=="string"?Y:(y=Y.target)==null?void 0:y.value;M!==""?(l.value.openMenu&&!a.isMenuOpen&&o("open"),L(M),o("set-input-date",C.value)):U(),N.value=!1,o("update:input-value",M)},z=Y=>{l.value.enabled?(L(Y.target.value),l.value.enterSubmit&&Ms(C.value)&&a.inputValue!==""?(o("set-input-date",C.value,!0),C.value=null):l.value.enterSubmit&&a.inputValue===""&&(C.value=null,o("clear"))):k(Y)},pe=Y=>{l.value.enabled&&l.value.tabSubmit&&L(Y.target.value),l.value.tabSubmit&&Ms(C.value)&&a.inputValue!==""?(o("set-input-date",C.value,!0,!0),C.value=null):l.value.tabSubmit&&a.inputValue===""&&(C.value=null,o("clear",!0))},te=()=>{var Y;S.value=!0,o("focus"),l.value.enabled&&l.value.selectOnFocus&&((Y=D.value)==null||Y.select())},k=Y=>{Y.preventDefault(),Et(Y,h.value,!0),l.value.enabled&&l.value.openMenu&&!u.value.input&&!a.isMenuOpen?o("open"):l.value.enabled||o("toggle")},A=()=>{o("real-blur"),S.value=!1,(!a.isMenuOpen||u.value.enabled&&u.value.input)&&o("blur"),a.autoApply&&l.value.enabled&&C.value&&!a.isMenuOpen&&(o("set-input-date",C.value),o("select-date"),C.value=null)},X=Y=>{Et(Y,h.value,!0),o("clear")},ie=Y=>{if(!l.value.enabled){if(Y.code==="Tab")return;Y.preventDefault()}};return e({focusInput:()=>{var Y;(Y=D.value)==null||Y.focus({preventScroll:!0})},setParsedDate:Y=>{C.value=Y}}),(Y,y)=>{var M;return r(),d("div",{onClick:k},[Y.$slots.trigger&&!Y.$slots["dp-input"]&&!w(u).enabled?ye(Y.$slots,"trigger",{key:0}):c("",!0),!Y.$slots.trigger&&(!w(u).enabled||w(u).input)?(r(),d("div",D8,[Y.$slots["dp-input"]&&!Y.$slots.trigger&&!w(u).enabled?ye(Y.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:W,onEnter:z,onTab:pe,onClear:X,onBlur:A,onKeypress:ie,onPaste:P,openMenu:()=>Y.$emit("open"),closeMenu:()=>Y.$emit("close"),toggleMenu:()=>Y.$emit("toggle")}):c("",!0),Y.$slots["dp-input"]?c("",!0):(r(),d("input",{key:1,id:Y.uid?`dp-input-${Y.uid}`:void 0,ref_key:"inputRef",ref:D,name:Y.name,class:B(G.value),inputmode:w(l).enabled?"text":"none",placeholder:Y.placeholder,disabled:Y.disabled,readonly:Y.readonly,required:Y.required,value:t.inputValue,autocomplete:Y.autocomplete,"aria-label":(M=w(i))==null?void 0:M.input,"aria-disabled":Y.disabled||void 0,"aria-invalid":Y.state===!1?!0:void 0,onInput:W,onKeydown:[De(z,["enter"]),De(pe,["tab"]),ie],onBlur:A,onFocus:te,onKeypress:ie,onPaste:P},null,42,P8)),n("div",{onClick:y[2]||(y[2]=j=>o("toggle"))},[Y.$slots["input-icon"]&&!Y.hideInputIcon?(r(),d("span",{key:0,class:"dp__input_icon",onClick:y[0]||(y[0]=j=>o("toggle"))},[ye(Y.$slots,"input-icon")])):c("",!0),!Y.$slots["input-icon"]&&!Y.hideInputIcon&&!Y.$slots["dp-input"]?(r(),de(w(fn),{key:1,class:"dp__input_icon dp__input_icons",onClick:y[1]||(y[1]=j=>o("toggle"))})):c("",!0)]),Y.$slots["clear-icon"]&&t.inputValue&&Y.clearable&&!Y.disabled&&!Y.readonly?(r(),d("span",S8,[ye(Y.$slots,"clear-icon",{clear:X})])):c("",!0),Y.clearable&&!Y.$slots["clear-icon"]&&t.inputValue&&!Y.disabled&&!Y.readonly?(r(),de(w(aa),{key:3,class:"dp__clear_icon dp__input_icons",onClick:y[3]||(y[3]=Pe(j=>X(j),["prevent"]))})):c("",!0)])):c("",!0)])}}}),A8=["title"],M8={class:"dp__action_buttons"},j8=["disabled"],R8=nt({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Ct},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const s=e,o=t,{defaultedActionRow:a,defaultedPreviewFormat:l,defaultedMultiCalendars:i,defaultedTextInput:u,defaultedInline:h,getDefaultPattern:p}=Ze(o),{isValidTime:$}=sn(o),{buildMatrix:_}=Ht(),C=ce(null),D=ce(null);rt(()=>{o.arrowNavigation&&_([et(C),et(D)],"actionRow")});const S=J(()=>o.range&&!o.partialRange&&o.internalModelValue?o.internalModelValue.length===2:!0),N=J(()=>!G.value||!U.value||!S.value),G=J(()=>!o.enableTimePicker||o.ignoreTimeValidation?!0:$(o.internalModelValue)),U=J(()=>o.monthPicker?o.range&&Array.isArray(o.internalModelValue)?!o.internalModelValue.filter(k=>!pe(k)).length:pe(o.internalModelValue):!0),V=()=>{const k=l.value;return o.timePicker||o.monthPicker,k(tt(o.internalModelValue))},ee=()=>{const k=o.internalModelValue;return i.value.count>0?`${P(k[0])} - ${P(k[1])}`:[P(k[0]),P(k[1])]},P=k=>fa(k,l.value,o.formatLocale,u.value.rangeSeparator,o.modelAuto,p()),L=J(()=>!o.internalModelValue||!o.menuMount?"":typeof l.value=="string"?Array.isArray(o.internalModelValue)?o.internalModelValue.length===2&&o.internalModelValue[1]?ee():o.multiDates?o.internalModelValue.map(k=>`${P(k)}`):o.modelAuto?`${P(o.internalModelValue[0])}`:`${P(o.internalModelValue[0])} -`:P(o.internalModelValue):V()),W=()=>o.multiDates?"; ":" - ",z=J(()=>Array.isArray(L.value)?L.value.join(W()):L.value),pe=k=>{if(!o.monthPicker)return!0;let A=!0;const X=K(yt(k));if(o.minDate&&o.maxDate){const ie=K(yt(o.minDate)),Y=K(yt(o.maxDate));return lt(X,ie)&&ot(X,Y)||Ie(X,ie)||Ie(X,Y)}if(o.minDate){const ie=K(yt(o.minDate));A=lt(X,ie)||Ie(X,ie)}if(o.maxDate){const ie=K(yt(o.maxDate));A=ot(X,ie)||Ie(X,ie)}return A},te=()=>{G.value&&U.value&&S.value?s("select-date"):s("invalid-select")};return(k,A)=>(r(),d("div",{class:"dp__action_row",style:ft(t.calendarWidth?{width:`${t.calendarWidth}px`}:{})},[k.$slots["action-row"]?ye(k.$slots,"action-row",Ge(at({key:0},{internalModelValue:k.internalModelValue,disabled:N.value,selectDate:()=>k.$emit("select-date"),closePicker:()=>k.$emit("close-picker")}))):(r(),d(x,{key:1},[w(a).showPreview?(r(),d("div",{key:0,class:"dp__selection_preview",title:z.value},[k.$slots["action-preview"]?ye(k.$slots,"action-preview",{key:0,value:k.internalModelValue}):c("",!0),k.$slots["action-preview"]?c("",!0):(r(),d(x,{key:1},[F(f(z.value),1)],64))],8,A8)):c("",!0),n("div",M8,[k.$slots["action-buttons"]?ye(k.$slots,"action-buttons",{key:0,value:k.internalModelValue}):c("",!0),k.$slots["action-buttons"]?c("",!0):(r(),d(x,{key:1},[!w(h).enabled&&w(a).showCancel?(r(),d("button",{key:0,ref_key:"cancelButtonRef",ref:C,type:"button",class:"dp__action_button dp__action_cancel",onClick:A[0]||(A[0]=X=>k.$emit("close-picker")),onKeydown:[A[1]||(A[1]=De(X=>k.$emit("close-picker"),["enter"])),A[2]||(A[2]=De(X=>k.$emit("close-picker"),["space"]))]},f(k.cancelText),545)):c("",!0),w(a).showNow?(r(),d("button",{key:1,ref_key:"cancelButtonRef",ref:C,type:"button",class:"dp__action_button dp__action_cancel",onClick:A[3]||(A[3]=X=>k.$emit("select-now")),onKeydown:[A[4]||(A[4]=De(X=>k.$emit("select-now"),["enter"])),A[5]||(A[5]=De(X=>k.$emit("select-now"),["space"]))]},f(k.nowButtonLabel),545)):c("",!0),w(a).showSelect?(r(),d("button",{key:2,ref_key:"selectButtonRef",ref:D,type:"button",class:"dp__action_button dp__action_select",disabled:N.value,onKeydown:[De(te,["enter"]),De(te,["space"])],onClick:te},f(k.selectText),41,j8)):c("",!0)],64))])],64))],4))}}),U8=["onKeydown"],V8={class:"dp__selection_grid_header"},Y8=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],I8=["aria-label"],Rn=nt({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:s}){const{setSelectionGrid:o,buildMultiLevelMatrix:a,setMonthPicker:l}=Ht(),i=s,u=t,{defaultedAriaLabels:h,defaultedTextInput:p,defaultedConfig:$}=Ze(u),{hideNavigationButtons:_}=Gn(),C=ce(!1),D=ce(null),S=ce(null),N=ce([]),G=ce(),U=ce(null),V=ce(0),ee=ce(null);Sa(()=>{D.value=null}),rt(()=>{Lt().then(()=>A()),u.noOverlayFocus||L(),P(!0)}),js(()=>P(!1));const P=v=>{var m;u.arrowNavigation&&((m=u.headerRefs)!=null&&m.length?l(v):o(v))},L=()=>{var v;const m=et(S);m&&(p.value.enabled||(D.value?(v=D.value)==null||v.focus({preventScroll:!0}):m.focus({preventScroll:!0})),C.value=m.clientHeight<m.scrollHeight)},W=J(()=>({dp__overlay:!0,"dp--overlay-absolute":!u.useRelative,"dp--overlay-relative":u.useRelative})),z=J(()=>u.useRelative?{height:`${u.height}px`,width:"260px"}:void 0),pe=J(()=>({dp__overlay_col:!0})),te=J(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:C.value,dp__button_bottom:u.isLast})),k=J(()=>{var v,m;return{dp__overlay_container:!0,dp__container_flex:((v=u.items)==null?void 0:v.length)<=6,dp__container_block:((m=u.items)==null?void 0:m.length)>6}});Wt(()=>u.items,()=>A(),{deep:!0});const A=()=>{Lt().then(()=>{const v=et(D),m=et(S),O=et(U),I=et(ee),oe=O?O.getBoundingClientRect().height:0;m&&(m.getBoundingClientRect().height?V.value=m.getBoundingClientRect().height-oe:V.value=$.value.modeHeight-oe),v&&I&&(I.scrollTop=v.offsetTop-I.offsetTop-(V.value/2-v.getBoundingClientRect().height)-oe)})},X=v=>{v.disabled||i("selected",v.value)},ie=()=>{i("toggle"),i("reset-flow")},Y=()=>{u.escClose&&ie()},y=(v,m,O,I)=>{v&&((m.active||m.value===u.focusValue)&&(D.value=v),u.arrowNavigation&&(Array.isArray(N.value[O])?N.value[O][I]=v:N.value[O]=[v],M()))},M=()=>{var v,m;const O=(v=u.headerRefs)!=null&&v.length?[u.headerRefs].concat(N.value):N.value.concat([u.skipButtonRef?[]:[U.value]]);a(tt(O),(m=u.headerRefs)!=null&&m.length?"monthPicker":"selectionGrid")},j=v=>{u.arrowNavigation||Et(v,$.value,!0)},H=v=>{G.value=v,i("hover-value",v)};return e({focusGrid:L}),(v,m)=>{var O;return r(),d("div",{ref_key:"gridWrapRef",ref:S,class:B(W.value),style:ft(z.value),role:"dialog",tabindex:"0",onKeydown:[De(Pe(Y,["prevent"]),["esc"]),m[0]||(m[0]=De(Pe(I=>j(I),["prevent"]),["left"])),m[1]||(m[1]=De(Pe(I=>j(I),["prevent"]),["up"])),m[2]||(m[2]=De(Pe(I=>j(I),["prevent"]),["down"])),m[3]||(m[3]=De(Pe(I=>j(I),["prevent"]),["right"]))]},[n("div",{ref_key:"containerRef",ref:ee,class:B(k.value),role:"grid",style:ft({height:`${V.value}px`})},[n("div",V8,[ye(v.$slots,"header")]),v.$slots.overlay?ye(v.$slots,"overlay",{key:0}):(r(!0),d(x,{key:1},ne(v.items,(I,oe)=>(r(),d("div",{key:oe,class:B(["dp__overlay_row",{dp__flex_row:v.items.length>=3}]),role:"row"},[(r(!0),d(x,null,ne(I,(re,R)=>(r(),d("div",{key:re.value,ref_for:!0,ref:g=>y(g,re,oe,R),role:"gridcell",class:B(pe.value),"aria-selected":re.active,"aria-disabled":re.disabled||void 0,tabindex:"0",onClick:g=>X(re),onKeydown:[De(Pe(g=>X(re),["prevent"]),["enter"]),De(Pe(g=>X(re),["prevent"]),["space"])],onMouseover:g=>H(re.value)},[n("div",{class:B(re.className)},[v.$slots.item?ye(v.$slots,"item",{key:0,item:re}):c("",!0),v.$slots.item?c("",!0):(r(),d(x,{key:1},[F(f(re.text),1)],64))],2)],42,Y8))),128))],2))),128))],6),v.$slots["button-icon"]?b((r(),d("button",{key:0,ref_key:"toggleButton",ref:U,type:"button","aria-label":(O=w(h))==null?void 0:O.toggleOverlay,class:B(te.value),tabindex:"0",onClick:ie,onKeydown:[De(ie,["enter"]),De(ie,["tab"])]},[ye(v.$slots,"button-icon")],42,I8)),[[Qe,!w(_)(v.hideNavigation,v.type)]]):c("",!0)],46,U8)}}}),es=nt({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(t){const e=t,s=J(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),o=J(()=>({dp__instance_calendar:e.multiCalendars>0}));return(a,l)=>(r(),d("div",{class:B({dp__menu_inner:!a.stretch,"dp--menu--inner-stretched":a.stretch,dp__flex_display:a.multiCalendars>0})},[(r(!0),d(x,null,ne(s.value,(i,u)=>(r(),d("div",{key:i,class:B(o.value)},[ye(a.$slots,"default",{instance:i,index:u})],2))),128))],2))}}),B8=["aria-label","aria-disabled"],Fn=nt({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const s=e,o=ce(null);return rt(()=>s("set-ref",o)),(a,l)=>(r(),d("button",{ref_key:"elRef",ref:o,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":a.ariaLabel,"aria-disabled":a.disabled||void 0,onClick:l[0]||(l[0]=i=>a.$emit("activate")),onKeydown:[l[1]||(l[1]=De(Pe(i=>a.$emit("activate"),["prevent"]),["enter"])),l[2]||(l[2]=De(Pe(i=>a.$emit("activate"),["prevent"]),["space"]))]},[n("span",{class:B(["dp__inner_nav",{dp__inner_nav_disabled:a.disabled}])},[ye(a.$slots,"default")],2)],40,B8))}}),x8={class:"dp--year-mode-picker"},N8=["aria-label"],ya=nt({__name:"YearModePicker",props:{...Ct,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const s=e,o=t,{showRightIcon:a,showLeftIcon:l}=Gn(),{defaultedConfig:i,defaultedMultiCalendars:u,defaultedAriaLabels:h,defaultedTransitions:p}=Ze(o),{showTransition:$,transitionName:_}=Mn(p),C=(N=!1,G)=>{s("toggle-year-picker",{flow:N,show:G})},D=N=>{s("year-select",N)},S=(N=!1)=>{s("handle-year",N)};return(N,G)=>{var U,V,ee;return r(),d("div",x8,[w(l)(w(u),t.instance)?(r(),de(Fn,{key:0,ref:"mpPrevIconRef","aria-label":(U=w(h))==null?void 0:U.prevYear,disabled:t.isDisabled(!1),onActivate:G[0]||(G[0]=P=>S(!1))},{default:q(()=>[N.$slots["arrow-left"]?ye(N.$slots,"arrow-left",{key:0}):c("",!0),N.$slots["arrow-left"]?c("",!0):(r(),de(w(Es),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),n("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(V=w(h))==null?void 0:V.openYearsOverlay,onClick:G[1]||(G[1]=()=>C(!1)),onKeydown:G[2]||(G[2]=De(()=>C(!1),["enter"]))},[N.$slots.year?ye(N.$slots,"year",{key:0,year:t.year}):c("",!0),N.$slots.year?c("",!0):(r(),d(x,{key:1},[F(f(t.year),1)],64))],40,N8),w(a)(w(u),t.instance)?(r(),de(Fn,{key:1,ref:"mpNextIconRef","aria-label":(ee=w(h))==null?void 0:ee.nextYear,disabled:t.isDisabled(!0),onActivate:G[3]||(G[3]=P=>S(!0))},{default:q(()=>[N.$slots["arrow-right"]?ye(N.$slots,"arrow-right",{key:0}):c("",!0),N.$slots["arrow-right"]?c("",!0):(r(),de(w(qs),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),le(vn,{name:w(_)(t.showYearPicker),css:w($)},{default:q(()=>[t.showYearPicker?(r(),de(Rn,{key:0,items:t.items,"text-input":N.textInput,"esc-close":N.escClose,config:N.config,"is-last":N.autoApply&&!w(i).keepActionRow,"hide-navigation":N.hideNavigation,type:"year",onToggle:C,onSelected:G[4]||(G[4]=P=>D(P))},mt({"button-icon":q(()=>[N.$slots["calendar-icon"]?ye(N.$slots,"calendar-icon",{key:0}):c("",!0),N.$slots["calendar-icon"]?c("",!0):(r(),de(w(fn),{key:1}))]),_:2},[N.$slots["year-overlay-value"]?{name:"item",fn:q(({item:P})=>[ye(N.$slots,"year-overlay-value",{text:P.text,value:P.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):c("",!0)]),_:3},8,["name","css"])])}}}),Gs=(t,e,s)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(o=>Ie(t,o))){const o=e.value.filter(a=>!Ie(a,t));e.value=o.length?o:null}else(s&&+s>e.value.length||!s)&&e.value.push(t);else e.value=[t]},Js=(t,e,s)=>{let o=t.value?t.value.slice():[];return o.length===2&&o[1]!==null&&(o=[]),o.length?ot(e,o[0])?(o.unshift(e),s("range-start",o[0]),s("range-start",o[1])):(o[1]=e,s("range-end",e)):(o=[e],s("range-start",e)),t.value=o,o},ts=(t,e,s,o)=>{t[0]&&t[1]&&s&&e("auto-apply"),t[0]&&!t[1]&&o&&s&&e("auto-apply")},ka=t=>{Array.isArray(t.value)&&t.value.length<=2&&t.range?t.modelValue.value=t.value.map(e=>wt(K(e),t.timezone)):Array.isArray(t.value)||(t.modelValue.value=wt(K(t.value),t.timezone))},$a=({multiCalendars:t,highlight:e,calendars:s,modelValue:o,props:a,year:l,month:i,emit:u})=>{const h=J(()=>Ks(a.yearRange,a.reverseYears)),p=ce([!1]),$=J(()=>(P,L)=>{const W=ze(yt(new Date),{month:i.value(P),year:l.value(P)});return va(W,a.maxDate,a.minDate,a.preventMinMaxNavigation,L)}),_=()=>{for(let P=0;P<t.value.count;P++)if(P===0)s.value[P]=s.value[0];else{const L=ze(K(),s.value[P-1]);s.value[P]={month:Ue(L),year:Ae(Rs(L,1))}}},C=P=>{if(!P)return _();const L=ze(K(),s.value[P]);return s.value[0].year=Ae(oa(L,t.value.count-1)),_()},D=P=>a.focusStartDate?P[0]:P[1]?P[1]:P[0],S=()=>{if(o.value){const P=Array.isArray(o.value)?D(o.value):o.value;s.value[0]={month:Ue(P),year:Ae(P)}}};rt(()=>{S(),t.value.count&&_()});const N=(P,L)=>{s.value[L].year=P,t.value.count&&!t.value.solo&&C(L)},G=J(()=>P=>pn(h.value,L=>{const W=l.value(P)===L.value,z=On(L.value,_n(a.minDate),_n(a.maxDate)),pe=Zs(e.value,L.value);return{active:W,disabled:z,highlighted:pe}})),U=(P,L)=>{N(P,L),ee(L)},V=(P,L=!1)=>{if(!$.value(P,L)){const W=L?l.value(P)+1:l.value(P)-1;N(W,P)}},ee=(P,L=!1,W)=>{L||u("reset-flow"),W!==void 0?p.value[P]=W:p.value[P]=!p.value[P],p.value||u("overlay-closed")};return{isDisabled:$,groupedYears:G,showYearPicker:p,selectYear:N,toggleYearPicker:ee,handleYearSelect:U,handleYear:V}},E8=(t,e)=>{const{defaultedMultiCalendars:s,defaultedAriaLabels:o,defaultedTransitions:a,defaultedConfig:l,defaultedHighlight:i}=Ze(t),{modelValue:u,year:h,month:p,calendars:$}=jn(t,e),_=J(()=>da(t.formatLocale,t.locale,t.monthNameFormat)),C=ce(null),{selectYear:D,groupedYears:S,showYearPicker:N,toggleYearPicker:G,handleYearSelect:U,handleYear:V,isDisabled:ee}=$a({modelValue:u,multiCalendars:s,highlight:i,calendars:$,year:h,month:p,props:t,emit:e});rt(()=>{t.startDate&&(u.value&&t.focusStartDate||!u.value)&&D(Ae(K(t.startDate)),0)});const P=j=>j?{month:Ue(j),year:Ae(j)}:{month:null,year:null},L=()=>u.value?Array.isArray(u.value)?u.value.map(j=>P(j)):P(u.value):P(),W=(j,H)=>{const v=$.value[j],m=L();return Array.isArray(m)?m.some(O=>O.year===(v==null?void 0:v.year)&&O.month===H):(v==null?void 0:v.year)===m.year&&H===m.month},z=(j,H,v)=>{var m,O;const I=L();return Array.isArray(I)?h.value(H)===((m=I[v])==null?void 0:m.year)&&j===((O=I[v])==null?void 0:O.month):!1},pe=(j,H)=>{if(t.range){const v=L();if(Array.isArray(u.value)&&Array.isArray(v)){const m=z(j,H,0)||z(j,H,1),O=Rt(yt(K()),j,h.value(H));return Zn(u.value,C.value,O)&&!m}return!1}return!1},te=J(()=>j=>pn(_.value,H=>{const v=W(j,H.value),m=On(H.value,ca(h.value(j),t.minDate),ma(h.value(j),t.maxDate))||r8(t.disabledDates,h.value(j)).includes(H.value),O=pe(H.value,j),I=ba(i.value,H.value,h.value(j));return{active:v,disabled:m,isBetween:O,highlighted:I}})),k=(j,H)=>Rt(yt(K()),j,h.value(H)),A=(j,H)=>{const v=u.value?u.value:yt(new Date);u.value=Rt(v,j,h.value(H)),e("auto-apply")},X=(j,H)=>{const v=Js(u,k(j,H),e);ts(v,e,t.autoApply,t.modelAuto)},ie=(j,H)=>{Gs(k(j,H),u,t.multiDatesLimit),e("auto-apply",!0)},Y=(j,H)=>($.value[H].month=j,M(H,$.value[H].year,j),t.multiDates?ie(j,H):t.range?X(j,H):A(j,H)),y=(j,H)=>{D(j,H),M(H,j,null)},M=(j,H,v)=>{let m=v;if(!m&&m!==0){const O=L();m=Array.isArray(O)?O[j].month:O.month}e("update-month-year",{instance:j,year:H,month:m})};return{groupedMonths:te,groupedYears:S,year:h,isDisabled:ee,defaultedMultiCalendars:s,defaultedAriaLabels:o,defaultedTransitions:a,defaultedConfig:l,showYearPicker:N,modelValue:u,presetDate:(j,H)=>{ka({value:j,modelValue:u,range:t.range,timezone:H?void 0:t.timezone}),e("auto-apply")},setHoverDate:(j,H)=>{C.value=k(j,H)},selectMonth:Y,selectYear:y,toggleYearPicker:G,handleYearSelect:U,handleYear:V,getModelMonthYear:L}},q8=nt({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Ct},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(t,{expose:e,emit:s}){const o=s,a=tn(),l=pt(a,"yearMode"),i=t;rt(()=>{i.shadow||o("mount",null)});const{groupedMonths:u,groupedYears:h,year:p,isDisabled:$,defaultedMultiCalendars:_,defaultedConfig:C,showYearPicker:D,modelValue:S,presetDate:N,setHoverDate:G,selectMonth:U,selectYear:V,toggleYearPicker:ee,handleYearSelect:P,handleYear:L,getModelMonthYear:W}=E8(i,o);return e({getSidebarProps:()=>({modelValue:S,year:p,getModelMonthYear:W,selectMonth:U,selectYear:V,handleYear:L}),presetDate:N,toggleYearPicker:z=>ee(0,z)}),(z,pe)=>(r(),de(es,{"multi-calendars":w(_).count,stretch:""},{default:q(({instance:te})=>[z.$slots["month-year"]?ye(z.$slots,"month-year",Ge(at({key:0},{year:w(p),months:w(u)(te),years:w(h)(te),selectMonth:w(U),selectYear:w(V),instance:te}))):(r(),de(Rn,{key:1,items:w(u)(te),"arrow-navigation":z.arrowNavigation,"is-last":z.autoApply&&!w(C).keepActionRow,"esc-close":z.escClose,height:w(C).modeHeight,config:z.config,"no-overlay-focus":!!(z.noOverlayFocus||z.textInput),"use-relative":"",type:"month",onSelected:k=>w(U)(k,te),onHoverValue:k=>w(G)(k,te)},{header:q(()=>[le(ya,at(z.$props,{items:w(h)(te),instance:te,"show-year-picker":w(D)[te],year:w(p)(te),"is-disabled":k=>w($)(te,k),onHandleYear:k=>w(L)(te,k),onYearSelect:k=>w(P)(k,te),onToggleYearPicker:k=>w(ee)(te,k==null?void 0:k.flow,k==null?void 0:k.show)}),mt({_:2},[ne(w(l),(k,A)=>({name:k,fn:q(X=>[ye(z.$slots,k,Ge(ct(X)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),z8=(t,e)=>{const{modelValue:s}=jn(t,e),o=ce(null),{defaultedHighlight:a,defaultedFilters:l}=Ze(t),i=ce();rt(()=>{t.startDate&&(s.value&&t.focusStartDate||!s.value)&&(i.value=Ae(K(t.startDate)))});const u=_=>Array.isArray(s.value)?s.value.some(C=>Ae(C)===_):s.value?Ae(s.value)===_:!1,h=_=>t.range&&Array.isArray(s.value)?Zn(s.value,o.value,$(_)):!1,p=J(()=>pn(Ks(t.yearRange,t.reverseYears),_=>{const C=u(_.value),D=On(_.value,_n(t.minDate),_n(t.maxDate))||l.value.years.includes(_.value),S=h(_.value)&&!C,N=Zs(a.value,_.value);return{active:C,disabled:D,isBetween:S,highlighted:N}})),$=_=>St(yt(new Date),_);return{groupedYears:p,modelValue:s,focusYear:i,setHoverValue:_=>{o.value=St(yt(new Date),_)},selectYear:_=>{var C;if(t.multiDates)return s.value?Array.isArray(s.value)&&(((C=s.value)==null?void 0:C.map(D=>Ae(D))).includes(_)?s.value=s.value.filter(D=>Ae(D)!==_):s.value.push(St(it(K()),_))):s.value=[St(it(K()),_)],e("auto-apply",!0);if(t.range){const D=Js(s,$(_),e);return ts(D,e,t.autoApply,t.modelAuto)}s.value=$(_),e("auto-apply")}}},L8=nt({compatConfig:{MODE:3},__name:"YearPicker",props:{...Ct},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(t,{expose:e,emit:s}){const o=s,a=t,{groupedYears:l,modelValue:i,focusYear:u,selectYear:h,setHoverValue:p}=z8(a,o),{defaultedConfig:$}=Ze(a);return e({getSidebarProps:()=>({modelValue:i,selectYear:h})}),(_,C)=>(r(),d("div",null,[_.$slots["month-year"]?ye(_.$slots,"month-year",Ge(at({key:0},{years:w(l),selectYear:w(h)}))):(r(),de(Rn,{key:1,items:w(l),"is-last":_.autoApply&&!w($).keepActionRow,height:w($).modeHeight,config:_.config,"no-overlay-focus":!!(_.noOverlayFocus||_.textInput),"focus-value":w(u),type:"year","use-relative":"",onSelected:w(h),onHoverValue:w(p)},mt({_:2},[_.$slots["year-overlay-value"]?{name:"item",fn:q(({item:D})=>[ye(_.$slots,"year-overlay-value",{text:D.text,value:D.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),W8={key:0,class:"dp__time_input"},H8=["aria-label","onKeydown","onClick"],Q8=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),X8=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),K8=["aria-label","disabled","onKeydown","onClick"],Z8=["aria-label","onKeydown","onClick"],G8=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),J8=n("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),eP={key:0},tP=["aria-label","onKeydown"],nP=nt({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Ct},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:s}){const o=s,a=t,{setTimePickerElements:l,setTimePickerBackRef:i}=Ht(),{defaultedAriaLabels:u,defaultedTransitions:h,defaultedFilters:p,defaultedConfig:$}=Ze(a),{transitionName:_,showTransition:C}=Mn(h),D=An({hours:!1,minutes:!1,seconds:!1}),S=ce("AM"),N=ce(null),G=ce([]);rt(()=>{o("mounted")});const U=g=>ze(new Date,{hours:g.hours,minutes:g.minutes,seconds:a.enableSeconds?g.seconds:0,milliseconds:0}),V=J(()=>g=>Y(g,a[g])||P(g,a[g])),ee=J(()=>({hours:a.hours,minutes:a.minutes,seconds:a.seconds})),P=(g,fe)=>a.range&&!a.disableTimeRangeValidation?!a.validateTime(g,fe):!1,L=(g,fe)=>{if(a.range&&!a.disableTimeRangeValidation){const be=fe?+a[`${g}Increment`]:-+a[`${g}Increment`],Z=a[g]+be;return!a.validateTime(g,Z)}return!1},W=J(()=>g=>!M(+a[g]+ +a[`${g}Increment`],g)||L(g,!0)),z=J(()=>g=>!M(+a[g]-+a[`${g}Increment`],g)||L(g,!1)),pe=(g,fe)=>Yo(ze(K(),g),fe),te=(g,fe)=>gD(ze(K(),g),fe),k=J(()=>({dp__time_col:!0,dp__time_col_block:!a.timePickerInline,dp__time_col_reg_block:!a.enableSeconds&&a.is24&&!a.timePickerInline,dp__time_col_reg_inline:!a.enableSeconds&&a.is24&&a.timePickerInline,dp__time_col_reg_with_button:!a.enableSeconds&&!a.is24,dp__time_col_sec:a.enableSeconds&&a.is24,dp__time_col_sec_with_button:a.enableSeconds&&!a.is24})),A=J(()=>{const g=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return a.enableSeconds?g.concat([{type:"",separator:!0},{type:"seconds"}]):g}),X=J(()=>A.value.filter(g=>!g.separator)),ie=J(()=>g=>{if(g==="hours"){const fe=O(+a.hours);return{text:fe<10?`0${fe}`:`${fe}`,value:fe}}return{text:a[g]<10?`0${a[g]}`:`${a[g]}`,value:a[g]}}),Y=(g,fe)=>{var be;if(!a.disabledTimesConfig)return!1;const Z=a.disabledTimesConfig(a.order,g==="hours"?fe:void 0);return Z[g]?!!((be=Z[g])!=null&&be.includes(fe)):!0},y=g=>{const fe=a.is24?24:12,be=g==="hours"?fe:60,Z=+a[`${g}GridIncrement`],Ce=g==="hours"&&!a.is24?Z:0,ge=[];for(let E=Ce;E<be;E+=Z)ge.push({value:E,text:E<10?`0${E}`:`${E}`});return g==="hours"&&!a.is24&&ge.push({value:0,text:"12"}),pn(ge,E=>({active:!1,disabled:p.value.times[g].includes(E.value)||!M(E.value,g)||Y(g,E.value)||P(g,E.value)}))},M=(g,fe)=>{const be=a.minTime?U(hs(a.minTime)):null,Z=a.maxTime?U(hs(a.maxTime)):null,Ce=U(hs(ee.value,fe,g));return be&&Z?(Sn(Ce,Z)||un(Ce,Z))&&(Pn(Ce,be)||un(Ce,be)):be?Pn(Ce,be)||un(Ce,be):Z?Sn(Ce,Z)||un(Ce,Z):!0},j=g=>a[`no${g[0].toUpperCase()+g.slice(1)}Overlay`],H=g=>{j(g)||(D[g]=!D[g],D[g]||o("overlay-closed"))},v=g=>g==="hours"?$t:g==="minutes"?Ot:mn,m=(g,fe=!0)=>{const be=fe?pe:te,Z=fe?+a[`${g}Increment`]:-+a[`${g}Increment`];M(+a[g]+Z,g)&&o(`update:${g}`,v(g)(be({[g]:+a[g]},{[g]:+a[`${g}Increment`]})))},O=g=>a.is24?g:(g>=12?S.value="PM":S.value="AM",QD(g)),I=()=>{S.value==="PM"?(S.value="AM",o("update:hours",a.hours-12)):(S.value="PM",o("update:hours",a.hours+12)),o("am-pm-change",S.value)},oe=g=>{D[g]=!0},re=(g,fe,be)=>{if(g&&a.arrowNavigation){Array.isArray(G.value[fe])?G.value[fe][be]=g:G.value[fe]=[g];const Z=G.value.reduce((Ce,ge)=>ge.map((E,ae)=>[...Ce[ae]||[],ge[ae]]),[]);i(a.closeTimePickerBtn),N.value&&(Z[1]=Z[1].concat(N.value)),l(Z,a.order)}},R=(g,fe)=>(H(g),g==="hours"&&!a.is24?o(`update:${g}`,S.value==="PM"?fe+12:fe):o(`update:${g}`,fe));return e({openChildCmp:oe}),(g,fe)=>{var be;return g.disabled?c("",!0):(r(),d("div",W8,[(r(!0),d(x,null,ne(A.value,(Z,Ce)=>{var ge,E,ae;return r(),d("div",{key:Ce,class:B(k.value)},[Z.separator?(r(),d(x,{key:0},[F(" : ")],64)):(r(),d(x,{key:1},[n("button",{ref_for:!0,ref:Te=>re(Te,Ce,0),type:"button",class:B({dp__btn:!0,dp__inc_dec_button:!g.timePickerInline,dp__inc_dec_button_inline:g.timePickerInline,dp__tp_inline_btn_top:g.timePickerInline,dp__inc_dec_button_disabled:W.value(Z.type)}),"aria-label":(ge=w(u))==null?void 0:ge.incrementValue(Z.type),tabindex:"0",onKeydown:[De(Pe(Te=>m(Z.type),["prevent"]),["enter"]),De(Pe(Te=>m(Z.type),["prevent"]),["space"])],onClick:Te=>m(Z.type)},[a.timePickerInline?(r(),d(x,{key:1},[Q8,X8],64)):(r(),d(x,{key:0},[g.$slots["arrow-up"]?ye(g.$slots,"arrow-up",{key:0}):c("",!0),g.$slots["arrow-up"]?c("",!0):(r(),de(w(Ls),{key:1}))],64))],42,H8),n("button",{ref_for:!0,ref:Te=>re(Te,Ce,1),type:"button","aria-label":(E=w(u))==null?void 0:E.openTpOverlay(Z.type),class:B({dp__time_display:!0,dp__time_display_block:!g.timePickerInline,dp__time_display_inline:g.timePickerInline,"dp--time-invalid":V.value(Z.type),"dp--time-overlay-btn":!V.value(Z.type)}),disabled:j(Z.type),tabindex:"0",onKeydown:[De(Pe(Te=>H(Z.type),["prevent"]),["enter"]),De(Pe(Te=>H(Z.type),["prevent"]),["space"])],onClick:Te=>H(Z.type)},[g.$slots[Z.type]?ye(g.$slots,Z.type,{key:0,text:ie.value(Z.type).text,value:ie.value(Z.type).value}):c("",!0),g.$slots[Z.type]?c("",!0):(r(),d(x,{key:1},[F(f(ie.value(Z.type).text),1)],64))],42,K8),n("button",{ref_for:!0,ref:Te=>re(Te,Ce,2),type:"button",class:B({dp__btn:!0,dp__inc_dec_button:!g.timePickerInline,dp__inc_dec_button_inline:g.timePickerInline,dp__tp_inline_btn_bottom:g.timePickerInline,dp__inc_dec_button_disabled:z.value(Z.type)}),"aria-label":(ae=w(u))==null?void 0:ae.decrementValue(Z.type),tabindex:"0",onKeydown:[De(Pe(Te=>m(Z.type,!1),["prevent"]),["enter"]),De(Pe(Te=>m(Z.type,!1),["prevent"]),["space"])],onClick:Te=>m(Z.type,!1)},[a.timePickerInline?(r(),d(x,{key:1},[G8,J8],64)):(r(),d(x,{key:0},[g.$slots["arrow-down"]?ye(g.$slots,"arrow-down",{key:0}):c("",!0),g.$slots["arrow-down"]?c("",!0):(r(),de(w(Ws),{key:1}))],64))],42,Z8)],64))],2)}),128)),g.is24?c("",!0):(r(),d("div",eP,[g.$slots["am-pm-button"]?ye(g.$slots,"am-pm-button",{key:0,toggle:I,value:S.value}):c("",!0),g.$slots["am-pm-button"]?c("",!0):(r(),d("button",{key:1,ref_key:"amPmButton",ref:N,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(be=w(u))==null?void 0:be.amPmButton,tabindex:"0",onClick:I,onKeydown:[De(Pe(I,["prevent"]),["enter"]),De(Pe(I,["prevent"]),["space"])]},f(S.value),41,tP))])),(r(!0),d(x,null,ne(X.value,(Z,Ce)=>(r(),de(vn,{key:Ce,name:w(_)(D[Z.type]),css:w(C)},{default:q(()=>[D[Z.type]?(r(),de(Rn,{key:0,items:y(Z.type),"is-last":g.autoApply&&!w($).keepActionRow,"esc-close":g.escClose,type:Z.type,"text-input":g.textInput,config:g.config,"arrow-navigation":g.arrowNavigation,onSelected:ge=>R(Z.type,ge),onToggle:ge=>H(Z.type),onResetFlow:fe[0]||(fe[0]=ge=>g.$emit("reset-flow"))},mt({"button-icon":q(()=>[g.$slots["clock-icon"]?ye(g.$slots,"clock-icon",{key:0}):c("",!0),g.$slots["clock-icon"]?c("",!0):(r(),de(Tn(g.timePickerInline?w(fn):w(zs)),{key:1}))]),_:2},[g.$slots[`${Z.type}-overlay-value`]?{name:"item",fn:q(({item:ge})=>[ye(g.$slots,`${Z.type}-overlay-value`,{text:ge.text,value:ge.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),sP={class:"dp--tp-wrap"},oP=["aria-label","tabindex"],aP=["tabindex"],lP=["aria-label"],wa=nt({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Ct},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:s}){const o=s,a=t,{buildMatrix:l,setTimePicker:i}=Ht(),u=tn(),{defaultedTransitions:h,defaultedAriaLabels:p,defaultedTextInput:$,defaultedConfig:_}=Ze(a),{transitionName:C,showTransition:D}=Mn(h),{hideNavigationButtons:S}=Gn(),N=ce(null),G=ce(null),U=ce([]),V=ce(null);rt(()=>{o("mount"),!a.timePicker&&a.arrowNavigation?l([et(N.value)],"time"):i(!0,a.timePicker)});const ee=J(()=>a.range&&a.modelAuto?ua(a.internalModelValue):!0),P=ce(!1),L=y=>({hours:Array.isArray(a.hours)?a.hours[y]:a.hours,minutes:Array.isArray(a.minutes)?a.minutes[y]:a.minutes,seconds:Array.isArray(a.seconds)?a.seconds[y]:a.seconds}),W=J(()=>{const y=[];if(a.range)for(let M=0;M<2;M++)y.push(L(M));else y.push(L(0));return y}),z=(y,M=!1,j="")=>{M||o("reset-flow"),P.value=y,o(y?"overlay-opened":"overlay-closed"),a.arrowNavigation&&i(y),Lt(()=>{j!==""&&U.value[0]&&U.value[0].openChildCmp(j)})},pe=J(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:a.autoApply&&!_.value.keepActionRow})),te=pt(u,"timePicker"),k=(y,M,j)=>a.range?M===0?[y,W.value[1][j]]:[W.value[0][j],y]:y,A=y=>{o("update:hours",y)},X=y=>{o("update:minutes",y)},ie=y=>{o("update:seconds",y)},Y=()=>{if(V.value&&!$.value.enabled&&!a.noOverlayFocus){const y=KD(V.value);y&&y.focus({preventScroll:!0})}};return e({toggleTimePicker:z}),(y,M)=>{var j;return r(),d("div",sP,[!y.timePicker&&!y.timePickerInline?b((r(),d("button",{key:0,ref_key:"openTimePickerBtn",ref:N,type:"button",class:B(pe.value),"aria-label":(j=w(p))==null?void 0:j.openTimePicker,tabindex:y.noOverlayFocus?void 0:0,onKeydown:[M[0]||(M[0]=De(H=>z(!0),["enter"])),M[1]||(M[1]=De(H=>z(!0),["space"]))],onClick:M[2]||(M[2]=H=>z(!0))},[y.$slots["clock-icon"]?ye(y.$slots,"clock-icon",{key:0}):c("",!0),y.$slots["clock-icon"]?c("",!0):(r(),de(w(zs),{key:1}))],42,oP)),[[Qe,!w(S)(y.hideNavigation,"time")]]):c("",!0),le(vn,{name:w(C)(P.value),css:w(D)&&!y.timePickerInline},{default:q(()=>{var H;return[P.value||y.timePicker||y.timePickerInline?(r(),d("div",{key:0,ref_key:"overlayRef",ref:V,class:B({dp__overlay:!y.timePickerInline,"dp--overlay-absolute":!a.timePicker&&!y.timePickerInline,"dp--overlay-relative":a.timePicker}),style:ft(y.timePicker?{height:`${w(_).modeHeight}px`}:void 0),tabindex:y.timePickerInline?void 0:0},[n("div",{class:B(y.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[y.$slots["time-picker-overlay"]?ye(y.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:A,setMinutes:X,setSeconds:ie}):c("",!0),y.$slots["time-picker-overlay"]?c("",!0):(r(),d("div",{key:1,class:B(y.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(r(!0),d(x,null,ne(W.value,(v,m)=>b((r(),de(nP,at({key:m},{...y.$props,order:m,hours:v.hours,minutes:v.minutes,seconds:v.seconds,closeTimePickerBtn:G.value,disabledTimesConfig:t.disabledTimesConfig,disabled:m===0?y.fixedStart:y.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:U,"validate-time":(O,I)=>t.validateTime(O,k(I,m,O)),"onUpdate:hours":O=>A(k(O,m,"hours")),"onUpdate:minutes":O=>X(k(O,m,"minutes")),"onUpdate:seconds":O=>ie(k(O,m,"seconds")),onMounted:Y,onOverlayClosed:Y,onAmPmChange:M[3]||(M[3]=O=>y.$emit("am-pm-change",O))}),mt({_:2},[ne(w(te),(O,I)=>({name:O,fn:q(oe=>[ye(y.$slots,O,Ge(ct(oe)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[Qe,m===0?!0:ee.value]])),128))],2)),!y.timePicker&&!y.timePickerInline?b((r(),d("button",{key:2,ref_key:"closeTimePickerBtn",ref:G,type:"button",class:B(pe.value),"aria-label":(H=w(p))==null?void 0:H.closeTimePicker,tabindex:"0",onKeydown:[M[4]||(M[4]=De(v=>z(!1),["enter"])),M[5]||(M[5]=De(v=>z(!1),["space"]))],onClick:M[6]||(M[6]=v=>z(!1))},[y.$slots["calendar-icon"]?ye(y.$slots,"calendar-icon",{key:0}):c("",!0),y.$slots["calendar-icon"]?c("",!0):(r(),de(w(fn),{key:1}))],42,lP)),[[Qe,!w(S)(y.hideNavigation,"time")]]):c("",!0)],2)],14,aP)):c("",!0)]}),_:3},8,["name","css"])])}}}),Ca=(t,e,s,o)=>{const a=(U,V)=>Array.isArray(e[U])?e[U][V]:e[U],l=U=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[U]:e.seconds:0,i=(U,V)=>U?V!==void 0?qt(U,a("hours",V),a("minutes",V),l(V)):qt(U,e.hours,e.minutes,l()):Ns(K(),l(V)),u=(U,V)=>{e[U]=V},h=(U,V)=>{const ee=Object.fromEntries(Object.keys(e).map(P=>P===U?[P,V]:[P,e[P]].slice()));if(t.range&&!t.disableTimeRangeValidation){const P=W=>s.value?qt(s.value[W],ee.hours[W],ee.minutes[W],ee.seconds[W]):null,L=W=>xs(s.value[W],0);return!(Ie(P(0),P(1))&&(Pn(P(0),L(1))||Sn(P(1),L(0))))}return!0},p=(U,V)=>{h(U,V)&&(u(U,V),o&&o())},$=U=>{p("hours",U)},_=U=>{p("minutes",U)},C=U=>{p("seconds",U)},D=(U,V,ee,P)=>{V&&$(U),!V&&!ee&&_(U),ee&&C(U),s.value&&P(s.value)},S=U=>{if(U){const V=Array.isArray(U),ee=V?[+U[0].hours,+U[1].hours]:+U.hours,P=V?[+U[0].minutes,+U[1].minutes]:+U.minutes,L=V?[+U[0].seconds,+U[1].seconds]:+U.seconds;u("hours",ee),u("minutes",P),t.enableSeconds&&u("seconds",L)}},N=(U,V)=>{const ee={hours:Array.isArray(e.hours)?e.hours[U]:e.hours,disabledArr:[]};return(V||V===0)&&(ee.hours=V),Array.isArray(t.disabledTimes)&&(ee.disabledArr=t.range&&Array.isArray(t.disabledTimes[U])?t.disabledTimes[U]:t.disabledTimes),ee},G=J(()=>(U,V)=>{var ee;if(Array.isArray(t.disabledTimes)){const{disabledArr:P,hours:L}=N(U,V),W=P.filter(z=>+z.hours===L);return((ee=W[0])==null?void 0:ee.minutes)==="*"?{hours:[L],minutes:void 0,seconds:void 0}:{hours:[],minutes:(W==null?void 0:W.map(z=>+z.minutes))??[],seconds:(W==null?void 0:W.map(z=>z.seconds?+z.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:$,updateMinutes:_,updateSeconds:C,getSetDateTime:i,updateTimeValues:D,getSecondsValue:l,assignStartTime:S,validateTime:h,disabledTimesConfig:G}},iP=(t,e)=>{const{modelValue:s,time:o}=jn(t,e),{defaultedStartTime:a}=Ze(t),{updateTimeValues:l,getSetDateTime:i,setTime:u,assignStartTime:h,disabledTimesConfig:p,validateTime:$}=Ca(t,o,s),_=V=>{const{hours:ee,minutes:P,seconds:L}=V;return{hours:+ee,minutes:+P,seconds:L?+L:0}},C=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const ee=_(t.startTime[0]),P=_(t.startTime[1]);return[ze(K(),ee),ze(K(),P)]}const V=_(t.startTime);return ze(K(),V)}return t.range?[null,null]:null},D=()=>{if(t.range){const[V,ee]=C();s.value=[i(V,0),i(ee,1)]}else s.value=i(C())},S=V=>Array.isArray(V)?[Kt(K(V[0])),Kt(K(V[1]))]:[Kt(V??K())],N=(V,ee,P)=>{u("hours",V),u("minutes",ee),u("seconds",t.enableSeconds?P:0)},G=()=>{const[V,ee]=S(s.value);return t.range?N([V.hours,ee.hours],[V.minutes,ee.minutes],[V.seconds,ee.minutes]):N(V.hours,V.minutes,V.seconds)};rt(()=>{if(!t.shadow)return h(a.value),s.value?G():D()});const U=()=>{Array.isArray(s.value)?s.value=s.value.map((V,ee)=>V&&i(V,ee)):s.value=i(s.value),e("time-update")};return{modelValue:s,time:o,disabledTimesConfig:p,updateTime:(V,ee=!0,P=!1)=>{l(V,ee,P,U)},validateTime:$}},rP=nt({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Ct},emits:["update:internal-model-value","time-update","am-pm-change"],setup(t,{expose:e,emit:s}){const o=s,a=t,l=tn(),i=pt(l,"timePicker"),{time:u,modelValue:h,disabledTimesConfig:p,updateTime:$,validateTime:_}=iP(a,o);return e({getSidebarProps:()=>({modelValue:h,time:u,updateTime:$})}),(C,D)=>(r(),de(es,{"multi-calendars":0,stretch:""},{default:q(()=>[le(wa,at(C.$props,{hours:w(u).hours,minutes:w(u).minutes,seconds:w(u).seconds,"internal-model-value":C.internalModelValue,"disabled-times-config":w(p),"validate-time":w(_),"onUpdate:hours":D[0]||(D[0]=S=>w($)(S)),"onUpdate:minutes":D[1]||(D[1]=S=>w($)(S,!1)),"onUpdate:seconds":D[2]||(D[2]=S=>w($)(S,!1,!0)),onAmPmChange:D[3]||(D[3]=S=>C.$emit("am-pm-change",S))}),mt({_:2},[ne(w(i),(S,N)=>({name:S,fn:q(G=>[ye(C.$slots,S,Ge(ct(G)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),dP={class:"dp__month_year_row"},uP=["aria-label","onClick","onKeydown"],cP=nt({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Ct},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(t,{expose:e,emit:s}){const o=s,a=t,{defaultedTransitions:l,defaultedAriaLabels:i,defaultedMultiCalendars:u,defaultedFilters:h,defaultedConfig:p,defaultedHighlight:$}=Ze(a),{transitionName:_,showTransition:C}=Mn(l),{buildMatrix:D}=Ht(),{handleMonthYearChange:S,isDisabled:N,updateMonthYear:G}=k8(a,o),{showLeftIcon:U,showRightIcon:V}=Gn(),ee=ce(!1),P=ce(!1),L=ce([null,null,null,null]);rt(()=>{o("mount")});const W=m=>({get:()=>a[m],set:O=>{const I=m===gt.month?gt.year:gt.month;o("update-month-year",{[m]:O,[I]:a[I]}),m===gt.month?Y(!0):y(!0)}}),z=J(W(gt.month)),pe=J(W(gt.year)),te=J(()=>m=>({month:a.month,year:a.year,items:m===gt.month?a.months:a.years,instance:a.instance,updateMonthYear:G,toggle:m===gt.month?Y:y})),k=J(()=>a.months.find(O=>O.value===a.month)||{text:"",value:0}),A=J(()=>pn(a.months,m=>{const O=a.month===m.value,I=On(m.value,ca(a.year,a.minDate),ma(a.year,a.maxDate))||h.value.months.includes(m.value),oe=ba($.value,m.value,a.year);return{active:O,disabled:I,highlighted:oe}})),X=J(()=>pn(a.years,m=>{const O=a.year===m.value,I=On(m.value,_n(a.minDate),_n(a.maxDate))||h.value.years.includes(m.value),oe=Zs($.value,m.value);return{active:O,disabled:I,highlighted:oe}})),ie=(m,O)=>{O!==void 0?m.value=O:m.value=!m.value,m.value||o("overlay-closed")},Y=(m=!1,O)=>{M(m),ie(ee,O)},y=(m=!1,O)=>{M(m),ie(P,O)},M=m=>{m||o("reset-flow")},j=(m,O)=>{a.arrowNavigation&&(L.value[O]=et(m),D(L.value,"monthYear"))},H=J(()=>{var m,O;return[{type:gt.month,index:1,toggle:Y,modelValue:z.value,updateModelValue:I=>z.value=I,text:k.value.text,showSelectionGrid:ee.value,items:A.value,ariaLabel:(m=i.value)==null?void 0:m.openMonthsOverlay},{type:gt.year,index:2,toggle:y,modelValue:pe.value,updateModelValue:I=>pe.value=I,text:a.year,showSelectionGrid:P.value,items:X.value,ariaLabel:(O=i.value)==null?void 0:O.openYearsOverlay}]}),v=J(()=>a.disableYearSelect?[H.value[0]]:a.yearFirst?[...H.value].reverse():H.value);return e({toggleMonthPicker:Y,toggleYearPicker:y,handleMonthYearChange:S}),(m,O)=>{var I,oe,re;return r(),d("div",dP,[m.$slots["month-year"]?ye(m.$slots,"month-year",Ge(at({key:0},{month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:w(G),handleMonthYearChange:w(S),instance:t.instance}))):(r(),d(x,{key:1},[w(U)(w(u),t.instance)&&!m.vertical?(r(),de(Fn,{key:0,"aria-label":(I=w(i))==null?void 0:I.prevMonth,disabled:w(N)(!1),onActivate:O[0]||(O[0]=R=>w(S)(!1,!0)),onSetRef:O[1]||(O[1]=R=>j(R,0))},{default:q(()=>[m.$slots["arrow-left"]?ye(m.$slots,"arrow-left",{key:0}):c("",!0),m.$slots["arrow-left"]?c("",!0):(r(),de(w(Es),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),n("div",{class:B(["dp__month_year_wrap",{dp__year_disable_select:m.disableYearSelect}])},[(r(!0),d(x,null,ne(v.value,(R,g)=>(r(),d(x,{key:R.type},[n("button",{ref_for:!0,ref:fe=>j(fe,g+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":R.ariaLabel,onClick:R.toggle,onKeydown:[De(Pe(R.toggle,["prevent"]),["enter"]),De(Pe(R.toggle,["prevent"]),["space"])]},[m.$slots[R.type]?ye(m.$slots,R.type,{key:0,text:R.text,value:a[R.type]}):c("",!0),m.$slots[R.type]?c("",!0):(r(),d(x,{key:1},[F(f(R.text),1)],64))],40,uP),le(vn,{name:w(_)(R.showSelectionGrid),css:w(C)},{default:q(()=>[R.showSelectionGrid?(r(),de(Rn,{key:0,items:R.items,"arrow-navigation":m.arrowNavigation,"hide-navigation":m.hideNavigation,"is-last":m.autoApply&&!w(p).keepActionRow,"skip-button-ref":!1,config:m.config,type:R.type,"header-refs":[],"esc-close":m.escClose,"text-input":m.textInput,onSelected:R.updateModelValue,onToggle:R.toggle},mt({"button-icon":q(()=>[m.$slots["calendar-icon"]?ye(m.$slots,"calendar-icon",{key:0}):c("",!0),m.$slots["calendar-icon"]?c("",!0):(r(),de(w(fn),{key:1}))]),_:2},[m.$slots[`${R.type}-overlay-value`]?{name:"item",fn:q(({item:fe})=>[ye(m.$slots,`${R.type}-overlay-value`,{text:fe.text,value:fe.value})]),key:"0"}:void 0,m.$slots[`${R.type}-overlay`]?{name:"overlay",fn:q(()=>[ye(m.$slots,`${R.type}-overlay`,Ge(ct(te.value(R.type))))]),key:"1"}:void 0,m.$slots[`${R.type}-overlay-header`]?{name:"header",fn:q(()=>[ye(m.$slots,`${R.type}-overlay-header`,{toggle:R.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):c("",!0)]),_:2},1032,["name","css"])],64))),128))],2),w(U)(w(u),t.instance)&&m.vertical?(r(),de(Fn,{key:1,"aria-label":(oe=w(i))==null?void 0:oe.prevMonth,disabled:w(N)(!1),onActivate:O[2]||(O[2]=R=>w(S)(!1,!0))},{default:q(()=>[m.$slots["arrow-up"]?ye(m.$slots,"arrow-up",{key:0}):c("",!0),m.$slots["arrow-up"]?c("",!0):(r(),de(w(Ls),{key:1}))]),_:3},8,["aria-label","disabled"])):c("",!0),w(V)(w(u),t.instance)?(r(),de(Fn,{key:2,ref:"rightIcon",disabled:w(N)(!0),"aria-label":(re=w(i))==null?void 0:re.nextMonth,onActivate:O[3]||(O[3]=R=>w(S)(!0,!0)),onSetRef:O[4]||(O[4]=R=>j(R,m.disableYearSelect?2:3))},{default:q(()=>[m.$slots[m.vertical?"arrow-down":"arrow-right"]?ye(m.$slots,m.vertical?"arrow-down":"arrow-right",{key:0}):c("",!0),m.$slots[m.vertical?"arrow-down":"arrow-right"]?c("",!0):(r(),de(Tn(m.vertical?w(Ws):w(qs)),{key:1}))]),_:3},8,["disabled","aria-label"])):c("",!0)],64))])}}}),mP=["aria-label"],hP={class:"dp__calendar_header",role:"row"},pP={key:0,class:"dp__calendar_header_item",role:"gridcell"},_P=n("div",{class:"dp__calendar_header_separator"},null,-1),vP=["aria-label"],fP={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},bP={class:"dp__cell_inner"},gP=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],yP=nt({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Ct},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:s}){const o=s,a=t,{buildMultiLevelMatrix:l}=Ht(),{defaultedTransitions:i,defaultedConfig:u,defaultedAriaLabels:h,defaultedMultiCalendars:p,defaultedWeekNumbers:$}=Ze(a),_=ce(null),C=ce({bottom:"",left:"",transform:""}),D=ce([]),S=ce(null),N=ce(!0),G=ce(""),U=ce({startX:0,endX:0,startY:0,endY:0}),V=ce([]),ee=ce({left:"50%"}),P=J(()=>a.calendar?a.calendar(a.mappedDates):a.mappedDates),L=J(()=>a.dayNames?Array.isArray(a.dayNames)?a.dayNames:a.dayNames(a.locale,+a.weekStart):HD(a.formatLocale,a.locale,+a.weekStart));rt(()=>{o("mount",{cmp:"calendar",refs:D}),u.value.noSwipe||S.value&&(S.value.addEventListener("touchstart",y,{passive:!1}),S.value.addEventListener("touchend",M,{passive:!1}),S.value.addEventListener("touchmove",j,{passive:!1})),a.monthChangeOnScroll&&S.value&&S.value.addEventListener("wheel",m,{passive:!1})});const W=R=>R?a.vertical?"vNext":"next":a.vertical?"vPrevious":"previous",z=(R,g)=>{if(a.transitions){const fe=it(Rt(K(),a.month,a.year));G.value=lt(it(Rt(K(),R,g)),fe)?i.value[W(!0)]:i.value[W(!1)],N.value=!1,Lt(()=>{N.value=!0})}},pe=J(()=>({[a.calendarClassName]:!!a.calendarClassName})),te=J(()=>R=>{const g=XD(R);return{dp__marker_dot:g.type==="dot",dp__marker_line:g.type==="line"}}),k=J(()=>R=>Ie(R,_.value)),A=J(()=>({dp__calendar:!0,dp__calendar_next:p.value.count>0&&a.instance!==0})),X=J(()=>R=>a.hideOffsetDates?R.current:!0),ie=async(R,g,fe)=>{var be,Z;if(o("set-hover-date",R),(Z=(be=R.marker)==null?void 0:be.tooltip)!=null&&Z.length){const Ce=et(D.value[g][fe]);if(Ce){const{width:ge,height:E}=Ce.getBoundingClientRect();_.value=R.value;let ae={left:`${ge/2}px`},Te=-50;if(await Lt(),V.value[0]){const{left:ue,width:Ne}=V.value[0].getBoundingClientRect();ue<0&&(ae={left:"0"},Te=0,ee.value.left=`${ge/2}px`),window.innerWidth<ue+Ne&&(ae={right:"0"},Te=0,ee.value.left=`${Ne-ge/2}px`)}C.value={bottom:`${E}px`,...ae,transform:`translateX(${Te}%)`},o("tooltip-open",R.marker)}}},Y=R=>{_.value&&(_.value=null,C.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),o("tooltip-close",R.marker))},y=R=>{U.value.startX=R.changedTouches[0].screenX,U.value.startY=R.changedTouches[0].screenY},M=R=>{U.value.endX=R.changedTouches[0].screenX,U.value.endY=R.changedTouches[0].screenY,H()},j=R=>{a.vertical&&!a.inline&&R.preventDefault()},H=()=>{const R=a.vertical?"Y":"X";Math.abs(U.value[`start${R}`]-U.value[`end${R}`])>10&&o("handle-swipe",U.value[`start${R}`]>U.value[`end${R}`]?"right":"left")},v=(R,g,fe)=>{R&&(Array.isArray(D.value[g])?D.value[g][fe]=R:D.value[g]=[R]),a.arrowNavigation&&l(D.value,"calendar")},m=R=>{a.monthChangeOnScroll&&(R.preventDefault(),o("handle-scroll",R))},O=R=>$.value.type==="local"?aT(R.value,{weekStartsOn:+a.weekStart}):$.value.type==="iso"?tT(R.value):typeof $.value.type=="function"?$.value.type(R.value):"",I=R=>{const g=R[0];return $.value.hideOnOffsetDates?R.some(fe=>fe.current)?O(g):"":O(g)},oe=(R,g)=>{Et(R,u.value),o("select-date",g)},re=R=>{Et(R,u.value)};return e({triggerTransition:z}),(R,g)=>{var fe;return r(),d("div",{class:B(A.value)},[n("div",{ref_key:"calendarWrapRef",ref:S,role:"grid",class:B(pe.value),"aria-label":(fe=w(h))==null?void 0:fe.calendarWrap},[(r(),d(x,{key:0},[n("div",hP,[R.weekNumbers?(r(),d("div",pP,f(R.weekNumName),1)):c("",!0),(r(!0),d(x,null,ne(L.value,(be,Z)=>(r(),d("div",{key:Z,class:"dp__calendar_header_item",role:"gridcell"},[R.$slots["calendar-header"]?ye(R.$slots,"calendar-header",{key:0,day:be,index:Z}):c("",!0),R.$slots["calendar-header"]?c("",!0):(r(),d(x,{key:1},[F(f(be),1)],64))]))),128))]),_P,le(vn,{name:G.value,css:!!R.transitions},{default:q(()=>{var be;return[N.value?(r(),d("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((be=w(h))==null?void 0:be.calendarDays)||void 0},[(r(!0),d(x,null,ne(P.value,(Z,Ce)=>(r(),d("div",{key:Ce,class:"dp__calendar_row",role:"row"},[R.weekNumbers?(r(),d("div",fP,[n("div",bP,f(I(Z.days)),1)])):c("",!0),(r(!0),d(x,null,ne(Z.days,(ge,E)=>{var ae,Te,ue;return r(),d("div",{id:ge.value.toISOString().split("T")[0],ref_for:!0,ref:Ne=>v(Ne,Ce,E),key:E+Ce,role:"gridcell",class:"dp__calendar_item","aria-selected":ge.classData.dp__active_date||ge.classData.dp__range_start||ge.classData.dp__range_start,"aria-disabled":ge.classData.dp__cell_disabled||void 0,"aria-label":(Te=(ae=w(h))==null?void 0:ae.day)==null?void 0:Te.call(ae,ge),tabindex:"0",onClick:Pe(Ne=>oe(Ne,ge),["prevent"]),onKeydown:[De(Ne=>R.$emit("select-date",ge),["enter"]),De(Ne=>R.$emit("handle-space",ge),["space"])],onMouseenter:Ne=>ie(ge,Ce,E),onMouseleave:Ne=>Y(ge)},[n("div",{class:B(["dp__cell_inner",ge.classData])},[R.$slots.day&&X.value(ge)?ye(R.$slots,"day",{key:0,day:+ge.text,date:ge.value}):c("",!0),R.$slots.day?c("",!0):(r(),d(x,{key:1},[F(f(ge.text),1)],64)),ge.marker&&X.value(ge)?(r(),d(x,{key:2},[R.$slots.marker?ye(R.$slots,"marker",{key:0,marker:ge.marker,day:+ge.text,date:ge.value}):(r(),d("div",{key:1,class:B(te.value(ge.marker)),style:ft(ge.marker.color?{backgroundColor:ge.marker.color}:{})},null,6))],64)):c("",!0),k.value(ge.value)?(r(),d("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:V,class:"dp__marker_tooltip",style:ft(C.value)},[(ue=ge.marker)!=null&&ue.tooltip?(r(),d("div",{key:0,class:"dp__tooltip_content",onClick:re},[(r(!0),d(x,null,ne(ge.marker.tooltip,(Ne,ht)=>(r(),d("div",{key:ht,class:"dp__tooltip_text"},[R.$slots["marker-tooltip"]?ye(R.$slots,"marker-tooltip",{key:0,tooltip:Ne,day:ge.value}):c("",!0),R.$slots["marker-tooltip"]?c("",!0):(r(),d(x,{key:1},[n("div",{class:"dp__tooltip_mark",style:ft(Ne.color?{backgroundColor:Ne.color}:{})},null,4),n("div",null,f(Ne.text),1)],64))]))),128)),n("div",{class:"dp__arrow_bottom_tp",style:ft(ee.value)},null,4)])):c("",!0)],4)):c("",!0)],2)],40,gP)}),128))]))),128))],8,vP)):c("",!0)]}),_:3},8,["name","css"])],64))],10,mP)],2)}}}),So=t=>Array.isArray(t),kP=(t,e,s,o)=>{const a=ce([]),{modelValue:l,calendars:i,time:u}=jn(t,e),{defaultedMultiCalendars:h,defaultedStartTime:p}=Ze(t),{validateMonthYearInRange:$,isDisabled:_,isDateRangeAllowed:C,checkMinMaxRange:D}=sn(t),{updateTimeValues:S,getSetDateTime:N,setTime:G,assignStartTime:U,validateTime:V,disabledTimesConfig:ee}=Ca(t,u,l,o),P=J(()=>T=>i.value[T]?i.value[T].month:0),L=J(()=>T=>i.value[T]?i.value[T].year:0),W=(T,se,we)=>{var Me,Le;i.value[T]||(i.value[T]={month:0,year:0}),i.value[T].month=Co(se)?(Me=i.value[T])==null?void 0:Me.month:se,i.value[T].year=Co(we)?(Le=i.value[T])==null?void 0:Le.year:we},z=()=>{t.autoApply&&e("select-date")};Wt(l,(T,se)=>{JSON.stringify(T)!==JSON.stringify(se)&&k()}),rt(()=>{t.shadow||(l.value||(m(),p.value&&U(p.value)),k(!0),t.focusStartDate&&t.startDate&&m())});const pe=J(()=>{var T;return(T=t.flow)!=null&&T.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),te=()=>{t.autoApply&&pe.value&&e("auto-apply",t.partialFlow)},k=(T=!1)=>{if(l.value)return Array.isArray(l.value)?(a.value=l.value,M(T)):X(l.value,T);if(h.value.count&&T&&!t.startDate)return A(K(),T)},A=(T,se=!1)=>{if((!h.value.count||!h.value.static||se)&&W(0,Ue(T),Ae(T)),h.value.count&&(!h.value.solo||!l.value))for(let we=1;we<h.value.count;we++){const Me=ze(K(),{month:P.value(we-1),year:L.value(we-1)}),Le=Yo(Me,{months:1});i.value[we]={month:Ue(Le),year:Ae(Le)}}},X=(T,se)=>{A(T),G("hours",$t(T)),G("minutes",Ot(T)),G("seconds",mn(T)),h.value.count&&se&&v()},ie=T=>{if(h.value.count){if(h.value.solo)return 0;const se=Ue(T[0]),we=Ue(T[1]);return Math.abs(we-se)<h.value.count?0:1}return 1},Y=(T,se)=>{T[1]&&t.showLastInRange?A(T[ie(T)],se):A(T[0],se);const we=(Me,Le)=>[Me(T[0]),T[1]?Me(T[1]):u[Le][1]];G("hours",we($t,"hours")),G("minutes",we(Ot,"minutes")),G("seconds",we(mn,"seconds"))},y=(T,se)=>{if((t.range||t.weekPicker)&&!t.multiDates)return Y(T,se);if(t.multiDates&&se){const we=T[T.length-1];return X(we,se)}},M=T=>{const se=l.value;y(se,T),h.value.count&&h.value.solo&&v()},j=(T,se)=>{const we=ze(K(),{month:P.value(se),year:L.value(se)}),Me=T<0?kt(we,1):hn(we,1);$(Ue(Me),Ae(Me),T<0,t.preventMinMaxNavigation)&&(W(se,Ue(Me),Ae(Me)),e("update-month-year",{instance:se,month:Ue(Me),year:Ae(Me)}),h.value.count&&!h.value.solo&&H(se),s())},H=T=>{for(let se=T-1;se>=0;se--){const we=hn(ze(K(),{month:P.value(se+1),year:L.value(se+1)}),1);W(se,Ue(we),Ae(we))}for(let se=T+1;se<=h.value.count-1;se++){const we=kt(ze(K(),{month:P.value(se-1),year:L.value(se-1)}),1);W(se,Ue(we),Ae(we))}},v=()=>{if(Array.isArray(l.value)&&l.value.length===2){const T=K(K(l.value[1]?l.value[1]:kt(l.value[0],1))),[se,we]=[Ue(l.value[0]),Ae(l.value[0])],[Me,Le]=[Ue(l.value[1]),Ae(l.value[1])];(se!==Me||se===Me&&we!==Le)&&h.value.solo&&W(1,Ue(T),Ae(T))}else l.value&&!Array.isArray(l.value)&&(W(0,Ue(l.value),Ae(l.value)),A(K()))},m=()=>{t.startDate&&(W(0,Ue(K(t.startDate)),Ae(K(t.startDate))),h.value.count&&H(0))},O=e8((T,se)=>{t.monthChangeOnScroll&&j(t.monthChangeOnScroll!=="inverse"?-T.deltaY:T.deltaY,se)},50),I=(T,se,we=!1)=>{t.monthChangeOnArrows&&t.vertical===we&&oe(T,se)},oe=(T,se)=>{j(T==="right"?-1:1,se)},re=T=>t.markers.find(se=>Ie(s8(T.value),wt(K(se.date),t.timezone))),R=(T,se)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[T==0,!0];case"fair":return[T==0||se>T,!0];case"append":return[!1,!1];default:return[!1,!1]}},g=(T,se,we,Me)=>{if(t.sixWeeks&&T.length<6){const Le=6-T.length,Ft=(se.getDay()+7-Me)%7,Yt=6-(we.getDay()+7-Me)%7,[me,Oe]=R(Ft,Yt);for(let Fe=1;Fe<=Le;Fe++)if(Oe?!!(Fe%2)==me:me){const vt=T[0].days[0],Mt=fe(jt(vt.value,-7),Ue(se));T.unshift({days:Mt})}else{const vt=T[T.length-1],Mt=vt.days[vt.days.length-1],ls=fe(jt(Mt.value,1),Ue(se));T.push({days:ls})}}return T},fe=(T,se)=>{const we=K(T),Me=[];for(let Le=0;Le<7;Le++){const Ft=jt(we,Le),Yt=Ue(Ft)!==se;Me.push({text:t.hideOffsetDates&&Yt?"":Ft.getDate(),value:Ft,current:!Yt,classData:{}})}return Me},be=(T,se)=>{const we=[],Me=new Date(se,T),Le=new Date(se,T+1,0),Ft=t.weekStart,Yt=Gt(Me,{weekStartsOn:Ft}),me=Oe=>{const Fe=fe(Oe,T);if(we.push({days:Fe}),!we[we.length-1].days.some(vt=>Ie(it(vt.value),it(Le)))){const vt=jt(Oe,7);me(vt)}};return me(Yt),g(we,Me,Le,Ft)},Z=T=>(l.value=Nn(K(T.value),t.timezone,t.weekStart),e("date-update",T.value),te()),Ce=T=>{const se=qt(K(T.value),u.hours,u.minutes,on());e("date-update",se),t.multiDates?Gs(se,l,t.multiDatesLimit):l.value=se,o(),Lt().then(()=>{te()})},ge=T=>t.noDisabledRange?pa(a.value[0],T).some(se=>_(se)):!1,E=()=>{a.value=l.value?l.value.slice():[],a.value.length===2&&!(t.fixedStart||t.fixedEnd)&&(a.value=[])},ae=(T,se)=>{const we=[K(T.value),jt(K(T.value),+t.autoRange)];C(we)?(se&&Te(T.value),a.value=we):e("invalid-date",T.value)},Te=T=>{const se=Ue(K(T)),we=Ae(K(T));if(W(0,se,we),h.value.count>0)for(let Me=1;Me<h.value.count;Me++){const Le=o8(ze(K(T),{year:P.value(Me-1),month:L.value(Me-1)}));W(Me,Le.month,Le.year)}},ue=T=>Array.isArray(l.value)&&l.value.length===2?t.fixedStart&&(lt(T,l.value[0])||Ie(T,l.value[0]))?[l.value[0],T]:t.fixedEnd&&(ot(T,l.value[1])||Ie(T,l.value[1]))?[T,l.value[1]]:(e("invalid-fixed-range",T),l.value):[],Ne=T=>{if(ge(T.value)||!D(T.value,l.value,t.fixedStart?0:1))return e("invalid-date",T.value);a.value=ue(K(T.value))},ht=(T,se)=>{if(E(),t.autoRange)return ae(T,se);if(t.fixedStart||t.fixedEnd)return Ne(T);a.value[0]?D(K(T.value),l.value)&&!ge(T.value)?ot(K(T.value),K(a.value[0]))?(a.value.unshift(K(T.value)),e("range-end",a.value[0])):(a.value[1]=K(T.value),e("range-end",a.value[1])):(t.autoApply&&e("auto-apply-invalid",T.value),e("invalid-date",T.value)):(a.value[0]=K(T.value),e("range-start",a.value[0]))},on=(T=!0)=>t.enableSeconds?Array.isArray(u.seconds)?T?u.seconds[0]:u.seconds[1]:u.seconds:0,Vt=T=>{a.value[T]=qt(a.value[T],u.hours[T],u.minutes[T],on(T!==1))},Un=()=>{var T,se;a.value[0]&&a.value[1]&&+((T=a.value)==null?void 0:T[0])>+((se=a.value)==null?void 0:se[1])&&(a.value.reverse(),e("range-start",a.value[0]),e("range-end",a.value[1]))},Vn=()=>{a.value.length&&(a.value[0]&&!a.value[1]?Vt(0):(Vt(0),Vt(1),o()),Un(),l.value=a.value.slice(),ts(a.value,e,t.autoApply,t.modelAuto))},ss=(T,se=!1)=>{if(_(T.value)||!T.current&&t.hideOffsetDates)return e("invalid-date",T.value);if(t.weekPicker)return Z(T);if(!t.range)return Ce(T);So(u.hours)&&So(u.minutes)&&!t.multiDates&&(ht(T,se),Vn())},gn=(T,se)=>{var we;W(T,se.month,se.year),h.value.count&&!h.value.solo&&H(T),e("update-month-year",{instance:T,month:se.month,year:se.year}),s(h.value.solo?T:void 0);const Me=(we=t.flow)!=null&&we.length?t.flow[t.flowStep]:void 0;!se.fromNav&&(Me===Tt.month||Me===Tt.year)&&o()},_t=(T,se)=>{ka({value:T,modelValue:l,range:t.range,timezone:se?void 0:t.timezone}),z(),t.multiCalendars&&Lt().then(()=>k(!0))},os=()=>{t.range?l.value&&Array.isArray(l.value)&&l.value[0]?l.value=ot(K(),l.value[0])?[K(),l.value[0]]:[l.value[0],K()]:l.value=[K()]:l.value=K(),z()},as=()=>{if(Array.isArray(l.value))if(t.multiDates){const T=Yn();l.value[l.value.length-1]=N(T)}else l.value=l.value.map((T,se)=>T&&N(T,se));else l.value=N(l.value);e("time-update")},Yn=()=>Array.isArray(l.value)&&l.value.length?l.value[l.value.length-1]:null;return{calendars:i,modelValue:l,month:P,year:L,time:u,disabledTimesConfig:ee,validateTime:V,getCalendarDays:be,getMarker:re,handleScroll:O,handleSwipe:oe,handleArrow:I,selectDate:ss,updateMonthYear:gn,presetDate:_t,selectCurrentDate:os,updateTime:(T,se=!0,we=!1)=>{S(T,se,we,as)}}},$P={key:0},wP=nt({__name:"DatePicker",props:{...Ct},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:s}){const o=s,a=t,{calendars:l,month:i,year:u,modelValue:h,time:p,disabledTimesConfig:$,validateTime:_,getCalendarDays:C,getMarker:D,handleArrow:S,handleScroll:N,handleSwipe:G,selectDate:U,updateMonthYear:V,presetDate:ee,selectCurrentDate:P,updateTime:L}=kP(a,o,v,m),W=tn(),{setHoverDate:z,getDayClassData:pe,clearHoverDate:te}=F8(h,a),{defaultedMultiCalendars:k}=Ze(a),A=ce([]),X=ce([]),ie=ce(null),Y=pt(W,"calendar"),y=pt(W,"monthYear"),M=pt(W,"timePicker"),j=I=>{a.shadow||o("mount",I)};Wt(l,()=>{a.shadow||setTimeout(()=>{o("recalculate-position")},0)},{deep:!0});const H=J(()=>I=>C(i.value(I),u.value(I)).map(oe=>({...oe,days:oe.days.map(re=>(re.marker=D(re),re.classData=pe(re),re))})));function v(I){var oe;I||I===0?(oe=X.value[I])==null||oe.triggerTransition(i.value(I),u.value(I)):X.value.forEach((re,R)=>re.triggerTransition(i.value(R),u.value(R)))}function m(){o("update-flow-step")}const O=(I,oe=!1)=>{U(I,oe),a.spaceConfirm&&o("select-date")};return e({clearHoverDate:te,presetDate:ee,selectCurrentDate:P,toggleMonthPicker:(I,oe,re=0)=>{var R;(R=A.value[re])==null||R.toggleMonthPicker(I,oe)},toggleYearPicker:(I,oe,re=0)=>{var R;(R=A.value[re])==null||R.toggleYearPicker(I,oe)},toggleTimePicker:(I,oe,re)=>{var R;(R=ie.value)==null||R.toggleTimePicker(I,oe,re)},handleArrow:S,updateMonthYear:V,getSidebarProps:()=>({modelValue:h,month:i,year:u,time:p,updateTime:L,updateMonthYear:V,selectDate:U,presetDate:ee})}),(I,oe)=>(r(),d(x,null,[le(es,{"multi-calendars":w(k).count},{default:q(({instance:re,index:R})=>[I.disableMonthYearSelect?c("",!0):(r(),de(cP,at({key:0,ref:g=>{g&&(A.value[R]=g)},months:w(da)(I.formatLocale,I.locale,I.monthNameFormat),years:w(Ks)(I.yearRange,I.reverseYears),month:w(i)(re),year:w(u)(re),instance:re},I.$props,{onMount:oe[0]||(oe[0]=g=>j(w(Zt).header)),onResetFlow:oe[1]||(oe[1]=g=>I.$emit("reset-flow")),onUpdateMonthYear:g=>w(V)(re,g),onOverlayClosed:oe[2]||(oe[2]=g=>I.$emit("focus-menu"))}),mt({_:2},[ne(w(y),(g,fe)=>({name:g,fn:q(be=>[ye(I.$slots,g,Ge(ct(be)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),le(yP,at({ref:g=>{g&&(X.value[R]=g)},"mapped-dates":H.value(re),month:w(i)(re),year:w(u)(re),instance:re},I.$props,{onSelectDate:g=>w(U)(g,re!==1),onHandleSpace:g=>O(g,re!==1),onSetHoverDate:oe[3]||(oe[3]=g=>w(z)(g)),onHandleScroll:g=>w(N)(g,re),onHandleSwipe:g=>w(G)(g,re),onMount:oe[4]||(oe[4]=g=>j(w(Zt).calendar)),onResetFlow:oe[5]||(oe[5]=g=>I.$emit("reset-flow")),onTooltipOpen:oe[6]||(oe[6]=g=>I.$emit("tooltip-open",g)),onTooltipClose:oe[7]||(oe[7]=g=>I.$emit("tooltip-close",g))}),mt({_:2},[ne(w(Y),(g,fe)=>({name:g,fn:q(be=>[ye(I.$slots,g,Ge(ct({...be})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),I.enableTimePicker?(r(),d("div",$P,[I.$slots["time-picker"]?ye(I.$slots,"time-picker",Ge(at({key:0},{time:w(p),updateTime:w(L)}))):(r(),de(wa,at({key:1,ref_key:"timePickerRef",ref:ie},I.$props,{hours:w(p).hours,minutes:w(p).minutes,seconds:w(p).seconds,"internal-model-value":I.internalModelValue,"disabled-times-config":w($),"validate-time":w(_),onMount:oe[8]||(oe[8]=re=>j(w(Zt).timePicker)),"onUpdate:hours":oe[9]||(oe[9]=re=>w(L)(re)),"onUpdate:minutes":oe[10]||(oe[10]=re=>w(L)(re,!1)),"onUpdate:seconds":oe[11]||(oe[11]=re=>w(L)(re,!1,!0)),onResetFlow:oe[12]||(oe[12]=re=>I.$emit("reset-flow")),onOverlayClosed:oe[13]||(oe[13]=re=>I.$emit("time-picker-close")),onOverlayOpened:oe[14]||(oe[14]=re=>I.$emit("time-picker-open",re)),onAmPmChange:oe[15]||(oe[15]=re=>I.$emit("am-pm-change",re))}),mt({_:2},[ne(w(M),(re,R)=>({name:re,fn:q(g=>[ye(I.$slots,re,Ge(ct(g)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):c("",!0)],64))}}),CP=(t,e)=>{const s=ce(),{defaultedMultiCalendars:o,defaultedConfig:a,defaultedHighlight:l}=Ze(t),{modelValue:i,year:u,month:h,calendars:p}=jn(t,e),{isDisabled:$}=sn(t),{selectYear:_,groupedYears:C,showYearPicker:D,isDisabled:S,toggleYearPicker:N,handleYearSelect:G,handleYear:U}=$a({modelValue:i,multiCalendars:o,highlight:l,calendars:p,month:h,year:u,props:t,emit:e}),V=(te,k)=>[te,k].map(A=>Nt(A,"MMMM",{locale:t.formatLocale})).join("-"),ee=J(()=>te=>i.value?Array.isArray(i.value)?i.value.some(k=>ho(te,k)):ho(i.value,te):!1),P=te=>{if(t.range){if(Array.isArray(i.value)){const k=Ie(te,i.value[0])||Ie(te,i.value[1]);return Zn(i.value,s.value,te)&&!k}return!1}return!1},L=J(()=>te=>{const k=ze(new Date,{year:u.value(te)});return z4({start:W4(k),end:L4(k)}).map(A=>{const X=Dn(A),ie=ao(A),Y=$(A),y=P(X),M=typeof l.value=="function"?l.value({quarter:oo(X),year:Ae(X)}):!!l.value.quarters.find(j=>j.quarter===oo(X)&&j.year===Ae(X));return{text:V(X,ie),value:X,active:ee.value(X),highlighted:M,disabled:Y,isBetween:y}})}),W=te=>{Gs(te,i,t.multiDatesLimit),e("auto-apply",!0)},z=te=>{const k=Js(i,te,e);ts(k,e,t.autoApply,t.modelAuto)},pe=te=>{i.value=te,e("auto-apply")};return{defaultedConfig:a,defaultedMultiCalendars:o,groupedYears:C,year:u,isDisabled:S,quarters:L,showYearPicker:D,modelValue:i,setHoverDate:te=>{s.value=te},selectYear:_,selectQuarter:(te,k,A)=>{if(!A)return p.value[k].month=Ue(ao(te)),t.multiDates?W(te):t.range?z(te):pe(te)},toggleYearPicker:N,handleYearSelect:G,handleYear:U}},FP={class:"dp--quarter-items"},TP=["disabled","onClick","onMouseover"],DP=nt({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Ct},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(t,{expose:e,emit:s}){const o=s,a=t,l=tn(),i=pt(l,"yearMode"),{defaultedMultiCalendars:u,defaultedConfig:h,groupedYears:p,year:$,isDisabled:_,quarters:C,modelValue:D,showYearPicker:S,setHoverDate:N,selectQuarter:G,toggleYearPicker:U,handleYearSelect:V,handleYear:ee}=CP(a,o);return e({getSidebarProps:()=>({modelValue:D,year:$,selectQuarter:G,handleYearSelect:V,handleYear:ee})}),(P,L)=>(r(),de(es,{"multi-calendars":w(u).count,stretch:""},{default:q(({instance:W})=>[n("div",{class:"dp-quarter-picker-wrap",style:ft({minHeight:`${w(h).modeHeight}px`})},[n("div",null,[le(ya,at(P.$props,{items:w(p)(W),instance:W,"show-year-picker":w(S)[W],year:w($)(W),"is-disabled":z=>w(_)(W,z),onHandleYear:z=>w(ee)(W,z),onYearSelect:z=>w(V)(z,W),onToggleYearPicker:z=>w(U)(W,z==null?void 0:z.flow,z==null?void 0:z.show)}),mt({_:2},[ne(w(i),(z,pe)=>({name:z,fn:q(te=>[ye(P.$slots,z,Ge(ct(te)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),n("div",FP,[(r(!0),d(x,null,ne(w(C)(W),(z,pe)=>(r(),d("div",{key:pe},[n("button",{type:"button",class:B(["dp--qr-btn",{"dp--qr-btn-active":z.active,"dp--qr-btn-between":z.isBetween,"dp--qr-btn-disabled":z.disabled,"dp--highlighted":z.highlighted}]),disabled:z.disabled,onClick:te=>w(G)(z.value,W,z.disabled),onMouseover:te=>w(N)(z.value)},[P.$slots.quarter?ye(P.$slots,"quarter",{key:0,value:z.value,text:z.text}):(r(),d(x,{key:1},[F(f(z.text),1)],64))],42,TP)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),PP=["id"],SP={key:0,class:"dp__sidebar_left"},OP={key:1,class:"dp--preset-dates"},AP=["onClick","onKeydown"],MP={key:2,class:"dp__sidebar_right"},jP={key:3,class:"dp__action_extra"},Oo=nt({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Jn,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(t,{expose:e,emit:s}){const o=s,a=t,l=J(()=>{const{openOnTop:E,...ae}=a;return{...ae,flowStep:pe.value,noOverlayFocus:a.noOverlayFocus}}),{setMenuFocused:i,setShiftKey:u,control:h}=ga(),p=tn(),{defaultedTextInput:$,defaultedInline:_,defaultedConfig:C}=Ze(a),D=ce(null),S=ce(0),N=ce(null),G=ce(null),U=ce(!1),V=ce(null);rt(()=>{if(!a.shadow){U.value=!0,ee(),window.addEventListener("resize",ee);const E=et(N);if(E&&!$.value.enabled&&!_.value.enabled&&(i(!0),ie()),E){const ae=Te=>{C.value.allowPreventDefault&&Te.preventDefault(),Et(Te,C.value,!0)};E.addEventListener("pointerdown",ae),E.addEventListener("mousedown",ae)}}}),js(()=>{window.removeEventListener("resize",ee)});const ee=()=>{const E=et(G);E&&(S.value=E.getBoundingClientRect().width)},{arrowRight:P,arrowLeft:L,arrowDown:W,arrowUp:z}=Ht(),{flowStep:pe,updateFlowStep:te,childMount:k,resetFlow:A}=T8(a,o,V),X=J(()=>a.monthPicker?q8:a.yearPicker?L8:a.timePicker?rP:a.quarterPicker?DP:wP),ie=()=>{const E=et(N);E&&E.focus({preventScroll:!0})},Y=J(()=>{var E;return((E=V.value)==null?void 0:E.getSidebarProps())||{}}),y=()=>{a.openOnTop&&o("recalculate-position")},M=pt(p,"action"),j=J(()=>a.monthPicker||a.yearPicker?pt(p,"monthYear"):a.timePicker?pt(p,"timePicker"):pt(p,"shared")),H=J(()=>a.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),v=J(()=>({dp__menu_disabled:a.disabled,dp__menu_readonly:a.readonly})),m=J(()=>({dp__menu:!0,dp__menu_index:!_.value.enabled,dp__relative:_.value.enabled,[a.menuClassName]:!!a.menuClassName})),O=E=>{Et(E,C.value,!0)},I=()=>{a.escClose&&o("close-picker")},oe=E=>{if(a.arrowNavigation){if(E==="up")return z();if(E==="down")return W();if(E==="left")return L();if(E==="right")return P()}else E==="left"||E==="up"?be("handleArrow","left",0,E==="up"):be("handleArrow","right",0,E==="down")},re=E=>{u(E.shiftKey),!a.disableMonthYearSelect&&E.code==="Tab"&&E.target.classList.contains("dp__menu")&&h.value.shiftKeyInMenu&&(E.preventDefault(),Et(E,C.value,!0),o("close-picker"))},R=()=>{ie(),o("time-picker-close")},g=E=>{var ae,Te,ue;(ae=V.value)==null||ae.toggleTimePicker(!1,!1),(Te=V.value)==null||Te.toggleMonthPicker(!1,!1,E),(ue=V.value)==null||ue.toggleYearPicker(!1,!1,E)},fe=(E,ae=0)=>{var Te,ue,Ne;return E==="month"?(Te=V.value)==null?void 0:Te.toggleMonthPicker(!1,!0,ae):E==="year"?(ue=V.value)==null?void 0:ue.toggleYearPicker(!1,!0,ae):E==="time"?(Ne=V.value)==null?void 0:Ne.toggleTimePicker(!0,!1):g(ae)},be=(E,...ae)=>{var Te,ue;(Te=V.value)!=null&&Te[E]&&((ue=V.value)==null||ue[E](...ae))},Z=()=>{be("selectCurrentDate")},Ce=(E,ae)=>{be("presetDate",E,ae)},ge=()=>{be("clearHoverDate")};return e({updateMonthYear:(E,ae)=>{be("updateMonthYear",E,ae)},switchView:fe}),(E,ae)=>{var Te;return r(),d("div",{id:E.uid?`dp-menu-${E.uid}`:void 0,ref_key:"dpMenuRef",ref:N,tabindex:"0",role:"dialog",class:B(m.value),onMouseleave:ge,onClick:O,onKeydown:[De(I,["esc"]),ae[18]||(ae[18]=De(Pe(ue=>oe("left"),["prevent"]),["left"])),ae[19]||(ae[19]=De(Pe(ue=>oe("up"),["prevent"]),["up"])),ae[20]||(ae[20]=De(Pe(ue=>oe("down"),["prevent"]),["down"])),ae[21]||(ae[21]=De(Pe(ue=>oe("right"),["prevent"]),["right"])),re]},[(E.disabled||E.readonly)&&w(_).enabled?(r(),d("div",{key:0,class:B(v.value)},null,2)):c("",!0),!w(_).enabled&&!E.teleportCenter?(r(),d("div",{key:1,class:B(H.value)},null,2)):c("",!0),n("div",{ref_key:"innerMenuRef",ref:G,class:B({dp__menu_content_wrapper:((Te=E.presetDates)==null?void 0:Te.length)||!!E.$slots["left-sidebar"]||!!E.$slots["right-sidebar"]}),style:ft({"--dp-menu-width":`${S.value}px`})},[E.$slots["left-sidebar"]?(r(),d("div",SP,[ye(E.$slots,"left-sidebar",Ge(ct(Y.value)))])):c("",!0),E.presetDates.length?(r(),d("div",OP,[(r(!0),d(x,null,ne(E.presetDates,(ue,Ne)=>(r(),d(x,{key:Ne},[ue.slot?ye(E.$slots,ue.slot,{key:0,presetDate:Ce,label:ue.label,value:ue.value}):(r(),d("button",{key:1,type:"button",style:ft(ue.style||{}),class:"dp__btn dp--preset-range",onClick:Pe(ht=>Ce(ue.value,ue.noTz),["prevent"]),onKeydown:[De(Pe(ht=>Ce(ue.value,ue.noTz),["prevent"]),["enter"]),De(Pe(ht=>Ce(ue.value,ue.noTz),["prevent"]),["space"])]},f(ue.label),45,AP))],64))),128))])):c("",!0),n("div",{ref_key:"calendarWrapperRef",ref:D,class:"dp__instance_calendar",role:"document"},[(r(),de(Tn(X.value),at({ref_key:"dynCmpRef",ref:V},l.value,{"flow-step":w(pe),onMount:w(k),onUpdateFlowStep:w(te),onResetFlow:w(A),onFocusMenu:ie,onSelectDate:ae[0]||(ae[0]=ue=>E.$emit("select-date")),onDateUpdate:ae[1]||(ae[1]=ue=>E.$emit("date-update",ue)),onTooltipOpen:ae[2]||(ae[2]=ue=>E.$emit("tooltip-open",ue)),onTooltipClose:ae[3]||(ae[3]=ue=>E.$emit("tooltip-close",ue)),onAutoApply:ae[4]||(ae[4]=ue=>E.$emit("auto-apply",ue)),onRangeStart:ae[5]||(ae[5]=ue=>E.$emit("range-start",ue)),onRangeEnd:ae[6]||(ae[6]=ue=>E.$emit("range-end",ue)),onInvalidFixedRange:ae[7]||(ae[7]=ue=>E.$emit("invalid-fixed-range",ue)),onTimeUpdate:ae[8]||(ae[8]=ue=>E.$emit("time-update")),onAmPmChange:ae[9]||(ae[9]=ue=>E.$emit("am-pm-change",ue)),onTimePickerOpen:ae[10]||(ae[10]=ue=>E.$emit("time-picker-open",ue)),onTimePickerClose:R,onRecalculatePosition:y,onUpdateMonthYear:ae[11]||(ae[11]=ue=>E.$emit("update-month-year",ue)),onAutoApplyInvalid:ae[12]||(ae[12]=ue=>E.$emit("auto-apply-invalid",ue)),onInvalidDate:ae[13]||(ae[13]=ue=>E.$emit("invalid-date",ue)),"onUpdate:internalModelValue":ae[14]||(ae[14]=ue=>E.$emit("update:internal-model-value",ue))}),mt({_:2},[ne(j.value,(ue,Ne)=>({name:ue,fn:q(ht=>[ye(E.$slots,ue,Ge(ct({...ht})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),E.$slots["right-sidebar"]?(r(),d("div",MP,[ye(E.$slots,"right-sidebar",Ge(ct(Y.value)))])):c("",!0),E.$slots["action-extra"]?(r(),d("div",jP,[E.$slots["action-extra"]?ye(E.$slots,"action-extra",{key:0,selectCurrentDate:Z}):c("",!0)])):c("",!0)],6),!E.autoApply||w(C).keepActionRow?(r(),de(R8,at({key:2,"menu-mount":U.value},l.value,{"calendar-width":S.value,onClosePicker:ae[15]||(ae[15]=ue=>E.$emit("close-picker")),onSelectDate:ae[16]||(ae[16]=ue=>E.$emit("select-date")),onInvalidSelect:ae[17]||(ae[17]=ue=>E.$emit("invalid-select")),onSelectNow:Z}),mt({_:2},[ne(w(M),(ue,Ne)=>({name:ue,fn:q(ht=>[ye(E.$slots,ue,Ge(ct({...ht})))])}))]),1040,["menu-mount","calendar-width"])):c("",!0)],42,PP)}}}),RP=typeof window<"u"?window:void 0,ks=()=>{},UP=t=>Oa()?(Aa(t),!0):!1,VP=(t,e,s,o)=>{if(!t)return ks;let a=ks;const l=Wt(()=>w(t),u=>{a(),u&&(u.addEventListener(e,s,o),a=()=>{u.removeEventListener(e,s,o),a=ks})},{immediate:!0,flush:"post"}),i=()=>{l(),a()};return UP(i),i},YP=(t,e,s,o={})=>{const{window:a=RP,event:l="pointerdown"}=o;return a?VP(a,l,i=>{const u=et(t),h=et(e);!u||!h||u===i.target||i.composedPath().includes(u)||i.composedPath().includes(h)||s(i)},{passive:!0}):void 0},IP=nt({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Jn},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(t,{expose:e,emit:s}){const o=s,a=t,l=tn(),i=ce(!1),u=En(a,"modelValue"),h=En(a,"timezone"),p=ce(null),$=ce(null),_=ce(null),C=ce(!1),D=ce(null),S=ce(!1),N=ce(!1),{setMenuFocused:G,setShiftKey:U}=ga(),{clearArrowNav:V}=Ht(),{mapDatesArrToMap:ee,validateDate:P,isValidTime:L}=sn(a),{defaultedTransitions:W,defaultedTextInput:z,defaultedInline:pe,defaultedConfig:te}=Ze(a),{menuTransition:k,showTransition:A}=Mn(W);rt(()=>{oe(a.modelValue),Lt().then(()=>{if(!pe.value.enabled){const me=v(D.value);me==null||me.addEventListener("scroll",E),window==null||window.addEventListener("resize",ae)}}),pe.value.enabled&&(i.value=!0),window==null||window.addEventListener("keyup",Te),window==null||window.addEventListener("keydown",ue)});const X=J(()=>ee());js(()=>{if(!pe.value.enabled){const me=v(D.value);me==null||me.removeEventListener("scroll",E),window==null||window.removeEventListener("resize",ae)}window==null||window.removeEventListener("keyup",Te),window==null||window.removeEventListener("keydown",ue)});const ie=pt(l,"all",a.presetDates),Y=pt(l,"input");Wt([u,h],()=>{oe(u.value)},{deep:!0});const{openOnTop:y,menuStyle:M,xCorrect:j,setMenuPosition:H,getScrollableParent:v,shadowRender:m}=$8({menuRef:p,menuRefInner:$,inputRef:_,pickerWrapperRef:D,inline:pe,emit:o,props:a,slots:l}),{inputValue:O,internalModelValue:I,parseExternalModelValue:oe,emitModelValue:re,formatInputValue:R,checkBeforeEmit:g}=y8(o,a,C),fe=J(()=>({dp__main:!0,dp__theme_dark:a.dark,dp__theme_light:!a.dark,dp__flex_display:pe.value.enabled,dp__flex_display_with_input:pe.value.input})),be=J(()=>a.dark?"dp__theme_dark":"dp__theme_light"),Z=J(()=>({to:typeof a.teleport=="boolean"?"body":a.teleport,disabled:!a.teleport||pe.value.enabled})),Ce=J(()=>({class:"dp__outer_menu_wrap"})),ge=J(()=>pe.value.enabled&&(a.timePicker||a.monthPicker||a.yearPicker||a.quarterPicker)),E=()=>{i.value&&(te.value.closeOnScroll?_t():H())},ae=()=>{i.value&&H()},Te=me=>{me.key==="Tab"&&!pe.value.enabled&&!a.teleport&&te.value.tabOutClosesMenu&&(D.value.contains(document.activeElement)||_t()),N.value=me.shiftKey},ue=me=>{N.value=me.shiftKey},Ne=()=>{!a.disabled&&!a.readonly&&(m(Oo,a),H(!1),i.value=!0,i.value&&o("open"),i.value||gn(),oe(a.modelValue))},ht=()=>{var me;O.value="",gn(),(me=_.value)==null||me.setParsedDate(null),o("update:model-value",null),o("update:model-timezone-value",null),o("cleared"),te.value.closeOnClearValue&&_t()},on=()=>{const me=I.value;return!me||!Array.isArray(me)&&P(me)?!0:Array.isArray(me)?a.multiDates||me.length===2&&P(me[0])&&P(me[1])?!0:a.partialRange&&!a.timePicker?P(me[0]):!1:!1},Vt=()=>{g()&&on()?(re(),_t()):o("invalid-select",I.value)},Un=me=>{Vn(),re(),te.value.closeOnAutoApply&&!me&&_t()},Vn=()=>{_.value&&z.value.enabled&&_.value.setParsedDate(I.value)},ss=(me=!1)=>{a.autoApply&&L(I.value)&&on()&&(a.range&&Array.isArray(I.value)?(a.partialRange||I.value.length===2)&&Un(me):Un(me))},gn=()=>{z.value.enabled||(I.value=null)},_t=()=>{pe.value.enabled||(i.value&&(i.value=!1,j.value=!1,G(!1),U(!1),V(),o("closed"),O.value&&oe(u.value)),gn(),o("blur"))},os=(me,Oe,Fe=!1)=>{if(!me){I.value=null;return}const vt=Array.isArray(me)?!me.some(ls=>!P(ls)):P(me),Mt=L(me);vt&&Mt&&(I.value=me,Oe&&(S.value=Fe,Vt(),o("text-submit")))},as=()=>{a.autoApply&&L(I.value)&&re(),Vn()},Yn=()=>i.value?_t():Ne(),T=me=>{I.value=me},se=()=>{z.value.enabled&&(C.value=!0,R()),o("focus")},we=()=>{if(z.value.enabled&&(C.value=!1,oe(a.modelValue),S.value)){const me=JD(D.value,N.value);me==null||me.focus()}o("blur")},Me=me=>{$.value&&$.value.updateMonthYear(0,{month:wo(me.month),year:wo(me.year)})},Le=me=>{oe(me??a.modelValue)},Ft=(me,Oe)=>{var Fe;(Fe=$.value)==null||Fe.switchView(me,Oe)},Yt=me=>te.value.onClickOutside?te.value.onClickOutside(me):_t();return YP(p,_,()=>Yt(on)),e({closeMenu:_t,selectDate:Vt,clearValue:ht,openMenu:Ne,onScroll:E,formatInputValue:R,updateInternalModelValue:T,setMonthYear:Me,parseModel:Le,switchView:Ft,toggleMenu:Yn}),(me,Oe)=>(r(),d("div",{ref_key:"pickerWrapperRef",ref:D,class:B(fe.value),"data-datepicker-instance":""},[le(O8,at({ref_key:"inputRef",ref:_,"input-value":w(O),"onUpdate:inputValue":Oe[0]||(Oe[0]=Fe=>eo(O)?O.value=Fe:null),"is-menu-open":i.value},me.$props,{onClear:ht,onOpen:Ne,onSetInputDate:os,onSetEmptyDate:w(re),onSelectDate:Vt,onToggle:Yn,onClose:_t,onFocus:se,onBlur:we,onRealBlur:Oe[1]||(Oe[1]=Fe=>C.value=!1)}),mt({_:2},[ne(w(Y),(Fe,vt)=>({name:Fe,fn:q(Mt=>[ye(me.$slots,Fe,Ge(ct(Mt)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),le(Da,Ge(ct(Z.value)),{default:q(()=>[le(vn,{name:w(k)(w(y)),css:w(A)&&!w(pe).enabled},{default:q(()=>[i.value?(r(),d("div",at({key:0,ref_key:"dpWrapMenuRef",ref:p},Ce.value,{class:{"dp--menu-wrapper":!w(pe).enabled},style:w(pe).enabled?void 0:w(M)}),[le(Oo,at({ref_key:"dpMenuRef",ref:$},me.$props,{"internal-model-value":w(I),"onUpdate:internalModelValue":Oe[2]||(Oe[2]=Fe=>eo(I)?I.value=Fe:null),class:{[be.value]:!0,"dp--menu-wrapper":me.teleport},"open-on-top":w(y),"arr-map-values":X.value,"no-overlay-focus":ge.value,onClosePicker:_t,onSelectDate:Vt,onAutoApply:ss,onTimeUpdate:as,onFlowStep:Oe[3]||(Oe[3]=Fe=>me.$emit("flow-step",Fe)),onUpdateMonthYear:Oe[4]||(Oe[4]=Fe=>me.$emit("update-month-year",Fe)),onInvalidSelect:Oe[5]||(Oe[5]=Fe=>me.$emit("invalid-select",w(I))),onAutoApplyInvalid:Oe[6]||(Oe[6]=Fe=>me.$emit("invalid-select",Fe)),onInvalidFixedRange:Oe[7]||(Oe[7]=Fe=>me.$emit("invalid-fixed-range",Fe)),onRecalculatePosition:w(H),onTooltipOpen:Oe[8]||(Oe[8]=Fe=>me.$emit("tooltip-open",Fe)),onTooltipClose:Oe[9]||(Oe[9]=Fe=>me.$emit("tooltip-close",Fe)),onTimePickerOpen:Oe[10]||(Oe[10]=Fe=>me.$emit("time-picker-open",Fe)),onTimePickerClose:Oe[11]||(Oe[11]=Fe=>me.$emit("time-picker-close",Fe)),onAmPmChange:Oe[12]||(Oe[12]=Fe=>me.$emit("am-pm-change",Fe)),onRangeStart:Oe[13]||(Oe[13]=Fe=>me.$emit("range-start",Fe)),onRangeEnd:Oe[14]||(Oe[14]=Fe=>me.$emit("range-end",Fe)),onDateUpdate:Oe[15]||(Oe[15]=Fe=>me.$emit("date-update",Fe)),onInvalidDate:Oe[16]||(Oe[16]=Fe=>me.$emit("invalid-date",Fe))}),mt({_:2},[ne(w(ie),(Fe,vt)=>({name:Fe,fn:q(Mt=>[ye(me.$slots,Fe,Ge(ct({...Mt})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):c("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),bn=(()=>{const t=IP;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),BP=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"}));Object.entries(BP).forEach(([t,e])=>{t!=="default"&&(bn[t]=e)});const xP={class:"row"},NP={class:"col-md-4"},EP={class:"col-12"},qP={key:0,class:"fa-solid fa-arrow-down-short-wide"},zP={key:1,class:"fa-solid fa-arrow-up-wide-short"},LP={key:0,class:"fa-solid fa-arrow-down-short-wide"},WP={key:1,class:"fa-solid fa-arrow-up-wide-short"},HP={key:0,class:"fa-solid fa-arrow-down-short-wide"},QP={key:1,class:"fa-solid fa-arrow-up-wide-short"},XP={class:"col-md-4 mb-2"},KP=["onClick"],ZP={class:"card-body text-center"},GP={class:"row"},JP={class:"col-md-6"},eS={class:"mb-0"},tS=n("p",{class:"mb-0"},"Начало сеанса",-1),nS={class:"mb-0"},sS=n("p",{class:"mb-0"},"Окончание сеанса",-1),oS={class:"mb-0"},aS={class:"col-md-6"},lS={class:"mb-0"},iS={class:"mb-0"},rS={class:"mb-0"},dS=n("p",{class:"mb-0"},[n("strong",null,"Период")],-1),uS={class:"mb-0"},cS={class:"row"},mS={class:"col-12"},hS={props:["bot","eventId"],components:{VueDatePicker:bn},data(){return{date:null,loading:!0,schedule:[],order:null,direction:null,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginate_object:null}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...Ee(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"])},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{selectTime(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})}}},Fa=Object.assign(hS,{__name:"AppointmentScheduleList",setup(t){return(e,s)=>(r(),d(x,null,[n("div",xP,[n("div",NP,[le(w(bn),{modelValue:e.date,"onUpdate:modelValue":s[0]||(s[0]=o=>e.date=o)},null,8,["modelValue"])]),n("div",EP,[n("p",null,[F(" Тип сортировки: "),n("a",{class:"mx-2",onClick:s[1]||(s[1]=o=>e.loadAndOrder("day")),href:"javascript:void(0)"},[F("По дню недели "),e.order==="day"&&e.direction==="asc"?(r(),d("i",qP)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",zP)):c("",!0)]),n("a",{class:"mx-2",onClick:s[2]||(s[2]=o=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[F("По времени начала "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",LP)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",WP)):c("",!0)]),n("a",{class:"mx-2",onClick:s[3]||(s[3]=o=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[F("По времени окончания "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",HP)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",QP)):c("",!0)])])]),(r(!0),d(x,null,ne(e.schedule,o=>(r(),d("div",XP,[n("div",{class:B(["card btn",{"btn-outline-secondary bg-secondary":o.appointment!=null,"btn-outline-success":o.appointment==null}]),onClick:a=>e.selectTime(o)},[n("div",ZP,[n("div",GP,[n("div",JP,[n("p",eS,[n("strong",null,f(e.days[o.day-1]),1)]),tS,n("p",nS,[n("strong",null,f(o.start_time||"-"),1)]),sS,n("p",oS,[n("strong",null,f(o.end_time||"-"),1)])]),n("div",aS,[n("p",lS,[n("strong",null,f(o.year||"-"),1)]),n("p",iS,[n("strong",null,f(e.months[o.month||0]),1)]),n("p",rS,[n("strong",null,f(o.day_number),1)]),dS,n("p",uS,[n("strong",null,"c "+f(o.week_start||"-"),1),F(" по "),n("strong",null,f(o.week_end||"-"),1)])])])])],10,KP)]))),256))]),n("div",cS,[n("div",mS,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])],64))}}),pS={class:"row"},_S={class:"col-12 mb-3"},vS={class:"form-label",id:"service-title"},fS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),bS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),gS={class:"col-12 mb-3"},yS={key:0},kS=["onClick"],$S={class:"form-label",id:"service-category"},wS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),CS=n("div",null,"Категория услуги (используется для группировки) ",-1),FS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),TS={class:"col-12 mb-3"},DS={class:"form-label",id:"service-description"},PS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),SS=n("div",null," Краткая информация об оказываемой услуге ",-1),OS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),AS={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},MS={class:"col-12 col-md-6 mb-3"},jS={class:"form-label",id:"service-title"},RS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),US=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),VS={class:"col-12 col-md-6 mb-3"},YS={class:"form-label",id:"service-title"},IS=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),BS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),xS={class:"col-12 mb-3"},NS={class:"form-label",id:"service-images"},ES=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qS=n("div",null," Изображение, которое видит пользователь при выборе услуги ",-1),zS=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),LS={class:"col-12 mb-3"},WS={class:"form-check"},HS=n("label",{class:"form-check-label",for:"need_prepayment"}," Необходима предоплата ",-1),QS={class:"row"},XS={class:"col-12"},KS={type:"submit",class:"btn btn-outline-success w-100 p-3"},ZS={key:0},GS={key:1},JS={props:["eventId","bot","service"],data(){return{load:!1,need_reset:!1,categories:[],serviceForm:{id:null,title:null,appointment_event_id:null,description:null,category:null,images:[],need_prepayment:!1,price:0,discount_price:0}}},watch:{serviceForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.loadAppointmentServiceCategories(),console.log("Service form",this.service),this.service&&this.$nextTick(()=>{this.serviceForm={id:this.service.id||null,appointment_event_id:this.service.appointment_event_id||null,title:this.service.title||null,category:this.service.category||null,description:this.service.description||null,images:this.service.images||[],need_prepayment:this.service.need_prepayment||!1,price:this.service.price||0,discount_price:this.service.discount_price||0}})},methods:{loadAppointmentServiceCategories(){this.$store.dispatch("loadAppointmentServiceCategories",{dataObject:{bot_id:this.bot.id||null,event_id:this.eventId||null}}).then(t=>{this.categories=t})},selectPhotos(t){this.serviceForm.images||(this.serviceForm.images=[]);let e=this.serviceForm.images.indexOf(t.file_id);e!==-1?this.serviceForm.images.splice(e,1):this.serviceForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.serviceForm).forEach(e=>{const s=this.serviceForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),t.append("appointment_event_id",this.eventId),this.$store.dispatch(this.serviceForm.id===null?"addAppointmentService":"updateAppointmentService",{appointmentServiceForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Услуги успешно создано")}).catch(e=>{this.$notify("Услуги создания события")})}}},eO=Object.assign(JS,{__name:"AppointmentServiceForm",setup(t){return(e,s)=>{const o=Ut("Popper");return r(),d("form",{onSubmit:s[6]||(s[6]=Pe((...a)=>e.submitForm&&e.submitForm(...a),["prevent"]))},[n("div",pS,[n("div",_S,[n("label",vS,[le(o,{content:"Название оказываемой услуги"},{default:q(()=>[fS]),_:1}),F(" Название услуги "),bS]),b(n("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":s[0]||(s[0]=a=>e.serviceForm.title=a),maxlength:"255","aria-describedby":"service-title",required:""},null,512),[[Q,e.serviceForm.title]])]),n("div",gS,[e.categories?(r(),d("p",yS,[F(" Ранее созданные категории: "),(r(!0),d(x,null,ne(e.categories,a=>(r(),d("span",{onClick:l=>e.serviceForm.category=a,class:"badge bg-primary mr-1 cursor-pointer"},f(a),9,kS))),256))])):c("",!0),n("label",$S,[le(o,null,{content:q(()=>[CS]),default:q(()=>[wS]),_:1}),F(" Категория услуги "),FS]),b(n("input",{type:"text",class:"form-control",placeholder:"Категория услуги","aria-label":"Категория услуги","onUpdate:modelValue":s[1]||(s[1]=a=>e.serviceForm.category=a),maxlength:"255","aria-describedby":"service-category",required:""},null,512),[[Q,e.serviceForm.category]])]),n("div",TS,[n("label",DS,[le(o,null,{content:q(()=>[SS]),default:q(()=>[PS]),_:1}),F(" Описание услуги "),OS,e.serviceForm.description?(r(),d("small",AS," Длина текста "+f(e.serviceForm.description.length)+" / 255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Описание услуги","aria-label":"Описание услуги",maxlength:"255","onUpdate:modelValue":s[2]||(s[2]=a=>e.serviceForm.description=a),"aria-describedby":"service-description",required:""},`
                    `,512),[[Q,e.serviceForm.description]])]),n("div",MS,[n("label",jS,[le(o,{content:"Цена оказываемой услуги"},{default:q(()=>[RS]),_:1}),F(" Цена услуги, руб "),US]),b(n("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":s[3]||(s[3]=a=>e.serviceForm.price=a),"aria-describedby":"price",required:""},null,512),[[Q,e.serviceForm.price]])]),n("div",VS,[n("label",YS,[le(o,{content:"Цена скидки на оказываемую услугу"},{default:q(()=>[IS]),_:1}),F(" Цена скидки на услугу, руб "),BS]),b(n("input",{type:"number",class:"form-control",placeholder:"Цена","aria-label":"Цена",min:"0","onUpdate:modelValue":s[4]||(s[4]=a=>e.serviceForm.discount_price=a),"aria-describedby":"price",required:""},null,512),[[Q,e.serviceForm.discount_price]])]),n("div",xS,[n("label",NS,[le(o,null,{content:q(()=>[qS]),default:q(()=>[ES]),_:1}),F(" Изображение к услуге "),zS]),le(dn,{"need-photo":!0,selected:e.serviceForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])]),n("div",LS,[n("div",WS,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[5]||(s[5]=a=>e.serviceForm.need_prepayment=a),type:"checkbox",id:"need_prepayment"},null,512),[[Se,e.serviceForm.need_prepayment]]),HS])])]),n("div",QS,[n("div",XS,[n("button",KS,[e.serviceForm.id===null?(r(),d("span",ZS,"Создать услугу")):(r(),d("span",GS,"Обновить услугу"))])])])],32)}}}),tO={class:"row py-3"},nO={class:"col-12"},sO={class:"row"},oO={class:"col-12"},aO={key:0},lO={key:1},iO={key:0,class:"col-12 mb-3"},rO={class:"col-12 mb-3"},dO={key:0},uO={key:1},cO={key:1,class:"col-12 mb-3"},mO={class:"row py-3"},hO=n("div",{class:"col-12"},[n("p",{class:"mb-0"},"Выбор статуса")],-1),pO={class:"col-md-3"},_O=["onClick"],vO={class:"row"},fO={class:"col-12 mb-3"},bO={class:"form-label",id:"service-title"},gO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),yO=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),kO={class:"col-12 mb-3"},$O={class:"form-label",id:"service-title"},wO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),CO=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),FO={class:"col-12 mb-3"},TO={class:"form-label",id:"appointment-info"},DO=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),PO=n("div",null," Краткая информация от клиента ",-1),SO=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),OO={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},AO={class:"row"},MO={class:"col-12"},jO={type:"submit",class:"btn btn-outline-success w-100 p-3"},RO={key:0},UO={key:1},VO={props:["eventId","bot","appointment"],data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,statuses:[{value:0,title:"Новая запись"},{value:1,title:"Подтверждение записи"},{value:2,title:"Прохождение по записи"},{value:3,title:"Отмена записи"}],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],appointmentForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0,name:null,phone:null,info:null}}},mounted(){this.appointment&&this.$nextTick(()=>{this.appointmentForm={id:this.appointment.id||null,appointment_event_id:this.appointment.appointment_event_id||null,appointment_schedule_id:this.appointment.appointment_schedule_id||null,bot_user_id:this.appointment.bot_user_id||null,status:this.appointment.status||0,name:this.appointment.name||null,phone:this.appointment.phone||null,info:this.appointment.info||null},this.selected_schedule_time=this.appointment.schedule||null,this.selected_bot_user=this.appointment.botUser||null})},methods:{selectScheduleTime(t){if(t.appointment){this.$notify("Данное время уже занято!");return}this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearAppointmentForm(){this.appointmentForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,status:0},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.appointmentForm.bot_user_id=this.selected_bot_user.id,this.appointmentForm.appointment_schedule_id=this.selected_schedule_time.id,this.appointmentForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.appointmentForm).forEach(e=>{const s=this.appointmentForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointment",{dataObject:{appointmentForm:t}}).then(e=>{this.clearAppointmentForm(),this.$emit("callback"),this.$notify("Запись успешно создана")}).catch(e=>{this.$notify("Ошибка создания записи")})}}},YO=Object.assign(VO,{__name:"AppointmentForm",setup(t){return(e,s)=>{const o=Ut("Popper"),a=en("mask");return r(),d(x,null,[n("div",tO,[n("div",nO,[n("button",{onClick:s[0]||(s[0]=(...l)=>e.clearAppointmentForm&&e.clearAppointmentForm(...l)),class:"btn btn-primary"},"Новая заявка ")])]),n("form",{onSubmit:s[6]||(s[6]=Pe((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[n("div",sO,[n("div",oO,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:s[1]||(s[1]=l=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",aO,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",lO," Пользователь "+f(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",iO,[le(Vo,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),n("div",rO,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:s[2]||(s[2]=l=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",dO,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",uO," Запись на "+f(e.days[e.selected_schedule_time.day-1]||"-")+" с "+f(e.selected_schedule_time.start_time||"-")+" до "+f(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",cO,[le(Fa,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0)]),n("div",mO,[hO,(r(!0),d(x,null,ne(e.statuses,l=>(r(),d("div",pO,[n("button",{type:"button",class:B([{"btn-success text-white":e.appointmentForm.status==l.value},"btn btn-outline-success w-100"]),onClick:i=>e.appointmentForm.status=l.value},f(l.title||"не указано"),11,_O)]))),256))]),n("div",vO,[n("div",fO,[n("label",bO,[le(o,{content:"ФИО человека, который посетит запись"},{default:q(()=>[gO]),_:1}),F(" Ф.И.О. посетителя "),yO]),b(n("input",{type:"text",class:"form-control",placeholder:"Иванов Иван Иванович","aria-label":"ФИО","onUpdate:modelValue":s[3]||(s[3]=l=>e.appointmentForm.name=l),maxlength:"255","aria-describedby":"appointment-name",required:""},null,512),[[Q,e.appointmentForm.name]])]),n("div",kO,[n("label",$O,[le(o,{content:"Номер телефона человека, который посетит запись"},{default:q(()=>[wO]),_:1}),F(" Телефонный номер "),CO]),b(n("input",{type:"text",class:"form-control",placeholder:"+7(000)000-00-00","aria-label":"номер телефона","onUpdate:modelValue":s[4]||(s[4]=l=>e.appointmentForm.phone=l),maxlength:"255","aria-describedby":"appointment-phone",required:""},null,512),[[a,"+7(###)###-##-##"],[Q,e.appointmentForm.phone]])]),n("div",FO,[n("label",TO,[le(o,null,{content:q(()=>[PO]),default:q(()=>[DO]),_:1}),F(" Описание услуги "),SO,e.appointmentForm.info?(r(),d("small",OO," Длина текста "+f(e.appointmentForm.info.length)+" / 255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Информация от клиента","aria-label":"Информация от клиента",maxlength:"255","onUpdate:modelValue":s[5]||(s[5]=l=>e.appointmentForm.info=l),"aria-describedby":"appointment-info",required:""},`
                    `,512),[[Q,e.appointmentForm.info]])])]),n("div",AO,[n("div",MO,[n("button",jO,[e.appointmentForm.id==null?(r(),d("span",RO,"Записаться")):(r(),d("span",UO,"Обновить запись"))])])])],32)],64)}}}),IO={class:"row"},BO={class:"col-12"},xO={key:0,class:"table"},NO=n("th",{scope:"col"},"Действие",-1),EO=["onClick"],qO={scope:"row"},zO={key:0},LO={key:0,class:"dropdown"},WO=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),HO={class:"dropdown-menu"},QO={key:0},XO=["onClick"],KO={key:1},ZO={class:"col-12"},GO={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,statuses:["Новая запись","Подтверждение записи","Прохождение по записи","Отмена записи"],days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],paginate_object:null}},computed:{...Ee(["getAppointments","getAppointmentsPaginateObject"])},mounted(){this.loadAppointments()},methods:{nextAppointments(t){this.loadAppointments(t)},selectAppointment(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointments(0)},removeAppointment(t){this.loading=!0,this.$store.dispatch("removeAppointment",{dataObject:{appointmentId:t}}).then(e=>{this.loading=!1,this.loadAppointments(0),this.$notify("Запись успешно удалена")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления записи")})},loadAppointments(t=0){this.loading=!0,this.$store.dispatch("loadAppointments",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointments,this.paginate_object=this.getAppointmentsPaginateObject}).catch(()=>{this.loading=!1})}}},JO=Object.assign(GO,{__name:"AppointmentsTable",setup(t){return(e,s)=>(r(),d("div",IO,[n("div",BO,[e.services.length>0?(r(),d("table",xO,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("bot_user_id"))},"Пользователь"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("appointment_schedule_id"))},"Дата записи "),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=o=>e.loadAndOrder("status"))},"Статус"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.loadAndOrder("name"))},"Посетитель"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[5]||(s[5]=o=>e.loadAndOrder("phone"))},"Телефон посетителя"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=o=>e.loadAndOrder("info"))},"Доп.инф"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),NO])]),n("tbody",null,[(r(!0),d(x,null,ne(e.services,(o,a)=>(r(),d("tr",{onClick:l=>e.selectAppointment(o),class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",qO,f(o.id),1),n("td",null,f(o.botUser.fio_from_telegram||o.botUser.telegram_chat_id||"Не указано"),1),n("td",null,[o.schedule?(r(),d("p",zO," Запись на "+f(e.days[o.schedule.day-1]||"Не указано")+" с "+f(o.schedule.start_time||"Не указано")+" до "+f(o.schedule.end_time||"Не указано"),1)):c("",!0)]),n("td",null,f(e.statuses[o.status]),1),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,f(o.name||"не указано"),1),n("td",null,f(o.phone||"не указано"),1),n("td",null,f(o.info||"не указано"),1),n("td",null,[o.id?(r(),d("div",LO,[WO,n("ul",HO,[o.deleted_at==null?(r(),d("li",QO,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointment(o.id),href:"javascript:void(0)"},"Удалить",8,XO)])):c("",!0)])])):c("",!0)])],10,EO))),256))])])):(r(),d("p",KO,"На текущий момент нет ни одного созданного сервиса"))]),n("div",ZO,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointments,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),e7={class:"row py-2"},t7={class:"col-12"},n7={class:"input-group mb-3"},s7={class:"col-12"},o7={key:0,class:"table"},a7=n("th",{scope:"col"},"Действие",-1),l7={scope:"row"},i7=["onClick"],r7={key:0,class:"fa-solid fa-chevron-down text-success"},d7={key:1,class:"fa-solid fa-xmark text-danger"},u7={key:0,class:"dropdown"},c7=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),m7={class:"dropdown-menu"},h7={key:0},p7=["onClick"],_7={key:1},v7={class:"col-12"},f7={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,events:[],search:null,paginate_object:null}},computed:{...Ee(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){this.loadAppointmentEvents()},methods:{removeAppointmentEvent(t){this.loading=!0,this.$store.dispatch("removeAppointmentEvent",{dataObject:{appointmentEventId:t}}).then(e=>{this.loading=!1,this.loadAppointmentEvents(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},nextAppointmentEvents(t){this.loadAppointmentEvents(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentEvents(0)},loadAppointmentEvents(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentEvents",{dataObject:{bot_id:this.bot.id||null,search:this.search,is_group:this.is_group,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.events=this.getAppointmentEvents,this.paginate_object=this.getAppointmentEventsPaginateObject}).catch(()=>{this.loading=!1})}}},b7=Object.assign(f7,{__name:"AppointmentEventTable",setup(t){return(e,s)=>(r(),d("div",e7,[n("div",t7,[n("div",n7,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск события","aria-label":"Поиск события","onUpdate:modelValue":s[0]||(s[0]=o=>e.search=o),"aria-describedby":"appointment-search-event"},null,512),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=o=>e.loadAppointmentEvents(0)),type:"button",id:"appointment-search-event"},"Найти ")])]),n("div",s7,[e.events.length>0?(r(),d("table",o7,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.loadAndOrder("subtitle"))},"Подзаголовок"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[5]||(s[5]=o=>e.loadAndOrder("description"))},"Описание"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=o=>e.loadAndOrder("is_group"))},"Групповое"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),a7])]),n("tbody",null,[(r(!0),d(x,null,ne(e.events,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",l7,f(o.id),1),n("td",{onClick:l=>e.selectEvent(o)},f(o.title||"Не указано"),9,i7),n("td",null,f(o.subtitle||"Не указано"),1),n("td",null,f(o.description||"Не указано"),1),n("td",null,[o.is_group?(r(),d("i",r7)):(r(),d("i",d7))]),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",u7,[c7,n("ul",m7,[o.deleted_at==null?(r(),d("li",h7,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentEvent(o.id),href:"javascript:void(0)"},"Удалить",8,p7)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",_7,"На текущий момент нет событий в вашем списке"))]),n("div",v7,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointmentEvents,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),g7={class:"row"},y7={class:"col-12"},k7={key:0,class:"table"},$7=n("th",{scope:"col"},"Действие",-1),w7={scope:"row"},C7=["onClick"],F7={key:0,class:"fa-solid fa-chevron-down text-success"},T7={key:1,class:"fa-solid fa-xmark text-danger"},D7={key:0,class:"dropdown"},P7=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),S7={class:"dropdown-menu"},O7={key:0},A7=["onClick"],M7={key:1},j7={class:"col-12"},R7={props:["bot","eventId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,services:[],search:null,paginate_object:null}},computed:{...Ee(["getAppointmentServices","getAppointmentServicesPaginateObject"])},mounted(){this.loadAppointmentServices()},methods:{nextAppointmentService(t){this.loadAppointmentServices(t)},selectService(t){this.$emit("select",t)},removeAppointmentService(t){this.loading=!0,this.$store.dispatch("removeAppointmentService",{dataObject:{appointmentServiceId:t}}).then(e=>{this.loading=!1,this.loadAppointmentServices(0),this.$notify("Сервис успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentServices(0)},loadAppointmentServices(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentServices",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.services=this.getAppointmentServices,this.paginate_object=this.getAppointmentServicesPaginateObject}).catch(()=>{this.loading=!1})}}},U7=Object.assign(R7,{__name:"AppointmentServicesTable",setup(t){return(e,s)=>(r(),d("div",g7,[n("div",y7,[e.services.length>0?(r(),d("table",k7,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("subtitle"))},"Подзаголовок"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=o=>e.loadAndOrder("description"))},"Описание"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.loadAndOrder("is_group"))},"Групповое"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[5]||(s[5]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),$7])]),n("tbody",null,[(r(!0),d(x,null,ne(e.services,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",w7,f(o.id),1),n("td",{onClick:l=>e.selectService(o)},f(o.title||"Не указано"),9,C7),n("td",null,f(o.subtitle||"Не указано"),1),n("td",null,f(o.description||"Не указано"),1),n("td",null,[o.is_group?(r(),d("i",F7)):(r(),d("i",T7))]),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",D7,[P7,n("ul",S7,[o.deleted_at==null?(r(),d("li",O7,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentService(o.id),href:"javascript:void(0)"},"Удалить",8,A7)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",M7,"На текущий момент нет ни одного созданого сервиса"))]),n("div",j7,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointmentService,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),V7={class:"row"},Y7={class:"col-12 mb-3"},I7={class:"form-label",id:"event-title"},B7=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),x7=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),N7={class:"col-12 mb-3"},E7={class:"form-label",id:"event-subtitle"},q7=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),z7=n("div",null,"Подзаголовок события или доп. инфа под названием события ",-1),L7=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),W7={class:"col-12 mb-3"},H7={class:"form-label",id:"event-description"},Q7=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),X7=n("div",null," Краткая информация о происходящем мероприятии ",-1),K7=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Z7={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},G7={class:"col-12 mb-3"},J7={class:"form-label",id:"event-on_start_appointment"},eA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),tA=n("div",null," Текст, который будет отображен клиенту, когда тот записался ",-1),nA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),sA={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},oA={class:"col-12 mb-3"},aA={class:"form-label",id:"event-on_cancel_appointment"},lA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),iA=n("div",null," Текст, который будет отображен клиенту, когда тот отменил запись ",-1),rA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),dA={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},uA={class:"col-12 mb-3"},cA={class:"form-label",id:"event-on_after_appointment"},mA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),hA=n("div",null," Текст, который будет отображен клиенту, когда тот прошел событие успешно ",-1),pA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),_A={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},vA={class:"col-12 mb-3"},fA={class:"form-label",id:"event-on_repeat_appointment"},bA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),gA=n("div",null," Текст, который будет отображен клиенту, когда тот записывается 2й и более раз ",-1),yA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),kA={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},$A={class:"col-12 mb-3"},wA={class:"form-check"},CA=n("label",{class:"form-check-label",for:"need_media"}," Нужно изображение к событию ",-1),FA={key:0,class:"col-12 mb-3"},TA={class:"form-label",id:"event-images"},DA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),PA=n("div",null," Изображение, которое видит пользователь при выборе события ",-1),SA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),OA={class:"col-12 mb-3"},AA={class:"form-check"},MA=n("label",{class:"form-check-label",for:"is-group"}," Является групповым мероприятием ",-1),jA={key:1,class:"col-md-6 col-12 mb-3"},RA={class:"form-label",id:"event-min_people"},UA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),VA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),YA={key:2,class:"col-md-6 col-12 mb-3"},IA={class:"form-label",id:"event-max_people"},BA=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xA=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),NA={class:"row"},EA={class:"col-12"},qA={type:"submit",class:"btn btn-outline-success w-100 p-3"},zA={key:0},LA={key:1},WA={props:["event","bot"],data(){return{step:0,load:!1,need_reset:!1,need_services:!1,need_media:!1,eventForm:{id:null,title:null,subtitle:null,description:null,images:[],services:[],times:[],is_group:!1,max_people:0,min_people:0,on_start_appointment:null,on_cancel_appointment:null,on_after_appointment:null,on_repeat_appointment:null}}},watch:{eventForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.event&&this.$nextTick(()=>{this.eventForm={id:this.event.id||null,title:this.event.title||null,subtitle:this.event.subtitle||null,description:this.event.description||null,images:this.event.images||[],is_group:this.event.is_group||!1,max_people:this.event.max_people||0,min_people:this.event.min_people||0,on_start_appointment:this.event.on_start_appointment||null,on_cancel_appointment:this.event.on_cancel_appointment||null,on_after_appointment:this.event.on_after_appointment||null,on_repeat_appointment:this.event.on_repeat_appointment||null}})},methods:{selectPhotos(t){this.eventForm.images||(this.eventForm.images=[]);let e=this.eventForm.images.indexOf(t.file_id);e!==-1?this.eventForm.images.splice(e,1):this.eventForm.images.push(t.file_id)},resetForm(){},submitForm(){let t=new FormData;Object.keys(this.eventForm).forEach(e=>{const s=this.eventForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),this.$store.dispatch(this.eventForm.id===null?"addAppointmentEvent":"updateAppointmentEvent",{appointmentEventForm:t}).then(e=>{this.$emit("callback",e.data),this.$notify("Событие успешно создано")}).catch(e=>{this.$notify("Ошибка создания события")})}}},Ao=Object.assign(WA,{__name:"AppointmentEventForm",setup(t){return(e,s)=>{const o=Ut("Popper");return r(),d("form",{onSubmit:s[11]||(s[11]=Pe((...a)=>e.submitForm&&e.submitForm(...a),["prevent"]))},[n("div",V7,[n("div",Y7,[n("label",I7,[le(o,{content:"Название вашего события (или специалиста), на которое планируется осуществить запись"},{default:q(()=>[B7]),_:1}),F(" Название события "),x7]),b(n("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":s[0]||(s[0]=a=>e.eventForm.title=a),maxlength:"255","aria-describedby":"event-title",required:""},null,512),[[Q,e.eventForm.title]])]),n("div",N7,[n("label",E7,[le(o,null,{content:q(()=>[z7]),default:q(()=>[q7]),_:1}),F(" Подзаголовок события "),L7]),b(n("input",{type:"text",class:"form-control",placeholder:"Подзаголовок","aria-label":"Подзаголовок","onUpdate:modelValue":s[1]||(s[1]=a=>e.eventForm.subtitle=a),maxlength:"255","aria-describedby":"event-subtitle",required:""},null,512),[[Q,e.eventForm.subtitle]])]),n("div",W7,[n("label",H7,[le(o,null,{content:q(()=>[X7]),default:q(()=>[Q7]),_:1}),F(" Описание события "),K7,e.eventForm.description?(r(),d("small",Z7," Длина текста "+f(e.eventForm.description.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Описание мероприятия","aria-label":"Описание мероприятия",maxlength:"255","onUpdate:modelValue":s[2]||(s[2]=a=>e.eventForm.description=a),"aria-describedby":"event-description",required:""},`
                    `,512),[[Q,e.eventForm.description]])]),n("div",G7,[n("label",J7,[le(o,null,{content:q(()=>[tA]),default:q(()=>[eA]),_:1}),F(" Текст при записи на событие "),nA,e.eventForm.on_start_appointment?(r(),d("small",sA," Длина текста "+f(e.eventForm.on_start_appointment.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст при записи на событие","aria-label":"Текст при записи на событие","onUpdate:modelValue":s[3]||(s[3]=a=>e.eventForm.on_start_appointment=a),maxlength:"255","aria-describedby":"event-on_start_appointment",required:""},`
                    `,512),[[Q,e.eventForm.on_start_appointment]])]),n("div",oA,[n("label",aA,[le(o,null,{content:q(()=>[iA]),default:q(()=>[lA]),_:1}),F(" Текст при отмене записи на событие "),rA,e.eventForm.on_cancel_appointment?(r(),d("small",dA," Длина текста "+f(e.eventForm.on_cancel_appointment.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст при отмене записи на событие","aria-label":"Текст при отмене записи на событие","onUpdate:modelValue":s[4]||(s[4]=a=>e.eventForm.on_cancel_appointment=a),maxlength:"255","aria-describedby":"event-on_cancel_appointment",required:""},`
                    `,512),[[Q,e.eventForm.on_cancel_appointment]])]),n("div",uA,[n("label",cA,[le(o,null,{content:q(()=>[hA]),default:q(()=>[mA]),_:1}),F(" Текст после прохождения события "),pA,e.eventForm.on_after_appointment?(r(),d("small",_A," Длина текста "+f(e.eventForm.on_after_appointment.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст после прохождения события","aria-label":"Текст после прохождения события","onUpdate:modelValue":s[5]||(s[5]=a=>e.eventForm.on_after_appointment=a),maxlength:"255","aria-describedby":"event-on_after_appointment",required:""},`
                    `,512),[[Q,e.eventForm.on_after_appointment]])]),n("div",vA,[n("label",fA,[le(o,null,{content:q(()=>[gA]),default:q(()=>[bA]),_:1}),F(" Текст при повторной записи на событие "),yA,e.eventForm.on_repeat_appointment?(r(),d("small",kA," Длина текста "+f(e.eventForm.on_repeat_appointment.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:" Текст при повторной записи на событие","aria-label":" Текст при повторной записи на событие","onUpdate:modelValue":s[6]||(s[6]=a=>e.eventForm.on_repeat_appointment=a),maxlength:"255","aria-describedby":"event-on_repeat_appointment",required:""},`
                    `,512),[[Q,e.eventForm.on_repeat_appointment]])]),n("div",$A,[n("div",wA,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[7]||(s[7]=a=>e.need_media=a),type:"checkbox",id:"need_media"},null,512),[[Se,e.need_media]]),CA])]),e.need_media?(r(),d("div",FA,[n("label",TA,[le(o,null,{content:q(()=>[PA]),default:q(()=>[DA]),_:1}),F(" Изображение к событию "),SA]),le(dn,{"need-photo":!0,selected:e.eventForm.images,onSelect:e.selectPhotos},null,8,["selected","onSelect"])])):c("",!0),n("div",OA,[n("div",AA,[b(n("input",{class:"form-check-input","onUpdate:modelValue":s[8]||(s[8]=a=>e.eventForm.is_group=a),type:"checkbox",id:"is-group"},null,512),[[Se,e.eventForm.is_group]]),MA])]),e.eventForm.is_group?(r(),d("div",jA,[n("label",RA,[le(o,{content:"Минимально необходимое число людей, для начала 1 мероприятия"},{default:q(()=>[UA]),_:1}),F(" Минимальное число посетителей в группе "),VA]),b(n("input",{type:"number",class:"form-control",placeholder:"Минимальное число посетителей","aria-label":"Название","onUpdate:modelValue":s[9]||(s[9]=a=>e.eventForm.min_people=a),"aria-describedby":"event-min_people",required:""},null,512),[[Q,e.eventForm.min_people]])])):c("",!0),e.eventForm.is_group?(r(),d("div",YA,[n("label",IA,[le(o,{content:"Количество людей, которые могут посетить мероприятие за 1 сеанс"},{default:q(()=>[BA]),_:1}),F(" Максимальное число посетителей в группе "),xA]),b(n("input",{type:"number",class:"form-control",placeholder:"Максимальное число посетителей","aria-label":"Название","onUpdate:modelValue":s[10]||(s[10]=a=>e.eventForm.max_people=a),"aria-describedby":"event-max_people",required:""},null,512),[[Q,e.eventForm.max_people]])])):c("",!0)]),n("div",NA,[n("div",EA,[n("button",qA,[e.eventForm.id==null?(r(),d("span",zA,"Создать событие")):(r(),d("span",LA,"Обновить событие"))])])])],32)}}}),HA={class:"row pt-3"},QA={class:"col-md-4"},XA={class:"form-floating mb-3"},KA=n("label",{for:"config-step"},"Шаг, минуты",-1),ZA={class:"col-md-4"},GA={class:"form-floating mb-3"},JA=n("label",{for:"config-start-time"},"Начало, часы",-1),eM={class:"col-md-4"},tM={class:"form-floating mb-3"},nM=["min"],sM=n("label",{for:"config-end-time"},"Конец, часы",-1),oM=n("hr",null,null,-1),aM={key:0,class:"row"},lM={class:"col-12 d-flex justify-content-end pb-3"},iM={class:"row"},rM={class:"col-md-4 text-center"},dM={key:0,class:"fa-solid fa-arrow-down-short-wide"},uM={key:1,class:"fa-solid fa-arrow-up-wide-short"},cM={class:"col-md-4 text-center"},mM={key:0,class:"fa-solid fa-arrow-down-short-wide"},hM={key:1,class:"fa-solid fa-arrow-up-wide-short"},pM={class:"col-md-4 text-center"},_M={key:0,class:"fa-solid fa-arrow-down-short-wide"},vM={key:1,class:"fa-solid fa-arrow-up-wide-short"},fM={class:"col-md-4"},bM={class:"form-floating"},gM=["onUpdate:modelValue","id"],yM=["for"],kM={class:"col-md-4"},$M={class:"form-floating"},wM=["onUpdate:modelValue","id"],CM=["for"],FM={class:"col-md-4"},TM={class:"form-floating"},DM=["onUpdate:modelValue","id"],PM=["for"],SM={class:"row mt-3"},OM={class:"col-12"},AM={class:"row"},MM={class:"col-12"},jM={class:"col-12"},RM={class:"text-center"},UM={class:"row d-flex justify-content-center"},VM={class:"col-md-4"},YM={class:"table"},IM=n("th",{scope:"col"},"#",-1),BM={scope:"col"},xM={scope:"row"},NM=["onClick"],EM={key:0,class:"fa-solid fa-check"},qM={key:1,class:"fa-solid fa-xmark"},zM={components:{VueDatePicker:bn},props:["eventId","bot"],data(){return{date:null,load:!1,step:30,start:8,end:18,order:null,direction:null,paginate_object:null,years:[2024,2025],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],schedule:[],added_schedule:[]}},watch:{date:{handler:function(t){this.loadAppointmentSchedules()},deep:!0}},computed:{...Ee(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"]),currentWeek(){return new Date().getWeek()},currentMonthWeek(){return new Date().getMonthWeek()},currentMonth(){return new Date().getMonth()},currentYear(){return new Date().getFullYear()},times(){let t=this.step,e=[],s=0,o=0;for(let a=0;s<24*60;a++){let l=Math.floor(s/60);if(l>=this.start&&l<=this.end){let i=s%60;e[o]=("0"+l).slice(-2)+":"+("0"+i).slice(-2),o++}s=s+t}return e}},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{removeAppointmentSchedule(t){this.loading=!0,this.$store.dispatch("removeAppointmentSchedule",{dataObject:{appointmentScheduleId:t}}).then(e=>{this.loading=!1,this.loadAppointmentSchedules(0),this.$notify("Время успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления времени")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(t){this.loadAppointmentSchedules(t)},loadAppointmentSchedules(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,bot_id:this.bot.id||null,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})},storeSchedule(){this.$store.dispatch("storeAppointmentSchedule",{dataObject:{schedule:[...this.schedule,...this.added_schedule],bot_id:this.bot.id,appointment_event_id:this.eventId}}).then(()=>{this.$notify("Расписание успешно сохранено"),this.loadAppointmentSchedules(),this.added_schedule=[]}).catch(()=>{this.$notify("Ошибка сохраения расписания")})},inScheduleRow(t){return this.schedule.findIndex(e=>e.start_time==this.times[t])!=-1||this.added_schedule.findIndex(e=>e.start_time==this.times[t])!=-1},inSchedule(t,e){return this.schedule.findIndex(s=>s.day==e&&s.start_time==this.times[t])!=-1||this.added_schedule.findIndex(s=>s.day==e&&s.start_time==this.times[t])!=-1},setScheduleItem(t,e){let s=this.schedule.findIndex(o=>o.day==e&&o.start_time==this.times[t]);if(s!==-1){this.schedule.splice(s,1);return}if(s=this.added_schedule.findIndex(o=>o.day==e&&o.start_time==this.times[t]),s!==-1){this.added_schedule.splice(s,1);return}this.added_schedule.push({day:e,start_time:this.times[t]||null,end_time:this.times[t+1]||null,week:this.date==null?this.currentWeek:new Date(this.date).getWeek(),month:this.date==null?this.currentMonth:new Date(this.date).getMonth(),year:this.date==null?this.currentYear:new Date(this.date).getFullYear()})}}},LM=Object.assign(zM,{__name:"AppointmentScheduleForm",setup(t){return(e,s)=>(r(),d(x,null,[n("div",HA,[n("div",QA,[n("div",XA,[b(n("input",{type:"number",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>e.step=o),min:"0",id:"config-step",placeholder:"30 минут"},null,512),[[Q,e.step]]),KA])]),n("div",ZA,[n("div",GA,[b(n("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=o=>e.start=o),min:"0",max:"23",class:"form-control",id:"config-start-time",placeholder:"Часы"},null,512),[[Q,e.start]]),JA])]),n("div",eM,[n("div",tM,[b(n("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=o=>e.end=o),min:e.start,max:"23",class:"form-control",id:"config-end-time",placeholder:"Часы"},null,8,nM),[[Q,e.end]]),sM])])]),oM,e.schedule.length>0||e.added_schedule.length>0?(r(),d("div",aM,[n("div",lM,[n("button",{onClick:s[3]||(s[3]=(...o)=>e.storeSchedule&&e.storeSchedule(...o)),class:"btn btn-primary"},"Сохранить текущий график ")]),n("div",iM,[n("div",rM,[n("a",{onClick:s[4]||(s[4]=o=>e.loadAndOrder("day")),href:"javascript:void(0)"},[F("День "),e.order==="day"&&e.direction==="asc"?(r(),d("i",dM)):c("",!0),e.order==="day"&&e.direction==="desc"?(r(),d("i",uM)):c("",!0)])]),n("div",cM,[n("a",{onClick:s[5]||(s[5]=o=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[F("Начало "),e.order==="start_time"&&e.direction==="asc"?(r(),d("i",mM)):c("",!0),e.order==="start_time"&&e.direction==="desc"?(r(),d("i",hM)):c("",!0)])]),n("div",pM,[n("a",{onClick:s[6]||(s[6]=o=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[F("Конец "),e.order==="end_time"&&e.direction==="asc"?(r(),d("i",_M)):c("",!0),e.order==="end_time"&&e.direction==="desc"?(r(),d("i",vM)):c("",!0)])])])])):c("",!0),(r(!0),d(x,null,ne([...e.schedule,...e.added_schedule],(o,a)=>(r(),d("div",{class:B(["row py-2",{"bg-warning":o.id==null}])},[n("div",fM,[n("div",bM,[b(n("input",{type:"text","onUpdate:modelValue":l=>e.days[o.day-1]=l,class:"form-control",id:"day-of-week-"+a,placeholder:"День недели"},null,8,gM),[[Q,e.days[o.day-1]]]),n("label",{for:"day-of-week-"+a},"День недели",8,yM)])]),n("div",kM,[n("div",$M,[b(n("input",{type:"text","onUpdate:modelValue":l=>o.start_time=l,class:"form-control",id:"day-of-start-at-"+a,placeholder:"Время начало"},null,8,wM),[[Q,o.start_time]]),n("label",{for:"day-of-start-at-"+a},"Начало",8,CM)])]),n("div",FM,[n("div",TM,[b(n("input",{type:"text","onUpdate:modelValue":l=>o.end_time=l,class:"form-control",id:"day-of-end-at-"+a,placeholder:"Время окончания"},null,8,DM),[[Q,o.end_time]]),n("label",{for:"day-of-end-at-"+a},"Окончание",8,PM)])])],2))),256)),n("div",SM,[n("div",OM,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]),n("div",AM,[n("div",MM,[n("button",{class:"btn btn-primary",onClick:s[7]||(s[7]=o=>e.schedule=[])},"Очистить таблицу")]),n("div",jM,[n("p",RM,[F(" Год: "),n("strong",null,f(e.currentYear),1),F(" Месяц: "),n("strong",null,f(e.months[e.currentMonth]),1),F(" Неделя: "),n("strong",null,f(e.currentWeek),1)])])]),n("div",UM,[n("div",VM,[le(w(bn),{modelValue:e.date,"onUpdate:modelValue":s[8]||(s[8]=o=>e.date=o)},null,8,["modelValue"])])]),n("table",YM,[n("thead",null,[n("tr",null,[IM,(r(!0),d(x,null,ne(e.days,o=>(r(),d("th",BM,f(o),1))),256))])]),n("tbody",null,[(r(!0),d(x,null,ne(e.times,(o,a)=>(r(),d("tr",{class:B({"table-light":e.inScheduleRow(a)})},[n("th",xM,f(o),1),(r(),d(x,null,ne(7,l=>n("td",null,[n("button",{class:B([{"btn-primary text-white":e.inSchedule(a,l)},"btn btn-outline-primary"]),onClick:i=>e.setScheduleItem(a,l)},[e.inSchedule(a,l)?(r(),d("i",EM)):(r(),d("i",qM))],10,NM)])),64))],2))),256))])])],64))}});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".vue3-star-ratings[data-v-7fab3f62]{width:fit-content;overflow:hidden;position:relative;white-space:nowrap}.vue3-star-ratings *[data-v-7fab3f62]{box-sizing:border-box;margin:0;padding:0;line-height:1}.vue3-star-ratings__inner[data-v-7fab3f62],.vue3-star-ratings__outer[data-v-7fab3f62]{height:inherit}.vue3-star-ratings__outer[data-v-7fab3f62]{position:absolute;top:0;left:0;width:var(--vue3StarRatingOuterWidth);max-width:100%;overflow:hidden;color:var(--vue3StarRatingsOuterColor);transition:width .32s cubic-bezier(.075,.82,.165,1)}.vue3-star-ratings__inner[data-v-7fab3f62]{color:var(--vue3StarRatingsInnerColor)}.vue3-star-ratings__icon[data-v-7fab3f62]{fill:currentColor;width:var(--vue3StarRatingIconSize);aspect-ratio:1;cursor:pointer;display:inline-block}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Ta=(t,e)=>{const s=t.__vccOpts||t;for(const[o,a]of e)s[o]=a;return s},WM={},HM={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},QM=n("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),XM=[QM];function KM(t,e){return r(),d("svg",HM,XM)}const Mo=Ta(WM,[["render",KM]]),ZM={class:"vue3-star-ratings__outer"},GM={class:"vue3-star-ratings__inner"},JM=nt({__name:"Vue3StarRatings",props:{modelValue:{default:0},numberOfStars:{default:5},starColor:{default:"#ff9800"},inactiveColor:{default:"#333333"},starSize:{default:24},disableClick:{type:Boolean},customSvg:{default:Mo}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,o=J(()=>s.customSvg||Mo),a={rounded(p,$){const _=Math.pow(10,$);return Math.round(p*_)/_}},l=ce(),i=J({get(){return s.modelValue},set(p){const $=a.rounded(p,1);e("update:modelValue",$)}});function u(p){if(s.disableClick)return;const $=this.getBoundingClientRect(),{pageX:_}=p,C=_-$.left,D=$.width,S=s.numberOfStars,N=C/D*S;i.value=N}const h=J(()=>(i.value<0?0:i.value>s.numberOfStars?s.numberOfStars:i.value)/s.numberOfStars*100);return Ma(()=>{var p;const $={"--vue3StarRatingsInnerColor":s.inactiveColor,"--vue3StarRatingsOuterColor":s.starColor,"--vue3StarRatingOuterWidth":`${h.value}%`,"--vue3StarRatingIconSize":`${s.starSize}px`};for(const[_,C]of Object.entries($))(p=l.value)==null||p.style.setProperty(_,C)}),rt(()=>{var p;(p=l.value)==null||p.addEventListener("click",u)}),ja(()=>{var p;(p=l.value)==null||p.removeEventListener("click",u)}),(p,$)=>(r(),d("div",{class:"vue3-star-ratings",ref_key:"starsContainer",ref:l,style:ft({pointerEvents:p.disableClick?"none":"auto"})},[n("div",ZM,[(r(!0),d(x,null,ne(p.numberOfStars,_=>(r(),de(Tn(o.value),{key:_,class:"vue3-star-ratings__icon"}))),128))]),n("div",GM,[(r(!0),d(x,null,ne(p.numberOfStars,_=>(r(),de(Tn(o.value),{key:_,class:"vue3-star-ratings__icon"}))),128))])],4))}}),ns=Ta(JM,[["__scopeId","data-v-7fab3f62"]]),e9={class:"row py-3"},t9={class:"col-12"},n9={class:"row"},s9={class:"col-12"},o9={key:0},a9={key:1},l9={key:0,class:"col-12 mb-3"},i9={class:"col-12 mb-3"},r9={key:0},d9={key:1},u9={key:1,class:"col-12 mb-3"},c9={class:"col-12 mb-3"},m9={class:"col-12 mb-3"},h9={class:"form-label",id:"event-on_after_appointment"},p9=n("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),_9=n("div",null," Текст, который пользователь оставляет после прохождения услуги ",-1),v9=n("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),f9={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},b9={class:"row"},g9={class:"col-12"},y9={type:"submit",class:"btn btn-outline-success w-100 p-3"},k9={key:0},$9={key:1},w9={props:["eventId","bot","review"],components:{vue3starRatings:ns},data(){return{step:0,load:!1,selected_schedule_time:null,selected_bot_user:null,need_load_users:!1,need_schedule_time:!1,days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],reviewForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null}}},watch:{reviewForm:{handler(t){this.need_reset=!0},deep:!0}},mounted(){this.review&&this.$nextTick(()=>{this.reviewForm={id:this.review.id||null,appointment_event_id:this.review.appointment_event_id||null,appointment_schedule_id:this.review.appointment_schedule_id||null,bot_user_id:this.review.bot_user_id||null,rating:this.review.rating||null,text:this.review.text||null},this.selected_schedule_time=this.review.schedule||null,this.selected_bot_user=this.review.botUser||null})},methods:{selectScheduleTime(t){this.selected_schedule_time=t,this.need_schedule_time=!1},selectBotUser(t){this.selected_bot_user=t,this.need_load_users=!1},clearReviewForm(){this.reviewForm={id:null,appointment_event_id:null,appointment_schedule_id:null,bot_user_id:null,rating:null,text:null},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.reviewForm.bot_user_id=this.selected_bot_user.id,this.reviewForm.appointment_schedule_id=this.selected_schedule_time.id,this.reviewForm.appointment_event_id=this.eventId;let t=new FormData;Object.keys(this.reviewForm).forEach(e=>{const s=this.reviewForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),t.append("bot_id",this.bot.id),this.$store.dispatch("storeAppointmentReview",{dataObject:{appointmentReviewForm:t}}).then(e=>{this.$emit("callback",e.data),this.$notify("Отзыв успешно создан"),this.clearReviewForm()}).catch(e=>{this.$notify("Ошибка создания отзыва")})}}},C9=Object.assign(w9,{__name:"AppointmentReviewForm",setup(t){return(e,s)=>{const o=Ut("Popper");return r(),d(x,null,[n("div",e9,[n("div",t9,[n("button",{onClick:s[0]||(s[0]=(...a)=>e.clearReviewForm&&e.clearReviewForm(...a)),class:"btn btn-primary"},"Новый отзыв")])]),n("form",{onSubmit:s[5]||(s[5]=Pe((...a)=>e.submitForm&&e.submitForm(...a),["prevent"]))},[n("div",n9,[n("div",s9,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:s[1]||(s[1]=a=>e.need_load_users=!e.need_load_users)},[e.selected_bot_user==null?(r(),d("span",o9,"Выберите пользователя")):c("",!0),e.selected_bot_user?(r(),d("span",a9," Пользователь "+f(e.selected_bot_user.name||e.selected_bot_user.fio_from_telegram||e.selected_bot_user.telegram_chat_id||"-"),1)):c("",!0)])]),e.need_load_users?(r(),d("div",l9,[le(Vo,{simple:!0,onSelect:e.selectBotUser},null,8,["onSelect"])])):c("",!0),n("div",i9,[n("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:s[2]||(s[2]=a=>e.need_schedule_time=!e.need_schedule_time)},[e.selected_schedule_time==null?(r(),d("span",r9,"Выберите время в расписании")):c("",!0),e.selected_schedule_time?(r(),d("span",d9," Запись на "+f(e.days[e.selected_schedule_time.day-1]||"-")+" с "+f(e.selected_schedule_time.start_time||"-")+" до "+f(e.selected_schedule_time.end_time||"-"),1)):c("",!0)])]),e.need_schedule_time?(r(),d("div",u9,[le(Fa,{"event-id":t.eventId,bot:t.bot,onSelect:e.selectScheduleTime},null,8,["event-id","bot","onSelect"])])):c("",!0),n("div",c9,[n("p",null," Рейтинг: "+f(e.reviewForm.rating||0),1),le(w(ns),{modelValue:e.reviewForm.rating,"onUpdate:modelValue":s[3]||(s[3]=a=>e.reviewForm.rating=a)},null,8,["modelValue"])]),n("div",m9,[n("label",h9,[le(o,null,{content:q(()=>[_9]),default:q(()=>[p9]),_:1}),F(" Текст отзыва "),v9,e.reviewForm.text?(r(),d("small",f9," Длина текста "+f(e.reviewForm.text.length)+"/255",1)):c("",!0)]),b(n("textarea",{type:"text",class:"form-control",placeholder:"Текст отзыва","aria-label":"Текст отзыва","onUpdate:modelValue":s[4]||(s[4]=a=>e.reviewForm.text=a),maxlength:"255","aria-describedby":"review-text",required:""},`
                    `,512),[[Q,e.reviewForm.text]])])]),n("div",b9,[n("div",g9,[n("button",y9,[e.reviewForm.id==null?(r(),d("span",k9,"Оставить отзыв")):(r(),d("span",$9,"Обновить отзыв"))])])])],32)],64)}}}),F9={class:"row"},T9={class:"col-12"},D9={key:0,class:"table"},P9=n("th",{scope:"col"},"Действие",-1),S9=["onClick"],O9={scope:"row"},A9={class:"d-flex align-items-center"},M9={class:"ml-2"},j9={key:0,class:"dropdown"},R9=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),U9={class:"dropdown-menu"},V9={key:0},Y9=["onClick"],I9={key:1},B9={class:"col-12"},x9={props:["bot","eventId"],components:{vue3starRatings:ns},data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,reviews:[],search:null,paginate_object:null}},computed:{...Ee(["getAppointmentReviews","getAppointmentReviewsPaginateObject"])},mounted(){this.loadAppointmentReviews()},methods:{nextAppointmentReviews(t){this.loadAppointmentReviews(t)},selectReview(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentReviews(0)},removeAppointmentReview(t){this.loading=!0,this.$store.dispatch("removeAppointmentReview",{dataObject:{appointmentReviewId:t}}).then(e=>{this.loadAppointmentReviews(0),this.$notify("Сервис успешно удален"),this.loading=!1}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления сервиса")})},loadAppointmentReviews(t=0){this.loading=!0,this.$store.dispatch("loadAppointmentReviews",{dataObject:{event_id:this.eventId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.reviews=this.getAppointmentReviews,this.paginate_object=this.getAppointmentReviewsPaginateObject}).catch(()=>{this.loading=!1})}}},N9=Object.assign(x9,{__name:"AppointmentReviewsTable",setup(t){return(e,s)=>(r(),d("div",F9,[n("div",T9,[e.reviews.length>0?(r(),d("table",D9,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("bot_user_id"))},"Пользователь"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("rating"))},"Рейтинг"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=o=>e.loadAndOrder("text"))},"Текст"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),P9])]),n("tbody",null,[(r(!0),d(x,null,ne(e.reviews,(o,a)=>(r(),d("tr",{onClick:l=>e.selectReview(o),class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",O9,f(o.id),1),n("td",null,f(o.botUser.fio_from_telegram||o.botUser.telegram_chat_id||"Не указано"),1),n("td",null,[n("p",A9,[le(w(ns),{disableClick:!0,modelValue:o.rating,"onUpdate:modelValue":l=>o.rating=l},null,8,["modelValue","onUpdate:modelValue"]),n("span",M9,f(o.rating||0),1)])]),n("td",null,f(o.text||"Не указано"),1),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",j9,[R9,n("ul",U9,[o.deleted_at==null?(r(),d("li",V9,[n("a",{class:"dropdown-item",onClick:l=>e.removeAppointmentReview(o.id),href:"javascript:void(0)"},"Удалить",8,Y9)])):c("",!0)])])):c("",!0)])],10,S9))),256))])])):(r(),d("p",I9,"На текущий момент нет ни одного созданного отзыва"))]),n("div",B9,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextAppointmentReviews,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),E9={key:0,class:"py-2"},q9={class:"row"},z9={class:"col-12"},L9={key:1,class:"py-2"},W9={class:"row"},H9={class:"col-12"},Q9={key:2,class:"py-2"},X9={class:"row"},K9={class:"col-12"},Z9={class:"nav nav-tabs justify-content-center"},G9={key:0,class:"row py-3"},J9={class:"col-12"},ej={key:1,class:"row py-3"},tj={class:"col-12"},nj={class:"col-12 py-3"},sj=n("h4",null,"Доступные сервисы в событии",-1),oj={key:2,class:"row"},aj={class:"col-12"},lj={key:3,class:"row"},ij={class:"col-12"},rj={class:"col-12 py-3"},dj=n("h4",null,"Актуальные записи на событие",-1),uj={key:4,class:"row"},cj={class:"col-12"},mj={class:"col-12 py-3"},hj=n("h4",null,"Отзывы к событию",-1),pj={props:["bot"],data(){return{part:0,tab:0,loadTable:!1,loadService:!1,loadReviewForm:!1,loadAppointments:!1,loadReviews:!1,loadAppointmentForm:!1,loadForm:!1,selectedEvent:null,selectedService:null,selectedAppointment:null,selectedReview:null}},computed:{...Ee(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){},methods:{callbackForm(){this.loadTable=!0,this.$nextTick(()=>{this.loadTable=!1})},callbackAppointment(){this.loadAppointments=!0,this.$nextTick(()=>{this.loadAppointments=!1})},callbackReview(){this.loadReviews=!0,this.$nextTick(()=>{this.loadReviews=!1})},createEvent(){this.part=2},selectAppointment(t){this.loadAppointmentForm=!0,this.selectedAppointment=t,this.$nextTick(()=>{this.loadAppointmentForm=!1})},selectService(t){this.loadService=!0,this.selectedService=t,this.$nextTick(()=>{this.loadService=!1})},selectReview(t){this.loadReviewForm=!0,this.selectedReview=t,this.$nextTick(()=>{this.loadReviewForm=!1})},selectEvent(t){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedEvent=t,this.part=1,this.tab=0})}}},JV=Object.assign(pj,{__name:"Appointment",setup(t){return(e,s)=>(r(),d(x,null,[e.part===0?(r(),d("div",E9,[n("div",q9,[n("div",z9,[n("button",{type:"button",onClick:s[0]||(s[0]=(...o)=>e.createEvent&&e.createEvent(...o)),class:"btn btn-primary"}," Создать новое событие ")])]),e.loadTable?c("",!0):(r(),de(b7,{key:0,onSelect:e.selectEvent,bot:t.bot},null,8,["onSelect","bot"]))])):c("",!0),e.part===2?(r(),d("div",L9,[n("div",W9,[n("div",H9,[n("button",{type:"button",onClick:s[1]||(s[1]=o=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),e.loadForm?c("",!0):(r(),de(Ao,{key:0,onCallback:e.callbackForm,bot:t.bot},null,8,["onCallback","bot"]))])):c("",!0),e.part===1?(r(),d("div",Q9,[n("div",X9,[n("div",K9,[n("button",{type:"button",onClick:s[2]||(s[2]=o=>e.part=0),class:"btn btn-outline-primary"}," Назад ")])]),n("ul",Z9,[n("li",{class:"nav-item",onClick:s[3]||(s[3]=o=>e.tab=0)},[n("a",{class:B(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Информация о событии",2)]),n("li",{class:"nav-item",onClick:s[4]||(s[4]=o=>e.tab=1)},[n("a",{class:B(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Сервисы в событии",2)]),n("li",{class:"nav-item",onClick:s[5]||(s[5]=o=>e.tab=2)},[n("a",{class:B(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"График",2)]),n("li",{class:"nav-item",onClick:s[6]||(s[6]=o=>e.tab=3)},[n("a",{class:B(["nav-link",{active:e.tab===3}]),href:"javascript:void(0)"},"Записи на событие",2)]),n("li",{class:"nav-item",onClick:s[7]||(s[7]=o=>e.tab=4)},[n("a",{class:B(["nav-link",{active:e.tab===4}]),href:"javascript:void(0)"},"Отзывы о событии",2)])]),e.tab===0?(r(),d("div",G9,[n("div",J9,[e.loadForm?c("",!0):(r(),de(Ao,{key:0,onCallback:e.callbackForm,event:e.selectedEvent,bot:t.bot},null,8,["onCallback","event","bot"]))])])):c("",!0),e.tab===1?(r(),d("div",ej,[n("div",tj,[e.loadService?c("",!0):(r(),de(eO,{key:0,service:e.selectedService,"event-id":e.selectedEvent.id,bot:t.bot},null,8,["service","event-id","bot"]))]),n("div",nj,[sj,le(U7,{"event-id":e.selectedEvent.id,onSelect:e.selectService,bot:t.bot},null,8,["event-id","onSelect","bot"])])])):c("",!0),e.tab===2?(r(),d("div",oj,[n("div",aj,[le(LM,{"event-id":e.selectedEvent.id,bot:t.bot},null,8,["event-id","bot"])])])):c("",!0),e.tab===3?(r(),d("div",lj,[n("div",ij,[e.loadAppointmentForm?c("",!0):(r(),de(YO,{key:0,bot:t.bot,onCallback:e.callbackAppointment,"event-id":e.selectedEvent.id,appointment:e.selectedAppointment},null,8,["bot","onCallback","event-id","appointment"]))]),n("div",rj,[dj,e.loadAppointments?c("",!0):(r(),de(JO,{key:0,"event-id":e.selectedEvent.id,onSelect:e.selectAppointment,bot:t.bot},null,8,["event-id","onSelect","bot"]))])])):c("",!0),e.tab===4?(r(),d("div",uj,[n("div",cj,[e.loadReviewForm?c("",!0):(r(),de(C9,{key:0,review:e.selectedReview,bot:t.bot,onCallback:s[8]||(s[8]=o=>e.callbackReview()),"event-id":e.selectedEvent.id},null,8,["review","bot","event-id"]))]),n("div",mj,[hj,e.loadReviews?c("",!0):(r(),de(N9,{key:0,bot:t.bot,onSelect:e.selectReview,"event-id":e.selectedEvent.id},null,8,["bot","onSelect","event-id"]))])])):c("",!0)])):c("",!0)],64))}}),_j={class:"row py-2"},vj={class:"col-12"},fj={class:"input-group mb-3"},bj={class:"col-12"},gj={key:0,class:"table"},yj=n("th",{scope:"col"},"Число вопросов",-1),kj=n("th",{scope:"col"},"Число команд",-1),$j=n("th",{scope:"col"},"Действие",-1),wj={scope:"row"},Cj=["onClick"],Fj={key:0,style:{width:"50px",height:"50px"},alt:""},Tj={key:1},Dj={key:0,class:"mb-0"},Pj={key:1},Sj={key:0,class:"mb-0"},Oj={key:1},Aj={key:0,class:"mb-0"},Mj={key:1},jj={key:0,class:"fa-solid fa-chevron-down text-success"},Rj={key:1,class:"fa-solid fa-xmark text-danger"},Uj={key:0,class:"fa-solid fa-chevron-down text-success"},Vj={key:1,class:"fa-solid fa-xmark text-danger"},Yj={key:0,class:"dropdown"},Ij=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),Bj={class:"dropdown-menu"},xj={key:0},Nj=["onClick"],Ej={key:1},qj=n("div",{class:"alert alert-warning alert-dismissible fade show",role:"alert"},[n("strong",null,"Внимание!"),F(" Вы еще не добавили ни одного квиза! "),n("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})],-1),zj={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Lj={class:"d-flex justify-content-center mb-3"},Wj={alt:"",width:"100",height:"100"},Hj=n("h1",{class:"text-body-emphasis"},"Создание Квиза",-1),Qj=n("p",{class:"col-lg-8 mx-auto fs-5 text-muted"}," Квиз - это игра. Создавайте игры и делитесь с клиентами ссылкой на игру. Формируйте команды, начисляйте баллы, меняйте баллы на вкусные призы. Всё в ваших руках. ",-1),Xj={class:"d-inline-flex gap-2 mb-5"},Kj=n("a",{href:"https://telegra.ph/Sozdanie-Kviza-01-13",target:"_blank",class:"d-inline-flex align-items-center btn btn-outline-secondary btn-lg px-4 rounded-pill"}," Подробнее ",-1),Zj={key:0,class:"col-12"},Gj={props:["bot"],data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,quizzes:[],search:null,paginate_object:null}},computed:{...Ee(["getQuizzes","getQuizzesPaginateObject"])},mounted(){this.loadQuizzes()},methods:{removeQuiz(t){this.loading=!0,this.$store.dispatch("removeQuiz",{quizId:t}).then(e=>{this.loading=!1,this.loadQuizzes(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},createQuiz(){this.$emit("create")},nextQuizzes(t){this.loadQuizzes(t)},selectEvent(t){this.$emit("select",t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizzes(0)},loadQuizzes(t=0){this.loading=!0,this.$store.dispatch("loadQuizzes",{dataObject:{bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:20}).then(e=>{this.loading=!1,this.quizzes=this.getQuizzes,this.paginate_object=this.getQuizzesPaginateObject}).catch(()=>{this.loading=!1})}}},eY=Object.assign(Gj,{__name:"QuizTable",setup(t){return(e,s)=>{const o=en("lazy");return r(),d("div",_j,[n("div",vj,[n("div",fj,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск квиза","aria-label":"Поиск квиза","onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a),"aria-describedby":"quiz-search-quiz"},null,512),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=a=>e.loadQuizzes(0)),type:"button",id:"quiz-search-quiz"},"Найти ")])]),n("div",bj,[e.quizzes.length>0?(r(),d("table",gj,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=a=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=a=>e.loadAndOrder("title"))},"Название"),yj,kj,n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=a=>e.loadAndOrder("image"))},"Изображение к квизу"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[5]||(s[5]=a=>e.loadAndOrder("description"))},"Описание"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=a=>e.loadAndOrder("completed_at"))},"Квиз пройден"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=a=>e.loadAndOrder("start_at"))},"Дата и время начала"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[8]||(s[8]=a=>e.loadAndOrder("end_at"))},"Дата и время завершения"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[9]||(s[9]=a=>e.loadAndOrder("display_type"))},"Тип отображения"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[10]||(s[10]=a=>e.loadAndOrder("show_answers"))},"Показывать ответы по окончанию раунда "),n("th",{scope:"col",class:"cursor-pointer",onClick:s[11]||(s[11]=a=>e.loadAndOrder("is_active"))},"Активный "),n("th",{scope:"col",class:"cursor-pointer",onClick:s[12]||(s[12]=a=>e.loadAndOrder("updated_at"))},"Дата изменения"),$j])]),n("tbody",null,[(r(!0),d(x,null,ne(e.quizzes,(a,l)=>(r(),d("tr",{class:B({"border-info":a.deleted_at==null,"border-danger":a.deleted_at!=null})},[n("th",wj,f(a.id),1),n("td",{onClick:i=>e.selectEvent(a)},f(a.title||"Не указано"),9,Cj),n("td",null,f((a.questions||[]).length),1),n("td",null,f((a.commands||[]).length),1),n("td",null,[a.image!=null?b((r(),d("img",Fj,null,512)),[[o,"/file-by-file-id/"+a.image]]):(r(),d("p",Tj,"не указано"))]),n("td",null,f(a.description||"Не указано"),1),n("td",null,[a.completed_at?(r(),d("p",Dj,f(e.$filters.currentFull(a.completed_at)),1)):(r(),d("p",Pj,"Не задано"))]),n("td",null,[a.start_at?(r(),d("p",Sj,f(e.$filters.currentFull(a.start_at)),1)):(r(),d("p",Oj,"Не задано"))]),n("td",null,[a.end_at?(r(),d("p",Aj,f(e.$filters.currentFull(a.end_at)),1)):(r(),d("p",Mj,"Не задано"))]),n("td",null,f(a.display_type),1),n("td",null,f(a.time_limit),1),n("td",null,[a.show_answers?(r(),d("i",jj)):(r(),d("i",Rj))]),n("td",null,[a.is_multiply?(r(),d("i",Uj)):(r(),d("i",Vj))]),n("td",null,f(e.$filters.current(a.updated_at)),1),n("td",null,[a.id?(r(),d("div",Yj,[Ij,n("ul",Bj,[a.deleted_at==null?(r(),d("li",xj,[n("a",{class:"dropdown-item",onClick:i=>e.removeQuiz(a.id),href:"javascript:void(0)"},"Удалить",8,Nj)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("div",Ej,[qj,n("div",zj,[n("div",Lj,[b(n("img",Wj,null,512),[[o,"../images/icon.png"]])]),Hj,Qj,n("div",Xj,[n("button",{onClick:s[13]||(s[13]=(...a)=>e.createQuiz&&e.createQuiz(...a)),class:"d-inline-flex align-items-center btn btn-lg px-4 rounded-pill btn-primary",type:"button"}," Добавить "),Kj])])]))]),e.quizzes.length>0?(r(),d("div",Zj,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextQuizzes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])):c("",!0)])}}}),Jj={class:"row"},eR={class:"col-12"},tR={key:0,class:"table"},nR=n("th",{scope:"col"},"Число ответов",-1),sR=n("th",{scope:"col"},"Действие",-1),oR={scope:"row"},aR=["onClick"],lR={key:0,class:"fa-solid fa-chevron-down text-success"},iR={key:1,class:"fa-solid fa-xmark text-danger"},rR={key:0,class:"fa-solid fa-chevron-down text-success"},dR={key:1,class:"fa-solid fa-xmark text-danger"},uR={key:0,class:"dropdown"},cR=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),mR={class:"dropdown-menu"},hR={key:0},pR=["onClick"],_R={key:1},vR={class:"col-12"},fR={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,questions:[],search:null,paginate_object:null}},computed:{...Ee(["getQuizQuestions","getQuizQuestionsPaginateObject"])},mounted(){this.loadQuizQuestions()},methods:{nextQuizQuestion(t){this.loadQuizQuestions(t)},selectQuizQuestion(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizQuestion(t){this.loading=!0,this.$store.dispatch("removeQuizQuestion",{quizQuestionId:t}).then(e=>{this.loading=!1,this.loadQuizQuestions(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizQuestions(0)},loadQuizQuestions(t=0){this.loading=!0,this.$store.dispatch("loadQuizQuestions",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.questions=this.getQuizQuestions,this.paginate_object=this.getQuizQuestionsPaginateObject}).catch(()=>{this.loading=!1})}}},tY=Object.assign(fR,{__name:"QuizQuestionTable",setup(t){return(e,s)=>(r(),d("div",Jj,[n("div",eR,[e.questions.length>0?(r(),d("table",tR,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("text"))},"Текст вопроса"),nR,n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("round"))},"Раунд"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[3]||(s[3]=o=>e.loadAndOrder("media_content"))},"Контент"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.loadAndOrder("content_type"))},"Тип контента"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[5]||(s[5]=o=>e.loadAndOrder("is_multiply"))},"Множественный"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=o=>e.loadAndOrder("is_open"))},"Открытый"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),sR])]),n("tbody",null,[(r(!0),d(x,null,ne(e.questions,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",oR,f(o.id),1),n("td",{onClick:l=>e.selectQuizQuestion(o)},f(o.text||"Не указано"),9,aR),n("td",null,f((o.answers||[]).length),1),n("td",null,f(o.round||"Не указано"),1),n("td",null,f(o.media_content||"Не указано"),1),n("td",null,f(o.content_type||"Не указано"),1),n("td",null,[o.is_multiply?(r(),d("i",lR)):(r(),d("i",iR))]),n("td",null,[o.is_open?(r(),d("i",rR)):(r(),d("i",dR))]),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[o.id?(r(),d("div",uR,[cR,n("ul",mR,[o.deleted_at==null?(r(),d("li",hR,[n("a",{class:"dropdown-item",onClick:l=>e.removeQuizQuestion(o.id),href:"javascript:void(0)"},"Удалить",8,pR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",_R,"На текущий момент нет ни одного созданного вопроса"))]),n("div",vR,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextQuizQuestion,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),bR={class:"row"},gR={class:"col-12"},yR={key:0,class:"table"},kR=n("th",{scope:"col"},"Число участников",-1),$R=n("th",{scope:"col"},"Действие",-1),wR={scope:"row"},CR=["onClick"],FR={key:0,class:"dropdown"},TR=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),DR={class:"dropdown-menu"},PR={key:0},SR=["onClick"],OR={key:1},AR={class:"col-12"},MR={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,commands:[],search:null,paginate_object:null}},computed:{...Ee(["getQuizCommands","getQuizCommandsPaginateObject"])},mounted(){this.loadQuizCommands()},methods:{nextQuizCommand(t){this.loadQuizCommands(t)},selectQuizCommand(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizCommand(t){this.loading=!0,this.$store.dispatch("removeQuizCommand",{quizCommandId:t}).then(e=>{this.loading=!1,this.loadQuizCommands(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizCommands(0)},loadQuizCommands(t=0){this.loading=!0,this.$store.dispatch("loadQuizCommands",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.commands=this.getQuizCommands,this.paginate_object=this.getQuizCommandsPaginateObject}).catch(()=>{this.loading=!1})}}},nY=Object.assign(MR,{__name:"QuizCommandTable",setup(t){return(e,s)=>(r(),d("div",bR,[n("div",gR,[e.commands.length>0?(r(),d("table",yR,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("title"))},"Название"),kR,n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("description"))},"Описание"),$R])]),n("tbody",null,[(r(!0),d(x,null,ne(e.commands,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",wR,f(o.id),1),n("td",{onClick:l=>e.selectQuizCommand(o)},f(o.title||"Не указано"),9,CR),n("td",null,f((o.players||[]).length),1),n("td",null,f(o.description||"Не указано"),1),n("td",null,[o.id?(r(),d("div",FR,[TR,n("ul",DR,[o.deleted_at==null?(r(),d("li",PR,[n("a",{class:"dropdown-item",onClick:l=>e.removeQuizCommand(o.id),href:"javascript:void(0)"},"Удалить",8,SR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",OR,"На текущий момент нет ни одной созданной команды"))]),n("div",AR,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextQuizCommand,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}}),jR={class:"row"},RR={class:"col-12"},UR={key:0,class:"table"},VR=n("th",{scope:"col"},"Название квиза",-1),YR=n("th",{scope:"col"},"Название команды",-1),IR=n("th",{scope:"col"},"Число участников",-1),BR=n("th",{scope:"col"},"Результат",-1),xR=n("th",{scope:"col"},"Действие",-1),NR={scope:"row"},ER=["onClick"],qR={key:0},zR=n("td",null,"-",-1),LR={key:0,class:"dropdown"},WR=n("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[n("i",{class:"fa-solid fa-ellipsis"})],-1),HR={class:"dropdown-menu"},QR={key:0},XR=["onClick"],KR={key:1},ZR={class:"col-12"},GR={props:["bot","quizId"],data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,results:[],search:null,paginate_object:null}},computed:{...Ee(["getQuizResults","getQuizResultsPaginateObject"])},mounted(){this.loadQuizResults()},methods:{nextQuizResult(t){this.loadQuizResults(t)},selectQuizResult(t){this.$emit("select",t),this.$notify("Вопрос успешно выбран")},removeQuizResult(t){this.loading=!0,this.$store.dispatch("removeQuizResult",{quizResultId:t}).then(e=>{this.loading=!1,this.loadQuizResults(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizResults(0)},loadQuizResults(t=0){this.loading=!0,this.$store.dispatch("loadQuizResults",{dataObject:{quiz_id:this.quizId,bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:t,size:100}).then(e=>{this.loading=!1,this.results=this.getQuizResults,this.paginate_object=this.getQuizResultsPaginateObject}).catch(()=>{this.loading=!1})}}},sY=Object.assign(GR,{__name:"QuizResultTable",setup(t){return(e,s)=>(r(),d("div",jR,[n("div",RR,[e.results.length>0?(r(),d("table",UR,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[0]||(s[0]=o=>e.loadAndOrder("id"))},"#"),VR,YR,IR,n("th",{scope:"col",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>e.loadAndOrder("points"))},"Баллы"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.loadAndOrder("times"))},"Время"),BR,xR])]),n("tbody",null,[(r(!0),d(x,null,ne(e.results,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",NR,f(o.id),1),n("td",{onClick:l=>e.selectQuizResult(o)},f(o.quiz.title||"Не указано"),9,ER),n("td",null,[o.command?(r(),d("span",qR,f(o.command.title||"Не указано"),1)):c("",!0)]),n("td",null,f((o.command.players||[]).length),1),n("td",null,f(o.points||"Не указано"),1),n("td",null,f(o.times||"Не указано"),1),zR,n("td",null,[o.id?(r(),d("div",LR,[WR,n("ul",HR,[o.deleted_at==null?(r(),d("li",QR,[n("a",{class:"dropdown-item",onClick:l=>e.removeQuizResult(o.id),href:"javascript:void(0)"},"Удалить",8,XR)])):c("",!0)])])):c("",!0)])],2))),256))])])):(r(),d("p",KR,"На текущий момент нет ни одного созданного вопроса"))]),n("div",ZR,[e.paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextQuizResult,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])]))}});const JR={key:0},eU={key:0,class:"row"},tU={class:"col-md-12"},nU=n("h4",null,"Боты в работе",-1),sU={class:"mb-0"},oU={class:"table mb-5"},aU=n("thead",null,[n("tr",null,[n("th",{scope:"col"},"#"),n("th",{scope:"col"},"Домен"),n("th",{scope:"col"},"Название"),n("th",{scope:"col"},"Шаблон"),n("th",{scope:"col"},"Дата изменения"),n("th",{scope:"col"},"Действие")])],-1),lU={scope:"row"},iU=["onClick"],rU=["onClick"],dU={key:0,class:"badge bg-primary"},uU={key:1},cU={class:"d-flex"},mU=["onClick"],hU=n("i",{class:"fa-regular fa-star"},null,-1),pU=[hU],_U=["onClick"],vU=n("i",{class:"fa-solid fa-chevron-down"},null,-1),fU=[vU],bU=["onClick"],gU=n("i",{class:"fa-solid fa-chevron-up"},null,-1),yU=[gU],kU=n("hr",null,null,-1),$U={class:"row"},wU={class:"col-md-12 d-flex flex-column"},CU={class:"d-flex"},FU={class:"dropdown mr-2"},TU=n("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),DU={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},PU=["onClick"],SU={class:"input-group mb-3"},OU={key:0,class:"mt-2"},AU={class:"badge bg-primary mr-1"},MU=["onClick"],jU=n("i",{class:"fa-solid fa-xmark"},null,-1),RU=[jU],UU={key:1,class:"row"},VU={class:"col-12"},YU=n("h4",null,"Все боты",-1),IU={class:"mb-0"},BU={class:"mb-0"},xU={key:2,class:"row"},NU={class:"col-12 mb-3"},EU={key:0,class:"col-12 mb-3"},qU={class:"table"},zU=n("th",{scope:"col"},"Действие",-1),LU={scope:"row"},WU=["onClick"],HU=["onClick"],QU={key:0,class:"badge bg-primary"},XU={key:1},KU={class:"d-flex"},ZU=["onClick"],GU=n("i",{class:"fa-regular fa-star"},null,-1),JU=[GU],eV=["onClick"],tV=n("i",{class:"fa-regular fa-copy"},null,-1),nV=[tV],sV=["onClick"],oV=n("i",{class:"fa-solid fa-boxes-packing"},null,-1),aV=[oV],lV=["onClick"],iV=n("i",{class:"fa-solid fa-box-open"},null,-1),rV=[iV],dV=["onClick"],uV=n("i",{class:"fa-solid fa-trash-can text-white"},null,-1),cV=[uV],mV={class:"col-lg-4 col-12 mb-3"},hV={class:"card-body"},pV=["onClick"],_V={key:0,class:"badge bg-info"},vV={class:"card-footer d-flex"},fV=["onClick"],bV=n("i",{class:"fa-regular fa-star"},null,-1),gV=[bV],yV=["onClick"],kV=n("i",{class:"fa-regular fa-copy"},null,-1),$V=[kV],wV=["onClick"],CV=n("i",{class:"fa-solid fa-boxes-packing"},null,-1),FV=[CV],TV=["onClick"],DV=n("i",{class:"fa-solid fa-box-open"},null,-1),PV=[DV],SV=["onClick"],OV=n("i",{class:"fa-solid fa-trash-can text-white"},null,-1),AV=[OV],MV={class:"col-12"},jV={key:3,class:"row"},RV=n("div",{class:"col-12"},[n("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),UV=[RV],VV={props:["companyId","editor"],data(){return{displayType:1,direction:"desc",order:"updated_at",filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],favorites:[],search:null,bots_paginate_object:null}},watch:{displayType:function(t,e){localStorage.setItem("cashman_set_botlist_display_type",this.displayType)},selectedFilters:{handler:function(t){this.loadBots()},deep:!0}},computed:{...Ee(["getBots","getBotsPaginateObject","getCurrentCompany","getBotFavorites","inBotFav"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let t=[];return this.selectedFilters.forEach(e=>{switch(e.slug){case"active":this.bots.filter(s=>s.deleted_at==null).forEach(s=>{t.push(s)});break;case"archive":this.bots.filter(s=>s.deleted_at!=null).forEach(s=>{t.push(s)});break}}),this.search==null?t:t.filter(e=>(e.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.selectFilter("active"),this.displayType=parseInt(localStorage.getItem("cashman_set_botlist_display_type")||0)},methods:{hasRole(t){return window.hasRole(t)||!1},loadBotsByIds(){if(this.getBotFavorites.length==0){this.favorites=[];return}this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:this.getBotFavorites}).then(t=>{this.loading=!1,this.favorites=t}).catch(()=>{this.loading=!1})},prepareFavorites(){this.$store.dispatch("loadBotFavs").then(t=>{this.loadBotsByIds()})},moveOrderFavBot(t,e){this.$store.dispatch("swapBotInFav",{id:t,direction:e}).then(s=>{this.loadBotsByIds()})},addToFavorite(t){if(this.inBotFav(t)){this.$store.dispatch("removeFromBotFavorites",t).then(e=>{this.$notify("Указанный бот успешно удален из избранного"),this.loadBotsByIds()});return}this.$store.dispatch("addBotToFavorites",t).then(e=>{this.$notify("Указанный бот успешно добавлен в избранное"),this.loadBotsByIds()})},duplicate(t){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:t,company_id:this.getCurrentCompany.id}}).then(e=>{let s=this.bots_paginate_object.meta.current_page||0;this.loadBots(s),this.$notify("Указанный бот успешно продублирован")})},addToArchive(t){this.$store.dispatch("removeBot",{botId:t}).then(e=>{let s=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(s),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(t){this.$store.dispatch("forceDeleteBot",{botId:t}).then(e=>{let s=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(s),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(t){this.$store.dispatch("restoreBot",{botId:t}).then(e=>{let s=this.bots_paginate_object.meta.current_page||0;this.loadBots(s),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(t){let e=this.filters.find(s=>s.slug===t);e&&this.selectedFilters.filter(s=>s.slug===t).length===0&&this.selectedFilters.push(e)},removeSelectedFilter(t){let e=this.selectedFilters.findIndex(s=>s.slug===t);this.selectedFilters.splice(e,1)},selectBot(t){this.$emit("callback",t),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(t){this.loadBots(t)},loadAndOrder(t){this.order=t,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(t=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(e=>e.slug)},page:t,size:20}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject,this.prepareFavorites()}).catch(()=>{this.loading=!1})}}},oY=Object.assign(VV,{__name:"BotList",setup(t){return(e,s)=>e.show?(r(),d("div",JR,[e.favorites.length>0?(r(),d("div",eU,[n("div",tU,[nU,n("p",sU,"Количество ботов в работе "+f(e.favorites.length||0),1),n("table",oU,[aU,n("tbody",null,[(r(!0),d(x,null,ne(e.favorites,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",lU,f(o.id),1),n("td",{onClick:l=>e.selectBot(o)},[n("i",{class:B([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),F(" "+f(o.bot_domain||"Не указано"),1)],8,iU),n("td",{onClick:l=>e.selectBot(o)},f(o.title||"Не указано"),9,rU),n("td",null,[o.is_template?(r(),d("span",dU,f(o.template_description||"Не указано"),1)):(r(),d("span",uU,"Не является шаблоном"))]),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[n("div",cU,[n("button",{class:B(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(o.id)}]),type:"button",onClick:l=>e.addToFavorite(o.id),title:"Добавить в избранное"},pU,10,mU),e.favorites.length>1?(r(),d("button",{key:0,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(o.id,1),title:"Переместить вниз"},fU,8,_U)):c("",!0),e.favorites.length>1?(r(),d("button",{key:1,class:"btn btn-outline-primary mr-2",type:"button",onClick:l=>e.moveOrderFavBot(o.id,0),title:"Переместить вверх"},yU,8,bU)):c("",!0)])])],2))),256))])]),kU])])):c("",!0),n("div",$U,[n("div",wU,[n("div",CU,[n("div",FU,[TU,n("ul",DU,[(r(!0),d(x,null,ne(e.filters,o=>(r(),d("li",null,[n("a",{class:"dropdown-item",onClick:a=>e.selectFilter(o.slug),href:"#filter"},[n("i",{class:B([o.icon,"mr-2"])},null,2),F(" "+f(o.name||"Не указано"),1)],8,PU)]))),256))])]),n("div",SU,[b(n("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":s[0]||(s[0]=o=>e.search=o),onKeydown:s[1]||(s[1]=De((...o)=>e.loadBots&&e.loadBots(...o),["enter"])),"aria-describedby":"button-addon2"},null,544),[[Q,e.search]]),n("button",{class:"btn btn-outline-secondary",onClick:s[2]||(s[2]=(...o)=>e.loadBots&&e.loadBots(...o)),type:"button",id:"button-addon2"},"Найти ")])]),e.selectedFilters.length>0?(r(),d("p",OU,[(r(!0),d(x,null,ne(e.selectedFilters,o=>(r(),d("span",AU,[F(f(o.name||"не указан")+" ",1),n("a",{onClick:a=>e.removeSelectedFilter(o.slug),class:"ml-1 text-white",href:"#filter"},RU,8,MU)]))),256))])):c("",!0)])]),e.bots_paginate_object?(r(),d("div",UU,[n("div",VU,[YU,n("p",IU,"Количество найденных ботов "+f(e.bots_paginate_object.meta.total||0),1),n("p",BU,"Количество результатов на странице "+f(e.bots.length||0),1),n("p",null,[F(" Тип отображения списка: "),n("span",{onClick:s[3]||(s[3]=o=>e.displayType=0),class:B([{"bg-primary":e.displayType===0,"bg-secondary":e.displayType!==0},"badge cursor-pointer mr-2"])},"Карточки",2),n("span",{class:B([{"bg-primary":e.displayType===1,"bg-secondary":e.displayType!==1},"badge cursor-pointer mr-2"]),onClick:s[4]||(s[4]=o=>e.displayType=1)},"Таблица",2)])])])):c("",!0),e.bots.length>0?(r(),d("div",xU,[n("div",NU,[t.editor?c("",!0):(r(),d("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:s[5]||(s[5]=o=>e.selectBot(null))},"Создать нового бота "))]),e.displayType===1?(r(),d("div",EU,[n("table",qU,[n("thead",null,[n("tr",null,[n("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=o=>e.loadAndOrder("id"))},"#"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=o=>e.loadAndOrder("bot_domain"))},"Домен"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[8]||(s[8]=o=>e.loadAndOrder("title"))},"Название"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[9]||(s[9]=o=>e.loadAndOrder("template_description"))},"Шаблон"),n("th",{scope:"col",class:"cursor-pointer",onClick:s[10]||(s[10]=o=>e.loadAndOrder("updated_at"))},"Дата изменения"),zU])]),n("tbody",null,[(r(!0),d(x,null,ne(e.bots,(o,a)=>(r(),d("tr",{class:B({"border-info":o.deleted_at==null,"border-danger":o.deleted_at!=null})},[n("th",LU,f(o.id),1),n("td",{onClick:l=>e.selectBot(o)},[n("i",{class:B([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),F(" "+f(o.bot_domain||"Не указано"),1)],8,WU),n("td",{onClick:l=>e.selectBot(o)},f(o.title||"Не указано"),9,HU),n("td",null,[o.is_template?(r(),d("span",QU,f(o.template_description||"Не указано"),1)):(r(),d("span",XU,"Не является шаблоном"))]),n("td",null,f(e.$filters.current(o.updated_at)),1),n("td",null,[n("div",KU,[n("button",{class:B(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(o.id)}]),type:"button",onClick:l=>e.addToFavorite(o.id),title:"Добавить в избранное"},JU,10,ZU),n("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(o.id),title:"Дублировать"},nV,8,eV),o.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(o.id),title:"В архив"},aV,8,sV)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(o.id),title:"Из архива"},rV,8,lV)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(o.id),title:"Удалить на совсем"},cV,8,dV)):c("",!0)])])],2))),256))])])])):c("",!0),e.displayType===0?(r(!0),d(x,{key:1},ne(e.bots,(o,a)=>(r(),d("div",mV,[n("div",{class:B(["card w-100",{"border-info":o.deleted_at==null,"border-secondary":o.deleted_at!=null}])},[n("div",hV,[n("p",{class:"d-flex justify-content-between",onClick:l=>e.selectBot(o),style:{"word-wrap":"break-word"}},[n("span",null,[n("i",{class:B([{"text-danger":o.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),F(" "+f(o.bot_domain||"Не указано"),1)]),o.is_template?(r(),d("span",_V,f(o.template_description||"Шаблон без названия"),1)):c("",!0)],8,pV)]),n("div",vV,[n("button",{class:B(["btn btn-outline-danger mr-2",{"btn-danger text-white":e.inBotFav(o.id)}]),type:"button",onClick:l=>e.addToFavorite(o.id),title:"Добавить в избранное"},gV,10,fV),n("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>e.duplicate(o.id),title:"Дублировать"},$V,8,yV),o.deleted_at==null&&e.hasRole("admin")?(r(),d("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>e.addToArchive(o.id),title:"В архив"},FV,8,wV)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>e.extractFromArchive(o.id),title:"Из архива"},PV,8,TV)):c("",!0),o.deleted_at!=null&&e.hasRole("admin")?(r(),d("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>e.forceDelete(o.id),title:"Удалить на совсем"},AV,8,SV)):c("",!0)])],2)]))),256)):c("",!0),n("div",MV,[e.bots_paginate_object?(r(),de(Je,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):c("",!0)])])):(r(),d("div",jV,UV))])):c("",!0)}});export{XV as A,ZV as B,KV as Y,WV as _,oY as a,$s as b,HV as c,rg as d,Vo as e,eY as f,tY as g,nY as h,sY as i,JV as j,GV as k,QV as l,LV as m};
