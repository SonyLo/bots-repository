import{m as _,o as l,c,b as r,l as p,u as v,X as m,a as t,t as d,d as h,n as a,f as o,y as f,F as b,h as g,C as y}from"./app-ed7144b5.js";const C=t("title",null,"Административная панель",-1),k=t("meta",{name:"description",content:"Административная панель<"},null,-1),w=g('<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"><a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="#">CashMan</a><button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="navbar-nav d-none d-md-block"><div class="nav-item text-nowrap"><a class="nav-link px-3" href="/logout">Выход</a></div></div></header>',1),B={class:"container-fluid"},x={class:"row"},$={id:"sidebarMenu",class:"col-md-3 col-lg-2 d-md-block bg-body-tertiary sidebar",style:{}},E={class:"position-sticky pt-3 sidebar-sticky"},M={class:"nav flex-column"},N={key:0,class:"nav-item p-2"},V={class:"card border-info"},j={class:"card-body"},L=t("p",null,"У вас выбран клиент:",-1),A={class:"d-flex justify-content-between w-100"},D=t("i",{class:"fa-solid fa-xmark"},null,-1),S=[D],F={key:1,class:"nav-item p-2"},O={class:"card border-info"},T={class:"card-body"},z=t("p",null,"У вас выбран бот:",-1),G={class:"d-flex justify-content-between w-100"},W=["href"],X=t("i",{class:"fa-solid fa-xmark"},null,-1),q=[X],H={class:"nav-item"},I=t("i",{class:"fa-solid fa-house"},null,-1),J={class:"nav-item"},K=t("i",{class:"fa-solid fa-mug-hot"},null,-1),P={class:"nav-item"},Q=t("i",{class:"fa-solid fa-robot"},null,-1),R={class:"nav-item"},U=t("i",{class:"fa-solid fa-scroll"},null,-1),Y=t("hr",null,null,-1),Z={class:"nav-item"},tt=t("i",{class:"fa-solid fa-file-contract"},null,-1),et=t("hr",null,null,-1),st={class:"nav-item active"},at=t("i",{class:"fa-solid fa-users"},null,-1),ot={class:"nav-item"},nt=t("i",{class:"fa-regular fa-paper-plane"},null,-1),it={class:"col-md-9 ms-sm-auto col-lg-10 px-md-4"},lt={class:"pt-3 pb-2 mb-3"},ct={props:["active"],data(){return{load:!1,bot:null,company:null}},computed:{..._(["getErrors","getCurrentBot","getCurrentCompany"])},watch:{getErrors:function(e,s){Object.keys(e).forEach(n=>{this.$notify({title:"Конструктор ботов",text:e[n],type:"warn"})})}},mounted(){this.loadCurrentCompany(),this.loadCurrentBot(),window.addEventListener("store_current_bot-change-event",e=>{this.bot=this.getCurrentBot}),window.addEventListener("store_current_company-change-event",e=>{this.company=this.getCurrentCompany})},methods:{loadCurrentCompany(e=null){this.$store.dispatch("updateCurrentCompany",{company:e}).then(()=>{this.company=this.getCurrentCompany})},loadCurrentBot(e=null){this.$store.dispatch("updateCurrentBot",{bot:e}).then(()=>{this.bot=this.getCurrentBot})},resetCompany(){this.$store.dispatch("resetCurrentCompany").then(()=>{this.company=null,window.dispatchEvent(new CustomEvent("store_current_company-change-event"))})},resetBot(){this.$store.dispatch("resetCurrentBot").then(()=>{this.bot=null,window.dispatchEvent(new CustomEvent("store_current_bot-change-event"))})},stopAllDialogs(){this.$store.dispatch("stopDialogs").then(e=>{this.$notify({title:"Конструктор ботов",text:"Все диалоги остановлены",type:"success"})}).catch(e=>{})},reloadWebhooks(){this.load=!0,this.$notify({title:"Конструктор ботов",text:"Процедура обновления зависимостей началась"}),axios.get("/bot/register-webhooks").then(()=>{this.load=!1,this.$notify({title:"Конструктор ботов",text:"Зависимости успешно обновлены!",type:"success"})}).catch(()=>{this.load=!1,this.$notify({title:"Конструктор ботов",text:"Неудалось обновить зависимости",type:"error"})})}}},dt=Object.assign(ct,{__name:"MainAdminLayout",setup(e){return(s,n)=>{const u=y("notifications");return l(),c(b,null,[r(v(m),null,{default:p(()=>[C,k]),_:1}),r(u,{position:"top right"}),w,t("div",B,[t("div",x,[t("nav",$,[t("div",E,[t("ul",M,[s.company?(l(),c("li",N,[t("div",V,[t("div",j,[L,t("div",A,[t("span",null,d(s.company.title||"Без имени"),1),t("span",{onClick:n[0]||(n[0]=(...i)=>s.resetCompany&&s.resetCompany(...i))},S)])])])])):h("",!0),s.bot?(l(),c("li",F,[t("div",O,[t("div",T,[z,t("div",G,[t("span",null,[t("a",{href:"https://t.me/"+(s.bot.bot_domain||"botfather"),target:"_blank"},d(s.bot.bot_domain||"Без имени"),9,W)]),t("span",{onClick:n[1]||(n[1]=(...i)=>s.resetBot&&s.resetBot(...i))},q)])])])])):h("",!0),t("li",H,[t("a",{class:a(["nav-link",{active:e.active==3}]),href:"/dashboard","aria-current":"page"},[I,o(" Главная страница ")],2)]),t("li",J,[t("a",{class:a(["nav-link",{active:e.active==0}]),href:"/company-page","aria-current":"page"},[K,o(" Клиенты ")],2)]),t("li",P,[t("a",{class:a(["nav-link",{active:e.active==1}]),href:"/bot-page","aria-current":"page"},[Q,o(" Боты ")],2)]),t("li",R,[t("a",{class:a(["nav-link",{active:e.active==6}]),href:"/script-page","aria-current":"page"},[U,o(" Глобальные скрипты ")],2)]),Y,t("li",Z,[t("a",{class:a(["nav-link",{active:e.active==5}]),href:"/visit-card-page","aria-current":"page"},[tt,o(" Бриф для Визиток ")],2)]),et,t("li",st,[t("a",{class:a(["nav-link",{active:e.active==2}]),href:"/user-page","aria-current":"page"},[at,o(" Пользователи ")],2)]),t("li",ot,[t("a",{class:a(["nav-link",{active:e.active==4}]),href:"/mail-page","aria-current":"page"},[nt,o(" Рассылки сообщений ")],2)])])])]),t("main",it,[t("div",lt,[f(s.$slots,"default")])])])])],64)}}});export{dt as _};
