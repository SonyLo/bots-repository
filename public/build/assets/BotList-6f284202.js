import{o as n,q as i,t as e,F as y,B as k,x as g,D as r,G as p,C as c,z as a,J as f,A as b,Y as U,L as S,N as m,O as v,v as $,H as w,X as O}from"./index.es-3f23c3ba.js";import{b as q,c as L,_ as P,B as R,d as M,a as D,e as K,f as G}from"./Shop-a0cf208c.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{T as V}from"./SlugForm-9ff0da13.js";import{P as T}from"./Pagination-7feb7ae2.js";import{m as F}from"./index-2a9de1d3.js";const z={props:["param"],data(){return{expressions:[{expression:"{{userName}}",description:"Имя пользователя"},{expression:"{{telegramChatId}}",description:"Идентификатор чата"},{expression:"{{referralLink}}",description:"Реферальная ссылка"},{expression:"{{referralQr}}",description:"Реферальный QR-код"}]}},methods:{expressionsSelect(s){this.$emit("callback",{param:this.param,text:s.expression})}}},A={class:"dropdown"},N=e("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-brands fa-hire-a-helper"})],-1),E={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},J=["onClick"];function H(s,t,o,d,_,l){return n(),i("div",A,[N,e("div",E,[e("li",null,[(n(!0),i(y,null,k(_.expressions,h=>(n(),i("a",{class:"dropdown-item",onClick:u=>l.expressionsSelect(h)},g(h.description||"-"),9,J))),256))])])])}const Q=C(z,[["render",H]]);const X={props:["param"],data(){return{search:null,descriptions:[]}},computed:{filteredDescription(){return this.search?this.descriptions.filter(s=>s.text.indexOf(this.search)!==-1):this.descriptions}},mounted(){this.loadDescription()},methods:{select(s){this.$emit("callback",{param:this.param,text:s})},loadDescription(){this.$store.dispatch("loadDescription").then(s=>{this.descriptions=s.data})}}},Y={class:"dropdown"},W=e("button",{class:"btn btn-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-spell-check"})],-1),Z={class:"dropdown-menu item-with-text cursor-pointer text-muted p-2"},x=e("div",{class:"dropdown-divider"},null,-1),ee=["onClick"];function te(s,t,o,d,_,l){return n(),i("div",Y,[W,e("div",Z,[r(e("input",{type:"search",class:"form-control",id:"search-description-text","onUpdate:modelValue":t[0]||(t[0]=h=>_.search=h),placeholder:"Введите текст для поиска"},null,512),[[p,_.search]]),x,(n(!0),i(y,null,k(l.filteredDescription,(h,u)=>(n(),i("p",{class:"p-1 text-left w-100",onClick:I=>l.select(h.text)},g(h.text),9,ee))),256))])])}const B=C(X,[["render",te]]);const se={class:"row"},oe={class:"input-group mb-3"},le={key:0,class:"row"},ne={class:"col-12 mb-3"},ie={class:"list-group w-100"},ae={class:"list-group-item cursor-pointer page-menu-item btn btn-outline-info mb-1"},de={class:"d-flex justify-content-between"},re=["onClick"],ce={key:0},ue={key:1},_e={key:2},me=e("i",{class:"fa-solid fa-lock"},null,-1),he=[me],pe={key:0},be={class:"dropdown"},ge=e("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-ellipsis"})],-1),fe={class:"dropdown-menu"},ye=["onClick"],ve=e("i",{class:"fa-solid fa-copy mr-1"},null,-1),ke=["onClick"],$e=e("i",{class:"fa-solid fa-trash mr-1"},null,-1),Fe={class:"col-12"},we={key:1,class:"row"},Ce=e("div",{class:"col-12"},[e("div",{class:"alert alert-warning",role:"alert"}," Созданных страниц не найдено! ")],-1),Be=[Ce],Pe={props:["editor","current"],data(){return{bot:null,loading:!0,pages:[],search:null,pages_paginate_object:null,need_new_page:!1}},watch:{search:function(s,t){this.loadPages()}},computed:{...F(["getPages","getCurrentBot","getPagesPaginateObject"])},mounted(){this.loadCurrentBot().then(()=>{this.loadPages()})},methods:{loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},selectPage(s){this.$emit("callback",s),this.$notify("Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы")},nextPages(s){this.loadPages(s)},duplicatePage(s){this.loading=!0,this.$store.dispatch("duplicatePage",{dataObject:{pageId:s}}).then(t=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},removePage(s){this.loading=!0,this.$store.dispatch("removePage",{dataObject:{pageId:s}}).then(t=>{this.loading=!1,this.loadPages()}).catch(()=>{this.loading=!1})},loadPages(s=0){this.loading=!0,this.$store.dispatch("loadPages",{dataObject:{botId:this.bot.id||null,search:this.search},page:s}).then(t=>{this.loading=!1,this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject}).catch(()=>{this.loading=!1})}}},j=Object.assign(Pe,{__name:"PagesList",setup(s){return(t,o)=>(n(),i(y,null,[e("div",se,[e("div",oe,[r(e("input",{type:"search",class:"form-control",placeholder:"Поиск страницы","aria-label":"Поиск бота","onUpdate:modelValue":o[0]||(o[0]=d=>t.search=d),"aria-describedby":"button-addon2"},null,512),[[p,t.search]]),e("button",{class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=(...d)=>t.loadPages&&t.loadPages(...d)),type:"button",id:"button-addon2"},"Найти")])]),t.pages.length>0?(n(),i("div",le,[e("div",ne,[e("ul",ie,[(n(!0),i(y,null,k(t.pages,(d,_)=>(n(),i("li",ae,[e("div",de,[e("strong",{onClick:l=>t.selectPage(d)},[c("#"+g(d.id||"Не указано")+" ",1),d.slug?(n(),i("span",ce,g(d.slug.command||"Не указано"),1)):(n(),i("span",ue,"Не привязано к команде")),s.current&&s.current===d.id?(n(),i("span",_e,he)):a("",!0)],8,re),s.editor?(n(),i("div",pe,[e("div",be,[ge,e("ul",fe,[e("li",null,[e("a",{class:"dropdown-item",onClick:l=>t.duplicatePage(d.id)},[ve,c("Дублировать")],8,ye)]),e("li",null,[e("a",{class:"dropdown-item",onClick:l=>t.removePage(d.id)},[$e,c("Удалить")],8,ke)])])])])):a("",!0)])]))),256))])]),e("div",Fe,[t.pages_paginate_object?(n(),f(T,{key:0,onPagination_page:t.nextPages,pagination:t.pages_paginate_object},null,8,["onPagination_page","pagination"])):a("",!0)])])):(n(),i("div",we,Be))],64))}}),Ve={class:"row"},je={class:"col-12"},Ue={class:"card-body"},Se=e("h6",null,"Добавление нового скрипта в бота",-1),Te={key:0,class:"row"},Ie={class:"col-md-6 mb-2"},Re={key:1,class:"row"},Oe=e("div",{class:"col-12"},[e("div",{class:"alert alert-danger",role:"alert"},' У вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')],-1),qe=[Oe],Le={props:["bot","global"],data(){return{load:!1,search:null,slugs:[]}},computed:{filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let t=s.slug||"",o=s.command||"",d=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||d.toLowerCase().indexOf(this.search.toLowerCase())!==-1||t.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{selectSlug(s){this.$emit("callback",{id:s.id||null,slug:s.slug,comment:s.comment,command:s.command}),this.$notify("Вы выбрали скрипт из списка!")},loadSlugs(){this.$store.dispatch("loadBotSlugs",{botId:this.bot.id,isGlobal:this.global||!1}).then(s=>{this.slugs=s})}}},Me=Object.assign(Le,{__name:"BotSlugListSimple",setup(s){return(t,o)=>(n(),i("div",Ve,[e("div",je,[e("div",Ue,[Se,e("div",null,[r(e("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":o[0]||(o[0]=d=>t.search=d),placeholder:"Поиск нужного скрипта по описанию"},null,512),[[p,t.search]])]),t.filteredSlugs.length>0?(n(),i("div",Te,[(n(!0),i(y,null,k(t.filteredSlugs,(d,_)=>(n(),i("div",Ie,[b(q,{item:d,bot:s.bot,onCallback:t.callbackSlugs,onSelect:t.selectSlug},null,8,["item","bot","onCallback","onSelect"])]))),256))])):(n(),i("div",Re,qe))])])]))}});const De={key:0,class:"row"},Ke={class:"col-12 mb-3"},Ge={class:"card mb-2"},ze={class:"card-header"},Ae={class:"card-body"},Ne={key:0,class:"row"},Ee={class:"col-md-6 col-lg-4 col-12 col-sm-6 mb-2"},Je={key:1,class:"row"},He=e("div",{class:"col-12"},[e("p",null,"Диалоговых скриптов не найдено")],-1),Qe=[He],Xe={class:"col-12"},Ye={key:1,class:"row"},We=e("div",{class:"col-12"},[e("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет созданных диалоговых групп ")],-1),Ze=[We],xe={props:["bot"],data(){return{groupForm:{slug:null,title:null},loading:!0,dialog_groups:[],search:null,dialog_groups_paginate_object:null,link:null,selected_dialog_id:null,group:null}},computed:{...F(["getDialogGroups","getDialogGroupsPaginateObject"])},mounted(){this.loadGroups()},methods:{selectDialog(s){this.$emit("select-dialog",s),this.selected_dialog_id=s.id,this.$notify("Вы выбрали диалог из списка!")},nextGroups(s){this.loadGroups(s)},loadGroups(s=0){this.loading=!0,this.$store.dispatch("loadDialogGroups",{dataObject:{botId:this.bot.id||null,search:this.search},page:s}).then(t=>{this.loading=!1,this.dialog_groups=this.getDialogGroups,this.dialog_groups_paginate_object=this.getDialogGroupsPaginateObject}).catch(()=>{this.loading=!1})}}},et=Object.assign(xe,{__name:"BotDialogGroupListSimple",setup(s){return(t,o)=>t.dialog_groups.length>0?(n(),i("div",De,[e("div",Ke,[(n(!0),i(y,null,k(t.dialog_groups,(d,_)=>(n(),i("div",Ge,[e("div",ze,[e("h6",null," #"+g(d.id)+" - "+g(d.title||"Не указано ")+" ("+g(d.slug||"Не указано")+")",1)]),e("div",Ae,[d.bot_dialog_commands.length>0?(n(),i("div",Ne,[(n(!0),i(y,null,k(d.bot_dialog_commands,(l,h)=>(n(),i("div",Ee,[b(L,{onSelect:t.selectDialog,item:l},null,8,["onSelect","item"])]))),256))])):(n(),i("div",Je,Qe))])]))),256))]),e("div",Xe,[t.dialog_groups_paginate_object?(n(),f(T,{key:0,onPagination_page:t.nextGroups,pagination:t.dialog_groups_paginate_object},null,8,["onPagination_page","pagination"])):a("",!0)])])):(n(),i("div",Ye,Ze))}}),tt={class:"col-12 mb-2"},st={class:"d-flex justify-between"},ot={class:"col-12 mb-2"},lt={class:"form-label",id:"bot-domain"},nt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),it=e("div",null,[c(" Команда должна начинаться с символва . и *"),e("br"),c(" Например: .*Меню"),e("br")],-1),at=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),dt={class:"col-12 mb-2"},rt={class:"form-label",id:"bot-domain"},ct=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ut=e("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять вас. ",-1),_t=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),mt={class:"col-12 mb-2"},ht={class:"form-label d-flex justify-content-between align-items-center mb-0",id:"bot-domain"},pt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),bt=e("div",null,[c(" Текстовый редактор. Данный текст будет в таком"),e("br"),c(" же виде отображен в посте в телеграм. ")],-1),gt=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ft={class:"form-floating"},yt={for:"floatingTextarea2"},vt={key:0},kt={class:"col-12 mb-2"},$t={class:"form-check"},Ft=e("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),wt={key:0,class:"col-12 mb-2"},Ct={class:"card mb-3"},Bt=e("div",{class:"card-header"},[e("h6",null,"Изображения на странице")],-1),Pt={class:"card-body d-flex justify-content-start"},Vt={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},jt={class:"row"},Ut={key:0,class:"col-12 d-flex flex-wrap"},St={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Tt={class:"remove"},It=["onClick"],Rt={key:1},Ot={key:2,class:"col-12 d-flex flex-wrap"},qt={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Lt={class:"remove"},Mt=["onClick"],Dt={class:"col-12 mb-2"},Kt={class:"form-check"},Gt=e("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),zt={key:1,class:"col-12 mb-2"},At={class:"card"},Nt={class:"card-header d-flex justify-between align-items-center"},Et=e("h6",null,"Конструктор нижнего меню",-1),Jt={key:0},Ht={key:1},Qt={class:"card-body"},Xt={class:"col-12 mb-2"},Yt={class:"form-check"},Wt=e("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),Zt={key:2,class:"col-12 mb-2"},xt={class:"card"},es={class:"card-header d-flex justify-between align-items-center"},ts=e("h6",null,"Конструктор меню в сообщении",-1),ss={key:0},os={key:1},ls={class:"card-body"},ns={class:"col-12 mb-2"},is={class:"form-check"},as=e("label",{class:"form-check-label",for:"need-page-attach"}," Связать с другой страницей ",-1),ds={key:3,class:"col-12 mb-2"},rs={key:0},cs={class:"col-12 mb-2"},us={class:"form-check"},_s=e("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),ms={key:4,class:"col-12 mb-2"},hs={key:0},ps={class:"col-12 mb-2"},bs={class:"form-check"},gs=e("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),fs={key:5,class:"col-12 mb-2"},ys={key:0},vs={class:"col-12 mb-2"},ks={class:"form-check"},$s=e("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),Fs={key:6,class:"col-12 mb-2"},ws=e("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),Cs=e("h6",null,"Блок условий",-1),Bs={key:0,class:"py-2"},Ps={class:"form-label",id:"bot-domain"},Vs=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),js=e("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),Us={class:"dropdown mb-2"},Ss=e("button",{class:"btn btn-outline-info dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Добавить условие ",-1),Ts={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Is=["onClick"],Rs={key:1},Os={key:2,class:"list-group"},qs={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},Ls={class:"form-check"},Ms={class:"form-check-label",for:"bot-user-is-vip"},Ds={key:0},Ks={key:1},Gs=e("i",{class:"fa-solid fa-trash-can"},null,-1),zs=[Gs],As={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},Ns={class:"form-check"},Es={class:"form-check-label",for:"bot-user-is-admin"},Js={key:0},Hs={key:1},Qs=e("i",{class:"fa-solid fa-trash-can"},null,-1),Xs=[Qs],Ys={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},Ws={class:"form-check"},Zs={class:"form-check-label",for:"bot-user-is-deliveryman"},xs={key:0},eo={key:1},to=e("i",{class:"fa-solid fa-trash-can"},null,-1),so=[to],oo={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},lo={class:"form-check"},no={class:"form-check-label",for:"bot-user-is-work"},io={key:0},ao={key:1},ro=e("i",{class:"fa-solid fa-trash-can"},null,-1),co=[ro],uo={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},_o={class:"form-check"},mo={class:"form-check-label",for:"bot-user-in-location"},ho={key:0},po={key:1},bo=e("i",{class:"fa-solid fa-trash-can"},null,-1),go=[bo],fo={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},yo=e("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),vo=e("i",{class:"fa-solid fa-trash-can"},null,-1),ko=[vo],$o={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},Fo=e("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),wo=e("i",{class:"fa-solid fa-trash-can"},null,-1),Co=[wo],Bo={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},Po={class:"form-check"},Vo={class:"form-check-label",for:"bot-user-sex"},jo={key:0},Uo={key:1},So=e("i",{class:"fa-solid fa-trash-can"},null,-1),To=[So],Io={key:8,class:"list-group-item"},Ro={class:"mb-3"},Oo={class:"d-flex justify-content-between align-items-center"},qo={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},Lo=["onClick"],Mo=e("i",{class:"fa-solid fa-trash-can"},null,-1),Do=[Mo],Ko=["onUpdate:modelValue"],Go={key:3,class:"mt-5"},zo={key:4,class:"d-flex justify-content-between"},Ao={key:6,class:"py-2"},No={class:"form-label",id:"bot-domain"},Eo=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Jo=e("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),Ho=e("div",{class:"col-12 mb-2"},[e("button",{class:"btn btn-outline-primary w-100 p-3"},"Сохранить страницу")],-1),Qo={props:["page"],data(){return{need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}}],need_page_images:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,need_rules:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,images:[],reply_keyboard:null,inline_keyboard:null,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_page_images:function(s,t){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_inline_menu:function(s,t){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_rules:function(s,t){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_reply_menu:function(s,t){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(s,t){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(s,t){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(s,t){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(s){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.need_clean=!0},deep:!0}},computed:{...F(["getCurrentBot"])},mounted(){if(this.page){let s=this.page;this.photos=[],this.pageForm={id:s.id,slug_id:s.slug?s.slug.id:null,content:s.content,command:s.slug?s.slug.command:null,slug:s.slug?s.slug.slug:null,comment:s.slug?s.slug.comment:null,images:s.images||[],reply_keyboard_id:s.reply_keyboard_id||null,inline_keyboard_id:s.inline_keyboard_id||null,reply_keyboard:s.replyKeyboard||null,inline_keyboard:s.inlineKeyboard||null,next_page_id:s.next_page_id||null,next_bot_dialog_command_id:s.next_bot_dialog_command_id||null,next_bot_menu_slug_id:s.next_bot_menu_slug_id||null,rules_if:s.rules_if||null,rules_else_page_id:s.rules_else_page_id||null,rules_if_message:s.rules_if_message||null,rules_else_message:s.rules_else_message||null}}else this.clearForm();this.loadCurrentBot().then(()=>{})},methods:{hasRuleKey(s){return console.log("rules_if",this.pageForm.rules_if),this.pageForm.rules_if==null?!1:Object.keys(this.pageForm.rules_if.bot_user).find(t=>t===s)!=null},modifyChannel(s){this.pageForm.rules_if.channels[s.param]=s.text,console.log(s)},removeChannelFromRule(s){this.pageForm.rules_if.channels.splice(s,1)},removeRule(s){delete this.pageForm.rules_if.bot_user[s]},addRules(s){console.log(s),this.pageForm.rules_if||(this.pageForm.rules_if={bot_user:{},channels:[]}),s.rules_block==="bot_user"&&(this.pageForm.rules_if.bot_user={...this.pageForm.rules_if.bot_user,...s.rule}),s.rules_block==="channels"&&this.pageForm.rules_if.channels.push(s.rule.channel)},associateDialog(s){this.pageForm.next_bot_dialog_command_id=s.id},associateSlug(s){this.pageForm.next_bot_menu_slug_id=s.id},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},attachPageToRule(s){s.id!=this.pageForm.id?this.pageForm.rules_else_page_id=s.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},attachPage(s){s.id!=this.pageForm.id?this.pageForm.next_page_id=s.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},injectContent(s){this.pageForm.content?this.pageForm.content+=s.text:this.pageForm.content=s.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,images:[],reply_keyboard:null,inline_keyboard:null,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_images=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.$nextTick(()=>{this.need_clean=!1})},submitPage(){let s=new FormData;if(Object.keys(this.pageForm).forEach(t=>{const o=this.pageForm[t]||"";typeof o=="object"?s.append(t,JSON.stringify(o)):s.append(t,o)}),this.bot&&s.append("bot_id",this.bot.id),this.photos.length>0)for(let t=0;t<this.photos.length;t++)s.append("photos[]",this.photos[t]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:s}).then(t=>{this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()}),this.$emit("callback",t.data),this.$notify({title:"Конструктор ботов",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"})}).catch(t=>{})},saveInlineKeyboard(s){this.pageForm.inline_keyboard=s},selectReplyKeyboard(s){this.pageForm.reply_keyboard=s,this.showReplyTemplateSelector=!1},selectInlineKeyboard(s){this.pageForm.inline_keyboard=s,console.log(s),this.showInlineTemplateSelector=!1},saveReplyKeyboard(s){this.pageForm.reply_keyboard=s},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.pageForm.images.splice(s,1)},onChangePhotos(s){const t=s.target.files;for(let o=0;o<t.length;o++)this.photos.push(t[o])},onChange(s){this.pageForm.content=s}}},Xo=Object.assign(Qo,{__name:"Page",setup(s){return(t,o)=>{const d=U("Popper"),_=S("lazy");return t.bot?(n(),i("form",{key:0,onSubmit:o[36]||(o[36]=w((...l)=>t.submitPage&&t.submitPage(...l),["prevent"]))},[e("div",tt,[e("h6",st,[e("span",null,"Вы создаете страницу для "+g(t.bot.bot_domain),1),t.pageForm.id||t.need_clean?(n(),i("a",{key:0,href:"#clear-form",onClick:o[0]||(o[0]=(...l)=>t.clearForm&&t.clearForm(...l))},"очистить форму")):a("",!0)])]),e("div",ot,[e("label",lt,[b(d,null,{content:m(()=>[it]),default:m(()=>[nt]),_:1}),c(" Команда "),at]),r(e("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[1]||(o[1]=l=>t.pageForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[p,t.pageForm.command]])]),e("div",dt,[e("label",rt,[b(d,null,{content:m(()=>[ut]),default:m(()=>[ct]),_:1}),c(" Описание страницы "),_t]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":o[2]||(o[2]=l=>t.pageForm.comment=l),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[p,t.pageForm.comment]])]),e("div",mt,[e("label",ht,[e("div",null,[b(d,null,{content:m(()=>[bt]),default:m(()=>[pt]),_:1}),c(" Текстовое содержимое страницы "),gt]),b(Q,{param:"content",onCallback:t.injectContent},null,8,["onCallback"])]),e("div",ft,[r(e("textarea",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=l=>t.pageForm.content=l),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"100px"}},null,512),[[p,t.pageForm.content]]),e("label",yt,[c("Содержимое страницы "),t.pageForm.content?(n(),i("span",vt,g(t.pageForm.content.length)+"/4096 ",1)):a("",!0)])])]),e("div",kt,[e("div",$t,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=l=>t.need_page_images=l),type:"checkbox",id:"need-page-images"},null,512),[[v,t.need_page_images]]),Ft])]),t.need_page_images?(n(),i("div",wt,[e("div",Ct,[Bt,e("div",Pt,[e("label",Vt,[c(" + "),e("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[5]||(o[5]=(...l)=>t.onChangePhotos&&t.onChangePhotos(...l)),style:{display:"none"}},null,32)]),e("div",jt,[t.photos.length>0?(n(),i("div",Ut,[(n(!0),i(y,null,k(t.photos,(l,h)=>(n(),i("div",St,[r(e("img",null,null,512),[[_,t.getPhoto(l).imageUrl]]),e("div",Tt,[e("a",{onClick:u=>t.removePhoto(h)},"Удалить",8,It)])]))),256))])):a("",!0),t.pageForm.images.length>0?(n(),i("h6",Rt,"Ранее загруженные фотографии")):a("",!0),t.pageForm.images.length>0?(n(),i("div",Ot,[(n(!0),i(y,null,k(t.pageForm.images,(l,h)=>(n(),i("div",qt,[r(e("img",null,null,512),[[_,"/images-by-bot-id/"+t.bot.id+"/"+l]]),e("div",Lt,[e("a",{onClick:u=>t.removeImage(h)},"Удалить",8,Mt)])]))),256))])):a("",!0)])])])])):a("",!0),e("div",Dt,[e("div",Kt,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=l=>t.need_reply_menu=l),type:"checkbox",id:"need-reply-menu"},null,512),[[v,t.need_reply_menu]]),Gt])]),t.need_reply_menu?(n(),i("div",zt,[e("div",At,[e("div",Nt,[Et,e("button",{class:$(["btn",{"btn-outline-primary":!t.showReplyTemplateSelector,"btn-primary":t.showReplyTemplateSelector}]),type:"button",onClick:o[7]||(o[7]=l=>t.showReplyTemplateSelector=!t.showReplyTemplateSelector)},[t.showReplyTemplateSelector?(n(),i("span",Ht," Скрыть шаблоны меню")):(n(),i("span",Jt," Открыть шаблоны меню"))],2)]),e("div",Qt,[t.showReplyTemplateSelector?(n(),f(P,{key:0,class:"mb-2",type:"reply",onSelect:t.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(n(),f(R,{key:1,type:"reply",onSave:t.saveReplyKeyboard,"edited-keyboard":t.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])])])):a("",!0),e("div",Xt,[e("div",Yt,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[8]||(o[8]=l=>t.need_inline_menu=l),type:"checkbox",id:"need-inline-menu"},null,512),[[v,t.need_inline_menu]]),Wt])]),t.need_inline_menu?(n(),i("div",Zt,[e("div",xt,[e("div",es,[ts,e("button",{class:$(["btn",{"btn-outline-primary":!t.showInlineTemplateSelector,"btn-primary":t.showInlineTemplateSelector}]),type:"button",onClick:o[9]||(o[9]=l=>t.showInlineTemplateSelector=!t.showInlineTemplateSelector)},[t.showInlineTemplateSelector?(n(),i("span",os," Скрыть шаблоны меню")):(n(),i("span",ss," Открыть шаблоны меню"))],2)]),e("div",ls,[t.showInlineTemplateSelector?(n(),f(P,{key:0,class:"mb-2",type:"inline",onSelect:t.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(n(),f(R,{key:1,type:"inline",onSave:t.saveInlineKeyboard,"edited-keyboard":t.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])])])):a("",!0),e("div",ns,[e("div",is,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[10]||(o[10]=l=>t.need_attach_page=l),type:"checkbox",id:"need-page-attach"},null,512),[[v,t.need_attach_page]]),as])]),t.need_attach_page?(n(),i("div",ds,[t.pageForm.next_page_id?(n(),i("p",rs,[c("Связано со страницей #"+g(t.pageForm.next_page_id)+" ",1),e("a",{class:"btn btn-link",onClick:o[11]||(o[11]=l=>t.pageForm.next_page_id=null)},"Очистить")])):a("",!0),b(j,{current:t.pageForm.id,onCallback:t.attachPage,editor:!1},null,8,["current","onCallback"])])):a("",!0),e("div",cs,[e("div",us,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[12]||(o[12]=l=>t.need_attach_slug=l),type:"checkbox",id:"need-slug-attach"},null,512),[[v,t.need_attach_slug]]),_s])]),t.need_attach_slug?(n(),i("div",ms,[t.pageForm.next_bot_menu_slug_id?(n(),i("p",hs,[c("Связано со скриптом #"+g(t.pageForm.next_bot_menu_slug_id)+" ",1),e("a",{class:"btn btn-link",onClick:o[13]||(o[13]=l=>t.pageForm.next_bot_menu_slug_id=null)},"Очистить")])):a("",!0),t.bot?(n(),f(Me,{key:1,global:!0,onCallback:t.associateSlug,bot:t.bot},null,8,["onCallback","bot"])):a("",!0)])):a("",!0),e("div",ps,[e("div",bs,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[14]||(o[14]=l=>t.need_attach_dialog=l),type:"checkbox",id:"need-dialog-attach"},null,512),[[v,t.need_attach_dialog]]),gs])]),t.need_attach_dialog?(n(),i("div",fs,[t.pageForm.next_bot_dialog_command_id?(n(),i("p",ys,[c("Связано с диалогом #"+g(t.pageForm.next_bot_dialog_command_id)+" ",1),e("a",{class:"btn btn-link",onClick:o[15]||(o[15]=l=>t.pageForm.next_bot_dialog_command_id=null)},"Очистить")])):a("",!0),t.bot?(n(),f(et,{key:1,onSelectDialog:t.associateDialog,bot:t.bot},null,8,["onSelectDialog","bot"])):a("",!0)])):a("",!0),e("div",vs,[e("div",ks,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[16]||(o[16]=l=>t.need_rules=l),type:"checkbox",id:"need-rules"},null,512),[[v,t.need_rules]]),$s])]),t.need_rules?(n(),i("div",Fs,[ws,Cs,t.pageForm.rules_if?(n(),i("div",Bs,[e("label",Ps,[b(d,null,{content:m(()=>[js]),default:m(()=>[Vs]),_:1}),c(" Сообщение при успешном прохождении условий (не обязательно) ")]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[17]||(o[17]=l=>t.pageForm.rules_if_message=l),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[p,t.pageForm.rules_if_message]])])):a("",!0),e("div",Us,[Ss,e("ul",Ts,[(n(!0),i(y,null,k(t.rules,l=>(n(),i("li",null,[e("a",{onClick:h=>t.addRules(l),class:"dropdown-item",href:"javascript:void(0)"},g(l.title||"Не указан"),9,Is)]))),256))])]),t.pageForm.rules_if?(n(),i("h6",Rs,"Выбранные условия")):a("",!0),t.pageForm.rules_if?(n(),i("ul",Os,[t.hasRuleKey("is_vip")?(n(),i("li",qs,[e("div",Ls,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[18]||(o[18]=l=>t.pageForm.rules_if.bot_user.is_vip=l),type:"checkbox",id:"bot-user-is-vip"},null,512),[[v,t.pageForm.rules_if.bot_user.is_vip]]),e("label",Ms,[t.pageForm.rules_if.bot_user.is_vip?(n(),i("span",Ds,"Является VIP-пользователем")):(n(),i("span",Ks,"Не является VIP-пользователем"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[19]||(o[19]=l=>t.removeRule("is_vip"))},zs)])):a("",!0),t.hasRuleKey("is_admin")?(n(),i("li",As,[e("div",Ns,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[20]||(o[20]=l=>t.pageForm.rules_if.bot_user.is_admin=l),type:"checkbox",id:"bot-user-is-admin"},null,512),[[v,t.pageForm.rules_if.bot_user.is_admin]]),e("label",Es,[t.pageForm.rules_if.bot_user.is_admin?(n(),i("span",Js,"Является администратором")):(n(),i("span",Hs,"Не является администратором"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[21]||(o[21]=l=>t.removeRule("is_admin"))},Xs)])):a("",!0),t.hasRuleKey("is_deliveryman")?(n(),i("li",Ys,[e("div",Ws,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[22]||(o[22]=l=>t.pageForm.rules_if.bot_user.is_deliveryman=l),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[v,t.pageForm.rules_if.bot_user.is_deliveryman]]),e("label",Zs,[t.pageForm.rules_if.bot_user.is_deliveryman?(n(),i("span",xs,"Является доставщиком")):(n(),i("span",eo,"Не является доставщиком"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[23]||(o[23]=l=>t.removeRule("is_deliveryman"))},so)])):a("",!0),t.hasRuleKey("is_work")?(n(),i("li",oo,[e("div",lo,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[24]||(o[24]=l=>t.pageForm.rules_if.bot_user.is_work=l),type:"checkbox",id:"bot-user-is-work"},null,512),[[v,t.pageForm.rules_if.bot_user.is_work]]),e("label",no,[t.pageForm.rules_if.bot_user.is_work?(n(),i("span",io,"За работой")):(n(),i("span",ao,"Не работает"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[25]||(o[25]=l=>t.removeRule("is_work"))},co)])):a("",!0),t.hasRuleKey("user_in_location")?(n(),i("li",uo,[e("div",_o,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[26]||(o[26]=l=>t.pageForm.rules_if.bot_user.user_in_location=l),type:"checkbox",id:"bot-user-in-location"},null,512),[[v,t.pageForm.rules_if.bot_user.user_in_location]]),e("label",mo,[t.pageForm.rules_if.bot_user.user_in_location?(n(),i("span",ho,"Находится в заведении")):(n(),i("span",po,"Не находится в заведении"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[27]||(o[27]=l=>t.removeRule("user_in_location"))},go)])):a("",!0),t.hasRuleKey("age")?(n(),i("li",fo,[e("div",null,[yo,r(e("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":o[28]||(o[28]=l=>t.pageForm.rules_if.bot_user.age=l),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[p,t.pageForm.rules_if.bot_user.age]])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[29]||(o[29]=l=>t.removeRule("age"))},ko)])):a("",!0),t.hasRuleKey("city")?(n(),i("li",$o,[e("div",null,[Fo,r(e("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":o[30]||(o[30]=l=>t.pageForm.rules_if.bot_user.city=l),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[p,t.pageForm.rules_if.bot_user.city]])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[31]||(o[31]=l=>t.removeRule("city"))},Co)])):a("",!0),t.hasRuleKey("sex")?(n(),i("li",Bo,[e("div",Po,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[32]||(o[32]=l=>t.pageForm.rules_if.bot_user.sex=l),type:"checkbox",id:"bot-user-sex"},null,512),[[v,t.pageForm.rules_if.bot_user.sex]]),e("label",Vo,[t.pageForm.rules_if.bot_user.sex?(n(),i("span",jo,"Только для мужчин")):(n(),i("span",Uo,"Только для женщин"))])]),e("button",{type:"button",class:"btn btn-outline-info",onClick:o[33]||(o[33]=l=>t.removeRule("sex"))},To)])):a("",!0),t.pageForm.rules_if.channels.length>0?(n(),i("li",Io,[c("Проверка нахождения в канале \\ группе: "),(n(!0),i(y,null,k(t.pageForm.rules_if.channels,(l,h)=>(n(),i("div",Ro,[e("div",Oo,[e("label",qo,[b(V,{token:t.bot.bot_token,param:`${h}`,onCallback:t.modifyChannel},null,8,["token","param","onCallback"]),c(" Канал для проверки ")]),e("button",{type:"button",class:"btn btn-link text-danger",onClick:u=>t.removeChannelFromRule(h)},Do,8,Lo)]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":u=>t.pageForm.rules_if.channels[h]=u,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,Ko),[[p,t.pageForm.rules_if.channels[h]]])]))),256))])):a("",!0)])):a("",!0),t.pageForm.rules_if?(n(),i("h6",Go,"Иначе")):a("",!0),t.pageForm.rules_else_page_id?(n(),i("p",zo,[c("Вы выбрали страницу #"+g(t.pageForm.rules_else_page_id)+' в качестве условия "иначе" ',1),e("a",{href:"javascript:void(0)",onClick:o[34]||(o[34]=l=>t.pageForm.rules_else_page_id=null)},"Очистить")])):a("",!0),t.pageForm.rules_if?(n(),f(j,{key:5,current:t.pageForm.id,onCallback:t.attachPageToRule,editor:!1},null,8,["current","onCallback"])):a("",!0),t.pageForm.rules_if?(n(),i("div",Ao,[e("label",No,[b(d,null,{content:m(()=>[Jo]),default:m(()=>[Eo]),_:1}),c(" Сообщение в случае невыполнения условий (не обязательно) ")]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[35]||(o[35]=l=>t.pageForm.rules_else_message=l),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[p,t.pageForm.rules_else_message]])])):a("",!0)])):a("",!0),Ho],32)):a("",!0)}}}),Yo={data(){return{bot:null,menus:[],deletedMenus:[],menuForm:{title:null,description:null,image:null,info_link:null,bot_id:null}}},computed:{...F(["getCurrentBot"])},mounted(){this.loadCurrentBot().then(()=>{this.loadMenuByBotId()})},methods:{loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},loadMenuByBotId(){this.$store.dispatch("loadMenuByBotId",{botId:this.bot.id}).then(s=>{this.menus=s}).catch(()=>{})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(){this.menuForm.image=null},removeItem(s){this.menus[s].id&&this.deletedMenus.push(this.menus[s].id),this.menus.splice(s,1)},submitMenus(){this.menus.forEach(s=>{let t=new FormData;Object.keys(s).forEach(o=>{const d=s[o]||"";typeof d=="object"?t.append(o,JSON.stringify(d)):t.append(o,d)}),this.deletedMenus.length>0&&t.append("deleted_menus",JSON.stringify(this.deletedMenus)),typeof s.image!="string"&&(t.append("preview",s.image),t.delete("image")),this.$store.dispatch("createImageMenu",{menuForm:t}).then(o=>{this.$emit("callback",o.data),this.$notify("Меню успешно создано и сохранено")}).catch(o=>{})})},addImageMenu(){this.menuForm.bot_id=this.bot.id,this.menus.push(this.menuForm),this.$notify("Меню успешно добавлено в список"),this.menuForm={title:null,description:null,image:null,info_link:null,bot_id:null}},onChangePhotos(s){const t=s.target.files[0];this.menuForm.image=t}}},Wo={key:0,class:"card"},Zo={class:"card-body"},xo={class:"row"},el={class:"col-md-8"},tl={class:"row"},sl={class:"col-12"},ol={class:"mb-3"},ll=e("label",{class:"form-label",id:"menu-address"},[c(" Заголовок меню "),e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),nl={class:"row"},il={class:"col-12"},al={class:"mb-3"},dl={class:"form-label",id:"menu-description"},rl=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),cl={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},ul={class:"row"},_l={class:"col-12"},ml={class:"mb-3"},hl=e("label",{class:"form-label",id:"menu-address"},[c("Ссылка на страницу в "),e("a",{target:"_blank",href:"https://telegra.ph"},"telegra.ph")],-1),pl={class:"row"},bl={class:"col-12 mb-3"},gl=e("h5",null,"Картинка меню с позициями",-1),fl={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},yl={for:"menu-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},vl=e("span",null,"+",-1),kl={key:0,class:"mb-2 img-preview",style:{"margin-right":"10px"}},$l={class:"remove"},Fl=e("div",{class:"row"},[e("div",{class:"col-12"},[e("button",{class:"btn btn-outline-success w-100",type:"submit"},"Добавить меню ")])],-1),wl={class:"col-md-4"},Cl={class:"row"},Bl={class:"col-12 mt-3"},Pl={class:"card"},Vl={class:"card-header d-flex justify-content-between"},jl=["onClick"],Ul={class:"card-body"},Sl={class:"w-100 d-flex"},Tl={key:0,class:"mb-2 img-preview",style:{"margin-right":"10px"}},Il={key:0},Rl={key:1},Ol={key:1,class:"col-12 mt-3"},ql=e("p",null,"На текущий момент у заведения нет ни 1 созданного меню",-1),Ll=[ql],Ml={class:"row mt-3"},Dl={class:"col-12"},Kl=["disabled"];function Gl(s,t,o,d,_,l){const h=S("lazy");return _.bot?(n(),i("div",Wo,[e("div",Zo,[e("div",xo,[e("div",el,[e("form",{onSubmit:t[5]||(t[5]=w((...u)=>l.addImageMenu&&l.addImageMenu(...u),["prevent"]))},[e("h6",null,"Графическое Меню к боту #"+g(_.bot.id||"Не установлен"),1),e("div",tl,[e("div",sl,[e("div",ol,[ll,r(e("input",{type:"text",class:"form-control",placeholder:"Название меню","aria-label":"Название меню",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=u=>_.menuForm.title=u),"aria-describedby":"menu-address",required:""},null,512),[[p,_.menuForm.title]])])])]),e("div",nl,[e("div",il,[e("div",al,[e("label",dl,[c(" Описание меню "),rl,_.menuForm.description?(n(),i("small",cl," Длина текста "+g(_.menuForm.description.length),1)):a("",!0)]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Описание меню","aria-label":"Описание меню",maxlength:"255","onUpdate:modelValue":t[1]||(t[1]=u=>_.menuForm.description=u),"aria-describedby":"menu-description"},`
                    `,512),[[p,_.menuForm.description]])])])]),e("div",ul,[e("div",_l,[e("div",ml,[hl,c(" с вашим меню "),r(e("input",{type:"text",class:"form-control",placeholder:"Информационная ссылка","aria-label":"Информационная ссылка",maxlength:"255","onUpdate:modelValue":t[2]||(t[2]=u=>_.menuForm.info_link=u),"aria-describedby":"menu-info-link"},null,512),[[p,_.menuForm.info_link]])])])]),e("div",pl,[e("div",bl,[gl,e("div",fl,[e("label",yl,[vl,e("input",{type:"file",id:"menu-photos",accept:"image/*",onChange:t[3]||(t[3]=(...u)=>l.onChangePhotos&&l.onChangePhotos(...u)),style:{display:"none"}},null,32)]),_.menuForm.image?(n(),i("div",kl,[r(e("img",null,null,512),[[h,l.getPhoto(_.menuForm.image).imageUrl]]),e("div",$l,[e("a",{onClick:t[4]||(t[4]=u=>l.removePhoto())},"Удалить")])])):a("",!0)])])]),Fl],32)]),e("div",wl,[e("div",Cl,[_.menus.length>0?(n(!0),i(y,{key:0},k(_.menus,(u,I)=>(n(),i("div",Bl,[e("div",Pl,[e("div",Vl,[e("h6",null,[c("Название "),e("strong",null,g(u.title||"Не указано"),1)]),e("a",{class:"cursor-pointer",onClick:vr=>l.removeItem(I)},"Удалить",8,jl)]),e("div",Ul,[e("p",null,g(u.description||"Не указано"),1),e("p",null," ссылка на меню из telegra.ph "+g(u.info_link||"Не указано"),1),e("div",Sl,[u.image?(n(),i("div",Tl,[typeof u.image=="string"?r((n(),i("img",Il,null,512)),[[h,"/images-by-bot-id/"+_.bot.id+"/"+u.image]]):r((n(),i("img",Rl,null,512)),[[h,l.getPhoto(u.image).imageUrl]])])):a("",!0)])])])]))),256)):(n(),i("div",Ol,Ll))])])]),e("div",Ml,[e("div",Dl,[e("button",{onClick:t[6]||(t[6]=(...u)=>l.submitMenus&&l.submitMenus(...u)),disabled:_.menus.length===0,class:"btn btn-outline-primary p-3 w-100"},"Сохранить меню для заведения ",8,Kl)])])])])):a("",!0)}const zl=C(Yo,[["render",Gl]]),Al={props:["data"],data(){return{hasConnect:!1,bot:null,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null}}},computed:{...F(["getCurrentBot"])},mounted(){this.bot=this.getCurrentBot,this.data?this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null}):this.amoForm.bot_id=this.bot.id||null},methods:{submitAmo(){let s=new FormData;Object.keys(this.amoForm).forEach(t=>{const o=this.amoForm[t]||"";typeof o=="object"?s.append(t,JSON.stringify(o)):s.append(t,o)}),this.$store.dispatch("saveAmoCRM",{amoForm:s}).then(t=>{this.$notify("Данные CRM успешно сохранены")}).catch(t=>{})}}},Nl=e("div",{class:"col-12"},[e("p",null,[e("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),c(" по шагам")])],-1),El={class:"col-md-6 col-12 mb-2"},Jl={class:"form-label",id:"client_id"},Hl=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ql=e("div",null,"ID интеграции",-1),Xl=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Yl={class:"col-md-6 col-12 mb-2"},Wl={class:"form-label",id:"client_secret"},Zl=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xl=e("div",null,"Секрет интеграции",-1),en=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),tn={class:"col-md-6 mb-2"},sn={class:"form-label",id:"auth_code"},on=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ln=e("div",null,"Полученный код авторизации",-1),nn=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),an={class:"col-md-6 col-12 mb-2"},dn={class:"form-label",id:"subdomain2"},rn=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),cn=e("div",null,"Ваш поддомен в системе AMO CRM",-1),un=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),_n=e("div",{class:"col-md-12 col-12"},[e("button",{type:"submit",class:"btn btn-outline-primary p-3 w-100"},[e("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),c(" Сохранить настройку AMO ")])],-1);function mn(s,t,o,d,_,l){const h=U("Popper");return n(),i("form",{onSubmit:t[4]||(t[4]=w((...u)=>l.submitAmo&&l.submitAmo(...u),["prevent"])),class:"row"},[Nl,e("div",El,[e("label",Jl,[b(h,null,{content:m(()=>[Ql]),default:m(()=>[Hl]),_:1}),c(" client_id "),Xl]),r(e("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":t[0]||(t[0]=u=>_.amoForm.client_id=u),"aria-describedby":"client_id"},null,512),[[p,_.amoForm.client_id]])]),e("div",Yl,[e("label",Wl,[b(h,null,{content:m(()=>[xl]),default:m(()=>[Zl]),_:1}),c(" client_secret "),en]),r(e("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":t[1]||(t[1]=u=>_.amoForm.client_secret=u),"aria-describedby":"client_secret"},null,512),[[p,_.amoForm.client_secret]])]),e("div",tn,[e("label",sn,[b(h,null,{content:m(()=>[ln]),default:m(()=>[on]),_:1}),c(" auth_code "),nn]),r(e("textarea",{class:"form-control",placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":t[2]||(t[2]=u=>_.amoForm.auth_code=u),"aria-describedby":"auth_code"},`
                                    `,512),[[p,_.amoForm.auth_code]])]),e("div",an,[e("label",dn,[b(h,null,{content:m(()=>[cn]),default:m(()=>[rn]),_:1}),c(" subdomain "),un]),r(e("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":t[3]||(t[3]=u=>_.amoForm.subdomain=u),"aria-describedby":"subdomain"},null,512),[[p,_.amoForm.subdomain]])]),_n],32)}const hn=C(Al,[["render",mn]]);const pn={key:0,class:"row"},bn={class:"col-12"},gn={key:1,class:"row mb-3 bot-sub-menu"},fn={class:"col-12"},yn={class:"btn-group",role:"group","aria-label":"Basic outlined example"},vn=e("i",{class:"fa-solid fa-info mr-1"},null,-1),kn=["disabled"],$n=e("i",{class:"fa-solid fa-file mr-2"},null,-1),Fn=e("i",{class:"fa-solid fa-list-check mr-2"},null,-1),wn=e("i",{class:"fa-brands fa-shopify mr-2"},null,-1),Cn={class:"dropdown"},Bn=["disabled"],Pn=e("i",{class:"fa-solid fa-bars"},null,-1),Vn=[Pn],jn={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},Un={key:0},Sn={key:0,class:"row"},Tn={class:"col-12"},In={class:"card border-success mb-3 mt-3"},Rn={class:"card-body"},On={class:"form-label",id:"bot-level-2"},qn=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ln=e("div",null,[c("Ваш бот будет 1 в 1 как в шаблоне!"),e("br"),c("Потом можно исправить названия кнопок в меню. ")],-1),Mn=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Dn=["value"],Kn={class:"row"},Gn={class:"col-md-12 col-12"},zn={class:"form-check mb-3"},An=["value"],Nn=e("label",{class:"form-check-label",for:"bot-is-template"}," Сделать шаблоном ",-1),En={key:0,class:"col-md-12 col-12"},Jn={class:"mb-3"},Hn={class:"form-label",id:"bot-template-description"},Qn=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Xn=e("div",null,"Если вы создаете шаблон, а не реального бота ",-1),Yn=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Wn={class:"row"},Zn=e("div",{class:"col-12"},[e("p",null,[c("Для создания бота в Телеграм воспользуйтесь "),e("a",{href:"https://telegra.ph/Sozdanie-telegram-bota-06-12",target:"_blank"},"инструкцией")])],-1),xn={class:"col-12"},ei={class:"mb-3"},ti={class:"form-label",id:"bot-domain"},si=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),oi=e("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),li=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ni={key:0},ii=["href"],ai={class:"col-md-6 col-12"},di={class:"mb-3"},ri={class:"form-label d-flex justify-content-between",id:"bot-token"},ci=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ui=e("div",null,"Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),_i=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),mi=e("a",{href:"https://t.me/botfather",target:"_blank"},"Создать нового бота в ТГ",-1),hi={class:"col-md-6 col-12"},pi={class:"mb-3"},bi=e("label",{class:"form-label",id:"bot-token-dev"},"Токен бота (для тестирования)",-1),gi={class:"col-md-6 col-12"},fi={class:"mb-3"},yi={class:"d-flex justify-content-between align-items-center"},vi={class:"form-label d-flex justify-content-between",id:"bot-order-channel"},ki=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$i=e("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Fi=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),wi={class:"col-md-6 col-12"},Ci={class:"mb-3"},Bi={class:"d-flex justify-content-between"},Pi=e("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов (id,рекламный)",-1),Vi={key:1,class:"row"},ji={class:"col-12"},Ui={class:"mb-3"},Si={class:"d-flex justify-content-between"},Ti={class:"form-label",id:"bot-description"},Ii=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ri=e("div",null,"Отобразится пользователю при первом запуске",-1),Oi=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),qi={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Li={class:"col-12"},Mi={class:"mb-3"},Di={class:"d-flex justify-content-between"},Ki={class:"form-label",id:"bot-description"},Gi=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),zi=e("div",null,'Для меню "О Боте"',-1),Ai=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Ni={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Ei={class:"col-12"},Ji={class:"mb-3"},Hi={class:"d-flex justify-content-between"},Qi={class:"form-label",id:"bot-maintenance-message"},Xi=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Yi={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Wi={class:"col-md-6 col-12"},Zi={class:"mb-3"},xi={class:"form-label",id:"bot-balance"},ea=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ta=e("div",null,"Начальная сумма денег на счету у конкретного бота",-1),sa=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),oa={class:"col-md-6 col-12"},la={class:"mb-3"},na={class:"form-label",id:"bot-tax-per-day"},ia=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),aa=e("div",null,"Сумма списания денег за сутки работы бота (тариф)",-1),da=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),ra={class:"col-md-6 col-12"},ca={class:"mb-3"},ua=e("label",{class:"form-label",id:"bot-level-1"},[c(" Уровень 1 CashBack, % "),e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),_a={class:"col-md-6 col-12"},ma={class:"mb-3"},ha=e("label",{class:"form-label",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),pa={class:"col-md-6 col-12"},ba={class:"mb-3"},ga=e("label",{class:"form-label",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),fa={class:"col-12 mb-2"},ya={class:"form-check"},va=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),ka={key:0,class:"col-md-12 col-12"},$a={class:"form-check mb-3"},Fa=["value"],wa=e("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),Ca={class:"mb-3"},Ba=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Pa=e("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),Va=e("label",{class:"form-label",id:"bot-level-3"},[c("Токен платежной системы "),e("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить")],-1),ja={class:"col-12 mb-2"},Ua={class:"form-check"},Sa=e("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),Ta={key:1,class:"col-md-12 col-12"},Ia={class:"mb-3"},Ra=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Oa=e("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),qa=e("label",{class:"form-label",id:"bot-level-3"},[c("Ссылка на группу ВК с товарами "),e("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),La={class:"col-12"},Ma={class:"card mb-3"},Da=e("div",{class:"card-header"},[e("h6",null,[c("Информационная ссылка: создайте контент в "),e("a",{target:"_blank",href:"https://telegra.ph"},"https://telegra.ph")])],-1),Ka={class:"card-body"},Ga=e("div",{class:"row"},[e("div",{class:"col-12"},[e("h6",null,"Ссылка")])],-1),za={class:"row"},Aa={class:"col-12"},Na={class:"mb-3"},Ea={class:"col-12"},Ja={class:"card mb-3"},Ha=e("div",{class:"card-header"},[e("h6",null,"Ссылки на соц. сети")],-1),Qa={class:"card-body"},Xa=e("div",{class:"row"},[e("div",{class:"col-12"},[e("h6",null,"Ссылка")])],-1),Ya={class:"col-5"},Wa={class:"mb-3"},Za=["onUpdate:modelValue","aria-describedby"],xa={class:"col-5"},ed={class:"mb-3"},td=["onUpdate:modelValue","aria-describedby"],sd={class:"col-2"},od=["onClick"],ld=e("i",{class:"fa-regular fa-trash-can"},null,-1),nd=[ld],id={class:"row"},ad={class:"col-12"},dd={class:"col-12 mb-3"},rd=e("h6",null,[c("Аватар для бота "),e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),cd={class:"photo-preview d-flex justify-content-start flex-wrap w-100"},ud={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},_d=e("span",null,"+",-1),md={class:"mb-2 img-preview",style:{"margin-right":"10px"}},hd={class:"remove"},pd=["onClick"],bd=e("i",{class:"fa-regular fa-trash-can"},null,-1),gd=[bd],fd={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},yd={class:"remove"},vd=e("i",{class:"fa-regular fa-trash-can"},null,-1),kd=[vd],$d={class:"row"},Fd={class:"col-12"},wd=["disabled"],Cd={key:0},Bd={key:1},Pd={key:1},Vd={key:2},jd={key:3},Ud={key:4},Sd={key:5},Td={key:6},Id={key:7},Rd={key:8,class:"row"},Od={key:0,class:"col-12 col-md-8"},qd={key:1,class:"col-12 col-md-4"},Ld={props:["company","bot","editor"],data(){return{page:null,step:0,templates:[],load:!1,loadPage:!1,loadPageList:!1,need_payments:!1,need_shop:!1,command:null,botForm:{is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,main_channel:null,vk_shop_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],amo:null}}},watch:{need_payments:function(s,t){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)},"botForm.selected_bot_template_id":function(s,t){this.botForm.selected_bot_template_id!=null&&(this.loadSlugsByBotTemplate(this.botForm.selected_bot_template_id),this.loadPagesByBotTemplate(this.botForm.selected_bot_template_id))}},mounted(){this.loadBotTemplates(),this.bot&&this.$nextTick(()=>{this.loadSlugsByBotTemplate(this.bot.id),this.loadPagesByBotTemplate(this.bot.id),this.botForm={id:this.bot.id||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,photos:this.bot.photos||[],amo:this.bot.amo||null},this.botForm.payment_provider_token&&(this.need_payments=!0)})},methods:{addTextTo(s={param:null,text:null}){this.botForm[s.param]=s.text},loadSlugsByBotTemplate(s){this.load=!0,this.$store.dispatch("loadBotSlugs",{botId:s}).then(t=>{this.botForm.slugs=t,this.$nextTick(()=>{this.load=!1})})},loadPagesByBotTemplate(s){this.$store.dispatch("loadBotPages",{botId:s}).then(t=>{this.botForm.pages=t})},loadBotTemplates(){this.$store.dispatch("loadTemplates").then(s=>{this.templates=s.data})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s){const t=s.target.files;this.botForm.image=null;for(let o=0;o<t.length;o++)this.botForm.photos.push(t[o])},addItem(s){this.botForm[s].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(s,t){this.botForm[s].splice(t,1)},removePhoto(s){s?this.botForm.photos.splice(s,1):this.botForm.image=null},addBot(){let s=new FormData;Object.keys(this.botForm).forEach(t=>{const o=this.botForm[t]||"";typeof o=="object"?s.append(t,JSON.stringify(o)):s.append(t,o)}),this.company&&s.append("company_id",this.company.id);for(let t=0;t<this.botForm.photos.length;t++)s.append("images[]",this.botForm.photos[t]);s.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:s}).then(t=>{this.$emit("callback",t.data),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.bot==null&&(this.botForm={is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,main_channel:null,balance:null,tax_per_day:null,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[]})}).catch(t=>{})},pageListCallback(s){this.loadPage=!0,this.page=s,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(s){this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})}}},Pr=Object.assign(Ld,{__name:"BotForm",setup(s){return(t,o)=>{const d=U("Popper"),_=S("lazy");return n(),i(y,null,[s.company?(n(),i("div",pn,[e("div",bn,[e("h6",null,"Создаем бот к компании "+g(s.company.title||"Не установлен"),1)])])):a("",!0),s.editor?(n(),i("div",gn,[e("div",fn,[e("div",yn,[e("button",{type:"button",class:$([{"btn-info text-white":t.step===0},"btn btn-outline-info"]),onClick:o[0]||(o[0]=l=>t.step=0)},[vn,c(" Информация о боте ")],2),e("button",{type:"button",disabled:t.botForm.selected_bot_template_id===null,class:$([{"btn-info text-white":t.step===4},"btn btn-outline-info"]),onClick:o[1]||(o[1]=l=>t.step=4)},[$n,c(" Страницы ")],10,kn),e("button",{type:"button",class:$([{"btn-info text-white":t.step===7},"btn btn-outline-info"]),onClick:o[2]||(o[2]=l=>t.step=7)},[Fn,c(" AMO CRM ")],2),e("button",{type:"button",class:$([{"btn-info text-white":t.step===8},"btn btn-outline-info"]),onClick:o[3]||(o[3]=l=>t.step=8)},[wn,c(" Магазин ")],2),e("div",Cn,[e("button",{type:"button",disabled:t.botForm.selected_bot_template_id===null,class:"btn btn-outline-info dropdown-toggle custom-group-dropdown-btn",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},Vn,8,Bn),e("ul",jn,[e("li",null,[e("a",{class:"dropdown-item",href:"#bot-image-menu",onClick:o[4]||(o[4]=l=>t.step=5)},"Меню заведения")]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-menu-template",onClick:o[5]||(o[5]=l=>t.step=1)},"Шаблон клавитатур бота")]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-slugs",onClick:o[6]||(o[6]=l=>t.step=2)},"Скрипты")]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-dialogs",onClick:o[7]||(o[7]=l=>t.step=6)},"Диалоги")]),e("li",null,[e("a",{class:"dropdown-item",href:"#bot-users",onClick:o[8]||(o[8]=l=>t.step=3)},"Пользователи")])])])])])])):a("",!0),e("form",{class:"pb-5 mb-5",onSubmit:o[34]||(o[34]=w((...l)=>t.addBot&&t.addBot(...l),["prevent"]))},[t.step===0?(n(),i("div",Un,[t.templates.length>0&&s.bot==null?(n(),i("div",Sn,[e("div",Tn,[e("div",In,[e("div",Rn,[e("label",On,[b(d,null,{content:m(()=>[Ln]),default:m(()=>[qn]),_:1}),c(" Выберите шаблон! "),Mn]),r(e("select",{class:"form-control","aria-label":"Шаблон бота","onUpdate:modelValue":o[9]||(o[9]=l=>t.botForm.selected_bot_template_id=l),"aria-describedby":"bot-level-2",required:""},[(n(!0),i(y,null,k(t.templates,(l,h)=>(n(),i("option",{value:l.id},g(l.template_description||l.bot_domain||"Не указано"),9,Dn))),256))],512),[[O,t.botForm.selected_bot_template_id]])])])])])):a("",!0),e("div",Kn,[e("div",Gn,[e("div",zn,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.botForm.is_template,"onUpdate:modelValue":o[10]||(o[10]=l=>t.botForm.is_template=l),id:"bot-is-template"},null,8,An),[[v,t.botForm.is_template]]),Nn])]),t.botForm.is_template?(n(),i("div",En,[e("div",Jn,[e("label",Hn,[b(d,null,{content:m(()=>[Xn]),default:m(()=>[Qn]),_:1}),c(" Название шаблона бота "),Yn]),r(e("input",{type:"text",class:"form-control",placeholder:"Название \\ описание шаблона","aria-label":"Описание шаблона","onUpdate:modelValue":o[11]||(o[11]=l=>t.botForm.template_description=l),maxlength:"255","aria-describedby":"bot-template-description",required:""},null,512),[[p,t.botForm.template_description]])])])):a("",!0)]),e("div",Wn,[Zn,e("div",xn,[e("div",ei,[e("label",ti,[b(d,null,{content:m(()=>[oi]),default:m(()=>[si]),_:1}),c(" Доменное имя бота из BotFather "),li]),r(e("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":o[12]||(o[12]=l=>t.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[p,t.botForm.bot_domain]]),t.botForm.bot_domain?(n(),i("p",ni,[c("Проверить работу бота "),e("a",{href:"https://t.me/"+t.botForm.bot_domain,target:"_blank"},"@"+g(t.botForm.bot_domain),9,ii)])):a("",!0)])]),e("div",ai,[e("div",di,[e("label",ri,[e("div",null,[b(d,null,{content:m(()=>[ui]),default:m(()=>[ci]),_:1}),c(" Токен бота "),_i]),mi]),r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[13]||(o[13]=l=>t.botForm.bot_token=l),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[p,t.botForm.bot_token]])])]),e("div",hi,[e("div",pi,[bi,r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[14]||(o[14]=l=>t.botForm.bot_token_dev=l),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[p,t.botForm.bot_token_dev]])])]),e("div",gi,[e("div",fi,[e("div",yi,[e("label",vi,[e("div",null,[b(d,null,{content:m(()=>[$i]),default:m(()=>[ki]),_:1}),c(" Канал для заказов (id) "),Fi])]),b(V,{token:t.botForm.bot_token,param:"order_channel",onCallback:t.addTextTo},null,8,["token","onCallback"])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[15]||(o[15]=l=>t.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[p,t.botForm.order_channel]])])]),e("div",wi,[e("div",Ci,[e("div",Bi,[Pi,b(V,{token:t.botForm.bot_token,param:"main_channel",onCallback:t.addTextTo},null,8,["token","onCallback"])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[16]||(o[16]=l=>t.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[p,t.botForm.main_channel]])])])]),t.botForm.bot_token?(n(),i("div",Vi,[e("div",ji,[e("div",Ui,[e("div",Si,[e("label",Ti,[b(d,null,{content:m(()=>[Ri]),default:m(()=>[Ii]),_:1}),c(" Приветственное сообщение "),Oi,t.botForm.welcome_message?(n(),i("small",qi," Длина текста "+g(t.botForm.welcome_message.length),1)):a("",!0)]),b(B,{param:"welcome_message",onCallback:t.addTextTo},null,8,["onCallback"])]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":o[17]||(o[17]=l=>t.botForm.welcome_message=l),"aria-describedby":"bot-description",required:""},`
                    `,512),[[p,t.botForm.welcome_message]])])]),e("div",Li,[e("div",Mi,[e("div",Di,[e("label",Ki,[b(d,null,{content:m(()=>[zi]),default:m(()=>[Gi]),_:1}),c(" Описание бота "),Ai,t.botForm.description?(n(),i("small",Ni," Длина текста "+g(t.botForm.description.length),1)):a("",!0)]),b(B,{param:"description",onCallback:t.addTextTo},null,8,["onCallback"])]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":o[18]||(o[18]=l=>t.botForm.description=l),"aria-describedby":"bot-description",required:""},`
                    `,512),[[p,t.botForm.description]])])]),e("div",Ei,[e("div",Ji,[e("div",Hi,[e("label",Qi,[c("Сообщение для режима тех. работ "),Xi,t.botForm.maintenance_message?(n(),i("small",Yi," Длина текста "+g(t.botForm.maintenance_message.length),1)):a("",!0)]),b(B,{param:"maintenance_message",onCallback:t.addTextTo},null,8,["onCallback"])]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":o[19]||(o[19]=l=>t.botForm.maintenance_message=l),maxlength:"255","aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[p,t.botForm.maintenance_message]])])]),e("div",Wi,[e("div",Zi,[e("label",xi,[b(d,null,{content:m(()=>[ta]),default:m(()=>[ea]),_:1}),c(" Баланс бота, руб "),sa]),r(e("input",{type:"number",class:"form-control",placeholder:"Баланс","aria-label":"Баланс","onUpdate:modelValue":o[20]||(o[20]=l=>t.botForm.balance=l),min:"0","aria-describedby":"bot-balance",required:""},null,512),[[p,t.botForm.balance]])])]),e("div",oa,[e("div",la,[e("label",na,[b(d,null,{content:m(()=>[aa]),default:m(()=>[ia]),_:1}),c(" Списание за сутки, руб "),da]),r(e("input",{type:"number",class:"form-control",placeholder:"Списание","aria-label":"Списание","onUpdate:modelValue":o[21]||(o[21]=l=>t.botForm.tax_per_day=l),min:"0","aria-describedby":"bot-tax-per-day",required:""},null,512),[[p,t.botForm.tax_per_day]])])]),e("div",ra,[e("div",ca,[ua,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[22]||(o[22]=l=>t.botForm.level_1=l),max:"50",min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[p,t.botForm.level_1]])])]),e("div",_a,[e("div",ma,[ha,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[23]||(o[23]=l=>t.botForm.level_2=l),max:"50",min:"0","aria-describedby":"bot-level-2"},null,512),[[p,t.botForm.level_2]])])]),e("div",pa,[e("div",ba,[ga,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[24]||(o[24]=l=>t.botForm.level_3=l),max:"50",min:"0","aria-describedby":"bot-level-3"},null,512),[[p,t.botForm.level_3]])])]),e("div",fa,[e("div",ya,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[25]||(o[25]=l=>t.need_payments=l),type:"checkbox",id:"need-payments"},null,512),[[v,t.need_payments]]),va])]),t.need_payments?(n(),i("div",ka,[e("div",$a,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.botForm.auto_cashback_on_payments,"onUpdate:modelValue":o[26]||(o[26]=l=>t.botForm.auto_cashback_on_payments=l),id:"bot-auto-cashback-on-payments"},null,8,Fa),[[v,t.botForm.auto_cashback_on_payments]]),wa]),e("div",Ca,[b(d,null,{content:m(()=>[Pa]),default:m(()=>[Ba]),_:1}),Va,r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":o[27]||(o[27]=l=>t.botForm.payment_provider_token=l),"aria-describedby":"bot-level-3"},null,512),[[p,t.botForm.payment_provider_token]])])])):a("",!0),e("div",ja,[e("div",Ua,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[28]||(o[28]=l=>t.need_shop=l),type:"checkbox",id:"need-shop"},null,512),[[v,t.need_shop]]),Sa])]),t.need_shop?(n(),i("div",Ta,[e("div",Ia,[b(d,null,{content:m(()=>[Oa]),default:m(()=>[Ra]),_:1}),qa,r(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[29]||(o[29]=l=>t.botForm.vk_shop_link=l),"aria-describedby":"vk_shop_link"},null,512),[[p,t.botForm.vk_shop_link]])])])):a("",!0),e("div",La,[e("div",Ma,[Da,e("div",Ka,[Ga,e("div",za,[e("div",Aa,[e("div",Na,[r(e("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":o[30]||(o[30]=l=>t.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[p,t.botForm.info_link]])])])])])])]),e("div",Ea,[e("div",Ja,[Ha,e("div",Qa,[Xa,(n(!0),i(y,null,k(t.botForm.social_links,(l,h)=>(n(),i("div",{class:"row",key:"social-link"+h},[e("div",Ya,[e("div",Wa,[r(e("input",{type:"text",class:"form-control",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":u=>t.botForm.social_links[h].title=u,"aria-describedby":"bot-social-link-"+h,required:""},null,8,Za),[[p,t.botForm.social_links[h].title]])])]),e("div",xa,[e("div",ed,[r(e("input",{type:"text",class:"form-control",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":u=>t.botForm.social_links[h].url=u,"aria-describedby":"bot-social-link-"+h,required:""},null,8,td),[[p,t.botForm.social_links[h].url]])])]),e("div",sd,[e("button",{type:"button",onClick:u=>t.removeItem("social_links",h),class:"btn btn-outline-danger w-100"},nd,8,od)])]))),128)),e("div",id,[e("div",ad,[e("button",{type:"button",onClick:o[31]||(o[31]=l=>t.addSocialLinks()),class:"btn btn-outline-success w-100"},"Добавить еще ссылку ")])])])])]),e("div",dd,[rd,e("div",cd,[e("label",ud,[_d,e("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:o[32]||(o[32]=(...l)=>t.onChangePhotos&&t.onChangePhotos(...l)),style:{display:"none"}},null,32)]),t.botForm.photos?(n(!0),i(y,{key:0},k(t.botForm.photos,(l,h)=>(n(),i("div",md,[r(e("img",null,null,512),[[_,t.getPhoto(l).imageUrl]]),e("div",hd,[e("a",{onClick:u=>t.removePhoto(h)},gd,8,pd)])]))),256)):(n(),i("div",fd,[r(e("img",null,null,512),[[_,"/images-by-bot-id/"+s.bot.id+"/"+t.botForm.image]]),e("div",yd,[e("a",{onClick:o[33]||(o[33]=l=>t.removePhoto())},kd)])]))])])])):a("",!0),e("div",$d,[e("div",Fd,[e("button",{disabled:!t.botForm.bot_token,type:"submit",class:"btn btn-success w-100 p-3"},[s.bot?(n(),i("span",Bd,"Обновить бота")):(n(),i("span",Cd,"Добавить бота"))],8,wd)])])])):a("",!0),t.step===7?(n(),i("div",Pd,[t.load?a("",!0):(n(),f(hn,{key:0,data:t.botForm.amo},null,8,["data"]))])):a("",!0),t.step===8?(n(),i("div",Vd,[t.load?a("",!0):(n(),f(M,{key:0}))])):a("",!0),t.step===5?(n(),i("div",jd,[t.load?a("",!0):(n(),f(zl,{key:0}))])):a("",!0),t.step===1?(n(),i("div",Ud,[t.load?a("",!0):(n(),f(P,{key:0,"select-mode":!1}))])):a("",!0),t.step===6?(n(),i("div",Sd,[t.load?a("",!0):(n(),f(D,{key:0}))])):a("",!0),t.step===2?(n(),i("div",Td,[t.load?a("",!0):(n(),f(K,{key:0}))])):a("",!0),t.step===3?(n(),i("div",Id,[t.load?a("",!0):(n(),f(G,{key:0}))])):a("",!0),t.step===4?(n(),i("div",Rd,[t.load?a("",!0):(n(),i("div",Od,[t.loadPage?a("",!0):(n(),f(Xo,{key:0,page:t.page,onCallback:t.pageCallback},null,8,["page","onCallback"]))])),t.load?a("",!0):(n(),i("div",qd,[t.loadPageList?a("",!0):(n(),f(j,{key:0,editor:!0,onCallback:t.pageListCallback},null,8,["onCallback"]))]))])):a("",!0)],32)],64)}}}),Md={key:0},Dd={class:"row"},Kd={class:"col-md-12 d-flex flex-column"},Gd={class:"d-flex"},zd={class:"dropdown mr-2"},Ad=e("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),Nd={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ed=["onClick"],Jd={class:"input-group mb-3"},Hd={key:0,class:"mt-2"},Qd={class:"badge bg-info mr-1"},Xd=["onClick"],Yd=e("i",{class:"fa-solid fa-xmark"},null,-1),Wd=[Yd],Zd={key:0,class:"row"},xd={class:"col-12 mb-3"},er={class:"list-group w-100"},tr=["onClick"],sr={key:0,class:"badge bg-info"},or=["onClick"],lr=e("i",{class:"fa-regular fa-copy"},null,-1),nr=[lr],ir=["onClick"],ar=e("i",{class:"fa-solid fa-boxes-packing"},null,-1),dr=[ar],rr=["onClick"],cr=e("i",{class:"fa-solid fa-box-open"},null,-1),ur=[cr],_r=["onClick"],mr=e("i",{class:"fa-solid fa-trash-can text-white"},null,-1),hr=[mr],pr={class:"col-12"},br={key:1,class:"row"},gr=e("div",{class:"col-12"},[e("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),fr=[gr],yr={props:["companyId","editor"],data(){return{filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],search:null,bots_paginate_object:null}},computed:{...F(["getBots","getBotsPaginateObject","getCurrentCompany"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let s=[];return this.selectedFilters.forEach(t=>{switch(t.slug){case"active":this.bots.filter(o=>o.deleted_at==null).forEach(o=>{s.push(o)});break;case"archive":this.bots.filter(o=>o.deleted_at!=null).forEach(o=>{s.push(o)});break}}),this.search==null?s:s.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.loadBots(),this.selectFilter("active")},methods:{duplicate(s){if(!this.getCurrentCompany){this.$notify("У вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:s,company_id:this.getCurrentCompany.id}}).then(t=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно продублирован")})},addToArchive(s){this.$store.dispatch("removeBot",{botId:s}).then(t=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(s){this.$store.dispatch("forceDeleteBot",{botId:s}).then(t=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(s){this.$store.dispatch("restoreBot",{botId:s}).then(t=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(s){let t=this.filters.find(o=>o.slug===s);t&&this.selectedFilters.filter(o=>o.slug===s).length===0&&this.selectedFilters.push(t)},removeSelectedFilter(s){let t=this.selectedFilters.findIndex(o=>o.slug===s);this.selectedFilters.splice(t,1)},selectBot(s){this.$emit("callback",s),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(s){this.loadBots(s)},loadBots(s=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search},page:s}).then(t=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject}).catch(()=>{this.loading=!1})}}},Vr=Object.assign(yr,{__name:"BotList",setup(s){return(t,o)=>t.show?(n(),i("div",Md,[e("div",Dd,[e("div",Kd,[e("div",Gd,[e("div",zd,[Ad,e("ul",Nd,[(n(!0),i(y,null,k(t.filters,d=>(n(),i("li",null,[e("a",{class:"dropdown-item",onClick:_=>t.selectFilter(d.slug),href:"#filter"},[e("i",{class:$([d.icon,"mr-2"])},null,2),c(" "+g(d.name||"Не указано"),1)],8,Ed)]))),256))])]),e("div",Jd,[r(e("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":o[0]||(o[0]=d=>t.search=d),"aria-describedby":"button-addon2"},null,512),[[p,t.search]]),e("button",{class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=(...d)=>t.loadBots&&t.loadBots(...d)),type:"button",id:"button-addon2"},"Найти ")])]),t.selectedFilters.length>0?(n(),i("p",Hd,[(n(!0),i(y,null,k(t.selectedFilters,d=>(n(),i("span",Qd,[c(g(d.name||"не указан")+" ",1),e("a",{onClick:_=>t.removeSelectedFilter(d.slug),class:"ml-1 text-white",href:"#filter"},Wd,8,Xd)]))),256))])):a("",!0)])]),t.bots.length>0?(n(),i("div",Zd,[e("div",xd,[e("ul",er,[s.editor?a("",!0):(n(),i("li",{key:0,class:"list-group-item active cursor-pointer btn btn-outline-info",onClick:o[2]||(o[2]=d=>t.selectBot(null))},"Создать нового бота ")),(n(!0),i(y,null,k(t.filteredBots,(d,_)=>(n(),i("li",{class:$(["list-group-item cursor-pointer btn mb-1 d-flex align-items-center justify-between",{"btn-outline-info":d.deleted_at==null,"btn-outline-secondary border-secondary":d.deleted_at!=null}])},[e("strong",{onClick:l=>t.selectBot(d),style:{"word-wrap":"break-word"}},[e("i",{class:$([{"text-danger":d.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),c(g(d.bot_domain||"Не указано"),1)],8,tr),d.is_template?(n(),i("span",sr,g(d.template_description||"Шаблон без названия"),1)):a("",!0),e("div",null,[e("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:l=>t.duplicate(d.id),title:"Дублировать"},nr,8,or),d.deleted_at==null?(n(),i("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:l=>t.addToArchive(d.id),title:"В архив"},dr,8,ir)):a("",!0),d.deleted_at!=null?(n(),i("button",{key:1,class:"btn btn-outline-info mr-2",onClick:l=>t.extractFromArchive(d.id),title:"Из архива"},ur,8,rr)):a("",!0),d.deleted_at!=null?(n(),i("button",{key:2,class:"btn btn-danger mr-2",onClick:l=>t.forceDelete(d.id),title:"Удалить на совсем"},hr,8,_r)):a("",!0)])],2))),256))])]),e("div",pr,[t.bots_paginate_object?(n(),f(T,{key:0,onPagination_page:t.nextBots,pagination:t.bots_paginate_object},null,8,["onPagination_page","pagination"])):a("",!0)])])):(n(),i("div",br,fr))])):a("",!0)}});export{zl as I,Pr as _,Vr as a,j as b,Xo as c};
