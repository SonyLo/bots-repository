import{L as T,q as l,t as a,v as e,x as f,P as $,H as d,J as h,D as u,y as m,A as r,F as b,C as _,T as v,Z as I,K as C,G as V,B as w,O as B,u as U,a4 as j,N as L,R as F}from"./index.es-87f808e1.js";import{_ as M}from"./app-039f5e6e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./BotMediaList-1361456d.js";import"./Pagination-221154ef.js";import"./InlineInjectionsHelper.vue_vue_type_style_index_0_lang-84854da4.js";import"./main-d422527f.js";import"./TelegramChannelHelper-d590d406.js";import"./v4-4a60fe23.js";import"./carousel.es-681e03d4.js";import"./GlobalSlugList-6f3d8edc.js";import"./vue3-perfect-scrollbar-94da7cc3.js";import"./index-0b7b57a4.js";const z={class:"nav nav-tabs mb-2"},O={class:"nav-item"},q={class:"nav-item"},E={class:"nav-item"},D={class:"form-floating mb-2"},W={for:"floatingInput"},P={key:0,class:"ml-1",style:{"font-size":"10px"}},H={class:"form-floating"},N={for:"floatingTextarea2"},A={key:0,class:"ml-1",style:{"font-size":"10px"}},J=e("h6",{class:"opacity-75 my-2"},"Контактная информация",-1),R={class:"form-floating mb-2"},G=e("label",{for:"floatingInput"},"Телефон",-1),K={class:"form-floating mb-2"},X=e("label",{for:"floatingInput"},"Инста",-1),Y={class:"form-floating mb-2"},Z=e("label",{for:"floatingInput"},"Вконтакте",-1),Q={class:"form-floating mb-2"},x=e("label",{for:"floatingInput"},"Почта",-1),tt={class:"form-floating mb-2"},et=e("label",{for:"floatingInput"},"Сайт",-1),ot=e("h6",{class:"opacity-75 my-2"},"Расположение заведения",-1),st={class:"form-floating mb-2"},nt={for:"floatingInput"},lt={key:0,class:"ml-1",style:{"font-size":"10px"}},at={class:"form-floating mb-2"},it=e("label",{for:"floatingInput"},"Виджет с Яндекс.Картой",-1),rt=e("h6",{class:"opacity-75 my-3"},"График работы",-1),ct=e("div",{class:"alert alert-light p-2",style:{"font-size":"12px"},role:"alert"},[u(" Укажите график работы вашего заведения. Если в какой-то день ваше заведение "),e("span",{class:"fw-bold"},"закрыто"),u(" - поставьте галочку сбоку от времени и укажите причину. ")],-1),dt={class:"mb-0",style:{"font-size":"12px"}},mt={class:"input-group mb-2"},pt={class:"input-group-text"},ht=["onUpdate:modelValue"],ut={key:0,class:"form-floating"},ft=["onUpdate:modelValue"],bt=e("label",{for:"floatingInput"},"Начало",-1),_t={key:1,class:"form-floating"},yt=["onUpdate:modelValue"],gt=e("label",{for:"floatingInput"},"Окончание",-1),kt={key:2,class:"form-floating"},vt=["onUpdate:modelValue"],wt=e("label",{for:"floatingInput"},"Причина закрытия",-1),$t=e("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),Ft=e("div",{class:"alert alert-light mb-2"}," Максимальное значение CashBack, которое пользователь может списать во время покупки в магазине, в % от цены заказа. ",-1),Ct={class:"form-floating mb-2"},Vt=e("label",{for:"floatingInput"},"CashBack",-1),Bt=e("div",{class:"alert alert-light mb-2"}," Уровни автоматического начисления CashBack по реферальной программе, в %. ",-1),St={class:"form-floating mb-2"},Tt=e("label",{for:"floatingInput"},"Уровень 1, %",-1),It={class:"form-floating mb-2"},Ut=e("label",{for:"floatingInput"},"Уровень 2, %",-1),jt={class:"form-floating mb-2"},Lt=e("label",{for:"floatingInput"},"Уровень 3, %",-1),Mt={class:"mb-2"},zt={class:"form-check"},Ot=e("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),qt={key:0,class:"mb-2"},Et=e("h6",{class:"opacity-75 my-2"},"Настройка категорий CashBack-а",-1),Dt=e("div",{class:"alert alert-light",role:"alert"}," Категории CashBack - это возможность разделить накопления и траты CashBack пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),Wt={class:"input-group mb-2"},Pt={class:"form-floating"},Ht=["onUpdate:modelValue"],Nt=e("label",{for:"floatingInput"},"Название категории",-1),At=["onClick"],Jt=e("i",{class:"fa-regular fa-trash-can"},null,-1),Rt=[Jt],Gt={class:"mb-2"},Kt={class:"form-check"},Xt=e("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),Yt={key:1,class:"col-md-12 col-12 mb-2"},Zt={class:"form-floating mb-2"},Qt=e("option",{value:null},"Не выбрано",-1),xt=["value"],te=e("label",{for:"floatingSelect"},[e("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),u(" Правила критических оповещений ")],-1),ee={class:"m-0 fst-italic"},oe={class:"input-group mb-2"},se={class:"input-group-text"},ne={class:"form-check d-flex justify-content-center align-items-center"},le=["onUpdate:modelValue","id"],ae={class:"form-floating"},ie=["onUpdate:modelValue"],re=e("label",{for:"floatingInput"},"Значение",-1),ce=["onClick"],de=e("i",{class:"fa-regular fa-trash-can"},null,-1),me=[de],pe=e("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),he=e("h6",{class:"fw-bold"},"Варианты скрипта",-1),ue={key:0,class:"list-group mb-2"},fe=["onClick"],be={class:"fw-bold"},_e=e("h6",{class:"fw-bold"},"Редактор",-1),ye={data(){return{scripts:[],selected_script:null,load_script:!0,tab:0,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],selected_warning:null,botForm:{warnings:[],payment_provider_token:null,auto_cashback_on_payments:!1,level_1:0,level_2:0,level_3:0,max_cashback_use_percent:0,cashback_config:[]},companyForm:{id:null,title:null,description:null,address:null,phones:[],links:{vk:null,inst:null,map_link:null,site:null},email:null,schedule:[{day:"Понедельник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Вторник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Среда",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Четверг",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Пятница",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Суббота",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Воскресенье",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"}]}}},computed:{currentBot(){return window.currentBot},filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(n=>!(this.botForm.warnings.findIndex(t=>t.rule_key===n.key)>=0))}},watch:{tab(n,t){this.tab===2&&this.loadFriendsScriptVariants()}},mounted(){const n=this.currentBot.company;this.companyForm.id=n.id||null,this.companyForm.title=n.title||null,this.companyForm.description=n.description||null,this.companyForm.email=n.email||null,this.companyForm.address=n.address||null,this.companyForm.phones=n.phones||["+7"],this.botForm.payment_provider_token=this.currentBot.payment_provider_token||null,this.botForm.auto_cashback_on_payments=this.currentBot.auto_cashback_on_payments||!1,this.botForm.max_cashback_use_percent=this.currentBot.max_cashback_use_percent||0,this.botForm.level_1=this.currentBot.level_1||0,this.botForm.level_2=this.currentBot.level_2||0,this.botForm.level_3=this.currentBot.level_3||0,this.botForm.cashback_config=this.currentBot.cashback_config||[],this.botForm.warnings=this.currentBot.warnings||[];let t=c=>{if(!c)return!1;let s=["inst","vk","map_link","site"],i=!1,p=0;return Object.keys(c).forEach(k=>{s.indexOf(k)!==-1&&(i=!0,p++)}),i&&p===s.length};this.companyForm.links=t(n.links)?n.links:{vk:null,inst:null,map_link:null,site:null};let o=c=>{if((c||[]).length<7)return!1;let s=!0;return c.forEach(i=>{s=s&&typeof i=="object"}),s};this.companyForm.schedule=o(n.schedule)?n.schedule:this.companyForm.schedule},methods:{submitBotForm(){let n=new FormData;Object.keys(this.botForm).forEach(t=>{const o=this.botForm[t]||"";typeof o=="object"?n.append(t,JSON.stringify(o)):n.append(t,o)}),this.$store.dispatch("updateBotParams",{botForm:n}).then(t=>{this.$notify({title:"Информация о боте",text:"Информация о боте успешно обновлена!",type:"success"}),this.$emit("callback",t.data),window.location.reload()}).catch(t=>{this.$notify({title:"Информация о боте",text:"Ошибка обновления информации о боте",type:"error"})})},callbackScriptChange(){this.loadFriendsScriptVariants()},loadFriendsScriptVariants(){this.selected_script=null,this.load_script=!1,this.$store.dispatch("friendsLoadScriptVariants").then(n=>{this.load_script=!0,this.scripts=n||[],this.scripts.length>0&&this.selectScript(this.scripts[0])}).catch(n=>{this.load_script=!0})},selectScript(n){this.selected_script=null,this.load_script=!1,this.$nextTick(()=>{this.selected_script=n,this.load_script=!0})},submitCompanyForm(){let n=new FormData;Object.keys(this.companyForm).forEach(t=>{const o=this.companyForm[t]||"";typeof o=="object"?n.append(t,JSON.stringify(o)):n.append(t,o)}),this.$store.dispatch("updateCompany",{companyForm:n}).then(t=>{this.$notify({title:"Информация о компании",text:"Информация о компании успешно обновлена!",type:"success"}),this.$emit("callback",t.data),window.location.reload()}).catch(t=>{this.$notify({title:"Информация о компании",text:"Ошибка обновления информации о компании",type:"error"})})},addWarning(){const n=this.selected_warning;this.botForm.warnings.push({rule_key:n.key,rule_value:0,is_active:!0}),this.selected_warning=null},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(n){let t=this.warnings.find(o=>o.key===n);return t||{title:"Не найдено"}},removeWarning(n){this.botForm.warnings.splice(n,1)},removeCashBackConfig(n){this.botForm.cashback_config.splice(n,1)}}},ge=Object.assign(ye,{__name:"CompanyInfo",setup(n){return(t,o)=>{const c=T("mask");return l(),a(b,null,[e("ul",z,[e("li",O,[e("a",{class:f(["nav-link",{"active fw-bold":t.tab===0}]),onClick:o[0]||(o[0]=s=>t.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Основное",2)]),e("li",q,[e("a",{class:f(["nav-link",{"active fw-bold":t.tab===1}]),onClick:o[1]||(o[1]=s=>t.tab=1),href:"javascript:void(0)"},"CashBack",2)]),e("li",E,[e("a",{class:f(["nav-link",{"active fw-bold":t.tab===2}]),onClick:o[2]||(o[2]=s=>t.tab=2),href:"javascript:void(0)"},"Мои друзья",2)])]),t.tab===0?(l(),a("form",{key:0,onSubmit:o[12]||(o[12]=$((...s)=>t.submitCompanyForm&&t.submitCompanyForm(...s),["prevent"]))},[e("div",D,[d(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>t.companyForm.title=s),maxlength:"255",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.companyForm.title]]),e("label",W,[u("Название "),(t.companyForm.title||"").length>0?(l(),a("span",P,"("+m(t.companyForm.title.length)+"/255)",1)):r("",!0)])]),e("div",H,[d(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=s=>t.companyForm.description=s),maxlength:"512",required:"",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[h,t.companyForm.description]]),e("label",N,[u("Описание "),(t.companyForm.description||"").length>0?(l(),a("span",A,"("+m(t.companyForm.description.length)+"/512)",1)):r("",!0)])]),J,e("div",R,[d(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>t.companyForm.phones[0]=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[c,["+7(###)###-##-##"]],[h,t.companyForm.phones[0]]]),G]),e("div",K,[d(e("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>t.companyForm.links.inst=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,t.companyForm.links.inst]]),X]),e("div",Y,[d(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.companyForm.links.vk=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,t.companyForm.links.vk]]),Z]),e("div",Q,[d(e("input",{type:"email","onUpdate:modelValue":o[8]||(o[8]=s=>t.companyForm.email=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,t.companyForm.email]]),x]),e("div",tt,[d(e("input",{type:"url","onUpdate:modelValue":o[9]||(o[9]=s=>t.companyForm.links.site=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,t.companyForm.links.site]]),et]),ot,e("div",st,[d(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>t.companyForm.address=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[h,t.companyForm.address]]),e("label",nt,[u("Адрес расположения "),(t.companyForm.address||"").length>0?(l(),a("span",lt,"("+m(t.companyForm.address.length)+"/255)",1)):r("",!0)])]),e("div",at,[d(e("textarea",{"onUpdate:modelValue":o[11]||(o[11]=s=>t.companyForm.links.map_link=s),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[h,t.companyForm.links.map_link]]),it]),rt,ct,(l(!0),a(b,null,_(t.companyForm.schedule,(s,i)=>(l(),a(b,null,[e("p",dt,m(t.companyForm.schedule[i].day),1),e("div",mt,[e("div",pt,[d(e("input",{class:"form-check-input mt-0","onUpdate:modelValue":p=>t.companyForm.schedule[i].closed=p,type:"checkbox",value:"","aria-label":"Checkbox for following text input"},null,8,ht),[[v,t.companyForm.schedule[i].closed]])]),t.companyForm.schedule[i].closed?r("",!0):(l(),a("div",ut,[d(e("input",{type:"time","onUpdate:modelValue":p=>t.companyForm.schedule[i].start_at=p,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,ft),[[h,t.companyForm.schedule[i].start_at]]),bt])),t.companyForm.schedule[i].closed?r("",!0):(l(),a("div",_t,[d(e("input",{type:"time","onUpdate:modelValue":p=>t.companyForm.schedule[i].end_at=p,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,yt),[[h,t.companyForm.schedule[i].end_at]]),gt])),t.companyForm.schedule[i].closed?(l(),a("div",kt,[d(e("input",{type:"text","onUpdate:modelValue":p=>t.companyForm.schedule[i].closed_comment=p,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,vt),[[h,t.companyForm.schedule[i].closed_comment]]),wt])):r("",!0)])],64))),256)),$t],32)):r("",!0),t.tab===1?(l(),a("form",{key:1,onSubmit:o[22]||(o[22]=$((...s)=>t.submitBotForm&&t.submitBotForm(...s),["prevent"]))},[Ft,e("div",Ct,[d(e("input",{type:"number","onUpdate:modelValue":o[13]||(o[13]=s=>t.botForm.max_cashback_use_percent=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.botForm.max_cashback_use_percent]]),Vt]),Bt,e("div",St,[d(e("input",{type:"number","onUpdate:modelValue":o[14]||(o[14]=s=>t.botForm.level_1=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.botForm.level_1]]),Tt]),e("div",It,[d(e("input",{type:"number","onUpdate:modelValue":o[15]||(o[15]=s=>t.botForm.level_2=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.botForm.level_2]]),Ut]),e("div",jt,[d(e("input",{type:"number","onUpdate:modelValue":o[16]||(o[16]=s=>t.botForm.level_3=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.botForm.level_3]]),Lt]),e("div",Mt,[e("div",zt,[d(e("input",{class:"form-check-input","onUpdate:modelValue":o[17]||(o[17]=s=>t.need_cashback_config=s),type:"checkbox",id:"need-cashback-config"},null,512),[[v,t.need_cashback_config]]),Ot])]),t.need_cashback_config?(l(),a("div",qt,[Et,Dt,(l(!0),a(b,null,_(t.botForm.cashback_config,(s,i)=>(l(),a("div",{class:"d-flex justify-content-between flex-wrap",key:"social-link"+i},[e("div",Wt,[e("div",Pt,[d(e("input",{type:"text",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":p=>t.botForm.cashback_config[i].title=p,class:"form-control",id:"floatingInput"},null,8,Ht),[[h,t.botForm.cashback_config[i].title]]),Nt]),e("button",{type:"button",onClick:p=>t.removeCashBackConfig(i),class:"btn btn-outline-light text-danger"},Rt,8,At)])]))),128)),e("button",{type:"button",onClick:o[18]||(o[18]=s=>t.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-primary p-3 w-100"}," Добавить категорию ")])):r("",!0),e("div",Gt,[e("div",Kt,[d(e("input",{class:"form-check-input","onUpdate:modelValue":o[19]||(o[19]=s=>t.need_cashback_rules=s),type:"checkbox",id:"need-cashback-rules"},null,512),[[v,t.need_cashback_rules]]),Xt])]),t.need_cashback_rules?(l(),a("div",Yt,[e("div",Zt,[d(e("select",{class:"form-select","onUpdate:modelValue":o[20]||(o[20]=s=>t.selected_warning=s),onChange:o[21]||(o[21]=(...s)=>t.addWarning&&t.addWarning(...s)),id:"floatingSelect","aria-label":"Floating label select example"},[Qt,(l(!0),a(b,null,_(t.filteredWarnings,s=>(l(),a("option",{value:s},m(s.title),9,xt))),256))],544),[[I,t.selected_warning]]),te]),(l(!0),a(b,null,_(t.botForm.warnings,(s,i)=>(l(),a(b,null,[e("p",ee,m(t.getWarning(s.rule_key).title||"Не найдено"),1),e("div",oe,[e("div",se,[e("div",ne,[d(e("input",{class:"form-check-input","onUpdate:modelValue":p=>t.botForm.warnings[i].is_active=p,type:"checkbox",id:"warning-is-active-"+i},null,8,le),[[v,t.botForm.warnings[i].is_active]])])]),e("div",ae,[d(e("input",{type:"number",placeholder:"Значение","aria-label":"Значение","onUpdate:modelValue":p=>t.botForm.warnings[i].rule_value=p,min:"0",class:"form-control",id:"floatingInput"},null,8,ie),[[h,t.botForm.warnings[i].rule_value]]),re]),e("button",{type:"button",onClick:p=>t.removeWarning(i),class:"btn btn-outline-light text-danger"},me,8,ce)])],64))),256))])):r("",!0),pe],32)):r("",!0),t.tab===2?(l(),a(b,{key:2},[he,(t.scripts||[]).length>0?(l(),a("ul",ue,[(l(!0),a(b,null,_(t.scripts,s=>(l(),a("li",{onClick:i=>t.selectScript(s),class:f([{"bg-primary text-white":(t.selected_script||{id:null}).id===s.id},"list-group-item d-flex justify-content-between"])},[u(m(s.command||"-")+" ",1),e("small",be,"#"+m(s.id),1)],10,fe))),256))])):r("",!0),_e,t.load_script?(l(),C(M,{key:1,item:t.selected_script,onCallback:t.callbackScriptChange},null,8,["item","onCallback"])):r("",!0)],64)):r("",!0)],64)}}});const ke=e("title",null,"CashMan - система твоего бизнеса внутри",-1),ve=e("meta",{name:"description",content:"CashMan - система твоего бизнеса внутри"},null,-1),we={key:0,"data-bs-theme":"dark"},$e={class:"navbar shadow shadow-sm"},Fe={class:"container flex-row-reverse p-2"},Ce={key:0,class:"mb-0 fw-bold d-flex flex-column",style:{"font-size":"12px"}},Ve={key:0,class:"text-primary"},Be=e("i",{class:"fa-solid fa-location-dot mr-1"},null,-1),Se={key:1,class:"text-primary"},Te={key:2,class:"small d-flex justify-content-end"},Ie={href:"javascript:void(0)",class:"text-secondary fw-bold"},Ue={key:1,class:"mb-0 text-primary",style:{"font-size":"12px"}},je=e("button",{class:"btn btn-link rounded-0 border-0 p-1",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebar-menu","aria-controls":"sidebar-menu"},[e("span",{class:"navbar-toggler-icon"})],-1),Le={class:"text-body-secondary",style:{padding:"0px 0px 90px 0px"}},Me={class:"container d-flex justify-content-center flex-column align-items-center"},ze={class:"text-center mb-3"},Oe=["innerHTML"],qe=e("br",null,null,-1),Ee={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2",style:{"font-size":"12px"}},De=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),We={key:1,class:"mb-3 text-center"},Pe=e("i",{class:"fa-solid fa-map-location-dot mr-2"},null,-1),He={class:"mb-0"},Ne={class:"d-flex justify-content-center my-3"},Ae=e("i",{class:"fa-solid fa-arrow-up mr-2"},null,-1),Je={class:"offcanvas offcanvas-start custom-offcanvas",style:{width:"70%","border-radius":"0px 10px 10px 0px"},tabindex:"-1",id:"sidebar-menu","aria-labelledby":"offcanvasExampleLabel"},Re={class:"offcanvas-header"},Ge={class:"offcanvas-title",id:"offcanvasExampleLabel"},Ke=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),Xe={class:"offcanvas-body"},Ye={class:"list-unstyled"},Ze={class:"p-1"},Qe={class:"p-1"},xe={class:"p-1"},to={class:"p-1"},eo={key:0,class:"fw-bold"},oo={class:"p-1"},so={class:"p-1"},no={class:"p-1"},lo=e("div",{class:"border-top my-3"},null,-1),ao={key:0,class:"p-2"},io={class:"list-unstyled"},ro={key:0},co=e("p",{class:"mb-0"},"Телефон",-1),mo=[co],po={key:1,class:"mb-2"},ho=["href"],uo={key:2},fo=e("p",{class:"mb-0"},"Ссылки",-1),bo=[fo],_o={key:3},yo=["href"],go=e("i",{class:"fa-brands fa-instagram mr-1"},null,-1),ko={key:4},vo=["href"],wo=e("i",{class:"fa-brands fa-vk mr-1"},null,-1),$o={key:5},Fo=e("p",{class:"mb-0"},"Почта",-1),Co=[Fo],Vo=["href"],Bo={key:6},So=e("p",{class:"mb-0"},"Сайт",-1),To=[So],Io=["href"],Uo={key:1,class:"dropdown"},jo=e("button",{class:"btn btn-light w-100 dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Тема оформления ",-1),Lo={class:"dropdown-menu w-100 bg-light"},Mo=["onClick"],zo={class:"modal fade",id:"edit-shop-footer-description-modal",tabindex:"-1","aria-labelledby":"edit-shop-footer-description","aria-hidden":"true"},Oo={class:"modal-dialog modal-fullscreen"},qo={class:"modal-content"},Eo=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Do={class:"modal-body"},Wo={data(){return{currentTheme:"",themes:[{title:"Тема 1",href:"/theme1.bootstrap.min.css"},{title:"Тема 2",href:"/theme2.bootstrap.min.css"},{title:"Тема 3",href:"/theme3.bootstrap.min.css"},{title:"Тема 4",href:"/theme4.bootstrap.min.css"},{title:"Тема 5",href:"/theme5.bootstrap.min.css"},{title:"Тема 6",href:"/theme6.bootstrap.min.css"},{title:"Тема 7",href:"/theme7.bootstrap.min.css"},{title:"Тема 8",href:"/theme8.bootstrap.min.css"},{title:"Тема 9",href:"/theme9.bootstrap.min.css"},{title:"Тема 10",href:"/theme10.bootstrap.min.css"},{title:"Тема 11",href:"/theme11.bootstrap.min.css"},{title:"Тема 12",href:"/theme12.bootstrap.min.css"},{title:"Тема 13",href:"/theme13.bootstrap.min.css"},{title:"Тема 14",href:"/theme14.bootstrap.min.css"},{title:"Тема 15",href:"/theme15.bootstrap.min.css"},{title:"Тема 16",href:"/theme16.bootstrap.min.css"}]}},watch:{$route(n){let t=localStorage.getItem("cashman_global_client_theme")||null;t&&this.$nextTick(()=>{this.currentTheme=t}),this.$preloader.show(),this.$nextTick(()=>{document.body.scrollTop=document.documentElement.scrollTop=0})}},computed:{...V(["getSelf","cartTotalCount"]),tg(){return window.Telegram.WebApp},bot(){return window.currentBot},needHideMenu(){return new URLSearchParams(window.location.search).has("hide_menu")||this.$route.meta.hide_menu},links(){return{inst:(this.bot.company.links||{inst:null}).inst||null,vk:(this.bot.company.links||{vk:null}).vk||null,map_link:(this.bot.company.links||{map_link:null}).map_link||null,site:(this.bot.company.links||{site:null}).site||null}}},mounted(){let n=localStorage.getItem("cashman_global_client_theme_"+(this.bot.bot_domain||"any_bot"))||null;n&&this.$nextTick(()=>{this.currentTheme=n}),this.changeTheme(this.tg.colorScheme),this.tg.expand(),this.tg.BackButton.hide()},methods:{switchTheme(n){let t=document.querySelector("#theme");t.href=this.themes[n].href,localStorage.setItem("cashman_global_client_theme_"+(this.bot.bot_domain||"any_bot"),t.href),this.$nextTick(()=>{this.currentTheme=t.href})},goTo(n){this.$router.push({name:n})},changeTheme(n){document.querySelectorAll("[data-bs-theme]").forEach(o=>{o.setAttribute("data-bs-theme",n)})},scrollTop(){window.scrollTo(0,80)},openLink(n){this.tg.openLink(n,{try_instant_view:!0})},closeShop(){this.tg.close()}}},Po=Object.assign(Wo,{__name:"V2Layout",setup(n){return(t,o)=>(l(),a(b,null,[w(U(j),null,{default:B(()=>[ke,ve]),_:1}),t.needHideMenu?r("",!0):(l(),a("header",we,[e("div",$e,[e("div",Fe,[t.bot.company?(l(),a("p",Ce,[t.bot.company.address?(l(),a("span",Ve,[Be,u(" "+m(t.bot.company.address),1)])):(l(),a("span",Se,m(t.bot.title||"Магазин"),1)),(t.bot.company.phones||[]).length>0?(l(),a("span",Te,[e("a",Ie,m(t.bot.company.phones[0]),1)])):r("",!0)])):(l(),a("p",Ue,m(t.bot.title||"Бот"),1)),je])])])),L(t.$slots,"default"),e("footer",Le,[e("div",Me,[t.$route.name!="FeedBackV2"?(l(),a("button",{key:0,onClick:o[0]||(o[0]=c=>t.goTo("FeedBackV2")),class:"btn btn-link mb-2 w-100 p-3 text-primary"},"Обратная связь ")):r("",!0),e("p",ze,[e("span",{innerHTML:t.bot.company.description},null,8,Oe),qe,(t.getSelf||{is_admin:!1}).is_admin?(l(),a("a",Ee,[De,u(" редактировать")])):r("",!0)]),t.bot.company.address?(l(),a("p",We,[Pe,u(m(t.bot.company.address),1)])):r("",!0),e("p",He,m(t.bot.company.title)+"©"+m(new Date().getFullYear()),1),e("p",Ne,[e("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=(...c)=>t.scrollTop&&t.scrollTop(...c))},[Ae,u("Вернуться наверх")])])])]),e("div",Je,[e("div",Re,[e("h6",Ge,m(t.bot.title||"Магазин"),1),Ke]),e("div",Xe,[e("ul",Ye,[e("li",Ze,[e("a",{class:f([{"fw-bold":t.$route.name==="MenuV2"},"text-decoration-none fw-normal"]),onClick:o[2]||(o[2]=c=>t.goTo("MenuV2")),href:"javascript:void(0)"}," Главное меню",2)]),e("li",Qe,[e("a",{class:f([{"fw-bold":t.$route.name==="ProfileV2"},"text-decoration-none fw-normal"]),onClick:o[3]||(o[3]=c=>t.goTo("ProfileV2")),href:"javascript:void(0)"}," Профиль",2)]),e("li",xe,[e("a",{class:f([{"fw-bold":t.$route.name==="CatalogV2"},"text-decoration-none fw-normal"]),onClick:o[4]||(o[4]=c=>t.goTo("CatalogV2")),href:"javascript:void(0)"}," Каталог товаров",2)]),e("li",to,[e("a",{class:f([{"fw-bold":t.$route.name==="ShopCartV2"},"text-decoration-none fw-normal"]),onClick:o[5]||(o[5]=c=>t.goTo("ShopCartV2")),href:"javascript:void(0)"},[u(" Корзина "),t.cartTotalCount>0?(l(),a("span",eo,"("+m(t.cartTotalCount)+")",1)):r("",!0)],2)]),e("li",oo,[e("a",{class:f([{"fw-bold":t.$route.name==="OrdersV2"},"text-decoration-none fw-normal"]),onClick:o[6]||(o[6]=c=>t.goTo("OrdersV2")),href:"javascript:void(0)"}," История заказов",2)]),e("li",so,[e("a",{class:f([{"fw-bold":t.$route.name==="CashBackV2"},"text-decoration-none fw-normal"]),onClick:o[7]||(o[7]=c=>t.goTo("CashBackV2")),href:"javascript:void(0)"}," CashBack",2)]),e("li",no,[e("a",{class:f([{"fw-bold":t.$route.name==="FeedBackV2"},"text-decoration-none fw-normal"]),onClick:o[8]||(o[8]=c=>t.goTo("FeedBackV2")),href:"javascript:void(0)"}," Оставить отзыв",2)])]),lo,t.bot.company?(l(),a("div",ao,[e("ul",io,[(t.bot.company.phones||[]).length>0?(l(),a("li",ro,mo)):r("",!0),(t.bot.company.phones||[]).length>0?(l(),a("li",po,[e("a",{target:"_blank",href:"tel:"+t.bot.company.phones[0],class:"text-decoration-none fw-bold"},m(t.bot.company.phones[0]||"-"),9,ho)])):r("",!0),t.links.inst||t.links.vk?(l(),a("li",uo,bo)):r("",!0),t.links.inst?(l(),a("li",_o,[e("a",{target:"_blank",href:"http://instagram.com/"+t.links.inst,style:{"font-size":"12px"},class:"text-primary"},[go,u(" "+m(t.links.inst||"ссылка"),1)],8,yo)])):r("",!0),t.links.vk?(l(),a("li",ko,[e("a",{target:"_blank",href:"https://vk.com/"+t.links.vk,style:{"font-size":"12px"},class:"text-primary"},[wo,u(" "+m(t.links.vk||"ссылка"),1)],8,vo)])):r("",!0),t.bot.company.email?(l(),a("li",$o,Co)):r("",!0),e("li",null,[t.bot.company.email?(l(),a("a",{key:0,href:"mailto:"+t.bot.company.email,target:"_blank",class:"text-decoration-none fw-bold"},m(t.bot.company.email),9,Vo)):r("",!0)]),t.links.site?(l(),a("li",Bo,To)):r("",!0),e("li",null,[t.links.site?(l(),a("a",{key:0,href:t.links.site,target:"_blank",class:"text-decoration-none fw-bold"},m(t.links.site),9,Io)):r("",!0)])])])):r("",!0),(t.getSelf||{is_admin:!1}).is_admin?(l(),a("div",Uo,[jo,e("ul",Lo,[(l(!0),a(b,null,_(t.themes,(c,s)=>(l(),a("li",null,[e("button",{type:"button",onClick:i=>t.switchTheme(s),class:f([{active:t.currentTheme.indexOf(c.href)!=-1},"list-group-item list-group-item-action p-2 w-100 text-primary"]),"aria-current":"true"},m(c.title||"-"),11,Mo)]))),256))])])):r("",!0)])]),e("div",zo,[e("div",Oo,[e("div",qo,[Eo,e("div",Do,[w(ge)])])])])],64))}}),Ho={computed:{...V(["getSelf"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},self(){return window.self||null},tg(){return window.Telegram.WebApp},tgUser(){const n=new URLSearchParams(this.tg.initData);return JSON.parse(n.get("user"))},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},created(){window.currentBot=this.bot.data;const n=window.currentBot.company.schedule||[];if(window.isCorrectSchedule=t=>{if((t||[]).length<7)return!1;let o=!0;return t.forEach(c=>{o=o&&typeof c=="object"}),o},window.isCorrectSchedule(n)&&((!n||(n||[]).length===0)&&(window.currentBot.company.is_work=!0),n&&(n||[]).length>0)){const t=new Date().getUTCDay(),o=new Date().getHours(),c=new Date().getMinutes();let s=n[t].start_at||"08:00",i=parseInt(s.split(":")[0]),p=parseInt(s.split(":")[1]),k=n[t].end_at||"20:00",y=parseInt(k.split(":")[0]),S=parseInt(k.split(":")[1]),g=!1;i===o&&(g=c>=p),y===o&&(g=c<S),o>i&&o<y&&i<=y&&(g=!0),(o>i||o<=y)&&i>=y&&(g=!0),window.currentBot.company.is_work=!n[t].closed&&g}window.currentScript=this.slug_id||null,this.$store.dispatch("loadSelf").then(()=>{window.self=this.getSelf}),this.$notify({title:"Главная",text:"Успешно!",type:"success"})},methods:{open(n){this.tg.openLink(n)}}},os=Object.assign(Ho,{__name:"MainV2",props:{bot:{type:Object},slug_id:{type:String}},setup(n){return(t,o)=>{const c=F("notifications"),s=F("router-view");return l(),C(Po,null,{default:B(()=>[w(c,{position:"top right",width:"100%",speed:"10"}),w(s,{bot:n.bot},null,8,["bot"])]),_:1})}}});export{os as default};
